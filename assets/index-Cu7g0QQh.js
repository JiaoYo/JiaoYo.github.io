import{d as L,b as $,o as b,k as me,a as P,l as W,e as n,m as O,u as oe,n as ne,r as j,p as ae,i as K,q as _e,c as E,w as s,f as t,s as fe,v as H,x as Z,h as m,$ as x,y as he,N as J,z as ge,g as z,t as M,B as F,A as Q,C as X,D as ve,E as xe,F as te,G as we,H as I,I as ye,J as Ce,K as be,L as se,M as re,O as ke,P as Se,Q as Ue,R as Ne,S as Re,T as $e,U as ze,V as Me,W as Le,X as Pe,Y as Ie,Z as qe,a0 as Be,a1 as je,a2 as Ee,a3 as Fe,a4 as Te}from"./index-CwsogUdO.js";const De={src:me,alt:"linkqi",style:{width:"64px",height:"64px"}},Ve=L({name:"SystemLogo",__name:"system-logo",setup(r){return(l,i)=>(b(),$("img",De))}}),Ge={class:"absolute-lt z-1 size-full overflow-hidden"},We={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},Ae={height:"1337",width:"1337"},Oe={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Ke=["stop-color"],He=["stop-color"],Ze={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Je={height:"896",width:"967.8852157128662"},Qe={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Xe=["stop-color"],Ye=["stop-color"],et=L({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(r){const l=r,i=P(()=>W(l.themeColor,200)),f=P(()=>W(l.themeColor,500));return(e,a)=>(b(),$("div",Ge,[n("div",We,[(b(),$("svg",Ae,[n("defs",null,[a[0]||(a[0]=n("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),n("linearGradient",Oe,[n("stop",{offset:"0","stop-color":i.value,"stop-opacity":"1"},null,8,Ke),n("stop",{offset:"1","stop-color":f.value,"stop-opacity":"1"},null,8,He)])]),a[1]||(a[1]=n("g",{opacity:"1"},[n("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),n("div",Ze,[(b(),$("svg",Je,[n("defs",null,[a[2]||(a[2]=n("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),n("linearGradient",Qe,[n("stop",{offset:"0","stop-color":f.value,"stop-opacity":"1"},null,8,Xe),n("stop",{offset:"1","stop-color":i.value,"stop-opacity":"1"},null,8,Ye)])]),a[3]||(a[3]=n("g",{opacity:"1"},[n("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}});function tt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const l=Math.random()*16|0;return(r==="x"?l:l&3|8).toString(16)})}/*! js-cookie v3.0.5 | MIT */function q(r){for(var l=1;l<arguments.length;l++){var i=arguments[l];for(var f in i)r[f]=i[f]}return r}var ot={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function A(r,l){function i(e,a,o){if(!(typeof document>"u")){o=q({},l,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var h in o)o[h]&&(d+="; "+h,o[h]!==!0&&(d+="="+o[h].split(";")[0]));return document.cookie=e+"="+r.write(a,e)+d}}function f(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var a=document.cookie?document.cookie.split("; "):[],o={},d=0;d<a.length;d++){var h=a[d].split("="),U=h.slice(1).join("=");try{var g=decodeURIComponent(h[0]);if(o[g]=r.read(U,g),e===g)break}catch{}}return e?o[e]:o}}return Object.create({set:i,get:f,remove:function(e,a){i(e,"",q({},a,{expires:-1}))},withAttributes:function(e){return A(this.converter,q({},this.attributes,e))},withConverter:function(e){return A(q({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(l)},converter:{value:Object.freeze(r)}})}var le=A(ot,{path:"/"});const G=(r,l,i)=>{le.set(r,l)},B=r=>le.get(r),nt={class:"w-full flex-y-center gap-16px"},at=["src"],st={class:"flex-y-center justify-between"},rt=L({name:"PwdLogin",__name:"pwd-login",setup(r){const l=O();oe();const{formRef:i,validate:f}=ne(),e=j({username:"",password:"",captcha:"",captchaSrc:"",captchaUuid:"",checked:!0}),a=j({captchaEnable:null}),o=P(()=>{const{defaultRequiredRule:p,formRules:u,patternRules:k}=ae();return{username:u.username,password:{...p,...k.password},captcha:p}});async function d(){const{data:p,error:u}=await ve();u||(a.captchaEnable=p,a.captchaEnable===1&&h())}async function h(){e.captchaUuid=tt(),e.captchaSrc=xe+"/captcha?uuid="+e.captchaUuid}async function U(){await f(),e.checked?g(e.username,e.password,e.checked):R(),await l.login(te(e.username),te(e.password),e.captchaUuid,e.captcha)||(e.captcha="",e.captchaSrc="",a.captchaEnable===1&&h())}function g(p,u,k){G("project_storage_user",p),G("project_storage_pwd",u),G("project_storage_check",String(k))}function _(){e.username=B("project_storage_user")||"",e.password=B("project_storage_pwd")||"",e.checked=B("project_storage_check")?B("project_storage_check")=="true":!1}function R(){g("","",!1)}return K(()=>{_(),d()}),(p,u)=>{const k=Z,v=H,c=ge,S=F,w=J,y=X,T=_e("no-special");return b(),E(y,{ref_key:"formRef",ref:i,model:e,rules:o.value,size:"large","show-label":!1,onKeyup:Q(U,["enter"])},{default:s(()=>[t(v,{path:"userName"},{default:s(()=>[t(k,{value:e.username,"onUpdate:value":u[0]||(u[0]=N=>e.username=N),placeholder:m(x)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),t(v,null,{default:s(()=>[t(k,{value:e.password,"onUpdate:value":u[1]||(u[1]=N=>e.password=N),type:"password","show-password-on":"click",placeholder:m(x)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),a.captchaEnable===1?(b(),E(v,{key:0,path:"captcha"},{default:s(()=>[n("div",nt,[he(t(k,{value:e.captcha,"onUpdate:value":u[2]||(u[2]=N=>e.captcha=N),placeholder:"请输入验证码"},null,8,["value"]),[[T]]),n("img",{src:e.captchaSrc,alt:"验证码",style:{width:"160px",height:"40px"},onClick:h},null,8,at)])]),_:1})):fe("",!0),t(w,{vertical:"",size:24},{default:s(()=>[n("div",st,[t(c,{checked:e.checked,"onUpdate:checked":u[3]||(u[3]=N=>e.checked=N)},{default:s(()=>[z(M(m(x)("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["checked"])]),t(S,{type:"primary",size:"large",round:"",block:"",loading:m(l).loginLoading,onClick:U},{default:s(()=>[z(M(m(x)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),lt={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function ct(r,l){return b(),$("svg",lt,l[0]||(l[0]=[n("path",{fill:"currentColor",d:"M10.5 20h3q.2 0 .35-.15t.15-.35t-.15-.35t-.35-.15h-3q-.2 0-.35.15t-.15.35t.15.35t.35.15M7 23q-.825 0-1.412-.587T5 21V3q0-.825.588-1.412T7 1h10q.825 0 1.413.588T19 3v18q0 .825-.587 1.413T17 23zm0-5v3h10v-3zm0-2h10V6H7zM7 4h10V3H7zm0 14v3zM7 4V3z"},null,-1)]))}const it=we({name:"material-symbols-phone-android-outline-rounded",render:ct}),ut={class:"flex"},pt={class:"flex w-70px items-center"},dt=L({name:"ResetPwd",__name:"reset-pwd",setup(r){oe();const{formRef:l,validate:i}=ne(),f=O(),e=j({phnum:"",code:""}),a=I({phnum:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:["blur","change"]}],code:[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]}),o=()=>{a.value.code=[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]},d=I(0),h=async()=>{var R;await i(),a.value.code=[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}];const{data:g,error:_}=await Ce(e.phnum);if(!_){(R=window.$message)==null||R.success(`验证码已发送到${e.phnum}，请注意查收`),d.value=60;const p=setInterval(()=>{d.value-=1,d.value<=0&&clearInterval(p)},1e3)}};async function U(){await i();const{data:g,error:_}=await be({phnum:e.phnum,code:e.code});g&&(console.log(g),await f.captchaLogin(g.data))}return(g,_)=>{const R=it,p=Z,u=H,k=F,v=ye,c=F,S=J,w=X;return b(),E(w,{ref_key:"formRef",ref:l,model:e,rules:a.value,size:"large","show-label":!1,onKeyup:Q(U,["enter"])},{default:s(()=>[t(u,{path:"phone","feedback-style":{marginLeft:"70px"}},{default:s(()=>[n("div",ut,[n("div",pt,[t(R,{class:"font-size-20px mr-8px"}),_[2]||(_[2]=n("span",null,"+86",-1))])]),t(p,{clearable:"",maxlength:"11",class:"flex-1 w-100%",onBlur:o,value:e.phnum,"onUpdate:value":_[0]||(_[0]=y=>e.phnum=y),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),t(u,{path:"code"},{default:s(()=>[t(v,null,{default:s(()=>[t(p,{value:e.code,"onUpdate:value":_[1]||(_[1]=y=>e.code=y),placeholder:m(x)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),t(k,{type:"primary",ghost:"",onClick:h,loading:d.value>0},{default:s(()=>[z(M(d.value>0?`${d.value}秒后可再次获取`:"获取验证码"),1)]),_:1},8,["loading"])]),_:1})]),_:1}),t(S,{vertical:"",size:18,class:"w-full"},{default:s(()=>[t(c,{type:"primary",size:"large",round:"",block:"",onClick:U},{default:s(()=>_[3]||(_[3]=[z("登录 ")])),_:1,__:[3]})]),_:1})]),_:1},8,["model","rules"])}}}),mt=["src"],_t=L({__name:"qrcode_login",setup(r){se();const l=re(),i=I(""),f=async()=>{const{data:e,error:a}=await ke();a||(i.value=e)};return K(()=>{f(),setTimeout(()=>{l.push("/?status=3?state=2fc3534c0c034009aa7599e382d5579b#/login")},5e3)}),(e,a)=>(b(),$("iframe",{src:i.value,style:{margin:"0 auto"},height:"420",scrolling:"no",frameborder:"0"},null,8,mt))}}),ft={class:"w-400px lt-sm:w-300px"},ht={class:"logoName"},gt={class:"text-26px text-primary font-500 lt-sm:text-22px"},vt={class:"login-footer"},xt=L({name:"login",__name:"index",setup(r){const l=O();se(),re();const i=Se(),f={"pwd-login":{label:"密码登录",component:rt},qrCode:{label:"二维码登录",component:_t},"reset-pwd":{label:"验证码登录",component:dt}},e=I("pwd-login"),a=P(()=>i.darkMode?W(i.themeColor,600):i.themeColor),o=j(d());function d(){return{username:"",password:"",comfirmPassword:"",state:""}}const{createConfirmPwdRule:h,defaultRequiredRule:U,patternRules:g}=ae(),_={username:U,password:{...U,...g.password}},R=P(()=>{const v="#ffffff",c=i.darkMode?.5:.2;return Ue(v,i.themeColor,c)}),p=I(!1),u=async()=>{var S;const{data:v,error:c}=await Fe({username:o.username,password:o.password,uuid:o.state});c||(e.value="qrCode",(S=window.$message)==null||S.success("绑定成功，请重新扫码登录！"))},k=()=>{p.value=!1};return K(()=>{const v=window.location.href;console.log("fullPath:",v);const c=v.match(/status=(\d)\?/);if(!c)return;const S=c[1];if(S==="3"){const w=v.match(/state=([^#&]+)/),y=w?w[1]:"";p.value=!0,o.state=y}if(S==="5"){const w=v.match(/token=([^#&]+)/),y=w?w[1]:"";y&&l.captchaLogin({token:y})}window.addEventListener("captchaLogin",w=>{p.value=!0,o.state=w.detail.state})}),Ne(()=>{window.removeEventListener("captchaLogin",()=>{})}),(v,c)=>{const S=et,w=Ve,y=Me,T=Re,N=Ie,D=Z,V=H,ce=X,ie=qe,Y=F,ue=J,pe=Be,de=je;return b(),$("div",{class:"relative size-full flex-center overflow-hidden",style:Ee({backgroundColor:R.value})},[t(S,{"theme-color":a.value},null,8,["theme-color"]),t(N,{bordered:!1,class:"relative z-4 w-auto rd-12px","content-style":{display:"flex"}},{default:s(()=>[n("div",ft,[n("div",ht,[t(w,{class:"text-64px text-primary lt-sm:text-48px"}),n("h3",gt,M(m(x)("system.title")),1)]),t(T,{value:e.value,"onUpdate:value":c[0]||(c[0]=C=>e.value=C)},{default:s(()=>[(b(),$($e,null,ze(f,(C,ee)=>t(y,{key:ee,name:ee,tab:C.label},{default:s(()=>[t(Le,{name:m(i).page.animateMode,mode:"out-in",appear:""},{default:s(()=>[(b(),E(Pe(C.component)))]),_:2},1032,["name"])]),_:2},1032,["name","tab"])),64))]),_:1},8,["value"])])]),_:1}),t(pe,{show:p.value,"onUpdate:show":c[4]||(c[4]=C=>p.value=C),title:"",preset:"card",class:"w-500px"},{header:s(()=>c[5]||(c[5]=[z(" 绑定微信 "),n("span",{class:"c-red font-size-14px"},"绑定过期时间10分钟",-1)])),footer:s(()=>[t(ue,{justify:"end",size:16},{default:s(()=>[t(Y,{onClick:k},{default:s(()=>[z(M(m(x)("common.cancel")),1)]),_:1}),t(Y,{type:"primary",onClick:u},{default:s(()=>[z(M(m(x)("common.confirm")),1)]),_:1})]),_:1})]),default:s(()=>[t(ie,null,{default:s(()=>[t(ce,{ref:"formRef",model:o,rules:_,"label-placement":"left","label-width":100,"require-mark-placement":"left",onKeyup:Q(u,["enter"])},{default:s(()=>[t(V,{label:m(x)("page.manage.user.username"),path:"username"},{default:s(()=>[t(D,{value:o.username,"onUpdate:value":c[1]||(c[1]=C=>o.username=C),placeholder:m(x)("page.manage.user.form.username")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(V,{label:m(x)("page.login.common.password"),path:"password"},{default:s(()=>[t(D,{type:"password","show-password-on":"click",clearable:"",value:o.password,"onUpdate:value":c[2]||(c[2]=C=>o.password=C),placeholder:m(x)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(V,{label:m(x)("page.login.common.confirmPassword"),path:"comfirmPassword",rule:m(h)(o.password)},{default:s(()=>[t(D,{type:"password","show-password-on":"click",clearable:"",value:o.comfirmPassword,"onUpdate:value":c[3]||(c[3]=C=>o.comfirmPassword=C),placeholder:m(x)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label","rule"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show"]),n("div",vt,[c[6]||(c[6]=n("a",{href:"http://www.linkqi.cn/",target:"_blank",rel:"noopener noreferrer"},"杭州领祺科技有限公司",-1)),t(de,{vertical:""}),c[7]||(c[7]=n("a",{href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank",rel:"noopener noreferrer"},"浙ICP备19034246号-2",-1))])],4)}}}),yt=Te(xt,[["__scopeId","data-v-531a7d13"]]);export{yt as default};
