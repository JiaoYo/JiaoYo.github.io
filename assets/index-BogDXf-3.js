import{d as Q,a0 as Z,j as y,J as ee,K as $,o as i,e as f,f as m,ai as B,ag as E,g as a,w as t,h as v,i as g,B as N,t as k,M as ne,L as I,c as b,aW as ae,an as z,A as te,C as se,D as oe,E as le,aa as re,ab as ie,aX as de,S as ue,a6 as ce,ar as V,aY as pe,_ as me,X as _e,a9 as fe,av as ve,aw as ge,ax as ke}from"./index-COCU-dRC.js";import{d as be,e as we,g as he}from"./basic-config-CigqUKbC.js";import{_ as ye}from"./FormItemGridItem-BgX6gCvp.js";import{_ as Ne}from"./Grid-DXM2gQBE.js";const Se=w=>(ve("data-v-a7e0dc62"),w=w(),ge(),w),Ie={class:"min-h-500px flex-col-stretch gap-16px overflow-auto lt-sm:overflow-auto"},xe={key:0,class:"lan-network"},Ce={class:"lanList"},De=["onClick"],Ue={class:"but"},$e=Se(()=>m("span",{style:{width:"3px",height:"15px",background:"#1980ff",display:"inline-block","margin-right":"5px","border-radius":"20px"}},null,-1)),Be=Q({name:"basicconfig_network-manage",__name:"index",setup(w){const A=Z(),P=()=>{let s=[];for(let e=1;e<=32;e++)s.push({label:e+"",value:e});return s},c=y([{id:1,nname:"eno1",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:2,nname:"eno2",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:3,nname:"eno3",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:4,nname:"eno4",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:5,nname:"eno5",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:6,nname:"eno6",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:7,nname:"eno7",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:8,nname:"eno8",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""}]),p=y(0),q=async()=>{const{data:s,error:e}=await be();if(s){const o=JSON.parse(JSON.stringify(s));p.value=o.id||o.nname.charAt(o.nname.length-1)||o.nname.replace("eno",""),c.value[p.value-1]=o,c.value[p.value-1].id=p.value,ae(()=>{var u;const r=document.getElementById((u=c.value.find(h=>h.id==p.value))==null?void 0:u.nname);r&&r.scrollIntoView({behavior:"smooth",block:"center"})})}},M={nip:{required:!1,validator:V,trigger:["input","change","blur","password-input"]},gateway:{required:!1,validator:V,trigger:["input","change","blur","password-input"]}},F=async s=>{var r,u;const{data:e,error:o}=await he(c.value[s]);o||((r=window.$message)==null||r.destroyAll(),(u=window.$message)==null||u.success("配置成功"))},O=y(null),T=async(s,e)=>{const o=document.getElementById(s.nname);o&&o.scrollIntoView({behavior:"smooth",block:"start"}),O.value=e},l=y({visible:!1,dns1:"",dns2:""}),j={dns1:{required:!0,trigger:["blur","input"],validator:(s,e)=>e?z(e)?!0:new Error("请输入正确的DNS"):new Error("请输入DNS")},dns2:{required:!0,trigger:["blur","input"],validator:(s,e)=>e?z(e)?!0:new Error("请输入正确的DNS"):new Error("请输入DNS")}},x=async()=>{var o,r;const{data:s,error:e}=await we({dns1:l.value.dns1,dns2:l.value.dns2});e||((o=window.$message)==null||o.destroyAll(),(r=window.$message)==null||r.success("配置成功"),C())},C=()=>{l.value.visible=!1,l.value.dns1="",l.value.dns2=""},G=(s,e)=>{e.nmask=pe(s)};return ee(()=>{q()}),(s,e)=>{const o=me,r=te,u=se,h=oe,D=le,J=re,K=ie,L=de,_=ye,R=_e,W=Ne,X=fe,Y=ue,U=$("no-space"),H=$("no-auth");return i(),f("div",Ie,[c.value.length>0?(i(),f("div",xe,[m("div",Ce,[(i(!0),f(B,null,E(c.value,(n,S)=>(i(),f("div",{class:"lanItem",key:n.id,onClick:d=>T(n,S)},[Number(n.nname.charAt(n.nname.length-1)||n.nname.replace("eno",""))==p.value?(i(),b(o,{key:0,"local-icon":"lan-active",style:{"font-size":"30px"},class:"animation"})):(i(),b(o,{key:1,"local-icon":"lan-default",style:{"font-size":"30px"}})),m("span",null,k(n.nname),1)],8,De))),128))]),m("div",Ue,[a(g(N),{type:"info",ghost:"",onClick:e[0]||(e[0]=n=>l.value.visible=!0)},{default:t(()=>[v("DNS配置")]),_:1})]),a(K,{show:l.value.visible,"onUpdate:show":e[3]||(e[3]=n=>l.value.visible=n),"display-directive":"show",width:300},{default:t(()=>[a(J,{title:"设置DNS","native-scrollbar":!1,closable:""},{footer:t(()=>[a(D,{size:16},{default:t(()=>[a(g(N),{onClick:C},{default:t(()=>[v(k(s.$t("common.cancel")),1)]),_:1}),a(g(N),{type:"primary",onClick:x},{default:t(()=>[v(k(s.$t("common.confirm")),1)]),_:1})]),_:1})]),default:t(()=>[a(h,{ref:"formRef",model:l.value,rules:j,onKeyup:ne(x,["enter"])},{default:t(()=>[a(u,{label:"DNS(首选)",path:"dns1"},{default:t(()=>[I(a(r,{clearable:"",value:l.value.dns1,"onUpdate:value":e[1]||(e[1]=n=>l.value.dns1=n),placeholder:"请输入IP"},null,8,["value"]),[[U]])]),_:1}),a(u,{label:"DNS(备用)",path:"dns2"},{default:t(()=>[I(a(r,{clearable:"",value:l.value.dns2,"onUpdate:value":e[2]||(e[2]=n=>l.value.dns2=n),placeholder:"请输入IP"},null,8,["value"]),[[U]])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])])):(i(),b(L,{key:1,size:"huge",description:"未检测到有效的系统返回码"})),a(Y,null,{default:t(()=>[(i(!0),f(B,null,E(c.value,(n,S)=>(i(),b(X,{bordered:!1,size:"small",class:"card-wrapper",key:n.nname,id:n.nname},{header:t(()=>[m("div",{style:ce({color:g(A).themeScheme==="dark"?"#fff":"#000",fontWeight:"bolder",padding:"5px",fontSize:"18px",marginBottom:"10px",display:"flex",alignItems:"center"})},[$e,v(" "+k(n.nname)+"网络配置 ",1)],4)]),default:t(()=>[a(h,{ref_for:!0,ref:"formRef",model:n,rules:M,"label-placement":"left","label-width":140,"require-mark-placement":"left"},{default:t(()=>[a(W,{responsive:"screen","item-responsive":""},{default:t(()=>[a(_,{span:"24 s:12 m:6",label:"IP地址",path:"nip"},{default:t(()=>[a(r,{clearable:"",placeholder:"请输入IP地址",value:n.nip,"onUpdate:value":d=>n.nip=d},null,8,["value","onUpdate:value"])]),_:2},1024),a(_,{span:"24 s:12 m:6",label:"掩码位数",path:"nmaskbits"},{default:t(()=>[a(R,{clearable:"",options:P(),placeholder:"请选择掩码位数",value:n.nmaskbits,"onUpdate:value":d=>n.nmaskbits=d,onUpdateValue:d=>G(d,n)},null,8,["options","value","onUpdate:value","onUpdateValue"])]),_:2},1024),a(_,{span:"24 s:12 m:6",label:"掩码",path:"nmask"},{default:t(()=>[m("span",null,k(n.nmask),1)]),_:2},1024),a(_,{span:"24 s:12 m:6",label:"网关",path:"gateway"},{default:t(()=>[a(r,{clearable:"",placeholder:"请输入网关",value:n.gateway,"onUpdate:value":d=>n.gateway=d},null,8,["value","onUpdate:value"])]),_:2},1024),a(_,{span:"24 s:24 m:24"},{default:t(()=>[a(D,{justify:"center",class:"w-100%"},{default:t(()=>[I((i(),b(g(N),{type:"info",ghost:"",onClick:d=>F(S)},{default:t(()=>[v("应用配置 ")]),_:2},1032,["onClick"])),[[H,"sys.network.update"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["model"])]),_:2},1032,["id"]))),128))]),_:1})])}}}),Pe=ke(Be,[["__scopeId","data-v-a7e0dc62"]]);export{Pe as default};
