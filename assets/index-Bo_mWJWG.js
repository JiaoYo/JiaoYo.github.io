import{_ as K}from"./table-column-setting.vue_vue_type_script_setup_true_lang-Dgfnf-eW.js";import{_ as M}from"./export-DoH540Ns.js";import{_ as A}from"./round-search-CI5uNxjQ.js";import{d as Q,aw as a,k as h,o as v,e as L,g as n,w as o,i as e,B as D,af as W,h as x,t as b,$ as T,c as X,aN as N,D as Y,aV as Z,Q as ee,P as te,aT as ne,a6 as ae,_ as oe}from"./index-Dv00cP5-.js";import{a as se}from"./metar-CmLV303S.js";import{u as le,a as ie}from"./table-C1NDxmVn.js";import{e as re}from"./exportExcel-Bv4G4H50.js";import{_ as ce}from"./lodash-DP-SmS9v.js";import{_ as me}from"./DatePicker-B5jWMUXy.js";import{_ as de}from"./RadioButton-ZCIgQDGN.js";import{_ as ue}from"./FormItemGridItem-DXFV07tz.js";import{_ as _e}from"./Grid-CAhcp-3N.js";const pe={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},fe=Q({name:"realtimequery_nwpquery",__name:"index",setup(we){const C=Date.now(),r=new Date(C).setHours(0,0,0,0),{columns:y,columnChecks:g,data:p,getData:f,loading:k,mobilePagination:P,searchParams:s,resetSearchParams:ge}=le({apiFn:se,apiParams:{page:1,pageSize:20,limit:20,startTime:a(1,r)||null,endTime:a(1,Date.now()+864e5*3)||null,_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",width:50},{key:"dbtime",title:"时间",align:"center",width:160},{key:"tt2",title:"2m气温(℃)",align:"center",width:100},{key:"dt2",title:"2m露点(℃)",align:"center",width:100},{key:"rh2",title:"相对湿度(%)",align:"center",width:100},{key:"wd10",title:"10m风向(°)",align:"center",width:100},{key:"ws10",title:"10m风速(m/s)",align:"center",width:100},{key:"rain",title:"降水量(mm)",align:"center",width:100},{key:"ps",title:"气压(Pa)",align:"center",width:100},{key:"tcc",title:"总云量(%)",align:"center",width:100},{key:"ssrd",title:"太阳总辐射(w/m²)",align:"center",width:140},{key:"tsdsr",title:"太阳直接辐射(w/m²)",align:"center",width:140},{key:"ssrdiff",title:"太阳散辐射(w/m²)",align:"center",width:140},{key:"lasttime",title:"最后更新时间",align:"center",width:160}]}),{drawerVisible:he,operateType:ye,editingData:ke,handleAdd:ve,handleEdit:De,checkedRowKeys:_,onBatchDeleted:xe,onDeleted:be}=ie(p,f),S=()=>{f()},B=ce.debounce(S,1e3,{leading:!0,trailing:!1}),w=h([r,Date.now()+144e5]);async function z(c,t){s.startTime==a(1,r)&&s.endTime==a(1,Date.now()+144e5)?d.value="0":s.startTime==a(1,r)&&s.endTime==a(1,Date.now()+864e5*10)?d.value="1":d.value="2",s.startTime=a(1,t[0]),s.endTime=a(1,t[1]),f()}const E=()=>{const c={};y.value.forEach(l=>{l.key!="index"&&l.key!="operate"&&l.type!=="selection"&&(c[l.key]=l.title)});const t=[];p.value.forEach(l=>{if(_.value.includes(l.id)){const m=JSON.parse(JSON.stringify(c));for(const u in m)l.hasOwnProperty(u)?m[u]=l[u]:m[u]="";t.push(m)}}),re(t,c,"天气预报数据")},O=h("0"),R={近一天:[Date.now()-864e5*1,Date.now()],近三天:[Date.now()-864e5*3,Date.now()],近七天:[Date.now()-864e5*7,Date.now()]},d=h("0"),U=c=>{d.value=c,c=="0"?(w.value=[r,Date.now()+144e5],s.startTime=a(1,r),s.endTime=a(1,Date.now()+144e5)):(w.value=[r,Date.now()+864e5*10],s.startTime=a(1,r),s.endTime=a(1,Date.now()+864e5*10)),f()};return(c,t)=>{const l=me,m=de,u=Z,V=A,$=ue,F=_e,G=ee,j=M,q=K,H=te,I=ne,J=ae;return v(),L("div",pe,[n(J,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:o(()=>[n(G,{ref:"formRef",model:e(s),"label-placement":"left","show-feedback":!1},{default:o(()=>[n(F,{"y-gap":16,responsive:"screen","item-responsive":""},{default:o(()=>[n($,{span:"24 s:18 m:18",label:"起止时间",path:"startTime"},{default:o(()=>[n(l,{value:w.value,"onUpdate:value":t[0]||(t[0]=i=>w.value=i),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":z,"default-time":["00:00:00","23:59:59"],shortcuts:R},null,8,["value"]),n(u,{value:d.value,"onUpdate:value":[t[1]||(t[1]=i=>d.value=i),U],class:"ml-20px"},{default:o(()=>[n(m,{value:"0",label:"超短期"}),n(m,{value:"1",label:"短期"})]),_:1},8,["value"]),n(e(D),{type:"primary",ghost:"",onClick:e(B),class:"ml-20px"},{icon:o(()=>[n(V,{class:W(["text-icon",{"animate-spin":e(k)}])},null,8,["class"])]),default:o(()=>[x(" "+b(e(T)("common.search")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model"])]),"header-extra":o(()=>[O.value=="0"?(v(),X(H,{key:0,align:"center",justify:"end",class:"w-100% mb--10px"},{default:o(()=>[n(e(D),{onClick:E,size:"small",disabled:e(_).length==0},{icon:o(()=>[n(j,{class:"text-icon"})]),default:o(()=>[x(" "+b(e(T)("common.export")),1)]),_:1},8,["disabled"]),n(q,{columns:e(g),"onUpdate:columns":t[2]||(t[2]=i=>N(g)?g.value=i:null)},null,8,["columns"])]),_:1})):Y("",!0)]),default:o(()=>[n(I,{"checked-row-keys":e(_),"onUpdate:checkedRowKeys":t[3]||(t[3]=i=>N(_)?_.value=i:null),columns:e(y),data:e(p),size:"small",loading:e(k),remote:"","row-key":i=>i.id,pagination:e(p).length?e(P):void 0,class:"sm:h-full","flex-height":!0,"scroll-x":""},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1})])}}}),$e=oe(fe,[["__scopeId","data-v-8cca1974"]]);export{$e as default};
