import{d as j,o as v,e as w,f as e,aa as X,R as M,j as m,bl as ue,b as U,bm as xe,i as B,bn as oe,P as Y,Q as Z,c as V,w as N,t as W,G as fe,bo as se,ae as E,A as P,bp as Le,a4 as he,l as ke,aG as Q,bq as G,g as A,br as _e,bs as ve,ao as le,am as pe,h as me,a3 as Ce,bt as ge,n as Se,s as Ie,u as Be,r as Ae,bu as ce,bv as Te,Z as Oe}from"./index-XIywrL3G.js";import{d as Me}from"./debounce-Cj1DgIV1.js";import{f as Re,a as ze,b as De,c as Fe}from"./home-BTvimOAy.js";import{u as be,i as He,a as Ne,b as Ve,c as We,d as Ee,e as je,f as Ge,g as qe,h as Pe,j as Ye,k as Ze,l as Qe,m as Ue,n as Je,o as Xe,p as Ke,q as et,r as tt,s as at,L as te}from"./installCanvasRenderer-CyOrKSjT.js";import{i as ot}from"./install-CX03SWNg.js";import{_ as st}from"./NumberAnimation-UmZlwurv.js";const lt={class:"loader-overlay"},nt=j({__name:"loading",props:{color:{default:"#1890ff"}},setup(o){const a=o;return(h,r)=>(v(),w("div",lt,[e("div",{class:"loader",style:X({"--c":`no-repeat linear-gradient(${a.color} 0 0)`})},null,4)]))}}),rt=M(nt,[["__scopeId","data-v-c4fc24aa"]]),it=o=>(Y("data-v-4ea05f61"),o=o(),Z(),o),ct=["width","height"],dt=["fill","stroke","d"],ut=["stroke"],ft=it(()=>e("path",{fill:"transparent",stroke:"{mergedColor[1]}",d:"M 5 20 L 5 10 L 12 3  L 60 3 L 68 10"},null,-1)),ht=["stroke","d"],_t={class:"dv-border-box-content"},vt=j({__name:"border-box-13",props:{color:{type:Array,default:()=>[]},backgroundColor:{type:String,default:"transparent"}},setup(o){const a=o,h=["#6586ec","#2cf7fe"],r=m(null),{width:c,height:i}=ue(r,{width:0,height:0},{box:"border-box"}),d=U(()=>xe(h,a.color));return(_,s)=>(v(),w("div",{class:"dv-border-box-13 dv-border-box",ref_key:"domRef",ref:r},[(v(),w("svg",{width:B(c),height:B(i),class:"dv-border-svg-container"},[e("path",{fill:o.backgroundColor,stroke:d.value[0],d:`
            M 5 20 L 5 10 L 12 3  L 60 3 L 68 10
            L ${B(c)-20} 10 L ${B(c)-5} 25
            L ${B(c)-5} ${B(i)-5} L 20 ${B(i)-5}
            L 5 ${B(i)-20} L 5 20
        `},null,8,dt),e("path",{fill:"transparent","stroke-width":"3","stroke-linecap":"round","stroke-dasharray":"10, 5",stroke:d.value[0],d:"M 16 9 L 61 9"},null,8,ut),ft,e("path",{fill:"transparent",stroke:d.value[1],d:`M ${B(c)-5} ${B(i)-30} L ${B(c)-5} ${B(i)-5} L ${B(c)-30} ${B(i)-5}`},null,8,ht)],8,ct)),e("div",_t,[oe(_.$slots,"default",{},void 0,!0)])],512))}}),pt=M(vt,[["__scopeId","data-v-4ea05f61"]]),ye=o=>(Y("data-v-beef5fe6"),o=o(),Z(),o),mt={key:0,class:"item_title"},gt=ye(()=>e("div",{class:"zuo"},null,-1)),bt={class:"title-inner"},yt=ye(()=>e("div",{class:"you"},null,-1)),wt=j({__name:"item-wrap",props:{title:{default:""}},setup(o){return(a,h)=>{const r=pt;return v(),V(r,null,{default:N(()=>[a.title!==""?(v(),w("div",mt,[gt,e("span",bt,"   "+W(a.title)+"   ",1),yt])):fe("",!0),e("div",{class:se(a.title!==""?"item_title_content":"item_title_content_def")},[oe(a.$slots,"default",{},void 0,!0)],2)]),_:3})}}}),$t=M(wt,[["__scopeId","data-v-beef5fe6"]]),we=o=>(Y("data-v-2dd4fe8a"),o=o(),Z(),o),xt=["width","height"],Lt=["d"],kt=we(()=>e("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"1"},null,-1)),Ct=we(()=>e("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"},null,-1)),St=[kt,Ct],It=["fill"],Bt=["dur","path"],At=["fill","points"],Tt=["stroke","href"],Ot=["stroke","href","mask"],Mt=["from","to","dur"],Rt={class:"border-box-content"},zt={__name:"border-box-8",props:{color:{type:Array,default:()=>[]},dur:{type:Number,default:3},backgroundColor:{type:String,default:"transparent"},reverse:{type:Boolean,default:!1}},setup(o){const a=o,h=()=>"xxxx-xxxx-xxxx".replace(/[x]/g,()=>Math.floor(Math.random()*16).toString(16)),r=m(null),c=m(0),i=m(0),d=h(),_=`border-box-8-path-${d}`,s=`border-box-8-gradient-${d}`,t=`border-box-8-mask-${d}`,f=["#235fa7","#4fd2dd"],l=m([...f]),n=(b,y)=>{const k=[...b];return y.forEach((T,R)=>{T!==void 0&&(k[R]=T)}),k},u=()=>{r.value&&(c.value=r.value.clientWidth,i.value=r.value.clientHeight)},p=U(()=>(c.value+i.value-5)*2),g=U(()=>a.reverse?`M 2.5, 2.5 L 2.5, ${i.value-2.5} L ${c.value-2.5}, ${i.value-2.5} L ${c.value-2.5}, 2.5 L 2.5, 2.5`:`M2.5, 2.5 L${c.value-2.5}, 2.5 L${c.value-2.5}, ${i.value-2.5} L2.5, ${i.value-2.5} L2.5, 2.5`);return E(()=>a.color,b=>{l.value=n(f,b)},{immediate:!0}),P(()=>{u(),window.addEventListener("resize",u)}),(b,y)=>(v(),w("div",{class:"dv-border-box-8",ref_key:"containerRef",ref:r},[(v(),w("svg",{class:"dv-border-svg-container",width:c.value,height:i.value},[e("defs",null,[e("path",{id:_,d:g.value,fill:"transparent"},null,8,Lt),e("radialGradient",{id:s,cx:"50%",cy:"50%",r:"50%"},St),e("mask",{id:t},[e("circle",{cx:"0",cy:"0",r:"150",fill:`url(#${s})`},[e("animateMotion",{dur:`${o.dur}s`,path:g.value,rotate:"auto",repeatCount:"indefinite"},null,8,Bt)],8,It)])]),e("polygon",{fill:o.backgroundColor,points:`5, 5 ${c.value-5}, 5 ${c.value-5} ${i.value-5} 5, ${i.value-5}`},null,8,At),e("use",{stroke:l.value[0],"stroke-width":"1",href:`#${_}`},null,8,Tt),e("use",{stroke:l.value[1],"stroke-width":"3",href:`#${_}`,mask:`url(#${t})`},[e("animate",{attributeName:"stroke-dasharray",from:`0, ${p.value}`,to:`${p.value}, 0`,dur:`${o.dur}s`,repeatCount:"indefinite"},null,8,Mt)],8,Ot)],8,xt)),e("div",Rt,[oe(b.$slots,"default",{},void 0,!0)])],512))}},Dt=M(zt,[["__scopeId","data-v-2dd4fe8a"]]);be(ot);be([He,Ne,Ve,We,Ee,je,Ge,qe,Pe,Ye,Ze,Qe,Ue,Je,Xe,Ke,et,tt]);function K(o,a={}){const h=Le(),r=he(),c=U(()=>r.darkMode),i=m(null),d={width:0,height:0},{width:_,height:s}=ue(i,d);let t=null;const f=o(),{onRender:l=x=>{g()&&c.value},onUpdated:n=x=>{x.hideLoading()},onDestroy:u}=a;function p(){return i.value&&d.width>0&&d.height>0}function g(){return!!(i.value&&t)}async function b(x=()=>f){if(!g())return;const D=x(f,o);Object.assign(f,D),g()&&(t==null||t.clear()),t==null||t.setOption({...D,backgroundColor:"transparent"}),await(n==null?void 0:n(t))}async function y(x=()=>f){const D=x(f,o);t==null||t.setOption({...D,backgroundColor:"transparent"})}function k(x){t==null||t.setOption(x)}async function T(){if(!g()){const x=c.value?"dark":"light";await Q(),t=at(i.value,x),t.setOption({...f,backgroundColor:"transparent"}),await(l==null?void 0:l(t))}}function R(){t==null||t.resize()}async function I(){t&&(await(u==null?void 0:u(t)),t==null||t.dispose(),t=null)}async function q(){await I(),await T(),await(n==null?void 0:n(t))}async function $(x,D){if(d.width=x,d.height=D,!p()){await I();return}g()&&R(),await T()}h.run(()=>{E([_,s],([x,D])=>{$(x,D)}),E(c,()=>{q()})}),ke(()=>{I(),h.stop()});function J(){t==null||t.hideLoading()}return{domRef:i,updateOptions:b,updateOptionsAsync:y,setOptions:k,hideLoading:J}}const Ft=j({name:"LineChart",__name:"pieChart",props:{value:{type:Number,default:0}},setup(o){const a=o,h=[{max:70,color:"#4CAF50"},{max:90,color:"#FFB300"},{max:100,color:"#F44336"}],r=f=>(h.find(n=>f<=n.max)||h[h.length-1]).color,{domRef:c,updateOptionsAsync:i,hideLoading:d,updateOptions:_}=K(()=>({series:[{type:"pie",radius:["60%","78%"],avoidLabelOverlap:!1,clockWise:!0,animation:!0,itemStyle:{borderWidth:0,borderColor:"transparent",color:"",shadowColor:"",shadowBlur:0},hoverAnimation:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:[{value:0,label:{formatter:function(f){return f.value+"%"},position:"center",show:!0,textStyle:{fontSize:G(14),fontWeight:"bold",color:""}},itemStyle:{borderRadius:0}},{value:0,name:"invisible",itemStyle:{color:"#ccc",borderWidth:0,borderColor:"transparent"}}]}]}));async function s(){i(f=>{d(),f.series[0].data[0].value=a.value,f.series[0].data[1].value=100-a.value;const l=r(a.value);return f.series[0].itemStyle.color=l,f.series[0].itemStyle.shadowColor=l,f.series[0].label.color=l,f})}E(()=>a.value,async f=>{s()});async function t(){s()}return t(),(f,l)=>(v(),w("div",{ref_key:"domRef",ref:c,class:"chart"},null,512))}}),ae=M(Ft,[["__scopeId","data-v-59d0d00b"]]),z=o=>(Y("data-v-72cfccb9"),o=o(),Z(),o),Ht={class:"list"},Nt={class:"item"},Vt={class:"item_info"},Wt={class:"item_info_text"},Et=z(()=>e("path",{fill:"currentColor",d:"M34 21.08L30.86 8.43A2 2 0 0 0 28.94 7H7.06a2 2 0 0 0-1.93 1.47L2 21.08a1 1 0 0 0 0 .24V29a2 2 0 0 0 2 2h28a2 2 0 0 0 2-2v-7.69a1 1 0 0 0 0-.23M4 29v-7.56L7.06 9h21.87L32 21.44V29Z",class:"clr-i-outline clr-i-outline-path-1"},null,-1)),jt=z(()=>e("path",{fill:"currentColor",d:"M6 20h24v2H6z",class:"clr-i-outline clr-i-outline-path-2"},null,-1)),Gt=z(()=>e("path",{fill:"currentColor",d:"M26 24h4v2h-4z",class:"clr-i-outline clr-i-outline-path-3"},null,-1)),qt=z(()=>e("path",{fill:"none",d:"M0 0h36v36H0z"},null,-1)),Pt=[Et,jt,Gt,qt],Yt=z(()=>e("div",{class:"title"},"磁盘",-1)),Zt={class:"item"},Qt={class:"item_info"},Ut={class:"item_info_text"},Jt=_e('<g fill="none" data-v-72cfccb9><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 28h38v14H5zM5 6h38v14H5z" data-v-72cfccb9></path><rect width="4" height="4" x="11" y="11" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="11" y="33" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="19" y="11" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="19" y="33" fill="currentColor" rx="2" data-v-72cfccb9></rect><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M31 13h4m-4 22h4" data-v-72cfccb9></path></g>',1),Xt=[Jt],Kt=z(()=>e("div",{class:"title"},"内存",-1)),ea={class:"item brBom"},ta={class:"item_info"},aa={class:"item_info_text"},oa=z(()=>e("path",{fill:"currentColor",d:"M15 9H9v6h6zm-2 4h-2v-2h2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2zm-4 6H7V7h10z"},null,-1)),sa=[oa],la=z(()=>e("div",{class:"title"},"CPU",-1)),na={class:"item_Cardinfo"},ra=z(()=>e("div",{class:"title"},"日志接收总数",-1)),ia={class:"value"},ca={class:"logTotalClass"},da=z(()=>e("span",{class:"unit"},"条",-1)),ua={class:"item_Cardinfo"},fa=z(()=>e("div",{class:"title"},"日志源资产数",-1)),ha={class:"value"},_a={class:"logTotalClass"},va=z(()=>e("span",{class:"unit"},"条",-1)),pa=j({__name:"left-top",props:{data:{type:Object,default:()=>({})},logInfo:{type:Object,default:()=>({logTotal:void 0,logSource:void 0})},key:{type:Number,default:""}},setup(o){const a=o,h=[{max:70,color:"#4CAF50"},{max:90,color:"#FFB300"},{max:100,color:"#F44336"}],r=c=>{const i=h.find(d=>c<=d.max);return i?i.color:"#CCCCCC"};return(c,i)=>{var s,t,f,l,n,u;const d=st,_=Dt;return v(),w("div",Ht,[e("div",Nt,[e("div",Vt,[e("div",Wt,[(v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",style:X({color:r((s=a.data.disk)==null?void 0:s.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 36 36"},Pt,4)),Yt]),(v(),V(ae,{class:"pieChart",key:a.key,value:(t=a.data.disk)==null?void 0:t.replace("%","")},null,8,["value"]))])]),e("div",Zt,[e("div",Qt,[e("div",Ut,[(v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",style:X({color:r((f=a.data.mem)==null?void 0:f.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 48 48"},Xt,4)),Kt]),(v(),V(ae,{class:"pieChart",key:a.key,value:(l=a.data.mem)==null?void 0:l.replace("%","")},null,8,["value"]))])]),e("div",ea,[e("div",ta,[e("div",aa,[(v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",style:X({color:r((n=a.data.cpu)==null?void 0:n.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 24 24"},sa,4)),la]),(v(),V(ae,{class:"pieChart",key:a.key,value:(u=a.data.cpu)==null?void 0:u.replace("%","")},null,8,["value"]))])]),A(_,{class:"itemCard",dur:60},{default:N(()=>[e("div",na,[ra,e("div",ia,[e("span",ca,[A(d,{ref:"numberAnimationInstRef",from:0,to:a.logInfo.logTotal||0},null,8,["to"])]),da])])]),_:1}),A(_,{class:"itemCard",dur:60},{default:N(()=>[e("div",ua,[fa,e("div",ha,[e("span",_a,[A(d,{ref:"numberAnimationInstRef",from:0,to:a.logInfo.logSource||0},null,8,["to"])]),va])])]),_:1})])}}}),ma=M(pa,[["__scopeId","data-v-72cfccb9"]]),ga="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%3e%3cpath%20fill='%23fff'%20d='M2.5%2012c-.13%200-.25-.05-.35-.14l-2-1.93A.55.55%200%200%201%200%209.57V2.43c0-.13.06-.26.15-.36l2-1.93c.15-.14.36-.18.55-.1c.18.08.3.26.3.46v11c0%20.2-.12.38-.3.46c-.07.03-.13.04-.2.04m7-3.5c-.06%200-.13-.01-.19-.04A.5.5%200%200%201%209%208l-.01-4.06c0-.2.12-.39.31-.46c.19-.08.4-.03.54.11l1.67%201.7c.38.39.38%201.02-.01%201.41L9.85%208.35a.47.47%200%200%201-.35.15'%20/%3e%3cpath%20fill='none'%20stroke='%23fff'%20stroke-linecap='round'%20d='M2.5%202.5H6c.28%200%20.5.22.5.5v1m-4%205.5H6c.28%200%20.5-.22.5-.5V8M11%206H5'%20stroke-width='1'%20/%3e%3c/svg%3e",ba=o=>(Y("data-v-6581f397"),o=o(),Z(),o),ya={class:"inner_right"},wa=ba(()=>e("div",{class:"dibu"},null,-1)),$a={class:"info"},xa={class:"alarmName"},La={class:"info_bottom"},ka={class:"alarmLevel"},Ca={class:"time"},Sa=3e3,Ia=3,Ba={__name:"left-center",props:{data:{type:Array,default:()=>[]}},setup(o){const a=o,h=[{label:"一般",color:"#0091FF",value:0},{label:"低级",color:"#ffd600",value:1},{label:"中级",color:"#ffab00",value:2},{label:"高级",color:"#ff6d00",value:3},{label:"严重",color:"#dd2c00",value:4}],r=p=>h.find(g=>g.value===p)||h[0],c=m(!0),i=U(()=>c.value?[...a.data,...a.data]:a.data),d=m(!1),_=m(),s=m();let t=null;const f=()=>{d.value=!0,c.value=!1,clearInterval(t)},l=()=>{d.value=!1,c.value=!0,Q(()=>{n()})},n=()=>{clearInterval(t),t=setInterval(()=>{var T;if(d.value||!c.value)return;const p=_.value,g=s.value;if(!p||!g)return;const b=((T=g.children[0])==null?void 0:T.offsetHeight)||0,y=g.scrollHeight/2,k=p.scrollTop+b*Ia;k>=y?u(k,()=>{p.scrollTop=k-y}):u(k)},Sa)},u=(p,g)=>{const b=_.value,y=800,k=b.scrollTop,T=p-k,R=performance.now(),I=$=>$<.5?2*$*$:-1+(4-2*$)*$,q=$=>{const J=$-R,x=Math.min(J/y,1);b.scrollTop=k+T*I(x),x<1?requestAnimationFrame(q):g&&g()};requestAnimationFrame(q)};return P(()=>{Q(()=>{n()})}),ve(()=>{clearInterval(t)}),(p,g)=>(v(),w("div",{class:se(["left_boottom scroll-view",{"show-scrollbar":d.value}]),ref_key:"scrollViewRef",ref:_,onMouseenter:f,onMouseleave:l},[e("div",{ref_key:"listRef",ref:s,class:"left_boottom_list"},[(v(!0),w(le,null,pe(i.value,(b,y)=>(v(),w("div",{class:"left_boottom_item",key:y},[e("div",ya,[wa,e("div",$a,[e("div",xa,"告警名称："+W(b.aname),1),e("div",La,[e("div",ka,[me(" 告警等级： "),e("span",{style:X({color:r(b.alevel).color,border:"1px solid "+r(b.alevel).color,padding:"0 5px",borderRadius:"5px"})},W(r(b.alevel).label),5)]),e("div",Ca,"时间："+W(b.dbtime),1)])])])]))),128))],512)],34))}},Aa=M(Ba,[["__scopeId","data-v-6581f397"]]),Ta=j({name:"LineChart",__name:"loglineChart",props:{data:{type:Array,default:[]}},setup(o){const a=o,{domRef:h,updateOptions:r,updateOptionsAsync:c,hideLoading:i}=K(()=>({xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:G(12)}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.2)"}},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:G(12)}},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"},valueFormatter:function(s){return(s+""!="undefined"?s:"--")+"条"}},grid:{left:"5%",right:"5%",bottom:"0%",containLabel:!0},dataZoom:[{type:"inside",start:0,show:!1,end:100}],series:[{color:"rgb(9, 202, 243)",type:"line",lineStyle:{width:1,normal:{color:"rgb(9, 202, 243)",shadowBlur:3,shadowColor:"rgba(9, 202, 243,0.5)",shadowOffsetY:8}},areaStyle:{color:new te(0,0,0,1,[{offset:0,color:"rgba(9, 202, 243,0.2)"},{offset:1,color:"rgba(9, 202, 243,0)"}],!1),shadowColor:"rgba(9, 202, 243,0.5)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0}]}));async function d(){await new Promise(s=>{setTimeout(s,1e3)}),r(s=>(i(),a.data&&(s.xAxis.data=a.data.map(t=>t.date),s.series[0].data=a.data.map(t=>t.dailycount)),s))}async function _(){d()}return E(()=>a.data,()=>{c(s=>(i(),a.data&&(s.xAxis.data=a.data.map(t=>t.date),s.series[0].data=a.data.map(t=>[t.date,t.dailycount])),s))}),_(),(s,t)=>(v(),w("div",{ref_key:"domRef",ref:h,class:"chart"},null,512))}}),Oa=M(Ta,[["__scopeId","data-v-3a13ec33"]]),Ma=j({name:"LineChart",__name:"auditlineChart",props:{data:{type:Array,default:[]}},setup(o){const a=o,{domRef:h,updateOptions:r,updateOptionsAsync:c,hideLoading:i}=K(()=>({xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:G(12)}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.2)"}},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:G(12)}},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"},valueFormatter:function(s){return(s+""!="undefined"?s:"--")+"条"}},grid:{left:"5%",right:"5%",bottom:"0%",containLabel:!0},dataZoom:[{type:"inside",start:0,show:!1,end:100}],series:[{color:"rgb(9, 202, 243)",type:"line",lineStyle:{width:1,normal:{color:"rgb(9, 202, 243)",shadowBlur:3,shadowColor:"rgba(9, 202, 243,0.5)",shadowOffsetY:8}},areaStyle:{color:new te(0,0,0,1,[{offset:0,color:"rgba(9, 202, 243,0.2)"},{offset:1,color:"rgba(9, 202, 243,0)"}],!1),shadowColor:"rgba(9, 202, 243,0.5)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0}]}));async function d(){await new Promise(s=>{setTimeout(s,1e3)}),r(s=>(i(),a.data&&(s.xAxis.data=a.data.map(t=>t.logname),s.series[0].data=a.data.map(t=>[t.logname,t.count])),s))}async function _(){d()}return E(()=>a.data,()=>{c(s=>(a.data&&(s.xAxis.data=a.data.map(t=>t.logname),s.series[0].data=a.data.map(t=>[t.logname,t.count])),s))}),_(),(s,t)=>(v(),w("div",{ref_key:"domRef",ref:h,class:"chart"},null,512))}}),Ra=M(Ma,[["__scopeId","data-v-b192f843"]]),za=j({name:"LineChart",__name:"assetsType",props:{data:{type:Object,default:()=>({})}},setup(o){const a=o;E(()=>a.data,async l=>{s()});const h=Ce(),r=m(null),{domRef:c,updateOptionsAsync:i,hideLoading:d,updateOptions:_}=K(()=>({backgroundColor:"#0f1c3f",tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",borderWidth:1,backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"}},legend:{show:!1},grid:{left:"5%",right:"5%",bottom:"2%",top:"5%",containLabel:!0},series:[{type:"pie",selectedMode:"single",radius:[0,"30%"],label:{position:"inner",fontSize:G(14),color:"#f2f3f5",fontWeight:"bold"},labelLine:{show:!1},itemStyle:{shadowBlur:8,shadowColor:"rgba(255, 255, 255, 0.2)",borderRadius:6},data:[]},{type:"pie",radius:["45%","60%"],labelLine:{length:30,lineStyle:{color:"#aaa"}},label:{color:"#fff",fontSize:G(14),fontWeight:"bold"},itemStyle:{borderRadius:6,shadowBlur:8,shadowOffsetX:0,shadowColor:"rgba(255, 255, 255, 0.2)",color:l=>{const n=[["#00c6ff","#0072ff"],["#f77062","#fe5196"],["#00f2fe","#4facfe"],["#43e97b","#38f9d7"],["#fa709a","#fee140"],["#7b4397","#dc2430"],["#1f4037","#99f2c8"]],u=n[l.dataIndex%n.length];return new te(0,0,1,1,[{offset:0,color:u[0]},{offset:1,color:u[1]}])}},data:[]}],animationDuration:1e3,animationEasing:"cubicOut"}));async function s(){i(l=>{if(d(),JSON.stringify(a.data)!=="{}"){l.series[0].data=Object.keys(a.data).map(u=>({name:u,value:Object.values(a.data[u]).reduce((p,g)=>p+g,0)}));const n=[];Object.keys(a.data).map(u=>a.data[u]).forEach(u=>{for(let p in u)u.hasOwnProperty(p)&&n.push({name:p,value:u[p]})}),l.series[0].radius=["0%","30%"],l.series[1].radius=["45%","60%"],l.series[1].data=n}else l.series[0].radius=["0%","0%"],l.series[1].radius=["0%","0%"];return l})}function t(){_((l,n)=>(n(),l))}async function f(){s()}return E(()=>h.locale,()=>{t()}),f(),P(()=>{r.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),ge(()=>{r.value!==null&&(clearInterval(r.value),r.value=null)}),(l,n)=>(v(),w("div",{ref_key:"domRef",ref:c,class:"chart"},null,512))}}),Da=M(za,[["__scopeId","data-v-768935cd"]]),Fa=o=>(Y("data-v-bd3a938c"),o=o(),Z(),o),Ha=["aria-label"],Na={class:"inner_right"},Va=Fa(()=>e("div",{class:"dibu"},null,-1)),Wa={class:"info"},Ea={class:"info_left"},ja={class:"logName"},Ga={class:"scname"},qa={class:"status"},Pa=3e3,Ya=3,Za={__name:"right-top",props:{data:{type:Array,default:()=>[]}},setup(o){const a=o,h=m(!1),r=m(),c=m();let i=null;const d=m(!0),_=U(()=>d.value?[...a.data,...a.data]:a.data),s=()=>{h.value=!0,d.value=!1,clearInterval(i)},t=()=>{h.value=!1,d.value=!0,Q(()=>{f()})},f=()=>{clearInterval(i),a.data.length!==0&&(i=setInterval(()=>{var y;if(h.value||!d.value)return;const n=r.value,u=c.value;if(!n||!u)return;const p=((y=u.children[0])==null?void 0:y.offsetHeight)||0,g=u.scrollHeight/2,b=n.scrollTop+p*Ya;b>=g?l(b,()=>{n.scrollTop=b-g}):l(b)},Pa))},l=(n,u)=>{const p=r.value,g=800,b=p.scrollTop,y=n-b,k=performance.now(),T=I=>I<.5?2*I*I:-1+(4-2*I)*I,R=I=>{const q=I-k,$=Math.min(q/g,1);p.scrollTop=b+y*T($),$<1?requestAnimationFrame(R):u&&u()};requestAnimationFrame(R)};return E(()=>a.data,n=>{n.length>0&&Q(()=>{r.value.scrollTop=0,f()})},{immediate:!0}),P(()=>{Q(()=>{f()})}),ve(()=>{clearInterval(i)}),(n,u)=>(v(),w("div",{class:se(["left_boottom scroll-view",{"show-scrollbar":h.value}]),ref_key:"scrollViewRef",ref:r,onMouseenter:s,onMouseleave:t},[e("div",{ref_key:"listRef",ref:c,class:"left_boottom_list"},[(v(!0),w(le,null,pe(_.value,(p,g)=>(v(),w("div",{class:"left_boottom_item",key:g,"aria-label":`项目${g%a.data.length+1}: ${p.type}, 状态: ${p.enable===0?"正常":"异常"}`,tabindex:"0"},[e("div",Na,[Va,e("div",Wa,[e("div",Ea,[e("div",ja,W(p.type),1),e("div",Ga,W(p.scname),1)]),e("div",qa,W(p.enable==0?"🟢":"🔴"),1)])])],8,Ha))),128))],512)],34))}},Qa=M(Za,[["__scopeId","data-v-bd3a938c"]]),Ua=j({name:"LineChart",__name:"barChart",props:Se({data:{type:Array,default:[]}},{data:{required:!0},dataModifiers:{}}),emits:["update:data"],setup(o){const a=o,h=Ie(o,"data"),r=m(null),c=Date.now();new Date(c).setHours(23,59,59,999);const{domRef:i,updateOptions:d,updateOptionsAsync:_,hideLoading:s}=K(()=>({tooltip:{trigger:"item",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",borderWidth:2,textStyle:{color:"#FFF"},valueFormatter:function(l){return(l+""!="undefined"?l:"--")+"条"}},xAxis:{data:[],axisLine:{lineStyle:{color:"#B4B4B4"}},axisTick:{show:!1},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:G(12)}},yAxis:[{splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.3)"}},axisLine:{lineStyle:{color:"#B4B4B4"}},axisLabel:{formatter:"{value}",fontSize:G(12),color:"#B4B4B4",fontWeight:500}}],grid:{left:"3%",right:"10%",bottom:"3%",top:"5%",containLabel:!0},series:[{type:"bar",barMaxWidth:30,itemStyle:{borderRadius:10,color:new te(0,0,0,1,[{offset:0,color:"#956FD4"},{offset:1,color:"#3EACE5"}])},data:[]}]}));async function t(){await new Promise(l=>{setTimeout(l,1e3)}),d(l=>(s(),h.value&&(l.xAxis.data=a.data.map(n=>n.logname),l.series[0].data=a.data.map(n=>[n.logname,n.count])),l))}E(()=>h.value,l=>{_(n=>(h.value&&(n.xAxis.data=a.data.map(u=>u.logname),n.series[0].data=a.data.map(u=>[u.logname,u.count])),n))});async function f(){await t()}return P(()=>{i.value=r.value}),f(),(l,n)=>(v(),w("div",{ref_key:"chartDom",ref:r,class:"chart"},null,512))}}),de=M(Ua,[["__scopeId","data-v-4a2adcfd"]]),Ja=o=>(Y("data-v-1b98345a"),o=o(),Z(),o),Xa={class:"content_wrap"},Ka={class:"d-flex jc-center title_wrap"},eo=_e('<div class="zuojuxing" data-v-1b98345a></div><div class="youjuxing" data-v-1b98345a></div><div class="guang" data-v-1b98345a></div><div class="d-flex jc-center" data-v-1b98345a><div class="title" data-v-1b98345a><span class="title-text" data-v-1b98345a>日志审计可视化</span></div></div>',4),to={class:"top_Info"},ao=Ja(()=>e("div",{class:"left"},null,-1)),oo={class:"right"},so={class:"setting_icon"},lo=["src"],no={class:"index-box"},ro={class:"content_left"},io={class:"content_center"},co={class:"content_right"},uo=j({name:"bigscreen",__name:"index",setup(o){const a=Be(),h=he(),r=Ae({dateDay:"",dateYear:"",dateWeek:"",timing:null}),c=["周日","周一","周二","周三","周四","周五","周六"];(()=>{r.timing=setInterval(()=>{r.dateDay=ce().format("YYYY-MM-DD hh : mm : ss"),r.dateWeek=c[ce().day()]},1e3)})();const d=[{label:"近一天",value:0},{label:"近一周",value:1},{label:"近一月",value:2},{label:"近半年",value:3},{label:"近一年",value:4}],_=m(2),s=m(),t=m(),f=async()=>{const{data:C,error:F}=await ze({dateType:_.value});F||(t.value=C)},l=m(),n=m(),u=m(),p=m(),g=m(),b=async()=>{const{data:C,error:F}=await De({dateType:_.value,lsid:u.value,ctype:g.value});F||(n.value=Number(C.total),_.value==3||_.value==4?l.value=C.data.map(O=>(O.date=O.dateStr,O)).sort((O,L)=>{let H=new Date(O.date),S=new Date(L.date);return H-S}):l.value=C.data.sort((O,L)=>{let H=new Date(O.date),S=new Date(L.date);return H-S}))},y=m(),k=async()=>{const{data:C,error:F}=await Re();if(!F){y.value=C,y.value.logSoursceList.sort((L,H)=>L.enable-H.enable);const O=new Set;C.logSoursceList.forEach(L=>{const H=`${L.logsoudev},${L.type}`;O.add(H)}),p.value=Array.from(O).map(L=>{const[H,S]=L.split(",");return{logsoudev:parseInt(H,10),type:S}})}},T=m(),R=m(),I=async()=>{const{data:C,error:F}=await Fe({dateType:_.value});F||(R.value=C,console.log(R.value,"securityNumsList.value"))},q=()=>{var C;(C=window.$dialog)==null||C.info({title:"退出登录",content:"确定要退出登录吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{const{data:F,error:O}=await Te();O||(a.clearInfo(),window.location.reload())}})},$=m(0),J=Me(()=>{$.value++},500),x=()=>{J()},D=m(),ne=m(),ee=m(!1);P(async()=>{try{ee.value=!0,k(),setTimeout(()=>{ee.value=!1},2e3)}catch{ee.value=!1}D.value=setInterval(()=>{},1e3*1*60),ne.value=setInterval(()=>{k()},1e3*5)});const $e=C=>{_.value=C,b(),f(),I()};return P(()=>{h.themeScheme!="dark"&&h.toggleThemeScheme(),window.addEventListener("resize",x)}),ge(()=>{clearInterval(D.value),clearInterval(ne.value),window.removeEventListener("resize",x)}),(C,F)=>{const O=Oe,L=$t,H=rt;return v(),w(le,null,[e("div",Xa,[e("div",Ka,[eo,e("div",to,[ao,e("div",oo,[A(O,{size:"small",class:"select",value:_.value,"onUpdate:value":[F[0]||(F[0]=S=>_.value=S),$e],options:d,style:{width:"100px"}},null,8,["value"]),me(" "+W(r.dateYear)+" "+W(r.dateWeek)+" "+W(r.dateDay)+" ",1),e("div",so,[e("img",{src:B(ga),alt:"",onClick:q},null,8,lo)])])])]),e("div",no,[e("div",ro,[A(L,{class:"content_left-top",title:"系统信息"},{default:N(()=>{var S,re,ie;return[(v(),V(ma,{data:(S=y.value)==null?void 0:S.systemStatus,key:$.value,logInfo:{logTotal:n.value,logSource:(ie=(re=y.value)==null?void 0:re.logSourceDevAsset)==null?void 0:ie.aunum}},null,8,["data","logInfo"]))]}),_:1}),A(L,{class:"content_left-center",title:"系统告警"},{default:N(()=>[A(Aa,{data:s.value},null,8,["data"])]),_:1}),A(L,{class:"content_left-bottom",title:"日志源日志数量"},{default:N(()=>[(v(),V(de,{data:T.value,key:$.value},null,8,["data"]))]),_:1})]),e("div",io,[A(L,{title:"日志源资产类型",class:"content_center-top"},{default:N(()=>{var S;return[(v(),V(Da,{data:(S=y.value)==null?void 0:S.logSoursceAssetType,key:$.value},null,8,["data"]))]}),_:1}),A(L,{title:"日志采集趋势",class:"content_center-bottom"},{default:N(()=>[(v(),V(Oa,{data:l.value,key:$.value},null,8,["data"]))]),_:1})]),e("div",co,[A(L,{title:"日志源接收状态",class:"content_right-top"},{default:N(()=>{var S;return[A(Qa,{data:(S=y.value)==null?void 0:S.logSoursceList},null,8,["data"])]}),_:1}),A(L,{class:"content_right-center",title:"审计告警数量趋势"},{default:N(()=>[(v(),V(Ra,{data:t.value,key:$.value},null,8,["data"]))]),_:1}),A(L,{class:"content_right-bottom",title:"安全事件类别数量"},{default:N(()=>[(v(),V(de,{data:R.value,key:$.value},null,8,["data"]))]),_:1})])])]),ee.value?(v(),V(H,{key:0})):fe("",!0)],64)}}}),go=M(uo,[["__scopeId","data-v-1b98345a"]]);export{go as default};
