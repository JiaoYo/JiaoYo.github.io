import{d as P,b as U,o as C,k as _e,a as L,l as O,e as n,m as K,u as ne,n as Z,r as T,p as se,i as Q,q as fe,c as D,w as s,f as o,s as he,N as J,v as X,h,$ as y,x as ge,y as Y,z as ve,g as M,t as B,B as V,A as ee,C as te,D as we,E as xe,F as ae,G as ye,H as I,I as be,J as Ce,K as ke,L as Ne,M as re,O as Se,P as $e,Q as Re,R as Ue,S as qe,T as ze,U as Ie,V as Me,W as Pe,X as Le,Y as Be,Z as je,a0 as Fe,a1 as Ee,a2 as Te,a3 as De,a4 as Ve}from"./index-ByRkKuMU.js";const Ge={src:_e,alt:"linkqi",style:{width:"64px",height:"64px"}},We=P({name:"SystemLogo",__name:"system-logo",setup(r){return(a,u)=>(C(),U("img",Ge))}}),Ae={class:"absolute-lt z-1 size-full overflow-hidden"},Oe={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},He={height:"1337",width:"1337"},Ke={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Ze=["stop-color"],Qe=["stop-color"],Je={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Xe={height:"896",width:"967.8852157128662"},Ye={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},et=["stop-color"],tt=["stop-color"],ot=P({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(r){const a=r,u=L(()=>O(a.themeColor,200)),p=L(()=>O(a.themeColor,500));return(e,t)=>(C(),U("div",Ae,[n("div",Oe,[(C(),U("svg",He,[n("defs",null,[t[0]||(t[0]=n("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),n("linearGradient",Ke,[n("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,Ze),n("stop",{offset:"1","stop-color":p.value,"stop-opacity":"1"},null,8,Qe)])]),t[1]||(t[1]=n("g",{opacity:"1"},[n("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),n("div",Je,[(C(),U("svg",Xe,[n("defs",null,[t[2]||(t[2]=n("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),n("linearGradient",Ye,[n("stop",{offset:"0","stop-color":p.value,"stop-opacity":"1"},null,8,et),n("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,tt)])]),t[3]||(t[3]=n("g",{opacity:"1"},[n("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}});function at(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const a=Math.random()*16|0;return(r==="x"?a:a&3|8).toString(16)})}/*! js-cookie v3.0.5 | MIT */function F(r){for(var a=1;a<arguments.length;a++){var u=arguments[a];for(var p in u)r[p]=u[p]}return r}var nt={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function H(r,a){function u(e,t,c){if(!(typeof document>"u")){c=F({},a,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var _ in c)c[_]&&(d+="; "+_,c[_]!==!0&&(d+="="+c[_].split(";")[0]));return document.cookie=e+"="+r.write(t,e)+d}}function p(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var t=document.cookie?document.cookie.split("; "):[],c={},d=0;d<t.length;d++){var _=t[d].split("="),N=_.slice(1).join("=");try{var v=decodeURIComponent(_[0]);if(c[v]=r.read(N,v),e===v)break}catch{}}return e?c[e]:c}}return Object.create({set:u,get:p,remove:function(e,t){u(e,"",F({},t,{expires:-1}))},withAttributes:function(e){return H(this.converter,F({},this.attributes,e))},withConverter:function(e){return H(F({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(r)}})}var le=H(nt,{path:"/"});const A=(r,a,u)=>{le.set(r,a)},E=r=>le.get(r),st={class:"w-full flex-y-center gap-16px"},rt=["src"],lt={class:"flex-y-center justify-between"},ct=P({name:"PwdLogin",__name:"pwd-login",setup(r){const a=K();ne();const{formRef:u,validate:p}=Z(),e=T({username:"",password:"",captcha:"",captchaSrc:"",captchaUuid:"",checked:!0}),t=T({captchaEnable:null}),c=L(()=>{const{defaultRequiredRule:g,formRules:i,patternRules:b}=se();return{username:i.username,password:{...g,...b.password},captcha:g}});async function d(){const{data:g,error:i}=await we();i||(t.captchaEnable=g,t.captchaEnable===1&&_())}async function _(){e.captchaUuid=at(),e.captchaSrc=xe+"/captcha?uuid="+e.captchaUuid}async function N(){await p(),e.checked?v(e.username,e.password,e.checked):S(),await a.login(ae(e.username),ae(e.password),e.captchaUuid,e.captcha)||(e.captcha="",e.captchaSrc="",t.captchaEnable===1&&_())}function v(g,i,b){A("project_storage_user",g),A("project_storage_pwd",i),A("project_storage_check",String(b))}function f(){e.username=E("project_storage_user")||"",e.password=E("project_storage_pwd")||"",e.checked=E("project_storage_check")?E("project_storage_check")=="true":!1}function S(){v("","",!1)}return Q(()=>{f(),d()}),(g,i)=>{const b=X,$=J,q=ve,x=V,l=Y,m=te,R=fe("no-special");return C(),D(m,{ref_key:"formRef",ref:u,style:{width:"340px"},model:e,rules:c.value,size:"large","show-label":!1,onKeyup:ee(N,["enter"])},{default:s(()=>[o($,{path:"userName"},{default:s(()=>[o(b,{value:e.username,"onUpdate:value":i[0]||(i[0]=w=>e.username=w),placeholder:h(y)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),o($,null,{default:s(()=>[o(b,{value:e.password,"onUpdate:value":i[1]||(i[1]=w=>e.password=w),type:"password","show-password-on":"click",placeholder:h(y)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),t.captchaEnable===1?(C(),D($,{key:0,path:"captcha"},{default:s(()=>[n("div",st,[ge(o(b,{value:e.captcha,"onUpdate:value":i[2]||(i[2]=w=>e.captcha=w),placeholder:"请输入验证码"},null,8,["value"]),[[R]]),n("img",{src:e.captchaSrc,alt:"验证码",style:{width:"160px",height:"40px"},onClick:_},null,8,rt)])]),_:1})):he("",!0),o(l,{vertical:"",size:24},{default:s(()=>[n("div",lt,[o(q,{checked:e.checked,"onUpdate:checked":i[3]||(i[3]=w=>e.checked=w)},{default:s(()=>[M(B(h(y)("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["checked"])]),o(x,{type:"primary",size:"large",round:"",block:"",loading:h(a).loginLoading,onClick:N},{default:s(()=>[M(B(h(y)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),it={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function ut(r,a){return C(),U("svg",it,a[0]||(a[0]=[n("path",{fill:"currentColor",d:"M10.5 20h3q.2 0 .35-.15t.15-.35t-.15-.35t-.35-.15h-3q-.2 0-.35.15t-.15.35t.15.35t.35.15M7 23q-.825 0-1.412-.587T5 21V3q0-.825.588-1.412T7 1h10q.825 0 1.413.588T19 3v18q0 .825-.587 1.413T17 23zm0-5v3h10v-3zm0-2h10V6H7zM7 4h10V3H7zm0 14v3zM7 4V3z"},null,-1)]))}const pt=ye({name:"material-symbols-phone-android-outline-rounded",render:ut}),dt={class:"flex"},mt={class:"flex w-70px items-center"},_t=P({name:"ResetPwd",__name:"reset-pwd",setup(r){ne();const{formRef:a,validate:u}=Z(),p=K(),e=T({phnum:"",code:""}),t=I({phnum:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:["blur","change"]}],code:[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]}),c=()=>{t.value.code=[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]},d=I(0),_=async()=>{var S;await u(),t.value.code=[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}];const{data:v,error:f}=await Ce(e.phnum);if(!f){(S=window.$message)==null||S.success(`验证码已发送到${e.phnum}，请注意查收`),d.value=60;const g=setInterval(()=>{d.value-=1,d.value<=0&&clearInterval(g)},1e3)}};async function N(){await u();const{data:v,error:f}=await ke({phnum:e.phnum,code:e.code});v&&(console.log(v),await p.captchaLogin(v.data))}return(v,f)=>{const S=pt,g=X,i=J,b=V,$=be,q=V,x=Y,l=te;return C(),D(l,{ref_key:"formRef",ref:a,model:e,rules:t.value,size:"large","show-label":!1,onKeyup:ee(N,["enter"])},{default:s(()=>[o(i,{path:"phone","feedback-style":{marginLeft:"70px"}},{default:s(()=>[n("div",dt,[n("div",mt,[o(S,{class:"font-size-20px mr-8px"}),f[2]||(f[2]=n("span",null,"+86",-1))])]),o(g,{clearable:"",maxlength:"11",class:"flex-1 w-100%",onBlur:c,value:e.phnum,"onUpdate:value":f[0]||(f[0]=m=>e.phnum=m),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),o(i,{path:"code"},{default:s(()=>[o($,null,{default:s(()=>[o(g,{value:e.code,"onUpdate:value":f[1]||(f[1]=m=>e.code=m),placeholder:h(y)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(b,{type:"primary",ghost:"",onClick:_,loading:d.value>0},{default:s(()=>[M(B(d.value>0?`${d.value}秒后可再次获取`:"获取验证码"),1)]),_:1},8,["loading"])]),_:1})]),_:1}),o(x,{vertical:"",size:18,class:"w-full"},{default:s(()=>[o(q,{type:"primary",size:"large",round:"",block:"",onClick:N},{default:s(()=>f[3]||(f[3]=[M("登录 ")])),_:1,__:[3]})]),_:1})]),_:1},8,["model","rules"])}}}),ft={class:"qr-wrapper"},ht=["src"],gt=P({__name:"qrcode_login",setup(r){const a=I(""),u=async()=>{const{data:p,error:e}=await Ne();e||(a.value=p)};return Q(()=>{u()}),(p,e)=>(C(),U("div",ft,[n("iframe",{src:a.value,frameborder:"0",scrolling:"no",class:"qr-frame"},null,8,ht),e[0]||(e[0]=n("div",{class:"qr-tip"},"微信二维码有效期5分钟",-1))]))}}),vt=re(gt,[["__scopeId","data-v-5e717107"]]),wt={class:"w-380px lt-sm:w-300px flex justify-center"},xt={class:"logoName"},yt={class:"text-26px text-primary font-500 lt-sm:text-22px"},bt={class:"tabs-center"},Ct={class:"login-footer"},kt=P({name:"login",__name:"index",setup(r){K(),Se(),$e();const a=Re(),u={"pwd-login":{label:"账号密码登录",component:ct},qrCode:{label:"微信扫码登录",component:vt},"reset-pwd":{label:"手机验证码登录",component:_t}},p=I("pwd-login"),e=L(()=>a.darkMode?O(a.themeColor,600):a.themeColor),t=T(c());function c(){return{username:"",password:"",comfirmPassword:"",state:""}}const{createConfirmPwdRule:d,defaultRequiredRule:_,patternRules:N}=se(),v={username:_,password:{..._,...N.password}},f=L(()=>{const x="#ffffff",l=a.darkMode?.5:.2;return Ue(x,a.themeColor,l)}),{formRef:S,validate:g}=Z(),i=I(!1),b=async()=>{var m;await g();const{data:x,error:l}=await Ve({username:t.username,password:t.password,uuid:t.state});l||(p.value="qrCode",i.value=!1,(m=window.$message)==null||m.success("绑定成功，请重新扫码登录！"))},$=I(0);Q(()=>{var w;const x=window.location.href,l=x.match(/status=(\d)/);if(console.log(x,"statusMatch"),!l)return;const m=l[1];console.log(m,"statusstatusstatus");const R={0:"获取微信信息失败",1:"获取用户信息失败",2:"二维码过期",4:"账号停用",6:"其他未知原因"};if(R[m]){(w=window.$message)==null||w.error(R[m]),m=="2"&&$.value++,q();return}if(m=="3"){const z=x.match(/state=([^#&]+)/),j=z?z[1]:"";i.value=!0,t.state=j,q()}window.addEventListener("captchaLogin",z=>{i.value=!0,t.state=z.detail.state})});function q(){const{protocol:x,host:l,pathname:m,hash:R}=window.location,w=R||"#/login";window.history.replaceState({},"",`${x}//${l}${m}${w}`)}return qe(()=>{window.removeEventListener("captchaLogin",()=>{})}),(x,l)=>{const m=ot,R=We,w=Pe,z=ze,j=je,G=X,W=J,ce=te,ie=Fe,ue=V,pe=Y,de=Ee,me=Te;return C(),U("div",{class:"relative size-full flex-center overflow-hidden",style:De({backgroundColor:f.value})},[o(m,{"theme-color":e.value},null,8,["theme-color"]),o(j,{bordered:!1,class:"relative z-4 w-auto rd-12px","content-style":{display:"flex"}},{default:s(()=>[n("div",wt,[n("div",xt,[o(R,{class:"text-64px text-primary lt-sm:text-48px"}),n("h3",yt,B(h(y)("system.title")),1)]),n("div",bt,[o(z,{value:p.value,"onUpdate:value":l[0]||(l[0]=k=>p.value=k)},{default:s(()=>[(C(),U(Ie,null,Me(u,(k,oe)=>o(w,{key:oe,name:oe,tab:k.label},{default:s(()=>[o(Le,{name:h(a).page.animateMode,mode:"out-in",appear:""},{default:s(()=>[(C(),D(Be(k.component),{key:$.value}))]),_:2},1032,["name"])]),_:2},1032,["name","tab"])),64))]),_:1},8,["value"])])])]),_:1}),o(de,{show:i.value,title:"",class:"w-500px","mask-closable":!1,"close-on-esc":!1},{default:s(()=>[o(j,null,{header:s(()=>l[4]||(l[4]=[M(" 绑定微信 "),n("span",{class:"c-red font-size-14px"},"绑定过期时间10分钟",-1)])),footer:s(()=>[o(pe,{justify:"end",size:16},{default:s(()=>[o(ue,{type:"primary",onClick:b},{default:s(()=>[M(B(h(y)("common.confirm")),1)]),_:1})]),_:1})]),default:s(()=>[o(ie,null,{default:s(()=>[o(ce,{ref_key:"formRef",ref:S,model:t,rules:v,"label-placement":"left","label-width":100,"require-mark-placement":"left",onKeyup:ee(b,["enter"])},{default:s(()=>[o(W,{label:h(y)("page.manage.user.username"),path:"username"},{default:s(()=>[o(G,{value:t.username,"onUpdate:value":l[1]||(l[1]=k=>t.username=k),placeholder:h(y)("page.manage.user.form.username")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(W,{label:h(y)("page.login.common.password"),path:"password"},{default:s(()=>[o(G,{type:"password","show-password-on":"click",clearable:"",value:t.password,"onUpdate:value":l[2]||(l[2]=k=>t.password=k),placeholder:h(y)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(W,{label:h(y)("page.login.common.confirmPassword"),path:"comfirmPassword",rule:h(d)(t.password)},{default:s(()=>[o(G,{type:"password","show-password-on":"click",clearable:"",value:t.comfirmPassword,"onUpdate:value":l[3]||(l[3]=k=>t.comfirmPassword=k),placeholder:h(y)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label","rule"])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["show"]),n("div",Ct,[l[5]||(l[5]=n("a",{href:"http://www.linkqi.cn/",target:"_blank",rel:"noopener noreferrer"},"杭州领祺科技有限公司",-1)),o(me,{vertical:""}),l[6]||(l[6]=n("a",{href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank",rel:"noopener noreferrer"},"浙ICP备19034246号-2",-1))])],4)}}}),St=re(kt,[["__scopeId","data-v-d8b9a3ce"]]);export{St as default};
