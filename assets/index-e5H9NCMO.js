import{_ as Ea}from"./table-column-setting.vue_vue_type_script_setup_true_lang-BlVNmerJ.js";import{_ as Zt}from"./round-delete-D-_gcuU9.js";import{_ as Oa}from"./round-add-xlQYjvjV.js";import{d as ct,av as it,z as ea,D as Te,s as h,A as ta,$ as F,n as u,H as J,aR as ot,B as v,cG as Ba,cw as Ra,cE as Ma,cF as Bt,bf as Rt,au as fe,a5 as Mt,f as a,g,cY as Va,cy as qa,cX as Ja,cU as Ga,a as Ka,ax as wt,at as rt,aJ as aa,b as nt,o as P,aO as Vt,bp as Ha,w as o,bn as Xa,M as la,L as sa,c as E,G as me,h as r,bo as Ge,e as L,S as Ya,d4 as qt,a_ as Qa,J as re,ay as ut,t as G,a4 as na,N as Wa,cW as ia,cL as oa,dZ as Za,az as Jt,aA as dt,dN as ra,e2 as Gt,e3 as el,e4 as Kt,e5 as tl,cv as al,e6 as ll,e7 as sl,cV as nl,dR as Ht,e8 as Xt,aE as kt,d_ as il,d2 as ol,c$ as rl,dO as ul,dQ as dl,cH as cl,cO as pl,dP as fl,dL as ml,dM as gl,aG as vl,e9 as hl,dS as yl,ea as bl,bk as _l,a2 as Dt,aD as Je,W as ua,aI as xl,Y as kl,X as Cl,i as Sl,b0 as wl,F as lt,aK as st,cT as Dl,I as qe,aL as zl,aB as Fl,eb as Pl,aN as Il,cx as $l,aQ as Al}from"./index-01hyoC1y.js";import{u as St,a as Ll}from"./table-BMW6PgLk.js";import{_ as Nl}from"./round-plus-DC_Q01SK.js";import{_ as jl,a as Ul,A as Tl}from"./index-DNUcN358.js";import{g as zt,h as El,i as da,p as Yt,f as Ol}from"./business-nTViNgK8.js";import{u as Qt}from"./usePageData-CuJtYE7O.js";import{h as Ct}from"./permission-BHHChgcD.js";import{N as we}from"./Popconfirm-Lve2YCRm.js";import{N as Bl}from"./Cascader-BemaXoFe.js";import{_ as ca}from"./Grid-PO4pV7Qi.js";import{_ as pa}from"./FormItemGridItem-Ddu3CU7K.js";import{_ as Rl}from"./round-search-CLmP8aC9.js";import{_ as Ml}from"./round-refresh-CVCEexzc.js";import{_ as Vl}from"./DatePicker-Dmv5Ctw7.js";import{_ as ql}from"./RadioButton-DLp9GcE0.js";const Jl={class:"w-100%"},Gl={class:"flex"},Kl={style:{display:"flex","flex-direction":"column",width:"100%"}},Hl={class:"flex items-center"},Xl={class:"w-100%"},Yl={class:"w-100px"},Ql={style:{display:"flex","flex-direction":"column"}},Wl={style:{display:"flex","flex-direction":"column"}},Zl={style:{display:"flex","flex-direction":"column"}},es={class:"flex-col w-100%"},ts=2,as=ct({name:"OperateDrawer",__name:"operate-drawer",props:it({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:it(["submitted"],["update:visible"]),setup(W,{emit:ue}){const b=ea(),se=ue,M=Te({contactList:[],debuggedDevieceList:[]}),m=W,n=Te(ge());function ge(){return{proname:"",dispatchIds:[],contractIds:[],proaddr:"",cpdbtime:null,prosite:"",longitude:120.373885,latitude:30.303899,period:null,dtype:null,dispatch:"",status:1,region:null,provice:null}}const N=h(0),de=h(void 0);async function be(){z.value=[{longitude:120.373885,latitude:30.303899,addr:""}],Object.assign(n,ge()),Sa(),Aa(),m.operateType==="edit"&&m.rowData&&(await Promise.all([Na(),Ee(),pe(),C(),xe(),tt()]),Object.assign(n,m.rowData),N.value=n.period,de.value=n.status,Ut(n.provice),xt(n.provice),Ca())}const{formRef:O,validate:K,restoreValidation:k}=ta(),I={proname:{type:"string",required:!0,trigger:["blur","change"],message:"请输入项目名称"},status:{type:"number",required:!0,trigger:["blur","change"],message:"请选择项目状态"},contractIds:{type:"array",required:!0,trigger:["blur","change"],message:"请选择合同"},dtype:{type:"number",required:!0,trigger:["blur","change"],message:"请选择调试类型"},period:{type:"number",required:!0,trigger:["blur","change"],message:"请输入周期"},prosite:{type:"string",required:!0,trigger:["blur","change","focus"],message:"请选择项目地点"},cpdbtime:{type:"string",required:!0,trigger:["blur","change"],message:"请选择时间"},provice:{type:"number",required:!0,trigger:["blur","change"],message:"请选择省份"},region:{type:"number",required:!0,trigger:["blur","change"],message:"请选择城市"}},_=h([]),j=Te({page:1,pageSize:20,showSizePicker:!0,fuzzy:"",pageSizes:[20],prefix:()=>`共 ${_.value.length} 条`,onChange:e=>{j.page=e,C()},onUpdatePageSize:e=>{j.pageSize=e,j.page=1,C()}}),B=[{title:"对接方",key:"docker",align:"center",width:150,render(e,t){return e.setStatus?u(J,{value:e.docker,placeholder:"请输入",onUpdateValue(l){_.value[t].docker=l}}):u("div",{},e.docker)}},{title:"姓名",key:"pname",align:"center",width:100,render(e,t){return e.setStatus?u(J,{value:e.pname,placeholder:"请输入姓名",onUpdateValue(l){_.value[t].pname=l}}):u("div",{},e.pname)}},{title:"联系方式",key:"pcontact",align:"center",width:150,render(e,t){return e.setStatus?u(J,{value:e.pcontact,placeholder:"请输入联系方式",onUpdateValue(l){_.value[t].pcontact=l}}):u("div",{},e.pcontact)}},{title:"备注",key:"proposition",align:"center",width:150,render(e,t){return e.setStatus?u(J,{value:e.proposition,placeholder:"请输入备注",onUpdateValue(l){_.value[t].proposition=l}}):u("div",{},e.proposition)}},{title:"操作人",width:100,key:"username",align:"center"},{title:"操作时间",key:"dbtime",width:180,align:"center",render:e=>e.dbtime?ot(1,e.dbtime):""},{key:"operate",title:F("common.operate"),align:"center",width:160,fixed:"right",render(e,t){return u("div",{class:"flex-center gap-8px"},[e.setStatus?[u(v,{type:"primary",ghost:!0,size:"small",onClick:()=>De(e)},{default:()=>"保存"}),u(v,{type:"default",ghost:!0,size:"small",onClick:()=>ne(e,t)},{default:()=>"取消"}),u(we,{onPositiveClick:()=>{m.operateType==="edit"&&e.id?Ba(e.id).then(()=>{var l;_.value.splice(t,1),(l=window.$message)==null||l.success("删除成功")}):_.value.splice(t,1)}},{default:()=>F("common.confirmDelete"),trigger:()=>u(v,{type:"error",ghost:!0,size:"small"},{default:()=>F("common.delete")})})]:u(v,{type:"primary",ghost:!0,size:"small",onClick:()=>H(e)},{default:()=>"编辑"})])}}],C=async()=>{var t;const{data:e}=await Ra({page:j.page,limit:j.pageSize,pid:(t=m.rowData)==null?void 0:t.id});_.value=e==null?void 0:e.list,_.value.forEach(l=>{l.setStatus=!1}),M.contactList=JSON.parse(JSON.stringify(_.value))},H=e=>{_.value.forEach(t=>{t.setStatus=!1}),e.setStatus=!e.setStatus},ne=(e,t)=>{e.setStatus=!e.setStatus,e.id?_.value=JSON.parse(JSON.stringify(M.contactList)):_.value.splice(t,1)},De=async e=>{var t,l,i,d,c;if(!e.pname){(t=window.$message)==null||t.warning("请输入联系人姓名");return}if(!e.pcontact){(l=window.$message)==null||l.warning("请输入联系方式");return}if(m.operateType==="edit")if(e.id){const{data:S,error:y}=await Ma([e]);y||((i=window.$message)==null||i.success("修改成功"),C(),e.setStatus=!e.setStatus)}else{const{data:S,error:y}=await Bt([{...e,pid:(d=m.rowData)==null?void 0:d.id}]);y||((c=window.$message)==null||c.success("添加成功"),C(),e.setStatus=!e.setStatus)}else e.setStatus=!e.setStatus};function ze(){var e;((e=_.value[0])!=null&&e.pname||_.value.length==0)&&_.value.unshift({pname:"",pcontact:"",proposition:"",setStatus:!0})}const R=e=>{var t;n.contractIds=e,V.value=et.data.filter(l=>e.includes(l.id)).map(l=>({value:l.id,label:l.contractname,isLeaf:!1})),Fe((t=V.value[0])==null?void 0:t.id)},V=h([]),Ee=async()=>{var l;const{data:e,error:t}=await ia({page:1,limit:100,id:m.rowData.id});V.value=e==null?void 0:e.list.map(i=>({value:i.id,label:i.contractname,isLeaf:!1})),Fe((l=e==null?void 0:e.list[0])==null?void 0:l.id)},U=h([]),_e=h(),{pageData:Z,getData:pt}=Qt(oa),Fe=async e=>{await pt({pids:e}),_e.value=[],U.value=Array.from(new Set([...U.value,...Z.data])),_e.value=Z.data.map(t=>({label:t.devname,value:t.id}))},ft=async e=>{var t;await Fe(e.value),e.children=(t=_e.value)==null?void 0:t.map(l=>({label:l.label,value:l.value,isLeaf:!0}))},D=h([]),ee=Te({page:1,pageSize:20,itemCount:0,showSizePicker:!0,fuzzy:"",pageSizes:[10,20],prefix:()=>`共 ${ee.itemCount} 条`,onChange:e=>{ee.page=e,pe()},onUpdatePageSize:e=>{ee.pageSize=e,ee.page=1,pe()}}),X=h(),Oe=[{title:"绑定合同设备",key:"cid",width:300,align:"center",render(e,t){var l,i;return e.setStatus?u(Bl,{style:"width: 270px",value:e.cid,filterable:!0,placeholder:"请选择合同设备",options:V.value,checkStrategy:"child",showPath:!1,remote:!0,renderSuffix:d=>d.option.hidden?null:d.node,renderLabel:d=>d.hidden?null:d.label,onLoad:ft,onUpdateValue(d){var S;D.value[t].cid=Number(d)||0;const c=(S=U.value)==null?void 0:S.find(y=>y.id==d);e.devname=(c==null?void 0:c.devname)||"",e.devnum=(c==null?void 0:c.devcount)||"",e.notes=(c==null?void 0:c.notes)||"",X.value=(c==null?void 0:c.devcount)||0,e.etype=(c==null?void 0:c.devtype)||0,e.devmanu=(c==null?void 0:c.devmanu)||"",e.devmodel=(c==null?void 0:c.devmodel)||"",e.devunit=(c==null?void 0:c.devunit)||""}}):u("div",{},e.devname2||((i=(l=_e.value)==null?void 0:l.find(d=>d.value==e.cid))==null?void 0:i.label))}},{title:"设备名称",key:"devname",width:200,align:"center",render(e,t){return e.setStatus?u(J,{value:e.devname,placeholder:"请输入",onUpdateValue(l){D.value[t].devname=l}}):u("div",{},e.devname)}},{title:"型号",key:"devmodel",width:220,align:"center",render(e,t){return u("div",{},e.devmodel)}},{title:"设备单位",key:"devunit",width:120,align:"center",render(e,t){return u("div",{},e.devunit)}},{title:"数量",key:"devnum",width:100,align:"center",render(e,t){return e.setStatus?u(Rt,{value:e.devnum,placeholder:"请输入",max:X.value,onUpdateValue(l){D.value[t].devnum=l}}):u("div",{},e.devnum)}},{title:"是否为我司设备",key:"etype",width:260,align:"center",render(e,t){return u("div",{},e.etype==0?"是":"否")}},{title:"设备厂家",key:"devmanu",width:200,align:"center",render(e,t){return u("div",{},e.devmanu)}},{title:"清点状态",key:"status",width:120,align:"center",render(e,t){return e.setStatus&&e.id?u(fe,{value:e.status,filterable:!0,placeholder:"请选择状态",options:[{label:"未清点",value:0},{label:"正常",value:1},{label:"增补",value:2},{label:"退货",value:3},{label:"换货",value:4}],onUpdateValue(l){D.value[t].status=Number(l)||0}}):u("div",{},e.status===0?"未清点":e.status===1?"正常":e.status===2?"增补":e.status===3?"退货":"换货")}},{title:"备注",key:"notes",width:200,align:"center",render(e,t){return u("div",{},e.notes)}},{title:"文件",key:"re1",width:160,align:"center",render(e,t){return e.setStatus?u(v,{type:"primary",ghost:!0,size:"small",onClick:()=>ve(e,"debuggedDevieceList",t)},{default:()=>"上传文件"}):u(Mt,{trigger:"hover"},{trigger:()=>u("div",{style:"color: #1890ff;cursor: pointer;"},"文件列表"),default:()=>{const l=[{alias:e.re1,file:e.fl1},{alias:e.re2,file:e.fl2},{alias:e.re3,file:e.fl3},{alias:e.re4,file:e.fl4}].filter(i=>i.alias||i.file);return l.length===0?u("div",{style:"padding: 10px; color: #999;"},"暂无文件"):u("div",{style:"padding: 10px;"},[u("table",{class:"n-table n-table--bordered n-table--single-line",style:"width: 100%; border-collapse: collapse;"},[u("thead",[u("tr",[u("th",{style:"text-align:center; padding: 4px 8px;"},"文件别名"),u("th",{style:"text-align:center; padding: 4px 8px;"},"文件"),u("th",{style:"text-align:center; padding: 4px 8px;"},"操作")])]),u("tbody",l.map((i,d)=>{var c;return u("tr",[u("td",{style:"text-align:center; padding: 4px 8px;"},i.alias||"-"),u("td",{style:"text-align:center; padding: 4px 8px;"},((c=i.file)==null?void 0:c.split("?")[1])||"-"),u("td",{style:"text-align:center; padding: 4px 8px;"},u(v,{type:"primary",ghost:!0,size:"small",onClick:()=>Ft({url:i.file})},{default:()=>"下载"}))])}))])])}})}},{title:"操作信息",key:"dbtime",width:180,align:"center",render(e,t){return u(Mt,{trigger:"hover"},{trigger:()=>u("div",{style:"color: #1890ff;cursor: pointer;"},e.dbtime?ot(1,e.dbtime):""),default:()=>u("div",{style:"padding: 10px;"},a("div",null,[a("div",null,[g("操作人："),e.username]),a("div",null,[g("操作时间："),e.dbtime]),a("div",null,[g("清点人："),e.dusername]),a("div",null,[g("清点时间："),e.ddbtime])]))})}},{key:"operate",title:F("common.operate"),align:"center",width:180,fixed:"right",render(e,t){return u("div",{class:"flex-center gap-8px"},[e.setStatus?[u(v,{type:"primary",ghost:!0,size:"small",onClick:()=>vt(e)},{default:()=>"保存"}),u(v,{type:"default",ghost:!0,size:"small",onClick:()=>gt(e,t)},{default:()=>"取消"}),Ct("project:Equipment:delete")&&u(we,{onPositiveClick:async()=>{var l;if(e.id){const{data:i,error:d}=await Va(e.id);i&&(D.value.splice(t,1),(l=window.$message)==null||l.success("删除成功"))}else D.value.splice(t,1)}},{default:()=>F("common.confirmDelete"),trigger:()=>u(v,{type:"error",ghost:!0,size:"small"},{default:()=>F("common.delete")})})]:Ct("project:Equipment:update")&&u(v,{type:"primary",ghost:!0,size:"small",onClick:()=>mt(e)},{default:()=>"编辑"})])}}],T=h([]),s=h(!1),p=h(""),te=h(),ve=(e,t,l)=>{T.value=[],s.value=!0,p.value=t,te.value=l,e.re1&&T.value.push({id:"",name:e.re1,url:e.fl1,status:"uploading",setStatus:!1,progress:0}),e.re2&&T.value.push({id:"",name:e.re2,url:e.fl2,status:"uploading",setStatus:!1,progress:0}),e.re3&&T.value.push({id:"",name:e.re3,url:e.fl3,status:"uploading",setStatus:!1,progress:0}),e.re4&&T.value.push({id:"",name:e.re4,url:e.fl4,status:"uploading",setStatus:!1,progress:0})},ce=async()=>{var t,l;let e=!0;for(let i=0;i<T.value.length;i++){const d=T.value[i];if(!d.url){(t=window.$message)==null||t.warning(`第${i+1}个文件的文件名称不能为空`),e=!1;break}if(!d.name){(l=window.$message)==null||l.warning(`第${i+1}个文件的文件别名不能为空`),e=!1;break}D.value[te.value][`re${i+1}`]=d.name,D.value[te.value][`fl${i+1}`]=d.url}e&&(s.value=!1,p.value="",te.value=void 0)},pe=async()=>{var t;const{data:e}=await qa({page:ee.page,limit:ee.pageSize,fuzzy:ee.fuzzy,pid:(t=m.rowData)==null?void 0:t.id});D.value=e.list,M.debuggedDevieceList=JSON.parse(JSON.stringify(D.value))},mt=async e=>{var i;console.log(Z.data,e.cid,"ssssssssssssssss"),D.value.forEach(d=>{d.setStatus=!1});const{data:t,error:l}=await Ja(e.cid);l||(((i=V.value[V.value.length-1])==null?void 0:i.value)!=t.id&&V.value.push({value:t.id,label:t.devname,disabled:!0,isLeaf:!0,hidden:!0}),X.value=t.devcount||0),e.setStatus=!e.setStatus},gt=(e,t)=>{e.setStatus=!e.setStatus,e.id?D.value=JSON.parse(JSON.stringify(M.debuggedDevieceList)):D.value.splice(t,1)},vt=async e=>{var t,l,i,d,c;if(!e.cid){(t=window.$message)==null||t.warning("请选择合同设备");return}if(!e.devname){(l=window.$message)==null||l.warning("设备名称不能为空");return}if(!e.devmodel){(i=window.$message)==null||i.warning("设备型号不能为空");return}if(!e.devnum){(d=window.$message)==null||d.warning("设备数量不能为空");return}if(e.id){const{data:S,error:y}=await Ga([e]);y||((c=window.$message)==null||c.success("修改成功"),pe(),e.setStatus=!e.setStatus)}else e.setStatus=!e.setStatus};function ht(){var e;((e=D.value[0])!=null&&e.devname||D.value.length==0)&&D.value.unshift({status:void 0,devmanu:"",etype:0,devname:"",devmodel:"",devnum:0,notes:"",setStatus:!0})}const yt=()=>{s.value=!1},Ke=h({}),x=h([]);async function xe(){var t;x.value=[];const{data:e}=await Za({page:1,limit:100,pid:(t=m.rowData)==null?void 0:t.id});e.list.forEach(l=>{l.sort==1&&x.value.push({id:l.id,name:l.filename,url:l.file,status:"finished",creator:l.username,dbtime:l.dbtime})}),x.value.reverse(),Ke.value=JSON.parse(JSON.stringify(e))}const fa=[{title:"文件别名",key:"name",align:"center",width:200,render(e){return e.setStatus?u(J,{value:e.name,onUpdateValue:t=>{e.name=t}}):u("div",{},e.name)}},{title:"文件名称",key:"filename",align:"center",width:200,render(e){return e.setStatus&&!e.url?u("div",{style:"display: flex; justify-content: center; align-items: center;"},[u(Jt,{action:"#",showFileList:!1,customRequest:async({file:l,onFinish:i,onError:d})=>{var c,S;try{e.status=!0;const{data:y,error:Y}=await bl(l.file,ie=>{e.progress=ie});y&&(e.url=y,e.status=!1)}catch(y){console.error(y),(S=(c=window.$message)==null?void 0:c.error)==null||S.call(c,"文件上传出错"),e.status=!1}}},{default:()=>u(v,{type:"info",size:"small",ghost:!0,loading:e.status},{default:()=>"上传文件"})}),e.progress?u(dt,{type:"line",percentage:e.progress,indicatorPlacement:"inside",processing:!0}):null]):e.setStatus&&e.url&&!e.id?a("span",null,[e.url.split("?")[1],g(" "),a("span",{onClick:()=>{e.url="",e.progress=0},style:"color: red;cursor: pointer;font-size: 12px;"},[g("删除")])]):u("div",{},e.url.split("?")[1])}},{title:"上传人",key:"creator",align:"center",width:100,render(e){return u("div",{},e.creator)}},{title:"上传时间",key:"dbtime",align:"center",width:200,render(e){return u("div",{},e.dbtime?e.dbtime:"")}},{title:"操作",key:"actions",align:"center",width:180,render(e){return u(re,{justify:"center"},[!e.setStatus&&e.id&&u(v,{type:"info",size:"small",ghost:!0,onClick:()=>{Ft(e)}},{default:()=>"下载"}),e.setStatus&&u(v,{type:"info",size:"small",ghost:!0,onClick:()=>{ha(e)}},{default:()=>"保存"}),e.setStatus&&u(v,{type:"info",size:"small",ghost:!0,onClick:()=>{e.setStatus=!e.setStatus}},{default:()=>"取消"}),!e.setStatus&&u(v,{type:"info",size:"small",ghost:!0,onClick:()=>{e.setStatus=!e.setStatus}},{default:()=>"编辑"}),Ct("project:File:delete")&&(b.userInfo.usertype==0||b.userInfo.usertype==2)&&u(we,{onPositiveClick:async()=>{var t;if(e.id){const{data:l,error:i}=await ml(e.url),{data:d,error:c}=await gl(e.id);c||(t=window.$message)==null||t.success("删除成功")}else x.value=x.value.filter(l=>l!==e)}},{default:()=>F("common.confirmDelete"),trigger:()=>u(v,{type:"error",ghost:!0,size:"small"},{default:()=>F("common.delete")})})])}}],ma=[{title:"文件名称",key:"filename",align:"center",render(e){if(!e.url){const t=async({file:i,onFinish:d,onError:c})=>{var S,y;try{e.status=!0;const Y=await vl(i.file,i.name,"",ie=>{e.progress=ie});Y&&(e.url=Y,e.name=i.name,e.status=!1)}catch(Y){console.error(Y),(y=(S=window.$message)==null?void 0:S.error)==null||y.call(S,"文件上传出错"),e.status=!1}};async function l(i){var d;return i.file.file.size>100*1024*1024?((d=window.$message)==null||d.error("文件大小不能超过100M"),!1):!0}return u("div",{style:"display: flex; justify-content: center; align-items: center;"},[u(Jt,{action:"#",showFileList:!1,customRequest:t,onBeforeUpload:l},{default:()=>u(v,{type:"info",size:"small",ghost:!0,loading:e.status},{default:()=>"上传文件"})}),e.progress?u(dt,{type:"line",percentage:e.progress,indicatorPlacement:"inside",processing:!0}):null])}return e.url&&!e.id?a("span",null,[e.url.split("?")[1],g(" "),a("span",{onClick:()=>{e.url="",e.progress=0,e.status=!1},style:"color: red;cursor: pointer;font-size: 12px;"},[g("删除")])]):u("div",{},e.url.split("?")[1])}},{title:"文件别名",key:"name",align:"center",render(e){return u(J,{value:e.name,onUpdateValue:t=>{e.name=t}})}},{title:"操作",key:"actions",align:"center",width:100,render(e){return u(re,{justify:"center"},[u(v,{type:"error",size:"small",ghost:!0,onClick:()=>{T.value=T.value.filter(t=>t!==e)}},{default:()=>"删除"})])}}];async function Ft(e){if(e!=null&&e.url)try{const l=await(await fetch(e.url.split("?")[0],{mode:"cors"})).blob(),i=URL.createObjectURL(l),d=document.createElement("a");d.href=i,d.download=e.url.split("?")[1],d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(i)}catch(t){console.error("下载失败:",t)}}const ga=()=>{var e,t;if(T.value.length>=4)return(t=(e=window.$message)==null?void 0:e.warning)==null?void 0:t.call(e,"最多上传4个文件");T.value.push({id:"",name:"",url:"",status:!1,setStatus:!0,progress:0})},va=()=>{x.value.push({id:"",name:"",url:"",status:!1,setStatus:!0})},ha=async e=>{var t,l,i,d,c,S,y,Y,ie,$e,Ae,Ce;if(!e.name){(l=(t=window.$message)==null?void 0:t.warning)==null||l.call(t,"请输入文件别名");return}if(!e.url){(d=(i=window.$message)==null?void 0:i.warning)==null||d.call(i,"请上传文件");return}if((c=m.rowData)!=null&&c.id){const{data:q,error:Le}=await Xt([{pid:(S=m.rowData)==null?void 0:S.id,filename:e.name,file:e.url,sort:1}]);if(Le)return(y=window.$message)==null?void 0:y.error("保存文件记录失败");(Y=window.$message)==null||Y.destroyAll(),e.setStatus=!e.setStatus,xe(),(ie=window.$message)==null||ie.success("保存成功")}else if(e.id){const{data:q,error:Le}=await hl([{id:e.id,filename:e.name}]);if(Le)return($e=window.$message)==null?void 0:$e.error("保存文件记录失败");(Ae=window.$message)==null||Ae.destroyAll(),e.setStatus=!e.setStatus,(Ce=window.$message)==null||Ce.success("编辑成功")}else e.setStatus=!e.setStatus},ya=Ka(()=>({add:"新增项目",edit:"修改项目"})[m.operateType]),Ne=wt(W,"visible");rt(Ne,()=>{Ne.value&&(be(),setTimeout(()=>{const e=document.querySelector(".n-scrollbar-content");e==null||e.scrollTo(0,0)},300),k())});function ba(e){e||Pe()}function Pe(){Ne.value=!1}async function Pt(){var e;await K(),(e=window.$dialog)==null||e.info({title:"提示",content:"确定提交吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{await _a()}})}async function _a(){var e,t,l,i,d,c,S,y,Y,ie,$e,Ae,Ce;if(m.operateType==="edit"){const q=JSON.parse(JSON.stringify(n));N.value==q.period&&delete q.period,de.value==q.status&&delete q.status;const{data:Le,error:f}=await ra([q]);if(!f){let $=function(Q,oe){const le=Q.filter(Se=>!oe.includes(Se)),je=oe.filter(Se=>!Q.includes(Se));return{toDelete:le,toAdd:je}};if((e=n.dispatchIds)!=null&&e.length&&((t=n.dispatchIds)==null?void 0:t.length)>0){const{toDelete:Q,toAdd:oe}=$(Nt.value,n.dispatchIds);if(oe.length>0){const le=oe.map(at=>({pid:n.id,did:at})),{data:je,error:Se}=await Gt(le)}if(Q.length>0){const{data:le,error:je}=await el(Q.join(","))}}if((l=n.contractIds)!=null&&l.length&&((i=n.contractIds)==null?void 0:i.length)>0){const{toDelete:Q,toAdd:oe}=$(Et.value,n.contractIds);if(oe.length>0){const le=oe.map(at=>({pid:n.id,did:at})),{data:je,error:Se}=await Kt(le)}if(Q.length>0){const{data:le,error:je}=await tl(Q.join(","))}}Pe(),se("submitted"),(d=window.$message)==null||d.success("修改成功")}}else{const q=al(),{data:Le,error:f}=await ll([{...n,uuid:q}]);if(!f){const{data:$,error:Q}=await sl(q);if($){let oe=function(A,Ue,Ot){return A.map(Ve=>({...Ve,pid:Ue}))};if(n.dispatchIds&&n.dispatchIds.length>0){const A=[];(c=n.dispatchIds)==null||c.forEach(Ve=>{A.push({pid:$,did:Ve})});const{data:Ue,error:Ot}=await Gt(A)}if(n.contractIds&&n.contractIds.length>0){const A=[];(S=n.contractIds)==null||S.forEach(async Ve=>{A.push({proid:$,conid:Ve})});const{data:Ue,error:Ot}=await Kt(A)}const le=[];if(_.value.length>0){const A=oe(_.value,$);le.push(Bt(A))}if(D.value.length>0){const A=oe(D.value,$);le.push(nl(A))}if(z.value.length>0&&le.push(Ht(z.value)),(await Promise.allSettled(le)).forEach((A,Ue)=>{A.status==="fulfilled"?console.log(`第 ${Ue+1} 个请求成功`,A.value):console.error(`第 ${Ue+1} 个请求失败`,A.reason)}),!x.value.length){(y=window.$message)==null||y.destroyAll(),(Y=window.$message)==null||Y.success("操作成功"),Pe(),se("submitted");return}const Se=[];x.value.forEach(A=>{Se.push({pid:$,filename:A.name,file:A.url,sort:1})});const{data:at,error:Ta}=await Xt(Se);Ta&&((ie=window.$message)==null||ie.error("保存文件记录失败")),($e=window.$message)==null||$e.destroyAll(),(Ae=window.$message)==null||Ae.success("操作成功"),Pe(),se("submitted")}}Pe(),se("submitted"),(Ce=window.$message)==null||Ce.success("添加成功")}}const Ie=h(!1),bt=h();let ke=null,Be=null,He=null,xa=null,It=null,he=null;const ae=Te({longitude:0,latitude:0});let Re;const Xe=h(!1),ye=h(""),Ye=h([]);let Qe=0;async function $t(){try{if(window._AMapSecurityConfig={securityJsCode:b.userInfo.sdksecret},!bt.value)return;he=await Tl.load({key:b.userInfo.sdkkey,version:"2.0",plugins:["AMap.Scale","AMap.PlaceSearch","AMap.AutoComplete","AMap.Geocoder","AMap.Geolocation"]}),ke=new he.Map(bt.value,{zoom:18,center:[w.value>0?z.value[w.value-1].longitude:n.longitude,w.value>0?z.value[w.value-1].latitude:n.latitude],viewMode:"3D",resizeEnable:!0}),Be=new he.Geocoder,xa=new he.PlaceSearch({city:"全国",pageSize:50}),It=new he.AutoComplete({city:"全国"}),We(he,{lng:w.value>0?z.value[w.value-1].longitude:n.longitude,lat:w.value>0?z.value[w.value-1].latitude:n.latitude}),ke.on("click",e=>{const{lng:t,lat:l}=e.lnglat;Re=2,ae.latitude=l,ae.longitude=t,We(he,{lng:t,lat:l})}),Qe=0,kt(()=>{window.dispatchEvent(new Event("resize"))})}catch(e){console.error("地图加载失败：",e),Qe<ts?(Qe++,console.warn(`地图加载失败，正在第 ${Qe} 次重试...`),setTimeout(()=>{$t()},1500)):console.error("地图加载失败，已达到最大重试次数，停止重试")}}const At=aa.debounce(async e=>{if(!Xe.value||!e.trim()){Ye.value=[];return}It.search(e,(t,l)=>{var i;console.log(l,"result"),t=="complete"&&l.info=="OK"&&((i=l==null?void 0:l.tips)!=null&&i.length)?Ye.value=l.tips.map(d=>({label:`${d.name}（${d.district||d.address||"无详细地址"}）`,value:`${d.location.lng}_${d.location.lat}`,raw:d})):Ye.value=[]})},300);rt(ye,e=>{At(e)});function ka(e,t){if(console.log(e,t,"option"),!e)return;const[l,i]=e.split("_").map(Number);!l||!i||(ke.setCenter([l,i]),Re=1,We(he,{lng:l,lat:i}),ae.longitude=l,ae.latitude=i)}const w=h(0);function Lt(e){e?w.value=e:w.value=0,Ie.value=!0,Xe.value=!1,Re=void 0,kt(async()=>{await $t(),setTimeout(()=>{Xe.value=!0;const t=document.querySelector(".n-auto-complete input");t==null||t.blur(),console.log(n),n.region&&!n.prosite&&!n.prosite&&_t(n.region)},500)})}function We(e,t){He&&ke.remove(He),He=new e.Marker({position:[t.lng,t.lat],map:ke}),ke.add(He),Be.getAddress(t,async(l,i)=>{l==="complete"&&i.regeocode&&(console.log("result",i),console.log("formattedAddress",i.regeocode.formattedAddress),t.latitude=t.lat,t.longitude=t.lng,Re==1?n.proaddr=i.regeocode.formattedAddress:Re==2?(ye.value=i.regeocode.formattedAddress,n.proaddr=i.regeocode.formattedAddress,n.provice=Da(n.proaddr,Ze.value),await xt(n.provice),n.region=za(n.proaddr,Me.value)):ye.value=w.value>0?z.value[w.value-1].addr||i.regeocode.formattedAddress:n.prosite||i.regeocode.formattedAddress)})}const Nt=h([]),Ca=async()=>{const{data:e,error:t}=await il({page:1,limit:100,pid:m.rowData.id});n.dispatchIds=e==null?void 0:e.list.map(l=>l.did),Nt.value=JSON.parse(JSON.stringify(n.dispatchIds))},jt=h([]),Ut=async e=>{if(!e)return;const{data:t,error:l}=await ol({page:1,limit:100,province:e});jt.value=t.list},Ze=h([]),Sa=async()=>{const{data:e,error:t}=await rl();e&&(Ze.value=e)},Tt=e=>{xt(e),n.region=null,n.prosite="",n.proaddr="",ye.value="",Ut(e)},_t=e=>{var l;const t=(l=Me.value.find(i=>i.id===e))==null?void 0:l.name;n.region&&n.prosite&&n.proaddr&&!Be?(n.prosite="",n.proaddr=""):wa(t)},Me=h([]),xt=async e=>{var i;if(!e)return(i=window.$message)==null?void 0:i.warning("请先选择省份");const{data:t,error:l}=await ul({province:e});t&&(Me.value=t)};function wa(e){!e||!Be||!ke||Be.getLocation(e,(t,l)=>{var i;if(t==="complete"&&((i=l.geocodes)!=null&&i.length)){const{location:d,formattedAddress:c}=l.geocodes[0],S=d.lng,y=d.lat;ke.setZoomAndCenter(14,[S,y]),ae.longitude=S,ae.latitude=y,n.latitude=ae.latitude,n.longitude=ae.longitude,We(he,{lng:S,lat:y}),n.proaddr=c,n.prosite=c,ye.value=c}})}function Da(e,t){let l=null;for(const i of t)if(e.includes(i.name)){l=i.id;break}return l}function za(e,t){let l=null;for(const i of t)if(e.includes(i.name)){l=i.id;break}return l}const Fa=async()=>{var e,t,l;if(w.value==0)n.latitude=ae.latitude,n.longitude=ae.longitude,n.prosite=ye.value;else if(z.value[w.value-1].addr=ye.value,z.value[w.value-1].latitude=ae.latitude,z.value[w.value-1].longitude=ae.longitude,m.operateType=="edit"){let i=z.value[w.value-1];if(z.value[w.value-1].id){const{data:d,error:c}=await dl([i]);d&&((e=window.$message)==null||e.success("修改位置成功"),Ie.value=!1,w.value=0,tt())}else{i.pid=(t=m.rowData)==null?void 0:t.id;const{data:d,error:c}=await Ht([i]);d&&((l=window.$message)==null||l.success("添加位置成功"),Ie.value=!1,w.value=0,tt())}}Ie.value=!1,w.value=0};function Pa(){Ie.value=!1}const{pageData:et,getData:Ia,nextPage:$a}=Qt(cl),Aa=async()=>{await Ia({limit:100})},La=async e=>{const t=e.currentTarget,l=t.scrollTop;t.scrollTop+t.offsetHeight>=t.scrollHeight&&et.data.length<et.total&&(await $a(),await kt(),setTimeout(()=>{t.scrollTop=l}))},Et=h([]),Na=async()=>{var l;const{data:e,error:t}=await pl({page:1,limit:100,proid:(l=m.rowData)==null?void 0:l.id});n.contractIds=e==null?void 0:e.list.map(i=>i.conid),Et.value=JSON.parse(JSON.stringify(n.contractIds))},z=h([{longitude:120.373885,latitude:30.303899,addr:""}]),ja=h([]),tt=async()=>{var l;const{data:e,error:t}=await fl({pid:(l=m.rowData)==null?void 0:l.id,page:1,limit:99});z.value=e.list.length==0?[{longitude:120.373885,latitude:30.303899,addr:""}]:e.list,ja.value=JSON.parse(JSON.stringify(z.value))},Ua=async e=>{var t;if(e.id){const{data:l,error:i}=await yl(e.id);l&&((t=window.$message)==null||t.success("删除成功"),tt())}else z.value.splice(z.value.indexOf(e),1)};return(e,t)=>{const l=pa,i=jl,d=Ya,c=Nl,S=Zt,y=ut,Y=ca,ie=la,$e=Xa,Ae=Ha,Ce=na,q=Wa,Le=Ul;return P(),nt(Vt,null,[a(Ae,{show:Ne.value,"onUpdate:show":[t[15]||(t[15]=f=>Ne.value=f),ba],"display-directive":"show",width:1100,onMaskClick:t[16]||(t[16]=f=>Ne.value=!0),onEsc:Pe},{default:o(()=>[a($e,{title:ya.value,"native-scrollbar":!1,closable:""},{footer:o(()=>[a(r(re),{size:16,justify:"end"},{default:o(()=>[a(r(v),{onClick:Pe},{default:o(()=>[g(G(r(F)("common.cancel")),1)]),_:1}),a(r(v),{type:"primary",onClick:Pt},{default:o(()=>[g(G(r(F)("common.confirm")),1)]),_:1})]),_:1})]),default:o(()=>[a(ie,{ref_key:"formRef",ref:O,model:n,rules:I,onKeyup:sa(Pt,["enter"])},{default:o(()=>[a(Y,{responsive:"screen","item-responsive":"","x-gap":"15"},{default:o(()=>[a(l,{span:"24 s:12 m:12",label:"项目名称",path:"proname"},{default:o(()=>[a(r(J),{clearable:"",value:n.proname,"onUpdate:value":t[0]||(t[0]=f=>n.proname=f),placeholder:"请输入项目名称"},null,8,["value"])]),_:1}),m.operateType==="add"?(P(),E(l,{key:0,span:"24 s:12 m:12",label:"绑定合同",path:"contractIds"},{default:o(()=>[a(r(fe),{filterable:"",multiple:"",value:n.contractIds,"onUpdate:value":[t[1]||(t[1]=f=>n.contractIds=f),R],placeholder:"请选择合同","label-field":"contractname","value-field":"id",options:r(et).data,onScroll:La},null,8,["value","options"])]),_:1})):me("",!0),m.operateType==="edit"?(P(),E(l,{key:1,span:"24 s:12 m:12",label:"项目状态",path:"status"},{default:o(()=>[a(r(fe),{filterable:"",value:n.status,"onUpdate:value":t[2]||(t[2]=f=>n.status=f),placeholder:"请选择项目状态",options:r(Ge)(r(b).userInfo.usertype==0||r(b).userInfo.usertype==2?r(zt):r(El))},null,8,["value","options"])]),_:1})):me("",!0),a(l,{span:"24 s:12 m:12",label:"周期（天）",path:"period"},{default:o(()=>[a(r(Rt),{clearable:"",value:n.period,"onUpdate:value":t[3]||(t[3]=f=>n.period=f),style:{width:"100%"},placeholder:"请输入周期"},null,8,["value"])]),_:1}),a(l,{span:"24 s:12 m:12",label:"调试类型",path:"dtype"},{default:o(()=>[a(r(fe),{filterable:"",value:n.dtype,"onUpdate:value":t[4]||(t[4]=f=>n.dtype=f),placeholder:"请选择调试类型",options:r(Ge)(r(da))},null,8,["value","options"])]),_:1}),a(l,{span:"24 s:12 m:12",label:"省份",path:"provice"},{default:o(()=>[a(r(fe),{filterable:"",value:n.provice,"onUpdate:value":[t[5]||(t[5]=f=>n.provice=f),Tt],placeholder:"请选择省份","label-field":"name","value-field":"id",options:Ze.value},null,8,["value","options"])]),_:1}),a(l,{span:"24 s:12 m:12",label:"地区",path:"region"},{default:o(()=>[a(r(fe),{filterable:"",value:n.region,"onUpdate:value":[t[6]||(t[6]=f=>n.region=f),_t],placeholder:"请选择地区","label-field":"name","value-field":"id",options:Me.value},null,8,["value","options"])]),_:1}),a(l,{span:"24 s:12 m:12",label:"项目默认地点",path:"prosite"},{default:o(()=>[L("div",Jl,[L("div",Gl,[a(d,{onClick:t[8]||(t[8]=f=>Lt())},{default:o(()=>[a(r(J),{value:n.prosite,"onUpdate:value":t[7]||(t[7]=f=>n.prosite=f),placeholder:"请选择项目地点"},null,8,["value"]),a(r(v),null,{icon:o(()=>[a(i,{class:"text-icon"})]),_:1})]),_:1})])])]),_:1}),a(l,{span:"24 s:12 m:12",label:"项目详细地址",path:"proaddr"},{default:o(()=>[a(r(J),{type:"textarea",rows:1,clearable:"",value:n.proaddr,"onUpdate:value":t[9]||(t[9]=f=>n.proaddr=f),placeholder:"请输入项目详细地址"},null,8,["value"])]),_:1}),z.value.length?(P(),E(l,{key:2,span:"24 s:12 m:24",label:"",path:""},{default:o(()=>[L("div",Kl,[L("div",Hl,[L("span",{class:"mr-10px",onClick:t[10]||(t[10]=qt(()=>{},["stop"]))},"其他地址"),a(r(v),{size:"small",ghost:"",type:"primary",onMousedown:t[11]||(t[11]=qt(()=>{},["stop"])),onClick:t[12]||(t[12]=f=>z.value.push({latitude:30.303899,longitude:120.373885,addr:""}))},{icon:o(()=>[a(c,{class:"text-icon"})]),default:o(()=>[t[23]||(t[23]=g(" 添加 "))]),_:1,__:[23]})]),L("div",Xl,[(P(!0),nt(Vt,null,Qa(z.value,(f,$)=>(P(),nt("div",{class:"flex px-50px items-center mt-10px w-100%",key:f.latitude},[L("span",Yl,"项目地址"+G($+1),1),a(d,{onClick:Q=>Lt($+1)},{default:o(()=>[a(r(J),{readonly:"",value:f.addr,"onUpdate:value":Q=>f.addr=Q,placeholder:"请选择项目地址"+($+1)},null,8,["value","onUpdate:value","placeholder"]),a(r(v),null,{icon:o(()=>[a(i,{class:"text-icon"})]),_:1})]),_:2},1032,["onClick"]),z.value.length>1?(P(),E(r(we),{key:0,onPositiveClick:Q=>Ua(f)},{trigger:o(()=>[a(r(v),{size:"small",ghost:"",type:"error",class:"ml-10px"},{icon:o(()=>[a(S,{class:"text-icon"})]),default:o(()=>[t[24]||(t[24]=g(" "+G("删除")))]),_:1,__:[24]})]),default:o(()=>[g(" 确定要删除项目地址"+G($+1)+"吗？ ",1)]),_:2},1032,["onPositiveClick"])):me("",!0)]))),128))])])]),_:1})):me("",!0),a(l,{span:"24 s:12 m:12",label:"调度名称",path:"dispatch"},{default:o(()=>[a(r(J),{clearable:"",value:n.dispatch,"onUpdate:value":t[13]||(t[13]=f=>n.dispatch=f),placeholder:"请输入调度名称"},null,8,["value"])]),_:1}),a(l,{span:"24 s:12 m:12",label:"选择调度",path:"dispatchIds"},{default:o(()=>[a(r(fe),{filterable:"",multiple:"",value:n.dispatchIds,"onUpdate:value":t[14]||(t[14]=f=>n.dispatchIds=f),placeholder:"请选择调度","label-field":"dname","value-field":"id",options:jt.value},null,8,["value","options"])]),_:1}),a(l,{span:"24 s:12 m:24",path:"contactList"},{default:o(()=>[L("div",Ql,[a(r(re),{align:"center",style:{"margin-bottom":"10px"}},{default:o(()=>[t[26]||(t[26]=L("span",null,"项目联系人",-1)),a(r(v),{size:"small",ghost:"",type:"primary",onClick:ze},{icon:o(()=>[a(c,{class:"text-icon"})]),default:o(()=>[t[25]||(t[25]=g(" 添加项目联系人 "))]),_:1,__:[25]})]),_:1,__:[26]}),_.value.length>0?(P(),E(y,{key:0,columns:B,"paginate-single-page":!1,data:_.value,pagination:j,"max-height":350,"scroll-x":B.reduce((f,$)=>f+$.width,0)},null,8,["data","pagination","scroll-x"])):me("",!0)])]),_:1}),a(l,{span:"24 s:12 m:24",path:"debuggedDevieceList"},{default:o(()=>[L("div",Wl,[a(r(re),{align:"center",style:{"margin-bottom":"10px"}},{default:o(()=>[t[28]||(t[28]=L("span",null,"待调试设备",-1)),a(r(v),{size:"small",ghost:"",type:"primary",onClick:ht},{icon:o(()=>[a(c,{class:"text-icon"})]),default:o(()=>[t[27]||(t[27]=g(" 添加待调试设备 "))]),_:1,__:[27]})]),_:1,__:[28]}),D.value.length>0?(P(),E(y,{key:0,style:{width:"1050px"},columns:Oe,data:D.value,size:"small","scroll-x":Oe.reduce((f,$)=>f+$.width,0),"row-key":f=>f.id,"max-height":350,pagination:ee.pageSize==1?!1:ee,remote:"","paginate-single-page":!1},null,8,["data","scroll-x","row-key","pagination"])):me("",!0)])]),_:1}),a(l,{span:"24 s:12 m:24"},{default:o(()=>[L("div",Zl,[a(r(re),{align:"center",style:{"margin-bottom":"10px"}},{default:o(()=>[t[30]||(t[30]=L("span",null,"图纸",-1)),a(r(v),{size:"small",ghost:"",type:"primary",onClick:va},{icon:o(()=>[a(c,{class:"text-icon"})]),default:o(()=>[t[29]||(t[29]=g(" 添加图纸 "))]),_:1,__:[29]})]),_:1,__:[30]}),x.value.length>0?(P(),E(y,{key:0,columns:fa,data:x.value,size:"small","scroll-x":702,"row-key":f=>f.id,"max-height":350},null,8,["data","row-key"])):me("",!0)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"]),a(Ce,{show:s.value,"onUpdate:show":t[17]||(t[17]=f=>s.value=f),preset:"card",class:"w-800px","mask-closable":!1,draggable:!0},{header:o(()=>[g(G(p.value=="debuggedDevieceList"?"待调试设备":p.value=="debuggedBusinessList"?"待调试业务":p.value=="needsList"?"客户需求变更":p.value=="developBusinessList"?"需要开发":"")+" 文件列表 ",1)]),footer:o(()=>[a(r(re),{justify:"end"},{default:o(()=>[a(r(v),{size:"small",class:"mt-16px",onClick:yt},{default:o(()=>[g(G(r(F)("common.cancel")),1)]),_:1}),a(r(v),{type:"primary",size:"small",class:"mt-16px",onClick:ce},{default:o(()=>[g(G(r(F)("common.confirm")),1)]),_:1})]),_:1})]),default:o(()=>[a(r(v),{size:"small",ghost:"",type:"primary",onClick:ga},{icon:o(()=>[a(c,{class:"text-icon"})]),default:o(()=>[t[31]||(t[31]=g(" 添加 "))]),_:1,__:[31]}),a(y,{columns:ma,"paginate-single-page":!1,data:T.value,"max-height":350},null,8,["data"])]),_:1},8,["show"]),a(Ce,{show:Ie.value,"onUpdate:show":t[22]||(t[22]=f=>Ie.value=f),title:"选择项目位置",preset:"card",class:"w-800px"},{footer:o(()=>[a(r(re),{justify:"end",size:16},{default:o(()=>[a(r(v),{onClick:Pa},{default:o(()=>[g(G(r(F)("common.cancel")),1)]),_:1}),a(r(v),{type:"primary",onClick:Fa},{default:o(()=>[g(G(r(F)("common.confirm")),1)]),_:1})]),_:1})]),default:o(()=>[a(r(re),null,{default:o(()=>[a(q,{label:"省份",path:"provice","label-placement":"left","label-width":"70"},{default:o(()=>[a(r(fe),{filterable:"",value:n.provice,"onUpdate:value":[t[18]||(t[18]=f=>n.provice=f),Tt],placeholder:"请选择省份","label-field":"name","value-field":"id",options:Ze.value},null,8,["value","options"])]),_:1}),a(q,{label:"地区",path:"region","label-placement":"left","label-width":"70"},{default:o(()=>[a(r(fe),{filterable:"",value:n.region,"onUpdate:value":[t[19]||(t[19]=f=>n.region=f),_t],placeholder:"请选择地区","label-field":"name","value-field":"id",options:Me.value},null,8,["value","options"])]),_:1})]),_:1}),Xe.value?(P(),E(q,{key:0,label:w.value==0?"项目地址":"项目地址"+w.value,"label-placement":"left"},{default:o(()=>[L("div",es,[a(Le,{value:ye.value,"onUpdate:value":[t[20]||(t[20]=f=>ye.value=f),r(At)],options:Ye.value,style:{"margin-bottom":"7px"},placeholder:"请输入地点关键字",clearable:"",onSelect:ka},null,8,["value","options","onUpdate:value"]),w.value==0?(P(),E(r(J),{key:0,type:"textarea",rows:2,clearable:"",value:n.proaddr,"onUpdate:value":t[21]||(t[21]=f=>n.proaddr=f),placeholder:"请输入详细地址"},null,8,["value"])):me("",!0)])]),_:1},8,["label"])):me("",!0),L("div",{ref_key:"domRef",ref:bt,class:"h-full w-full",style:{width:"100%",height:"500px","margin-top":"10px"}},null,512)]),_:1},8,["show"])],64)}}}),ls=ct({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:it(["reset","search"],["update:model"]),setup(W,{emit:ue}){_l();const b=ue,{formRef:se,restoreValidation:M}=ta(),m=wt(W,"model"),n={当日:()=>{const k=new Date().getTime();return[k,k]},本周:()=>{const k=new Date().getTime();return[k-24*60*60*1e3*7,k]},上月:()=>{const k=new Date().getTime();return[k-24*60*60*1e3*30,k]},近一年:()=>{const k=new Date().getTime();return[k-24*60*60*1e3*365,k]},近三年:()=>{const k=new Date().getTime();return[k-24*60*60*1e3*365*3,k]}};function ge(){m.value.fuzzy="",b("search")}async function N(k,I){if(!k){m.value.startTime=void 0,m.value.endTime=void 0,b("search");return}m.value.startTime=String(ot(1,I[0])),m.value.endTime=String(ot(1,I[1])),b("search")}async function de(){m.value.startTime=void 0,m.value.endTime=void 0,m.value.startAndTimeRange=null,m.value.fuzzy="",m.value.status=null,m.value.ptype=null,m.value.dtype=null,await M(),b("reset")}const be=aa.debounce(k=>{b("search")},1e3,{leading:!0,trailing:!1}),O=k=>{m.value.fuzzy=k,be(k)};async function K(){b("search")}return(k,I)=>{const _=J,j=pa,B=fe,C=Vl,H=Ml,ne=v,De=Rl,ze=re,R=ca,V=la,Ee=Dt;return P(),E(Ee,{bordered:!1,size:"small",class:"card-wrapper"},{default:o(()=>[a(V,{ref_key:"formRef",ref:se,model:m.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:sa(K,["enter"])},{default:o(()=>[a(R,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:o(()=>[a(j,{span:"24 s:12 m:6",label:"项目/客户",path:"fuzzy"},{default:o(()=>[a(_,{clearable:"",value:m.value.fuzzy,"onUpdate:value":I[0]||(I[0]=U=>m.value.fuzzy=U),placeholder:"请输入项目名称或客户名称",onClear:ge,onInput:O},null,8,["value"])]),_:1}),a(j,{span:"24 s:12 m:6",label:"项目状态",path:"status"},{default:o(()=>[a(B,{clearable:"",filterable:"",value:m.value.status,"onUpdate:value":[I[1]||(I[1]=U=>m.value.status=U),K],placeholder:"请选择项目状态",options:r(Ge)(r(zt)).sort((U,_e)=>U.value-_e.value)},null,8,["value","options"])]),_:1}),a(j,{span:"24 s:12 m:6",label:"进度状态",path:"ptype"},{default:o(()=>[a(B,{clearable:"",filterable:"",value:m.value.ptype,"onUpdate:value":[I[2]||(I[2]=U=>m.value.ptype=U),K],placeholder:"请选择进度状态",options:[{label:"正常",value:0},{label:"已延期",value:1}]},null,8,["value"])]),_:1}),a(j,{span:"24 s:12 m:6",label:"调试类型",path:"dtype"},{default:o(()=>[a(B,{clearable:"",filterable:"",value:m.value.dtype,"onUpdate:value":[I[3]||(I[3]=U=>m.value.dtype=U),K],placeholder:"请选择调试类型",options:r(Ge)(r(da))},null,8,["value","options"])]),_:1}),a(j,{span:"24 s:12 m:8",label:"起止时间"},{default:o(()=>[a(C,{value:m.value.startAndTimeRange,"onUpdate:value":I[4]||(I[4]=U=>m.value.startAndTimeRange=U),type:"datetimerange",clearable:"",shortcuts:n,"onUpdate:formattedValue":N},null,8,["value"])]),_:1}),a(j,{span:"24  s:12 m:6",class:"pr-24px"},{default:o(()=>[a(ze,{class:"w-full"},{default:o(()=>[a(ne,{onClick:de},{icon:o(()=>[a(H,{class:"text-icon"})]),default:o(()=>[g(" "+G(r(F)("common.reset")),1)]),_:1}),a(ne,{type:"primary",ghost:"",onClick:K},{icon:o(()=>[a(De,{class:"text-icon"})]),default:o(()=>[g(" "+G(r(F)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),ss={class:"min-h-500px flex gap-16px"},ns={class:"flex items-center justify-end gap-16px"},is=ct({__name:"relatedContractLook",props:it({id:{}},{visable:{type:Boolean},visableModifiers:{}}),emits:["update:visable"],setup(W){const ue=W,b=wt(W,"visable"),{columns:se,data:M,getData:m,loading:n,mobilePagination:ge,searchParams:N}=St({apiFn:ia,immediate:!1,apiParams:{page:1,pageSize:20,limit:20,id:ue.id,_t:new Date().getTime()},columns:()=>[{key:"contractname",title:"合同",width:200,render:C=>a("div",{class:_.pids==C.id?"bg-#f1f1f1 cursor-pointer p-5px":"cursor-pointer p-5px",onClick:()=>j(C.id)},[a("div",{class:"flex"},[a("div",{class:"w-60px inline-block"},[g("名称：")]),C.contractname]),a("div",{class:"font-size-12px c-#7d7575 flex"},[a("div",{class:"w-60px inline-block"},[g("编号：")]),g(" "),C.contractnum]),a("div",{class:"font-size-12px c-#7d7575 flex"},[a("div",{class:"w-60px inline-block"},[g("联系人：")]),C.businesscon]),a("div",{class:"font-size-12px c-#7d7575 flex"},[a("div",{class:"w-60px inline-block"},[g("联系方式：")]),C.businessinfo]),a("div",{class:"font-size-12px c-#7d7575 flex"},[a("div",{class:"w-60px inline-block"},[g("注意事项：")]),C.precautions]),a("div",{class:"font-size-12px c-#7d7575 flex"},[a("div",{class:"w-60px inline-block"},[g("备注：")]),C.notes])])}]}),{columns:de,data:be,getData:O,loading:K,pagination:k,mobilePagination:I,searchParams:_}=St({apiFn:oa,immediate:!1,apiParams:{page:1,pageSize:20,limit:20,pids:ue.id,_t:new Date().getTime()},columns:()=>[{key:"devname",title:"设备名称",align:"center",width:200,ellipsis:{tooltip:!0}},{key:"devcount",title:"数量",align:"center",width:120},{key:"devmodel",title:"规格型号",align:"center",width:120,ellipsis:{tooltip:!0}},{key:"devunit",title:"单位",align:"center",width:120},{key:"devtype",title:"是否为我司设备",align:"center",width:120,render:C=>C.devtype==0?a(Je,{type:"success"},{default:()=>[g("是")]}):a(Je,{type:"info"},{default:()=>[g("否")]})},{key:"devmanu",title:"设备厂家",align:"center",width:120},{key:"notes",title:"备注",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dbtime",title:"创建时间",align:"center",width:180}]}),j=C=>{_.pids=C,O()},B=()=>{b.value=!1};return rt(()=>b.value,async C=>{var H;C&&(N.id=ue.id,be.value=[],k.itemCount=0,await m(),_.pids=(H=M.value[0])==null?void 0:H.id,_.pids&&O())}),(C,H)=>{const ne=ut,De=Dt,ze=na;return P(),E(ze,{show:b.value,"onUpdate:show":H[0]||(H[0]=R=>b.value=R),preset:"card",class:"w-1400px",title:"项目关联的合同"},{footer:o(()=>[L("div",ns,[a(r(v),{type:"primary",size:"small",onClick:B},{default:o(()=>H[1]||(H[1]=[g(" 关闭 ")])),_:1,__:[1]})])]),default:o(()=>[L("div",ss,[a(ne,{class:"left",columns:r(se),data:r(M),"paginate-single-page":!1,size:"small",remote:"",loading:r(n),pagination:r(ge),"row-key":R=>R.id,"max-height":600},null,8,["columns","data","loading","pagination","row-key"]),a(De,{bordered:!1,size:"small",title:"设备",class:"w-1100px"},{default:o(()=>[a(ne,{style:{width:"100%"},columns:r(de),data:r(be),size:"small","max-height":600,loading:r(K),remote:"","scroll-x":r(de).reduce((R,V)=>R+(V.width||100),0),"paginate-single-page":!1,pagination:r(I),"row-key":R=>R.id},null,8,["columns","data","loading","scroll-x","pagination","row-key"])]),_:1})])]),_:1},8,["show"])}}}),os=ua(is,[["__scopeId","data-v-a53f455a"]]),rs={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function Wt(W){return typeof W=="function"||Object.prototype.toString.call(W)==="[object Object]"&&!Al(W)}const us=ct({name:"projectmanagement_projectlist",__name:"index",setup(W){const ue=xl(),b=ea(),se=kl(),M=Cl(),{columns:m,columnChecks:n,data:ge,getData:N,loading:de,mobilePagination:be,searchParams:O}=St({showTotal:!0,apiFn:$l,apiParams:{page:1,pageSize:20,limit:20,status:null,startAndTimeRange:null,startTime:null,endTime:null,creater:void 0,fuzzy:"",sort:void 0,_t:new Date().getTime()},immediate:!1,columns:()=>[{type:"selection",align:"center",width:48},{key:"proname",title:"项目名称",align:"center",width:240,render:s=>a("div",{class:"cursor-pointer",onClick:()=>Fe(s)},[s.proname+(s.dispatch?`(${s.dispatch})`:"")])},{key:"progess",title:"项目进度",align:"center",width:140,sorter:!0,render:s=>a(dt,{type:"line",showIndicator:!0,percentage:s.progess,"indicator-placement":"inside",processing:!0,color:"#1890ff"},null)},{key:"status",title:"项目状态",align:"center",width:120,defaultFilterOptionValue:null,filterOptions:Ge(zt),filter:!0,filterMultiple:!1,render:s=>{if(s.status===null)return null;const p=F(Yt[s.status]);return a("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",color:s.status==-1?"#a27ff9":s.status===0?"#9ca3af":s.status===1?"#3b82f6":s.status===2?"#facc15":"#22c55e",borderRadius:"50%"}},[a("span",{style:{width:"10px",height:"10px",marginRight:"5px",backgroundColor:s.status==-1?"#a27ff9":s.status===0?"#9ca3af":s.status===1?"#3b82f6":s.status===2?"#facc15":"#22c55e",borderRadius:"50%"}},null),a("span",null,[p])])}},{key:"cpdbtime",title:"预计完成日期",align:"center",width:120,ellipsis:{tooltip:!0}},{key:"period",title:"周期",align:"center",width:100,render:s=>a("div",null,[s.period,g("天")])},{key:"ptype",title:"状态",align:"center",width:80,render:s=>a(Je,{type:s.ptype===0?"success":"error"},{default:()=>[s.ptype===0?"正常":"已延期"]})},{key:"dtype",title:"调试类型",align:"center",width:100,render:s=>{if(s.dtype===null)return null;const p=F(Ol[s.dtype]);return a(Je,{type:s.dtype==0?"warning":s.dtype==1?"success":"info"},Wt(p)?p:{default:()=>[p]})}},{key:"debugs",title:"统计数量信息",align:"center",width:160,render(s){const p=(te,ve,ce)=>{const pe=ce>0;return u("div",{style:`
                    cursor: ${pe?"pointer":"default"};
                    color: ${pe?"#1890ff":"#999"};
                    font-size:13px;
                  `,onClick:()=>pe&&ft(ve,s)},`${te}：${ce}`)};return u("div",{style:"display:flex; flex-direction:column; gap:1px;"},[p("调试任务","business",s.debugs),p("项目总结","projectsummary",s.summarys),p("日报数量","daylog",s.dailys)])}},{key:"businesscon",title:"商务联系人",align:"center",width:200,render(s){return a("div",null,[s.businesscon||"-"])}},{key:"operate",title:F("common.operate"),align:"center",width:320,fixed:"right",render:s=>{let p;return a("div",{class:"flex justify-end gap-8px"},[s.status==-1&&(b.userInfo.usertype==0||b.userInfo.usertype==4||b.userInfo.id==1021||b.userInfo.id==1023)&&a(we,{onPositiveClick:()=>ne(s,0)},{default:()=>"确定核准该项目吗？",trigger:()=>a(v,{color:"#a43cf9",ghost:!0,size:"small"},{default:()=>["核准"]})}),s.status==0&&(b.userInfo.usertype==0||b.userInfo.usertype==2)&&a(we,{onPositiveClick:()=>ne(s,1)},{default:()=>"确定启动该项目吗？",trigger:()=>qe(a(v,{type:"success",ghost:!0,size:"small"},{default:()=>["启动"]}),[[lt("no-auth"),"project:Info:update"]])}),s.status==2&&(b.userInfo.usertype==0||b.userInfo.usertype==2)&&a(we,{onPositiveClick:()=>ne(s,3)},{default:()=>"是否确认执行审核操作？",trigger:()=>qe(a(v,{type:"warning",ghost:!0,size:"small"},{default:()=>["审核"]}),[[lt("no-auth"),"project:Info:update"]])}),a(v,{type:"primary",ghost:!0,size:"small",onClick:()=>Fe(s)},{default:()=>["详情"]}),a(v,{type:"primary",ghost:!0,size:"small",onClick:()=>Ee(s)},{default:()=>["关联合同"]}),qe(a(v,{type:"primary",ghost:!0,size:"small",onClick:()=>De(s.id)},Wt(p=F("common.edit"))?p:{default:()=>[p]}),[[lt("no-auth"),"project:Info:update"]])])}}]}),{drawerVisible:K,operateType:k,editingData:I,handleAdd:_,handleEdit:j,checkedRowKeys:B,onBatchDeleted:C}=Ll(ge,N);async function H(){console.log(B.value),ze(B.value.join(","),s=>{C()})}const ne=async(s,p)=>{var ce;const{data:te,error:ve}=await ra([{id:s.id,status:p}]);ve||((ce=window.$message)==null||ce.success("操作成功"),N(),p==3&&window.dispatchEvent(new CustomEvent("clearReview",{detail:{id:s.pid,type:"prj"}})))};function De(s){j(s)}async function ze(s,p){const{data:te,error:ve}=await Pl(s);if(!ve)p&&p(te);else return!1}const R=h(!1),V=h(0),Ee=s=>{R.value=!0,V.value=s.id},U=s=>{O.status=s.status,N()},_e=s=>{console.log(s),s.columnKey=="progess"&&(O.sort=s.order=="ascend"?0:s.order=="descend"?1:void 0,N())},Z=h(1),pt=s=>{Z.value=s,s==0?N():T()},Fe=s=>{se.push("/projectmanagement/orderdetail?prjId="+s.id+"&pname="+s.proname),b.setProjectInfo({pid:s.id,pname:s.proname})},ft=(s,p)=>{se.push(`/projectmanagement/${s}?prjId=`+p.id+"&pname="+p.proname),b.setProjectInfo({pid:p.id,pname:p.proname})},D=()=>{N()};Sl(()=>{M.query.pname?(Z.value=0,O.fuzzy=M.query.pname,O.status=2,D(),N()):T()}),rt(()=>M.query.pname,s=>{s&&!M.query.prjId&&(O.fuzzy=s,Z.value=0,N())});const ee=[{key:"proname",width:320,title(){return a("div",{class:"font-size-16px font-bold"},[g("近期项目")])},ellipsis:{tooltip:!0},render:s=>{if(s.status===null)return null;const p=F(Yt[s.status]);return a("div",null,[a(Il,{placement:"top",trigger:"hover"},{trigger:()=>a("div",{class:"cursor-pointer text-ellipsis overflow-hidden whitespace-nowrap font-bold",onClick:()=>Fe(s),style:"max-width: 300px;"},[s.proname||"-"]),default:()=>s.proname||"-"}),a("div",{style:"display:flex; gap:3px; line-height:1.4;"},[a("div",{class:" flex"},[a("span",{style:"color:#666"},[g("进度：")]),a(dt,{type:"line",style:"width: 100px;",showIndicator:!0,percentage:s.progess,"indicator-placement":"inside",processing:!0,color:s.progess==100?"#22C55E":"#1890ff"},null)]),a("div",{class:" flex ml-8px"},[a("span",{style:"color:#666 flex"},[g("状态：")]),a("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",color:s.status===0?"#9ca3af":s.status===1?"#3B82F6":s.status===2?"#f1c40f":"#2ecc71",borderRadius:"50%"}},[a("span",{style:{width:"10px",height:"10px",marginRight:"5px",backgroundColor:s.status===0?"#9ca3af":s.status===1?"#3B82F6":s.status===2?"#f1c40f":"#2ecc71",borderRadius:"50%"}},null),a("span",null,[p])])])])])}},{key:"businesscon",title:"商务联系人",align:"center",width:100},{title:"最后打卡人",key:"clockinusername",align:"center",width:100},{title:"最后打卡时间",key:"lastclockintime",align:"center",width:180},{key:"clockincounts",title:"打卡信息",align:"left",width:200,render(s){return a("div",{style:"display:flex; flex-direction:column; gap:3px; line-height:1.4;"},[a("div",null,[a("span",{style:"color:#666"},[g("打卡人数：")]),a("span",{style:"font-weight:500"},[s.clockincounts!=null?s.clockincounts+"人":"-"])]),a("div",null,[a("span",{style:"color:#666"},[g("打卡人：")]),a("span",{style:" font-weight:500"},[s.clockinusers||"-"])])])}},{key:"debugname",title:"调试任务信息",align:"left",width:260,render(s){return a("div",{style:"display:flex; flex-direction:column; gap:3px; line-height:1.4;"},[a("div",null,[a("span",{style:"color:#666"},[g("任务名称：")]),a("span",{style:"font-weight:500"},[s.debugname||"-"])]),a("div",null,[a("span",{style:"color:#666"},[g("状态：")]),a(Je,{size:"small",color:{color:s.debugstatus==-1?"rgba(251, 146, 60, 0.15)":s.debugstatus==0?"rgba(156, 163, 175, 0.15)":s.debugstatus==1?"rgba(59, 130, 246, 0.15)":s.debugstatus==2?"rgba(250, 204, 21, 0.15)":"rgba(16, 185, 129, 0.15)",textColor:s.debugstatus==-1?"#FB923C":s.debugstatus==0?"#9CA3AF":s.debugstatus==1?"#3B82F6":s.debugstatus==2?"#FACC15":"#10B981",borderColor:s.debugstatus==-1?"#FB923C":s.debugstatus==0?"#9CA3AF":s.debugstatus==1?"#3B82F6":s.debugstatus==2?"#FACC15":"#10B981"}},{default:()=>[s.debugstatus==-1?"申请中":s.debugstatus==0?"待调试":s.debugstatus==1?"开始调试":s.debugstatus==2?"待审核":"审核完成"]})])])}},{key:"username",title:"调试信息",align:"left",width:230,render(s){return a("div",{style:"display:flex; flex-direction:column; gap:3px; line-height:1.4;"},[a("div",null,[a("span",{style:"color:#666"},[g("时间：")]),a("span",{style:" font-weight:500"},[s.dbdbtime||"-"])]),a("div",null,[a("span",{style:"color:#666"},[g("调试人：")]),a("span",{style:"font-weight:500"},[s.username||"-"])])])}},{title:"任务审核时间",key:"ckdbtime",width:180}],X=Te({page:1,pageSize:20,showSizePicker:!0,fuzzy:"",itemCount:0,pageSizes:[10,20],prefix:()=>`共 ${X.itemCount} 条`,onChange:s=>{X.page=s,T()},onUpdatePageSize:s=>{X.pageSize=s,X.page=1,T()}}),Oe=h([]),T=async()=>{const{data:s,error:p}=await wl({page:X.page,limit:X.pageSize});p||(Oe.value=s.list,X.itemCount=s.total)};return(s,p)=>{const te=ql,ve=Fl,ce=re,pe=Oa,mt=Zt,gt=Ea,vt=ut,ht=ut,yt=Dt,Ke=lt("no-auth");return P(),nt("div",rs,[Z.value==0?(P(),E(ls,{key:0,model:r(O),"onUpdate:model":p[0]||(p[0]=x=>st(O)?O.value=x:null),onReset:D,onSearch:r(N)},null,8,["model","onSearch"])):me("",!0),a(yt,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},Dl({header:o(()=>[a(ce,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:o(()=>[p[6]||(p[6]=L("div",null,"项目列表",-1)),a(ve,{size:"small",value:Z.value,"onUpdate:value":[p[1]||(p[1]=x=>Z.value=x),pt],name:"radiobuttongroup1"},{default:o(()=>[a(te,{value:0,label:"默认"}),a(te,{value:1,label:"近期项目"})]),_:1},8,["value"])]),_:1,__:[6]})]),default:o(()=>[Z.value==0?(P(),E(vt,{key:0,"checked-row-keys":r(B),"onUpdate:checkedRowKeys":p[3]||(p[3]=x=>st(B)?B.value=x:null),columns:r(m),data:r(ge),size:"small","flex-height":!r(ue).isMobile,"scroll-x":r(m).reduce((x,xe)=>x+((xe==null?void 0:xe.width)||100),0),loading:r(de),remote:"","row-key":x=>x.id,"onUpdate:sorter":_e,pagination:r(be),class:"sm:h-full","onUpdate:filters":U},null,8,["checked-row-keys","columns","data","flex-height","scroll-x","loading","row-key","pagination"])):(P(),E(ht,{key:1,ref:"tableContainer",class:"sm:h-full",remote:"",pagination:X.pageSize==1?!1:X,"scroll-x":ee.reduce((x,xe)=>x+(xe.width||100),0),columns:ee,data:Oe.value,bordered:!1,"flex-height":!r(ue).isMobile},null,8,["pagination","scroll-x","data","flex-height"])),a(as,{visible:r(K),"onUpdate:visible":p[4]||(p[4]=x=>st(K)?K.value=x:null),onSubmitted:r(N),"operate-type":r(k),"row-data":r(I)},null,8,["visible","onSubmitted","operate-type","row-data"]),a(os,{visable:R.value,"onUpdate:visable":p[5]||(p[5]=x=>R.value=x),id:V.value},null,8,["visable","id"])]),_:2},[Z.value==0?{name:"header-extra",fn:o(()=>[a(ce,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:o(()=>[qe((P(),E(r(v),{onClick:r(_),size:"small",ghost:"",type:"primary"},{icon:o(()=>[a(pe,{class:"text-icon"})]),default:o(()=>[p[7]||(p[7]=g(" "+G("新增项目")))]),_:1,__:[7]},8,["onClick"])),[[Ke,"project:Info:insert"]]),a(r(we),{onPositiveClick:H},{trigger:o(()=>[qe((P(),E(r(v),{size:"small",ghost:"",type:"error",disabled:r(B).length==0},{icon:o(()=>[a(mt,{class:zl(["text-icon",{"animate-spin":r(de)}])},null,8,["class"])]),default:o(()=>[p[8]||(p[8]=g(" "+G("批量删除")))]),_:1,__:[8]},8,["disabled"])),[[Ke,"project:Info:delete"]])]),default:o(()=>[p[9]||(p[9]=g(" 确定要删除选中的合同吗？ "))]),_:1,__:[9]}),a(gt,{columns:r(n),"onUpdate:columns":p[2]||(p[2]=x=>st(n)?n.value=x:null),ctype:2},null,8,["columns"])]),_:1})]),key:"0"}:void 0]),1024)])}}}),Ps=ua(us,[["__scopeId","data-v-add51110"]]);export{Ps as default};
