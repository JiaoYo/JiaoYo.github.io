import{o as s,e as k,f as S,d as q,q as J,s as fe,r as Y,y as X,c as C,w as l,g as a,O,ah as H,aj as j,h as $,A as Z,C as me,B as ee,E as te,F as ye,br as xe,ak as Oe,Q as Se,ay as ge,az as be,av as ae,j as U,K as Le,cx as we,dH as De,L as W,M as F,i as Q,Y as Ie,aa as ke,S as Be,t as Ce,a7 as Pe,bT as je}from"./index-D9ckJfvI.js";import{_ as ze}from"./setting-outlined-xNM88ShO.js";import{e as Re,g as Ne,h as Ee,i as He}from"./home-OgmUtqia.js";import{a as ne,_ as le}from"./Grid-BFBI31I0.js";import"./index-BS8KoN7o.js";import{s as Ge}from"./installCanvasRenderer-iCPGNWhM.js";import{_ as Fe,a as Je}from"./CollapseItem-EJ3wdVl-.js";import{_ as qe}from"./Popconfirm-CrpkqjEa.js";const Ke={class:"inline-block",viewBox:"0 0 12 12",width:"1em",height:"1em"},Qe=S("path",{fill:"currentColor",d:"M6 1.5a.5.5 0 0 0-1 0V5H1.5a.5.5 0 0 0 0 1H5v3.5a.5.5 0 0 0 1 0V6h3.5a.5.5 0 0 0 0-1H6z"},null,-1),We=[Qe];function Ye(x,V){return s(),k("svg",Ke,[...We])}const Xe={name:"fluent-add12-regular",render:Ye},Ze={class:"inline-block",viewBox:"0 0 28 28",width:"1em",height:"1em"},et=S("path",{fill:"currentColor",d:"M11.5 6h5a2.5 2.5 0 0 0-5 0M10 6a4 4 0 0 1 8 0h6.25a.75.75 0 0 1 0 1.5h-1.31l-1.217 14.603A4.25 4.25 0 0 1 17.488 26h-6.976a4.25 4.25 0 0 1-4.235-3.897L5.06 7.5H3.75a.75.75 0 0 1 0-1.5zM7.772 21.978a2.75 2.75 0 0 0 2.74 2.522h6.976a2.75 2.75 0 0 0 2.74-2.522L21.436 7.5H6.565zM11.75 11a.75.75 0 0 1 .75.75v8.5a.75.75 0 0 1-1.5 0v-8.5a.75.75 0 0 1 .75-.75m5.25.75a.75.75 0 0 0-1.5 0v8.5a.75.75 0 0 0 1.5 0z"},null,-1),tt=[et];function at(x,V){return s(),k("svg",Ze,[...tt])}const nt={name:"fluent-delete28-regular",render:at},lt=x=>(ge("data-v-33d5f9f7"),x=x(),be(),x),ot=lt(()=>S("span",{class:"ml-20px"},"高度",-1)),st=q({name:"addChartLayoutModal",__name:"addChartLayoutModal",props:J({type:{}},{showModal:{type:Boolean,default:!1},showModalModifiers:{}}),emits:J(["callback","refresh"],["update:showModal"]),setup(x,{emit:V}){const h=x,u=V,r=fe(x,"showModal"),m=()=>({name:"",layouts:[{row:[{span:8,chart:null},{span:8,chart:null},{span:8,chart:null}],height:300,checked:!1},{row:[{span:8,chart:null},{span:16,chart:null}],height:300,checked:!1},{row:[{span:16,chart:null},{span:8,chart:null}],height:300,checked:!1},{row:[{span:12,chart:null},{span:12,chart:null}],height:300,checked:!1},{row:[{span:24,chart:null}],height:300,checked:!1}]}),e=Y(m());X(r,g=>{g&&Object.assign(e,m())});const p=async()=>{var g,A,L,D;if(h.type){if(e.layouts.filter(T=>T.checked).length===0)return(D=window.$message)==null?void 0:D.warning("请选择布局");u("callback",e.layouts.filter(T=>T.checked))}else{if(!e.name)return(g=window.$message)==null?void 0:g.warning("请输入仪表盘名称");if(e.layouts.filter(t=>t.checked).length===0)return(A=window.$message)==null?void 0:A.warning("请选择布局");r.value=!1;const T={name:e.name,layouts:e.layouts.filter(t=>t.checked)},{data:z,error:v}=await Re([{vname:T.name,content:JSON.stringify(T.layouts),ftime:0}]);v||((L=window.$message)==null||L.success("添加成功"),u("refresh",!0))}};return(g,A)=>{const L=Z,D=me,T=ne,z=le,v=Oe,t=Se,i=ee,f=te,_=ye;return s(),C(_,{show:r.value,"onUpdate:show":A[2]||(A[2]=d=>r.value=d),title:"添加仪表盘",class:"w-800px",preset:"card"},{default:l(()=>[S("div",null,[h.type?O("",!0):(s(),C(D,{key:0,label:"仪表盘名称","label-placement":"left","label-align":"right","label-width":100},{default:l(()=>[a(L,{value:e.name,"onUpdate:value":A[0]||(A[0]=d=>e.name=d)},null,8,["value"])]),_:1})),a(D,{label:"布局","label-placement":"left","label-align":"right","label-width":100},{default:l(()=>[(s(!0),k(j,null,H(e.layouts,(d,I)=>(s(),k("div",{key:I,class:"layout-item"},[a(z,{"x-gap":"12",class:"important-w-60%"},{default:l(()=>[(s(!0),k(j,null,H(d.row,(B,M)=>(s(),C(T,{key:M,span:B.span},{default:l(()=>[S("div",{class:xe({green:d.checked,"light-green":!d.checked})},null,2)]),_:2},1032,["span"]))),128))]),_:2},1024),ot,a(v,{value:d.height,"onUpdate:value":B=>d.height=B,class:"w-120px mx-20px",step:10},null,8,["value","onUpdate:value"]),a(t,{checked:d.checked,"onUpdate:checked":B=>d.checked=B},null,8,["checked","onUpdate:checked"])]))),128))]),_:1}),a(f,{justify:"end"},{default:l(()=>[a(i,{type:"default",ghost:"",onClick:A[1]||(A[1]=d=>r.value=!1)},{default:l(()=>[$("取消")]),_:1}),a(i,{type:"info",ghost:"",onClick:p},{default:l(()=>[$("确定")]),_:1})]),_:1})])]),_:1},8,["show"])}}}),ue=ae(st,[["__scopeId","data-v-33d5f9f7"]]),he=[{label:"柱状图",value:0,options:{legend:{data:["a","b","c"],top:"10"},xAxis:{type:"category",data:["周一","周二","周三"]},yAxis:{type:"value"},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[110,180,150],type:"bar",name:"a"},{data:[160,200,130],type:"bar",name:"b"},{data:[120,100,160],type:"bar",name:"c"}]}},{label:"纵向柱状图",value:1,options:{legend:{data:["a","b","c"],top:"10"},xAxis:{type:"value",data:["周一","周二","周三"]},yAxis:{type:"category"},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[110,180,150],type:"bar",name:"a"},{data:[160,200,130],type:"bar",name:"b"},{data:[120,100,160],type:"bar",name:"c"}]}}],ve=[{label:"折线图",value:0,options:{xAxis:{type:"category",data:["1","2","3","4","5"]},tooltip:{trigger:"axis"},legend:{left:"center",top:"10"},yAxis:{type:"value"},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[100,215,24,18,105,147,160],type:"line",name:"a"},{data:[150,20,22,21,195,127,240],type:"line",name:"b"},{data:[150,20,224,28,135,17,260],type:"line",name:"c"}]}},{label:"折线面积图",value:1,options:{xAxis:{type:"category",boundaryGap:!1,data:["1","2","3","4","5"]},tooltip:{trigger:"axis"},legend:{left:"center",top:"10"},yAxis:{type:"value"},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[160,215,134,108,105,147,160],type:"line",areaStyle:{},name:"a"},{data:[150,20,122,201,195,127,240],type:"line",areaStyle:{},name:"b"},{data:[150,120,224,138,135,17,260],type:"line",areaStyle:{},name:"c"}]}},{label:"折线图堆叠",value:2,options:{xAxis:{type:"category",data:["1","2","3","4","5"]},tooltip:{trigger:"axis"},legend:{left:"center",top:"10"},yAxis:{type:"value"},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[160,215,134,108,105,147,160],type:"line",stack:"Total",name:"a"},{data:[150,20,122,201,195,127,240],type:"line",stack:"Total",name:"b"},{data:[150,120,224,138,135,17,260],type:"line",stack:"Total",name:"c"}]}},{label:"堆叠面积图",value:3,options:{xAxis:{type:"category",boundaryGap:!1,data:["1","2","3","4","5"]},tooltip:{trigger:"axis"},legend:{left:"center",top:"10"},yAxis:{type:"value"},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[160,215,134,108,105,147,160],type:"line",stack:"Total",areaStyle:{},name:"a"},{data:[150,20,122,201,195,127,240],type:"line",stack:"Total",areaStyle:{},name:"b"},{data:[150,120,224,138,135,17,260],type:"line",stack:"Total",areaStyle:{},name:"c"}]}}],_e=[{label:"饼图",value:0,options:{tooltip:{trigger:"item"},legend:{left:"center",top:"10"},series:[{name:"",type:"pie",radius:"50%",labelLine:{show:!1},label:{show:!1,position:"center"},data:[{value:1048,name:"a"},{value:735,name:"b"},{value:580,name:"c"}]}]}},{label:"环形图",value:1,options:{tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{show:!1},labelLine:{show:!1},data:[{value:250,name:"a"},{value:234,name:"b"},{value:168,name:"c"}]}]}},{label:"玫瑰图",value:2,options:{tooltip:{trigger:"item"},legend:{left:"center",top:"10"},series:[{name:"",type:"pie",radius:"50%",center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},labelLine:{show:!1},label:{show:!1,position:"center"},data:[{value:40,name:"a"},{value:38,name:"b"},{value:32,name:"c"},{value:30,name:"d"},{value:28,name:"e"}]}]}}],Ae=q({__name:"Chart",props:{data:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})}},setup(x){const V=x,h=U(null),u=U(null),r=()=>{h.value&&(u.value=De(Ge(h.value)),u.value.setOption(V.options))};return X(()=>V.options,m=>{u.value&&(u.value.clear(),u.value.setOption(m))},{deep:!0}),Le(()=>{r()}),we(()=>{u.value&&u.value.dispose()}),(m,e)=>(s(),k("div",{ref_key:"domRef",ref:h,class:"h-100% w-100% overflow-hidden"},null,512))}}),it={class:"text-center"},ct=q({__name:"setChart",props:J({chart:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:J(["update"],["update:visible"]),setup(x,{emit:V}){const h=x,u=()=>[{label:"资产",value:"1",charts:[{title:"资产类型分布TOP5",type:"pie",id:"1",chartTypeIndex:0,options:{tooltip:{trigger:"item"},legend:{left:"center",top:"10"},series:[{name:"",type:"pie",radius:"50%",labelLine:{show:!1},label:{show:!1,position:"center"},data:[{value:1048,name:"a"},{value:735,name:"b"},{value:580,name:"c"}]}]}},{title:"资产操作系统统计",type:"bar",id:"2",chartTypeIndex:0,options:{legend:{data:["a","b","c"],top:"10"},xAxis:{type:"category"},yAxis:{type:"value",data:["周一","周二","周三"]},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[110,180,150],type:"bar",name:"a"},{data:[160,200,130],type:"bar",name:"b"},{data:[120,100,160],type:"bar",name:"c"}]}},{title:"资产所在网段TOP5统计",type:"pie",id:"3",options:{tooltip:{trigger:"item"},legend:{left:"center",top:"10"},series:[{name:"",type:"pie",radius:"50%",labelLine:{show:!1},label:{show:!1,position:"center"},data:[{value:1048,name:"a"},{value:735,name:"b"},{value:580,name:"c"}]}]}},{title:"资产所在网段TOP5统计",type:"line",id:"4",options:{xAxis:{type:"category",data:["1","2","3","4","5"]},tooltip:{trigger:"axis"},legend:{left:"center",top:"10"},yAxis:{type:"value"},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[100,215,24,18,105,147,160],type:"line",name:"a"},{data:[150,20,22,21,195,127,240],type:"line",name:"b"},{data:[150,20,224,28,135,17,260],type:"line",name:"c"}]}}]},{label:"审计",value:"2",charts:[{title:"最新审计事件等级分布",type:"bar",id:"5",options:{legend:{data:["a","b","c"],top:"10"},xAxis:{type:"category",data:["a","b","c"]},yAxis:{type:"value"},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[110,180,150],type:"bar",name:"a"},{data:[160,200,130],type:"bar",name:"b"},{data:[120,100,160],type:"bar",name:"c"}]}},{title:"最新审计事件类型分布TOP5",type:"pie",id:"6",options:{tooltip:{trigger:"item"},legend:{left:"center",top:"10"},series:[{name:"",type:"pie",radius:"50%",labelLine:{show:!1},label:{show:!1,position:"center"},data:[{value:1048,name:"a"},{value:735,name:"b"},{value:580,name:"c"}]}]}},{title:"审计事件发生趋势",type:"line",id:"7",options:{xAxis:{type:"category",data:["1","2","3","4","5"]},tooltip:{trigger:"axis"},legend:{left:"center",top:"10"},yAxis:{type:"value"},grid:{bottom:"30px",top:"50px",right:"20px",left:"40px"},series:[{data:[100,215,24,18,105,147,160],type:"line",name:"a"},{data:[150,20,22,21,195,127,240],type:"line",name:"b"},{data:[150,20,224,28,135,17,260],type:"line",name:"c"}]}}]}],r=U(u()),m=()=>({dataCValue:"1",title:"",chartTypeIndex:0,defaultchartTypeIndex:0,chartActiveIndex:0,defaultChartActiveIndex:0,type:"pie"}),e=Y(m()),p=V,g=fe(x,"visible");X(g,v=>{Object.assign(e,m()),v&&A()});const A=()=>{var v,t;h.chart?(e.dataCValue=h.chart.dataCValue,e.title=h.chart.title,e.chartTypeIndex=e.defaultchartTypeIndex=h.chart.chartTypeIndex,e.type=h.chart.type,e.chartActiveIndex=e.defaultChartActiveIndex=((t=(v=r.value.find(i=>i.value===h.chart.dataCValue))==null?void 0:v.charts)==null?void 0:t.findIndex(i=>i.id===h.chart.chartId))||0,r.value.forEach(i=>{i.value==h.chart.dataCValue&&(i.charts[e.chartActiveIndex].options=h.chart.options,i.charts[e.chartActiveIndex].chartTypeIndex=h.chart.chartTypeIndex)})):e.title=r.value[r.value.findIndex(i=>i.value==e.dataCValue)].charts[e.chartActiveIndex].title},L=(v,t)=>{if(e.chartActiveIndex==v)return;u().forEach(f=>{r.value.forEach(_=>{f.value==e.dataCValue==_.value&&(e.chartActiveIndex!=e.defaultChartActiveIndex||e.chartTypeIndex!=e.defaultchartTypeIndex)&&(e.defaultChartActiveIndex===e.chartActiveIndex?(_.charts[e.chartActiveIndex].options=h.chart.options,_.charts[e.chartActiveIndex].chartTypeIndex=h.chart.chartTypeIndex):_.charts[e.chartActiveIndex].chartTypeIndex!==f.charts[e.chartActiveIndex].chartTypeIndex&&(_.charts[e.chartActiveIndex].options=f.charts[e.chartActiveIndex].options,_.charts[e.chartActiveIndex].chartTypeIndex=f.charts[e.chartActiveIndex].chartTypeIndex))})}),e.chartActiveIndex=v,e.title=t.title,e.type=t.type,e.chartTypeIndex=t.chartTypeIndex||0},D=(v,t)=>{var f,_,d;const i=t=="bar"?(f=he.find(I=>I.value===v))==null?void 0:f.options:t=="line"?(_=ve.find(I=>I.value===v))==null?void 0:_.options:(d=_e.find(I=>I.value===v))==null?void 0:d.options;r.value.forEach(I=>{I.value==e.dataCValue&&(I.charts[e.chartActiveIndex].options=i,I.charts[e.chartActiveIndex].chartTypeIndex=v)})},T=v=>{var t,i,f,_;e.chartActiveIndex=0,e.title=((i=(t=r.value.find(d=>d.value==v))==null?void 0:t.charts)==null?void 0:i[e.chartActiveIndex].title)||"",e.type=((_=(f=r.value.find(d=>d.value==v))==null?void 0:f.charts)==null?void 0:_[e.chartActiveIndex].type)||""},z=()=>{var t,i,f,_;const v={dataCValue:e.dataCValue,title:e.title,type:e.type,chartId:(i=(t=r.value.find(d=>d.value==e.dataCValue))==null?void 0:t.charts)==null?void 0:i[e.chartActiveIndex].id,chartTypeIndex:e.chartTypeIndex,options:(_=(f=r.value.find(d=>d.value==e.dataCValue))==null?void 0:f.charts)==null?void 0:_[e.chartActiveIndex].options};p("update",v)};return(v,t)=>{const i=Ie,f=me,_=Fe,d=Z,I=Je,B=ke,M=ne,G=le,o=Be,n=ee,y=te,w=ye,R=W("no-space");return s(),C(w,{show:g.value,"onUpdate:show":t[10]||(t[10]=c=>g.value=c),title:"数据组件",class:"w-1100px",preset:"card"},{footer:l(()=>[a(y,{justify:"end"},{default:l(()=>[a(n,{type:"primary",onClick:z},{default:l(()=>[$("确定")]),_:1}),a(n,{onClick:t[9]||(t[9]=c=>g.value=!1)},{default:l(()=>[$("取消")]),_:1})]),_:1})]),default:l(()=>[a(o,{style:{"max-height":"500px"}},{default:l(()=>[a(G,{"x-gap":"12",class:"h-500px"},{default:l(()=>[a(M,{span:8},{default:l(()=>[a(B,{class:"h-100%"},{default:l(()=>[a(I,{"arrow-placement":"right","default-expanded-names":["1","2"]},{default:l(()=>[a(_,{title:"组件类型",name:"1"},{default:l(()=>[a(f,{label:"数据组件","label-placement":"left",class:"ml-20px"},{default:l(()=>[a(i,{value:e.dataCValue,"onUpdate:value":[t[0]||(t[0]=c=>e.dataCValue=c),T],options:r.value,class:"w-100%"},null,8,["value","options"])]),_:1})]),_:1}),a(_,{title:"图表类型",name:"2"},{default:l(()=>[a(f,{label:"图表名称","label-placement":"left",class:"ml-20px"},{default:l(()=>[F(a(d,{value:e.title,"onUpdate:value":t[1]||(t[1]=c=>e.title=c),maxlength:"12",class:"w-100%"},null,8,["value"]),[[R]])]),_:1}),a(f,{label:"图表形态","label-placement":"left",class:"ml-20px"},{default:l(()=>[e.type=="bar"?(s(),C(i,{key:0,value:e.chartTypeIndex,"onUpdate:value":t[2]||(t[2]=c=>e.chartTypeIndex=c),onUpdateValue:t[3]||(t[3]=c=>D(c,"bar")),options:Q(he),class:"w-100%"},null,8,["value","options"])):O("",!0),e.type=="line"?(s(),C(i,{key:1,value:e.chartTypeIndex,"onUpdate:value":t[4]||(t[4]=c=>e.chartTypeIndex=c),onUpdateValue:t[5]||(t[5]=c=>D(c,"line")),options:Q(ve),class:"w-100%"},null,8,["value","options"])):O("",!0),e.type=="pie"?(s(),C(i,{key:2,value:e.chartTypeIndex,"onUpdate:value":t[6]||(t[6]=c=>e.chartTypeIndex=c),onUpdateValue:t[7]||(t[7]=c=>D(c,"pie")),options:Q(_e),class:"w-100%"},null,8,["value","options"])):O("",!0)]),_:1})]),_:1}),a(_,{title:"条件配置",name:"3"},{default:l(()=>[a(f,{label:"风险等级","label-placement":"left",class:"ml-20px"},{default:l(()=>[a(i,{value:e.dataCValue,"onUpdate:value":t[8]||(t[8]=c=>e.dataCValue=c),options:r.value,class:"w-100%"},null,8,["value","options"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(M,{span:16},{default:l(()=>[a(B,{class:"h-100%"},{default:l(()=>[a(G,{"x-gap":"12"},{default:l(()=>[(s(!0),k(j,null,H(r.value[r.value.findIndex(c=>c.value==e.dataCValue)].charts,(c,N)=>(s(),C(M,{span:12,key:N,class:"mb-35px"},{default:l(()=>[a(B,{class:"h-200px w-100%","content-style":{padding:"0px"}},{default:l(()=>[a(Ae,{options:c.options,style:{height:"200px"},onClick:se=>L(N,c),class:xe([{active:e.chartActiveIndex===N},"line-chart"])},null,8,["options","onClick","class"]),S("div",it,Ce(c.title),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),rt=ae(ct,[["__scopeId","data-v-88eeb17b"]]),oe=x=>(ge("data-v-ad1c3726"),x=x(),be(),x),dt={class:"flex items-center"},pt=oe(()=>S("p",{class:"w-140px"},"仪表盘名称：",-1)),ut={key:0,class:"w-100% h-100% chartBox"},ht={class:"chartBox-header-l"},vt={key:0,class:"chartBox-header-r"},_t=oe(()=>S("div",{size:"small"},null,-1)),ft={key:2,class:"add-chart"},mt=["onClick"],yt=oe(()=>S("div",{class:"mt-20px"}," 请添加数据组件 ",-1)),xt=q({name:"statisticalmanagement_dashboard",__name:"index",setup(x){const V=U(!1),h=U(!1),u=U(!1),r=U(""),m=Y({show:!1,chartPIndex:null,chartIndex:null,chart:null}),e=U(),p=U([]),g=async()=>{const{data:o,error:n}=await Ne({page:1,limit:10});n||(p.value=o.list.map(y=>({name:y.vname,id:y.id,layouts:JSON.parse(y.content)})),e.value||(e.value=p.value[0].id))};g();const A=async()=>{await g(),e.value=p.value[p.value.length-1].id},L=U(null),D=o=>{o==0?g():L.value=setInterval(()=>{g()},1e3*60*o)};we(()=>{L.value!==null&&(clearInterval(L.value),L.value=null)});const T=U(0),z=()=>{const o=[];for(let n=0;n<=10;n++)o.push({label:n==0?"手动":`${n}分钟`,value:n});return o},v=()=>{var o;u.value=!0,r.value=((o=p.value.find(n=>n.id==e.value))==null?void 0:o.name)||""},t=(o,n,y=void 0)=>{m.show=!0,m.chartPIndex=o,m.chartIndex=n,m.chart=y},i=o=>{console.log(o),m.show=!1,M.value=!0,p.value[p.value.findIndex(n=>n.id==e.value)].layouts[m.chartPIndex].row[m.chartIndex].chart=o},f=(o,n)=>{p.value[p.value.findIndex(y=>y.id==e.value)].layouts[o].row[n].chart=null,M.value=!0},_=o=>{var n,y;if(p.value[p.value.findIndex(w=>w.id==e.value)].layouts.length==1)return(n=window.$message)==null?void 0:n.warning("至少保留一行布局");(y=window.$dialog)==null||y.warning({title:"提示",content:"确定要删除该行吗？",positiveText:"确定",negativeText:"取消",showIcon:!1,positiveButtonProps:{type:"info",ghost:!0},onPositiveClick:()=>{p.value[p.value.findIndex(w=>w.id==e.value)].layouts.splice(o,1),M.value=!0}})},d=async()=>{var o;(o=window.$dialog)==null||o.warning({title:"提示",content:"确定要删除该仪表盘的数据吗？",positiveText:"确定",negativeText:"取消",showIcon:!1,positiveButtonProps:{type:"info",ghost:!0},onPositiveClick:async()=>{var w;const{data:n,error:y}=await Ee({ids:e.value});y||(w=window.$message)==null||w.success("删除成功"),u.value=!1,e.value=null,g()}})},I=o=>{console.log(o),M.value=!0,p.value[p.value.findIndex(n=>n.id==e.value)].layouts=[...p.value[p.value.findIndex(n=>n.id==e.value)].layouts,...o],h.value=!1},B=async()=>{var w;const o=p.value[p.value.findIndex(R=>R.id==e.value)],{data:n,error:y}=await He([{content:JSON.stringify(o.layouts),id:o.id,vname:r.value}]);y||(w=window.$message)==null||w.success("保存成功"),g(),M.value=!1,u.value=!1},M=U(!1),G=()=>{u.value=!1,M.value&&g()};return(o,n)=>{const y=Ie,w=ee,R=Z,c=te,N=ze,se=nt,Te=qe,$e=je,Ve=Xe,ie=ke,ce=ne,Me=le,re=W("no-auth"),Ue=W("no-space");return s(),C(ie,{"content-style":{padding:"0px"}},{default:l(()=>{var de;return[a(c,{class:"mb-20px",align:"center"},{default:l(()=>[u.value?O("",!0):(s(),k(j,{key:0},[$(" 仪表盘 "),a(y,{value:e.value,"onUpdate:value":n[0]||(n[0]=b=>e.value=b),options:p.value,class:"w-200px","label-field":"name","value-field":"id"},null,8,["value","options"]),$(" 刷新 "),a(y,{value:T.value,"onUpdate:value":[n[1]||(n[1]=b=>T.value=b),D],options:z(),class:"w-150px"},null,8,["value","options"]),F((s(),C(w,{type:"info",ghost:"",onClick:n[2]||(n[2]=b=>V.value=!0)},{default:l(()=>[$("新建仪表盘")]),_:1})),[[re,"statisticalmanagement.dashboard.add"]]),F((s(),C(w,{onClick:v},{default:l(()=>[$("编辑仪表盘")]),_:1})),[[re,"statisticalmanagement.dashboard.edit"]])],64)),u.value?(s(),k(j,{key:1},[S("div",dt,[pt,F(a(R,{value:r.value,"onUpdate:value":n[3]||(n[3]=b=>r.value=b),maxlength:"12","show-count":""},null,8,["value"]),[[Ue]])]),a(w,{type:"info",ghost:"",onClick:B},{default:l(()=>[$("保存")]),_:1}),a(w,{type:"info",ghost:"",onClick:d},{default:l(()=>[$("删除")]),_:1}),a(w,{type:"info",ghost:"",onClick:G},{default:l(()=>[$("取消")]),_:1})],64)):O("",!0)]),_:1}),(s(!0),k(j,null,H((de=p.value[p.value.findIndex(b=>b.id==e.value)])==null?void 0:de.layouts,(b,E)=>(s(),C(Me,{"x-gap":"15",key:E,class:"w-100% mb-15px GridBox",style:Pe({height:b.height+"px"})},{default:l(()=>[(s(!0),k(j,null,H(b.row,(P,K)=>(s(),C(ce,{key:P.span,span:P.span},{default:l(()=>[a(ie,{class:"h-100%","content-style":{display:"flex",justifyContent:"center",alignItems:"center"}},{default:l(()=>[P.chart?(s(),k("div",ut,[a(Ae,{options:P.chart.options},null,8,["options"]),S("div",ht,Ce(P.chart.title),1),u.value?(s(),k("div",vt,[a(N,{class:"text-icon font-size-20px",onClick:pe=>t(E,K,P.chart)},null,8,["onClick"]),a(Te,{onPositiveClick:pe=>f(E,K)},{trigger:l(()=>[a(se,{class:"text-icon font-size-20px"})]),default:l(()=>[$(" 确定要删除该图表吗？ ")]),_:2},1032,["onPositiveClick"])])):O("",!0)])):O("",!0),!P.chart&&!u.value?(s(),C($e,{key:1,description:"请点击编辑仪表盘，添加数据组件"},{extra:l(()=>[_t]),_:1})):O("",!0),!P.chart&&u.value?(s(),k("div",ft,[S("div",{class:"add-chart-icon",onClick:pe=>t(E,K)},[a(Ve,{class:"text-icon font-size-60px"})],8,mt),yt])):O("",!0)]),_:2},1024)]),_:2},1032,["span"]))),128)),u.value?(s(),C(ce,{key:0,span:24,class:"grid_itemBox",onClick:P=>_(E)},{default:l(()=>[$(" 删除 ")]),_:2},1032,["onClick"])):O("",!0)]),_:2},1032,["style"]))),128)),u.value?(s(),k("div",{key:0,class:"addLayoutChart",onClick:n[4]||(n[4]=b=>h.value=!0)}," 添加布局 ")):O("",!0),a(ue,{"show-modal":V.value,"onUpdate:showModal":n[5]||(n[5]=b=>V.value=b),type:0,onRefresh:A},null,8,["show-modal"]),a(ue,{"show-modal":h.value,"onUpdate:showModal":n[6]||(n[6]=b=>h.value=b),type:1,onCallback:I},null,8,["show-modal"]),a(rt,{visible:m.show,"onUpdate:visible":n[7]||(n[7]=b=>m.show=b),chart:m.chart,onUpdate:i},null,8,["visible","chart"])]}),_:1})}}}),$t=ae(xt,[["__scopeId","data-v-ad1c3726"]]);export{$t as default};
