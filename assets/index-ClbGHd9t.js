import{_ as _e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DtGc5Ytf.js";import{_ as me}from"./round-delete-tdauvCgt.js";import{_ as fe}from"./round-add-CmnuyzV1.js";import{d as V,aG as K,C as te,A,a as ve,aI as ne,aE as ge,bZ as ae,cm as we,cn as be,c as F,o as S,w as l,f as e,a8 as he,L,h as i,G as oe,b9 as se,I as G,B as z,g as d,t as R,$ as D,a9 as xe,K as ye,aF as ke,a7 as ie,co as Ce,e as P,ab as Ne,b as W,a2 as O,a3 as q,N as $e,R as Se,cp as je,V as ze,aT as De,s as Ue,E,a1 as Te,a4 as Pe,aU as B,aJ as Re,H as I,aV as Fe,cq as X,cr as Be,aZ as Ie}from"./index-CYktWG4g.js";import{u as We,a as Ve}from"./table-5HkGqXjJ.js";import{_ as H,a as Ge}from"./Grid-yccwcNrM.js";import{_ as de}from"./FormItemGridItem-CEINFz71.js";import{_ as Me}from"./round-search-DE64LlxI.js";import{_ as Oe}from"./round-refresh-BIWjpXWE.js";import{h as Y}from"./permission-B_M-ULh7.js";import{N as ee}from"./Popconfirm-CztqIDpP.js";const qe=V({name:"OperateDrawer",__name:"operate-drawer",props:K({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:K(["submitted"],["update:visible"]),setup(x,{emit:U}){const g=U,n=x,o=te(f());function f(){return{tname:"",weight:void 0}}async function j(){Object.assign(o,f()),n.operateType==="edit"&&n.rowData&&Object.assign(o,n.rowData)}const{formRef:C,validate:w,restoreValidation:t}=A(),N={tname:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},weight:{type:"number",required:!0,trigger:["blur","change"],message:"请输入"}},u=ve(()=>({add:"新增权重",edit:"修改权重"})[n.operateType]),m=ne(x,"visible");ge(m,()=>{m.value&&(j(),t())});function r(){m.value=!1}const b=ae.debounce(async()=>{var v,c;if(await w(),n.operateType==="edit"){const{data:y,error:h}=await we([o]);h||(r(),g("submitted"),(v=window.$message)==null||v.success("修改成功"))}else{const{data:y,error:h}=await be([{...o}]);h||(r(),g("submitted"),(c=window.$message)==null||c.success("添加成功"))}},1e3,{leading:!0,trailing:!1});return(v,c)=>{const y=de,h=H,a=L,p=he,T=G,_=xe;return S(),F(_,{show:m.value,"onUpdate:show":c[2]||(c[2]=s=>m.value=s),title:u.value,preset:"card",class:"w-500px"},{footer:l(()=>[e(T,{justify:"end",size:16},{default:l(()=>[e(i(z),{onClick:r},{default:l(()=>[d(R(i(D)("common.cancel")),1)]),_:1}),e(i(z),{type:"primary",onClick:i(b)},{default:l(()=>[d(R(i(D)("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),default:l(()=>[e(p,{class:"pr-20px"},{default:l(()=>[e(a,{ref_key:"formRef",ref:C,model:o,rules:N,"label-placement":"left","label-width":120},{default:l(()=>[e(h,{responsive:"screen","item-responsive":""},{default:l(()=>[e(y,{span:"24 m:24",label:"类型名称",path:"tname"},{default:l(()=>[e(i(oe),{value:o.tname,"onUpdate:value":c[0]||(c[0]=s=>o.tname=s),placeholder:"请输入"},null,8,["value"])]),_:1}),e(y,{span:"24 m:24",label:"权重",path:"weight"},{default:l(()=>[e(i(se),{value:o.weight,"onUpdate:value":c[1]||(c[1]=s=>o.weight=s),placeholder:"请输入",min:1,max:1e3,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}}),Ee=V({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:K(["reset","search"],["update:model"]),setup(x,{emit:U}){const g=U,{formRef:n,restoreValidation:o}=A(),f=ne(x,"model"),j=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10}];function C(){f.value.fuzzy="",g("search")}async function w(){await o(),g("reset")}async function t(){g("search")}return(N,u)=>{const m=oe,r=de,b=ke,v=Oe,c=z,y=Me,h=G,a=H,p=L,T=ie;return S(),F(T,{bordered:!1,size:"small",class:"card-wrapper"},{default:l(()=>[e(p,{ref_key:"formRef",ref:n,model:f.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:ye(t,["enter"])},{default:l(()=>[e(a,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:l(()=>[e(r,{span:"24 s:12 m:6",label:"类型名称",path:"fuzzy"},{default:l(()=>[e(m,{clearable:"",value:f.value.fuzzy,"onUpdate:value":u[0]||(u[0]=_=>f.value.fuzzy=_),placeholder:"请输入类型名称",onClear:C},null,8,["value"])]),_:1}),e(r,{span:"24 s:12 m:4",label:"权重",path:"weight"},{default:l(()=>[e(b,{clearable:"",filterable:"",value:f.value.weight,"onUpdate:value":[u[1]||(u[1]=_=>f.value.weight=_),t],placeholder:"请选择",options:j},null,8,["value"])]),_:1}),e(r,{span:"24  s:12 m:6",class:"pr-24px"},{default:l(()=>[e(h,{class:"w-full"},{default:l(()=>[e(c,{onClick:w},{icon:l(()=>[e(v,{class:"text-icon"})]),default:l(()=>[d(" "+R(i(D)("common.reset")),1)]),_:1}),e(c,{type:"primary",ghost:"",onClick:t},{icon:l(()=>[e(y,{class:"text-icon"})]),default:l(()=>[d(" "+R(i(D)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),Ke={class:"container-row"},Ae={class:"config-box"},Le={class:"config-box"},He={class:"config-box"},Ze={class:"config-box"},Je=V({__name:"prjSetting",setup(x){const{formRef:U,validate:g}=A(),n=te({id:void 0,dlevel1w:void 0,dlevel2w:void 0,dlevel3w:void 0,dlevel1c:void 0,dlevel2c:void 0,wlevel1w:void 0,wlevel2w:void 0,wlevel3w:void 0,wlevel1c:void 0,wlevel2c:void 0,plevel1w:void 0,plevel2w:void 0,plevel3w:void 0,plevel1c:void 0,plevel2c:void 0,clockin0:void 0,clockin1:void 0}),o={type:"number",required:!0,message:"不能为空",trigger:["blur","change"]},f={dlevel1w:o,dlevel2w:o,dlevel3w:o,dlevel1c:o,dlevel2c:o,wlevel1w:o,wlevel2w:o,wlevel3w:o,wlevel1c:o,wlevel2c:o,plevel1w:o,plevel2w:o,plevel3w:o,plevel1c:o,plevel2c:o,clockin0:o,clockin1:o},j=async()=>{const{data:w,error:t}=await je();t||Object.assign(n,w)},C=ae.debounce(async()=>{var t;await g();const{error:w}=await Ce(n);w||(t=window.$message)==null||t.success("保存成功")},1e3,{leading:!0,trailing:!1});return j(),(w,t)=>{const N=Ne,u=z,m=se,r=Se,b=$e,v=Ge,c=H,y=G,h=L;return S(),F(h,{ref_key:"formRef",ref:U,model:n,rules:f,"label-width":"200","label-placement":"left"},{default:l(()=>[P("div",Ke,[P("div",Ae,[e(N,null,{default:l(()=>t[6]||(t[6]=[d("日报配置")])),_:1,__:[6]}),e(c,{cols:1,"x-gap":8,"y-gap":6},{default:l(()=>[(S(),W(O,null,q([["合格权重分","dlevel1w"],["良好权重分","dlevel2w"],["优秀权重分","dlevel3w"],["字符数低于此数值认为合格","dlevel1c"],[`字符数高于此数值认为优秀
字符数低于此数值认为良好`,"dlevel2c"]],a=>e(v,{key:a[1]},{default:l(()=>[e(b,{label:a[0],path:a[1]},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:p=>n[a[1]]--,disabled:n[a[1]]<=0},{default:l(()=>t[7]||(t[7]=[d("-")])),_:2,__:[7]},1032,["onClick","disabled"]),e(m,{value:n[a[1]],"onUpdate:value":p=>n[a[1]]=p,"show-button":!1,precision:0,min:0,max:1e3},null,8,["value","onUpdate:value"]),e(u,{onClick:p=>n[a[1]]++,disabled:n[a[1]]==1e3},{default:l(()=>t[8]||(t[8]=[d("+")])),_:2,__:[8]},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1032,["label","path"])]),_:2},1024)),64))]),_:1})]),P("div",Le,[e(N,null,{default:l(()=>t[9]||(t[9]=[d("周报配置")])),_:1,__:[9]}),e(c,{cols:1,"x-gap":8,"y-gap":6},{default:l(()=>[(S(),W(O,null,q([["合格权重分","wlevel1w"],["良好权重分","wlevel2w"],["优秀权重分","wlevel3w"],["字符数低于此数值认为合格","wlevel1c"],[`字符数高于此数值认为优秀
字符数低于此数值认为良好`,"wlevel2c"]],a=>e(v,{key:a[1]},{default:l(()=>[e(b,{label:a[0],path:a[1]},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:p=>n[a[1]]--,disabled:n[a[1]]<=0},{default:l(()=>t[10]||(t[10]=[d("-")])),_:2,__:[10]},1032,["onClick","disabled"]),e(m,{value:n[a[1]],"onUpdate:value":p=>n[a[1]]=p,"show-button":!1,precision:0,min:0,max:1e3},null,8,["value","onUpdate:value"]),e(u,{onClick:p=>n[a[1]]++,disabled:n[a[1]]==1e3},{default:l(()=>t[11]||(t[11]=[d("+")])),_:2,__:[11]},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1032,["label","path"])]),_:2},1024)),64))]),_:1})]),P("div",He,[e(N,null,{default:l(()=>t[12]||(t[12]=[d("项目总结配置")])),_:1,__:[12]}),e(c,{cols:1,"x-gap":8,"y-gap":6},{default:l(()=>[(S(),W(O,null,q([["合格权重分","plevel1w"],["良好权重分","plevel2w"],["优秀权重分","plevel3w"],["字符数低于此数值认为合格","plevel1c"],[`字符数高于此数值认为优秀
字符数低于此数值认为良好`,"plevel2c"]],a=>e(v,{key:a[1]},{default:l(()=>[e(b,{label:a[0],path:a[1]},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:p=>n[a[1]]--,disabled:n[a[1]]<=0},{default:l(()=>t[13]||(t[13]=[d("-")])),_:2,__:[13]},1032,["onClick","disabled"]),e(m,{value:n[a[1]],"onUpdate:value":p=>n[a[1]]=p,"show-button":!1,precision:0,min:0,max:1e3},null,8,["value","onUpdate:value"]),e(u,{onClick:p=>n[a[1]]++,disabled:n[a[1]]==1e3},{default:l(()=>t[14]||(t[14]=[d("+")])),_:2,__:[14]},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1032,["label","path"])]),_:2},1024)),64))]),_:1})]),P("div",Ze,[e(N,null,{default:l(()=>t[15]||(t[15]=[d("打卡权重配置")])),_:1,__:[15]}),e(c,{cols:1,"x-gap":8,"y-gap":6},{default:l(()=>[e(v,null,{default:l(()=>[e(b,{label:"正常打卡权重分",path:"clockin0"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:t[0]||(t[0]=a=>n.clockin0--),disabled:n.clockin0<=0},{default:l(()=>t[16]||(t[16]=[d("-")])),_:1,__:[16]},8,["disabled"]),e(m,{value:n.clockin0,"onUpdate:value":t[1]||(t[1]=a=>n.clockin0=a),"show-button":!1,precision:0,min:0,max:1e3},null,8,["value"]),e(u,{onClick:t[2]||(t[2]=a=>n.clockin0++),disabled:n.clockin0==1e3},{default:l(()=>t[17]||(t[17]=[d("+")])),_:1,__:[17]},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(v,null,{default:l(()=>[e(b,{label:"异常打卡权重分",path:"clockin1"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:t[3]||(t[3]=a=>n.clockin1--)},{default:l(()=>t[18]||(t[18]=[d("-")])),_:1,__:[18]}),e(m,{value:n.clockin1,"onUpdate:value":t[4]||(t[4]=a=>n.clockin1=a),"show-button":!1,precision:0,max:1e3},null,8,["value"]),e(u,{onClick:t[5]||(t[5]=a=>n.clockin1++),disabled:n.clockin0==1e3},{default:l(()=>t[19]||(t[19]=[d("+")])),_:1,__:[19]},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})])]),e(b,null,{default:l(()=>[e(y,{class:"w-100%",justify:"center"},{default:l(()=>[e(u,{type:"default",onClick:j},{default:l(()=>t[20]||(t[20]=[d("刷新")])),_:1,__:[20]}),e(u,{type:"info",onClick:i(C)},{default:l(()=>t[21]||(t[21]=[d("保存")])),_:1,__:[21]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model"])}}}),Qe=ze(Je,[["__scopeId","data-v-8068f2ee"]]),Xe={class:"flex flex-col gap-4",style:{height:"600px"}};function le(x){return typeof x=="function"||Object.prototype.toString.call(x)==="[object Object]"&&!Ie(x)}const rl=V({name:"manage_weight",__name:"index",setup(x){De();const{columns:U,columnChecks:g,data:n,getData:o,loading:f,mobilePagination:j,searchParams:C}=We({showTotal:!0,apiFn:Be,apiParams:{page:1,pageSize:20,limit:20,weight:void 0,fuzzy:"",_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48},{key:"tname",title:"类型名称",align:"center",width:120},{key:"weight",title:"权重",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dbtime",title:"创建时间",align:"center",width:120},{key:"operate",title:D("common.operate"),align:"center",width:Y("project:Weight:update")&&Y("project:Weight:delete")?180:0,fixed:"right",render:_=>{let s;return e("div",{class:"flex-center gap-8px"},[I(e(z,{type:"primary",ghost:!0,size:"small",onClick:()=>h(_.id)},le(s=D("common.edit"))?s:{default:()=>[s]}),[[E("no-auth"),"project:Weight:update"]]),e(ee,{onPositiveClick:()=>y(_.id)},{default:()=>D("common.confirmDelete"),trigger:()=>{let k;return I(e(z,{type:"error",ghost:!0,size:"small"},le(k=D("common.delete"))?k:{default:()=>[k]}),[[E("no-auth"),"project:Weight:delete"]])}})])}}]}),{drawerVisible:w,operateType:t,editingData:N,handleAdd:u,handleEdit:m,checkedRowKeys:r,onBatchDeleted:b,onDeleted:v}=Ve(n,o);async function c(){console.log(r.value),a(r.value.join(","),_=>{b()})}async function y(_){const{data:s,error:k}=await X(_);k||v()}function h(_){m(_)}async function a(_,s){const{data:k,error:M}=await X(_);if(!M)s&&s(k);else return!1}const p=()=>{o()},T=Ue(window.innerHeight-423);return(_,s)=>{const k=G,M=fe,ue=me,re=_e,ce=Re,Z=ie,J=Pe,pe=Te,Q=E("no-auth");return S(),W("div",Xe,[e(Z,{bordered:!1,size:"small",class:"flex-1 flex flex-col"},{default:l(()=>[e(pe,{type:"segment",animated:"",class:"flex-1 flex flex-col"},{default:l(()=>[e(J,{name:"0",tab:"调试任务权重",class:"flex-1 flex flex-col"},{default:l(()=>[e(Ee,{model:i(C),"onUpdate:model":s[0]||(s[0]=$=>B(C)?C.value=$:null),onReset:p,onSearch:i(o)},null,8,["model","onSearch"]),e(Z,{bordered:!1,size:"small",class:"flex-1 flex flex-col mt-2"},{header:l(()=>[e(k,{align:"center",wrap:""},{default:l(()=>s[4]||(s[4]=[P("div",null,"权重列表",-1)])),_:1,__:[4]})]),"header-extra":l(()=>[e(k,{align:"center",wrap:"",justify:"end"},{default:l(()=>[I((S(),F(i(z),{onClick:i(u),size:"small",ghost:"",type:"primary"},{icon:l(()=>[e(M,{class:"text-icon"})]),default:l(()=>[s[5]||(s[5]=d(" "+R("新增")))]),_:1,__:[5]},8,["onClick"])),[[Q,"project:Weight:insert"]]),e(i(ee),{onPositiveClick:c},{trigger:l(()=>[I((S(),F(i(z),{size:"small",ghost:"",type:"error",disabled:i(r).length==0},{icon:l(()=>[e(ue,{class:Fe(["text-icon",{"animate-spin":i(f)}])},null,8,["class"])]),default:l(()=>[s[6]||(s[6]=d(" "+R("批量删除")))]),_:1,__:[6]},8,["disabled"])),[[Q,"project:Weight:delete"]])]),default:l(()=>[s[7]||(s[7]=d(" 确定要删除选中的权重吗？ "))]),_:1,__:[7]}),e(re,{columns:i(g),"onUpdate:columns":s[1]||(s[1]=$=>B(g)?g.value=$:null)},null,8,["columns"])]),_:1})]),default:l(()=>[e(ce,{"checked-row-keys":i(r),"onUpdate:checkedRowKeys":s[2]||(s[2]=$=>B(r)?r.value=$:null),columns:i(U),data:i(n),size:"small","flex-height":!0,remote:"",loading:i(f),"row-key":$=>$.id,pagination:i(j),"max-height":T.value,"min-height":T.value},null,8,["checked-row-keys","columns","data","loading","row-key","pagination","max-height","min-height"]),e(qe,{visible:i(w),"onUpdate:visible":s[3]||(s[3]=$=>B(w)?w.value=$:null),onSubmitted:i(o),"operate-type":i(t),"row-data":i(N)},null,8,["visible","onSubmitted","operate-type","row-data"])]),_:1})]),_:1}),e(J,{name:"1",tab:"行为规范权重",class:"flex-1"},{default:l(()=>[e(Qe)]),_:1})]),_:1})]),_:1})])}}});export{rl as default};
