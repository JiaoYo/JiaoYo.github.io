import{d as j,m as C,r as L,o as s,c as P,w as m,g as i,h as z,eo as ye,c3 as J,O as E,ao as K,B as O,R as G,T as fe,S as Q,ac as Z,e as W,b as r,bG as ee,aI as ne,a7 as R,t as S,ah as ie,ey as F,b0 as q,aU as te,$ as I,D as le,C as de,f as A,ag as ge,aq as se,ar as Pe,N as we,al as ke,at as Ve,c0 as $e,c1 as Ce,_ as Te}from"./index-BZ_tiE68.js";import{j as Me,k as De,l as ze,m as Se,n as Ue,o as Be,p as Ne,q as Oe,r as Le,s as ue}from"./basic_config-CrQZmwjz.js";import{_ as X,a as ae}from"./Grid-D7XZy9aU.js";import{_ as qe}from"./table-column-setting.vue_vue_type_script_setup_true_lang-ClnnMZ8m.js";import{_ as Fe}from"./round-delete-Cwnglh6J.js";import{_ as je}from"./round-search-DvEif4Da.js";import{u as We,a as Ie}from"./table-CbqdblXu.js";import{N as pe}from"./Popconfirm-DBD0On9W.js";import{_ as Ge}from"./FormItemGridItem-B6-5it0O.js";import{_ as Re}from"./DatePicker-Do0AGOQp.js";const He=j({__name:"powerLimitConfig",setup(T){const h=C(0);(async()=>{const{data:x,error:n}=await ye({_t:new Date().getTime()});n||(h.value=x.maxeqmt)})();const v=async()=>{const{data:x,error:n}=await Me();n||Object.assign(p,x)};v();const p=L({peanble:0,maxv:0,minv:0,id:void 0}),y=C(),M={maxv:{type:"number",required:!0,message:"请输入最大值",trigger:"blur"},minv:{type:"number",required:!0,message:"请输入最小值",trigger:"blur"}},w=async()=>{await y.value.validate(),De(p).then(x=>{var n;x.error||((n=window.$message)==null||n.success("保存成功"),v())})},g=x=>{if(x==null)return;const n=Number(x);return Number.isInteger(n)?x.toString():(x.toString().split(".")[1]||"").length>6?n.toFixed(6):x.toString()};return(x,n)=>{const t=J,d=E,c=K,f=O,l=G,u=fe,b=Q;return s(),P(b,{style:{maxHeight:"calc(100vh - 220px)",width:"100%"}},{default:m(()=>[i(u,{ref_key:"powerFormRef",ref:y,model:p,"label-placement":"top",rules:M,"label-width":"auto",style:{width:"200px",margin:"50px auto"}},{default:m(()=>[i(d,{label:"是否开启越限"},{default:m(()=>[i(t,{value:p.peanble,"onUpdate:value":n[0]||(n[0]=k=>p.peanble=k),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),i(d,{label:"上限(MW)",path:p.peanble==1?"maxv":""},{default:m(()=>[i(c,{value:p.maxv,"onUpdate:value":n[1]||(n[1]=k=>p.maxv=k),format:g,disabled:p.peanble==0,placeholder:"",min:p.minv,max:h.value},null,8,["value","disabled","min","max"])]),_:1},8,["path"]),i(d,{label:"下限(MW)",path:p.peanble==1?"minv":""},{default:m(()=>[i(c,{value:p.minv,"onUpdate:value":n[2]||(n[2]=k=>p.minv=k),format:g,disabled:p.peanble==0,placeholder:"",min:0},null,8,["value","disabled"])]),_:1},8,["path"]),i(d,{label:""},{default:m(()=>[i(l,{justify:"center",class:"w-100%"},{default:m(()=>[i(f,{type:"info",ghost:"",onClick:w},{default:m(()=>[z(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),Je=W("span",null," 是否开启越限 ",-1),Ee=["onClick"],Ke={key:0},Qe={key:1,style:{color:"rgba(194, 194, 194,.7)","font-size":"12px"}},Xe=["onClick"],Ye={key:0},Ze={key:1,style:{color:"rgba(194, 194, 194,.7)","font-size":"12px"}},en=j({__name:"weatherLimitConfig",setup(T){const h=C([{max:"maxtt2",min:"mintt2",label:"2m气温(°C)",isActive:!1},{max:"maxdt2",min:"mindt2",label:"2m露点温度(°C)",isActive:!1},{max:"maxrh2",min:"minrh2",label:"2m相对湿度(%)",isActive:!1},{max:"maxwd10",min:"minwd10",label:"10m风向(°)",isActive:!1},{max:"maxws10",min:"minws10",label:"10m风速(m/s)",isActive:!1},{max:"maxrain",min:"minrain",label:"降水(mm)",isActive:!1},{max:"maxps",min:"minps",label:"气压(hPa)",isActive:!1},{max:"maxtcc",min:"mintcc",label:"总云量(%)",isActive:!1},{max:"maxssrd",min:"minssrd",label:"太阳总辐射(W/m²)",isActive:!1},{max:"maxtsdsr",min:"mintsdsr",label:"太阳直接辐射(W/m²)",isActive:!1},{max:"maxssrdiff",min:"minssrdiff",label:"太阳散辐射(W/m²)",isActive:!1}]),e=L({id:void 0,feanble:0,maxdt2:void 0,mindt2:void 0,maxrh2:void 0,minrh2:void 0,maxwd10:void 0,minwd10:void 0,maxws10:void 0,minws10:void 0,maxrain:void 0,minrain:void 0,maxps:void 0,minps:void 0,maxtcc:void 0,mintcc:void 0,maxssrd:void 0,minssrd:void 0,maxtsdsr:void 0,mintsdsr:void 0,maxssrdiff:void 0,minssrdiff:void 0}),v=L({...e}),p=async()=>{const{data:n,error:t}=await ze();t||(Object.assign(e,n),Object.assign(v,n))};p();const y=C(!1);Z(e,()=>{y.value=JSON.stringify(e)!==JSON.stringify(v)},{deep:!0});const w=()=>{var t,d,c;let n=!1;for(const f of h.value){const l=e[f.max],u=e[f.min],b=f.label;if(u!=null&&l==null||l!=null&&u==null){(t=window.$message)==null||t.error(`${b}的上下限必须同时填写或同时为空`);return}if(l!=null&&u!=null&&u>l){(d=window.$message)==null||d.error(`${b}的下限不能超过上限`);return}(l!=null||u!=null)&&(n=!0)}if(!n&&e.feanble==1){(c=window.$message)==null||c.error("至少需要填写一组有效的上下限");return}Se(e).then(f=>{var l;f.error||((l=window.$message)==null||l.success("保存成功"),p())})},g=(n,t)=>{h.value.forEach(d=>{d.isActive=!1}),n.isActive=!0,ie(()=>{var c;(c=document.querySelectorAll("input")[t])==null||c.focus()})},x=(n,t)=>{t==0?e[n.max]!==v[n.max]&&(e[n.max]=F(e[n.max],1)):e[n.min]!==v[n.min]&&(e[n.min]=F(e[n.min],1)),n.isActive=!1};return(n,t)=>{const d=J,c=O,f=G,l=K,u=E,b=R,k=ae,D=X,U=Q;return s(),P(b,{bordered:!1},{header:m(()=>[i(f,{align:"center",justify:"space-between"},{default:m(()=>[W("div",null,[Je,i(d,{value:e.feanble,"onUpdate:value":t[0]||(t[0]=a=>e.feanble=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),i(c,{type:"info",ghost:"",onClick:w,disabled:!y.value},{default:m(()=>[z(" 保存 ")]),_:1},8,["disabled"])]),_:1})]),default:m(()=>[i(U,{style:{maxHeight:"calc(100vh - 305px)"}},{default:m(()=>[i(D,{"x-gap":"15","y-gap":"15",cols:8,"item-responsive":"",responsive:"screen"},{default:m(()=>[(s(!0),r(ne,null,ee(h.value,(a,B)=>(s(),P(k,{span:"8 m:4 l:2",key:B},{default:m(()=>[i(b,{"content-style":{padding:"15px"}},{default:m(()=>[i(u,{label:a.label+"最大值","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:m(()=>[a.isActive?(s(),P(l,{key:1,value:e[a.max],"onUpdate:value":o=>e[a.max]=o,placeholder:"请输入",onBlur:o=>x(a,0),onFocus:o=>a.isActive=!0},null,8,["value","onUpdate:value","onBlur","onFocus"])):(s(),r("span",{key:0,style:{width:"100%",height:"30px","line-height":"30px","margin-left":"15px",display:"inline-block",cursor:"pointer"},onClick:o=>g(a,0)},[e[a.max]?(s(),r("span",Ke,S(e[a.max]),1)):(s(),r("span",Qe,"未设置"))],8,Ee))]),_:2},1032,["label"]),i(u,{label:a.label+"最小值","label-placement":"left","show-feedback":!1},{default:m(()=>[a.isActive?(s(),P(l,{key:1,value:e[a.min],"onUpdate:value":o=>e[a.min]=o,placeholder:"请输入",onBlur:o=>x(a,1),onFocus:o=>a.isActive=!0},null,8,["value","onUpdate:value","onBlur","onFocus"])):(s(),r("span",{key:0,style:{width:"100%",height:"30px","line-height":"30px","margin-left":"15px",display:"inline-block",cursor:"pointer"},onClick:o=>g(a,1)},[e[a.min]?(s(),r("span",Ye,S(e[a.min]),1)):(s(),r("span",Ze,"未设置"))],8,Xe))]),_:2},1032,["label"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}}),nn=W("span",null," 是否开启越限 ",-1),an=["onClick"],mn={key:0},tn={key:1,style:{color:"rgba(194, 194, 194,.7)","font-size":"12px"}},ln=["onClick"],dn={key:0},sn={key:1,style:{color:"rgba(194, 194, 194,.7)","font-size":"12px"}},un=j({__name:"weatherStationLimitConfig",setup(T){const h=C([{max:"maxenvt",min:"minenvt",label:"环境温度",isActive:!1},{max:"maxmodulet",min:"minmodulet",label:"组件温度",isActive:!1},{max:"maxt1",min:"mint1",label:"温度1",isActive:!1},{max:"maxt2",min:"mint2",label:"温度2",isActive:!1},{max:"maxt3",min:"mint3",label:"温度3",isActive:!1},{max:"maxldt",min:"minldt",label:"露点温度",isActive:!1},{max:"maxenvh",min:"minenvh",label:"环境湿度",isActive:!1},{max:"maxth1",min:"minth1",label:"土湿1",isActive:!1},{max:"maxth2",min:"minth2",label:"土湿2",isActive:!1},{max:"maxth3",min:"minth3",label:"土湿3",isActive:!1},{max:"maxco2",min:"minco2",label:"C02",isActive:!1},{max:"maxzf",min:"minzf",label:"蒸发",isActive:!1},{max:"maxqy",min:"minqy",label:"气压",isActive:!1},{max:"maxzfsd",min:"minzfsd",label:"总辐射瞬时值",isActive:!1},{max:"maxfsd1",min:"minfsd1",label:"散射辐射瞬时值",isActive:!1},{max:"maxfsd2",min:"minfsd2",label:"直接辐射瞬时值",isActive:!1},{max:"maxfsd3",min:"minfsd3",label:"净辐射瞬时值",isActive:!1},{max:"maxfsd4",min:"minfsd4",label:"光合辐射瞬时值",isActive:!1},{max:"maxfsd5",min:"minfsd5",label:"紫外辐射瞬时值",isActive:!1},{max:"maxwindd",min:"minwindd",label:"风向瞬时值",isActive:!1},{max:"maxwinds",min:"minwinds",label:"风速瞬时值",isActive:!1},{max:"maxwindd2",min:"minwindd2",label:"2分钟风速",isActive:!1},{max:"maxwindd10",min:"minwindd10",label:"10分钟风速",isActive:!1},{max:"maxyldaye",min:"minyldaye",label:"雨量日累计",isActive:!1},{max:"maxrzdayhour",min:"minrzdayhour",label:"日照日累计时数",isActive:!1},{max:"maxzfsdday",min:"minzfsdday",label:"总辐射日累计量",isActive:!1},{max:"maxfsd1day",min:"minfsd1day",label:"散射辐射日累计量",isActive:!1},{max:"maxfsd2day",min:"minfsd2day",label:"直接辐射日累积量",isActive:!1},{max:"maxfsd3day",min:"minfsd3day",label:"净辐射日累计量",isActive:!1},{max:"maxfsd4day",min:"minfsd4day",label:"光合辐射日累积量",isActive:!1},{max:"maxfsd5day",min:"minfsd5day",label:"紫外辐射日累积量",isActive:!1},{max:"maxzfsdtotal",min:"minzfsdtotal",label:"总辐射总累积量",isActive:!1}]),e=L({id:void 0,weanble:0,maxenvt:void 0,minenvt:void 0,maxmodulet:void 0,minmodulet:void 0,maxt1:void 0,mint1:void 0,maxt2:void 0,mint2:void 0,maxt3:void 0,mint3:void 0,maxldt:void 0,minldt:void 0,maxenvh:void 0,minenvh:void 0,maxth1:void 0,minth1:void 0,maxth2:void 0,minth2:void 0,maxth3:void 0,minth3:void 0,maxco2:void 0,minco2:void 0,maxzf:void 0,minzf:void 0,maxqy:void 0,minqy:void 0,maxzfsd:void 0,minzfsd:void 0,maxfsd1:void 0,minfsd1:void 0,maxfsd2:void 0,minfsd2:void 0,maxfsd3:void 0,minfsd3:void 0,maxfsd4:void 0,minfsd4:void 0,maxfsd5:void 0,minfsd5:void 0,maxwindd:void 0,minwindd:void 0,maxwinds:void 0,minwinds:void 0,maxwindd2:void 0,minwindd2:void 0,maxwindd10:void 0,minwindd10:void 0,maxyldaye:void 0,minyldaye:void 0,maxrzdayhour:void 0,minrzdayhour:void 0,maxzfsdday:void 0,minzfsdday:void 0,maxfsd1day:void 0,minfsd1day:void 0,maxfsd2day:void 0,minfsd2day:void 0,maxfsd3day:void 0,minfsd3day:void 0,maxfsd4day:void 0,minfsd4day:void 0,maxfsd5day:void 0,minfsd5day:void 0,maxzfsdtotal:void 0,minzfsdtotal:void 0}),v=L({...e}),p=async()=>{const{data:n,error:t}=await Ue();t||n.id&&(Object.assign(e,n),Object.assign(v,n))};p();const y=C(!1);Z(e,()=>{y.value=JSON.stringify(e)!==JSON.stringify(v)},{deep:!0});const w=()=>{var t,d,c;let n=!1;for(const f of h.value){const l=e[f.max],u=e[f.min],b=f.label;if(u!=null&&l==null||l!=null&&u==null){(t=window.$message)==null||t.error(`${b}的上下限必须同时填写或同时为空`);return}if(l!=null&&u!=null&&u>l){(d=window.$message)==null||d.error(`${b}的下限不能超过上限`);return}(l!=null||u!=null)&&(n=!0)}if(!n&&e.weanble==1){(c=window.$message)==null||c.error("至少需要填写一组有效的上下限");return}Be(e).then(f=>{var l;f.error||((l=window.$message)==null||l.success("保存成功"),p())})},g=(n,t)=>{h.value.forEach(d=>{d.isActive=!1}),n.isActive=!0,ie(()=>{var c;(c=document.querySelectorAll("input")[t])==null||c.focus()})},x=(n,t)=>{t==0?e[n.max]!==v[n.max]&&(e[n.max]=F(e[n.max],6)):e[n.min]!==v[n.min]&&(e[n.min]=F(e[n.min],6)),n.isActive=!1};return(n,t)=>{const d=J,c=O,f=G,l=K,u=E,b=R,k=ae,D=X,U=Q;return s(),P(b,{bordered:!1},{header:m(()=>[i(f,{align:"center",justify:"space-between"},{default:m(()=>[W("div",null,[nn,i(d,{value:e.weanble,"onUpdate:value":t[0]||(t[0]=a=>e.weanble=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),i(c,{type:"info",ghost:"",onClick:w,disabled:!y.value},{default:m(()=>[z(" 保存 ")]),_:1},8,["disabled"])]),_:1})]),default:m(()=>[i(U,{style:{maxHeight:"calc(100vh - 305px)"}},{default:m(()=>[i(D,{"x-gap":"15","y-gap":"15",cols:8,"item-responsive":"",responsive:"screen"},{default:m(()=>[(s(!0),r(ne,null,ee(h.value,(a,B)=>(s(),P(k,{span:"8 m:4 l:2",key:B},{default:m(()=>[i(b,{"content-style":{padding:"15px"}},{default:m(()=>[i(u,{label:a.label+"最大值","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:m(()=>[a.isActive?(s(),P(l,{key:1,value:e[a.max],"onUpdate:value":o=>e[a.max]=o,placeholder:"请输入",onBlur:o=>x(a,0),onFocus:o=>a.isActive=!0},null,8,["value","onUpdate:value","onBlur","onFocus"])):(s(),r("span",{key:0,style:{width:"100%",height:"30px","line-height":"30px","margin-left":"15px",display:"inline-block",cursor:"pointer"},onClick:o=>g(a,0)},[e[a.max]?(s(),r("span",mn,S(e[a.max]),1)):(s(),r("span",tn,"未设置"))],8,an))]),_:2},1032,["label"]),i(u,{label:a.label+"最小值","label-placement":"left","show-feedback":!1},{default:m(()=>[a.isActive?(s(),P(l,{key:1,value:e[a.min],"onUpdate:value":o=>e[a.min]=o,placeholder:"请输入",onBlur:o=>x(a,1),onFocus:o=>a.isActive=!0},null,8,["value","onUpdate:value","onBlur","onFocus"])):(s(),r("span",{key:0,style:{width:"100%",height:"30px","line-height":"30px","margin-left":"15px",display:"inline-block",cursor:"pointer"},onClick:o=>g(a,1)},[e[a.min]?(s(),r("span",dn,S(e[a.min]),1)):(s(),r("span",sn,"未设置"))],8,ln))]),_:2},1032,["label"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}}),pn=W("span",null," 是否开启越限 ",-1),fn=["onClick"],on={key:0},cn={key:1,style:{color:"rgba(194, 194, 194,.7)","font-size":"12px"}},xn=["onClick"],vn={key:0},rn={key:1,style:{color:"rgba(194, 194, 194,.7)","font-size":"12px"}},_n=j({__name:"invLimitConfig",setup(T){const h=C([{max:"maxupv1",min:"minupv1",label:"PV1输入电压",isActive:!1},{max:"maxupv2",min:"minupv2",label:"PV2输入电压",isActive:!1},{max:"maxupv3",min:"minupv3",label:"PV3输入电压",isActive:!1},{max:"maxupv4",min:"minupv4",label:"PV4输入电压",isActive:!1},{max:"maxupv5",min:"minupv5",label:"PV5输入电压",isActive:!1},{max:"maxupv6",min:"minupv6",label:"PV6输入电压",isActive:!1},{max:"maxupv7",min:"minupv7",label:"PV7输入电压",isActive:!1},{max:"maxupv8",min:"minupv8",label:"PV8输入电压",isActive:!1},{max:"maxupv9",min:"minupv9",label:"PV9输入电压",isActive:!1},{max:"maxupv10",min:"minupv10",label:"PV10输入电压",isActive:!1},{max:"maxupv11",min:"minupv11",label:"PV11输入电压",isActive:!1},{max:"maxupv12",min:"minupv12",label:"PV12输入电压",isActive:!1},{max:"maxupv13",min:"minupv13",label:"PV13输入电压",isActive:!1},{max:"maxupv14",min:"minupv14",label:"PV14输入电压",isActive:!1},{max:"maxupv15",min:"minupv15",label:"PV15输入电压",isActive:!1},{max:"maxupv16",min:"minupv16",label:"PV16输入电压",isActive:!1},{max:"maxupv17",min:"minupv17",label:"PV17输入电压",isActive:!1},{max:"maxupv18",min:"minupv18",label:"PV18输入电压",isActive:!1},{max:"maxupv19",min:"minupv19",label:"PV19输入电压",isActive:!1},{max:"maxupv20",min:"minupv20",label:"PV20输入电压",isActive:!1},{max:"maxupv21",min:"minupv21",label:"PV21输入电压",isActive:!1},{max:"maxupv22",min:"minupv22",label:"PV22输入电压",isActive:!1},{max:"maxupv23",min:"minupv23",label:"PV23输入电压",isActive:!1},{max:"maxupv24",min:"minupv24",label:"PV24输入电压",isActive:!1},{max:"maxipv1",min:"minipv1",label:"PV1输入电流",isActive:!1},{max:"maxipv2",min:"minipv2",label:"PV2输入电流",isActive:!1},{max:"maxipv3",min:"minipv3",label:"PV3输入电流",isActive:!1},{max:"maxipv4",min:"minipv4",label:"PV4输入电流",isActive:!1},{max:"maxipv5",min:"minipv5",label:"PV5输入电流",isActive:!1},{max:"maxipv6",min:"minipv6",label:"PV6输入电流",isActive:!1},{max:"maxipv7",min:"minipv7",label:"PV7输入电流",isActive:!1},{max:"maxipv8",min:"minipv8",label:"PV8输入电流",isActive:!1},{max:"maxipv9",min:"minipv9",label:"PV9输入电流",isActive:!1},{max:"maxipv10",min:"minipv10",label:"PV10输入电流",isActive:!1},{max:"maxipv11",min:"minipv11",label:"PV11输入电流",isActive:!1},{max:"maxipv12",min:"minipv12",label:"PV12输入电流",isActive:!1},{max:"maxipv13",min:"minipv13",label:"PV13输入电流",isActive:!1},{max:"maxipv14",min:"minipv14",label:"PV14输入电流",isActive:!1},{max:"maxipv15",min:"minipv15",label:"PV15输入电流",isActive:!1},{max:"maxipv16",min:"minipv16",label:"PV16输入电流",isActive:!1},{max:"maxipv17",min:"minipv17",label:"PV17输入电流",isActive:!1},{max:"maxipv18",min:"minipv18",label:"PV18输入电流",isActive:!1},{max:"maxipv19",min:"minipv19",label:"PV19输入电流",isActive:!1},{max:"maxipv20",min:"minipv20",label:"PV20输入电流",isActive:!1},{max:"maxipv21",min:"minipv21",label:"PV21输入电流",isActive:!1},{max:"maxipv22",min:"minipv22",label:"PV22输入电流",isActive:!1},{max:"maxipv23",min:"minipv23",label:"PV23输入电流",isActive:!1},{max:"maxipv24",min:"minipv24",label:"PV24输入电流",isActive:!1},{max:"maxipv25",min:"minipv25",label:"PV25输入电流",isActive:!1},{max:"maxipv26",min:"minipv26",label:"PV26输入电流",isActive:!1},{max:"maxipv27",min:"minipv27",label:"PV27输入电流",isActive:!1},{max:"maxipv28",min:"minipv28",label:"PV28输入电流",isActive:!1},{max:"maxipv29",min:"minipv29",label:"PV29输入电流",isActive:!1},{max:"maxipv30",min:"minipv30",label:"PV30输入电流",isActive:!1},{max:"maxipv31",min:"minipv31",label:"PV31输入电流",isActive:!1},{max:"maxipv32",min:"minipv32",label:"PV32输入电流",isActive:!1},{max:"maxumppt1",min:"minumppt1",label:"MPPT1电压",isActive:!1},{max:"maxumppt2",min:"minumppt2",label:"MPPT2电压",isActive:!1},{max:"maxumppt3",min:"minumppt3",label:"MPPT3电压",isActive:!1},{max:"maxumppt4",min:"minumppt4",label:"MPPT4电压",isActive:!1},{max:"maxumppt5",min:"minumppt5",label:"MPPT5电压",isActive:!1},{max:"maxumppt6",min:"minumppt6",label:"MPPT6电压",isActive:!1},{max:"maxumppt7",min:"minumppt7",label:"MPPT7电压",isActive:!1},{max:"maxumppt8",min:"minumppt8",label:"MPPT8电压",isActive:!1},{max:"maxumppt9",min:"minumppt9",label:"MPPT9电压",isActive:!1},{max:"maxumppt10",min:"minumppt10",label:"MPPT10电压",isActive:!1},{max:"maxumppt11",min:"minumppt11",label:"MPPT11电压",isActive:!1},{max:"maxumppt12",min:"minumppt12",label:"MPPT12电压",isActive:!1},{max:"maxumppt13",min:"minumppt13",label:"MPPT13电压",isActive:!1},{max:"maxumppt14",min:"minumppt14",label:"MPPT14电压",isActive:!1},{max:"maxumppt15",min:"minumppt15",label:"MPPT15电压",isActive:!1},{max:"maxumppt16",min:"minumppt16",label:"MPPT16电压",isActive:!1},{max:"maximppt1",min:"minimppt1",label:"MPPT1电流",isActive:!1},{max:"maximppt2",min:"minimppt2",label:"MPPT2电流",isActive:!1},{max:"maximppt3",min:"minimppt3",label:"MPPT3电流",isActive:!1},{max:"maximppt4",min:"minimppt4",label:"MPPT4电流",isActive:!1},{max:"maximppt5",min:"minimppt5",label:"MPPT5电流",isActive:!1},{max:"maximppt6",min:"minimppt6",label:"MPPT6电流",isActive:!1},{max:"maximppt7",min:"minimppt7",label:"MPPT7电流",isActive:!1},{max:"maximppt8",min:"minimppt8",label:"MPPT8电流",isActive:!1},{max:"maximppt9",min:"minimppt9",label:"MPPT9电流",isActive:!1},{max:"maximppt10",min:"minimppt10",label:"MPPT10电流",isActive:!1},{max:"maximppt11",min:"minimppt11",label:"MPPT11电流",isActive:!1},{max:"maximppt12",min:"minimppt12",label:"MPPT12电流",isActive:!1},{max:"maximppt13",min:"minimppt13",label:"MPPT13电流",isActive:!1},{max:"maximppt14",min:"minimppt14",label:"MPPT14电流",isActive:!1},{max:"maximppt15",min:"minimppt15",label:"MPPT15电流",isActive:!1},{max:"maximppt16",min:"minimppt16",label:"MPPT16电流",isActive:!1},{max:"maxuab",min:"minuab",label:"电网AB线电压",isActive:!1},{max:"maxubc",min:"minubc",label:"电网BC线电压",isActive:!1},{max:"maxuca",min:"minuca",label:"电网CA线电压",isActive:!1},{max:"maxua",min:"minua",label:"电网A相电压",isActive:!1},{max:"maxub",min:"minub",label:"电网B相电压",isActive:!1},{max:"maxuc",min:"minuc",label:"电网C相电压",isActive:!1},{max:"maxia",min:"minia",label:"电网A相电流",isActive:!1},{max:"maxib",min:"minib",label:"电网B相电流",isActive:!1},{max:"maxic",min:"minic",label:"电网C相电流",isActive:!1},{max:"maxfreq",min:"minfreq",label:"电网频率",isActive:!1},{max:"maxs",min:"mins",label:"视在功率",isActive:!1},{max:"maxp",min:"minp",label:"总有功功率",isActive:!1},{max:"maxq",min:"minq",label:"总无功功率",isActive:!1},{max:"maxpf",min:"minpf",label:"总功率因数",isActive:!1},{max:"maxpdc",min:"minpdc",label:"直流总功率",isActive:!1},{max:"maxtemp1",min:"mintemp1",label:"机内温度",isActive:!1},{max:"maxtemp2",min:"mintemp2",label:"变压器温度",isActive:!1},{max:"maxtemp3",min:"mintemp3",label:"散热器温度",isActive:!1},{max:"maxeff",min:"mineff",label:"逆变器效率",isActive:!1},{max:"maxdaye",min:"mindaye",label:"日发电量",isActive:!1},{max:"maxtotale",min:"mintotale",label:"总发电量",isActive:!1},{max:"maxtotalt",min:"mintotalt",label:"总运行时长",isActive:!1},{max:"maxmonthe",min:"minmonthe",label:"月发电量",isActive:!1},{max:"maxyeare",min:"minyeare",label:"年发电量",isActive:!1},{max:"maxusum",min:"minusum",label:"总电压",isActive:!1},{max:"maxisum",min:"minisum",label:"总电流",isActive:!1}]),e=L({id:void 0,ieanble:0,maxupv1:void 0,minupv1:void 0,maxupv2:void 0,minupv2:void 0,maxupv3:void 0,minupv3:void 0,maxupv4:void 0,minupv4:void 0,maxupv5:void 0,minupv5:void 0,maxupv6:void 0,minupv6:void 0,maxupv7:void 0,minupv7:void 0,maxupv8:void 0,minupv8:void 0,maxupv9:void 0,minupv9:void 0,maxupv10:void 0,minupv10:void 0,maxupv11:void 0,minupv11:void 0,maxupv12:void 0,minupv12:void 0,maxupv13:void 0,minupv13:void 0,maxupv14:void 0,minupv14:void 0,maxupv15:void 0,minupv15:void 0,maxupv16:void 0,minupv16:void 0,maxupv17:void 0,minupv17:void 0,maxupv18:void 0,minupv18:void 0,maxupv19:void 0,minupv19:void 0,maxupv20:void 0,minupv20:void 0,maxupv21:void 0,minupv21:void 0,maxupv22:void 0,minupv22:void 0,maxupv23:void 0,minupv23:void 0,maxupv24:void 0,minupv24:void 0,maxipv1:void 0,minipv1:void 0,maxipv2:void 0,minipv2:void 0,maxipv3:void 0,minipv3:void 0,maxipv4:void 0,minipv4:void 0,maxipv5:void 0,minipv5:void 0,maxipv6:void 0,minipv6:void 0,maxipv7:void 0,minipv7:void 0,maxipv8:void 0,minipv8:void 0,maxipv9:void 0,minipv9:void 0,maxipv10:void 0,minipv10:void 0,maxipv11:void 0,minipv11:void 0,maxipv12:void 0,minipv12:void 0,maxipv13:void 0,minipv13:void 0,maxipv14:void 0,minipv14:void 0,maxipv15:void 0,minipv15:void 0,maxipv16:void 0,minipv16:void 0,maxipv17:void 0,minipv17:void 0,maxipv18:void 0,minipv18:void 0,maxipv19:void 0,minipv19:void 0,maxipv20:void 0,minipv20:void 0,maxipv21:void 0,minipv21:void 0,maxipv22:void 0,minipv22:void 0,maxipv23:void 0,minipv23:void 0,maxipv24:void 0,minipv24:void 0,maxipv25:void 0,minipv25:void 0,maxipv26:void 0,minipv26:void 0,maxipv27:void 0,minipv27:void 0,maxipv28:void 0,minipv28:void 0,maxipv29:void 0,minipv29:void 0,maxipv30:void 0,minipv30:void 0,maxipv31:void 0,minipv31:void 0,maxipv32:void 0,minipv32:void 0,maxumppt1:void 0,minumppt1:void 0,maxumppt2:void 0,minumppt2:void 0,maxumppt3:void 0,minumppt3:void 0,maxumppt4:void 0,minumppt4:void 0,maxumppt5:void 0,minumppt5:void 0,maxumppt6:void 0,minumppt6:void 0,maxumppt7:void 0,minumppt7:void 0,maxumppt8:void 0,minumppt8:void 0,maxumppt9:void 0,minumppt9:void 0,maxumppt10:void 0,minumppt10:void 0,maxumppt11:void 0,minumppt11:void 0,maxumppt12:void 0,minumppt12:void 0,maxumppt13:void 0,minumppt13:void 0,maxumppt14:void 0,minumppt14:void 0,maxumppt15:void 0,minumppt15:void 0,maxumppt16:void 0,minumppt16:void 0,maximppt1:void 0,minimppt1:void 0,maximppt2:void 0,minimppt2:void 0,maximppt3:void 0,minimppt3:void 0,maximppt4:void 0,minimppt4:void 0,maximppt5:void 0,minimppt5:void 0,maximppt6:void 0,minimppt6:void 0,maximppt7:void 0,minimppt7:void 0,maximppt8:void 0,minimppt8:void 0,maximppt9:void 0,minimppt9:void 0,maximppt10:void 0,minimppt10:void 0,maximppt11:void 0,minimppt11:void 0,maximppt12:void 0,minimppt12:void 0,maximppt13:void 0,minimppt13:void 0,maximppt14:void 0,minimppt14:void 0,maximppt15:void 0,minimppt15:void 0,maximppt16:void 0,minimppt16:void 0,maxuab:void 0,minuab:void 0,maxubc:void 0,minubc:void 0,maxuca:void 0,minuca:void 0,maxua:void 0,minua:void 0,maxub:void 0,minub:void 0,maxuc:void 0,minuc:void 0,maxia:void 0,minia:void 0,maxib:void 0,minib:void 0,maxic:void 0,minic:void 0,maxfreq:void 0,minfreq:void 0,maxp:void 0,minp:void 0,maxq:void 0,minq:void 0,maxpf:void 0,minpf:void 0,maxpdc:void 0,minpdc:void 0,maxtemp1:void 0,mintemp1:void 0,maxtemp2:void 0,mintemp2:void 0,maxtemp3:void 0,mintemp3:void 0,maxeff:void 0,mineff:void 0,maxdaye:void 0,mindaye:void 0,maxtotale:void 0,mintotale:void 0,maxtotalt:void 0,mintotalt:void 0,maxmonthe:void 0,minmonthe:void 0,maxyeare:void 0,minyeare:void 0,maxusum:void 0,minusum:void 0,maxisum:void 0,minisum:void 0}),v=L({...e}),p=async()=>{const{data:n,error:t}=await Ne();t||n.id&&(Object.assign(e,n),Object.assign(v,n))};p();const y=C(!1);Z(e,()=>{y.value=JSON.stringify(e)!==JSON.stringify(v)},{deep:!0});const w=()=>{var t,d,c;let n=!1;for(const f of h.value){const l=e[f.max],u=e[f.min],b=f.label;if(u!=null&&l==null||l!=null&&u==null){(t=window.$message)==null||t.error(`${b}的上下限必须同时填写或同时为空`);return}if(l!=null&&u!=null&&u>l){(d=window.$message)==null||d.error(`${b}的下限不能超过上限`);return}(l!=null||u!=null)&&(n=!0)}if(!n&&e.ieanble==1){(c=window.$message)==null||c.error("至少需要填写一组有效的上下限");return}console.log(e),Oe(e).then(f=>{var l;f.error||((l=window.$message)==null||l.success("保存成功"),p())})},g=(n,t)=>{h.value.forEach(d=>{d.isActive=!1}),n.isActive=!0,ie(()=>{var c;(c=document.querySelectorAll("input")[t])==null||c.focus()})},x=(n,t)=>{t==0?e[n.max]!==v[n.max]&&(e[n.max]=F(e[n.max],6)):e[n.min]!==v[n.min]&&(e[n.min]=F(e[n.min],6)),n.isActive=!1};return(n,t)=>{const d=J,c=O,f=G,l=K,u=E,b=R,k=ae,D=X,U=Q;return s(),P(b,{bordered:!1},{header:m(()=>[i(f,{align:"center",justify:"space-between"},{default:m(()=>[W("div",null,[pn,i(d,{value:e.ieanble,"onUpdate:value":t[0]||(t[0]=a=>e.ieanble=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),i(c,{type:"info",ghost:"",onClick:w,disabled:!y.value},{default:m(()=>[z(" 保存 ")]),_:1},8,["disabled"])]),_:1})]),default:m(()=>[i(U,{style:{maxHeight:"calc(100vh - 305px)"}},{default:m(()=>[i(D,{"x-gap":"15","y-gap":"15",cols:8,"item-responsive":"",responsive:"screen"},{default:m(()=>[(s(!0),r(ne,null,ee(h.value,(a,B)=>(s(),P(k,{span:"8 m:4 l:2",key:B},{default:m(()=>[i(b,{"content-style":{padding:"15px"}},{default:m(()=>[i(u,{label:a.label+"最大值","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:m(()=>[a.isActive?(s(),P(l,{key:1,value:e[a.max],"onUpdate:value":o=>e[a.max]=o,placeholder:"请输入",onBlur:o=>x(a,0),onFocus:o=>a.isActive=!0},null,8,["value","onUpdate:value","onBlur","onFocus"])):(s(),r("span",{key:0,style:{width:"100%",height:"30px","line-height":"30px","margin-left":"15px",display:"inline-block",cursor:"pointer"},onClick:o=>g(a,0)},[e[a.max]?(s(),r("span",on,S(e[a.max]),1)):(s(),r("span",cn,"未设置"))],8,fn))]),_:2},1032,["label"]),i(u,{label:a.label+"最小值","label-placement":"left","show-feedback":!1},{default:m(()=>[a.isActive?(s(),P(l,{key:1,value:e[a.min],"onUpdate:value":o=>e[a.min]=o,placeholder:"请输入",onBlur:o=>x(a,1),onFocus:o=>a.isActive=!0},null,8,["value","onUpdate:value","onBlur","onFocus"])):(s(),r("span",{key:0,style:{width:"100%",height:"30px","line-height":"30px","margin-left":"15px",display:"inline-block",cursor:"pointer"},onClick:o=>g(a,1)},[e[a.min]?(s(),r("span",vn,S(e[a.min]),1)):(s(),r("span",rn,"未设置"))],8,xn))]),_:2},1032,["label"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}}),bn={class:"h-full flex-col"};function hn(T){return typeof T=="function"||Object.prototype.toString.call(T)==="[object Object]"&&!Pe(T)}const An=j({__name:"overLimitLog",setup(T){const h=C(window.innerHeight-430),e=Date.now(),v=new Date(e).setHours(0,0,0,0),p=new Date(e).setHours(23,59,59,999),y=[{label:"功率",value:0},{label:"天气预报",value:1},{label:"采集数据",value:2}],{columns:M,columnChecks:w,data:g,getData:x,loading:n,mobilePagination:t,searchParams:d,resetSearchParams:c}=We({apiFn:Le,apiParams:{page:1,pageSize:20,limit:20,cname:void 0,startTime:q(1,v),endTime:q(1,p),ltype:0,_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",align:"center",width:48},{key:"ovalue",title:"原始值",align:"center",width:100},{key:"lvalue",title:"限值",align:"center",width:140},{key:"lfg",title:"限值方向",align:"center",width:140,render:V=>i(te,{type:"info",round:!0},{default:()=>[V.lfg===0?"越上限":"越下限"]})},{key:"dbtime",title:"时间",align:"center",width:140},{key:"ltype",title:"限值类型",align:"center",width:100,render:V=>i(te,{type:"info",round:!0},{default:()=>{var _;return[(_=y.find(N=>N.value===V.ltype))==null?void 0:_.label]}})},{key:"cname",title:"字段",align:"center",width:100},{key:"operate",title:I("common.operate"),align:"center",width:200,fixed:"right",render:V=>i("div",{class:"flex-center gap-8px"},[le(i(pe,{onPositiveClick:()=>B(V.id)},{default:()=>I("common.confirmDelete"),trigger:()=>{let _;return i(O,{type:"error",ghost:!0,size:"small"},hn(_=I("common.delete"))?_:{default:()=>[_]})}}),[[de("no-auth"),"limit.record.delete"]])])}]}),{checkedRowKeys:f,onDeleted:l}=Ie(g,x),u=()=>{x()},b=V=>{d.ltype=V,u()},k={近一天:[Date.now()-864e5*1,Date.now()],近三天:[Date.now()-864e5*3,Date.now()],近七天:[Date.now()-864e5*7,Date.now()]},D=C([q(5,v),q(5,p)]);async function U(V,_){d.startTime=q(1,_[0]),d.endTime=q(1,_[1]),u()}const a=async()=>{const V=f.value.join(","),{data:_,error:N}=await ue({ids:V});N||(l(),f.value=[])},B=async V=>{const{data:_,error:N}=await ue({ids:V});N||l()},o=()=>{d.cname="",u()};return(V,_)=>{const N=we,H=Ge,oe=ke,ce=Re,xe=je,Y=G,ve=X,re=fe,me=R,_e=Fe,be=qe,he=Ve,Ae=de("no-auth");return s(),r("div",bn,[i(me,{bordered:!1,size:"small"},{default:m(()=>[i(re,{ref:"formRef",model:A(d),"label-placement":"left","show-feedback":!1},{default:m(()=>[i(ve,{"y-gap":16,responsive:"screen","item-responsive":""},{default:m(()=>[i(H,{span:"24 s:12 m:4",label:"字段",class:"pr-24px"},{default:m(()=>[i(N,{placeholder:"请输入字段",value:A(d).cname,"onUpdate:value":_[0]||(_[0]=$=>A(d).cname=$),clearable:"",onClear:o},null,8,["value"])]),_:1}),i(H,{span:"24 s:12 m:4",label:"限值类型",class:"pr-24px"},{default:m(()=>[i(oe,{value:A(d).ltype,"onUpdate:value":[_[1]||(_[1]=$=>A(d).ltype=$),b],options:y,filterable:"",placeholder:"请选择限值类型",style:{width:"100%"}},null,8,["value"])]),_:1}),i(H,{span:"24 s:12 m:8",label:"起止时间",class:"pr-24px"},{default:m(()=>[i(ce,{value:D.value,"onUpdate:value":_[2]||(_[2]=$=>D.value=$),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":U,"default-time":["00:00:00","23:59:59"],shortcuts:k},null,8,["value"])]),_:1}),i(H,{span:"24 s:12 m:4",label:"",class:"pr-24px"},{default:m(()=>[i(Y,{class:"w-full"},{default:m(()=>[i(A(O),{type:"primary",ghost:"",onClick:u},{icon:m(()=>[i(xe,{class:"text-icon"})]),default:m(()=>[z(" "+S(A(I)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i(me,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:m(()=>[i(Y,{align:"center",wrap:"",justify:"start",class:"lt-sm:w-200px"},{default:m(()=>[z(" 限值记录 ")]),_:1})]),"header-extra":m(()=>[i(Y,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:m(()=>[le((s(),P(A(pe),{onPositiveClick:a},{trigger:m(()=>[i(A(O),{size:"small",ghost:"",type:"error",disabled:A(f).length==0},{icon:m(()=>[i(_e,{class:ge(["text-icon",{"animate-spin":A(n)}])},null,8,["class"])]),default:m(()=>[z(" "+S(A(I)("common.batchDelete")),1)]),_:1},8,["disabled"])]),default:m(()=>[z(" 确认删除选中的项吗？ ")]),_:1})),[[Ae,"pvModule:delete"]]),i(be,{columns:A(w),"onUpdate:columns":_[3]||(_[3]=$=>se(w)?w.value=$:null)},null,8,["columns"])]),_:1})]),default:m(()=>[i(he,{"checked-row-keys":A(f),"onUpdate:checkedRowKeys":_[4]||(_[4]=$=>se(f)?f.value=$:null),columns:A(M),data:A(g),size:"small",loading:A(n),remote:"","row-key":$=>$.id,pagination:A(t),"max-height":h.value,class:"sm:h-full"},null,8,["checked-row-keys","columns","data","loading","row-key","pagination","max-height"])]),_:1})])}}}),yn={class:"h-full"},gn=j({name:"stationmanagement_overlimitconfiguration",__name:"index",setup(T){const h=C("功率越限配置");return(e,v)=>{const p=$e,y=Ce,M=R;return s(),r("div",yn,[i(M,{style:{"margin-bottom":"16px"},class:"h-full","content-style":{height:"100%"}},{default:m(()=>[i(y,{type:"card",animated:"",class:"h-100%",value:h.value,"onUpdate:value":v[0]||(v[0]=w=>h.value=w)},{default:m(()=>[i(p,{name:"功率越限配置",tab:"功率越限配置"},{default:m(()=>[i(He)]),_:1}),i(p,{name:"天气预报越限配置",tab:"天气预报越限配置"},{default:m(()=>[i(en)]),_:1}),i(p,{name:"逆变器越限配置",tab:"逆变器越限配置",class:"h-100%"},{default:m(()=>[i(_n)]),_:1}),i(p,{name:"气象站越限配置",tab:"气象站越限配置"},{default:m(()=>[i(un)]),_:1}),i(p,{name:"限值记录",tab:"限值记录",class:"h-100%"},{default:m(()=>[i(An)]),_:1})]),_:1},8,["value"])]),_:1})])}}}),Sn=Te(gn,[["__scopeId","data-v-d6800114"]]);export{Sn as default};
