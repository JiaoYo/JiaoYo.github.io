import{bM as j,a1 as x,b as M,j as B,ds as E,y as w,l as R,ay as q}from"./index-BAVDbSG0.js";import{u as A,i as D,a as G,b as H,c as I,d as J,e as K,f as N,g as P,h as Q,j as V,k as W,l as X,m as Y,n as Z,o as _,p as F,q as U,r as nn,s as sn}from"./installCanvasRenderer-iCPGNWhM.js";A([D,G,H,I,J,K,N,P,Q,V,W,X,Y,Z,_,F,U,nn]);function en(u,$={}){const p=j(),g=x(),r=M(()=>g.darkMode),e=B(null),o={width:0,height:0},{width:m,height:b}=E(e,o);let n=null;const t=u(),{onRender:c=s=>{if(!l())return;const a=r.value?"rgb(224, 224, 224)":"rgb(31, 31, 31)",T=r.value?"#001408":"rgba(255, 255, 255, 0.8)";s.showLoading({color:g.themeColor,textColor:a,fontSize:14,maskColor:T})},onUpdated:i=s=>{s.hideLoading()},onDestroy:d}=$;function O(){return e.value&&o.width>0&&o.height>0}function l(){return!!(e.value&&n)}async function k(s=()=>t){if(!l())return;const a=s(t,u);Object.assign(t,a),l()&&(n==null||n.clear()),n==null||n.setOption({...a,backgroundColor:"transparent"}),await(i==null?void 0:i(n))}async function y(s=()=>t){const a=s(t,u);n==null||n.setOption({...a,backgroundColor:"transparent"})}function S(s){n==null||n.setOption(s)}async function h(){if(!l()){const s=r.value?"dark":"light";await q(),n=sn(e.value,s),n.setOption({...t,backgroundColor:"transparent"}),await(c==null?void 0:c(n))}}function v(){n==null||n.resize()}async function f(){n&&(await(d==null?void 0:d(n)),n==null||n.dispose(),n=null)}async function C(){await f(),await h(),await(i==null?void 0:i(n))}async function z(s,a){if(o.width=s,o.height=a,!O()){await f();return}l()&&v(),await h()}p.run(()=>{w([m,b],([s,a])=>{z(s,a)}),w(r,()=>{C()})}),R(()=>{f(),p.stop()});function L(){n==null||n.hideLoading()}return{domRef:e,updateOptions:k,updateOptionsAsync:y,setOptions:S,hideLoading:L}}export{en as u};
