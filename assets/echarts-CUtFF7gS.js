import{bG as j,a5 as x,b as B,j as E,di as M,y as w,l as R,aD as q}from"./index-ByfxsQvj.js";import{u as A,i as D,a as G,b as H,c as I,d as J,e as K,f as N,g as P,h as Q,j as V,k as W,l as X,m as Y,n as Z,o as _,p as F,q as U,r as nn,s as an}from"./installCanvasRenderer-iCPGNWhM.js";A([D,G,H,I,J,K,N,P,Q,V,W,X,Y,Z,_,F,U,nn]);function en(u,$={}){const p=j(),g=x(),r=B(()=>g.darkMode),e=E(null),o={width:0,height:0},{width:m,height:b}=M(e,o);let n=null;const t=u(),{onRender:c=a=>{if(!l())return;const s=r.value?"rgb(224, 224, 224)":"rgb(31, 31, 31)",T=r.value?"#001408":"rgba(255, 255, 255, 0.8)";a.showLoading({color:g.themeColor,textColor:s,fontSize:14,maskColor:T})},onUpdated:i=a=>{a.hideLoading()},onDestroy:d}=$;function O(){return e.value&&o.width>0&&o.height>0}function l(){return!!(e.value&&n)}async function k(a=()=>t){if(!l())return;const s=a(t,u);Object.assign(t,s),l()&&(n==null||n.clear()),n==null||n.setOption({...s,backgroundColor:"transparent"}),await(i==null?void 0:i(n))}async function y(a=()=>t){const s=a(t,u);n==null||n.setOption({...s,backgroundColor:"transparent"})}function S(a){n==null||n.setOption(a)}async function h(){if(!l()){const a=r.value?"dark":"light";await q(),n=an(e.value,a),n.setOption({...t,backgroundColor:"transparent"}),await(c==null?void 0:c(n))}}function v(){n==null||n.resize()}async function f(){n&&(await(d==null?void 0:d(n)),n==null||n.dispose(),n=null)}async function C(){await f(),await h(),await(i==null?void 0:i(n))}async function z(a,s){if(o.width=a,o.height=s,!O()){await f();return}l()&&v(),await h()}p.run(()=>{w([m,b],([a,s])=>{z(a,s)}),w(r,()=>{C()})}),R(()=>{f(),p.stop()});function L(){n==null||n.hideLoading()}return{domRef:e,updateOptions:k,updateOptionsAsync:y,setOptions:S,hideLoading:L}}export{en as u};
