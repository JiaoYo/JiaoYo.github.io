import{_ as I}from"./table-column-setting.vue_vue_type_script_setup_true_lang-CX0cg8ng.js";import{_ as J}from"./export-D7w4fFNy.js";import{_ as K}from"./round-search-CRTbykM-.js";import{d as M,b0 as a,m as g,o as k,b as A,g as t,w as o,f as n,B as D,ag as H,h as v,t as x,$ as b,c as L,aq as T,F as Q,aG as W,T as X,R as Y,at as Z,a7 as ee,_ as te}from"./index-D5B256Dj.js";import{a as ne}from"./metar-Cg5usTYR.js";import{u as ae,a as oe}from"./table-CAJzliPP.js";import{e as se}from"./exportExcel-Bv4G4H50.js";import{_ as le}from"./DatePicker-D-_zJaOu.js";import{_ as ie}from"./RadioButton-DScMUa7-.js";import{_ as re}from"./FormItemGridItem-DAyicM1P.js";import{_ as ce}from"./Grid-BRXFl_1Z.js";const me={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},de=M({name:"realtimequery_nwpquery",__name:"index",setup(_e){const{columns:h,columnChecks:f,data:u,getData:p,loading:y,mobilePagination:N,searchParams:s,resetSearchParams:ue}=ae({apiFn:ne,apiParams:{page:1,pageSize:20,limit:20,startTime:a(1,Date.now())||null,endTime:a(1,Date.now()+2592e5)||null,_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",width:50},{key:"dbtime",title:"时间",align:"center",width:160},{key:"tt2",title:"2m气温(℃)",align:"center",width:100},{key:"dt2",title:"2m露点(℃)",align:"center",width:100},{key:"rh2",title:"相对湿度(%)",align:"center",width:100},{key:"wd10",title:"10m风向(°)",align:"center",width:100},{key:"ws10",title:"10m风速(m/s)",align:"center",width:100},{key:"rain",title:"降水量(mm)",align:"center",width:100},{key:"ps",title:"气压(Pa)",align:"center",width:100},{key:"tcc",title:"总云量(%)",align:"center",width:100},{key:"ssrd",title:"太阳总辐射(w/m²)",align:"center",width:140},{key:"tsdsr",title:"太阳直接辐射(w/m²)",align:"center",width:140},{key:"ssrdiff",title:"太阳散辐射(w/m²)",align:"center",width:140},{key:"lasttime",title:"最后更新时间",align:"center",width:160}]}),{drawerVisible:pe,operateType:we,editingData:fe,handleAdd:ge,handleEdit:he,checkedRowKeys:_,onBatchDeleted:ye,onDeleted:ke}=oe(u,p),C=()=>{p()},w=g([Date.now(),Date.now()+144e5]);async function S(r,e){s.startTime==a(1,Date.now())&&s.endTime==a(1,Date.now()+144e5)?m.value="0":s.startTime==a(1,Date.now())&&s.endTime==a(1,Date.now()+864e5*10)?m.value="1":m.value="2",s.startTime=a(1,e[0]),s.endTime=a(1,e[1]),p()}const B=()=>{const r={};h.value.forEach(l=>{l.key!="index"&&l.key!="operation"&&l.type!=="selection"&&(r[l.key]=l.title)});const e=[];u.value.forEach(l=>{if(_.value.includes(l.id)){const c=JSON.parse(JSON.stringify(r));for(const d in c)l.hasOwnProperty(d)?c[d]=l[d]:c[d]="";e.push(c)}}),se(e,r,"天气预报数据")},P=g("0"),R={近一天:[Date.now()-864e5*1,Date.now()],近三天:[Date.now()-864e5*3,Date.now()],近七天:[Date.now()-864e5*7,Date.now()]},m=g("0"),z=r=>{m.value=r,r=="0"?(w.value=[Date.now(),Date.now()+144e5],s.startTime=a(1,Date.now()),s.endTime=a(1,Date.now()+144e5)):(w.value=[Date.now(),Date.now()+864e5*10],s.startTime=a(1,Date.now()),s.endTime=a(1,Date.now()+864e5*10)),p()};return(r,e)=>{const l=le,c=ie,d=W,E=K,F=re,U=ce,$=X,G=J,O=I,V=Y,q=Z,j=ee;return k(),A("div",me,[t(j,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:o(()=>[t($,{ref:"formRef",model:n(s),"label-placement":"left","show-feedback":!1},{default:o(()=>[t(U,{"y-gap":16,responsive:"screen","item-responsive":""},{default:o(()=>[t(F,{span:"24 s:12 m:12",label:"起止时间",path:"startTime"},{default:o(()=>[t(l,{value:w.value,"onUpdate:value":e[0]||(e[0]=i=>w.value=i),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":S,"default-time":["00:00:00","23:59:59"],shortcuts:R},null,8,["value"]),t(d,{value:m.value,"onUpdate:value":[e[1]||(e[1]=i=>m.value=i),z],class:"ml-20px"},{default:o(()=>[t(c,{value:"0",label:"超短期"}),t(c,{value:"1",label:"短期"})]),_:1},8,["value"]),t(n(D),{type:"primary",ghost:"",onClick:C,class:"ml-20px"},{icon:o(()=>[t(E,{class:H(["text-icon",{"animate-spin":n(y)}])},null,8,["class"])]),default:o(()=>[v(" "+x(n(b)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),"header-extra":o(()=>[P.value=="0"?(k(),L(V,{key:0,align:"center",justify:"end",class:"w-100% mb--10px"},{default:o(()=>[t(n(D),{onClick:B,size:"small",disabled:n(_).length==0},{icon:o(()=>[t(G,{class:"text-icon"})]),default:o(()=>[v(" "+x(n(b)("common.export")),1)]),_:1},8,["disabled"]),t(O,{columns:n(f),"onUpdate:columns":e[2]||(e[2]=i=>T(f)?f.value=i:null)},null,8,["columns"])]),_:1})):Q("",!0)]),default:o(()=>[t(q,{"checked-row-keys":n(_),"onUpdate:checkedRowKeys":e[3]||(e[3]=i=>T(_)?_.value=i:null),columns:n(h),data:n(u),size:"small",loading:n(y),remote:"","row-key":i=>i.id,pagination:n(u).length?n(N):void 0,class:"sm:h-full","flex-height":!0,"scroll-x":""},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1})])}}}),ze=te(de,[["__scopeId","data-v-0226b4e8"]]);export{ze as default};
