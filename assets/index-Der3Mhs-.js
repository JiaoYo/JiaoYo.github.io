import{_ as Q}from"./table-header-operation.vue_vue_type_script_setup_true_lang-DInf_94l.js";import{d as O,q as U,s as j,v as K,x as W,b as X,r as Y,y as ee,K as P,o as V,c as A,w as t,g as e,h as S,t as B,i as o,$ as y,M as I,L,A as G,C as te,E as q,D as E,B as H,aa as oe,ab as ae,a9 as Z,Z as ne,ar as se,am as le,e as re,ac as T,ad as ie}from"./index-D4ngyqj9.js";import{u as ce,a as ue}from"./table-B-O-KQBR.js";import{k as me,l as pe,m as de,n as _e}from"./log-D5Q-czlZ.js";import{b as fe,a as ve,_ as ge}from"./DataTable-Bkf-sC_U.js";import{_ as he}from"./round-search-afmjBCkU.js";import{_ as ye}from"./round-refresh-DGUmO54G.js";import{_ as we}from"./FormItemGridItem-tGN8LyML.js";import{_ as be}from"./Grid-3ti0RnUO.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-QeSS3CPK.js";import"./setting-outlined-DuD7pXau.js";import"./round-delete-DNpSdI2L.js";import"./refresh-CahwNtd4.js";import"./Upload-B89re_JK.js";import"./Progress-Q6s-Jzjc.js";import"./Popconfirm-DsZjOQOD.js";import"./Forward-Bpby_coU.js";const De=O({name:"OperateDrawer",__name:"operate-drawer",props:U({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:U(["submitted"],["update:visible"]),setup(d,{emit:R}){const r=d,f=R,m=j(d,"visible"),{formRef:i,validate:w,restoreValidation:z}=K(),{defaultRequiredRule:v}=W(),$=X(()=>({add:"新增日志模块",edit:"编辑日志模块"})[r.operateType]),a=Y(b());function b(){return{id:void 0,llevel:"",sysparam:0}}const D={llevel:v};function C(){Object.assign(a,b()),r.operateType==="edit"&&r.rowData&&Object.assign(a,r.rowData)}function h(){m.value=!1}async function c(){var g,l;if(await w(),r.operateType==="add"){const{data:N,error:p}=await me([a]);p||((g=window.$message)==null||g.success(y("common.addSuccess")),h(),f("submitted"))}else{const{data:N,error:p}=await pe([a]);p||((l=window.$message)==null||l.success(y("common.updateSuccess")),h(),f("submitted"))}}return ee(m,()=>{m.value&&(C(),z())}),(g,l)=>{const N=G,p=te,k=fe,s=q,n=ve,_=E,x=H,F=oe,u=ae,J=P("no-space");return V(),A(u,{show:m.value,"onUpdate:show":l[2]||(l[2]=M=>m.value=M),"display-directive":"show",width:360},{default:t(()=>[e(F,{title:$.value,"native-scrollbar":!1,closable:""},{footer:t(()=>[e(s,{size:16},{default:t(()=>[e(x,{onClick:h},{default:t(()=>[S(B(o(y)("common.cancel")),1)]),_:1}),e(x,{type:"primary",onClick:c},{default:t(()=>[S(B(o(y)("common.confirm")),1)]),_:1})]),_:1})]),default:t(()=>[e(_,{ref_key:"formRef",ref:i,model:a,rules:D,onKeyup:I(c,["enter"])},{default:t(()=>[e(p,{label:"名称",path:"llevel"},{default:t(()=>[L(e(N,{clearable:"",value:a.llevel,"onUpdate:value":l[0]||(l[0]=M=>a.llevel=M),placeholder:"请输入名称"},null,8,["value"]),[[J]])]),_:1}),e(p,{label:"是否是系统参数"},{default:t(()=>[e(n,{value:a.sysparam,"onUpdate:value":l[1]||(l[1]=M=>a.sysparam=M),name:"radiogroup"},{default:t(()=>[e(s,null,{default:t(()=>[e(k,{value:0},{default:t(()=>[S("是")]),_:1}),e(k,{value:1},{default:t(()=>[S("否")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),Ne=O({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:U(["reset","search"],["update:model"]),setup(d,{emit:R}){const r=R,{formRef:f,restoreValidation:m}=K(),i=j(d,"model");function w(){i.value.fuzzy=void 0,r("search")}async function z(){await m(),r("reset")}async function v(){r("search")}return($,a)=>{const b=G,D=we,C=ye,h=H,c=he,g=q,l=be,N=E,p=Z,k=P("no-space");return V(),A(p,{bordered:!1,size:"small",class:"card-wrapper"},{default:t(()=>[e(N,{ref_key:"formRef",ref:f,model:i.value,"label-placement":"left","label-width":80,"show-feedback":!1,onKeyup:I(v,["enter"])},{default:t(()=>[e(l,{responsive:"screen","item-responsive":""},{default:t(()=>[e(D,{span:"24 s:12 m:6",label:"名称",path:"fuzzy",class:"pr-24px"},{default:t(()=>[L(e(b,{clearable:"",value:i.value.fuzzy,"onUpdate:value":a[0]||(a[0]=s=>i.value.fuzzy=s),placeholder:"请输入名称关键字",onClear:w},null,8,["value"]),[[k]])]),_:1}),e(D,{span:"24  s:12 m:6",class:"pr-24px"},{default:t(()=>[e(g,{class:"w-full"},{default:t(()=>[e(h,{onClick:z},{icon:t(()=>[e(C,{class:"text-icon"})]),default:t(()=>[S(" "+B(o(y)("common.reset")),1)]),_:1}),e(h,{type:"primary",ghost:"",onClick:v},{icon:t(()=>[e(c,{class:"text-icon"})]),default:t(()=>[S(" "+B(o(y)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),ke={class:"min-h-500px flex-col-stretch gap-16px overflow-auto lt-sm:overflow-auto"};function xe(d){return typeof d=="function"||Object.prototype.toString.call(d)==="[object Object]"&&!ie(d)}const Le=O({name:"logretrieval_logmodule",__name:"index",setup(d){const R=ne(),{columns:r,columnChecks:f,data:m,getData:i,loading:w,mobilePagination:z,searchParams:v,resetSearchParams:$}=ce({apiFn:de,immediate:!0,apiParams:{page:1,pageSize:20,limit:20,fuzzy:null,_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48},{key:"llevel",title:"名称",align:"center",width:240},{key:"sysparam",title:"系统参数",align:"center",width:240,render:s=>{s.sysparam==null&&(s.sysparam=0);const n={0:"success",1:"error"},_=y(se[s.sysparam]);return e(le,{size:"small",type:n[s.sysparam]},xe(_)?_:{default:()=>[_]})}}]}),{drawerVisible:a,operateType:b,editingData:D,handleAdd:C,handleEdit:h,checkedRowKeys:c,onBatchDeleted:g,onDeleted:l,closeDrawer:N}=ue(m,i);async function p(){console.log(c.value),k(c.value.join(","),s=>{g()})}async function k(s,n){const{data:_,error:x}=await _e(s);if(!x)n&&n(_);else return!1}return(s,n)=>{const _=Q,x=ge,F=Z;return V(),re("div",ke,[e(Ne,{model:o(v),"onUpdate:model":n[0]||(n[0]=u=>T(v)?v.value=u:null),onReset:o($),onSearch:o(i)},null,8,["model","onReset","onSearch"]),e(F,{title:"日志模块",bordered:!1,size:"small",class:"sm:flex-1-hidden"},{"header-extra":t(()=>[e(_,{columns:o(f),"onUpdate:columns":n[1]||(n[1]=u=>T(f)?f.value=u:null),"disabled-delete":o(c).length===0,loading:o(w),onAdd:o(C),onDelete:p,onRefresh:o(i)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:t(()=>[e(x,{"checked-row-keys":o(c),"onUpdate:checkedRowKeys":n[2]||(n[2]=u=>T(c)?c.value=u:null),columns:o(r),data:o(m),size:"small","flex-height":!o(R).isMobile,"scroll-x":962,loading:o(w),remote:"","row-key":u=>u.id,pagination:o(z),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),e(De,{visible:o(a),"onUpdate:visible":n[3]||(n[3]=u=>T(a)?a.value=u:null),"operate-type":o(b),"row-data":o(D),onSubmitted:o(i)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1})])}}});export{Le as default};
