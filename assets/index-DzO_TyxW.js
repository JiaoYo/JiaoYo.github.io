import{_ as Y}from"./table-column-setting.vue_vue_type_script_setup_true_lang-sgwzTyrs.js";import{d as R,p as V,q as G,r as Z,aw as F,s as E,ab as O,o as $,c as J,w as a,g as e,h as S,t as M,i as l,$ as U,eC as Q,aG as q,eD as ee,ak as A,L as K,Q as L,B,P as j,aH as ae,k as te,a6 as H,e as le,aI as T,eE as ne,eF as oe,A as se,z as re,aL as ie,aJ as me}from"./index-B_HgQF_v.js";import{u as de,a as ue}from"./table-Bq_C5s7p.js";import{_ as ce}from"./lodash--qb_mMkN.js";import{_ as W}from"./FormItemGridItem-DNZeWjWy.js";import{_ as X}from"./Grid-BlpdoRSB.js";import{_ as pe}from"./round-search-Bm7FkRVm.js";import{_ as _e}from"./round-refresh-B-tkruOs.js";import{_ as fe}from"./DatePicker-BT-uVaTH.js";const ve=R({__name:"modelParam_model",props:V({rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:V(["submitted"],["update:visible"]),setup(p,{emit:k}){const r=G(p,"visible"),t=k,_=p,i=Z(v());function v(){return{modelIdx:"",modelParamIdx:void 0,modelParamVal:void 0,modelParamName:"",dbtime:F(0,new Date)}}function f(){Object.assign(i,_.rowData)}const{formRef:N,validate:g,restoreValidation:C}=E();O(()=>_.rowData,()=>{f()}),O(r,()=>{r.value&&(f(),C())});const y=()=>{r.value=!1},z=async()=>{var o;await g();const b=JSON.parse(JSON.stringify(i));b.dbtime=F(1,b.dbtime);const{data:n,error:h}=await ee([b]);h||((o=window.$message)==null||o.success("修改成功"),y(),t("submitted"))},d=ce.debounce(z,1e3,{leading:!0,trailing:!1}),u={modelIdx:{type:"number",required:!0,message:"不能为空",trigger:["input","blur"]},modelParamIdx:{type:"number",required:!0,message:"不能为空",trigger:["input","blur"]},modelParamVal:{type:"number",required:!0,message:"不能为空",trigger:["input","blur"]}};return(b,n)=>{const h=A,o=W,s=K,w=X,P=L,x=B,D=j,m=ae;return $(),J(m,{show:r.value,"onUpdate:show":n[4]||(n[4]=c=>r.value=c),title:"修改模型参数",preset:"card",class:"w-600px"},{footer:a(()=>[e(D,{size:16,justify:"center"},{default:a(()=>[e(x,{onClick:y,class:"w-100px"},{default:a(()=>[S(M(l(U)("common.cancel")),1)]),_:1}),e(x,{type:"primary",class:"w-100px",onClick:l(d)},{default:a(()=>[S(M(l(U)("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[e(P,{ref_key:"formRef",ref:N,model:i,rules:u,"label-placement":"left","label-width":140,"require-mark-placement":"left"},{default:a(()=>[e(w,{responsive:"screen","item-responsive":""},{default:a(()=>[e(o,{span:"24 m:24",label:"模型索引",path:"modelIdx"},{default:a(()=>[e(h,{value:i.modelIdx,"onUpdate:value":n[0]||(n[0]=c=>i.modelIdx=c),options:l(Q),filterable:"",placeholder:"请选择模型索引",clearable:"",style:{width:"100%"}},null,8,["value","options"])]),_:1}),e(o,{span:"24 m:24",label:"模型参数索引",path:"modelParamIdx"},{default:a(()=>[e(l(q),{clearable:"",value:i.modelParamIdx,"onUpdate:value":n[1]||(n[1]=c=>i.modelParamIdx=c),placeholder:"请输入",style:{width:"100%"}},null,8,["value"])]),_:1}),e(o,{span:"24 m:24",label:"模型参数值",path:"modelParamVal"},{default:a(()=>[e(l(q),{clearable:"",value:i.modelParamVal,"onUpdate:value":n[2]||(n[2]=c=>i.modelParamVal=c),placeholder:"请输入",style:{width:"100%"}},null,8,["value"])]),_:1}),e(o,{span:"24 m:24",label:"备注",path:"manu"},{default:a(()=>[e(s,{clearable:"",value:i.modelParamName,"onUpdate:value":n[3]||(n[3]=c=>i.modelParamName=c),placeholder:"请输入",maxlength:"64",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])}}}),ge=R({name:"SearchQuery",__name:"searchQuery",props:{model:{required:!0},modelModifiers:{}},emits:V(["reset","search"],["update:model"]),setup(p,{emit:k}){const r=k,t=G(p,"model"),{formRef:_,restoreValidation:i}=E(),v=te(null),f=d=>{d?(t.value.startTime=d[0],t.value.endTime=d[1]):(t.value.startTime=void 0,t.value.endTime=void 0),r("search")};async function N(){await i(),t.value.startTime=null,t.value.endTime=null,v.value=null,t.value.fuzzy=null,r("reset")}const g=()=>{t.value.fuzzy="",r("search")},C={近一天:[Date.now()-864e5*1,Date.now()],近三天:[Date.now()-864e5*3,Date.now()],近七天:[Date.now()-864e5*7,Date.now()]};async function y(){r("search"),console.log(t.value)}const z=d=>{t.value.model_idx=d,r("search")};return(d,u)=>{const b=K,n=W,h=A,o=fe,s=_e,w=B,P=pe,x=j,D=X,m=L,c=H;return $(),J(c,{bordered:!1,size:"small"},{default:a(()=>[e(m,{ref_key:"formRef",ref:_,model:t.value,"label-placement":"left","show-feedback":!1},{default:a(()=>[e(D,{responsive:"screen","item-responsive":"","x-gap":12,"y-gap":12},{default:a(()=>[e(n,{span:"24 s:8 m:6 l:4",label:""},{default:a(()=>[e(b,{value:t.value.fuzzy,"onUpdate:value":u[0]||(u[0]=I=>t.value.fuzzy=I),clearable:"",placeholder:"请输入",onClear:g},null,8,["value"])]),_:1}),e(n,{span:"24 s:12 m:8 l:6",label:"模型索引"},{default:a(()=>[e(h,{value:t.value.model_idx,"onUpdate:value":[u[1]||(u[1]=I=>t.value.model_idx=I),z],options:l(Q),filterable:"",placeholder:"请选择模型索引",clearable:"",style:{width:"100%"}},null,8,["value","options"])]),_:1}),e(n,{span:"24 s:16 m:12 l:8",label:"起止时间"},{default:a(()=>[e(o,{value:v.value,"onUpdate:value":u[2]||(u[2]=I=>v.value=I),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss",style:{width:"100%"},"onUpdate:formattedValue":f,clearable:"",shortcuts:C},null,8,["value"])]),_:1}),e(n,{span:"24 s:12 m:8 l:6",label:""},{default:a(()=>[e(x,{class:"w-full"},{default:a(()=>[e(w,{onClick:N},{icon:a(()=>[e(s,{class:"text-icon"})]),default:a(()=>[S(" "+M(d.$t("common.reset")),1)]),_:1}),e(w,{type:"primary",ghost:"",onClick:y},{icon:a(()=>[e(P,{class:"text-icon"})]),default:a(()=>[S(" "+M(d.$t("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),be={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function he(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!me(p)}const Ce=R({name:"stationmanagement_modelparameter",__name:"index",setup(p){const{columns:k,columnChecks:r,data:t,getData:_,loading:i,mobilePagination:v,searchParams:f,resetSearchParams:N}=de({apiFn:ne,apiParams:{page:1,pageSize:20,limit:20,model_idx:void 0,fuzzy:null,startTime:null,endTime:null},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",align:"center",width:48},{key:"modelIdx",title:"模型索引",align:"center",width:140,render:o=>e("span",null,[oe[o.modelIdx]])},{key:"modelParamIdx",title:"模型参数索引",align:"center",width:100},{key:"modelParamVal",title:"模型参数值",align:"center",width:100},{key:"modelParamName",title:"备注",align:"center",width:100},{key:"dbtime",title:"更新时间",align:"center",width:180},{key:"operate",title:U("common.operate"),align:"center",width:200,fixed:"right",render:o=>{let s;return e("div",{class:"flex-center gap-8px"},[se(e(B,{type:"primary",ghost:!0,size:"small",onClick:()=>h(o.id)},he(s=U("common.edit"))?s:{default:()=>[s]}),[[re("no-auth"),"model.param.update"]])])}}]}),{drawerVisible:g,operateType:C,editingData:y,handleAdd:z,handleEdit:d,checkedRowKeys:u,onBatchDeleted:b,onDeleted:n}=ue(t,_),h=o=>{d(o)};return(o,s)=>{const w=j,P=Y,x=ie,D=H;return $(),le("div",be,[e(ge,{model:l(f),"onUpdate:model":s[0]||(s[0]=m=>T(f)?f.value=m:null),onReset:l(N),onSearch:l(_)},null,8,["model","onReset","onSearch"]),e(D,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:a(()=>[e(w,{align:"center",wrap:"",justify:"start",class:"lt-sm:w-200px"},{default:a(()=>[S(" 模型参数设置 ")]),_:1})]),"header-extra":a(()=>[e(w,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[e(P,{columns:l(r),"onUpdate:columns":s[1]||(s[1]=m=>T(r)?r.value=m:null)},null,8,["columns"])]),_:1})]),default:a(()=>[e(x,{"checked-row-keys":l(u),"onUpdate:checkedRowKeys":s[2]||(s[2]=m=>T(u)?u.value=m:null),columns:l(k),data:l(t),size:"small",loading:l(i),remote:"","row-key":m=>m.id,pagination:l(v),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"]),e(ve,{visible:l(g),"onUpdate:visible":s[3]||(s[3]=m=>T(g)?g.value=m:null),onSubmitted:l(_),"row-data":l(y)},null,8,["visible","onSubmitted","row-data"])]),_:1})])}}});export{Ce as default};
