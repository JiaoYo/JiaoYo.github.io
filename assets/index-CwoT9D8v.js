import{d as z,b as U,o as y,k as de,a as q,l as G,e as a,m as ee,u as oe,n as te,r as j,p as ne,i as A,q as me,c as E,w as s,f as t,s as _e,v as O,x as K,h as m,$ as x,y as fe,N as H,z as ge,g as R,t as $,B as F,A as Z,C as J,D as he,E as ve,F as Y,G as xe,H as B,I as we,J as ye,K as Ce,L as ae,M as se,O as be,P as ke,Q as Se,R as Ue,S as Ne,T as Re,U as $e,V as ze,W as Ie,X as Le,Y as qe,Z as Be,a0 as Me,a1 as Pe,a2 as je,a3 as Ee,a4 as Fe}from"./index-CcQeCAU2.js";const De={src:de,alt:"linkqi",style:{width:"64px",height:"64px"}},Te=z({name:"SystemLogo",__name:"system-logo",setup(r){return(n,i)=>(y(),U("img",De))}}),Ve={class:"absolute-lt z-1 size-full overflow-hidden"},Ge={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},We={height:"1337",width:"1337"},Ae={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Oe=["stop-color"],Ke=["stop-color"],He={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Ze={height:"896",width:"967.8852157128662"},Je={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Qe=["stop-color"],Xe=["stop-color"],Ye=z({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(r){const n=r,i=q(()=>G(n.themeColor,200)),u=q(()=>G(n.themeColor,500));return(e,o)=>(y(),U("div",Ve,[a("div",Ge,[(y(),U("svg",We,[a("defs",null,[o[0]||(o[0]=a("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),a("linearGradient",Ae,[a("stop",{offset:"0","stop-color":i.value,"stop-opacity":"1"},null,8,Oe),a("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,Ke)])]),o[1]||(o[1]=a("g",{opacity:"1"},[a("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),a("div",He,[(y(),U("svg",Ze,[a("defs",null,[o[2]||(o[2]=a("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),a("linearGradient",Je,[a("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,Qe),a("stop",{offset:"1","stop-color":i.value,"stop-opacity":"1"},null,8,Xe)])]),o[3]||(o[3]=a("g",{opacity:"1"},[a("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}});function eo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const n=Math.random()*16|0;return(r==="x"?n:n&3|8).toString(16)})}/*! js-cookie v3.0.5 | MIT */function M(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var u in i)r[u]=i[u]}return r}var oo={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function W(r,n){function i(e,o,c){if(!(typeof document>"u")){c=M({},n,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var _ in c)c[_]&&(d+="; "+_,c[_]!==!0&&(d+="="+c[_].split(";")[0]));return document.cookie=e+"="+r.write(o,e)+d}}function u(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var o=document.cookie?document.cookie.split("; "):[],c={},d=0;d<o.length;d++){var _=o[d].split("="),k=_.slice(1).join("=");try{var v=decodeURIComponent(_[0]);if(c[v]=r.read(k,v),e===v)break}catch{}}return e?c[e]:c}}return Object.create({set:i,get:u,remove:function(e,o){i(e,"",M({},o,{expires:-1}))},withAttributes:function(e){return W(this.converter,M({},this.attributes,e))},withConverter:function(e){return W(M({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(r)}})}var re=W(oo,{path:"/"});const V=(r,n,i)=>{re.set(r,n)},P=r=>re.get(r),to={class:"w-full flex-y-center gap-16px"},no=["src"],ao={class:"flex-y-center justify-between"},so=z({name:"PwdLogin",__name:"pwd-login",setup(r){const n=ee();oe();const{formRef:i,validate:u}=te(),e=j({username:"",password:"",captcha:"",captchaSrc:"",captchaUuid:"",checked:!0}),o=j({captchaEnable:null}),c=q(()=>{const{defaultRequiredRule:g,formRules:p,patternRules:h}=ne();return{username:p.username,password:{...g,...h.password},captcha:g}});async function d(){const{data:g,error:p}=await he();p||(o.captchaEnable=g,o.captchaEnable===1&&_())}async function _(){e.captchaUuid=eo(),e.captchaSrc=ve+"/captcha?uuid="+e.captchaUuid}async function k(){await u(),e.checked?v(e.username,e.password,e.checked):C(),await n.login(Y(e.username),Y(e.password),e.captchaUuid,e.captcha)||(e.captcha="",e.captchaSrc="",o.captchaEnable===1&&_())}function v(g,p,h){V("project_storage_user",g),V("project_storage_pwd",p),V("project_storage_check",String(h))}function f(){e.username=P("project_storage_user")||"",e.password=P("project_storage_pwd")||"",e.checked=P("project_storage_check")?P("project_storage_check")=="true":!1}function C(){v("","",!1)}return A(()=>{f(),d()}),(g,p)=>{const h=K,l=O,S=ge,I=F,L=H,N=J,D=me("no-special");return y(),E(N,{ref_key:"formRef",ref:i,model:e,rules:c.value,size:"large","show-label":!1,onKeyup:Z(k,["enter"])},{default:s(()=>[t(l,{path:"userName"},{default:s(()=>[t(h,{value:e.username,"onUpdate:value":p[0]||(p[0]=b=>e.username=b),placeholder:m(x)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),t(l,null,{default:s(()=>[t(h,{value:e.password,"onUpdate:value":p[1]||(p[1]=b=>e.password=b),type:"password","show-password-on":"click",placeholder:m(x)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o.captchaEnable===1?(y(),E(l,{key:0,path:"captcha"},{default:s(()=>[a("div",to,[fe(t(h,{value:e.captcha,"onUpdate:value":p[2]||(p[2]=b=>e.captcha=b),placeholder:"请输入验证码"},null,8,["value"]),[[D]]),a("img",{src:e.captchaSrc,alt:"验证码",style:{width:"160px",height:"40px"},onClick:_},null,8,no)])]),_:1})):_e("",!0),t(L,{vertical:"",size:24},{default:s(()=>[a("div",ao,[t(S,{checked:e.checked,"onUpdate:checked":p[3]||(p[3]=b=>e.checked=b)},{default:s(()=>[R($(m(x)("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["checked"])]),t(I,{type:"primary",size:"large",round:"",block:"",loading:m(n).loginLoading,onClick:k},{default:s(()=>[R($(m(x)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),ro={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function lo(r,n){return y(),U("svg",ro,n[0]||(n[0]=[a("path",{fill:"currentColor",d:"M10.5 20h3q.2 0 .35-.15t.15-.35t-.15-.35t-.35-.15h-3q-.2 0-.35.15t-.15.35t.15.35t.35.15M7 23q-.825 0-1.412-.587T5 21V3q0-.825.588-1.412T7 1h10q.825 0 1.413.588T19 3v18q0 .825-.587 1.413T17 23zm0-5v3h10v-3zm0-2h10V6H7zM7 4h10V3H7zm0 14v3zM7 4V3z"},null,-1)]))}const co=xe({name:"material-symbols-phone-android-outline-rounded",render:lo}),io={class:"flex"},po={class:"flex w-70px items-center"},uo=z({name:"ResetPwd",__name:"reset-pwd",setup(r){oe();const{formRef:n,validate:i}=te(),u=ee(),e=j({phnum:"",code:""}),o=B({phnum:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:["blur","change"]}],code:[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]}),c=()=>{o.value.code=[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]},d=B(0),_=async()=>{var C;await i(),o.value.code=[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}];const{data:v,error:f}=await ye(e.phnum);if(!f){(C=window.$message)==null||C.success(`验证码已发送到${e.phnum}，请注意查收`),d.value=60;const g=setInterval(()=>{d.value-=1,d.value<=0&&clearInterval(g)},1e3)}};async function k(){await i();const{data:v,error:f}=await Ce({phnum:e.phnum,code:e.code});v&&(console.log(v),await u.captchaLogin(v.data))}return(v,f)=>{const C=co,g=K,p=O,h=F,l=we,S=F,I=H,L=J;return y(),E(L,{ref_key:"formRef",ref:n,model:e,rules:o.value,size:"large","show-label":!1,onKeyup:Z(k,["enter"])},{default:s(()=>[t(p,{path:"phone","feedback-style":{marginLeft:"70px"}},{default:s(()=>[a("div",io,[a("div",po,[t(C,{class:"font-size-20px mr-8px"}),f[2]||(f[2]=a("span",null,"+86",-1))])]),t(g,{clearable:"",maxlength:"11",class:"flex-1 w-100%",onBlur:c,value:e.phnum,"onUpdate:value":f[0]||(f[0]=N=>e.phnum=N),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),t(p,{path:"code"},{default:s(()=>[t(l,null,{default:s(()=>[t(g,{value:e.code,"onUpdate:value":f[1]||(f[1]=N=>e.code=N),placeholder:m(x)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),t(h,{type:"primary",ghost:"",onClick:_,loading:d.value>0},{default:s(()=>[R($(d.value>0?`${d.value}秒后可再次获取`:"获取验证码"),1)]),_:1},8,["loading"])]),_:1})]),_:1}),t(I,{vertical:"",size:18,class:"w-full"},{default:s(()=>[t(S,{type:"primary",size:"large",round:"",block:"",onClick:k},{default:s(()=>f[3]||(f[3]=[R("登录 ")])),_:1,__:[3]})]),_:1})]),_:1},8,["model","rules"])}}}),mo=["src"],_o=z({__name:"qrcode_login",setup(r){ae(),se();const n=B(""),i=async()=>{const{data:u,error:e}=await be();e||(n.value=u)};return A(()=>{i()}),(u,e)=>(y(),U("iframe",{src:n.value,style:{margin:"0 auto"},height:"420",scrolling:"no",frameborder:"0"},null,8,mo))}}),fo={class:"w-400px lt-sm:w-300px"},go={class:"logoName"},ho={class:"text-26px text-primary font-500 lt-sm:text-22px"},vo={class:"login-footer"},xo=z({name:"login",__name:"index",setup(r){ae(),se();const n=ke(),i={"pwd-login":{label:"密码登录",component:so},qrCode:{label:"二维码登录",component:_o},"reset-pwd":{label:"验证码登录",component:uo}},u=B("pwd-login"),e=q(()=>n.darkMode?G(n.themeColor,600):n.themeColor),o=j(c());function c(){return{username:"",password:"",comfirmPassword:"",state:""}}const{createConfirmPwdRule:d,defaultRequiredRule:_,patternRules:k}=ne(),v={username:_,password:{..._,...k.password}},f=q(()=>{const h="#ffffff",l=n.darkMode?.5:.2;return Se(h,n.themeColor,l)}),C=B(!1),g=async()=>{var S;const{data:h,error:l}=await Ee({username:o.username,password:o.password,uuid:o.state});l||(u.value="qrCode",(S=window.$message)==null||S.success("绑定成功，请重新扫码登录！"))},p=()=>{C.value=!1};return A(()=>{window.addEventListener("captchaLogin",h=>{C.value=!0,o.state=h.detail.state})}),Ue(()=>{window.removeEventListener("captchaLogin",()=>{})}),(h,l)=>{const S=Ye,I=Te,L=ze,N=Ne,D=qe,b=K,T=O,le=J,ce=Be,Q=F,ie=H,pe=Me,ue=Pe;return y(),U("div",{class:"relative size-full flex-center overflow-hidden",style:je({backgroundColor:f.value})},[t(S,{"theme-color":e.value},null,8,["theme-color"]),t(D,{bordered:!1,class:"relative z-4 w-auto rd-12px","content-style":{display:"flex"}},{default:s(()=>[a("div",fo,[a("div",go,[t(I,{class:"text-64px text-primary lt-sm:text-48px"}),a("h3",ho,$(m(x)("system.title")),1)]),t(N,{value:u.value,"onUpdate:value":l[0]||(l[0]=w=>u.value=w)},{default:s(()=>[(y(),U(Re,null,$e(i,(w,X)=>t(L,{key:X,name:X,tab:w.label},{default:s(()=>[t(Ie,{name:m(n).page.animateMode,mode:"out-in",appear:""},{default:s(()=>[(y(),E(Le(w.component)))]),_:2},1032,["name"])]),_:2},1032,["name","tab"])),64))]),_:1},8,["value"])])]),_:1}),t(pe,{show:C.value,"onUpdate:show":l[4]||(l[4]=w=>C.value=w),title:"",preset:"card",class:"w-500px"},{header:s(()=>l[5]||(l[5]=[R(" 绑定微信 "),a("span",{class:"c-red font-size-14px"},"绑定过期时间10分钟",-1)])),footer:s(()=>[t(ie,{justify:"end",size:16},{default:s(()=>[t(Q,{onClick:p},{default:s(()=>[R($(m(x)("common.cancel")),1)]),_:1}),t(Q,{type:"primary",onClick:g},{default:s(()=>[R($(m(x)("common.confirm")),1)]),_:1})]),_:1})]),default:s(()=>[t(ce,null,{default:s(()=>[t(le,{ref:"formRef",model:o,rules:v,"label-placement":"left","label-width":100,"require-mark-placement":"left",onKeyup:Z(g,["enter"])},{default:s(()=>[t(T,{label:m(x)("page.manage.user.username"),path:"username"},{default:s(()=>[t(b,{value:o.username,"onUpdate:value":l[1]||(l[1]=w=>o.username=w),placeholder:m(x)("page.manage.user.form.username")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(T,{label:m(x)("page.login.common.password"),path:"password"},{default:s(()=>[t(b,{type:"password","show-password-on":"click",clearable:"",value:o.password,"onUpdate:value":l[2]||(l[2]=w=>o.password=w),placeholder:m(x)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(T,{label:m(x)("page.login.common.confirmPassword"),path:"comfirmPassword",rule:m(d)(o.password)},{default:s(()=>[t(b,{type:"password","show-password-on":"click",clearable:"",value:o.comfirmPassword,"onUpdate:value":l[3]||(l[3]=w=>o.comfirmPassword=w),placeholder:m(x)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label","rule"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show"]),a("div",vo,[l[6]||(l[6]=a("a",{href:"http://www.linkqi.cn/",target:"_blank",rel:"noopener noreferrer"},"杭州领祺科技有限公司",-1)),t(ue,{vertical:""}),l[7]||(l[7]=a("a",{href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank",rel:"noopener noreferrer"},"浙ICP备19034246号-2",-1))])],4)}}}),yo=Fe(xo,[["__scopeId","data-v-20cf6444"]]);export{yo as default};
