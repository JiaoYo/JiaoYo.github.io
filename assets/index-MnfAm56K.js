import{d as I,b as U,o as C,k as me,a as L,l as A,e as n,m as K,u as ne,n as H,r as F,p as ae,i as Z,q as _e,c as T,w as a,f as o,s as fe,v as J,x as Q,h as f,$ as y,y as he,N as X,z as ge,g as M,t as P,B as D,A as Y,C as ee,D as ve,E as xe,F as te,G as we,H as B,I as ye,J as Ce,K as be,L as ke,M as se,O as Se,P as $e,Q as Ne,R as Re,S as Ue,T as qe,U as ze,V as Me,W as Ie,X as Le,Y as Pe,Z as Be,a0 as je,a1 as Ee,a2 as Fe,a3 as Te,a4 as De}from"./index-JAJtFREg.js";const Ve={src:me,alt:"linkqi",style:{width:"64px",height:"64px"}},Ge=I({name:"SystemLogo",__name:"system-logo",setup(r){return(s,c)=>(C(),U("img",Ve))}}),We={class:"absolute-lt z-1 size-full overflow-hidden"},Ae={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},Oe={height:"1337",width:"1337"},Ke={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},He=["stop-color"],Ze=["stop-color"],Je={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Qe={height:"896",width:"967.8852157128662"},Xe={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Ye=["stop-color"],eo=["stop-color"],oo=I({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(r){const s=r,c=L(()=>A(s.themeColor,200)),m=L(()=>A(s.themeColor,500));return(e,l)=>(C(),U("div",We,[n("div",Ae,[(C(),U("svg",Oe,[n("defs",null,[l[0]||(l[0]=n("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),n("linearGradient",Ke,[n("stop",{offset:"0","stop-color":c.value,"stop-opacity":"1"},null,8,He),n("stop",{offset:"1","stop-color":m.value,"stop-opacity":"1"},null,8,Ze)])]),l[1]||(l[1]=n("g",{opacity:"1"},[n("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),n("div",Je,[(C(),U("svg",Qe,[n("defs",null,[l[2]||(l[2]=n("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),n("linearGradient",Xe,[n("stop",{offset:"0","stop-color":m.value,"stop-opacity":"1"},null,8,Ye),n("stop",{offset:"1","stop-color":c.value,"stop-opacity":"1"},null,8,eo)])]),l[3]||(l[3]=n("g",{opacity:"1"},[n("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}});function to(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const s=Math.random()*16|0;return(r==="x"?s:s&3|8).toString(16)})}/*! js-cookie v3.0.5 | MIT */function j(r){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var m in c)r[m]=c[m]}return r}var no={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function O(r,s){function c(e,l,t){if(!(typeof document>"u")){t=j({},s,t),typeof t.expires=="number"&&(t.expires=new Date(Date.now()+t.expires*864e5)),t.expires&&(t.expires=t.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var h in t)t[h]&&(u+="; "+h,t[h]!==!0&&(u+="="+t[h].split(";")[0]));return document.cookie=e+"="+r.write(l,e)+u}}function m(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var l=document.cookie?document.cookie.split("; "):[],t={},u=0;u<l.length;u++){var h=l[u].split("="),k=h.slice(1).join("=");try{var v=decodeURIComponent(h[0]);if(t[v]=r.read(k,v),e===v)break}catch{}}return e?t[e]:t}}return Object.create({set:c,get:m,remove:function(e,l){c(e,"",j({},l,{expires:-1}))},withAttributes:function(e){return O(this.converter,j({},this.attributes,e))},withConverter:function(e){return O(j({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(r)}})}var re=O(no,{path:"/"});const W=(r,s,c)=>{re.set(r,s)},E=r=>re.get(r),ao={class:"w-full flex-y-center gap-16px"},so=["src"],ro={class:"flex-y-center justify-between"},lo=I({name:"PwdLogin",__name:"pwd-login",setup(r){const s=K();ne();const{formRef:c,validate:m}=H(),e=F({username:"",password:"",captcha:"",captchaSrc:"",captchaUuid:"",checked:!0}),l=F({captchaEnable:null}),t=L(()=>{const{defaultRequiredRule:g,formRules:p,patternRules:x}=ae();return{username:p.username,password:{...g,...x.password},captcha:g}});async function u(){const{data:g,error:p}=await ve();p||(l.captchaEnable=g,l.captchaEnable===1&&h())}async function h(){e.captchaUuid=to(),e.captchaSrc=xe+"/captcha?uuid="+e.captchaUuid}async function k(){await m(),e.checked?v(e.username,e.password,e.checked):N(),await s.login(te(e.username),te(e.password),e.captchaUuid,e.captcha)||(e.captcha="",e.captchaSrc="",l.captchaEnable===1&&h())}function v(g,p,x){W("project_storage_user",g),W("project_storage_pwd",p),W("project_storage_check",String(x))}function _(){e.username=E("project_storage_user")||"",e.password=E("project_storage_pwd")||"",e.checked=E("project_storage_check")?E("project_storage_check")=="true":!1}function N(){v("","",!1)}return Z(()=>{_(),u()}),(g,p)=>{const x=Q,R=J,b=ge,i=D,w=X,S=ee,z=_e("no-special");return C(),T(S,{ref_key:"formRef",ref:c,model:e,rules:t.value,size:"large","show-label":!1,onKeyup:Y(k,["enter"])},{default:a(()=>[o(R,{path:"userName"},{default:a(()=>[o(x,{value:e.username,"onUpdate:value":p[0]||(p[0]=d=>e.username=d),placeholder:f(y)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(R,null,{default:a(()=>[o(x,{value:e.password,"onUpdate:value":p[1]||(p[1]=d=>e.password=d),type:"password","show-password-on":"click",placeholder:f(y)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),l.captchaEnable===1?(C(),T(R,{key:0,path:"captcha"},{default:a(()=>[n("div",ao,[he(o(x,{value:e.captcha,"onUpdate:value":p[2]||(p[2]=d=>e.captcha=d),placeholder:"请输入验证码"},null,8,["value"]),[[z]]),n("img",{src:e.captchaSrc,alt:"验证码",style:{width:"160px",height:"40px"},onClick:h},null,8,so)])]),_:1})):fe("",!0),o(w,{vertical:"",size:24},{default:a(()=>[n("div",ro,[o(b,{checked:e.checked,"onUpdate:checked":p[3]||(p[3]=d=>e.checked=d)},{default:a(()=>[M(P(f(y)("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["checked"])]),o(i,{type:"primary",size:"large",round:"",block:"",loading:f(s).loginLoading,onClick:k},{default:a(()=>[M(P(f(y)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),co={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function io(r,s){return C(),U("svg",co,s[0]||(s[0]=[n("path",{fill:"currentColor",d:"M10.5 20h3q.2 0 .35-.15t.15-.35t-.15-.35t-.35-.15h-3q-.2 0-.35.15t-.15.35t.15.35t.35.15M7 23q-.825 0-1.412-.587T5 21V3q0-.825.588-1.412T7 1h10q.825 0 1.413.588T19 3v18q0 .825-.587 1.413T17 23zm0-5v3h10v-3zm0-2h10V6H7zM7 4h10V3H7zm0 14v3zM7 4V3z"},null,-1)]))}const po=we({name:"material-symbols-phone-android-outline-rounded",render:io}),uo={class:"flex"},mo={class:"flex w-70px items-center"},_o=I({name:"ResetPwd",__name:"reset-pwd",setup(r){ne();const{formRef:s,validate:c}=H(),m=K(),e=F({phnum:"",code:""}),l=B({phnum:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:["blur","change"]}],code:[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]}),t=()=>{l.value.code=[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]},u=B(0),h=async()=>{var N;await c(),l.value.code=[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}];const{data:v,error:_}=await Ce(e.phnum);if(!_){(N=window.$message)==null||N.success(`验证码已发送到${e.phnum}，请注意查收`),u.value=60;const g=setInterval(()=>{u.value-=1,u.value<=0&&clearInterval(g)},1e3)}};async function k(){await c();const{data:v,error:_}=await be({phnum:e.phnum,code:e.code});v&&(console.log(v),await m.captchaLogin(v.data))}return(v,_)=>{const N=po,g=Q,p=J,x=D,R=ye,b=D,i=X,w=ee;return C(),T(w,{ref_key:"formRef",ref:s,model:e,rules:l.value,size:"large","show-label":!1,onKeyup:Y(k,["enter"])},{default:a(()=>[o(p,{path:"phone","feedback-style":{marginLeft:"70px"}},{default:a(()=>[n("div",uo,[n("div",mo,[o(N,{class:"font-size-20px mr-8px"}),_[2]||(_[2]=n("span",null,"+86",-1))])]),o(g,{clearable:"",maxlength:"11",class:"flex-1 w-100%",onBlur:t,value:e.phnum,"onUpdate:value":_[0]||(_[0]=S=>e.phnum=S),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),o(p,{path:"code"},{default:a(()=>[o(R,null,{default:a(()=>[o(g,{value:e.code,"onUpdate:value":_[1]||(_[1]=S=>e.code=S),placeholder:f(y)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(x,{type:"primary",ghost:"",onClick:h,loading:u.value>0},{default:a(()=>[M(P(u.value>0?`${u.value}秒后可再次获取`:"获取验证码"),1)]),_:1},8,["loading"])]),_:1})]),_:1}),o(i,{vertical:"",size:18,class:"w-full"},{default:a(()=>[o(b,{type:"primary",size:"large",round:"",block:"",onClick:k},{default:a(()=>_[3]||(_[3]=[M("登录 ")])),_:1,__:[3]})]),_:1})]),_:1},8,["model","rules"])}}}),fo={class:"qr-wrapper"},ho=["src"],go=I({__name:"qrcode_login",setup(r){const s=B(""),c=async()=>{const{data:m,error:e}=await ke();e||(s.value=m)};return Z(()=>{c()}),(m,e)=>(C(),U("div",fo,[n("iframe",{src:s.value,frameborder:"0",scrolling:"no",class:"qr-frame"},null,8,ho),e[0]||(e[0]=n("div",{class:"qr-tip"},"微信二维码有效期5分钟",-1))]))}}),vo=se(go,[["__scopeId","data-v-ef61d415"]]),xo={class:"w-400px lt-sm:w-300px"},wo={class:"logoName"},yo={class:"text-26px text-primary font-500 lt-sm:text-22px"},Co={class:"login-footer"},bo=I({name:"login",__name:"index",setup(r){const s=K();Se(),$e();const c=Ne(),m={"pwd-login":{label:"密码登录",component:lo},qrCode:{label:"二维码登录",component:vo},"reset-pwd":{label:"验证码登录",component:_o}},e=B("pwd-login"),l=L(()=>c.darkMode?A(c.themeColor,600):c.themeColor),t=F(u());function u(){return{username:"",password:"",comfirmPassword:"",state:""}}const{createConfirmPwdRule:h,defaultRequiredRule:k,patternRules:v}=ae(),_={username:k,password:{...k,...v.password}},N=L(()=>{const b="#ffffff",i=c.darkMode?.5:.2;return Re(b,c.themeColor,i)}),{formRef:g,validate:p}=H(),x=B(!1),R=async()=>{var w;await p();const{data:b,error:i}=await De({username:t.username,password:t.password,uuid:t.state});i||(e.value="qrCode",x.value=!1,(w=window.$message)==null||w.success("绑定成功，请重新扫码登录！"))};return Z(()=>{var z;const b=window.location.href,i=b.match(/status=(\d)\?/);if(!i)return;const w=i[1],S={0:"获取微信信息失败",1:"获取用户信息失败",2:"二维码过期",4:"账号停用",6:"其他未知原因"};if(S[w]){(z=window.$message)==null||z.error(S[w]);return}if(w==="3"){const d=b.match(/state=([^#&]+)/),q=d?d[1]:"";x.value=!0,t.state=q}if(w==="5"){const d=b.match(/token=([^#&]+)/),q=d?d[1]:"";q&&s.captchaLogin({token:q})}window.addEventListener("captchaLogin",d=>{x.value=!0,t.state=d.detail.state})}),Ue(()=>{window.removeEventListener("captchaLogin",()=>{})}),(b,i)=>{const w=oo,S=Ge,z=Ie,d=qe,q=Be,V=Q,G=J,le=ee,ce=je,ie=D,pe=X,ue=Ee,de=Fe;return C(),U("div",{class:"relative size-full flex-center overflow-hidden",style:Te({backgroundColor:N.value})},[o(w,{"theme-color":l.value},null,8,["theme-color"]),o(q,{bordered:!1,class:"relative z-4 w-auto rd-12px","content-style":{display:"flex"}},{default:a(()=>[n("div",xo,[n("div",wo,[o(S,{class:"text-64px text-primary lt-sm:text-48px"}),n("h3",yo,P(f(y)("system.title")),1)]),o(d,{value:e.value,"onUpdate:value":i[0]||(i[0]=$=>e.value=$)},{default:a(()=>[(C(),U(ze,null,Me(m,($,oe)=>o(z,{key:oe,name:oe,tab:$.label},{default:a(()=>[o(Le,{name:f(c).page.animateMode,mode:"out-in",appear:""},{default:a(()=>[(C(),T(Pe($.component)))]),_:2},1032,["name"])]),_:2},1032,["name","tab"])),64))]),_:1},8,["value"])])]),_:1}),o(ue,{show:x.value,title:"",class:"w-500px","mask-closable":!1,"close-on-esc":!1},{default:a(()=>[o(q,null,{header:a(()=>i[4]||(i[4]=[M(" 绑定微信 "),n("span",{class:"c-red font-size-14px"},"绑定过期时间10分钟",-1)])),footer:a(()=>[o(pe,{justify:"end",size:16},{default:a(()=>[o(ie,{type:"primary",onClick:R},{default:a(()=>[M(P(f(y)("common.confirm")),1)]),_:1})]),_:1})]),default:a(()=>[o(ce,null,{default:a(()=>[o(le,{ref_key:"formRef",ref:g,model:t,rules:_,"label-placement":"left","label-width":100,"require-mark-placement":"left",onKeyup:Y(R,["enter"])},{default:a(()=>[o(G,{label:f(y)("page.manage.user.username"),path:"username"},{default:a(()=>[o(V,{value:t.username,"onUpdate:value":i[1]||(i[1]=$=>t.username=$),placeholder:f(y)("page.manage.user.form.username")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(G,{label:f(y)("page.login.common.password"),path:"password"},{default:a(()=>[o(V,{type:"password","show-password-on":"click",clearable:"",value:t.password,"onUpdate:value":i[2]||(i[2]=$=>t.password=$),placeholder:f(y)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(G,{label:f(y)("page.login.common.confirmPassword"),path:"comfirmPassword",rule:f(h)(t.password)},{default:a(()=>[o(V,{type:"password","show-password-on":"click",clearable:"",value:t.comfirmPassword,"onUpdate:value":i[3]||(i[3]=$=>t.comfirmPassword=$),placeholder:f(y)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label","rule"])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["show"]),n("div",Co,[i[5]||(i[5]=n("a",{href:"http://www.linkqi.cn/",target:"_blank",rel:"noopener noreferrer"},"杭州领祺科技有限公司",-1)),o(de,{vertical:""}),i[6]||(i[6]=n("a",{href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank",rel:"noopener noreferrer"},"浙ICP备19034246号-2",-1))])],4)}}}),So=se(bo,[["__scopeId","data-v-9cf401f0"]]);export{So as default};
