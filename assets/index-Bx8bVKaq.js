import{_ as Q}from"./table-header-operation.vue_vue_type_script_setup_true_lang-C4VRQsxL.js";import{d as U,q as M,s as P,v as A,x as W,b as X,r as Y,y as ee,K as I,o as K,c as O,w as o,g as e,h as N,t as L,i as t,$ as x,M as V,L as j,A as G,C as oe,E as q,D as E,B as H,aa as te,ab as ae,a9 as Z,Z as ne,e as se,ac as B}from"./index-CsSYpLym.js";import{u as le,a as re}from"./table-DCxpav6d.js";import{g as ie,h as ce,i as ue,j as me}from"./log-s9UnMBlk.js";import{b as pe,a as de,_ as _e}from"./DataTable-aZh4mZz2.js";import{_ as fe}from"./round-search-Dtp7E9Hm.js";import{_ as ve}from"./round-refresh-DOrEb6Qo.js";import{_ as ge}from"./FormItemGridItem-Bdm6h163.js";import{_ as he}from"./Grid-C4cZ6WxQ.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-DA9Hc1O-.js";import"./setting-outlined-D6k74DJG.js";import"./round-delete-CGs2xQbQ.js";import"./refresh-C8V4ZZfl.js";import"./round-plus-BCWcqFXE.js";import"./Upload-Dto-1aHs.js";import"./Progress-6NqKhq42.js";import"./Popconfirm-DEvmG-Lq.js";import"./Forward-C9tKHKQU.js";const we=U({name:"OperateDrawer",__name:"operate-drawer",props:M({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:M(["submitted"],["update:visible"]),setup(k,{emit:R}){const l=k,p=R,u=P(k,"visible"),{formRef:r,validate:g,restoreValidation:z}=A(),{defaultRequiredRule:d}=W(),T=X(()=>({add:"新增日志级别",edit:"编辑日志级别"})[l.operateType]),a=Y(h());function h(){return{id:void 0,llevel:"",sysparam:0}}const w={llevel:d};function C(){Object.assign(a,h()),l.operateType==="edit"&&l.rowData&&Object.assign(a,l.rowData)}function v(){u.value=!1}async function i(){var _,s;if(await g(),l.operateType==="add"){const{data:y,error:m}=await ie([a]);m||((_=window.$message)==null||_.success(x("common.addSuccess")),v(),p("submitted"))}else{const{data:y,error:m}=await ce([a]);m||((s=window.$message)==null||s.success(x("common.updateSuccess")),v(),p("submitted"))}}return ee(u,()=>{u.value&&(C(),z())}),(_,s)=>{const y=G,m=oe,b=pe,f=q,n=de,S=E,D=H,F=te,c=ae,J=I("no-space");return K(),O(c,{show:u.value,"onUpdate:show":s[2]||(s[2]=$=>u.value=$),"display-directive":"show",width:360},{default:o(()=>[e(F,{title:T.value,"native-scrollbar":!1,closable:""},{footer:o(()=>[e(f,{size:16},{default:o(()=>[e(D,{onClick:v},{default:o(()=>[N(L(t(x)("common.cancel")),1)]),_:1}),e(D,{type:"primary",onClick:i},{default:o(()=>[N(L(t(x)("common.confirm")),1)]),_:1})]),_:1})]),default:o(()=>[e(S,{ref_key:"formRef",ref:r,model:a,rules:w,onKeyup:V(i,["enter"])},{default:o(()=>[e(m,{label:"名称",path:"llevel"},{default:o(()=>[j(e(y,{clearable:"",value:a.llevel,"onUpdate:value":s[0]||(s[0]=$=>a.llevel=$),placeholder:"请输入名称"},null,8,["value"]),[[J]])]),_:1}),e(m,{label:"是否是系统参数"},{default:o(()=>[e(n,{value:a.sysparam,"onUpdate:value":s[1]||(s[1]=$=>a.sysparam=$),name:"radiogroup"},{default:o(()=>[e(f,null,{default:o(()=>[e(b,{value:0},{default:o(()=>[N("是")]),_:1}),e(b,{value:1},{default:o(()=>[N("否")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),ye=U({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:M(["reset","search"],["update:model"]),setup(k,{emit:R}){const l=R,{formRef:p,restoreValidation:u}=A(),r=P(k,"model");function g(){r.value.fuzzy=void 0,l("search")}async function z(){await u(),l("reset")}async function d(){l("search")}return(T,a)=>{const h=G,w=ge,C=ve,v=H,i=fe,_=q,s=he,y=E,m=Z,b=I("no-space");return K(),O(m,{bordered:!1,size:"small",class:"card-wrapper"},{default:o(()=>[e(y,{ref_key:"formRef",ref:p,model:r.value,"label-placement":"left","label-width":80,"show-feedback":!1,onKeyup:V(d,["enter"])},{default:o(()=>[e(s,{responsive:"screen","item-responsive":""},{default:o(()=>[e(w,{span:"24 s:12 m:6",label:"名称",path:"fuzzy",class:"pr-24px"},{default:o(()=>[j(e(h,{clearable:"",value:r.value.fuzzy,"onUpdate:value":a[0]||(a[0]=f=>r.value.fuzzy=f),placeholder:"请输入名称关键字",onClear:g},null,8,["value"]),[[b]])]),_:1}),e(w,{span:"24  s:12 m:6",class:"pr-24px"},{default:o(()=>[e(_,{class:"w-full"},{default:o(()=>[e(v,{onClick:z},{icon:o(()=>[e(C,{class:"text-icon"})]),default:o(()=>[N(" "+L(t(x)("common.reset")),1)]),_:1}),e(v,{type:"primary",ghost:"",onClick:d},{icon:o(()=>[e(i,{class:"text-icon"})]),default:o(()=>[N(" "+L(t(x)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),be={class:"min-h-500px flex-col-stretch gap-16px overflow-auto lt-sm:overflow-auto"},Ie=U({name:"logretrieval_loglevel",__name:"index",setup(k){const R=ne(),{columns:l,columnChecks:p,data:u,getData:r,loading:g,mobilePagination:z,searchParams:d,resetSearchParams:T}=le({apiFn:ue,immediate:!0,apiParams:{page:1,pageSize:20,limit:20,fuzzy:null,_t:new Date().getTime()},columns:()=>[{key:"llevel",title:"名称",align:"center"}]}),{drawerVisible:a,operateType:h,editingData:w,handleAdd:C,handleEdit:v,checkedRowKeys:i,onBatchDeleted:_,onDeleted:s,closeDrawer:y}=re(u,r);async function m(){console.log(i.value),b(i.value.join(","),f=>{_()})}async function b(f,n){const{data:S,error:D}=await me(f);if(!D)n&&n(S);else return!1}return(f,n)=>{const S=Q,D=_e,F=Z;return K(),se("div",be,[e(ye,{model:t(d),"onUpdate:model":n[0]||(n[0]=c=>B(d)?d.value=c:null),onReset:t(T),onSearch:t(r)},null,8,["model","onReset","onSearch"]),e(F,{title:"日志级别",bordered:!1,size:"small",class:"sm:flex-1-hidden"},{"header-extra":o(()=>[e(S,{columns:t(p),"onUpdate:columns":n[1]||(n[1]=c=>B(p)?p.value=c:null),"disabled-delete":t(i).length===0,loading:t(g),onAdd:t(C),onDelete:m,onRefresh:t(r)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:o(()=>[e(D,{"checked-row-keys":t(i),"onUpdate:checkedRowKeys":n[2]||(n[2]=c=>B(i)?i.value=c:null),columns:t(l),data:t(u),size:"small","flex-height":!t(R).isMobile,"scroll-x":962,loading:t(g),remote:"","row-key":c=>c.id,pagination:t(z),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),e(we,{visible:t(a),"onUpdate:visible":n[3]||(n[3]=c=>B(a)?a.value=c:null),"operate-type":t(h),"row-data":t(w),onSubmitted:t(r)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1})])}}});export{Ie as default};
