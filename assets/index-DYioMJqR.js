import{_ as G}from"./table-column-setting.vue_vue_type_script_setup_true_lang-B5exJvFm.js";import{_ as I}from"./export-DwQa_Uz4.js";import{_ as J}from"./round-search-DiRf-ajt.js";import{d as M,aT as d,j as k,o as v,e as q,g as t,w as a,i as n,B as x,a9 as K,h as b,t as D,$ as T,c as A,ak as N,C as H,J as L,a0 as Q,bR as W,I as X,bS as Y,M as Z}from"./index-CI2HX52s.js";import{d as ee}from"./metar-BPxCenEH.js";import{u as te,a as ne}from"./table-CL5JRpix.js";import{e as ae}from"./exportExcel-Bv4G4H50.js";import{_ as oe}from"./DatePicker-Dyl6S9Z-.js";import{_ as se}from"./FormItemGridItem-H5-g3JS3.js";import{_ as le}from"./Grid-BjU2Fuoz.js";import{_ as ie}from"./DataTable-iODjs3SB.js";import"./TimePicker-3c4Jr5cb.js";import"./Forward-CE5gwjyU.js";import"./RadioGroup-A-fOClpI.js";const re={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},ce=M({name:"realtimequery_nwpquery",__name:"index",setup(me){const{columns:f,columnChecks:p,data:m,getData:h,loading:w,mobilePagination:C,searchParams:_,resetSearchParams:de}=te({apiFn:ee,apiParams:{page:1,pageSize:20,limit:20,startTime:d(1,Date.now())||null,endTime:d(1,Date.now()+2592e5)||null,_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",width:50},{key:"dbtime",title:"时间",align:"center",width:160},{key:"tt2",title:"2m气温(℃)",align:"center",width:100},{key:"dt2",title:"2m露点(℃)",align:"center",width:100},{key:"rh2",title:"相对湿度(%)",align:"center",width:100},{key:"wd10",title:"10m风向(°)",align:"center",width:100},{key:"ws10",title:"10m风速(m/s)",align:"center",width:100},{key:"rain",title:"降水量(mm)",align:"center",width:100},{key:"ps",title:"气压(Pa)",align:"center",width:100},{key:"tcc",title:"总云量(%)",align:"center",width:100},{key:"ssrd",title:"太阳总辐射(w/m²)",align:"center",width:140},{key:"tsdsr",title:"太阳直接辐射(w/m²)",align:"center",width:140},{key:"ssrdiff",title:"太阳散辐射(w/m²)",align:"center",width:140},{key:"lasttime",title:"最后更新时间",align:"center",width:160}]}),{drawerVisible:pe,operateType:_e,editingData:ue,handleAdd:fe,handleEdit:he,checkedRowKeys:r,onBatchDeleted:we,onDeleted:ge}=ne(m,h),S=()=>{h()},g=k([Date.now(),Date.now()+864e5*3]);async function P(c,e){_.startTime=d(1,e[0]),_.endTime=d(1,e[1])}const z=()=>{const c={};f.value.forEach(o=>{o.key!="index"&&o.key!="operation"&&o.type!=="selection"&&(c[o.key]=o.title)});const e=[];m.value.forEach(o=>{if(r.value.includes(o.id)){const l=JSON.parse(JSON.stringify(c));for(const i in l)o.hasOwnProperty(i)?l[i]=o[i]:l[i]="";e.push(l)}}),ae(e,c,"天气预报数据")},u=k("0"),B={近一天:[Date.now()-864e5*1,Date.now()],近三天:[Date.now()-864e5*3,Date.now()],近七天:[Date.now()-864e5*7,Date.now()]};return(c,e)=>{const o=oe,l=J,i=se,$=le,E=L,y=Q,R=ie,U=W,F=I,O=G,V=X,j=Y;return v(),q("div",re,[t(y,{bordered:!1,size:"small"},{default:a(()=>[t(E,{ref:"formRef",model:n(_),"label-placement":"left","show-feedback":!1},{default:a(()=>[t($,{"y-gap":16,responsive:"screen","item-responsive":""},{default:a(()=>[t(i,{span:"24 s:12 m:12",label:"起止时间",path:"startTime"},{default:a(()=>[t(o,{value:g.value,"onUpdate:value":e[0]||(e[0]=s=>g.value=s),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":P,shortcuts:B},null,8,["value"]),t(n(x),{type:"primary",ghost:"",onClick:S,class:"ml-20px"},{icon:a(()=>[t(l,{class:K(["text-icon",{"animate-spin":n(w)}])},null,8,["class"])]),default:a(()=>[b(" "+D(n(T)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(y,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{default:a(()=>[t(j,{type:"card",animated:"",value:u.value,"onUpdate:value":e[3]||(e[3]=s=>u.value=s),class:"h-100%","pane-wrapper-style":{flex:1}},{suffix:a(()=>[u.value=="0"?(v(),A(V,{key:0,align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[t(n(x),{onClick:z,size:"small",disabled:n(r).length==0},{icon:a(()=>[t(F,{class:"text-icon"})]),default:a(()=>[b(" "+D(n(T)("common.export")),1)]),_:1},8,["disabled"]),t(O,{columns:n(p),"onUpdate:columns":e[2]||(e[2]=s=>N(p)?p.value=s:null)},null,8,["columns"])]),_:1})):H("",!0)]),default:a(()=>[t(U,{name:"0",tab:"表格",class:"h-100%"},{default:a(()=>[t(R,{"checked-row-keys":n(r),"onUpdate:checkedRowKeys":e[1]||(e[1]=s=>N(r)?r.value=s:null),columns:n(f),data:n(m),size:"small",loading:n(w),remote:"","row-key":s=>s.id,pagination:n(m).length?n(C):void 0,class:"sm:h-full","flex-height":!0,"scroll-x":""},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1})]),_:1},8,["value"])]),_:1})])}}}),Ee=Z(ce,[["__scopeId","data-v-332dd6a4"]]);export{Ee as default};
