import{d as j,o as v,e as w,f as e,aa as J,R,j as m,bl as he,b as Q,bm as ke,i as T,bn as oe,P as Y,Q as Z,c as N,w as H,t as E,G as _e,bo as se,ae as G,A as P,bp as Ce,a4 as ve,l as Se,aG as X,bq as q,g as O,br as pe,bs as me,ao as ne,am as ge,h as be,a3 as Ie,bt as ye,n as Ae,s as Be,u as Te,r as Oe,bu as ue,bv as Me,Z as Re}from"./index-BhidSI-T.js";import{d as ze}from"./debounce-QrXJiNq4.js";import{f as De,a as Fe,b as He,c as Ne,d as Ve}from"./home-5szOIICc.js";import{b as We}from"./common-CM_bJnyV.js";import{u as we,i as Ee,a as je,b as Ge,c as qe,d as Pe,e as Ye,f as Ze,g as Qe,h as Ue,j as Je,k as Xe,l as Ke,m as et,n as tt,o as at,p as ot,q as st,r as nt,s as lt,L as te}from"./installCanvasRenderer-CyOrKSjT.js";import{i as rt}from"./install-CX03SWNg.js";import{_ as it}from"./NumberAnimation-C_011Pya.js";const ct={class:"loader-overlay"},dt=j({__name:"loading",props:{color:{default:"#1890ff"}},setup(o){const a=o;return(h,i)=>(v(),w("div",ct,[e("div",{class:"loader",style:J({"--c":`no-repeat linear-gradient(${a.color} 0 0)`})},null,4)]))}}),ut=R(dt,[["__scopeId","data-v-c4fc24aa"]]),ft=o=>(Y("data-v-4ea05f61"),o=o(),Z(),o),ht=["width","height"],_t=["fill","stroke","d"],vt=["stroke"],pt=ft(()=>e("path",{fill:"transparent",stroke:"{mergedColor[1]}",d:"M 5 20 L 5 10 L 12 3  L 60 3 L 68 10"},null,-1)),mt=["stroke","d"],gt={class:"dv-border-box-content"},bt=j({__name:"border-box-13",props:{color:{type:Array,default:()=>[]},backgroundColor:{type:String,default:"transparent"}},setup(o){const a=o,h=["#6586ec","#2cf7fe"],i=m(null),{width:c,height:l}=he(i,{width:0,height:0},{box:"border-box"}),d=Q(()=>ke(h,a.color));return(_,s)=>(v(),w("div",{class:"dv-border-box-13 dv-border-box",ref_key:"domRef",ref:i},[(v(),w("svg",{width:T(c),height:T(l),class:"dv-border-svg-container"},[e("path",{fill:o.backgroundColor,stroke:d.value[0],d:`
            M 5 20 L 5 10 L 12 3  L 60 3 L 68 10
            L ${T(c)-20} 10 L ${T(c)-5} 25
            L ${T(c)-5} ${T(l)-5} L 20 ${T(l)-5}
            L 5 ${T(l)-20} L 5 20
        `},null,8,_t),e("path",{fill:"transparent","stroke-width":"3","stroke-linecap":"round","stroke-dasharray":"10, 5",stroke:d.value[0],d:"M 16 9 L 61 9"},null,8,vt),pt,e("path",{fill:"transparent",stroke:d.value[1],d:`M ${T(c)-5} ${T(l)-30} L ${T(c)-5} ${T(l)-5} L ${T(c)-30} ${T(l)-5}`},null,8,mt)],8,ht)),e("div",gt,[oe(_.$slots,"default",{},void 0,!0)])],512))}}),yt=R(bt,[["__scopeId","data-v-4ea05f61"]]),$e=o=>(Y("data-v-beef5fe6"),o=o(),Z(),o),wt={key:0,class:"item_title"},$t=$e(()=>e("div",{class:"zuo"},null,-1)),xt={class:"title-inner"},Lt=$e(()=>e("div",{class:"you"},null,-1)),kt=j({__name:"item-wrap",props:{title:{default:""}},setup(o){return(a,h)=>{const i=yt;return v(),N(i,null,{default:H(()=>[a.title!==""?(v(),w("div",wt,[$t,e("span",xt,"   "+E(a.title)+"   ",1),Lt])):_e("",!0),e("div",{class:se(a.title!==""?"item_title_content":"item_title_content_def")},[oe(a.$slots,"default",{},void 0,!0)],2)]),_:3})}}}),Ct=R(kt,[["__scopeId","data-v-beef5fe6"]]),xe=o=>(Y("data-v-2dd4fe8a"),o=o(),Z(),o),St=["width","height"],It=["d"],At=xe(()=>e("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"1"},null,-1)),Bt=xe(()=>e("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"},null,-1)),Tt=[At,Bt],Ot=["fill"],Mt=["dur","path"],Rt=["fill","points"],zt=["stroke","href"],Dt=["stroke","href","mask"],Ft=["from","to","dur"],Ht={class:"border-box-content"},Nt={__name:"border-box-8",props:{color:{type:Array,default:()=>[]},dur:{type:Number,default:3},backgroundColor:{type:String,default:"transparent"},reverse:{type:Boolean,default:!1}},setup(o){const a=o,h=()=>"xxxx-xxxx-xxxx".replace(/[x]/g,()=>Math.floor(Math.random()*16).toString(16)),i=m(null),c=m(0),l=m(0),d=h(),_=`border-box-8-path-${d}`,s=`border-box-8-gradient-${d}`,t=`border-box-8-mask-${d}`,f=["#235fa7","#4fd2dd"],n=m([...f]),r=(b,L)=>{const $=[...b];return L.forEach((A,D)=>{A!==void 0&&($[D]=A)}),$},u=()=>{i.value&&(c.value=i.value.clientWidth,l.value=i.value.clientHeight)},p=Q(()=>(c.value+l.value-5)*2),g=Q(()=>a.reverse?`M 2.5, 2.5 L 2.5, ${l.value-2.5} L ${c.value-2.5}, ${l.value-2.5} L ${c.value-2.5}, 2.5 L 2.5, 2.5`:`M2.5, 2.5 L${c.value-2.5}, 2.5 L${c.value-2.5}, ${l.value-2.5} L2.5, ${l.value-2.5} L2.5, 2.5`);return G(()=>a.color,b=>{n.value=r(f,b)},{immediate:!0}),P(()=>{u(),window.addEventListener("resize",u)}),(b,L)=>(v(),w("div",{class:"dv-border-box-8",ref_key:"containerRef",ref:i},[(v(),w("svg",{class:"dv-border-svg-container",width:c.value,height:l.value},[e("defs",null,[e("path",{id:_,d:g.value,fill:"transparent"},null,8,It),e("radialGradient",{id:s,cx:"50%",cy:"50%",r:"50%"},Tt),e("mask",{id:t},[e("circle",{cx:"0",cy:"0",r:"150",fill:`url(#${s})`},[e("animateMotion",{dur:`${o.dur}s`,path:g.value,rotate:"auto",repeatCount:"indefinite"},null,8,Mt)],8,Ot)])]),e("polygon",{fill:o.backgroundColor,points:`5, 5 ${c.value-5}, 5 ${c.value-5} ${l.value-5} 5, ${l.value-5}`},null,8,Rt),e("use",{stroke:n.value[0],"stroke-width":"1",href:`#${_}`},null,8,zt),e("use",{stroke:n.value[1],"stroke-width":"3",href:`#${_}`,mask:`url(#${t})`},[e("animate",{attributeName:"stroke-dasharray",from:`0, ${p.value}`,to:`${p.value}, 0`,dur:`${o.dur}s`,repeatCount:"indefinite"},null,8,Ft)],8,Dt)],8,St)),e("div",Ht,[oe(b.$slots,"default",{},void 0,!0)])],512))}},Vt=R(Nt,[["__scopeId","data-v-2dd4fe8a"]]);we(rt);we([Ee,je,Ge,qe,Pe,Ye,Ze,Qe,Ue,Je,Xe,Ke,et,tt,at,ot,st,nt]);function K(o,a={}){const h=Ce(),i=ve(),c=Q(()=>i.darkMode),l=m(null),d={width:0,height:0},{width:_,height:s}=he(l,d);let t=null;const f=o(),{onRender:n=y=>{g()&&c.value},onUpdated:r=y=>{y.hideLoading()},onDestroy:u}=a;function p(){return l.value&&d.width>0&&d.height>0}function g(){return!!(l.value&&t)}async function b(y=()=>f){if(!g())return;const W=y(f,o);Object.assign(f,W),g()&&(t==null||t.clear()),t==null||t.setOption({...W,backgroundColor:"transparent"}),await(r==null?void 0:r(t))}async function L(y=()=>f){const W=y(f,o);t==null||t.setOption({...W,backgroundColor:"transparent"})}function $(y){t==null||t.setOption(y)}async function A(){if(!g()){const y=c.value?"dark":"light";await X(),t=lt(l.value,y),t.setOption({...f,backgroundColor:"transparent"}),await(n==null?void 0:n(t))}}function D(){t==null||t.resize()}async function C(){t&&(await(u==null?void 0:u(t)),t==null||t.dispose(),t=null)}async function V(){await C(),await A(),await(r==null?void 0:r(t))}async function S(y,W){if(d.width=y,d.height=W,!p()){await C();return}g()&&D(),await A()}h.run(()=>{G([_,s],([y,W])=>{S(y,W)}),G(c,()=>{V()})}),Se(()=>{C(),h.stop()});function U(){t==null||t.hideLoading()}return{domRef:l,updateOptions:b,updateOptionsAsync:L,setOptions:$,hideLoading:U}}const Wt=j({name:"LineChart",__name:"pieChart",props:{value:{type:Number,default:0}},setup(o){const a=o,h=[{max:70,color:"#4CAF50"},{max:90,color:"#FFB300"},{max:100,color:"#F44336"}],i=f=>(h.find(r=>f<=r.max)||h[h.length-1]).color,{domRef:c,updateOptionsAsync:l,hideLoading:d,updateOptions:_}=K(()=>({series:[{type:"pie",radius:["60%","78%"],avoidLabelOverlap:!1,clockWise:!0,animation:!0,itemStyle:{borderWidth:0,borderColor:"transparent",color:"",shadowColor:"",shadowBlur:0},hoverAnimation:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:[{value:0,label:{formatter:function(f){return f.value+"%"},position:"center",show:!0,textStyle:{fontSize:q(14),fontWeight:"bold",color:""}},itemStyle:{borderRadius:0}},{value:0,name:"invisible",itemStyle:{color:"#ccc",borderWidth:0,borderColor:"transparent"}}]}]}));async function s(){l(f=>{d(),f.series[0].data[0].value=a.value,f.series[0].data[1].value=100-a.value;const n=i(a.value);return f.series[0].itemStyle.color=n,f.series[0].itemStyle.shadowColor=n,f.series[0].label.color=n,f})}G(()=>a.value,async f=>{s()});async function t(){s()}return t(),(f,n)=>(v(),w("div",{ref_key:"domRef",ref:c,class:"chart"},null,512))}}),ae=R(Wt,[["__scopeId","data-v-59d0d00b"]]),z=o=>(Y("data-v-72cfccb9"),o=o(),Z(),o),Et={class:"list"},jt={class:"item"},Gt={class:"item_info"},qt={class:"item_info_text"},Pt=z(()=>e("path",{fill:"currentColor",d:"M34 21.08L30.86 8.43A2 2 0 0 0 28.94 7H7.06a2 2 0 0 0-1.93 1.47L2 21.08a1 1 0 0 0 0 .24V29a2 2 0 0 0 2 2h28a2 2 0 0 0 2-2v-7.69a1 1 0 0 0 0-.23M4 29v-7.56L7.06 9h21.87L32 21.44V29Z",class:"clr-i-outline clr-i-outline-path-1"},null,-1)),Yt=z(()=>e("path",{fill:"currentColor",d:"M6 20h24v2H6z",class:"clr-i-outline clr-i-outline-path-2"},null,-1)),Zt=z(()=>e("path",{fill:"currentColor",d:"M26 24h4v2h-4z",class:"clr-i-outline clr-i-outline-path-3"},null,-1)),Qt=z(()=>e("path",{fill:"none",d:"M0 0h36v36H0z"},null,-1)),Ut=[Pt,Yt,Zt,Qt],Jt=z(()=>e("div",{class:"title"},"磁盘",-1)),Xt={class:"item"},Kt={class:"item_info"},ea={class:"item_info_text"},ta=pe('<g fill="none" data-v-72cfccb9><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 28h38v14H5zM5 6h38v14H5z" data-v-72cfccb9></path><rect width="4" height="4" x="11" y="11" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="11" y="33" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="19" y="11" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="19" y="33" fill="currentColor" rx="2" data-v-72cfccb9></rect><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M31 13h4m-4 22h4" data-v-72cfccb9></path></g>',1),aa=[ta],oa=z(()=>e("div",{class:"title"},"内存",-1)),sa={class:"item brBom"},na={class:"item_info"},la={class:"item_info_text"},ra=z(()=>e("path",{fill:"currentColor",d:"M15 9H9v6h6zm-2 4h-2v-2h2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2zm-4 6H7V7h10z"},null,-1)),ia=[ra],ca=z(()=>e("div",{class:"title"},"CPU",-1)),da={class:"item_Cardinfo"},ua=z(()=>e("div",{class:"title"},"日志接收总数",-1)),fa={class:"value"},ha={class:"logTotalClass"},_a=z(()=>e("span",{class:"unit"},"条",-1)),va={class:"item_Cardinfo"},pa=z(()=>e("div",{class:"title"},"日志源资产数",-1)),ma={class:"value"},ga={class:"logTotalClass"},ba=z(()=>e("span",{class:"unit"},"条",-1)),ya=j({__name:"left-top",props:{data:{type:Object,default:()=>({})},logInfo:{type:Object,default:()=>({logTotal:void 0,logSource:void 0})},key:{type:Number,default:""}},setup(o){const a=o,h=[{max:70,color:"#4CAF50"},{max:90,color:"#FFB300"},{max:100,color:"#F44336"}],i=c=>{const l=h.find(d=>c<=d.max);return l?l.color:"#CCCCCC"};return(c,l)=>{var s,t,f,n,r,u;const d=it,_=Vt;return v(),w("div",Et,[e("div",jt,[e("div",Gt,[e("div",qt,[(v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",style:J({color:i((s=a.data.disk)==null?void 0:s.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 36 36"},Ut,4)),Jt]),(v(),N(ae,{class:"pieChart",key:a.key,value:(t=a.data.disk)==null?void 0:t.replace("%","")},null,8,["value"]))])]),e("div",Xt,[e("div",Kt,[e("div",ea,[(v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",style:J({color:i((f=a.data.mem)==null?void 0:f.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 48 48"},aa,4)),oa]),(v(),N(ae,{class:"pieChart",key:a.key,value:(n=a.data.mem)==null?void 0:n.replace("%","")},null,8,["value"]))])]),e("div",sa,[e("div",na,[e("div",la,[(v(),w("svg",{xmlns:"http://www.w3.org/2000/svg",style:J({color:i((r=a.data.cpu)==null?void 0:r.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 24 24"},ia,4)),ca]),(v(),N(ae,{class:"pieChart",key:a.key,value:(u=a.data.cpu)==null?void 0:u.replace("%","")},null,8,["value"]))])]),O(_,{class:"itemCard",dur:60},{default:H(()=>[e("div",da,[ua,e("div",fa,[e("span",ha,[O(d,{ref:"numberAnimationInstRef",from:0,to:a.logInfo.logTotal||0},null,8,["to"])]),_a])])]),_:1}),O(_,{class:"itemCard",dur:60},{default:H(()=>[e("div",va,[pa,e("div",ma,[e("span",ga,[O(d,{ref:"numberAnimationInstRef",from:0,to:a.logInfo.logSource||0},null,8,["to"])]),ba])])]),_:1})])}}}),wa=R(ya,[["__scopeId","data-v-72cfccb9"]]),$a="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%3e%3cpath%20fill='%23fff'%20d='M2.5%2012c-.13%200-.25-.05-.35-.14l-2-1.93A.55.55%200%200%201%200%209.57V2.43c0-.13.06-.26.15-.36l2-1.93c.15-.14.36-.18.55-.1c.18.08.3.26.3.46v11c0%20.2-.12.38-.3.46c-.07.03-.13.04-.2.04m7-3.5c-.06%200-.13-.01-.19-.04A.5.5%200%200%201%209%208l-.01-4.06c0-.2.12-.39.31-.46c.19-.08.4-.03.54.11l1.67%201.7c.38.39.38%201.02-.01%201.41L9.85%208.35a.47.47%200%200%201-.35.15'%20/%3e%3cpath%20fill='none'%20stroke='%23fff'%20stroke-linecap='round'%20d='M2.5%202.5H6c.28%200%20.5.22.5.5v1m-4%205.5H6c.28%200%20.5-.22.5-.5V8M11%206H5'%20stroke-width='1'%20/%3e%3c/svg%3e",xa=o=>(Y("data-v-6581f397"),o=o(),Z(),o),La={class:"inner_right"},ka=xa(()=>e("div",{class:"dibu"},null,-1)),Ca={class:"info"},Sa={class:"alarmName"},Ia={class:"info_bottom"},Aa={class:"alarmLevel"},Ba={class:"time"},Ta=3e3,Oa=3,Ma={__name:"left-center",props:{data:{type:Array,default:()=>[]}},setup(o){const a=o,h=[{label:"一般",color:"#0091FF",value:0},{label:"低级",color:"#ffd600",value:1},{label:"中级",color:"#ffab00",value:2},{label:"高级",color:"#ff6d00",value:3},{label:"严重",color:"#dd2c00",value:4}],i=p=>h.find(g=>g.value===p)||h[0],c=m(!0),l=Q(()=>c.value?[...a.data,...a.data]:a.data),d=m(!1),_=m(),s=m();let t=null;const f=()=>{d.value=!0,c.value=!1,clearInterval(t)},n=()=>{d.value=!1,c.value=!0,X(()=>{r()})},r=()=>{clearInterval(t),t=setInterval(()=>{var A;if(d.value||!c.value)return;const p=_.value,g=s.value;if(!p||!g)return;const b=((A=g.children[0])==null?void 0:A.offsetHeight)||0,L=g.scrollHeight/2,$=p.scrollTop+b*Oa;$>=L?u($,()=>{p.scrollTop=$-L}):u($)},Ta)},u=(p,g)=>{const b=_.value,L=800,$=b.scrollTop,A=p-$,D=performance.now(),C=S=>S<.5?2*S*S:-1+(4-2*S)*S,V=S=>{const U=S-D,y=Math.min(U/L,1);b.scrollTop=$+A*C(y),y<1?requestAnimationFrame(V):g&&g()};requestAnimationFrame(V)};return P(()=>{X(()=>{r()})}),me(()=>{clearInterval(t)}),(p,g)=>(v(),w("div",{class:se(["left_boottom scroll-view",{"show-scrollbar":d.value}]),ref_key:"scrollViewRef",ref:_,onMouseenter:f,onMouseleave:n},[e("div",{ref_key:"listRef",ref:s,class:"left_boottom_list"},[(v(!0),w(ne,null,ge(l.value,(b,L)=>(v(),w("div",{class:"left_boottom_item",key:L},[e("div",La,[ka,e("div",Ca,[e("div",Sa,"告警名称："+E(b.aname),1),e("div",Ia,[e("div",Aa,[be(" 告警等级： "),e("span",{style:J({color:i(b.alevel).color,border:"1px solid "+i(b.alevel).color,padding:"0 5px",borderRadius:"5px"})},E(i(b.alevel).label),5)]),e("div",Ba,"时间："+E(b.dbtime),1)])])])]))),128))],512)],34))}},Ra=R(Ma,[["__scopeId","data-v-6581f397"]]),za=j({name:"LineChart",__name:"loglineChart",props:{data:{type:Array,default:[]}},setup(o){const a=o,{domRef:h,updateOptions:i,updateOptionsAsync:c,hideLoading:l}=K(()=>({xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:q(12)}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.2)"}},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:q(12)}},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"},valueFormatter:function(s){return(s+""!="undefined"?s:"--")+"条"}},grid:{left:"5%",right:"5%",bottom:"0%",containLabel:!0},dataZoom:[{type:"inside",start:0,show:!1,end:100}],series:[{color:"rgb(9, 202, 243)",type:"line",lineStyle:{width:1,normal:{color:"rgb(9, 202, 243)",shadowBlur:3,shadowColor:"rgba(9, 202, 243,0.5)",shadowOffsetY:8}},areaStyle:{color:new te(0,0,0,1,[{offset:0,color:"rgba(9, 202, 243,0.2)"},{offset:1,color:"rgba(9, 202, 243,0)"}],!1),shadowColor:"rgba(9, 202, 243,0.5)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0}]}));async function d(){await new Promise(s=>{setTimeout(s,1e3)}),i(s=>(l(),a.data&&(s.xAxis.data=a.data.map(t=>t.date),s.series[0].data=a.data.map(t=>t.dailycount)),s))}async function _(){d()}return G(()=>a.data,()=>{c(s=>(l(),a.data&&(s.xAxis.data=a.data.map(t=>t.date),s.series[0].data=a.data.map(t=>[t.date,t.dailycount])),s))}),_(),(s,t)=>(v(),w("div",{ref_key:"domRef",ref:h,class:"chart"},null,512))}}),Da=R(za,[["__scopeId","data-v-3a13ec33"]]),Fa=j({name:"LineChart",__name:"auditlineChart",props:{data:{type:Array,default:[]}},setup(o){const a=o,{domRef:h,updateOptions:i,updateOptionsAsync:c,hideLoading:l}=K(()=>({xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:q(12)}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.2)"}},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:q(12)}},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"},valueFormatter:function(s){return(s+""!="undefined"?s:"--")+"条"}},grid:{left:"5%",right:"5%",bottom:"0%",containLabel:!0},dataZoom:[{type:"inside",start:0,show:!1,end:100}],series:[{color:"rgb(9, 202, 243)",type:"line",lineStyle:{width:1,normal:{color:"rgb(9, 202, 243)",shadowBlur:3,shadowColor:"rgba(9, 202, 243,0.5)",shadowOffsetY:8}},areaStyle:{color:new te(0,0,0,1,[{offset:0,color:"rgba(9, 202, 243,0.2)"},{offset:1,color:"rgba(9, 202, 243,0)"}],!1),shadowColor:"rgba(9, 202, 243,0.5)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0}]}));async function d(){await new Promise(s=>{setTimeout(s,1e3)}),i(s=>(l(),a.data&&(s.xAxis.data=a.data.map(t=>t.logname),s.series[0].data=a.data.map(t=>[t.logname,t.count])),s))}async function _(){d()}return G(()=>a.data,()=>{c(s=>(a.data&&(s.xAxis.data=a.data.map(t=>t.logname),s.series[0].data=a.data.map(t=>[t.logname,t.count])),s))}),_(),(s,t)=>(v(),w("div",{ref_key:"domRef",ref:h,class:"chart"},null,512))}}),Ha=R(Fa,[["__scopeId","data-v-b192f843"]]),Na=j({name:"LineChart",__name:"assetsType",props:{data:{type:Object,default:()=>({})}},setup(o){const a=o;G(()=>a.data,async n=>{s()});const h=Ie(),i=m(null),{domRef:c,updateOptionsAsync:l,hideLoading:d,updateOptions:_}=K(()=>({backgroundColor:"#0f1c3f",tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",borderWidth:1,backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"}},legend:{show:!1},grid:{left:"5%",right:"5%",bottom:"2%",top:"5%",containLabel:!0},series:[{type:"pie",selectedMode:"single",radius:[0,"30%"],label:{position:"inner",fontSize:q(14),color:"#f2f3f5",fontWeight:"bold"},labelLine:{show:!1},itemStyle:{shadowBlur:8,shadowColor:"rgba(255, 255, 255, 0.2)",borderRadius:6},data:[]},{type:"pie",radius:["45%","60%"],labelLine:{length:30,lineStyle:{color:"#aaa"}},label:{color:"#fff",fontSize:q(14),fontWeight:"bold"},itemStyle:{borderRadius:6,shadowBlur:8,shadowOffsetX:0,shadowColor:"rgba(255, 255, 255, 0.2)",color:n=>{const r=[["#00c6ff","#0072ff"],["#f77062","#fe5196"],["#00f2fe","#4facfe"],["#43e97b","#38f9d7"],["#fa709a","#fee140"],["#7b4397","#dc2430"],["#1f4037","#99f2c8"]],u=r[n.dataIndex%r.length];return new te(0,0,1,1,[{offset:0,color:u[0]},{offset:1,color:u[1]}])}},data:[]}],animationDuration:1e3,animationEasing:"cubicOut"}));async function s(){l(n=>{if(d(),JSON.stringify(a.data)!=="{}"){n.series[0].data=Object.keys(a.data).map(u=>({name:u,value:Object.values(a.data[u]).reduce((p,g)=>p+g,0)}));const r=[];Object.keys(a.data).map(u=>a.data[u]).forEach(u=>{for(let p in u)u.hasOwnProperty(p)&&r.push({name:p,value:u[p]})}),n.series[0].radius=["0%","30%"],n.series[1].radius=["45%","60%"],n.series[1].data=r}else n.series[0].radius=["0%","0%"],n.series[1].radius=["0%","0%"];return n})}function t(){_((n,r)=>(r(),n))}async function f(){s()}return G(()=>h.locale,()=>{t()}),f(),P(()=>{i.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),ye(()=>{i.value!==null&&(clearInterval(i.value),i.value=null)}),(n,r)=>(v(),w("div",{ref_key:"domRef",ref:c,class:"chart"},null,512))}}),Va=R(Na,[["__scopeId","data-v-768935cd"]]),Wa=o=>(Y("data-v-b6e6d0c5"),o=o(),Z(),o),Ea=["aria-label"],ja={class:"inner_right"},Ga=Wa(()=>e("div",{class:"dibu"},null,-1)),qa={class:"info"},Pa={class:"info_left"},Ya={class:"logName"},Za={class:"scname"},Qa={class:"status"},Ua=3e3,Ja=3,Xa={__name:"right-top",props:{data:{type:Array,default:()=>[]}},setup(o){const a=o,h=m(!1),i=m(),c=m();let l=null;const d=m(!0),_=Q(()=>d.value?[...a.data,...a.data]:a.data),s=()=>{h.value=!0,d.value=!1,clearInterval(l)},t=()=>{h.value=!1,d.value=!0,X(()=>{f()})},f=()=>{clearInterval(l),a.data.length!==0&&(l=setInterval(()=>{var L;if(h.value||!d.value)return;const r=i.value,u=c.value;if(!r||!u)return;const p=((L=u.children[0])==null?void 0:L.offsetHeight)||0,g=u.scrollHeight/2,b=r.scrollTop+p*Ja;b>=g?n(b,()=>{r.scrollTop=b-g}):n(b)},Ua))},n=(r,u)=>{const p=i.value,g=800,b=p.scrollTop,L=r-b,$=performance.now(),A=C=>C<.5?2*C*C:-1+(4-2*C)*C,D=C=>{const V=C-$,S=Math.min(V/g,1);p.scrollTop=b+L*A(S),S<1?requestAnimationFrame(D):u&&u()};requestAnimationFrame(D)};return P(()=>{X(()=>{f()})}),me(()=>{clearInterval(l)}),(r,u)=>(v(),w("div",{class:se(["left_boottom scroll-view",{"show-scrollbar":h.value}]),ref_key:"scrollViewRef",ref:i,onMouseenter:s,onMouseleave:t},[e("div",{ref_key:"listRef",ref:c,class:"left_boottom_list"},[(v(!0),w(ne,null,ge(_.value,(p,g)=>(v(),w("div",{class:"left_boottom_item",key:g,"aria-label":`项目${g%a.data.length+1}: ${p.type}, 状态: ${p.enable===0?"正常":"异常"}`,tabindex:"0"},[e("div",ja,[Ga,e("div",qa,[e("div",Pa,[e("div",Ya,E(p.type),1),e("div",Za,E(p.scname),1)]),e("div",Qa,E(p.enable==0?"🟢":"🔴"),1)])])],8,Ea))),128))],512)],34))}},Ka=R(Xa,[["__scopeId","data-v-b6e6d0c5"]]),eo=j({name:"LineChart",__name:"barChart",props:Ae({data:{type:Array,default:[]}},{data:{required:!0},dataModifiers:{}}),emits:["update:data"],setup(o){const a=o,h=Be(o,"data"),i=m(null),c=Date.now();new Date(c).setHours(23,59,59,999);const{domRef:l,updateOptions:d,updateOptionsAsync:_,hideLoading:s}=K(()=>({tooltip:{trigger:"item",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",borderWidth:2,textStyle:{color:"#FFF"},valueFormatter:function(n){return(n+""!="undefined"?n:"--")+"条"}},xAxis:{data:[],axisLine:{lineStyle:{color:"#B4B4B4"}},axisTick:{show:!1},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:q(12)}},yAxis:[{splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.3)"}},axisLine:{lineStyle:{color:"#B4B4B4"}},axisLabel:{formatter:"{value}",fontSize:q(12),color:"#B4B4B4",fontWeight:500}}],grid:{left:"3%",right:"10%",bottom:"3%",top:"5%",containLabel:!0},series:[{type:"bar",barMaxWidth:30,itemStyle:{borderRadius:10,color:new te(0,0,0,1,[{offset:0,color:"#956FD4"},{offset:1,color:"#3EACE5"}])},data:[]}]}));async function t(){await new Promise(n=>{setTimeout(n,1e3)}),d(n=>(s(),h.value&&(n.xAxis.data=a.data.map(r=>r.logname),n.series[0].data=a.data.map(r=>[r.logname,r.count])),n))}G(()=>h.value,n=>{_(r=>(h.value&&(r.xAxis.data=a.data.map(u=>u.logname),r.series[0].data=a.data.map(u=>[u.logname,u.count])),r))});async function f(){await t()}return P(()=>{l.value=i.value}),f(),(n,r)=>(v(),w("div",{ref_key:"chartDom",ref:i,class:"chart"},null,512))}}),fe=R(eo,[["__scopeId","data-v-4a2adcfd"]]),to=o=>(Y("data-v-ec050911"),o=o(),Z(),o),ao={class:"content_wrap"},oo={class:"d-flex jc-center title_wrap"},so=pe('<div class="zuojuxing" data-v-ec050911></div><div class="youjuxing" data-v-ec050911></div><div class="guang" data-v-ec050911></div><div class="d-flex jc-center" data-v-ec050911><div class="title" data-v-ec050911><span class="title-text" data-v-ec050911>日志审计可视化</span></div></div>',4),no={class:"top_Info"},lo=to(()=>e("div",{class:"left"},null,-1)),ro={class:"right"},io={class:"setting_icon"},co=["src"],uo={class:"index-box"},fo={class:"content_left"},ho={class:"content_center"},_o={class:"content_right"},vo=j({name:"bigscreen",__name:"index",setup(o){const a=Te(),h=ve(),i=Oe({dateDay:"",dateYear:"",dateWeek:"",timing:null}),c=["周日","周一","周二","周三","周四","周五","周六"];(()=>{i.timing=setInterval(()=>{i.dateDay=ue().format("YYYY-MM-DD hh : mm : ss"),i.dateWeek=c[ue().day()]},1e3)})();const d=[{label:"近一天",value:0},{label:"近一周",value:1},{label:"近一月",value:2},{label:"近半年",value:3},{label:"近一年",value:4}],_=m(2),s=m(),t=async()=>{const{data:x,error:B}=await We({pageSize:20});B||(s.value=x)},f=m(),n=async()=>{const{data:x,error:B}=await De({dateType:_.value});B||(f.value=x)},r=m(),u=m(),p=m(),g=m(),b=m(),L=async()=>{const{data:x,error:B}=await Fe({dateType:_.value,lsid:p.value,ctype:b.value});B||(u.value=Number(x.total),_.value==3||_.value==4?r.value=x.data.map(M=>(M.date=M.dateStr,M)).sort((M,k)=>{let F=new Date(M.date),I=new Date(k.date);return F-I}):r.value=x.data.sort((M,k)=>{let F=new Date(M.date),I=new Date(k.date);return F-I}))},$=m(),A=async()=>{const{data:x,error:B}=await He();if(!B){$.value=x,$.value.logSoursceList.sort((k,F)=>k.enable-F.enable);const M=new Set;x.logSoursceList.forEach(k=>{const F=`${k.logsoudev},${k.type}`;M.add(F)}),g.value=Array.from(M).map(k=>{const[F,I]=k.split(",");return{logsoudev:parseInt(F,10),type:I}})}},D=m(),C=async()=>{const{data:x,error:B}=await Ne();B||(D.value=x)},V=m(),S=async()=>{const{data:x,error:B}=await Ve({dateType:_.value});B||(V.value=x,console.log(V.value,"securityNumsList.value"))},U=()=>{var x;(x=window.$dialog)==null||x.info({title:"退出登录",content:"确定要退出登录吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{const{data:B,error:M}=await Me();M||(a.clearInfo(),window.location.reload())}})},y=m(0),W=ze(()=>{y.value++},500),le=()=>{W()},re=m(),ie=m(),ee=m(!1);P(async()=>{try{ee.value=!0,t(),n(),L(),A(),C(),S(),setTimeout(()=>{ee.value=!1},2e3)}catch{ee.value=!1}re.value=setInterval(()=>{C(),n(),S()},1e3*1*60),ie.value=setInterval(()=>{A(),L()},1e3*5)});const Le=x=>{_.value=x,L(),n(),S()};return P(()=>{h.themeScheme!="dark"&&h.toggleThemeScheme(),window.addEventListener("resize",le)}),ye(()=>{clearInterval(re.value),clearInterval(ie.value),window.removeEventListener("resize",le)}),(x,B)=>{const M=Re,k=Ct,F=ut;return v(),w(ne,null,[e("div",ao,[e("div",oo,[so,e("div",no,[lo,e("div",ro,[O(M,{size:"small",class:"select",value:_.value,"onUpdate:value":[B[0]||(B[0]=I=>_.value=I),Le],options:d,style:{width:"100px"}},null,8,["value"]),be(" "+E(i.dateYear)+" "+E(i.dateWeek)+" "+E(i.dateDay)+" ",1),e("div",io,[e("img",{src:T($a),alt:"",onClick:U},null,8,co)])])])]),e("div",uo,[e("div",fo,[O(k,{class:"content_left-top",title:"系统信息"},{default:H(()=>{var I,ce,de;return[(v(),N(wa,{data:(I=$.value)==null?void 0:I.systemStatus,key:y.value,logInfo:{logTotal:u.value,logSource:(de=(ce=$.value)==null?void 0:ce.logSourceDevAsset)==null?void 0:de.aunum}},null,8,["data","logInfo"]))]}),_:1}),O(k,{class:"content_left-center",title:"系统告警"},{default:H(()=>[O(Ra,{data:s.value},null,8,["data"])]),_:1}),O(k,{class:"content_left-bottom",title:"日志源日志数量"},{default:H(()=>[(v(),N(fe,{data:D.value,key:y.value},null,8,["data"]))]),_:1})]),e("div",ho,[O(k,{title:"日志源资产类型",class:"content_center-top"},{default:H(()=>{var I;return[(v(),N(Va,{data:(I=$.value)==null?void 0:I.logSoursceAssetType,key:y.value},null,8,["data"]))]}),_:1}),O(k,{title:"日志采集趋势",class:"content_center-bottom"},{default:H(()=>[(v(),N(Da,{data:r.value,key:y.value},null,8,["data"]))]),_:1})]),e("div",_o,[O(k,{title:"日志源接收状态",class:"content_right-top"},{default:H(()=>{var I;return[O(Ka,{data:(I=$.value)==null?void 0:I.logSoursceList},null,8,["data"])]}),_:1}),O(k,{class:"content_right-center",title:"审计告警数量趋势"},{default:H(()=>[(v(),N(Ha,{data:f.value,key:y.value},null,8,["data"]))]),_:1}),O(k,{class:"content_right-bottom",title:"安全事件类别数量"},{default:H(()=>[(v(),N(fe,{data:V.value,key:y.value},null,8,["data"]))]),_:1})])])]),ee.value?(v(),N(F,{key:0})):_e("",!0)],64)}}}),xo=R(vo,[["__scopeId","data-v-ec050911"]]);export{xo as default};
