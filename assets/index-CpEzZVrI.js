import{_ as _e}from"./round-add-9JBusyZ3.js";import{aY as J,d as Z,ay as Q,z as ee,D as re,A as ie,a as ve,aw as ne,s as q,ax as X,d8 as ge,c as I,o as b,w as a,f as n,e as d,a3 as ye,b as T,G as F,M as ae,N as ce,h as t,H as M,aJ as de,aC as be,d9 as we,t as v,B as D,g as C,aF as he,J as oe,$ as V,a4 as xe,aK as ke,W as ue,X as Ce,aL as $e,F as Y,bp as De,aP as E,b4 as Ne,I as H,L as pe,da as Se,aA as ze,b0 as je,br as Ue,a2 as me,aM as Te,b8 as Le,aG as Ie,aN as Pe,i as Re,aO as te,c_ as Fe,aD as Me,aV as We}from"./index-DTejdFLI.js";import{u as Be,a as Oe}from"./table-5sK02S3E.js";import{_ as Ee,a as qe}from"./text-BDphtrw0.js";import{N as fe}from"./Popconfirm-BmNh5CYH.js";import{_ as Ge}from"./round-search-CcVdI1HR.js";import{u as Ae}from"./usePageData-BjjY6agq.js";import{_ as Ke}from"./Grid-U7VbogCl.js";import{_ as Ve}from"./FormItemGridItem-OdWiLkIi.js";function Je(f){return J({url:"/projectWeek/getPage.do",method:"get",params:f})}function He(f){return J({url:"/projectWeek/insert.do",method:"post",data:f})}function Xe(f){return J({url:"/projectWeek/update.do",method:"put",data:f})}function Ye(f){return J({url:"/projectWeek/delete.do",method:"delete",params:{arrIds:f}})}function Qe(f){return J({url:"/projectWeekComment/getPage.do",method:"get",params:f})}function Ze(f){return J({url:"/projectWeekComment/insert.do",method:"post",data:f})}function et(f){return J({url:"/projectWeekComment/delete.do",method:"delete",params:{arrIds:f}})}const tt={class:"avatar-wrapper"},nt={key:0},at={class:"mr-10px"},ot={key:1,class:"flex items-center w-300px"},lt={key:0},st={style:{display:"flex","justify-content":"space-between"}},rt={class:"mt-10px"},it=Z({name:"OperateDrawer",__name:"operate-drawer",props:Q({operateType:{},rowData:{},pid:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Q(["submitted"],["update:visible"]),setup(f,{emit:G}){ee();const l=G,N=f,e=re($());function $(){return{id:"",content1:"",content2:"",content3:"",content4:"",content5:"",content6:"",content7:"",content8:"",charctras:"",file1:"",file2:""}}const W={content1:{required:!0,message:"请输入",trigger:"blur"}};async function S(){Object.assign(e,$()),c.value=[{name:"",url:"",file:void 0},{name:"",url:"",file:void 0}],N.operateType==="edit"&&N.rowData&&Object.assign(e,N.rowData)}const{formRef:x,validate:A,restoreValidation:P}=ie(),k=ve(()=>({add:"新增项目周报",edit:"修改项目周报"})[N.operateType]),w=ne(f,"visible"),L=()=>{w.value=!1},z=q(!1),y=async()=>{var u,s,h,U,r;if(!z.value)try{if(await A(),z.value=!0,e.charctras<30)return(u=window.$message)==null?void 0:u.warning("字数不能少于30字,请继续填写");let p=!0;if(c.value.forEach((_,g)=>{var i,le;const B=`file${g+1}`,K=_.name||"",O=((i=_.url)==null?void 0:i.split("?")[1])||((le=_.file)==null?void 0:le.name);(K&&!O||!K&&O)&&(p=!1),_.status==="done"&&(e[B]=K,e[B]=O)}),!p){(h=(s=window.$message)==null?void 0:s.error)==null||h.call(s,"文件名称和文件地址必须同时存在，不能只填一个");return}o.value=!0;for(let _=0;_<c.value.length;_++){m.value=_;const g=c.value[_];if(g.file){g.indexText=`${_+1}/${c.value.length}`,g.progress=0,g.status="uploading";try{g.url=await ke(g.file.file,g.file.name,"",B=>{g.progress=B}),g.progress=100,g.status="done"}catch{g.status="error"}}}if(c.value.forEach((_,g)=>{_.status==="done"&&(e[`file${g+1}`]=_.url||"")}),o.value=!1,N.operateType==="edit"){const{data:_,error:g}=await Xe([{...e}]);g||((U=window.$message)==null||U.success("修改成功"),l("submitted"),L())}else{const{data:_,error:g}=await He([{pid:e.pid,content1:e.content1,content2:e.content2,content3:e.content3,content4:e.content4,content5:e.content5,content6:e.content6,content7:e.content7,content8:e.content8,file1:e.file1,file2:e.file2,charctras:e.charctras}]);g||((r=window.$message)==null||r.success("添加成功"),l("submitted"),L())}}catch{}finally{z.value=!1}};X(w,()=>{w.value&&(S(),setTimeout(()=>{const u=document.querySelector(".n-scrollbar-content");u==null||u.scrollTo(0,0)},300),P())});const o=q(!1),m=q(0),c=q([{name:"",url:"",file:void 0},{name:"",url:"",file:void 0}]);async function R({file:u},s){s=="file1"?(c.value[0].file=u,c.value[0].name=u.name):(c.value[1].file=u,c.value[1].name=u.name)}async function j(u,s){var h,U;return s=="file1"&&!["image/jpeg","image/png","image/jpg","image/x-icon"].includes(u.file.file.type)?((h=window.$message)==null||h.destroyAll(),(U=window.$message)==null||U.error("只能上传 JPG/PNG/JPEG/ICO 格式的图片"),!1):!0}return X(()=>[e.content1,e.content2,e.content3,e.content4,e.content5,e.content6,e.content7,e.content8],()=>{e.charctras=ge(e.content1+e.content2+e.content3+e.content4+e.content5+e.content6+e.content7+e.content8)},{immediate:!0}),(u,s)=>{const h=ce,U=de,r=be,p=we,_=ae,g=he,B=ye,K=oe,O=xe;return b(),I(O,{show:w.value,"onUpdate:show":s[12]||(s[12]=i=>w.value=i),title:k.value,preset:"card",class:"w-800px","mask-closable":!1,draggable:!0},{footer:a(()=>[n(K,{justify:"end"},{default:a(()=>[n(t(D),{size:"small",class:"mt-16px",onClick:L},{default:a(()=>[C(v(t(V)("common.cancel")),1)]),_:1}),n(t(D),{type:"primary",size:"small",class:"mt-16px",loading:z.value,onClick:y},{default:a(()=>[C(v(t(V)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:a(()=>[n(B,{style:{height:"70vh","padding-right":"10px"}},{default:a(()=>[n(_,{ref_key:"formRef",ref:x,model:e,rules:W},{default:a(()=>[n(h,{label:"本周完成",path:"content1"},{default:a(()=>[n(t(M),{clearable:"",type:"textarea",rows:3,value:e.content1,"onUpdate:value":s[0]||(s[0]=i=>e.content1=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"本周对你帮助最大的人，具体描述一下对你的帮助",path:"content2"},{default:a(()=>[n(t(M),{clearable:"",type:"textarea",rows:2,value:e.content2,"onUpdate:value":s[1]||(s[1]=i=>e.content2=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"未完成项目",path:"content3"},{default:a(()=>[n(t(M),{clearable:"",type:"textarea",rows:2,value:e.content3,"onUpdate:value":s[2]||(s[2]=i=>e.content3=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"下周计划",path:"content4"},{default:a(()=>[n(t(M),{clearable:"",type:"textarea",rows:2,value:e.content4,"onUpdate:value":s[3]||(s[3]=i=>e.content4=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"需协调与帮助",path:"content5"},{default:a(()=>[n(t(M),{clearable:"",type:"textarea",rows:2,value:e.content5,"onUpdate:value":s[4]||(s[4]=i=>e.content5=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"本周做的比较好的",path:"content6"},{default:a(()=>[n(t(M),{clearable:"",type:"textarea",rows:2,value:e.content6,"onUpdate:value":s[5]||(s[5]=i=>e.content6=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"自己哪些需要提升",path:"content7"},{default:a(()=>[n(t(M),{clearable:"",type:"textarea",rows:2,value:e.content7,"onUpdate:value":s[6]||(s[6]=i=>e.content7=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"下个阶段的目标，如果达成目标你想要什么(如:团建、旅游、吃饭等):",path:"content8"},{default:a(()=>[n(t(M),{clearable:"",type:"textarea",rows:2,value:e.content8,"onUpdate:value":s[7]||(s[7]=i=>e.content8=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"图片:",path:"file1"},{default:a(()=>[d("div",tt,[e.file1?(b(),I(U,{key:0,src:e.file1,class:"avatar-img","preview-disabled":""},null,8,["src"])):(b(),I(r,{key:1,ref:"uploadRef",action:"#","list-type":"image-card","default-upload":!0,max:1,"custom-request":i=>R(i,"file1"),onBeforeUpload:s[8]||(s[8]=i=>j(i,"file1"))},null,8,["custom-request"])),e.file1?(b(),T("div",{key:2,class:"avatar-overlay",onClick:s[9]||(s[9]=i=>e.file1="")},[n(p,{class:"icon-close"})])):F("",!0)])]),_:1}),n(h,{label:"附件:",path:"file2"},{default:a(()=>[e.file2||c.value[1].name?(b(),T("div",nt,[d("span",at,v(e.file2.split("?")[1]||c.value[1].name),1),n(t(D),{text:"",type:"error",onClick:s[10]||(s[10]=i=>{e.file2="",c.value[1].file=void 0})},{default:a(()=>s[13]||(s[13]=[C("删除")])),_:1,__:[13]})])):(b(),T("div",ot,[n(r,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":i=>R(i,"file2"),onBeforeUpload:s[11]||(s[11]=i=>j(i,"file2"))},{default:a(()=>[n(t(D),null,{default:a(()=>s[14]||(s[14]=[C(v("上传文件"))])),_:1,__:[14]})]),_:1},8,["custom-request"])]))]),_:1})]),_:1},8,["model"]),c.value[m.value]&&o.value?(b(),T("div",lt,[d("div",st,[d("span",null,v(c.value[m.value].filename||c.value[m.value].name),1),d("span",null,v(c.value[m.value].indexText),1)]),n(g,{percentage:c.value[m.value].progress,status:c.value[m.value].status==="error"?"error":"success","show-indicator":""},null,8,["percentage","status"])])):F("",!0)]),_:1}),d("div",rt,"字数："+v(e.charctras),1)]),_:1},8,["show","title"])}}}),ct=ue(it,[["__scopeId","data-v-91cda8c6"]]),dt={key:1,class:"mt-3 mb-3 text-gray-700 preview-text"},ut={key:0,class:"mt-3 mb-3 text-gray-700 preview-text"},pt={class:"font-size-12px c-#a19f9d my-5px"},mt={key:0},ft={class:"mt-4 border-t pt-3"},_t={class:"flex items-start gap-2 mb-3"},vt={class:"ml-2 flex-1"},gt={class:"flex items-center"},yt={class:"font-medium font-size-16px font-bold"},bt={class:"text-gray-600 mt-1"},wt=Z({name:"drawerLog",__name:"drawerLog",props:Q({rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(f){const G=ee();Ce();let l=re({id:"",content1:"",content2:"",content3:"",content4:"",content5:"",content6:"",content7:"",content8:"",username:"",contractname:"",num:0});const N=f,e={id:99,name:"张三",avatar:"https://cdn-icons-png.flaticon.com/128/3135/3135715.png"},$=q({});async function W(){S.value=[],Object.assign(l,N.rowData),k()}const S=q([]),x=ne(f,"visible");X(x,()=>{x.value?W():(S.value=[],l.id=void 0)}),X(()=>N.rowData,()=>{x.value&&W()});function A(y){y||P()}function P(){x.value=!1}const k=async()=>{const{data:y,error:o}=await Qe({page:1,limit:100,pid:l.id});y&&(S.value=y.list)},w=$e.debounce(async()=>{var c;const y=$.value[l.id];if(!(y!=null&&y.trim()))return(c=window.$message)==null?void 0:c.warning("请输入评论内容");const{data:o,error:m}=await Ze([{pid:l.id,content:y}]);o&&($.value[l.id]="",l.num++,k())},1e3,{leading:!0,trailing:!1}),L=async y=>{const{data:o,error:m}=await et(y.id);o&&(k(),l.num--,console.log("删除成功"))};async function z(y){if(!y)return;const o=y.split("?")[0],m=y.split("?")[1];try{const R=await(await fetch(o,{mode:"cors"})).blob(),j=URL.createObjectURL(R),u=document.createElement("a");u.href=j,u.download=m,u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(j)}catch(c){console.error("下载失败:",c)}}return(y,o)=>{const m=ce,c=de,R=ae,j=Ee,u=qe,s=De,h=Ue,U=Y("no-auth");return b(),I(h,{show:x.value,"onUpdate:show":[o[3]||(o[3]=r=>x.value=r),A],"display-directive":"show",width:600,onMaskClick:P,onEsc:P},{default:a(()=>[n(s,{title:t(l).username+"的项目周报","native-scrollbar":!1,closable:""},{default:a(()=>[n(R,{ref:"formRef",model:t(l),"show-feedback":!1},{default:a(()=>[n(m,{label:"本周完成",path:"content1"},{label:a(()=>o[4]||(o[4]=[d("div",{class:"font-size-16px font-bold"},"本周完成:",-1)])),default:a(()=>[d("span",{class:E(["preview-text",{textstyle:t(l).content1}])},v(t(l).content1),3)]),_:1}),n(m,{label:"本周对你帮助最大的人，具体描述一下对你的帮助",path:"content2"},{label:a(()=>o[5]||(o[5]=[d("div",{class:"font-size-16px font-bold"},"本周对你帮助最大的人，具体描述一下对你的帮助:",-1)])),default:a(()=>[d("span",{class:E(["preview-text",{textstyle:t(l).content2}])},v(t(l).content2),3)]),_:1}),n(m,{label:"未完成项目",path:"content3"},{label:a(()=>o[6]||(o[6]=[d("div",{class:"font-size-16px font-bold"},"未完成项目:",-1)])),default:a(()=>[d("span",{class:E(["preview-text",{textstyle:t(l).content3}])},v(t(l).content3),3)]),_:1}),n(m,{label:"下周计划",path:"content4"},{label:a(()=>o[7]||(o[7]=[d("div",{class:"font-size-16px font-bold"},"下周计划:",-1)])),default:a(()=>[d("span",{class:E(["preview-text",{textstyle:t(l).content4}])},v(t(l).content4),3)]),_:1}),n(m,{label:"需协调与帮助",path:"content5"},{label:a(()=>o[8]||(o[8]=[d("div",{class:"font-size-16px font-bold"},"需协调与帮助:",-1)])),default:a(()=>[d("span",{class:E(["preview-text",{textstyle:t(l).content5}])},v(t(l).content5),3)]),_:1}),n(m,{label:"",path:"content6"},{label:a(()=>o[9]||(o[9]=[d("div",{class:"font-size-16px font-bold"},"本周做的比较好的:",-1)])),default:a(()=>[d("span",{class:E(["preview-text",{textstyle:t(l).content6}])},v(t(l).content6),3)]),_:1}),n(m,{label:"",path:"content7"},{label:a(()=>o[10]||(o[10]=[d("div",{class:"font-size-16px font-bold"},"自己哪些需要提升:",-1)])),default:a(()=>[d("span",{class:E(["preview-text",{textstyle:t(l).content7}])},v(t(l).content7),3)]),_:1}),n(m,{label:"",path:"content8"},{label:a(()=>o[11]||(o[11]=[d("div",{class:"font-size-16px font-bold"},"下个阶段的目标，如果达成目标你想要什么(如:团建、旅游、吃饭等):",-1)])),default:a(()=>[d("span",{class:E(["preview-text",{textstyle:t(l).content8}])},v(t(l).content8),3)]),_:1}),n(m,{label:"图片",path:""},{label:a(()=>o[12]||(o[12]=[d("div",{class:"font-size-16px font-bold"},"图片",-1)])),default:a(()=>{var r;return[t(l).file1?(b(),I(c,{key:0,width:"80",height:"80",src:t(l).file1,class:"rounded-md object-cover"},null,8,["src"])):F("",!0),t(l).file1?(b(),T("div",dt,[C(v((r=t(l).file1)==null?void 0:r.split("?")[1])+" ",1),n(t(D),{text:"",type:"primary",size:"small",onClick:o[0]||(o[0]=p=>z(t(l).file1))},{default:a(()=>o[13]||(o[13]=[C("下载")])),_:1,__:[13]})])):F("",!0)]}),_:1}),n(m,{label:"附件",path:""},{label:a(()=>o[14]||(o[14]=[d("div",{class:"font-size-16px font-bold"},"附件",-1)])),default:a(()=>{var r;return[t(l).file2?(b(),T("div",ut,[C(v((r=t(l).file2)==null?void 0:r.split("?")[1])+" ",1),n(t(D),{text:"",type:"primary",size:"small",onClick:o[1]||(o[1]=p=>z(t(l).file2))},{default:a(()=>o[15]||(o[15]=[C("下载")])),_:1,__:[15]})])):F("",!0)]}),_:1}),d("div",pt,"字符数："+v(t(l).charctras),1)]),_:1},8,["model"]),t(l).num?(b(),T("div",mt,v(t(l).num)+"评论",1)):F("",!0),n(Ne,{name:"fade"},{default:a(()=>[d("div",ft,[H((b(),T("div",_t,[d("div",null,[n(j,{size:"small",src:e.avatar},null,8,["src"])]),n(t(M),{type:"textarea",id:`comment-input-${t(l).id}`,value:$.value[t(l).id],"onUpdate:value":o[2]||(o[2]=r=>$.value[t(l).id]=r),placeholder:"善语结善缘，恶语伤人心...",autosize:"",onKeydown:pe(Se(t(w),["exact","prevent"]),["enter"])},null,8,["id","value","onKeydown"]),n(t(D),{type:"primary",ghost:"",onClick:t(w)},{default:a(()=>o[16]||(o[16]=[C("发送")])),_:1,__:[16]},8,["onClick"])])),[[U,"project:Summary:Comment:insert"]]),(b(!0),T(ze,null,je(S.value,r=>(b(),T("div",{key:r.id,class:"flex mb-3"},[n(j,{size:"small",src:e.avatar},null,8,["src"]),d("div",vt,[d("div",gt,[d("span",yt,v(r.username),1),n(u,{depth:"3",style:{"font-size":"12px","margin-left":"20px"}},{default:a(()=>[C(v(r.dbtime),1)]),_:2},1024),t(G).userInfo.id==r.creater?(b(),I(t(fe),{key:0,onPositiveClick:p=>L(r)},{trigger:a(()=>[H((b(),I(t(D),{quaternary:"",type:"error",size:"small"},{default:a(()=>o[17]||(o[17]=[C(" 删除 ")])),_:1,__:[17]})),[[U,"project:Summary:Comment:delete"]])]),default:a(()=>[o[18]||(o[18]=C(" 确定删除吗？ "))]),_:2,__:[18]},1032,["onPositiveClick"])):F("",!0)]),d("div",bt,v(r.content),1)])]))),128))])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])}}}),ht=ue(wt,[["__scopeId","data-v-d6d14539"]]),xt=Z({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:Q(["reset","search","clear"],["update:model"]),setup(f,{emit:G}){const l=G,{formRef:N}=ie(),e=ne(f,"model");ee();const{pageData:$,getData:W,nextPage:S}=Ae(Le),x=async k=>{const w=k.currentTarget,L=w.scrollTop;w.scrollTop+w.offsetHeight>=w.scrollHeight&&$.data.length<$.total&&(await S(),await Ie(),setTimeout(()=>{w.scrollTop=L}))},A=async k=>{e.value.creater=k,l("search")};W({usertypes:"2,3"});async function P(){l("search")}return(k,w)=>{const L=Te,z=Ve,y=Ge,o=D,m=oe,c=Ke,R=ae,j=me;return b(),I(j,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[n(R,{ref_key:"formRef",ref:N,model:e.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:pe(P,["enter"])},{default:a(()=>[n(c,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:a(()=>[n(z,{span:"24 s:12 m:6",label:"用户",path:"creater"},{default:a(()=>[n(L,{clearable:"",filterable:"",value:e.value.creater,"onUpdate:value":[w[0]||(w[0]=u=>e.value.creater=u),A],placeholder:"请选择","label-field":"username","value-field":"id",options:t($).data,onScroll:x},null,8,["value","options"])]),_:1}),n(z,{span:"24  s:12 m:6",class:"pr-24px"},{default:a(()=>[n(m,{class:"w-full"},{default:a(()=>[n(o,{type:"primary",ghost:"",onClick:P},{icon:a(()=>[n(y,{class:"text-icon"})]),default:a(()=>[C(" "+v(t(V)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),kt={class:"h-300px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},Ct={key:0};function se(f){return typeof f=="function"||Object.prototype.toString.call(f)==="[object Object]"&&!We(f)}const It=Z({name:"projectmanagement_memberlog",__name:"index",props:{pid:{default:void 0},type:{},prjId:{default:void 0}},emits:["thereIsData"],setup(f,{emit:G}){const l=Pe(),N=ee(),e=f,$=G,{columns:W,data:S,getData:x,loading:A,mobilePagination:P,searchParams:k}=Be({showTotal:!0,immediate:!0,apiFn:Je,apiParams:{page:1,pageSize:20,limit:20,_t:new Date().getTime()},columns:()=>[{key:"kk",title:" ",align:"center",width:120,render:r=>n("div",null,[r.username+"的项目周报"])},{key:"charctras",title:"字数",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dbtime",title:"创建时间",align:"center",width:120},{key:"operate",title:V("common.operate"),align:"center",width:140,fixed:"right",render:r=>{let p;return n("div",{class:"flex-center gap-8px"},[n(D,{type:"primary",ghost:!0,size:"small",onClick:()=>h(r)},{default:()=>[C("查看详情")]}),N.userInfo.id==r.creater&&H(n(D,{type:"primary",ghost:!0,size:"small",onClick:()=>j(r.id)},se(p=V("common.edit"))?p:{default:()=>[p]}),[[Y("no-auth"),"project:Summary:update"]]),N.userInfo.id==r.creater&&n(fe,{onPositiveClick:()=>R(r.id)},{default:()=>V("common.confirmDelete"),trigger:()=>{let _;return H(n(D,{type:"error",ghost:!0,size:"small"},se(_=V("common.delete"))?_:{default:()=>[_]}),[[Y("no-auth"),"project:Summary:delete"]])}})])}}]}),{drawerVisible:w,operateType:L,editingData:z,handleAdd:y,handleEdit:o,checkedRowKeys:m,onDeleted:c}=Oe(S,x);async function R(r){const{data:p,error:_}=await Ye(r);_||c()}function j(r){o(r)}const u=q(!1),s=q({}),h=r=>{u.value=!0,s.value=r},U=()=>{x()};return X(()=>e.pid,async r=>{r&&(k.pid=r,await x())}),X(()=>S.value,async r=>{r.length>0?$("thereIsData",1):$("thereIsData",0)}),Re(()=>{e.type!="externalLiaison"}),(r,p)=>{const _=oe,g=_e,B=Me,K=me,O=Y("no-auth");return b(),T("div",kt,[e.pid?F("",!0):(b(),I(xt,{key:0,model:t(k),"onUpdate:model":p[0]||(p[0]=i=>te(k)?k.value=i:null),onReset:U,onSearch:t(x),onClear:p[1]||(p[1]=i=>S.value=[])},null,8,["model","onSearch"])),n(K,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},Fe({header:a(()=>[n(_,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:a(()=>[e.pid?F("",!0):(b(),T("div",Ct,"项目周报"))]),_:1}),e.pid?H((b(),I(t(D),{key:0,onClick:t(y),size:"small",ghost:"",type:"primary"},{icon:a(()=>[n(g,{class:"text-icon"})]),default:a(()=>[p[5]||(p[5]=C(" "+v("新增")))]),_:1,__:[5]},8,["onClick"])),[[O,"project:Summary:insert"]]):F("",!0)]),default:a(()=>[n(B,{"checked-row-keys":t(m),"onUpdate:checkedRowKeys":p[2]||(p[2]=i=>te(m)?m.value=i:null),columns:t(W),data:t(S),size:"small","flex-height":!t(l).isMobile,loading:t(A),remote:"","row-key":i=>i.id,pagination:t(P),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),n(ct,{visible:t(w),"onUpdate:visible":p[3]||(p[3]=i=>te(w)?w.value=i:null),onSubmitted:t(x),"operate-type":t(L),pid:e.pid||t(k).pid,"row-data":t(z)},null,8,["visible","onSubmitted","operate-type","pid","row-data"]),n(ht,{visible:u.value,"onUpdate:visible":p[4]||(p[4]=i=>u.value=i),"row-data":s.value},null,8,["visible","row-data"])]),_:2},[e.pid?void 0:{name:"header-extra",fn:a(()=>[n(_,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[H((b(),I(t(D),{onClick:t(y),size:"small",ghost:"",type:"primary"},{icon:a(()=>[n(g,{class:"text-icon"})]),default:a(()=>[p[6]||(p[6]=C(" "+v("新增")))]),_:1,__:[6]},8,["onClick"])),[[O,"project:Summary:insert"]])]),_:1})]),key:"0"}]),1024)])}}});export{It as default};
