import{_ as Xl}from"./table-column-setting.vue_vue_type_script_setup_true_lang-BL3fEdXs.js";import{_ as Yl}from"./round-upload-CTHJ2Zld.js";import{_ as Zl}from"./round-delete-BJUCXHh8.js";import{_ as et}from"./round-search-CcVdI1HR.js";import{d as Ee,s as _,z as lt,D as K,aL as ze,i as tt,b as at,o as L,f as t,w as a,M as nt,h as n,c as T,G as E,aM as U,H as I,J as it,B as v,g as f,t as S,a2 as st,aD as rt,aO as nl,e as il,aC as ot,aF as dt,$ as k,a4 as ut,N as ct,aI as pt,aH as ft,aE as mt,aG as ee,aU as sl,aK as rl,n as i,a5 as q,_ as y,I as D,aA as ol,aS as _e,F as j,aT as dl,aJ as Re,ax as vt,aR as gt,aV as yt,W as ht}from"./index-DTejdFLI.js";import{E as xt,F as bt}from"./FileSaver.min-D7FI1YMa.js";import{l as zt,g as Ce,d as _t,e as Ct,i as kt,m as wt,j as Ft,n as Lt}from"./aftersale-8Ftoe63T.js";import{u as Ut,a as St}from"./table-5sK02S3E.js";import{h as ul}from"./permission-BeExe-IG.js";import{u as Pe}from"./usePageData-BjjY6agq.js";import{_ as Dt}from"./Grid-U7VbogCl.js";import{_ as jt}from"./FormItemGridItem-OdWiLkIi.js";import{_ as Bt}from"./DatePicker-CotE2hZN.js";import{N as $t}from"./Popconfirm-BmNh5CYH.js";const Tt={class:"gap-16px overflow-auto lt-sm:overflow-auto"};function Nt(oe){return typeof oe=="function"||Object.prototype.toString.call(oe)==="[object Object]"&&!yt(oe)}const It=Ee({name:"aftersales_aftersalesdevice",__name:"index",setup(oe){const ke=_(!1),de=_(0),qe=_([]),ue=lt(),ce=K([{label:"质保维修返回",value:0},{label:"整体置换返回",value:1},{label:"报废",value:2},{label:"付费维修返回",value:3},{label:"原件返回",value:4},{label:"其他",value:9}]),cl={当日:()=>{const e=new Date().getTime();return[e,e]},本周:()=>{const e=new Date().getTime();return[e-24*60*60*1e3*7,e]},上月:()=>{const e=new Date().getTime();return[e-24*60*60*1e3*30,e]},近一年:()=>{const e=new Date().getTime();return[e-24*60*60*1e3*365,e]},近三年:()=>{const e=new Date().getTime();return[e-24*60*60*1e3*365*3,e]}},G=_([]),{pageData:O,getData:pe,nextPage:pl}=Pe(kt),Ge=async e=>{const l=e.currentTarget,s=l.scrollTop;l.scrollTop+l.offsetHeight>=l.scrollHeight&&O.data.length<O.total&&(await pl(),G.value=O.data,await ee(),setTimeout(()=>{l.scrollTop=s}))},fl=async()=>{await pe({page:1,limit:100,_t:new Date().getTime()}),G.value=O.data},H=_([]),{pageData:Q,getData:we,nextPage:ml}=Pe(wt),vl=async()=>{await we(),H.value=Q.data.map(e=>({label:e,value:e}))},Fe=async e=>{const l=e.currentTarget,s=l.scrollTop;l.scrollTop+l.offsetHeight>=l.scrollHeight&&Q.data.length<Q.total&&(await ml(),await ee(),H.value=Q.data.map(p=>({label:p,value:p})),setTimeout(()=>{l.scrollTop=s}))},gl=ze.debounce(async e=>{await we({fuzzy:e,page:1}),H.value=Q.data.map(l=>({label:l,value:l}))},300),Le=e=>{if(c.gws=null,X.value=!0,me.value=!1,!e){fe();return}gl(e)},fe=()=>{c.gws=null},Ue=ze.debounce(e=>{var l;c.gws1=e||void 0,c.gws=((l=c.gws1)==null?void 0:l.join(","))||void 0,x()},300),le=async()=>{X.value&&!me.value&&(await we({page:1}),H.value=Q.data.map(e=>({label:e,value:e})),X.value=!1)},yl=ze.debounce(async e=>{await pe({fuzzy:e,page:1}),G.value=O.data},300),X=_(!1),me=_(!1),Oe=e=>{if(c.cid=null,X.value=!0,me.value=!1,!e){Se();return}yl(e)},He=async()=>{X.value&&!me.value&&(await pe({page:1}),G.value=O.data,X.value=!1)},Se=async()=>{await pe({page:1}),G.value=O.data},Me=async e=>{c.cid=e,x()};async function hl(e,l){if(!e){c.startTime=void 0,c.endTime=void 0,x();return}c.startTime=String(sl(1,l[0])),c.endTime=String(sl(1,l[1])),x()}const De=()=>{c.sn=null,x()},je=ze.debounce(e=>{c.sn=e||void 0,x()},300);tt(async()=>{ue.userInfo.usertype!==7&&await fl(),await x(),await vl()});const R=Ee({props:{value:[String,Number],onUpdateValue:Function,row:Object},setup(e){const l=_(!1),s=_(null),p=_(null),h=_(String(e.value)),m=_(!1),u=()=>{ee(()=>{const z=p.value;z&&(m.value=z.scrollHeight>z.clientHeight)})};vt(()=>e.value,()=>u(),{immediate:!0});const o=()=>{h.value=String(e.value??""),l.value=!0,ee(()=>{var z;return(z=s.value)==null?void 0:z.focus()})},b=()=>{var z;h.value!==String(e.value??"")&&((z=e.onUpdateValue)==null||z.call(e,h.value)),l.value=!1};return()=>{if(l.value)return i(I,{ref:s,value:h.value,type:"textarea",rows:2,autofocus:!0,onUpdateValue:w=>h.value=w,onBlur:b});const z=i("div",{ref:p,class:"flex items-center justify-center whitespace-break-spaces",style:{minHeight:"30px",cursor:"pointer",minWidth:"60px",width:"100%",display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:3},onClick:o},e.value||"--");return m.value?i(_e,{trigger:"hover",style:{maxWidth:"500px"}},{trigger:()=>z,default:()=>e.value||"--"}):z}}}),We=Ee({props:{value:[String,Number],options:{type:Array,required:!0},onUpdateValue:Function},setup(e){const l=_(!1),s=_(null),p=_(e.value),h=()=>{p.value=e.value,l.value=!0,ee(()=>{var u,o;(o=(u=s.value)==null?void 0:u.focus)==null||o.call(u)})},m=u=>{var o;p.value=u,(u!==void 0||u!==null)&&u!==e.value&&((o=e.onUpdateValue)==null||o.call(e,u)),l.value=!1};return()=>{var u,o;return i("div",{style:"height:100%;cursor:pointer;width:100%",class:"flex items-center justify-center",onClick:h},l.value?i(U,{ref:s,value:p.value,options:e.options,size:"small",style:"width:150px","onUpdate:value":m,placeholder:"请选择",onBlur:()=>l.value=!1}):(o=(u=e.options)==null?void 0:u.find(b=>b.value==e.value))!=null&&o.label?t(gt,{type:"info"},{default:()=>{var b,z;return[(z=(b=e.options)==null?void 0:b.find(w=>w.value==e.value))==null?void 0:z.label]}}):"--")}}}),Y=_(!1),C=K({id:[],type:"",password:""});async function xl(e){C.id=[e],C.type="deleteComp",C.password="",Y.value=!0}async function bl(){C.id=W.value,C.type="deleteComp",C.password="",Y.value=!0}function zl(){Y.value=!1,C.id=[],C.type="",C.password=""}async function _l(){var s,p;if(!C.password){(s=window.$message)==null||s.destroyAll(),(p=window.$message)==null||p.error("请输入密码");return}const{data:e,error:l}=await zt(C.id,C.password);l||(Y.value=!1,C.id=[],C.type="",C.password="",El(),c.page=1,x())}const N=async(e,l,s)=>{var m;const{data:p,error:h}=await Ce([{id:e.id,[s]:l}]);h||((m=window.$message)==null||m.success("设置成功"),x())},ve=_(!1),g=K({id:0,type:"",value:"",accessory:"",raccessory:""});function ge(e,l,s){g.id=e,s=="rdetails"?(g.value=l.rdetails,g.raccessory=l.raccessory):s=="details"?(g.value=l.details,g.accessory=l.accessory):g.value=l,g.type=s,ve.value=!0}const Cl=e=>{window.open(e,"_blank")};function Je(){ve.value=!1,g.id=0,g.value="",g.type=""}async function kl(){var o,b,z,w,J,$,Z;if(!g.value){(o=window.$message)==null||o.destroyAll(),(b=window.$message)==null||b.error("请选择类型");return}if(g.value==1&&g.type=="details"&&!g.accessory){(z=window.$message)==null||z.destroyAll(),(w=window.$message)==null||w.error("请输入配件详情");return}if(g.value==1&&g.type=="rdetails"&&!g.raccessory){(J=window.$message)==null||J.destroyAll(),($=window.$message)==null||$.error("请输入配件详情");return}const{id:e,value:l,type:s,accessory:p,raccessory:h}=g,{data:m,error:u}=await Ce([{id:e,[s]:l,accessory:s=="details"&&l==1?p:void 0,raccessory:s=="rdetails"&&l==1?h:void 0}]);u||(Je(),(Z=window.$message)==null||Z.success("设置成功"),x())}const{pageData:V,getData:M,nextPage:wl}=Pe(Ft),ye=async e=>{const l=e.currentTarget,s=l.scrollTop;l.scrollTop+l.offsetHeight>=l.scrollHeight&&V.data.length<V.total&&(await wl(),await ee(),setTimeout(()=>{l.scrollTop=s}))};M();const Ke=async()=>{await M({page:1}),Qe()},Fl=async e=>{if(!e){Ke();return}Ll.value=e,await M({fuzzy:e,page:1}),Qe()},te=K(new Map),Ll=_("");function Qe(){const e=[];V.data.forEach(l=>{te.has(l.id)||e.push(l)}),te.forEach(l=>{e.push(l)}),V.data=e}const Xe=e=>{V.data.forEach(l=>{e.includes(l.id)&&te.set(l.id,l)}),Array.from(te.keys()).forEach(l=>{e.includes(l)||te.delete(l)})},Be=e=>{c.reid=e,x()},$e=async()=>{await M({page:1}),c.reid=null,x()},Te=e=>{if(!e){M({page:1});return}M({fuzzy:e,page:1})},Ye=e=>{c.conc=e,x()},Ze=async()=>{c.conc=null,x()},Ul=async()=>{c.pending=null,x()},Sl=e=>{c.pending=e==1?1:void 0,x()},Dl=e=>{c.conc=e.conc,c.page=1,x()},he=_(!1),F=K({id:0,reidList:[],copyList:[]}),jl=async e=>{await M(),he.value=!0,F.id=e.id,F.reidList=e.list.map(l=>l.reid),F.copyList=JSON.parse(JSON.stringify(e.list)),Xe(F.reidList)},el=()=>{he.value=!1,F.id=0,F.reidList=[]},ae=_(!1),Bl=async()=>{var e;if(!ae.value)try{const l=F.reidList||[],s=F.copyList.map(m=>m.reid)||[],p=l.filter(m=>!s.includes(m)),h=s.filter(m=>!l.includes(m)).map(m=>{var u;return(u=F.copyList.find(o=>o.reid===m))==null?void 0:u.id}).filter(Boolean);if(ae.value=!0,p.length>0){const{data:m,error:u}=await _t(p.map(o=>({afid:F.id,reid:o})))}if(h.length>0){const{data:m,error:u}=await Ct({arrIds:h.join(",")})}(e=window.$message)==null||e.success("设置成功"),el(),x()}catch{}finally{ae.value=!1}},{columns:ll,columnChecks:Ne,data:Ie,getData:x,loading:$l,mobilePagination:Tl,searchParams:c}=Ut({showTotal:!0,immediate:!1,apiFn:Lt,apiParams:{page:1,pageSize:20,limit:20,cid:null,gws:void 0,gws1:[],sn:null,reid:null,conc:null,pending:null,dbtime:null,startAndTimeRange:null,startTime:null,endTime:null,_t:new Date().getTime()},columns:()=>ue.userInfo.usertype!=7?[{type:"selection",align:"center",width:48,fixed:"left",resizable:!0},{key:"comp",width:160,fixed:"left",resizable:!0,titleName:"公司名称",title:()=>i("div",{class:"flex items-center justify-center gap-6px"},[i("span",null,"公司名称"),i(q,{trigger:"click",placement:"bottom"},{trigger:()=>i("span",{class:"cursor-pointer text-primary hover:opacity-80"},t(y,{"local-icon":"search",class:"font-size-18px ml-5px"},null)),default:()=>i("div",{class:"flex items-center gap-4px p-6px"},[i(U,{size:"small",placeholder:"请选择公司名称",value:c.cid,style:"width:200px",clearable:!0,filterable:!0,labelField:"comp",valueField:"id",options:G.value,onSearch:Oe,onBlur:He,onScroll:Ge,onClear:Se,onUpdateValue:Me}),i(v,{size:"small",type:"primary",onClick:x},{default:()=>"搜索"})])})]),render(e){return e.comp}},{key:"project",width:160,title:"项目名称",resizable:!0},{titleName:"网关编号",title:()=>i("div",{class:"flex items-center justify-center gap-6px"},[i("span",null,"网关编号"),i(q,{trigger:"click",placement:"bottom"},{trigger:()=>i("span",{class:"cursor-pointer text-primary hover:opacity-80"},t(y,{"local-icon":"search",class:"font-size-18px ml-5px"},null)),default:()=>i("div",{class:"flex items-center gap-4px p-6px"},[i(I,{size:"small",placeholder:"输入网关编号",value:c.sn,style:"width:160px",clearable:!0,onClear:De,onUpdateValue:je}),i(v,{size:"small",type:"primary",onClick:x},{default:()=>"搜索"})])})]),key:"sn",align:"center",width:180,fixed:"left",resizable:!0},{titleName:"网关型号",title:()=>i("div",{class:"flex items-center justify-center gap-6px"},[i("span",null,"网关型号"),i(q,{trigger:"click",placement:"bottom"},{trigger:()=>i("span",{class:"cursor-pointer text-primary hover:opacity-80"},t(y,{"local-icon":"search",class:"font-size-18px ml-5px"},null)),default:()=>i("div",{class:"flex items-center gap-4px p-6px"},[i(U,{size:"small",placeholder:"请选择网关型号",value:c.gws1,style:"width:200px",clearable:!0,filterable:!0,multiple:!0,options:H.value,onSearch:Le,onBlur:le,onScroll:Fe,onClear:fe,onUpdateValue:Ue}),i(v,{size:"small",type:"primary",onClick:x},{default:()=>"搜索"})])})]),align:"center",key:"model",width:120,resizable:!0},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("是否推送厂家")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),align:"center",key:"manu",width:200,resizable:!0,render(e){return e.id&&i(We,{value:e.manu??0,options:[{value:0,label:"否"},{value:1,label:"是"}],onUpdateValue(l){N(e,l,"manu")}})}},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("寄回类型")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),align:"center",key:"details",width:200,resizable:!0,render:e=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"}},[e.details==0||e.details==1?t(ol,null,[t("div",{class:"w-full",title:`${e.details}`},[t("div",null,[f("类型："),e.details==0?"裸机":"包含配件"]),e.details==1&&t("div",null,[f("配件详情："),e.accessory])]),t(_e,{trigger:"hover",placement:"right"},{trigger:()=>D(t(v,{text:!0,type:"primary",onClick:()=>ge(e.id,e,"details")},{default:()=>[t(y,{"local-icon":"edit",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]]),default:()=>k("common.update")})]):e.id&&D(t(v,{text:!0,type:"primary",size:"small",onClick:()=>ge(e.id,"","details")},{default:()=>[f("填写")]}),[[j("no-auth"),"aftermarket:update:permission.do"]])])},{key:"devre1",title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("现场照片")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),align:"center",width:300,resizable:!0,render:e=>t("div",{class:"flex items-center justify-center gap-4px"},[e.devre1||e.devre2||e.devre3?t(dl,{value:e.devre1&&e.devre2&&e.devre3?3:e.devre1&&e.devre2?2:void 0,color:"#1890ff"},{default:()=>[t("div",{style:{cursor:"pointer"},onClick:()=>Ve([e.devre1,e.devre2,e.devre3].filter(l=>l),0)},[t(Re,{width:70,src:e.devre1||e.devre2||e.devre3,previewDisabled:!0,style:{maxHeight:"70px",cursor:"pointer"}},null)])]}):null,e.id&&t("div",null,[!e.devre1&&!e.devre2&&!e.devre3&&e.id&&D(t(v,{text:!0,size:"small",type:"primary",onClick:()=>P(e,"sceneImg")},{default:()=>[t(y,{"local-icon":"upload",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]]),(e.devre1||e.devre2||e.devre3)&&D(t(v,{text:!0,size:"small",type:"primary",onClick:()=>P(e,"sceneImg"),style:{marginLeft:"5px"}},{default:()=>[t(y,{"local-icon":"edit",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]])])])},{key:"devre4",title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("现场视频")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),align:"center",width:300,resizable:!0,render:e=>t("div",{class:"flex items-center justify-center gap-4px"},[e.devre4?t("video",{src:e.devre4,style:{height:"70px",width:"100%",cursor:"pointer",objectFit:"cover"},onClick:()=>Cl(e.devre4)},null):null,t("div",null,[!e.devre4&&e.id&&D(t(v,{text:!0,size:"small",type:"primary",onClick:()=>P(e,"video")},{default:()=>[t(y,{"local-icon":"upload",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]]),e.devre4&&D(t(v,{text:!0,size:"small",type:"primary",onClick:()=>P(e,"video"),style:{marginLeft:"5px"}},{default:()=>[t(y,{"local-icon":"edit",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]])])])},{key:"devre5",title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("分析照片")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),align:"center",width:300,resizable:!0,render:e=>t("div",{class:"flex items-center justify-center gap-4px"},[e.devre5||e.devre6||e.devre7?t(dl,{value:e.devre5&&e.devre6&&e.devre7?3:e.devre5&&e.devre6?2:void 0,color:"#1890ff"},{default:()=>[t("div",{style:{cursor:"pointer"},onClick:()=>Ve([e.devre5,e.devre6,e.devre7].filter(l=>l),0)},[t(Re,{width:70,src:e.devre5||e.devre6||e.devre7,previewDisabled:!0,style:{maxHeight:"70px",cursor:"pointer"}},null)])]}):null,t("div",null,[!e.devre5&&!e.devre6&&!e.devre7&&e.id&&D(t(v,{size:"small",text:!0,type:"primary",onClick:()=>P(e,"analyze")},{default:()=>[t(y,{"local-icon":"upload",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]]),(e.devre5||e.devre6||e.devre7)&&D(t(v,{size:"small",text:!0,type:"primary",onClick:()=>P(e,"analyze"),style:{marginLeft:"5px"}},{default:()=>[t(y,{"local-icon":"edit",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]])])])},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("网关二维码")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),align:"center",key:"qrcode",width:300,resizable:!0,ellipsis:{tooltip:!0},render:e=>t("div",{class:"flex items-center justify-center gap-4px"},[e.qrcode?t("div",{style:{cursor:"pointer"},onClick:()=>Ve([e.qrcode].filter(l=>l),0)},[t(Re,{width:70,src:e.qrcode,previewDisabled:!0,style:{maxHeight:"70px",cursor:"pointer"}},null)]):null,t("div",null,[!e.qrcode&&e.id&&D(t(v,{size:"small",text:!0,type:"primary",onClick:()=>P(e,"qrcode")},{default:()=>[t(y,{"local-icon":"upload",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]]),e.qrcode&&D(t(v,{size:"small",text:!0,type:"primary",onClick:()=>P(e,"qrcode"),style:{marginLeft:"5px"}},{default:()=>[t(y,{"local-icon":"edit",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]])])])},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("故障现象")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),key:"fault",width:200,resizable:!0,render(e){return e.id&&i(R,{value:e.fault||"",onUpdateValue(l){N(e,l,"fault")}})}},{titleName:"售后原因",title:()=>i("div",{class:"flex items-center justify-center gap-6px"},[i("span",null,"售后原因"),i(q,{trigger:"click",placement:"bottom"},{trigger:()=>i("span",{class:"cursor-pointer text-primary hover:opacity-80"},t(y,{"local-icon":"search",class:"font-size-18px ml-5px"},null)),default:()=>i("div",{class:"flex items-center gap-4px p-6px"},[i(U,{size:"small",placeholder:"请选择售后原因",value:c.reid,style:"width:200px",clearable:!0,filterable:!0,labelField:"rs",valueField:"id",options:V.data,onSearch:Te,onBlur:le,onScroll:ye,onClear:$e,onUpdateValue:Be}),i(v,{size:"small",type:"primary",onClick:x},{default:()=>"搜索"})])})]),align:"center",key:"list",width:200,resizable:!0,render:e=>{var l;return t("div",{class:"flex items-center justify-center"},[t(_e,{trigger:"hover",style:"maxWidth:500px"},{trigger:()=>{var s;return t("div",{class:"text-left",style:{display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:3}},[((s=e.list)==null?void 0:s.length)&&e.list.map((p,h)=>p.rs).join("、")])},default:()=>{var s;return((s=e.list)==null?void 0:s.length)&&e.list.map((p,h)=>p.rs).join("、")}}),e.id&&t("div",{onClick:()=>jl(e)},[t(y,{"local-icon":"setup",class:"font-size-20px ml-5px",style:{cursor:"pointer",color:((l=e.list)==null?void 0:l.length)>0?"#1890ff":""}},null)])])}},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("诊断结论")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),width:200,resizable:!0,key:"diagnosis",render(e){return e.id&&i(R,{value:e.diagnosis||"",onUpdateValue(l){N(e,l,"diagnosis")}})}},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("临时处理")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),key:"tphand",width:200,resizable:!0,render(e){return e.id&&i(R,{value:e.tphand||"",onUpdateValue(l){N(e,l,"tphand")}})}},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("长期改善")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),key:"impv",width:200,resizable:!0,render(e){return e.id&&i(R,{value:e.impv||"",onUpdateValue(l){N(e,l,"impv")}})}},{titleName:"处理结论",title:()=>i("div",{class:"flex items-center justify-center gap-6px"},[i("span",null,"处理结论"),i(q,{trigger:"click",placement:"bottom"},{trigger:()=>i("span",{class:"cursor-pointer text-primary hover:opacity-80"},t(y,{"local-icon":"search",class:"font-size-18px ml-5px"},null)),default:()=>i("div",{class:"flex items-center gap-4px p-6px"},[i(U,{size:"small",placeholder:"请选择处理结论",value:c.conc,style:"width:200px",clearable:!0,options:ce,onClear:Ze,onUpdateValue:Ye}),i(v,{size:"small",type:"primary",onClick:x},{default:()=>"搜索"})])})]),key:"conc",width:200,resizable:!0,render(e){return e.id&&i(We,{value:e.conc??null,options:ce,onUpdateValue(l){N(e,l,"conc")}})}},{title:"处理时长",key:"duration",width:120,resizable:!0,align:"center",render:e=>e.duration&&e.id?t("div",null,[e.conc!==null&&e.conc!==void 0?"总耗时":"已历时",f(" "),e.duration?e.duration+" 天":"--"]):""},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("备注")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),key:"devnotes",width:200,resizable:!0,render(e){return e.id&&i(R,{value:e.devnotes||"",onUpdateValue(l){N(e,l,"devnotes")}})}},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("发货信息")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),key:"returnnum",width:200,resizable:!0,render(e){return e.id&&i(R,{value:e.returnnum||"",onUpdateValue(l){N(e,l,"returnnum")}})}},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("发货网关编号")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),key:"rsn",width:200,resizable:!0,render(e){return e.id&&i(R,{value:e.rsn||"",onUpdateValue(l){N(e,l,"rsn")}})}},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("发货网关型号")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),key:"rmodel",width:200,resizable:!0,render(e){return e.id&&i(R,{value:e.rmodel||"",onUpdateValue(l){N(e,l,"rmodel")}})}},{title:()=>t("div",{class:"flex items-center justify-center"},[t("div",null,[f("发货寄件类型")]),t(y,{"local-icon":"edit",class:"font-size-16px ml-5px"},null)]),key:"rdetails",align:"center",width:200,resizable:!0,render:e=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"}},[e.rdetails==0||e.rdetails==1?t(ol,null,[t("div",{class:"w-full",title:`${e.rdetails}`},[t("div",null,[f("类型："),e.rdetails==0?"裸机":"包含配件"]),e.rdetails==1&&t("div",null,[f("配件详情："),e.raccessory])]),t(_e,{trigger:"hover",placement:"right"},{trigger:()=>D(t(v,{text:!0,type:"primary",onClick:()=>ge(e.id,e,"rdetails")},{default:()=>[t(y,{"local-icon":"edit",class:"font-size-26px ml-5px c-#000"},null)]}),[[j("no-auth"),"aftermarket:update:permission.do"]]),default:()=>k("common.update")})]):e.id&&D(t(v,{text:!0,type:"primary",size:"small",onClick:()=>ge(e.id,"","rdetails")},{default:()=>[f("填写")]}),[[j("no-auth"),"aftermarket:update:permission.do"]])])},{title:"发货时间",key:"rdbtime",align:"center",width:180,resizable:!0,render:e=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"}},[t("div",{class:"w-full",title:`${e.rdbtime}`},[e.rdbtime])])},{title:"发货人",key:"rusername",align:"center",width:100,resizable:!0,render:e=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"}},[t("div",{class:"w-full",title:`${e.rusername}`},[e.rusername])])},{key:"operate",title:k("common.operate"),align:"center",width:120,fixed:"right",render:e=>t("div",{class:"flex-center gap-8px"},[t($t,{onPositiveClick:()=>xl(e.id)},{default:()=>k("common.confirmDelete"),trigger:()=>{let l;return D(t(v,{type:"error",ghost:!0,size:"small"},Nt(l=k("common.delete"))?l:{default:()=>[l]}),[[j("no-auth"),"aftermarket:delete:permission.do"]])}})])}]:[{type:"selection",align:"center",width:48,fixed:"left",resizable:!0},{titleName:"网关编号",title:()=>i("div",{class:"flex items-center justify-center gap-6px"},[i("span",null,"网关编号"),i(q,{trigger:"click",placement:"bottom"},{trigger:()=>i("span",{class:"cursor-pointer text-primary hover:opacity-80"},t(y,{"local-icon":"search",class:"font-size-18px ml-5px"},null)),default:()=>i("div",{class:"flex items-center gap-4px p-6px"},[i(I,{size:"small",placeholder:"输入网关编号",value:c.sn,style:"width:160px",clearable:!0,onClear:De,onUpdateValue:je}),i(v,{size:"small",type:"primary",onClick:x},{default:()=>"搜索"})])})]),key:"sn",align:"center",width:180,fixed:"left",resizable:!0},{titleName:"网关型号",title:()=>i("div",{class:"flex items-center justify-center gap-6px"},[i("span",null,"网关型号"),i(q,{trigger:"click",placement:"bottom"},{trigger:()=>i("span",{class:"cursor-pointer text-primary hover:opacity-80"},t(y,{"local-icon":"search",class:"font-size-18px ml-5px"},null)),default:()=>i("div",{class:"flex items-center gap-4px p-6px"},[i(U,{size:"small",placeholder:"请选择网关型号",value:c.gws1,style:"width:200px",clearable:!0,filterable:!0,multiple:!0,options:H.value,onSearch:Le,onBlur:le,onScroll:Fe,onClear:fe,onUpdateValue:Ue}),i(v,{size:"small",type:"primary",onClick:x},{default:()=>"搜索"})])})]),align:"center",key:"model",width:120,resizable:!0},{titleName:"售后原因",title:()=>i("div",{class:"flex items-center justify-center gap-6px"},[i("span",null,"售后原因"),i(q,{trigger:"click",placement:"bottom"},{trigger:()=>i("span",{class:"cursor-pointer text-primary hover:opacity-80"},t(y,{"local-icon":"search",class:"font-size-18px ml-5px"},null)),default:()=>i("div",{class:"flex items-center gap-4px p-6px"},[i(U,{size:"small",placeholder:"请选择售后原因",value:c.reid,style:"width:200px",clearable:!0,filterable:!0,labelField:"rs",valueField:"id",options:V.data,onSearch:Te,onBlur:le,onScroll:ye,onClear:$e,onUpdateValue:Be}),i(v,{size:"small",type:"primary",onClick:x},{default:()=>"搜索"})])})]),align:"center",key:"list",width:200,resizable:!0,render:e=>{var l;return t("div",{class:"flex items-center justify-center"},[t("div",{class:"text-left"},[((l=e.list)==null?void 0:l.length)&&e.list.map((s,p)=>s.rs).join("、")])])}},{title:"诊断结论",align:"center",width:200,resizable:!0,key:"diagnosis",ellipsis:{tooltip:!0}},{title:"临时处理",align:"center",key:"tphand",width:200,resizable:!0,ellipsis:{tooltip:!0}},{title:"长期改善",align:"center",key:"impv",width:200,resizable:!0,ellipsis:{tooltip:!0}},{key:"operate",title:k("common.operate"),align:"center",width:120,fixed:"right",render:e=>t("div",{class:"flex-center gap-8px"},[t(v,{type:"primary",ghost:!0,size:"small",onClick:()=>Il(e)},{default:()=>["修改"]})])}]}),ne=_(!1),xe=_(null),B=K({id:"",diagnosis:"",tphand:"",impv:""}),Nl={diagnosis:[{required:!0,message:"请输入诊断结论",trigger:"blur"}],tphand:[{required:!0,message:"请输入临时处理",trigger:"blur"}],impv:[{required:!0,message:"请输入长期改善",trigger:"blur"}]},Il=e=>{Object.assign(B,e),ne.value=!0},Vl=()=>{ne.value=!1,xe.value.resetFields()},Al=()=>{xe.value.validate(async e=>{var l;if(!e){const{data:s,error:p}=await Ce([B]);p||((l=window.$message)==null||l.success("修改成功"),ne.value=!1,xe.value.resetFields(),x())}})},{checkedRowKeys:W,onDeleted:El}=St(Ie,x),Ve=(e,l=0)=>{qe.value=e,de.value=l,ke.value=!0},Rl=e=>{de.value=e},ie=_(!1),d=K({id:0,type:"",analyzeFileList:[]});function P(e,l){console.log(e,d,"row"),d.analyzeFileList=[],d.id=e.id,d.type=l,l==="qrcode"?e.qrcode&&d.analyzeFileList.push({id:"0",name:"0",url:e.qrcode,status:"finished"}):l==="sceneImg"?(e.devre1&&d.analyzeFileList.push({id:"0",name:"0",url:e.devre1,status:"finished"}),e.devre2&&d.analyzeFileList.push({id:"1",name:"1",url:e.devre2,status:"finished"}),e.devre3&&d.analyzeFileList.push({id:"2",name:"2",url:e.devre3,status:"finished"})):l==="video"?e.devre4&&d.analyzeFileList.push({id:"0",name:e.devre4.split("?")[1],url:e.devre4,status:"finished"}):(e.devre5&&d.analyzeFileList.push({id:"0",name:"0",url:e.devre5,status:"finished"}),e.devre6&&d.analyzeFileList.push({id:"1",name:"1",url:e.devre6,status:"finished"}),e.devre7&&d.analyzeFileList.push({id:"2",name:"2",url:e.devre7,status:"finished"})),ie.value=!0}function tl(e){var h,m,u,o;const l=["image/jpeg","image/png","image/jpg","image/x-icon"];console.log("data.file.file",e.file.file);const s=l.includes(e.file.file.type),p=e.file.file.size/1024/1024<100;return s||((h=window.$message)==null||h.destroyAll(),(m=window.$message)==null||m.error("只能上传 JPG/PNG/JPEG/ICO 格式的图片")),p||((u=window.$message)==null||u.destroyAll(),(o=window.$message)==null||o.error("上传图片大小不能超过 100MB")),s&&p}const se=_(0);async function Ae(e){var h,m;se.value=0;const{file:l,onFinish:s,onError:p}=e;if(!l.file)return s({...l});try{const u=await rl(l.file,l.name,"aftermarket/image",o=>{se.value=o});u&&(l.url=u,s({...l,url:u}),(h=window.$message)==null||h.destroyAll(),(m=window.$message)==null||m.success("上传成功"),se.value=0)}catch(u){p(u)}}function Pl(){ie.value=!1,d.analyzeFileList=[]}function ql(e){return new Promise((l,s)=>{Ae({file:e,onFinish:()=>l(!0),onError:p=>s(p)})})}async function Gl(){var u,o,b,z,w,J;console.log(d,"uploadImgForm");let e=[{id:d.id}];const l=d.analyzeFileList;if(await Promise.all([...l.map($=>ql($))]),l.some($=>$.url&&$.url.startsWith("blob:"))){(u=window.$message)==null||u.destroyAll(),(o=window.$message)==null||o.warning("还有文件正在上传或上传失败，请稍后提交");return}if(l.some($=>!$.url||$.url.trim()==="")){(b=window.$message)==null||b.destroyAll(),(z=window.$message)==null||z.warning("存在上传失败的文件，请重新上传");return}d.type==="qrcode"?d.analyzeFileList.length==0?e[0].qrcode="":e[0].qrcode=d.analyzeFileList[0].url:d.type==="video"?d.analyzeFileList.length==0?e[0].devre4="":e[0].devre4=d.analyzeFileList[0].url:d.type==="sceneImg"?(d.analyzeFileList.length==0&&(e[0].devre1="",e[0].devre2="",e[0].devre3=""),d.analyzeFileList.length==1&&(e[0].devre1=d.analyzeFileList[0].url,e[0].devre2="",e[0].devre3=""),d.analyzeFileList.length==2&&(e[0].devre1=d.analyzeFileList[0].url,e[0].devre2=d.analyzeFileList[1].url,e[0].devre3=""),d.analyzeFileList.length==3&&(e[0].devre1=d.analyzeFileList[0].url,e[0].devre2=d.analyzeFileList[1].url,e[0].devre3=d.analyzeFileList[2].url)):(d.analyzeFileList.length==0&&(e[0].devre5="",e[0].devre6="",e[0].devre7=""),d.analyzeFileList.length==1&&(e[0].devre5=d.analyzeFileList[0].url,e[0].devre6="",e[0].devre7=""),d.analyzeFileList.length==2&&(e[0].devre5=d.analyzeFileList[0].url,e[0].devre6=d.analyzeFileList[1].url,e[0].devre7=""),d.analyzeFileList.length==3&&(e[0].devre5=d.analyzeFileList[0].url,e[0].devre6=d.analyzeFileList[1].url,e[0].devre7=d.analyzeFileList[2].url));const{data:h,error:m}=await Ce(e);m||((w=window.$message)==null||w.destroyAll(),(J=window.$message)==null||J.success(h.msg||"操作成功"),x(),ie.value=!1,d.id=0,d.analyzeFileList=[])}function Ol(e){var h,m,u,o;const s=["video/mp4","video/avi","video/mov","video/mpeg"].includes(e.file.file.type),p=e.file.file.size/1024/1024<100;return s||((h=window.$message)==null||h.destroyAll(),(m=window.$message)==null||m.error("格式错误，请上传视频！")),p||((u=window.$message)==null||u.destroyAll(),(o=window.$message)==null||o.error("上传视频大小不能超过 100MB！")),s&&p}async function Hl(e){const{file:l,onFinish:s,onError:p}=e;new FormData().append("multipartFile",l.file);try{const m=await rl(l.file,l.name,"aftermarket/image/",u=>{});m&&(s({...l,url:m}),d.analyzeFileList[0].url=m)}catch(m){p(m)}}const Ml=_(window.innerHeight-390);async function Wl(e){const l=new xt.Workbook,s=l.addWorksheet("售后列表"),p=["客户信息","网关编号","型号","是否推送厂家","寄回类型","故障现象","售后原因","诊断结论","临时处理","长期改善","处理结论","处理时长","备注","发货信息"];s.addRow(p),e.filter(o=>W.value.includes(o.id)).forEach(o=>{var b,z;s.addRow([o.comp,o.sn||"",o.model||"",o.manu==1?"是":"否",`类型：${o.details==0?"仅裸机":"含配件"}
${o.details==1?" 配件详情："+o.accessory:""}`,o.fault||"",((b=o.list)==null?void 0:b.map(w=>w.rs).join("、"))||"",o.diagnosis,o.tphand,o.impv,((z=ce.find(w=>w.value==o.status))==null?void 0:z.label)||"",o.conc!=null&&o.duration!=null?`总耗时：${o.duration} 天`:`已历时：${o.duration||"--"} 天`,o.devnotes,`发货信息：${o.returnnum||""}
发货时间：${o.rdbtime||""}
发货人：${o.rusername||""}
发货网关编号：${o.rsn||""}
发货网关型号：${o.rmodel||""}
发货类型：${o.rdetails==0?"仅裸机":o.rdetails==1?"含配件":""}`])}),[30,25,20,15,30,30,30,30,30,30,15,20,20,40].forEach((o,b)=>{s.getColumn(b+1).width=o}),s.eachRow(o=>{o.eachCell({includeEmpty:!0},b=>{b.alignment={vertical:"middle",horizontal:"center",wrapText:!0},b.border={top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}})}),s.getRow(1).font={bold:!0},s.views=[{state:"frozen",xSplit:2,ySplit:1}];const u=await l.xlsx.writeBuffer();bt.saveAs(new Blob([u]),"售后列表.xlsx")}return(e,l)=>{const s=jt,p=Bt,h=et,m=Zl,u=it,o=Dt,b=nt,z=st,w=Yl,J=Xl,$=rt,Z=ot,Jl=dt,re=ut,be=ft,al=pt,A=ct,Kl=mt;return L(),at("div",Tt,[t(z,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[t(b,{ref:"formRef",model:n(c),"label-placement":"left","label-width":100,"show-feedback":!1},{default:a(()=>[t(o,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:a(()=>[n(ue).userInfo.usertype!==7?(L(),T(s,{key:0,span:"24 s:12 m:6",label:"公司名称",path:"cid"},{default:a(()=>[t(n(U),{filterable:"",clearable:"",value:n(c).cid,"onUpdate:value":[l[0]||(l[0]=r=>n(c).cid=r),Me],placeholder:"请选择公司名称","label-field":"comp","value-field":"id",onClear:Se,onSearch:Oe,onBlur:He,options:G.value,onScroll:Ge},null,8,["value","options"])]),_:1})):E("",!0),t(s,{span:"24 s:12 m:6",label:"网关编号",path:"sn"},{default:a(()=>[t(n(I),{clearable:"",value:n(c).sn,"onUpdate:value":[l[1]||(l[1]=r=>n(c).sn=r),n(je)],onClear:De,placeholder:"请输入网关编号"},null,8,["value","onUpdate:value"])]),_:1}),t(s,{span:"24 s:12 m:6",label:"网关型号",path:"gws"},{default:a(()=>[t(n(U),{clearable:"",filterable:"",multiple:"",value:n(c).gws1,"onUpdate:value":[l[2]||(l[2]=r=>n(c).gws1=r),n(Ue)],placeholder:"请选择网关型号","label-field":"label","value-field":"value",options:H.value,onSearch:Le,onBlur:le,onScroll:Fe,onClear:fe},null,8,["value","options","onUpdate:value"])]),_:1}),t(s,{span:"24 s:12 m:6",label:"售后原因",path:"reid"},{default:a(()=>[t(n(U),{value:n(c).reid,"onUpdate:value":[l[3]||(l[3]=r=>n(c).reid=r),Be],clearable:"",filterable:"","label-field":"rs","value-field":"id",options:n(V).data,onScroll:ye,onClear:$e,onSearch:Te,placeholder:"请选择售后原因"},null,8,["value","options"])]),_:1}),n(ue).userInfo.usertype!==7?(L(),T(s,{key:1,span:"24 s:12 m:6",label:"处理结论",path:"conc"},{default:a(()=>[t(n(U),{value:n(c).conc,"onUpdate:value":[l[4]||(l[4]=r=>n(c).conc=r),Ye],clearable:"",options:ce,onClear:Ze,placeholder:"请选择处理结论"},null,8,["value","options"])]),_:1})):E("",!0),t(s,{span:"24 s:12 m:4",label:"待厂家处理",path:"pending"},{default:a(()=>[t(n(U),{value:n(c).pending,"onUpdate:value":[l[5]||(l[5]=r=>n(c).pending=r),Sl],clearable:"",options:[{label:"待处理",value:1},{label:"全部",value:0}],onClear:Ul,placeholder:"请选择"},null,8,["value"])]),_:1}),t(s,{span:"24 s:12 m:8",label:"起止时间"},{default:a(()=>[t(p,{value:n(c).startAndTimeRange,"onUpdate:value":l[6]||(l[6]=r=>n(c).startAndTimeRange=r),type:"datetimerange",clearable:"",shortcuts:cl,"onUpdate:formattedValue":hl},null,8,["value"])]),_:1}),t(s,{span:"24 s:12 m:5"},{default:a(()=>[t(u,{class:"w-full"},{default:a(()=>[n(ul)("aftermarket:select:permission.do")?(L(),T(n(v),{key:0,ghost:"",onClick:n(x)},{icon:a(()=>[t(h,{class:"text-icon"})]),default:a(()=>[l[32]||(l[32]=f(" "+S("查询")))]),_:1,__:[32]},8,["onClick"])):E("",!0),n(ul)("aftermarket:delete:permission.do")?(L(),T(n(v),{key:1,type:"error",disabled:n(W).length===0,onClick:bl},{icon:a(()=>[t(m,{class:"text-icon"})]),default:a(()=>[l[33]||(l[33]=f(" "+S("批量删除")))]),_:1,__:[33]},8,["disabled"])):E("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(z,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:a(()=>[t(u,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:a(()=>l[34]||(l[34]=[il("div",null,"售后设备",-1)])),_:1,__:[34]})]),"header-extra":a(()=>[t(u,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[t(n(v),{onClick:l[7]||(l[7]=r=>Wl(n(Ie))),size:"small",ghost:"",type:"primary",disabled:n(W).length==0},{icon:a(()=>[t(w,{class:"text-icon"})]),default:a(()=>[l[35]||(l[35]=f(" "+S("导出")))]),_:1,__:[35]},8,["disabled"]),t(J,{columns:n(Ne),"onUpdate:columns":l[8]||(l[8]=r=>nl(Ne)?Ne.value=r:null),ctype:4},null,8,["columns"])]),_:1})]),default:a(()=>[t($,{"checked-row-keys":n(W),"onUpdate:checkedRowKeys":l[9]||(l[9]=r=>nl(W)?W.value=r:null),columns:n(ll),data:n(Ie),size:"small",loading:n($l),remote:"","max-height":Ml.value,"scroll-x":n(ll).reduce((r,Ql)=>r+(Ql.width||100),0),"row-key":r=>r.id,pagination:n(Tl),class:"sm:h-full",striped:"","onUpdate:filters":Dl},null,8,["checked-row-keys","columns","data","loading","max-height","scroll-x","row-key","pagination"])]),_:1}),t(re,{show:ie.value,"onUpdate:show":l[13]||(l[13]=r=>ie.value=r),title:d.type==="qrcode"?"二维码上传":d.type==="sceneImg"?"现场照片上传":d.type==="video"?"现场视频上传":"分析照片上传",preset:"card",class:"w-800px"},{footer:a(()=>[t(u,{justify:"end"},{default:a(()=>[t(n(v),{size:"small",class:"mt-16px",onClick:Pl},{default:a(()=>[f(S(n(k)("common.cancel")),1)]),_:1}),t(n(v),{type:"primary",size:"small",class:"mt-16px",onClick:Gl},{default:a(()=>[f(S(n(k)("common.confirm")),1)]),_:1})]),_:1})]),default:a(()=>[d.type==="qrcode"?(L(),T(Z,{key:0,multiple:"",max:1,"file-list":d.analyzeFileList,"onUpdate:fileList":l[10]||(l[10]=r=>d.analyzeFileList=r),"list-type":"image-card","default-upload":!1,onBeforeUpload:tl,"custom-request":Ae},{default:a(()=>l[36]||(l[36]=[f(" 点击上传 ")])),_:1,__:[36]},8,["file-list"])):d.type==="video"?(L(),T(Z,{key:1,"file-list":d.analyzeFileList,"onUpdate:fileList":l[11]||(l[11]=r=>d.analyzeFileList=r),"default-upload":!1,onBeforeUpload:Ol,max:1,"custom-request":Hl},{default:a(()=>[t(n(v),{type:"primary"},{default:a(()=>l[37]||(l[37]=[f(" 上传视频 ")])),_:1,__:[37]})]),_:1},8,["file-list"])):(L(),T(Z,{key:2,multiple:"",max:3,"file-list":d.analyzeFileList,"onUpdate:fileList":l[12]||(l[12]=r=>d.analyzeFileList=r),"list-type":"image-card",onBeforeUpload:tl,"default-upload":!1,"custom-request":Ae},{default:a(()=>l[38]||(l[38]=[f(" 点击上传 ")])),_:1,__:[38]},8,["file-list"])),il("div",null,[se.value?(L(),T(Jl,{key:0,type:"line",percentage:se.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):E("",!0)])]),_:1},8,["show","title"]),t(re,{show:ve.value,"onUpdate:show":l[18]||(l[18]=r=>ve.value=r),title:g.type=="rdetails"?"设备发货网关寄回类型":g.type=="details"?"寄回类型":"",preset:"card",class:"w-600px"},{footer:a(()=>[t(u,{justify:"end"},{default:a(()=>[t(n(v),{size:"small",class:"mt-16px",onClick:Je},{default:a(()=>[f(S(n(k)("common.cancel")),1)]),_:1}),t(n(v),{type:"primary",size:"small",class:"mt-16px",onClick:kl},{default:a(()=>[f(S(n(k)("common.confirm")),1)]),_:1})]),_:1})]),default:a(()=>[g.type==="details"?(L(),T(b,{key:0,ref:"formRef",model:g,"label-placement":"left"},{default:a(()=>[t(A,{label:"设备寄回类型",path:"value"},{default:a(()=>[t(al,{value:g.value,"onUpdate:value":l[14]||(l[14]=r=>g.value=r),name:"radiogroup"},{default:a(()=>[t(u,null,{default:a(()=>[t(be,{value:0},{default:a(()=>l[39]||(l[39]=[f("仅裸机")])),_:1,__:[39]}),t(be,{value:1},{default:a(()=>l[40]||(l[40]=[f("含配件")])),_:1,__:[40]})]),_:1})]),_:1},8,["value"])]),_:1}),g.value==1?(L(),T(A,{key:0,label:"配件详情",path:"accessory"},{default:a(()=>[t(n(I),{value:g.accessory,"onUpdate:value":l[15]||(l[15]=r=>g.accessory=r),placeholder:"请输入配件详情",clearable:""},null,8,["value"])]),_:1})):E("",!0)]),_:1},8,["model"])):E("",!0),g.type==="rdetails"?(L(),T(b,{key:1,ref:"formRef",model:g,"label-placement":"left"},{default:a(()=>[t(A,{label:"设备发货网关寄回类型",path:"value"},{default:a(()=>[t(al,{value:g.value,"onUpdate:value":l[16]||(l[16]=r=>g.value=r),name:"radiogroup"},{default:a(()=>[t(u,null,{default:a(()=>[t(be,{value:0},{default:a(()=>l[41]||(l[41]=[f("仅裸机")])),_:1,__:[41]}),t(be,{value:1},{default:a(()=>l[42]||(l[42]=[f("含配件")])),_:1,__:[42]})]),_:1})]),_:1},8,["value"])]),_:1}),g.value==1?(L(),T(A,{key:0,label:"发货配件详情",path:"raccessory"},{default:a(()=>[t(n(I),{value:g.raccessory,"onUpdate:value":l[17]||(l[17]=r=>g.raccessory=r),placeholder:"请输入发货配件详情",clearable:""},null,8,["value"])]),_:1})):E("",!0)]),_:1},8,["model"])):E("",!0)]),_:1},8,["show","title"]),t(re,{show:Y.value,"onUpdate:show":l[20]||(l[20]=r=>Y.value=r),title:"二次确认",preset:"card",class:"w-600px"},{footer:a(()=>[t(u,{justify:"end"},{default:a(()=>[t(n(v),{size:"small",class:"mt-16px",onClick:zl},{default:a(()=>[f(S(n(k)("common.cancel")),1)]),_:1}),t(n(v),{type:"primary",size:"small",class:"mt-16px",onClick:_l},{default:a(()=>[f(S(n(k)("common.confirm")),1)]),_:1})]),_:1})]),default:a(()=>[t(b,{ref:"formRef",model:C,"label-placement":"left"},{default:a(()=>[t(A,{label:"密码",path:"password",required:""},{default:a(()=>[t(n(I),{type:"password","show-password-on":"mousedown",value:C.password,"onUpdate:value":l[19]||(l[19]=r=>C.password=r),placeholder:"请输入密码",clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]),t(re,{show:he.value,"onUpdate:show":l[22]||(l[22]=r=>he.value=r),title:"设置售后原因",preset:"card",class:"w-600px"},{footer:a(()=>[t(u,{justify:"end"},{default:a(()=>[t(n(v),{size:"small",class:"mt-16px",onClick:el},{default:a(()=>[f(S(n(k)("common.cancel")),1)]),_:1}),t(n(v),{type:"primary",size:"small",class:"mt-16px",loading:ae.value,onClick:Bl},{default:a(()=>[f(S(n(k)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:a(()=>[t(b,{ref:"formRef",model:F,"label-placement":"left"},{default:a(()=>[t(A,{label:"售后原因",path:"value",required:""},{default:a(()=>[t(n(U),{value:F.reidList,"onUpdate:value":[l[21]||(l[21]=r=>F.reidList=r),Xe],multiple:"",clearable:"",filterable:"","label-field":"rs","value-field":"id",options:n(V).data,onScroll:ye,onClear:Ke,onSearch:Fl,placeholder:"请选择售后原因"},null,8,["value","options"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]),t(re,{show:ne.value,"onUpdate:show":l[29]||(l[29]=r=>ne.value=r),title:"修改",preset:"card",class:"w-600px"},{footer:a(()=>[t(u,{justify:"end"},{default:a(()=>[t(n(v),{size:"small",class:"mt-16px",onClick:Vl},{default:a(()=>[f(S(n(k)("common.cancel")),1)]),_:1}),t(n(v),{type:"primary",size:"small",class:"mt-16px",loading:ae.value,onClick:Al},{default:a(()=>[f(S(n(k)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:a(()=>[t(b,{ref_key:"editformRef",ref:xe,model:B,"label-placement":"left",rules:Nl},{default:a(()=>[t(A,{label:"诊断结论",path:"diagnosis",required:""},{default:a(()=>[t(n(I),{type:"textarea",value:B.diagnosis,"onUpdate:value":[l[23]||(l[23]=r=>B.diagnosis=r),l[24]||(l[24]=r=>B.diagnosis=r.trim())],placeholder:"请输入诊断结论",clearable:""},null,8,["value"])]),_:1}),t(A,{label:"临时处理",path:"tphand",required:""},{default:a(()=>[t(n(I),{type:"textarea",value:B.tphand,"onUpdate:value":[l[25]||(l[25]=r=>B.tphand=r),l[26]||(l[26]=r=>B.tphand=r.trim())],placeholder:"请输入临时处理",clearable:""},null,8,["value"])]),_:1}),t(A,{label:"长期改善",path:"impv",required:""},{default:a(()=>[t(n(I),{type:"textarea",value:B.impv,"onUpdate:value":[l[27]||(l[27]=r=>B.impv=r),l[28]||(l[28]=r=>B.impv=r.trim())],placeholder:"请输入长期改善",clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]),t(Kl,{show:ke.value,"onUpdate:show":l[30]||(l[30]=r=>ke.value=r),current:de.value,"onUpdate:current":[l[31]||(l[31]=r=>de.value=r),Rl],"src-list":qe.value},null,8,["show","current","src-list"])])}}}),Xt=ht(It,[["__scopeId","data-v-5b214ba9"]]);export{Xt as default};
