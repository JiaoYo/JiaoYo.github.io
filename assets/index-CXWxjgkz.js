import{a7 as Gu,a8 as ll,d as ga,k as Mr,a9 as Ku,aa as Vu,b as ol,i as qr,ab as ii,ac as Wu,o as ai,e as va,c as Jo,ad as zu,ae as ju,af as Xu,a4 as Qo,ag as Yu,x as _a,ah as sl,ai as qu,r as Xo,aj as Zu,w as Xr,f as Kr,g as Yr,t as pa,h as Pi,ak as Ju,B as Qu,P as $u,S as ef}from"./index-CGmto8A8.js";import{f as tf,a as rf}from"./scriptoperation-Bpb5rcPv.js";import{_ as nf}from"./Slider-BbOD3y_H.js";import{_ as af}from"./Split-8zUUkkwI.js";function lf(a,Ae){for(var v=0;v<Ae.length;v++){const R=Ae[v];if(typeof R!="string"&&!Array.isArray(R)){for(const A in R)if(A!=="default"&&!(A in a)){const c=Object.getOwnPropertyDescriptor(R,A);c&&Object.defineProperty(a,A,c.get?c:{enumerable:!0,get:()=>R[A]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}var il={exports:{}},Yo;function Vr(){return Yo||(Yo=1,function(a,Ae){(function(v,R){a.exports=R()})(Gu,function(){var v=navigator.userAgent,R=navigator.platform,A=/gecko\/\d/i.test(v),c=/MSIE \d/.test(v),g=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(v),_=/Edge\/(\d+)/.exec(v),w=c||g||_,L=w&&(c?document.documentMode||6:+(_||g)[1]),b=!_&&/WebKit\//.test(v),E=b&&/Qt\/\d+\.\d+/.test(v),S=!_&&/Chrome\/(\d+)/.exec(v),I=S&&+S[1],F=/Opera\//.test(v),H=/Apple Computer/.test(navigator.vendor),V=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(v),M=/PhantomJS/.test(v),P=H&&(/Mobile\/\w+/.test(v)||navigator.maxTouchPoints>2),G=/Android/.test(v),q=P||G||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(v),le=P||/Mac/.test(R),ge=/\bCrOS\b/.test(v),y=/win/i.test(R),z=F&&v.match(/Version\/(\d*\.\d*)/);z&&(z=Number(z[1])),z&&z>=15&&(F=!1,b=!0);var ee=le&&(E||F&&(z==null||z<12.11)),te=A||w&&L>=9;function ne(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var Le=function(e,t){var n=e.className,r=ne(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function ie(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function ke(e,t){return ie(e).appendChild(t)}function O(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),typeof t=="string")i.appendChild(document.createTextNode(t));else if(t)for(var l=0;l<t.length;++l)i.appendChild(t[l]);return i}function Ce(e,t,n,r){var i=O(e,t,n,r);return i.setAttribute("role","presentation"),i}var tt;document.createRange?tt=function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:tt=function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch{return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};function Pe(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function at(e){var t=e.ownerDocument||e,n;try{n=e.activeElement}catch{n=t.body||null}for(;n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;return n}function re(e,t){var n=e.className;ne(t).test(n)||(e.className+=(n?" ":"")+t)}function fe(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!ne(n[r]).test(t)&&(t+=" "+n[r]);return t}var _e=function(e){e.select()};P?_e=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:w&&(_e=function(e){try{e.select()}catch{}});function Ye(e){return e.display.wrapper.ownerDocument}function Qe(e){return vt(e.display.wrapper)}function vt(e){return e.getRootNode?e.getRootNode():e.ownerDocument}function et(e){return Ye(e).defaultView}function rt(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ct(e,t,n){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(n!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function he(e,t,n,r,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var l=r||0,s=i||0;;){var p=e.indexOf("	",l);if(p<0||p>=t)return s+(t-l);s+=p-l,s+=n-s%n,l=p+1}}var ye=function(){this.id=null,this.f=null,this.time=0,this.handler=rt(this.onTimeout,this)};ye.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},ye.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};function De(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}var Se=50,lt={toString:function(){return"CodeMirror.Pass"}},xt={scroll:!1},yt={origin:"*mouse"},nt={origin:"+move"};function be(e,t,n){for(var r=0,i=0;;){var l=e.indexOf("	",r);l==-1&&(l=e.length);var s=l-r;if(l==e.length||i+s>=t)return r+Math.min(s,t-i);if(i+=l-r,i+=n-i%n,r=l+1,i>=t)return r}}var Ge=[""];function J(e){for(;Ge.length<=e;)Ge.push(d(Ge)+" ");return Ge[e]}function d(e){return e[e.length-1]}function D(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function x(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}function Y(){}function Q(e,t){var n;return Object.create?n=Object.create(e):(Y.prototype=e,n=new Y),t&&ct(t,n),n}var ve=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ie(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ve.test(e))}function Fe(e,t){return t?t.source.indexOf("\\w")>-1&&Ie(e)?!0:t.test(e):Ie(e)}function it(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Nt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function wt(e){return e.charCodeAt(0)>=768&&Nt.test(e)}function jt(e,t,n){for(;(n<0?t>0:t<e.length)&&wt(e.charAt(t));)t+=n;return t}function W(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,l=r<0?Math.ceil(i):Math.floor(i);if(l==t)return e(l)?t:n;e(l)?n=l:t=l+r}}function qe(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,l=0;l<e.length;++l){var s=e[l];(s.from<n&&s.to>t||t==n&&s.to==t)&&(r(Math.max(s.from,t),Math.min(s.to,n),s.level==1?"rtl":"ltr",l),i=!0)}i||r(t,n,"ltr")}var Ze=null;function Je(e,t,n){var r;Ze=null;for(var i=0;i<e.length;++i){var l=e[i];if(l.from<t&&l.to>t)return i;l.to==t&&(l.from!=l.to&&n=="before"?r=i:Ze=i),l.from==t&&(l.from!=l.to&&n!="before"?r=i:Ze=i)}return r??Ze}var We=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(C){return C<=247?e.charAt(C):1424<=C&&C<=1524?"R":1536<=C&&C<=1785?t.charAt(C-1536):1774<=C&&C<=2220?"r":8192<=C&&C<=8203?"w":C==8204?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,l=/[LRr]/,s=/[Lb1n]/,p=/[1n]/;function m(C,oe,ce){this.level=C,this.from=oe,this.to=ce}return function(C,oe){var ce=oe=="ltr"?"L":"R";if(C.length==0||oe=="ltr"&&!r.test(C))return!1;for(var He=C.length,Ue=[],ut=0;ut<He;++ut)Ue.push(n(C.charCodeAt(ut)));for(var Lt=0,Et=ce;Lt<He;++Lt){var It=Ue[Lt];It=="m"?Ue[Lt]=Et:Et=It}for(var Kt=0,Pt=ce;Kt<He;++Kt){var zt=Ue[Kt];zt=="1"&&Pt=="r"?Ue[Kt]="n":l.test(zt)&&(Pt=zt,zt=="r"&&(Ue[Kt]="R"))}for(var er=1,Qt=Ue[0];er<He-1;++er){var lr=Ue[er];lr=="+"&&Qt=="1"&&Ue[er+1]=="1"?Ue[er]="1":lr==","&&Qt==Ue[er+1]&&(Qt=="1"||Qt=="n")&&(Ue[er]=Qt),Qt=lr}for(var hr=0;hr<He;++hr){var Or=Ue[hr];if(Or==",")Ue[hr]="N";else if(Or=="%"){var _r=void 0;for(_r=hr+1;_r<He&&Ue[_r]=="%";++_r);for(var zr=hr&&Ue[hr-1]=="!"||_r<He&&Ue[_r]=="1"?"1":"N",Fr=hr;Fr<_r;++Fr)Ue[Fr]=zr;hr=_r-1}}for(var Lr=0,Hr=ce;Lr<He;++Lr){var Cr=Ue[Lr];Hr=="L"&&Cr=="1"?Ue[Lr]="L":l.test(Cr)&&(Hr=Cr)}for(var kr=0;kr<He;++kr)if(i.test(Ue[kr])){var yr=void 0;for(yr=kr+1;yr<He&&i.test(Ue[yr]);++yr);for(var mr=(kr?Ue[kr-1]:ce)=="L",Gr=(yr<He?Ue[yr]:ce)=="L",ri=mr==Gr?mr?"L":"R":ce,Tn=kr;Tn<yr;++Tn)Ue[Tn]=ri;kr=yr-1}for(var Ur=[],on,Er=0;Er<He;)if(s.test(Ue[Er])){var rl=Er;for(++Er;Er<He&&s.test(Ue[Er]);++Er);Ur.push(new m(0,rl,Er))}else{var gn=Er,Pn=Ur.length,Dn=oe=="rtl"?1:0;for(++Er;Er<He&&Ue[Er]!="L";++Er);for(var Pr=gn;Pr<Er;)if(p.test(Ue[Pr])){gn<Pr&&(Ur.splice(Pn,0,new m(1,gn,Pr)),Pn+=Dn);var ni=Pr;for(++Pr;Pr<Er&&p.test(Ue[Pr]);++Pr);Ur.splice(Pn,0,new m(2,ni,Pr)),Pn+=Dn,gn=Pr}else++Pr;gn<Er&&Ur.splice(Pn,0,new m(1,gn,Er))}return oe=="ltr"&&(Ur[0].level==1&&(on=C.match(/^\s+/))&&(Ur[0].from=on[0].length,Ur.unshift(new m(0,0,on[0].length))),d(Ur).level==1&&(on=C.match(/\s+$/))&&(d(Ur).to-=on[0].length,Ur.push(new m(0,He-on[0].length,He)))),oe=="rtl"?Ur.reverse():Ur}}();function we(e,t){var n=e.order;return n==null&&(n=e.order=We(e.text,t)),n}var dt=[],ht=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||dt).concat(n)}};function Dt(e,t){return e._handlers&&e._handlers[t]||dt}function Bt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var l=De(i,n);l>-1&&(r[t]=i.slice(0,l).concat(i.slice(l+1)))}}}function qt(e,t){var n=Dt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function bt(e,t,n){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),qt(e,n||t.type,e,t),h(t)||t.codemirrorIgnore}function Ot(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)De(n,t[r])==-1&&n.push(t[r])}function Ft(e,t){return Dt(e,t).length>0}function o(e){e.prototype.on=function(t,n){ht(this,t,n)},e.prototype.off=function(t,n){Bt(this,t,n)}}function u(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function N(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function h(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function T(e){u(e),N(e)}function Z(e){return e.target||e.srcElement}function U(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),le&&e.ctrlKey&&t==1&&(t=3),t}var xe=function(){if(w&&L<9)return!1;var e=O("div");return"draggable"in e||"dragDrop"in e}(),ot;function _t(e){if(ot==null){var t=O("span","​");ke(e,O("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(ot=t.offsetWidth<=1&&t.offsetHeight>2&&!(w&&L<8))}var n=ot?O("span","​"):O("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}var Vt;function Wt(e){if(Vt!=null)return Vt;var t=ke(e,document.createTextNode("AخA")),n=tt(t,0,1).getBoundingClientRect(),r=tt(t,1,2).getBoundingClientRect();return ie(e),!n||n.left==n.right?!1:Vt=r.right-n.right<3}var Te=`

b`.split(/\n/).length!=3?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf(`
`,t);i==-1&&(i=e.length);var l=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),s=l.indexOf("\r");s!=-1?(n.push(l.slice(0,s)),t+=s+1):(n.push(l),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},ft=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},ae=function(){var e=O("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),ze=null;function Ee(e){if(ze!=null)return ze;var t=ke(e,O("span","x")),n=t.getBoundingClientRect(),r=tt(t,0,1).getBoundingClientRect();return ze=Math.abs(n.left-r.left)>1}var gt={},Rt={};function Ut(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),gt[e]=t}function Ct(e,t){Rt[e]=t}function Yt(e){if(typeof e=="string"&&Rt.hasOwnProperty(e))e=Rt[e];else if(e&&typeof e.name=="string"&&Rt.hasOwnProperty(e.name)){var t=Rt[e.name];typeof t=="string"&&(t={name:t}),e=Q(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Yt("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Yt("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function ur(e,t){t=Yt(t);var n=gt[t.name];if(!n)return ur(e,"text/plain");var r=n(e,t);if(Ht.hasOwnProperty(t.name)){var i=Ht[t.name];for(var l in i)i.hasOwnProperty(l)&&(r.hasOwnProperty(l)&&(r["_"+l]=r[l]),r[l]=i[l])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r}var Ht={};function $t(e,t){var n=Ht.hasOwnProperty(e)?Ht[e]:Ht[e]={};ct(t,n)}function Zt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function ir(e,t){for(var n;e.innerMode&&(n=e.innerMode(t),!(!n||n.mode==e));)t=n.state,e=n.mode;return n||{mode:e,state:t}}function nr(e,t,n){return e.startState?e.startState(t,n):!0}var sr=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};sr.prototype.eol=function(){return this.pos>=this.string.length},sr.prototype.sol=function(){return this.pos==this.lineStart},sr.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},sr.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},sr.prototype.eat=function(e){var t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e.test?e.test(t):e(t)),n)return++this.pos,t},sr.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},sr.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},sr.prototype.skipToEnd=function(){this.pos=this.string.length},sr.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},sr.prototype.backUp=function(e){this.pos-=e},sr.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=he(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?he(this.string,this.lineStart,this.tabSize):0)},sr.prototype.indentation=function(){return he(this.string,null,this.tabSize)-(this.lineStart?he(this.string,this.lineStart,this.tabSize):0)},sr.prototype.match=function(e,t,n){if(typeof e=="string"){var r=function(s){return n?s.toLowerCase():s},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0}else{var l=this.string.slice(this.pos).match(e);return l&&l.index>0?null:(l&&t!==!1&&(this.pos+=l[0].length),l)}},sr.prototype.current=function(){return this.string.slice(this.start,this.pos)},sr.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},sr.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},sr.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function Mt(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],l=i.chunkSize();if(t<l){n=i;break}t-=l}return n.lines[t]}function pr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(l){var s=l.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function dr(e,t,n){var r=[];return e.iter(t,n,function(i){r.push(i.text)}),r}function X(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function f(e){if(e.parent==null)return null;for(var t=e.parent,n=De(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function B(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],l=i.height;if(t<l){e=i;continue e}t-=l,n+=i.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var p=e.lines[s],m=p.height;if(t<m)break;t-=m}return n+s}function pe(e,t){return t>=e.first&&t<e.first+e.size}function Re(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function se(e,t,n){if(n===void 0&&(n=null),!(this instanceof se))return new se(e,t,n);this.line=e,this.ch=t,this.sticky=n}function Oe(e,t){return e.line-t.line||e.ch-t.ch}function Xe(e,t){return e.sticky==t.sticky&&Oe(e,t)==0}function pt(e){return se(e.line,e.ch)}function kt(e,t){return Oe(e,t)<0?t:e}function k(e,t){return Oe(e,t)<0?e:t}function de(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function $(e,t){if(t.line<e.first)return se(e.first,0);var n=e.first+e.size-1;return t.line>n?se(n,Mt(e,n).text.length):Be(t,Mt(e,t.line).text.length)}function Be(e,t){var n=e.ch;return n==null||n>t?se(e.line,t):n<0?se(e.line,0):e}function Me(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=$(e,t[r]);return n}var Ne=function(e,t){this.state=e,this.lookAhead=t},St=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};St.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},St.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},St.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},St.fromSaved=function(e,t,n){return t instanceof Ne?new St(e,Zt(e.mode,t.state),n,t.lookAhead):new St(e,Zt(e.mode,t),n)},St.prototype.save=function(e){var t=e!==!1?Zt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ne(t,this.maxLookAhead):t};function Gt(e,t,n,r){var i=[e.state.modeGen],l={};xr(e,t.text,e.doc.mode,n,function(C,oe){return i.push(C,oe)},l,r);for(var s=n.state,p=function(C){n.baseTokens=i;var oe=e.state.overlays[C],ce=1,He=0;n.state=!0,xr(e,t.text,oe.mode,n,function(Ue,ut){for(var Lt=ce;He<Ue;){var Et=i[ce];Et>Ue&&i.splice(ce,1,Ue,i[ce+1],Et),ce+=2,He=Math.min(Ue,Et)}if(ut)if(oe.opaque)i.splice(Lt,ce-Lt,Ue,"overlay "+ut),ce=Lt+2;else for(;Lt<ce;Lt+=2){var It=i[Lt+1];i[Lt+1]=(It?It+" ":"")+"overlay "+ut}},l),n.state=s,n.baseTokens=null,n.baseTokenPos=1},m=0;m<e.state.overlays.length;++m)p(m);return{styles:i,classes:l.bgClass||l.textClass?l:null}}function Xt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=tr(e,f(t)),i=t.text.length>e.options.maxHighlightLength&&Zt(e.doc.mode,r.state),l=Gt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=l.styles,l.classes?t.styleClasses=l.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function tr(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new St(r,!0,t);var l=rn(e,t,n),s=l>r.first&&Mt(r,l-1).stateAfter,p=s?St.fromSaved(r,s,l):new St(r,nr(r.mode),l);return r.iter(l,t,function(m){K(e,m.text,p);var C=p.line;m.stateAfter=C==t-1||C%5==0||C>=i.viewFrom&&C<i.viewTo?p.save():null,p.nextLine()}),n&&(r.modeFrontier=p.line),p}function K(e,t,n,r){var i=e.doc.mode,l=new sr(t,e.options.tabSize,n);for(l.start=l.pos=r||0,t==""&&ue(i,n.state);!l.eol();)je(i,l,n.state),l.start=l.pos}function ue(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=ir(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function je(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=ir(e,n).mode);var l=e.token(t,n);if(t.pos>t.start)return l}throw new Error("Mode "+e.name+" failed to advance stream.")}var At=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Jt(e,t,n,r){var i=e.doc,l=i.mode,s;t=$(i,t);var p=Mt(i,t.line),m=tr(e,t.line,n),C=new sr(p.text,e.options.tabSize,m),oe;for(r&&(oe=[]);(r||C.pos<t.ch)&&!C.eol();)C.start=C.pos,s=je(l,C,m.state),r&&oe.push(new At(C,s,Zt(i.mode,m.state)));return r?oe:new At(C,s,m.state)}function or(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";t[r]==null?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function xr(e,t,n,r,i,l,s){var p=n.flattenSpans;p==null&&(p=e.options.flattenSpans);var m=0,C=null,oe=new sr(t,e.options.tabSize,r),ce,He=e.options.addModeClass&&[null];for(t==""&&or(ue(n,r.state),l);!oe.eol();){if(oe.pos>e.options.maxHighlightLength?(p=!1,s&&K(e,t,r,oe.pos),oe.pos=t.length,ce=null):ce=or(je(n,oe,r.state,He),l),He){var Ue=He[0].name;Ue&&(ce="m-"+(ce?Ue+" "+ce:Ue))}if(!p||C!=ce){for(;m<oe.start;)m=Math.min(oe.start,m+5e3),i(m,C);C=ce}oe.start=oe.pos}for(;m<oe.pos;){var ut=Math.min(oe.pos,m+5e3);i(ut,C),m=ut}}function rn(e,t,n){for(var r,i,l=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),p=t;p>s;--p){if(p<=l.first)return l.first;var m=Mt(l,p-1),C=m.stateAfter;if(C&&(!n||p+(C instanceof Ne?C.lookAhead:0)<=l.modeFrontier))return p;var oe=he(m.text,null,e.options.tabSize);(i==null||r>oe)&&(i=p-1,r=oe)}return i}function sn(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=Mt(e,r).stateAfter;if(i&&(!(i instanceof Ne)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var nn=!1,Ar=!1;function gr(){nn=!0}function Jr(){Ar=!0}function wn(e,t,n){this.marker=e,this.from=t,this.to=n}function un(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Fi(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function li(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&e.markedSpans&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function Qr(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var l=e[i],s=l.marker,p=l.from==null||(s.inclusiveLeft?l.from<=t:l.from<t);if(p||l.from==t&&s.type=="bookmark"&&(!n||!l.marker.insertLeft)){var m=l.to==null||(s.inclusiveRight?l.to>=t:l.to>t);(r||(r=[])).push(new wn(s,l.from,m?null:l.to))}}return r}function Bn(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var l=e[i],s=l.marker,p=l.to==null||(s.inclusiveRight?l.to>=t:l.to>t);if(p||l.from==t&&s.type=="bookmark"&&(!n||l.marker.insertLeft)){var m=l.from==null||(s.inclusiveLeft?l.from<=t:l.from<t);(r||(r=[])).push(new wn(s,m?null:l.from-t,l.to==null?null:l.to-t))}}return r}function Fn(e,t){if(t.full)return null;var n=pe(e,t.from.line)&&Mt(e,t.from.line).markedSpans,r=pe(e,t.to.line)&&Mt(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,l=t.to.ch,s=Oe(t.from,t.to)==0,p=Qr(n,i,s),m=Bn(r,l,s),C=t.text.length==1,oe=d(t.text).length+(C?i:0);if(p)for(var ce=0;ce<p.length;++ce){var He=p[ce];if(He.to==null){var Ue=un(m,He.marker);Ue?C&&(He.to=Ue.to==null?null:Ue.to+oe):He.to=i}}if(m)for(var ut=0;ut<m.length;++ut){var Lt=m[ut];if(Lt.to!=null&&(Lt.to+=oe),Lt.from==null){var Et=un(p,Lt.marker);Et||(Lt.from=oe,C&&(p||(p=[])).push(Lt))}else Lt.from+=oe,C&&(p||(p=[])).push(Lt)}p&&(p=oi(p)),m&&m!=p&&(m=oi(m));var It=[p];if(!C){var Kt=t.text.length-2,Pt;if(Kt>0&&p)for(var zt=0;zt<p.length;++zt)p[zt].to==null&&(Pt||(Pt=[])).push(new wn(p[zt].marker,null,null));for(var er=0;er<Kt;++er)It.push(Pt);It.push(m)}return It}function oi(e){for(var t=0;t<e.length;++t){var n=e[t];n.from!=null&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Hi(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(Ue){if(Ue.markedSpans)for(var ut=0;ut<Ue.markedSpans.length;++ut){var Lt=Ue.markedSpans[ut].marker;Lt.readOnly&&(!r||De(r,Lt)==-1)&&(r||(r=[])).push(Lt)}}),!r)return null;for(var i=[{from:t,to:n}],l=0;l<r.length;++l)for(var s=r[l],p=s.find(0),m=0;m<i.length;++m){var C=i[m];if(!(Oe(C.to,p.from)<0||Oe(C.from,p.to)>0)){var oe=[m,1],ce=Oe(C.from,p.from),He=Oe(C.to,p.to);(ce<0||!s.inclusiveLeft&&!ce)&&oe.push({from:C.from,to:p.from}),(He>0||!s.inclusiveRight&&!He)&&oe.push({from:p.to,to:C.to}),i.splice.apply(i,oe),m+=oe.length-3}}return i}function si(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Gi(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function vn(e){return e.inclusiveLeft?-1:0}function Sn(e){return e.inclusiveRight?1:0}function ui(e,t){var n=e.lines.length-t.lines.length;if(n!=0)return n;var r=e.find(),i=t.find(),l=Oe(r.from,i.from)||vn(e)-vn(t);if(l)return-l;var s=Oe(r.to,i.to)||Sn(e)-Sn(t);return s||t.id-e.id}function fi(e,t){var n=Ar&&e.markedSpans,r;if(n)for(var i=void 0,l=0;l<n.length;++l)i=n[l],i.marker.collapsed&&(t?i.from:i.to)==null&&(!r||ui(r,i.marker)<0)&&(r=i.marker);return r}function Ki(e){return fi(e,!0)}function _n(e){return fi(e,!1)}function j(e,t){var n=Ar&&e.markedSpans,r;if(n)for(var i=0;i<n.length;++i){var l=n[i];l.marker.collapsed&&(l.from==null||l.from<t)&&(l.to==null||l.to>t)&&(!r||ui(r,l.marker)<0)&&(r=l.marker)}return r}function me(e,t,n,r,i){var l=Mt(e,t),s=Ar&&l.markedSpans;if(s)for(var p=0;p<s.length;++p){var m=s[p];if(m.marker.collapsed){var C=m.marker.find(0),oe=Oe(C.from,n)||vn(m.marker)-vn(i),ce=Oe(C.to,r)||Sn(m.marker)-Sn(i);if(!(oe>=0&&ce<=0||oe<=0&&ce>=0)&&(oe<=0&&(m.marker.inclusiveRight&&i.inclusiveLeft?Oe(C.to,n)>=0:Oe(C.to,n)>0)||oe>=0&&(m.marker.inclusiveRight&&i.inclusiveLeft?Oe(C.from,r)<=0:Oe(C.from,r)<0)))return!0}}}function Ve(e){for(var t;t=Ki(e);)e=t.find(-1,!0).line;return e}function st(e){for(var t;t=_n(e);)e=t.find(1,!0).line;return e}function $e(e){for(var t,n;t=_n(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function Ke(e,t){var n=Mt(e,t),r=Ve(n);return n==r?t:f(r)}function mt(e,t){if(t>e.lastLine())return t;var n=Mt(e,t),r;if(!Tt(e,n))return t;for(;r=_n(n);)n=r.find(1,!0).line;return f(n)+1}function Tt(e,t){var n=Ar&&t.markedSpans;if(n){for(var r=void 0,i=0;i<n.length;++i)if(r=n[i],!!r.marker.collapsed){if(r.from==null)return!0;if(!r.marker.widgetNode&&r.from==0&&r.marker.inclusiveLeft&&rr(e,t,r))return!0}}}function rr(e,t,n){if(n.to==null){var r=n.marker.find(1,!0);return rr(e,r.line,un(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,l=0;l<t.markedSpans.length;++l)if(i=t.markedSpans[l],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(i.to==null||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&rr(e,t,i))return!0}function ar(e){e=Ve(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var l=n.parent;l;n=l,l=n.parent)for(var s=0;s<l.children.length;++s){var p=l.children[s];if(p==n)break;t+=p.height}return t}function Nr(e){if(e.height==0)return 0;for(var t=e.text.length,n,r=e;n=Ki(r);){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}for(r=e;n=_n(r);){var l=n.find(0,!0);t-=r.text.length-l.from.ch,r=l.to.line,t+=r.text.length-l.to.ch}return t}function fn(e){var t=e.display,n=e.doc;t.maxLine=Mt(n,n.first),t.maxLineLength=Nr(t.maxLine),t.maxLineChanged=!0,n.iter(function(r){var i=Nr(r);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=r)})}var cn=function(e,t,n){this.text=e,Gi(this,t),this.height=n?n(this):1};cn.prototype.lineNo=function(){return f(this)},o(cn);function ts(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),si(e),Gi(e,n);var i=r?r(e):1;i!=e.height&&X(e,i)}function rs(e){e.parent=null,si(e)}var ns={},is={};function fl(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?is:ns;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function cl(e,t){var n=Ce("span",null,null,b?"padding-right: .1px":null),r={pre:Ce("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var l=i?t.rest[i-1]:t.line,s=void 0;r.pos=0,r.addToken=ls,Wt(e.display.measure)&&(s=we(l,e.doc.direction))&&(r.addToken=ss(r.addToken,s)),r.map=[];var p=t!=e.display.externalMeasured&&f(l);us(l,r,Xt(e,l,p)),l.styleClasses&&(l.styleClasses.bgClass&&(r.bgClass=fe(l.styleClasses.bgClass,r.bgClass||"")),l.styleClasses.textClass&&(r.textClass=fe(l.styleClasses.textClass,r.textClass||""))),r.map.length==0&&r.map.push(0,0,r.content.appendChild(_t(e.display.measure))),i==0?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(b){var m=r.content.lastChild;(/\bcm-tab\b/.test(m.className)||m.querySelector&&m.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return qt(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=fe(r.pre.className,r.textClass||"")),r}function as(e){var t=O("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function ls(e,t,n,r,i,l,s){if(t){var p=e.splitSpaces?os(t,e.trailingSpace):t,m=e.cm.state.specialChars,C=!1,oe;if(!m.test(t))e.col+=t.length,oe=document.createTextNode(p),e.map.push(e.pos,e.pos+t.length,oe),w&&L<9&&(C=!0),e.pos+=t.length;else{oe=document.createDocumentFragment();for(var ce=0;;){m.lastIndex=ce;var He=m.exec(t),Ue=He?He.index-ce:t.length-ce;if(Ue){var ut=document.createTextNode(p.slice(ce,ce+Ue));w&&L<9?oe.appendChild(O("span",[ut])):oe.appendChild(ut),e.map.push(e.pos,e.pos+Ue,ut),e.col+=Ue,e.pos+=Ue}if(!He)break;ce+=Ue+1;var Lt=void 0;if(He[0]=="	"){var Et=e.cm.options.tabSize,It=Et-e.col%Et;Lt=oe.appendChild(O("span",J(It),"cm-tab")),Lt.setAttribute("role","presentation"),Lt.setAttribute("cm-text","	"),e.col+=It}else He[0]=="\r"||He[0]==`
`?(Lt=oe.appendChild(O("span",He[0]=="\r"?"␍":"␤","cm-invalidchar")),Lt.setAttribute("cm-text",He[0]),e.col+=1):(Lt=e.cm.options.specialCharPlaceholder(He[0]),Lt.setAttribute("cm-text",He[0]),w&&L<9?oe.appendChild(O("span",[Lt])):oe.appendChild(Lt),e.col+=1);e.map.push(e.pos,e.pos+1,Lt),e.pos++}}if(e.trailingSpace=p.charCodeAt(t.length-1)==32,n||r||i||C||l||s){var Kt=n||"";r&&(Kt+=r),i&&(Kt+=i);var Pt=O("span",[oe],Kt,l);if(s)for(var zt in s)s.hasOwnProperty(zt)&&zt!="style"&&zt!="class"&&Pt.setAttribute(zt,s[zt]);return e.content.appendChild(Pt)}e.content.appendChild(oe)}}function os(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var l=e.charAt(i);l==" "&&n&&(i==e.length-1||e.charCodeAt(i+1)==32)&&(l=" "),r+=l,n=l==" "}return r}function ss(e,t){return function(n,r,i,l,s,p,m){i=i?i+" cm-force-border":"cm-force-border";for(var C=n.pos,oe=C+r.length;;){for(var ce=void 0,He=0;He<t.length&&(ce=t[He],!(ce.to>C&&ce.from<=C));He++);if(ce.to>=oe)return e(n,r,i,l,s,p,m);e(n,r.slice(0,ce.to-C),i,l,null,p,m),l=null,r=r.slice(ce.to-C),C=ce.to}}}function hl(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function us(e,t,n){var r=e.markedSpans,i=e.text,l=0;if(!r){for(var s=1;s<n.length;s+=2)t.addToken(t,i.slice(l,l=n[s]),fl(n[s+1],t.cm.options));return}for(var p=i.length,m=0,C=1,oe="",ce,He,Ue=0,ut,Lt,Et,It,Kt;;){if(Ue==m){ut=Lt=Et=He="",Kt=null,It=null,Ue=1/0;for(var Pt=[],zt=void 0,er=0;er<r.length;++er){var Qt=r[er],lr=Qt.marker;if(lr.type=="bookmark"&&Qt.from==m&&lr.widgetNode)Pt.push(lr);else if(Qt.from<=m&&(Qt.to==null||Qt.to>m||lr.collapsed&&Qt.to==m&&Qt.from==m)){if(Qt.to!=null&&Qt.to!=m&&Ue>Qt.to&&(Ue=Qt.to,Lt=""),lr.className&&(ut+=" "+lr.className),lr.css&&(He=(He?He+";":"")+lr.css),lr.startStyle&&Qt.from==m&&(Et+=" "+lr.startStyle),lr.endStyle&&Qt.to==Ue&&(zt||(zt=[])).push(lr.endStyle,Qt.to),lr.title&&((Kt||(Kt={})).title=lr.title),lr.attributes)for(var hr in lr.attributes)(Kt||(Kt={}))[hr]=lr.attributes[hr];lr.collapsed&&(!It||ui(It.marker,lr)<0)&&(It=Qt)}else Qt.from>m&&Ue>Qt.from&&(Ue=Qt.from)}if(zt)for(var Or=0;Or<zt.length;Or+=2)zt[Or+1]==Ue&&(Lt+=" "+zt[Or]);if(!It||It.from==m)for(var _r=0;_r<Pt.length;++_r)hl(t,0,Pt[_r]);if(It&&(It.from||0)==m){if(hl(t,(It.to==null?p+1:It.to)-m,It.marker,It.from==null),It.to==null)return;It.to==m&&(It=!1)}}if(m>=p)break;for(var zr=Math.min(p,Ue);;){if(oe){var Fr=m+oe.length;if(!It){var Lr=Fr>zr?oe.slice(0,zr-m):oe;t.addToken(t,Lr,ce?ce+ut:ut,Et,m+Lr.length==Ue?Lt:"",He,Kt)}if(Fr>=zr){oe=oe.slice(zr-m),m=zr;break}m=Fr,Et=""}oe=i.slice(l,l=n[C++]),ce=fl(n[C++],t.cm.options)}}}function pl(e,t,n){this.line=t,this.rest=$e(t),this.size=this.rest?f(d(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Tt(e,t)}function Vi(e,t,n){for(var r=[],i,l=t;l<n;l=i){var s=new pl(e.doc,Mt(e.doc,l),l);i=l+s.size,r.push(s)}return r}var Hn=null;function fs(e){Hn?Hn.ops.push(e):e.ownsGroup=Hn={ops:[e],delayedCallbacks:[]}}function cs(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}function hs(e,t){var n=e.ownsGroup;if(n)try{cs(n)}finally{Hn=null,t(n)}}var ci=null;function Tr(e,t){var n=Dt(e,t);if(n.length){var r=Array.prototype.slice.call(arguments,2),i;Hn?i=Hn.delayedCallbacks:ci?i=ci:(i=ci=[],setTimeout(ps,0));for(var l=function(p){i.push(function(){return n[p].apply(null,r)})},s=0;s<n.length;++s)l(s)}}function ps(){var e=ci;ci=null;for(var t=0;t<e.length;++t)e[t]()}function dl(e,t,n,r){for(var i=0;i<t.changes.length;i++){var l=t.changes[i];l=="text"?gs(e,t):l=="gutter"?vl(e,t,n,r):l=="class"?ma(e,t):l=="widget"&&vs(e,t,r)}t.changes=null}function hi(e){return e.node==e.text&&(e.node=O("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),w&&L<8&&(e.node.style.zIndex=2)),e.node}function ds(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=hi(t);t.background=r.insertBefore(O("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}function gl(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):cl(e,t)}function gs(e,t){var n=t.text.className,r=gl(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,ma(e,t)):n&&(t.text.className=n)}function ma(e,t){ds(e,t),t.line.wrapClass?hi(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function vl(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=hi(t);t.gutterBackground=O("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var l=t.line.gutterMarkers;if(e.options.lineNumbers||l){var s=hi(t),p=t.gutter=O("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(p.setAttribute("aria-hidden","true"),e.display.input.setUneditable(p),s.insertBefore(p,t.text),t.line.gutterClass&&(p.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!l||!l["CodeMirror-linenumbers"])&&(t.lineNumber=p.appendChild(O("div",Re(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),l)for(var m=0;m<e.display.gutterSpecs.length;++m){var C=e.display.gutterSpecs[m].className,oe=l.hasOwnProperty(C)&&l[C];oe&&p.appendChild(O("div",[oe],"CodeMirror-gutter-elt","left: "+r.gutterLeft[C]+"px; width: "+r.gutterWidth[C]+"px"))}}}function vs(e,t,n){t.alignable&&(t.alignable=null);for(var r=ne("CodeMirror-linewidget"),i=t.node.firstChild,l=void 0;i;i=l)l=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);_l(e,t,n)}function _s(e,t,n,r){var i=gl(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),ma(e,t),vl(e,t,n,r),_l(e,t,r),t.node}function _l(e,t,n){if(ml(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)ml(e,t.rest[r],t,n,!1)}function ml(e,t,n,r,i){if(t.widgets)for(var l=hi(n),s=0,p=t.widgets;s<p.length;++s){var m=p[s],C=O("div",[m.node],"CodeMirror-linewidget"+(m.className?" "+m.className:""));m.handleMouseEvents||C.setAttribute("cm-ignore-events","true"),ms(m,C,n,r),e.display.input.setUneditable(C),i&&m.above?l.insertBefore(C,n.gutter||n.text):l.appendChild(C),Tr(m,"redraw")}}function ms(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function pi(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Pe(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),ke(t.display.measure,O("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function hn(e,t){for(var n=Z(t);n!=e.wrapper;n=n.parentNode)if(!n||n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true"||n.parentNode==e.sizer&&n!=e.mover)return!0}function Wi(e){return e.lineSpace.offsetTop}function ba(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function bl(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=ke(e.measure,O("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function an(e){return Se-e.display.nativeBarWidth}function On(e){return e.display.scroller.clientWidth-an(e)-e.display.barWidth}function La(e){return e.display.scroller.clientHeight-an(e)-e.display.barHeight}function bs(e,t,n){var r=e.options.lineWrapping,i=r&&On(e);if(!t.measure.heights||r&&t.measure.width!=i){var l=t.measure.heights=[];if(r){t.measure.width=i;for(var s=t.text.firstChild.getClientRects(),p=0;p<s.length-1;p++){var m=s[p],C=s[p+1];Math.abs(m.bottom-C.bottom)>2&&l.push((m.bottom+C.top)/2-n.top)}}l.push(n.bottom-n.top)}}function Ll(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(f(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function Ls(e,t){t=Ve(t);var n=f(t),r=e.display.externalMeasured=new pl(e.doc,t,n);r.lineN=n;var i=r.built=cl(e,r);return r.text=i.pre,ke(e.display.lineMeasure,i.pre),r}function yl(e,t,n,r){return ln(e,Gn(e,t),n,r)}function ya(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Cn(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function Gn(e,t){var n=f(t),r=ya(e,n);r&&!r.text?r=null:r&&r.changes&&(dl(e,r,n,wa(e)),e.curOp.forceUpdate=!0),r||(r=Ls(e,t));var i=Ll(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function ln(e,t,n,r,i){t.before&&(n=-1);var l=n+(r||""),s;return t.cache.hasOwnProperty(l)?s=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(bs(e,t.view,t.rect),t.hasHeights=!0),s=xs(e,t,n,r),s.bogus||(t.cache[l]=s)),{left:s.left,right:s.right,top:i?s.rtop:s.top,bottom:i?s.rbottom:s.bottom}}var xl={left:0,right:0,top:0,bottom:0};function kl(e,t,n){for(var r,i,l,s,p,m,C=0;C<e.length;C+=3)if(p=e[C],m=e[C+1],t<p?(i=0,l=1,s="left"):t<m?(i=t-p,l=i+1):(C==e.length-3||t==m&&e[C+3]>t)&&(l=m-p,i=l-1,t>=m&&(s="right")),i!=null){if(r=e[C+2],p==m&&n==(r.insertLeft?"left":"right")&&(s=n),n=="left"&&i==0)for(;C&&e[C-2]==e[C-3]&&e[C-1].insertLeft;)r=e[(C-=3)+2],s="left";if(n=="right"&&i==m-p)for(;C<e.length-3&&e[C+3]==e[C+4]&&!e[C+5].insertLeft;)r=e[(C+=3)+2],s="right";break}return{node:r,start:i,end:l,collapse:s,coverStart:p,coverEnd:m}}function ys(e,t){var n=xl;if(t=="left")for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function xs(e,t,n,r){var i=kl(t.map,n,r),l=i.node,s=i.start,p=i.end,m=i.collapse,C;if(l.nodeType==3){for(var oe=0;oe<4;oe++){for(;s&&wt(t.line.text.charAt(i.coverStart+s));)--s;for(;i.coverStart+p<i.coverEnd&&wt(t.line.text.charAt(i.coverStart+p));)++p;if(w&&L<9&&s==0&&p==i.coverEnd-i.coverStart?C=l.parentNode.getBoundingClientRect():C=ys(tt(l,s,p).getClientRects(),r),C.left||C.right||s==0)break;p=s,s=s-1,m="right"}w&&L<11&&(C=ks(e.display.measure,C))}else{s>0&&(m=r="right");var ce;e.options.lineWrapping&&(ce=l.getClientRects()).length>1?C=ce[r=="right"?ce.length-1:0]:C=l.getBoundingClientRect()}if(w&&L<9&&!s&&(!C||!C.left&&!C.right)){var He=l.parentNode.getClientRects()[0];He?C={left:He.left,right:He.left+Vn(e.display),top:He.top,bottom:He.bottom}:C=xl}for(var Ue=C.top-t.rect.top,ut=C.bottom-t.rect.top,Lt=(Ue+ut)/2,Et=t.view.measure.heights,It=0;It<Et.length-1&&!(Lt<Et[It]);It++);var Kt=It?Et[It-1]:0,Pt=Et[It],zt={left:(m=="right"?C.right:C.left)-t.rect.left,right:(m=="left"?C.left:C.right)-t.rect.left,top:Kt,bottom:Pt};return!C.left&&!C.right&&(zt.bogus=!0),e.options.singleCursorHeightPerLine||(zt.rtop=Ue,zt.rbottom=ut),zt}function ks(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Ee(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function Al(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Tl(e){e.display.externalMeasure=null,ie(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Al(e.display.view[t])}function di(e){Tl(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function wl(e){return S&&G?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function Sl(e){return S&&G?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function xa(e){var t=Ve(e),n=t.widgets,r=0;if(n)for(var i=0;i<n.length;++i)n[i].above&&(r+=pi(n[i]));return r}function zi(e,t,n,r,i){if(!i){var l=xa(t);n.top+=l,n.bottom+=l}if(r=="line")return n;r||(r="local");var s=ar(t);if(r=="local"?s+=Wi(e.display):s-=e.display.viewOffset,r=="page"||r=="window"){var p=e.display.lineSpace.getBoundingClientRect();s+=p.top+(r=="window"?0:Sl(Ye(e)));var m=p.left+(r=="window"?0:wl(Ye(e)));n.left+=m,n.right+=m}return n.top+=s,n.bottom+=s,n}function Ol(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;if(n=="page")r-=wl(Ye(e)),i-=Sl(Ye(e));else if(n=="local"||!n){var l=e.display.sizer.getBoundingClientRect();r+=l.left,i+=l.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:r-s.left,top:i-s.top}}function ji(e,t,n,r,i){return r||(r=Mt(e.doc,t.line)),zi(e,r,yl(e,r,t.ch,i),n)}function $r(e,t,n,r,i,l){r=r||Mt(e.doc,t.line),i||(i=Gn(e,r));function s(ut,Lt){var Et=ln(e,i,ut,Lt?"right":"left",l);return Lt?Et.left=Et.right:Et.right=Et.left,zi(e,r,Et,n)}var p=we(r,e.doc.direction),m=t.ch,C=t.sticky;if(m>=r.text.length?(m=r.text.length,C="before"):m<=0&&(m=0,C="after"),!p)return s(C=="before"?m-1:m,C=="before");function oe(ut,Lt,Et){var It=p[Lt],Kt=It.level==1;return s(Et?ut-1:ut,Kt!=Et)}var ce=Je(p,m,C),He=Ze,Ue=oe(m,ce,C=="before");return He!=null&&(Ue.other=oe(m,He,C!="before")),Ue}function El(e,t){var n=0;t=$(e.doc,t),e.options.lineWrapping||(n=Vn(e.display)*t.ch);var r=Mt(e.doc,t.line),i=ar(r)+Wi(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function ka(e,t,n,r,i){var l=se(e,t,n);return l.xRel=i,r&&(l.outside=r),l}function Aa(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,n<0)return ka(r.first,0,null,-1,-1);var i=B(r,n),l=r.first+r.size-1;if(i>l)return ka(r.first+r.size-1,Mt(r,l).text.length,null,1,1);t<0&&(t=0);for(var s=Mt(r,i);;){var p=As(e,s,i,t,n),m=j(s,p.ch+(p.xRel>0||p.outside>0?1:0));if(!m)return p;var C=m.find(1);if(C.line==i)return C;s=Mt(r,i=C.line)}}function Nl(e,t,n,r){r-=xa(t);var i=t.text.length,l=W(function(s){return ln(e,n,s-1).bottom<=r},i,0);return i=W(function(s){return ln(e,n,s).top>r},l,i),{begin:l,end:i}}function Cl(e,t,n,r){n||(n=Gn(e,t));var i=zi(e,t,ln(e,n,r),"line").top;return Nl(e,t,n,i)}function Ta(e,t,n,r){return e.bottom<=n?!1:e.top>n?!0:(r?e.left:e.right)>t}function As(e,t,n,r,i){i-=ar(t);var l=Gn(e,t),s=xa(t),p=0,m=t.text.length,C=!0,oe=we(t,e.doc.direction);if(oe){var ce=(e.options.lineWrapping?ws:Ts)(e,t,n,l,oe,r,i);C=ce.level!=1,p=C?ce.from:ce.to-1,m=C?ce.to:ce.from-1}var He=null,Ue=null,ut=W(function(er){var Qt=ln(e,l,er);return Qt.top+=s,Qt.bottom+=s,Ta(Qt,r,i,!1)?(Qt.top<=i&&Qt.left<=r&&(He=er,Ue=Qt),!0):!1},p,m),Lt,Et,It=!1;if(Ue){var Kt=r-Ue.left<Ue.right-r,Pt=Kt==C;ut=He+(Pt?0:1),Et=Pt?"after":"before",Lt=Kt?Ue.left:Ue.right}else{!C&&(ut==m||ut==p)&&ut++,Et=ut==0?"after":ut==t.text.length?"before":ln(e,l,ut-(C?1:0)).bottom+s<=i==C?"after":"before";var zt=$r(e,se(n,ut,Et),"line",t,l);Lt=zt.left,It=i<zt.top?-1:i>=zt.bottom?1:0}return ut=jt(t.text,ut,1),ka(n,ut,Et,It,r-Lt)}function Ts(e,t,n,r,i,l,s){var p=W(function(ce){var He=i[ce],Ue=He.level!=1;return Ta($r(e,se(n,Ue?He.to:He.from,Ue?"before":"after"),"line",t,r),l,s,!0)},0,i.length-1),m=i[p];if(p>0){var C=m.level!=1,oe=$r(e,se(n,C?m.from:m.to,C?"after":"before"),"line",t,r);Ta(oe,l,s,!0)&&oe.top>s&&(m=i[p-1])}return m}function ws(e,t,n,r,i,l,s){var p=Nl(e,t,r,s),m=p.begin,C=p.end;/\s/.test(t.text.charAt(C-1))&&C--;for(var oe=null,ce=null,He=0;He<i.length;He++){var Ue=i[He];if(!(Ue.from>=C||Ue.to<=m)){var ut=Ue.level!=1,Lt=ln(e,r,ut?Math.min(C,Ue.to)-1:Math.max(m,Ue.from)).right,Et=Lt<l?l-Lt+1e9:Lt-l;(!oe||ce>Et)&&(oe=Ue,ce=Et)}}return oe||(oe=i[i.length-1]),oe.from<m&&(oe={from:m,to:oe.to,level:oe.level}),oe.to>C&&(oe={from:oe.from,to:C,level:oe.level}),oe}var En;function Kn(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(En==null){En=O("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)En.appendChild(document.createTextNode("x")),En.appendChild(O("br"));En.appendChild(document.createTextNode("x"))}ke(e.measure,En);var n=En.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),ie(e.measure),n||1}function Vn(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=O("span","xxxxxxxxxx"),n=O("pre",[t],"CodeMirror-line-like");ke(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function wa(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,l=t.gutters.firstChild,s=0;l;l=l.nextSibling,++s){var p=e.display.gutterSpecs[s].className;n[p]=l.offsetLeft+l.clientLeft+i,r[p]=l.clientWidth}return{fixedPos:Sa(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function Sa(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ml(e){var t=Kn(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Vn(e.display)-3);return function(i){if(Tt(e.doc,i))return 0;var l=0;if(i.widgets)for(var s=0;s<i.widgets.length;s++)i.widgets[s].height&&(l+=i.widgets[s].height);return n?l+(Math.ceil(i.text.length/r)||1)*t:l+t}}function Oa(e){var t=e.doc,n=Ml(e);t.iter(function(r){var i=n(r);i!=r.height&&X(r,i)})}function Nn(e,t,n,r){var i=e.display;if(!n&&Z(t).getAttribute("cm-not-content")=="true")return null;var l,s,p=i.lineSpace.getBoundingClientRect();try{l=t.clientX-p.left,s=t.clientY-p.top}catch{return null}var m=Aa(e,l,s),C;if(r&&m.xRel>0&&(C=Mt(e.doc,m.line).text).length==m.ch){var oe=he(C,C.length,e.options.tabSize)-C.length;m=se(m.line,Math.max(0,Math.round((l-bl(e.display).left)/Vn(e.display))-oe))}return m}function Cn(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,t<0)return r}function Dr(e,t,n,r){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Ar&&Ke(e.doc,t)<i.viewTo&&bn(e);else if(n<=i.viewFrom)Ar&&mt(e.doc,n+r)>i.viewFrom?bn(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)bn(e);else if(t<=i.viewFrom){var l=Xi(e,n,n+r,1);l?(i.view=i.view.slice(l.index),i.viewFrom=l.lineN,i.viewTo+=r):bn(e)}else if(n>=i.viewTo){var s=Xi(e,t,t,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):bn(e)}else{var p=Xi(e,t,t,-1),m=Xi(e,n,n+r,1);p&&m?(i.view=i.view.slice(0,p.index).concat(Vi(e,p.lineN,m.lineN)).concat(i.view.slice(m.index)),i.viewTo+=r):bn(e)}var C=i.externalMeasured;C&&(n<C.lineN?C.lineN+=r:t<C.lineN+C.size&&(i.externalMeasured=null))}function mn(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var l=r.view[Cn(e,t)];if(l.node!=null){var s=l.changes||(l.changes=[]);De(s,n)==-1&&s.push(n)}}}function bn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Xi(e,t,n,r){var i=Cn(e,t),l,s=e.display.view;if(!Ar||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var p=e.display.viewFrom,m=0;m<i;m++)p+=s[m].size;if(p!=t){if(r>0){if(i==s.length-1)return null;l=p+s[i].size-t,i++}else l=p-t;t+=l,n+=l}for(;Ke(e.doc,n)!=n;){if(i==(r<0?0:s.length-1))return null;n+=r*s[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function Ss(e,t,n){var r=e.display,i=r.view;i.length==0||t>=r.viewTo||n<=r.viewFrom?(r.view=Vi(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Vi(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Cn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Vi(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Cn(e,n)))),r.viewTo=n}function Rl(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function gi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ul(e,t){t===void 0&&(t=!0);var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),l=r.selection=document.createDocumentFragment(),s=e.options.$customCursor;s&&(t=!0);for(var p=0;p<n.sel.ranges.length;p++)if(!(!t&&p==n.sel.primIndex)){var m=n.sel.ranges[p];if(!(m.from().line>=e.display.viewTo||m.to().line<e.display.viewFrom)){var C=m.empty();if(s){var oe=s(e,m);oe&&Ea(e,oe,i)}else(C||e.options.showCursorWhenSelecting)&&Ea(e,m.head,i);C||Os(e,m,l)}}return r}function Ea(e,t,n){var r=$r(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(O("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var l=ji(e,t,"div",null,null),s=l.right-l.left;i.style.width=(s>0?s:e.defaultCharWidth())+"px"}if(r.other){var p=n.appendChild(O("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));p.style.display="",p.style.left=r.other.left+"px",p.style.top=r.other.top+"px",p.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function Yi(e,t){return e.top-t.top||e.left-t.left}function Os(e,t,n){var r=e.display,i=e.doc,l=document.createDocumentFragment(),s=bl(e.display),p=s.left,m=Math.max(r.sizerWidth,On(e)-r.sizer.offsetLeft)-s.right,C=i.direction=="ltr";function oe(Pt,zt,er,Qt){zt<0&&(zt=0),zt=Math.round(zt),Qt=Math.round(Qt),l.appendChild(O("div",null,"CodeMirror-selected","position: absolute; left: "+Pt+`px;
                             top: `+zt+"px; width: "+(er??m-Pt)+`px;
                             height: `+(Qt-zt)+"px"))}function ce(Pt,zt,er){var Qt=Mt(i,Pt),lr=Qt.text.length,hr,Or;function _r(Lr,Hr){return ji(e,se(Pt,Lr),"div",Qt,Hr)}function zr(Lr,Hr,Cr){var kr=Cl(e,Qt,null,Lr),yr=Hr=="ltr"==(Cr=="after")?"left":"right",mr=Cr=="after"?kr.begin:kr.end-(/\s/.test(Qt.text.charAt(kr.end-1))?2:1);return _r(mr,yr)[yr]}var Fr=we(Qt,i.direction);return qe(Fr,zt||0,er??lr,function(Lr,Hr,Cr,kr){var yr=Cr=="ltr",mr=_r(Lr,yr?"left":"right"),Gr=_r(Hr-1,yr?"right":"left"),ri=zt==null&&Lr==0,Tn=er==null&&Hr==lr,Ur=kr==0,on=!Fr||kr==Fr.length-1;if(Gr.top-mr.top<=3){var Er=(C?ri:Tn)&&Ur,rl=(C?Tn:ri)&&on,gn=Er?p:(yr?mr:Gr).left,Pn=rl?m:(yr?Gr:mr).right;oe(gn,mr.top,Pn-gn,mr.bottom)}else{var Dn,Pr,ni,nl;yr?(Dn=C&&ri&&Ur?p:mr.left,Pr=C?m:zr(Lr,Cr,"before"),ni=C?p:zr(Hr,Cr,"after"),nl=C&&Tn&&on?m:Gr.right):(Dn=C?zr(Lr,Cr,"before"):p,Pr=!C&&ri&&Ur?m:mr.right,ni=!C&&Tn&&on?p:Gr.left,nl=C?zr(Hr,Cr,"after"):m),oe(Dn,mr.top,Pr-Dn,mr.bottom),mr.bottom<Gr.top&&oe(p,mr.bottom,null,Gr.top),oe(ni,Gr.top,nl-ni,Gr.bottom)}(!hr||Yi(mr,hr)<0)&&(hr=mr),Yi(Gr,hr)<0&&(hr=Gr),(!Or||Yi(mr,Or)<0)&&(Or=mr),Yi(Gr,Or)<0&&(Or=Gr)}),{start:hr,end:Or}}var He=t.from(),Ue=t.to();if(He.line==Ue.line)ce(He.line,He.ch,Ue.ch);else{var ut=Mt(i,He.line),Lt=Mt(i,Ue.line),Et=Ve(ut)==Ve(Lt),It=ce(He.line,He.ch,Et?ut.text.length+1:null).end,Kt=ce(Ue.line,Et?0:null,Ue.ch).start;Et&&(It.top<Kt.top-2?(oe(It.right,It.top,null,It.bottom),oe(p,Kt.top,Kt.left,Kt.bottom)):oe(It.right,It.top,Kt.left-It.right,It.bottom)),It.bottom<Kt.top&&oe(p,It.bottom,null,Kt.top)}n.appendChild(l)}function Na(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Wn(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Il(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Ma(e))}function Ca(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Wn(e))},100)}function Ma(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(qt(e,"focus",e,t),e.state.focused=!0,re(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),b&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Na(e))}function Wn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(qt(e,"blur",e,t),e.state.focused=!1,Le(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function qi(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,l=0,s=0;s<t.view.length;s++){var p=t.view[s],m=e.options.lineWrapping,C=void 0,oe=0;if(!p.hidden){if(i+=p.line.height,w&&L<8){var ce=p.node.offsetTop+p.node.offsetHeight;C=ce-n,n=ce}else{var He=p.node.getBoundingClientRect();C=He.bottom-He.top,!m&&p.text.firstChild&&(oe=p.text.firstChild.getBoundingClientRect().right-He.left-1)}var Ue=p.line.height-C;if((Ue>.005||Ue<-.005)&&(i<r&&(l-=Ue),X(p.line,C),Pl(p.line),p.rest))for(var ut=0;ut<p.rest.length;ut++)Pl(p.rest[ut]);if(oe>e.display.sizerWidth){var Lt=Math.ceil(oe/Vn(e.display));Lt>e.display.maxLineLength&&(e.display.maxLineLength=Lt,e.display.maxLine=p.line,e.display.maxLineChanged=!0)}}}Math.abs(l)>2&&(t.scroller.scrollTop+=l)}function Pl(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Zi(e,t,n){var r=n&&n.top!=null?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Wi(e));var i=n&&n.bottom!=null?n.bottom:r+e.wrapper.clientHeight,l=B(t,r),s=B(t,i);if(n&&n.ensure){var p=n.ensure.from.line,m=n.ensure.to.line;p<l?(l=p,s=B(t,ar(Mt(t,p))+e.wrapper.clientHeight)):Math.min(m,t.lastLine())>=s&&(l=B(t,ar(Mt(t,m))-e.wrapper.clientHeight),s=m)}return{from:l,to:Math.max(s,l+1)}}function Es(e,t){if(!bt(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null,l=n.wrapper.ownerDocument;if(t.top+r.top<0?i=!0:t.bottom+r.top>(l.defaultView.innerHeight||l.documentElement.clientHeight)&&(i=!1),i!=null&&!M){var s=O("div","​",null,`position: absolute;
                         top: `+(t.top-n.viewOffset-Wi(e.display))+`px;
                         height: `+(t.bottom-t.top+an(e)+n.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(i),e.display.lineSpace.removeChild(s)}}}function Ns(e,t,n,r){r==null&&(r=0);var i;!e.options.lineWrapping&&t==n&&(n=t.sticky=="before"?se(t.line,t.ch+1,"before"):t,t=t.ch?se(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var l=0;l<5;l++){var s=!1,p=$r(e,t),m=!n||n==t?p:$r(e,n);i={left:Math.min(p.left,m.left),top:Math.min(p.top,m.top)-r,right:Math.max(p.left,m.left),bottom:Math.max(p.bottom,m.bottom)+r};var C=Ra(e,i),oe=e.doc.scrollTop,ce=e.doc.scrollLeft;if(C.scrollTop!=null&&(_i(e,C.scrollTop),Math.abs(e.doc.scrollTop-oe)>1&&(s=!0)),C.scrollLeft!=null&&(Mn(e,C.scrollLeft),Math.abs(e.doc.scrollLeft-ce)>1&&(s=!0)),!s)break}return i}function Cs(e,t){var n=Ra(e,t);n.scrollTop!=null&&_i(e,n.scrollTop),n.scrollLeft!=null&&Mn(e,n.scrollLeft)}function Ra(e,t){var n=e.display,r=Kn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:n.scroller.scrollTop,l=La(e),s={};t.bottom-t.top>l&&(t.bottom=t.top+l);var p=e.doc.height+ba(n),m=t.top<r,C=t.bottom>p-r;if(t.top<i)s.scrollTop=m?0:t.top;else if(t.bottom>i+l){var oe=Math.min(t.top,(C?p:t.bottom)-l);oe!=i&&(s.scrollTop=oe)}var ce=e.options.fixedGutter?0:n.gutters.offsetWidth,He=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:n.scroller.scrollLeft-ce,Ue=On(e)-n.gutters.offsetWidth,ut=t.right-t.left>Ue;return ut&&(t.right=t.left+Ue),t.left<10?s.scrollLeft=0:t.left<He?s.scrollLeft=Math.max(0,t.left+ce-(ut?0:10)):t.right>Ue+He-3&&(s.scrollLeft=t.right+(ut?0:10)-Ue),s}function Ua(e,t){t!=null&&(Ji(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function zn(e){Ji(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function vi(e,t,n){(t!=null||n!=null)&&Ji(e),t!=null&&(e.curOp.scrollLeft=t),n!=null&&(e.curOp.scrollTop=n)}function Ms(e,t){Ji(e),e.curOp.scrollToPos=t}function Ji(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=El(e,t.from),r=El(e,t.to);Dl(e,n,r,t.margin)}}function Dl(e,t,n,r){var i=Ra(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});vi(e,i.scrollLeft,i.scrollTop)}function _i(e,t){Math.abs(e.doc.scrollTop-t)<2||(A||Pa(e,{top:t}),Bl(e,t,!0),A&&Pa(e),Li(e,100))}function Bl(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Mn(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r)&&(e.doc.scrollLeft=t,Vl(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function mi(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+ba(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+an(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Rn=function(e,t,n){this.cm=n;var r=this.vert=O("div",[O("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=O("div",[O("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),ht(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),ht(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,w&&L<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Rn.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var l=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+l)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(r==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Rn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Rn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Rn.prototype.zeroWidthHack=function(){var e=le&&!V?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new ye,this.disableVert=new ye},Rn.prototype.enableZeroWidthBar=function(e,t,n){e.style.visibility="";function r(){var i=e.getBoundingClientRect(),l=n=="vert"?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);l!=e?e.style.visibility="hidden":t.set(1e3,r)}t.set(1e3,r)},Rn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var bi=function(){};bi.prototype.update=function(){return{bottom:0,right:0}},bi.prototype.setScrollLeft=function(){},bi.prototype.setScrollTop=function(){},bi.prototype.clear=function(){};function jn(e,t){t||(t=mi(e));var n=e.display.barWidth,r=e.display.barHeight;Fl(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&qi(e),Fl(e,mi(e)),n=e.display.barWidth,r=e.display.barHeight}function Fl(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}var Hl={native:Rn,null:bi};function Gl(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Le(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Hl[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ht(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){n=="horizontal"?Mn(e,t):_i(e,t)},e),e.display.scrollbars.addClass&&re(e.display.wrapper,e.display.scrollbars.addClass)}var Rs=0;function Un(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rs,markArrays:null},fs(e.curOp)}function In(e){var t=e.curOp;t&&hs(t,function(n){for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;Us(n)})}function Us(e){for(var t=e.ops,n=0;n<t.length;n++)Is(t[n]);for(var r=0;r<t.length;r++)Ps(t[r]);for(var i=0;i<t.length;i++)Ds(t[i]);for(var l=0;l<t.length;l++)Bs(t[l]);for(var s=0;s<t.length;s++)Fs(t[s])}function Is(e){var t=e.cm,n=t.display;Gs(t),e.updateMaxLine&&fn(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Qi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ps(e){e.updatedDisplay=e.mustUpdate&&Ia(e.cm,e.update)}function Ds(e){var t=e.cm,n=t.display;e.updatedDisplay&&qi(t),e.barMeasure=mi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=yl(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+an(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-On(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Bs(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Mn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==at(Qe(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&jn(t,e.barMeasure),e.updatedDisplay&&Ba(t,e.barMeasure),e.selectionChanged&&Na(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Il(e.cm)}function Fs(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&Kl(t,e.update),n.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),e.scrollTop!=null&&Bl(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&Mn(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=Ns(t,$(r,e.scrollToPos.from),$(r,e.scrollToPos.to),e.scrollToPos.margin);Es(t,i)}var l=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(l)for(var p=0;p<l.length;++p)l[p].lines.length||qt(l[p],"hide");if(s)for(var m=0;m<s.length;++m)s[m].lines.length&&qt(s[m],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&qt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Wr(e,t){if(e.curOp)return t();Un(e);try{return t()}finally{In(e)}}function wr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Un(e);try{return t.apply(e,arguments)}finally{In(e)}}}function Ir(e){return function(){if(this.curOp)return e.apply(this,arguments);Un(this);try{return e.apply(this,arguments)}finally{In(this)}}}function Sr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Un(t);try{return e.apply(this,arguments)}finally{In(t)}}}function Li(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,rt(Hs,e))}function Hs(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=tr(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(l){if(r.line>=e.display.viewFrom){var s=l.styles,p=l.text.length>e.options.maxHighlightLength?Zt(t.mode,r.state):null,m=Gt(e,l,r,!0);p&&(r.state=p),l.styles=m.styles;var C=l.styleClasses,oe=m.classes;oe?l.styleClasses=oe:C&&(l.styleClasses=null);for(var ce=!s||s.length!=l.styles.length||C!=oe&&(!C||!oe||C.bgClass!=oe.bgClass||C.textClass!=oe.textClass),He=0;!ce&&He<s.length;++He)ce=s[He]!=l.styles[He];ce&&i.push(r.line),l.stateAfter=r.save(),r.nextLine()}else l.text.length<=e.options.maxHighlightLength&&K(e,l.text,r),l.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return Li(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Wr(e,function(){for(var l=0;l<i.length;l++)mn(e,i[l],"text")})}}var Qi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Zi(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=On(e),this.force=n,this.dims=wa(e),this.events=[]};Qi.prototype.signal=function(e,t){Ft(e,t)&&this.events.push(arguments)},Qi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)qt.apply(null,this.events[e])};function Gs(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=an(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=an(e)+"px",t.scrollbarsClipped=!0)}function Ks(e){if(e.hasFocus())return null;var t=at(Qe(e));if(!t||!Pe(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=et(e).getSelection();r.anchorNode&&r.extend&&Pe(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}function Vs(e){if(!(!e||!e.activeElt||e.activeElt==at(vt(e.activeElt)))&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&Pe(document.body,e.anchorNode)&&Pe(document.body,e.focusNode))){var t=e.activeElt.ownerDocument,n=t.defaultView.getSelection(),r=t.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),n.removeAllRanges(),n.addRange(r),n.extend(e.focusNode,e.focusOffset)}}function Ia(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return bn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&Rl(e)==0)return!1;Wl(e)&&(bn(e),t.dims=wa(e));var i=r.first+r.size,l=Math.max(t.visible.from-e.options.viewportMargin,r.first),s=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<l&&l-n.viewFrom<20&&(l=Math.max(r.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(i,n.viewTo)),Ar&&(l=Ke(e.doc,l),s=mt(e.doc,s));var p=l!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Ss(e,l,s),n.viewOffset=ar(Mt(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var m=Rl(e);if(!p&&m==0&&!t.force&&n.renderedView==n.view&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo))return!1;var C=Ks(e);return m>4&&(n.lineDiv.style.display="none"),Ws(e,n.updateLineNumbers,t.dims),m>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,Vs(C),ie(n.cursorDiv),ie(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,p&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Li(e,400)),n.updateLineNumbers=null,!0}function Kl(e,t){for(var n=t.viewport,r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==On(e)){if(n&&n.top!=null&&(n={top:Math.min(e.doc.height+ba(e.display)-La(e),n.top)}),t.visible=Zi(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else r&&(t.visible=Zi(e.display,e.doc,n));if(!Ia(e,t))break;qi(e);var i=mi(e);gi(e),jn(e,i),Ba(e,i),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Pa(e,t){var n=new Qi(e,t);if(Ia(e,n)){qi(e),Kl(e,n);var r=mi(e);gi(e),jn(e,r),Ba(e,r),n.finish()}}function Ws(e,t,n){var r=e.display,i=e.options.lineNumbers,l=r.lineDiv,s=l.firstChild;function p(ut){var Lt=ut.nextSibling;return b&&le&&e.display.currentWheelTarget==ut?ut.style.display="none":ut.parentNode.removeChild(ut),Lt}for(var m=r.view,C=r.viewFrom,oe=0;oe<m.length;oe++){var ce=m[oe];if(!ce.hidden)if(!ce.node||ce.node.parentNode!=l){var He=_s(e,ce,C,n);l.insertBefore(He,s)}else{for(;s!=ce.node;)s=p(s);var Ue=i&&t!=null&&t<=C&&ce.lineNumber;ce.changes&&(De(ce.changes,"gutter")>-1&&(Ue=!1),dl(e,ce,C,n)),Ue&&(ie(ce.lineNumber),ce.lineNumber.appendChild(document.createTextNode(Re(e.options,C)))),s=ce.node.nextSibling}C+=ce.size}for(;s;)s=p(s)}function Da(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",Tr(e,"gutterChanged",e)}function Ba(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+an(e)+"px"}function Vl(e){var t=e.display,n=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var r=Sa(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,l=r+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=l),n[s].gutterBackground&&(n[s].gutterBackground.style.left=l));var p=n[s].alignable;if(p)for(var m=0;m<p.length;m++)p[m].style.left=l}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Wl(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Re(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(O("div",[O("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),l=i.firstChild.offsetWidth,s=i.offsetWidth-l;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(l,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Da(e.display),!0}return!1}function Fa(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var l=e[i],s=null;if(typeof l!="string"&&(s=l.style,l=l.className),l=="CodeMirror-linenumbers")if(t)r=!0;else continue;n.push({className:l,style:s})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function zl(e){var t=e.gutters,n=e.gutterSpecs;ie(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],l=i.className,s=i.style,p=t.appendChild(O("div",null,"CodeMirror-gutter "+l));s&&(p.style.cssText=s),l=="CodeMirror-linenumbers"&&(e.lineGutter=p,p.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",Da(e)}function yi(e){zl(e.display),Dr(e),Vl(e)}function zs(e,t,n,r){var i=this;this.input=n,i.scrollbarFiller=O("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=O("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=Ce("div",null,"CodeMirror-code"),i.selectionDiv=O("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=O("div",null,"CodeMirror-cursors"),i.measure=O("div",null,"CodeMirror-measure"),i.lineMeasure=O("div",null,"CodeMirror-measure"),i.lineSpace=Ce("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var l=Ce("div",[i.lineSpace],"CodeMirror-lines");i.mover=O("div",[l],null,"position: relative"),i.sizer=O("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=O("div",null,null,"position: absolute; height: "+Se+"px; width: 1px;"),i.gutters=O("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=O("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=O("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),S&&I>=105&&(i.wrapper.style.clipPath="inset(0px)"),i.wrapper.setAttribute("translate","no"),w&&L<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!b&&!(A&&q)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=Fa(r.gutters,r.lineNumbers),zl(i),n.init(i)}var $i=0,pn=null;w?pn=-.53:A?pn=15:S?pn=-.7:H&&(pn=-1/3);function jl(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),n==null&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:n==null&&(n=e.wheelDelta),{x:t,y:n}}function js(e){var t=jl(e);return t.x*=pn,t.y*=pn,t}function Xl(e,t){S&&I==102&&(e.display.chromeScrollHack==null?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var n=jl(t),r=n.x,i=n.y,l=pn;t.deltaMode===0&&(r=t.deltaX,i=t.deltaY,l=1);var s=e.display,p=s.scroller,m=p.scrollWidth>p.clientWidth,C=p.scrollHeight>p.clientHeight;if(r&&m||i&&C){if(i&&le&&b){e:for(var oe=t.target,ce=s.view;oe!=p;oe=oe.parentNode)for(var He=0;He<ce.length;He++)if(ce[He].node==oe){e.display.currentWheelTarget=oe;break e}}if(r&&!A&&!F&&l!=null){i&&C&&_i(e,Math.max(0,p.scrollTop+i*l)),Mn(e,Math.max(0,p.scrollLeft+r*l)),(!i||i&&C)&&u(t),s.wheelStartX=null;return}if(i&&l!=null){var Ue=i*l,ut=e.doc.scrollTop,Lt=ut+s.wrapper.clientHeight;Ue<0?ut=Math.max(0,ut+Ue-50):Lt=Math.min(e.doc.height,Lt+Ue+50),Pa(e,{top:ut,bottom:Lt})}$i<20&&t.deltaMode!==0&&(s.wheelStartX==null?(s.wheelStartX=p.scrollLeft,s.wheelStartY=p.scrollTop,s.wheelDX=r,s.wheelDY=i,setTimeout(function(){if(s.wheelStartX!=null){var Et=p.scrollLeft-s.wheelStartX,It=p.scrollTop-s.wheelStartY,Kt=It&&s.wheelDY&&It/s.wheelDY||Et&&s.wheelDX&&Et/s.wheelDX;s.wheelStartX=s.wheelStartY=null,Kt&&(pn=(pn*$i+Kt)/($i+1),++$i)}},200)):(s.wheelDX+=r,s.wheelDY+=i))}}var jr=function(e,t){this.ranges=e,this.primIndex=t};jr.prototype.primary=function(){return this.ranges[this.primIndex]},jr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!Xe(n.anchor,r.anchor)||!Xe(n.head,r.head))return!1}return!0},jr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new fr(pt(this.ranges[t].anchor),pt(this.ranges[t].head));return new jr(e,this.primIndex)},jr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},jr.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(Oe(t,r.from())>=0&&Oe(e,r.to())<=0)return n}return-1};var fr=function(e,t){this.anchor=e,this.head=t};fr.prototype.from=function(){return k(this.anchor,this.head)},fr.prototype.to=function(){return kt(this.anchor,this.head)},fr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function en(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort(function(He,Ue){return Oe(He.from(),Ue.from())}),n=De(t,i);for(var l=1;l<t.length;l++){var s=t[l],p=t[l-1],m=Oe(p.to(),s.from());if(r&&!s.empty()?m>0:m>=0){var C=k(p.from(),s.from()),oe=kt(p.to(),s.to()),ce=p.empty()?s.from()==s.head:p.from()==p.head;l<=n&&--n,t.splice(--l,2,new fr(ce?oe:C,ce?C:oe))}}return new jr(t,n)}function Ln(e,t){return new jr([new fr(e,t||e)],0)}function yn(e){return e.text?se(e.from.line+e.text.length-1,d(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function Yl(e,t){if(Oe(e,t.from)<0)return e;if(Oe(e,t.to)<=0)return yn(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=yn(t).ch-t.to.ch),se(n,r)}function Ha(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new fr(Yl(i.anchor,t),Yl(i.head,t)))}return en(e.cm,n,e.sel.primIndex)}function ql(e,t,n){return e.line==t.line?se(n.line,e.ch-t.ch+n.ch):se(n.line+(e.line-t.line),e.ch)}function Xs(e,t,n){for(var r=[],i=se(e.first,0),l=i,s=0;s<t.length;s++){var p=t[s],m=ql(p.from,i,l),C=ql(yn(p),i,l);if(i=p.to,l=C,n=="around"){var oe=e.sel.ranges[s],ce=Oe(oe.head,oe.anchor)<0;r[s]=new fr(ce?C:m,ce?m:C)}else r[s]=new fr(m,m)}return new jr(r,e.sel.primIndex)}function Ga(e){e.doc.mode=ur(e.options,e.doc.modeOption),xi(e)}function xi(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Li(e,100),e.state.modeGen++,e.curOp&&Dr(e)}function Zl(e,t){return t.from.ch==0&&t.to.ch==0&&d(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ka(e,t,n,r){function i(Kt){return n?n[Kt]:null}function l(Kt,Pt,zt){ts(Kt,Pt,zt,r),Tr(Kt,"change",Kt,t)}function s(Kt,Pt){for(var zt=[],er=Kt;er<Pt;++er)zt.push(new cn(C[er],i(er),r));return zt}var p=t.from,m=t.to,C=t.text,oe=Mt(e,p.line),ce=Mt(e,m.line),He=d(C),Ue=i(C.length-1),ut=m.line-p.line;if(t.full)e.insert(0,s(0,C.length)),e.remove(C.length,e.size-C.length);else if(Zl(e,t)){var Lt=s(0,C.length-1);l(ce,ce.text,Ue),ut&&e.remove(p.line,ut),Lt.length&&e.insert(p.line,Lt)}else if(oe==ce)if(C.length==1)l(oe,oe.text.slice(0,p.ch)+He+oe.text.slice(m.ch),Ue);else{var Et=s(1,C.length-1);Et.push(new cn(He+oe.text.slice(m.ch),Ue,r)),l(oe,oe.text.slice(0,p.ch)+C[0],i(0)),e.insert(p.line+1,Et)}else if(C.length==1)l(oe,oe.text.slice(0,p.ch)+C[0]+ce.text.slice(m.ch),i(0)),e.remove(p.line+1,ut);else{l(oe,oe.text.slice(0,p.ch)+C[0],i(0)),l(ce,He+ce.text.slice(m.ch),Ue);var It=s(1,C.length-1);ut>1&&e.remove(p.line+1,ut-1),e.insert(p.line+1,It)}Tr(e,"change",e,t)}function xn(e,t,n){function r(i,l,s){if(i.linked)for(var p=0;p<i.linked.length;++p){var m=i.linked[p];if(m.doc!=l){var C=s&&m.sharedHist;n&&!C||(t(m.doc,C),r(m.doc,i,C))}}}r(e,null,!0)}function Jl(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Oa(e),Ga(e),Ql(e),e.options.direction=t.direction,e.options.lineWrapping||fn(e),e.options.mode=t.modeOption,Dr(e)}function Ql(e){(e.doc.direction=="rtl"?re:Le)(e.display.lineDiv,"CodeMirror-rtl")}function Ys(e){Wr(e,function(){Ql(e),Dr(e)})}function ea(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Va(e,t){var n={from:pt(t.from),to:yn(t),text:pr(e,t.from,t.to)};return to(e,n,t.from.line,t.to.line+1),xn(e,function(r){return to(r,n,t.from.line,t.to.line+1)},!0),n}function $l(e){for(;e.length;){var t=d(e);if(t.ranges)e.pop();else break}}function qs(e,t){if(t)return $l(e.done),d(e.done);if(e.done.length&&!d(e.done).ranges)return d(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),d(e.done)}function eo(e,t,n,r){var i=e.history;i.undone.length=0;var l=+new Date,s,p;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&i.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(s=qs(i,i.lastOp==r)))p=d(s.changes),Oe(t.from,t.to)==0&&Oe(t.from,p.to)==0?p.to=yn(t):s.changes.push(Va(e,t));else{var m=d(i.done);for((!m||!m.ranges)&&ta(e.sel,i.done),s={changes:[Va(e,t)],generation:i.generation},i.done.push(s);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=l,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,p||qt(e,"historyAdded")}function Zs(e,t,n,r){var i=t.charAt(0);return i=="*"||i=="+"&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Js(e,t,n,r){var i=e.history,l=r&&r.origin;n==i.lastSelOp||l&&i.lastSelOrigin==l&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==l||Zs(e,l,d(i.done),t))?i.done[i.done.length-1]=t:ta(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=l,i.lastSelOp=n,r&&r.clearRedo!==!1&&$l(i.undone)}function ta(e,t){var n=d(t);n&&n.ranges&&n.equals(e)||t.push(e)}function to(e,t,n,r){var i=t["spans_"+e.id],l=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(s){s.markedSpans&&((i||(i=t["spans_"+e.id]={}))[l]=s.markedSpans),++l})}function Qs(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function $s(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Qs(n[i]));return r}function ro(e,t){var n=$s(e,t),r=Fn(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var l=n[i],s=r[i];if(l&&s)e:for(var p=0;p<s.length;++p){for(var m=s[p],C=0;C<l.length;++C)if(l[C].marker==m.marker)continue e;l.push(m)}else s&&(n[i]=s)}return n}function Xn(e,t,n){for(var r=[],i=0;i<e.length;++i){var l=e[i];if(l.ranges){r.push(n?jr.prototype.deepCopy.call(l):l);continue}var s=l.changes,p=[];r.push({changes:p});for(var m=0;m<s.length;++m){var C=s[m],oe=void 0;if(p.push({from:C.from,to:C.to,text:C.text}),t)for(var ce in C)(oe=ce.match(/^spans_(\d+)$/))&&De(t,Number(oe[1]))>-1&&(d(p)[ce]=C[ce],delete C[ce])}}return r}function Wa(e,t,n,r){if(r){var i=e.anchor;if(n){var l=Oe(t,i)<0;l!=Oe(n,i)<0?(i=t,t=n):l!=Oe(t,n)<0&&(t=n)}return new fr(i,t)}else return new fr(n||t,t)}function ra(e,t,n,r,i){i==null&&(i=e.cm&&(e.cm.display.shift||e.extend)),Rr(e,new jr([Wa(e.sel.primary(),t,n,i)],0),r)}function no(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),l=0;l<e.sel.ranges.length;l++)r[l]=Wa(e.sel.ranges[l],t[l],null,i);var s=en(e.cm,r,e.sel.primIndex);Rr(e,s,n)}function za(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Rr(e,en(e.cm,i,e.sel.primIndex),r)}function io(e,t,n,r){Rr(e,Ln(t,n),r)}function eu(e,t,n){var r={ranges:t.ranges,update:function(i){this.ranges=[];for(var l=0;l<i.length;l++)this.ranges[l]=new fr($(e,i[l].anchor),$(e,i[l].head))},origin:n&&n.origin};return qt(e,"beforeSelectionChange",e,r),e.cm&&qt(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?en(e.cm,r.ranges,r.ranges.length-1):t}function ao(e,t,n){var r=e.history.done,i=d(r);i&&i.ranges?(r[r.length-1]=t,na(e,t,n)):Rr(e,t,n)}function Rr(e,t,n){na(e,t,n),Js(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function na(e,t,n){(Ft(e,"beforeSelectionChange")||e.cm&&Ft(e.cm,"beforeSelectionChange"))&&(t=eu(e,t,n));var r=n&&n.bias||(Oe(t.primary().head,e.sel.primary().head)<0?-1:1);lo(e,so(e,t,r,!0)),!(n&&n.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&zn(e.cm)}function lo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Ot(e.cm)),Tr(e,"cursorActivity",e))}function oo(e){lo(e,so(e,e.sel,null,!1))}function so(e,t,n,r){for(var i,l=0;l<t.ranges.length;l++){var s=t.ranges[l],p=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[l],m=ia(e,s.anchor,p&&p.anchor,n,r),C=s.head==s.anchor?m:ia(e,s.head,p&&p.head,n,r);(i||m!=s.anchor||C!=s.head)&&(i||(i=t.ranges.slice(0,l)),i[l]=new fr(m,C))}return i?en(e.cm,i,t.primIndex):t}function Yn(e,t,n,r,i){var l=Mt(e,t.line);if(l.markedSpans)for(var s=0;s<l.markedSpans.length;++s){var p=l.markedSpans[s],m=p.marker,C="selectLeft"in m?!m.selectLeft:m.inclusiveLeft,oe="selectRight"in m?!m.selectRight:m.inclusiveRight;if((p.from==null||(C?p.from<=t.ch:p.from<t.ch))&&(p.to==null||(oe?p.to>=t.ch:p.to>t.ch))){if(i&&(qt(m,"beforeCursorEnter"),m.explicitlyCleared))if(l.markedSpans){--s;continue}else break;if(!m.atomic)continue;if(n){var ce=m.find(r<0?1:-1),He=void 0;if((r<0?oe:C)&&(ce=uo(e,ce,-r,ce&&ce.line==t.line?l:null)),ce&&ce.line==t.line&&(He=Oe(ce,n))&&(r<0?He<0:He>0))return Yn(e,ce,t,r,i)}var Ue=m.find(r<0?-1:1);return(r<0?C:oe)&&(Ue=uo(e,Ue,r,Ue.line==t.line?l:null)),Ue?Yn(e,Ue,t,r,i):null}}return t}function ia(e,t,n,r,i){var l=r||1,s=Yn(e,t,n,l,i)||!i&&Yn(e,t,n,l,!0)||Yn(e,t,n,-l,i)||!i&&Yn(e,t,n,-l,!0);return s||(e.cantEdit=!0,se(e.first,0))}function uo(e,t,n,r){return n<0&&t.ch==0?t.line>e.first?$(e,se(t.line-1)):null:n>0&&t.ch==(r||Mt(e,t.line)).text.length?t.line<e.first+e.size-1?se(t.line+1,0):null:new se(t.line,t.ch+n)}function fo(e){e.setSelection(se(e.firstLine(),0),se(e.lastLine()),xt)}function co(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(i,l,s,p){i&&(r.from=$(e,i)),l&&(r.to=$(e,l)),s&&(r.text=s),p!==void 0&&(r.origin=p)}),qt(e,"beforeChange",e,r),e.cm&&qt(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function qn(e,t,n){if(e.cm){if(!e.cm.curOp)return wr(e.cm,qn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!((Ft(e,"beforeChange")||e.cm&&Ft(e.cm,"beforeChange"))&&(t=co(e,t,!0),!t))){var r=nn&&!n&&Hi(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)ho(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else ho(e,t)}}function ho(e,t){if(!(t.text.length==1&&t.text[0]==""&&Oe(t.from,t.to)==0)){var n=Ha(e,t);eo(e,t,n,e.cm?e.cm.curOp.id:NaN),ki(e,t,n,Fn(e,t));var r=[];xn(e,function(i,l){!l&&De(r,i.history)==-1&&(_o(i.history,t),r.push(i.history)),ki(i,t,null,Fn(i,t))})}}function aa(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!(r&&!n)){for(var i=e.history,l,s=e.sel,p=t=="undo"?i.done:i.undone,m=t=="undo"?i.undone:i.done,C=0;C<p.length&&(l=p[C],!(n?l.ranges&&!l.equals(e.sel):!l.ranges));C++);if(C!=p.length){for(i.lastOrigin=i.lastSelOrigin=null;;)if(l=p.pop(),l.ranges){if(ta(l,m),n&&!l.equals(e.sel)){Rr(e,l,{clearRedo:!1});return}s=l}else if(r){p.push(l);return}else break;var oe=[];ta(s,m),m.push({changes:oe,generation:i.generation}),i.generation=l.generation||++i.maxGeneration;for(var ce=Ft(e,"beforeChange")||e.cm&&Ft(e.cm,"beforeChange"),He=function(Lt){var Et=l.changes[Lt];if(Et.origin=t,ce&&!co(e,Et,!1))return p.length=0,{};oe.push(Va(e,Et));var It=Lt?Ha(e,Et):d(p);ki(e,Et,It,ro(e,Et)),!Lt&&e.cm&&e.cm.scrollIntoView({from:Et.from,to:yn(Et)});var Kt=[];xn(e,function(Pt,zt){!zt&&De(Kt,Pt.history)==-1&&(_o(Pt.history,Et),Kt.push(Pt.history)),ki(Pt,Et,null,ro(Pt,Et))})},Ue=l.changes.length-1;Ue>=0;--Ue){var ut=He(Ue);if(ut)return ut.v}}}}function po(e,t){if(t!=0&&(e.first+=t,e.sel=new jr(D(e.sel.ranges,function(i){return new fr(se(i.anchor.line+t,i.anchor.ch),se(i.head.line+t,i.head.ch))}),e.sel.primIndex),e.cm)){Dr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)mn(e.cm,r,"gutter")}}function ki(e,t,n,r){if(e.cm&&!e.cm.curOp)return wr(e.cm,ki)(e,t,n,r);if(t.to.line<e.first){po(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);po(e,i),t={from:se(e.first,0),to:se(t.to.line+i,t.to.ch),text:[d(t.text)],origin:t.origin}}var l=e.lastLine();t.to.line>l&&(t={from:t.from,to:se(l,Mt(e,l).text.length),text:[t.text[0]],origin:t.origin}),t.removed=pr(e,t.from,t.to),n||(n=Ha(e,t)),e.cm?tu(e.cm,t,r):Ka(e,t,r),na(e,n,xt),e.cantEdit&&ia(e,se(e.firstLine(),0))&&(e.cantEdit=!1)}}function tu(e,t,n){var r=e.doc,i=e.display,l=t.from,s=t.to,p=!1,m=l.line;e.options.lineWrapping||(m=f(Ve(Mt(r,l.line))),r.iter(m,s.line+1,function(Ue){if(Ue==i.maxLine)return p=!0,!0})),r.sel.contains(t.from,t.to)>-1&&Ot(e),Ka(r,t,n,Ml(e)),e.options.lineWrapping||(r.iter(m,l.line+t.text.length,function(Ue){var ut=Nr(Ue);ut>i.maxLineLength&&(i.maxLine=Ue,i.maxLineLength=ut,i.maxLineChanged=!0,p=!1)}),p&&(e.curOp.updateMaxLine=!0)),sn(r,l.line),Li(e,400);var C=t.text.length-(s.line-l.line)-1;t.full?Dr(e):l.line==s.line&&t.text.length==1&&!Zl(e.doc,t)?mn(e,l.line,"text"):Dr(e,l.line,s.line+1,C);var oe=Ft(e,"changes"),ce=Ft(e,"change");if(ce||oe){var He={from:l,to:s,text:t.text,removed:t.removed,origin:t.origin};ce&&Tr(e,"change",e,He),oe&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(He)}e.display.selForContextMenu=null}function Zn(e,t,n,r,i){var l;r||(r=n),Oe(r,n)<0&&(l=[r,n],n=l[0],r=l[1]),typeof t=="string"&&(t=e.splitLines(t)),qn(e,{from:n,to:r,text:t,origin:i})}function go(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function vo(e,t,n,r){for(var i=0;i<e.length;++i){var l=e[i],s=!0;if(l.ranges){l.copied||(l=e[i]=l.deepCopy(),l.copied=!0);for(var p=0;p<l.ranges.length;p++)go(l.ranges[p].anchor,t,n,r),go(l.ranges[p].head,t,n,r);continue}for(var m=0;m<l.changes.length;++m){var C=l.changes[m];if(n<C.from.line)C.from=se(C.from.line+r,C.from.ch),C.to=se(C.to.line+r,C.to.ch);else if(t<=C.to.line){s=!1;break}}s||(e.splice(0,i+1),i=0)}}function _o(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;vo(e.done,n,r,i),vo(e.undone,n,r,i)}function Ai(e,t,n,r){var i=t,l=t;return typeof t=="number"?l=Mt(e,de(e,t)):i=f(t),i==null?null:(r(l,i)&&e.cm&&mn(e.cm,i,n),l)}function Ti(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}Ti.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,rs(i),Tr(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}};function wi(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}wi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var l=Math.min(t,i-e),s=r.height;if(r.removeInner(e,l),this.height-=s-r.height,i==l&&(this.children.splice(n--,1),r.parent=null),(t-=l)==0)break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ti))){var p=[];this.collapse(p),this.children=[new Ti(p)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],l=i.chunkSize();if(e<=l){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var s=i.lines.length%25+25,p=s;p<i.lines.length;){var m=new Ti(i.lines.slice(p,p+=25));i.height-=m.height,this.children.splice(++r,0,m),m.parent=this}i.lines=i.lines.slice(0,s),this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new wi(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=De(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new wi(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],l=i.chunkSize();if(e<l){var s=Math.min(t,l-e);if(i.iterN(e,s,n))return!0;if((t-=s)==0)break;e=0}else e-=l}}};var Si=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};Si.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=f(n);if(!(r==null||!t)){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var l=pi(this);X(n,Math.max(0,n.height-l)),e&&(Wr(e,function(){mo(e,n,-l),mn(e,r,"widget")}),Tr(e,"lineWidgetCleared",e,this,r))}},Si.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=pi(this)-t;i&&(Tt(this.doc,r)||X(r,r.height+i),n&&Wr(n,function(){n.curOp.forceUpdate=!0,mo(n,r,i),Tr(n,"lineWidgetChanged",n,e,f(r))}))},o(Si);function mo(e,t,n){ar(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ua(e,n)}function ru(e,t,n,r){var i=new Si(e,n,r),l=e.cm;return l&&i.noHScroll&&(l.display.alignWidgets=!0),Ai(e,t,"widget",function(s){var p=s.widgets||(s.widgets=[]);if(i.insertAt==null?p.push(i):p.splice(Math.min(p.length,Math.max(0,i.insertAt)),0,i),i.line=s,l&&!Tt(e,s)){var m=ar(s)<e.scrollTop;X(s,s.height+pi(i)),m&&Ua(l,i.height),l.curOp.forceUpdate=!0}return!0}),l&&Tr(l,"lineWidgetAdded",l,i,typeof t=="number"?t:f(t)),i}var bo=0,kn=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++bo};kn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Un(e),Ft(this,"clear")){var n=this.find();n&&Tr(this,"clear",n.from,n.to)}for(var r=null,i=null,l=0;l<this.lines.length;++l){var s=this.lines[l],p=un(s.markedSpans,this);e&&!this.collapsed?mn(e,f(s),"text"):e&&(p.to!=null&&(i=f(s)),p.from!=null&&(r=f(s))),s.markedSpans=Fi(s.markedSpans,p),p.from==null&&this.collapsed&&!Tt(this.doc,s)&&e&&X(s,Kn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var m=0;m<this.lines.length;++m){var C=Ve(this.lines[m]),oe=Nr(C);oe>e.display.maxLineLength&&(e.display.maxLine=C,e.display.maxLineLength=oe,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&Dr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&oo(e.doc)),e&&Tr(e,"markerCleared",e,this,r,i),t&&In(e),this.parent&&this.parent.clear()}},kn.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var l=this.lines[i],s=un(l.markedSpans,this);if(s.from!=null&&(n=se(t?l:f(l),s.from),e==-1))return n;if(s.to!=null&&(r=se(t?l:f(l),s.to),e==1))return r}return n&&{from:n,to:r}},kn.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;!t||!r||Wr(r,function(){var i=t.line,l=f(t.line),s=ya(r,l);if(s&&(Al(s),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Tt(n.doc,i)&&n.height!=null){var p=n.height;n.height=null;var m=pi(n)-p;m&&X(i,i.height+m)}Tr(r,"markerChanged",r,e)})},kn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||De(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},kn.prototype.detachLine=function(e){if(this.lines.splice(De(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},o(kn);function Jn(e,t,n,r,i){if(r&&r.shared)return nu(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return wr(e.cm,Jn)(e,t,n,r,i);var l=new kn(e,i),s=Oe(t,n);if(r&&ct(r,l,!1),s>0||s==0&&l.clearWhenEmpty!==!1)return l;if(l.replacedWith&&(l.collapsed=!0,l.widgetNode=Ce("span",[l.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||l.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(l.widgetNode.insertLeft=!0)),l.collapsed){if(me(e,t.line,t,n,l)||t.line!=n.line&&me(e,n.line,t,n,l))throw new Error("Inserting collapsed marker partially overlapping an existing one");Jr()}l.addToHistory&&eo(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var p=t.line,m=e.cm,C;if(e.iter(p,n.line+1,function(ce){m&&l.collapsed&&!m.options.lineWrapping&&Ve(ce)==m.display.maxLine&&(C=!0),l.collapsed&&p!=t.line&&X(ce,0),li(ce,new wn(l,p==t.line?t.ch:null,p==n.line?n.ch:null),e.cm&&e.cm.curOp),++p}),l.collapsed&&e.iter(t.line,n.line+1,function(ce){Tt(e,ce)&&X(ce,0)}),l.clearOnEnter&&ht(l,"beforeCursorEnter",function(){return l.clear()}),l.readOnly&&(gr(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),l.collapsed&&(l.id=++bo,l.atomic=!0),m){if(C&&(m.curOp.updateMaxLine=!0),l.collapsed)Dr(m,t.line,n.line+1);else if(l.className||l.startStyle||l.endStyle||l.css||l.attributes||l.title)for(var oe=t.line;oe<=n.line;oe++)mn(m,oe,"text");l.atomic&&oo(m.doc),Tr(m,"markerAdded",m,l)}return l}var Oi=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Oi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Tr(this,"clear")}},Oi.prototype.find=function(e,t){return this.primary.find(e,t)},o(Oi);function nu(e,t,n,r,i){r=ct(r),r.shared=!1;var l=[Jn(e,t,n,r,i)],s=l[0],p=r.widgetNode;return xn(e,function(m){p&&(r.widgetNode=p.cloneNode(!0)),l.push(Jn(m,$(m,t),$(m,n),r,i));for(var C=0;C<m.linked.length;++C)if(m.linked[C].isParent)return;s=d(l)}),new Oi(l,s)}function Lo(e){return e.findMarks(se(e.first,0),e.clipPos(se(e.lastLine())),function(t){return t.parent})}function iu(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),l=e.clipPos(i.from),s=e.clipPos(i.to);if(Oe(l,s)){var p=Jn(e,l,s,r.primary,r.primary.type);r.markers.push(p),p.parent=r}}}function au(e){for(var t=function(r){var i=e[r],l=[i.primary.doc];xn(i.primary.doc,function(m){return l.push(m)});for(var s=0;s<i.markers.length;s++){var p=i.markers[s];De(l,p.doc)==-1&&(p.parent=null,i.markers.splice(s--,1))}},n=0;n<e.length;n++)t(n)}var lu=0,Br=function(e,t,n,r,i){if(!(this instanceof Br))return new Br(e,t,n,r,i);n==null&&(n=0),wi.call(this,[new Ti([new cn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var l=se(n,0);this.sel=Ln(l),this.history=new ea(null),this.id=++lu,this.modeOption=t,this.lineSep=r,this.direction=i=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Ka(this,{from:l,to:l,text:e}),Rr(this,Ln(l),xt)};Br.prototype=Q(wi.prototype,{constructor:Br,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=dr(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Sr(function(e){var t=se(this.first,0),n=this.first+this.size-1;qn(this,{from:t,to:se(n,Mt(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&vi(this.cm,0,0),Rr(this,Ln(t),xt)}),replaceRange:function(e,t,n,r){t=$(this,t),n=n?$(this,n):t,Zn(this,e,t,n,r)},getRange:function(e,t,n){var r=pr(this,$(this,e),$(this,t));return n===!1?r:n===""?r.join(""):r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(pe(this,e))return Mt(this,e)},getLineNumber:function(e){return f(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Mt(this,e)),Ve(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return $(this,e)},getCursor:function(e){var t=this.sel.primary(),n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e=="to"||e===!1?n=t.to():n=t.from(),n},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Sr(function(e,t,n){io(this,$(this,typeof e=="number"?se(e,t||0):e),null,n)}),setSelection:Sr(function(e,t,n){io(this,$(this,e),$(this,t||e),n)}),extendSelection:Sr(function(e,t,n){ra(this,$(this,e),t&&$(this,t),n)}),extendSelections:Sr(function(e,t){no(this,Me(this,e),t)}),extendSelectionsBy:Sr(function(e,t){var n=D(this.sel.ranges,e);no(this,Me(this,n),t)}),setSelections:Sr(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new fr($(this,e[i].anchor),$(this,e[i].head||e[i].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Rr(this,en(this.cm,r,t),n)}}),addSelection:Sr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new fr($(this,e),$(this,t||e))),Rr(this,en(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t=this.sel.ranges,n,r=0;r<t.length;r++){var i=pr(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return e===!1?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=pr(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Sr(function(e,t,n){for(var r=[],i=this.sel,l=0;l<i.ranges.length;l++){var s=i.ranges[l];r[l]={from:s.from(),to:s.to(),text:this.splitLines(e[l]),origin:n}}for(var p=t&&t!="end"&&Xs(this,r,t),m=r.length-1;m>=0;m--)qn(this,r[m]);p?ao(this,p):this.cm&&zn(this.cm)}),undo:Sr(function(){aa(this,"undo")}),redo:Sr(function(){aa(this,"redo")}),undoSelection:Sr(function(){aa(this,"undo",!0)}),redoSelection:Sr(function(){aa(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new ea(this.history),xn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Xn(this.history.done),undone:Xn(this.history.undone)}},setHistory:function(e){var t=this.history=new ea(this.history);t.done=Xn(e.done.slice(0),null,!0),t.undone=Xn(e.undone.slice(0),null,!0)},setGutterMarker:Sr(function(e,t,n){return Ai(this,e,"gutter",function(r){var i=r.gutterMarkers||(r.gutterMarkers={});return i[t]=n,!n&&it(i)&&(r.gutterMarkers=null),!0})}),clearGutter:Sr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&Ai(t,n,"gutter",function(){return n.gutterMarkers[e]=null,it(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!pe(this,e)||(t=e,e=Mt(this,e),!e))return null}else if(t=f(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Sr(function(e,t,n){return Ai(this,e,t=="gutter"?"gutter":"class",function(r){var i=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!r[i])r[i]=n;else{if(ne(n).test(r[i]))return!1;r[i]+=" "+n}return!0})}),removeLineClass:Sr(function(e,t,n){return Ai(this,e,t=="gutter"?"gutter":"class",function(r){var i=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",l=r[i];if(l)if(n==null)r[i]=null;else{var s=l.match(ne(n));if(!s)return!1;var p=s.index+s[0].length;r[i]=l.slice(0,s.index)+(!s.index||p==l.length?"":" ")+l.slice(p)||null}else return!1;return!0})}),addLineWidget:Sr(function(e,t,n){return ru(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Jn(this,$(this,e),$(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=$(this,e),Jn(this,e,e,n,"bookmark")},findMarksAt:function(e){e=$(this,e);var t=[],n=Mt(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=$(this,e),t=$(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(l){var s=l.markedSpans;if(s)for(var p=0;p<s.length;p++){var m=s[p];!(m.to!=null&&i==e.line&&e.ch>=m.to||m.from==null&&i!=e.line||m.from!=null&&i==t.line&&m.from>=t.ch)&&(!n||n(m.marker))&&r.push(m.marker.parent||m.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var l=i.text.length+r;if(l>e)return t=e,!0;e-=l,++n}),$(this,se(n,t))},indexFromPos:function(e){e=$(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(r){t+=r.text.length+n}),t},copy:function(e){var t=new Br(dr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new Br(dr(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],iu(r,Lo(this)),r},unlinkDoc:function(e){if(e instanceof vr&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),au(Lo(this));break}}if(e.history==this.history){var r=[e.id];xn(e,function(i){return r.push(i.id)},!0),e.history=new ea(null),e.history.done=Xn(this.history.done,r),e.history.undone=Xn(this.history.undone,r)}},iterLinkedDocs:function(e){xn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Te(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Sr(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&Ys(this.cm))})}),Br.prototype.eachLine=Br.prototype.iter;var yo=0;function ou(e){var t=this;if(xo(t),!(bt(t,e)||hn(t.display,e))){u(e),w&&(yo=+new Date);var n=Nn(t,e,!0),r=e.dataTransfer.files;if(!(!n||t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,l=Array(i),s=0,p=function(){++s==i&&wr(t,function(){n=$(t.doc,n);var Ue={from:n,to:n,text:t.doc.splitLines(l.filter(function(ut){return ut!=null}).join(t.doc.lineSeparator())),origin:"paste"};qn(t.doc,Ue),ao(t.doc,Ln($(t.doc,n),$(t.doc,yn(Ue))))})()},m=function(Ue,ut){if(t.options.allowDropFileTypes&&De(t.options.allowDropFileTypes,Ue.type)==-1){p();return}var Lt=new FileReader;Lt.onerror=function(){return p()},Lt.onload=function(){var Et=Lt.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Et)){p();return}l[ut]=Et,p()},Lt.readAsText(Ue)},C=0;C<r.length;C++)m(r[C],C);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var oe=e.dataTransfer.getData("Text");if(oe){var ce;if(t.state.draggingText&&!t.state.draggingText.copy&&(ce=t.listSelections()),na(t.doc,Ln(n,n)),ce)for(var He=0;He<ce.length;++He)Zn(t.doc,"",ce[He].anchor,ce[He].head,"drag");t.replaceSelection(oe,"around","paste"),t.display.input.focus()}}catch{}}}}function su(e,t){if(w&&(!e.state.draggingText||+new Date-yo<100)){T(t);return}if(!(bt(e,t)||hn(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!H)){var n=O("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",F&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),F&&n.parentNode.removeChild(n)}}function uu(e,t){var n=Nn(e,t);if(n){var r=document.createDocumentFragment();Ea(e,n,r),e.display.dragCursor||(e.display.dragCursor=O("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),ke(e.display.dragCursor,r)}}function xo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ko(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation(function(){for(var l=0;l<n.length;l++)e(n[l])})}}var Ao=!1;function fu(){Ao||(cu(),Ao=!0)}function cu(){var e;ht(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,ko(hu)},100))}),ht(window,"blur",function(){return ko(Wn)})}function hu(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var An={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ei=0;Ei<10;Ei++)An[Ei+48]=An[Ei+96]=String(Ei);for(var la=65;la<=90;la++)An[la]=String.fromCharCode(la);for(var Ni=1;Ni<=12;Ni++)An[Ni+111]=An[Ni+63235]="F"+Ni;var dn={};dn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},dn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},dn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},dn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},dn.default=le?dn.macDefault:dn.pcDefault;function pu(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,l,s=0;s<t.length-1;s++){var p=t[s];if(/^(cmd|meta|m)$/i.test(p))l=!0;else if(/^a(lt)?$/i.test(p))n=!0;else if(/^(c|ctrl|control)$/i.test(p))r=!0;else if(/^s(hift)?$/i.test(p))i=!0;else throw new Error("Unrecognized modifier name: "+p)}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),l&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function du(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if(r=="..."){delete e[n];continue}for(var i=D(n.split(" "),pu),l=0;l<i.length;l++){var s=void 0,p=void 0;l==i.length-1?(p=i.join(" "),s=r):(p=i.slice(0,l+1).join(" "),s="...");var m=t[p];if(!m)t[p]=s;else if(m!=s)throw new Error("Inconsistent bindings for "+p)}delete e[n]}for(var C in t)e[C]=t[C];return e}function Qn(e,t,n,r){t=oa(t);var i=t.call?t.call(e,r):t[e];if(i===!1)return"nothing";if(i==="...")return"multi";if(i!=null&&n(i))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Qn(e,t.fallthrough,n,r);for(var l=0;l<t.fallthrough.length;l++){var s=Qn(e,t.fallthrough[l],n,r);if(s)return s}}}function To(e){var t=typeof e=="string"?e:An[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function wo(e,t,n){var r=e;return t.altKey&&r!="Alt"&&(e="Alt-"+e),(ee?t.metaKey:t.ctrlKey)&&r!="Ctrl"&&(e="Ctrl-"+e),(ee?t.ctrlKey:t.metaKey)&&r!="Mod"&&(e="Cmd-"+e),!n&&t.shiftKey&&r!="Shift"&&(e="Shift-"+e),e}function So(e,t){if(F&&e.keyCode==34&&e.char)return!1;var n=An[e.keyCode];return n==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(n=e.code),wo(n,e,t))}function oa(e){return typeof e=="string"?dn[e]:e}function $n(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var l=t(n[i]);r.length&&Oe(l.from,d(r).to)<=0;){var s=r.pop();if(Oe(s.from,l.from)<0){l.from=s.from;break}}r.push(l)}Wr(e,function(){for(var p=r.length-1;p>=0;p--)Zn(e.doc,"",r[p].from,r[p].to,"+delete");zn(e)})}function ja(e,t,n){var r=jt(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Xa(e,t,n){var r=ja(e,t.ch,n);return r==null?null:new se(t.line,r,n<0?"after":"before")}function Ya(e,t,n,r,i){if(e){t.doc.direction=="rtl"&&(i=-i);var l=we(n,t.doc.direction);if(l){var s=i<0?d(l):l[0],p=i<0==(s.level==1),m=p?"after":"before",C;if(s.level>0||t.doc.direction=="rtl"){var oe=Gn(t,n);C=i<0?n.text.length-1:0;var ce=ln(t,oe,C).top;C=W(function(He){return ln(t,oe,He).top==ce},i<0==(s.level==1)?s.from:s.to-1,C),m=="before"&&(C=ja(n,C,1))}else C=i<0?s.to:s.from;return new se(r,C,m)}}return new se(r,i<0?n.text.length:0,i<0?"before":"after")}function gu(e,t,n,r){var i=we(t,e.doc.direction);if(!i)return Xa(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var l=Je(i,n.ch,n.sticky),s=i[l];if(e.doc.direction=="ltr"&&s.level%2==0&&(r>0?s.to>n.ch:s.from<n.ch))return Xa(t,n,r);var p=function(It,Kt){return ja(t,It instanceof se?It.ch:It,Kt)},m,C=function(It){return e.options.lineWrapping?(m=m||Gn(e,t),Cl(e,t,m,It)):{begin:0,end:t.text.length}},oe=C(n.sticky=="before"?p(n,-1):n.ch);if(e.doc.direction=="rtl"||s.level==1){var ce=s.level==1==r<0,He=p(n,ce?1:-1);if(He!=null&&(ce?He<=s.to&&He<=oe.end:He>=s.from&&He>=oe.begin)){var Ue=ce?"before":"after";return new se(n.line,He,Ue)}}var ut=function(It,Kt,Pt){for(var zt=function(hr,Or){return Or?new se(n.line,p(hr,1),"before"):new se(n.line,hr,"after")};It>=0&&It<i.length;It+=Kt){var er=i[It],Qt=Kt>0==(er.level!=1),lr=Qt?Pt.begin:p(Pt.end,-1);if(er.from<=lr&&lr<er.to||(lr=Qt?er.from:p(er.to,-1),Pt.begin<=lr&&lr<Pt.end))return zt(lr,Qt)}},Lt=ut(l+r,r,oe);if(Lt)return Lt;var Et=r>0?oe.end:p(oe.begin,-1);return Et!=null&&!(r>0&&Et==t.text.length)&&(Lt=ut(r>0?0:i.length-1,r,C(Et)),Lt)?Lt:null}var Ci={selectAll:fo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),xt)},killLine:function(e){return $n(e,function(t){if(t.empty()){var n=Mt(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:se(t.head.line+1,0)}:{from:t.head,to:se(t.head.line,n)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return $n(e,function(t){return{from:se(t.from().line,0),to:$(e.doc,se(t.to().line+1,0))}})},delLineLeft:function(e){return $n(e,function(t){return{from:se(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return $n(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return $n(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(se(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(se(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Oo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Eo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return vu(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},nt)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},nt)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Eo(e,t.head):r},nt)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var l=n[i].from(),s=he(e.getLine(l.line),l.ch,r);t.push(J(r-s%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Wr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,l=Mt(e.doc,i.line).text;if(l){if(i.ch==l.length&&(i=new se(i.line,i.ch-1)),i.ch>0)i=new se(i.line,i.ch+1),e.replaceRange(l.charAt(i.ch-1)+l.charAt(i.ch-2),se(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var s=Mt(e.doc,i.line-1).text;s&&(i=new se(i.line,1),e.replaceRange(l.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),se(i.line-1,s.length-1),i,"+transpose"))}}n.push(new fr(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Wr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);zn(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Oo(e,t){var n=Mt(e.doc,t),r=Ve(n);return r!=n&&(t=f(r)),Ya(!0,e,r,t,1)}function vu(e,t){var n=Mt(e.doc,t),r=st(n);return r!=n&&(t=f(r)),Ya(!0,e,n,t,-1)}function Eo(e,t){var n=Oo(e,t.line),r=Mt(e.doc,n.line),i=we(r,e.doc.direction);if(!i||i[0].level==0){var l=Math.max(n.ch,r.text.search(/\S/)),s=t.line==n.line&&t.ch<=l&&t.ch;return se(n.line,s?0:l,n.sticky)}return n}function sa(e,t,n){if(typeof t=="string"&&(t=Ci[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=lt}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function _u(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Qn(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Qn(t,e.options.extraKeys,n,e)||Qn(t,e.options.keyMap,n,e)}var mu=new ye;function Mi(e,t,n,r){var i=e.state.keySeq;if(i){if(To(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:mu.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),No(e,i+" "+t,n,r))return!0}return No(e,t,n,r)}function No(e,t,n,r){var i=_u(e,t,r);return i=="multi"&&(e.state.keySeq=t),i=="handled"&&Tr(e,"keyHandled",e,t,n),(i=="handled"||i=="multi")&&(u(n),Na(e)),!!i}function Co(e,t){var n=So(t,!0);return n?t.shiftKey&&!e.state.keySeq?Mi(e,"Shift-"+n,t,function(r){return sa(e,r,!0)})||Mi(e,n,t,function(r){if(typeof r=="string"?/^go[A-Z]/.test(r):r.motion)return sa(e,r)}):Mi(e,n,t,function(r){return sa(e,r)}):!1}function bu(e,t,n){return Mi(e,"'"+n+"'",t,function(r){return sa(e,r,!0)})}var qa=null;function Mo(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=at(Qe(t)),!bt(t,e))){w&&L<11&&e.keyCode==27&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=n==16||e.shiftKey;var r=Co(t,e);F&&(qa=r?n:null,!r&&n==88&&!ae&&(le?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),A&&!le&&!r&&n==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),n==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Lu(t)}}function Lu(e){var t=e.display.lineDiv;re(t,"CodeMirror-crosshair");function n(r){(r.keyCode==18||!r.altKey)&&(Le(t,"CodeMirror-crosshair"),Bt(document,"keyup",n),Bt(document,"mouseover",n))}ht(document,"keyup",n),ht(document,"mouseover",n)}function Ro(e){e.keyCode==16&&(this.doc.sel.shift=!1),bt(this,e)}function Uo(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(hn(t.display,e)||bt(t,e)||e.ctrlKey&&!e.altKey||le&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(F&&n==qa){qa=null,u(e);return}if(!(F&&(!e.which||e.which<10)&&Co(t,e))){var i=String.fromCharCode(r??n);i!="\b"&&(bu(t,e,i)||t.display.input.onKeyPress(e))}}}var yu=400,Za=function(e,t,n){this.time=e,this.pos=t,this.button=n};Za.prototype.compare=function(e,t,n){return this.time+yu>e&&Oe(t,this.pos)==0&&n==this.button};var Ri,Ui;function xu(e,t){var n=+new Date;return Ui&&Ui.compare(n,e,t)?(Ri=Ui=null,"triple"):Ri&&Ri.compare(n,e,t)?(Ui=new Za(n,e,t),Ri=null,"double"):(Ri=new Za(n,e,t),Ui=null,"single")}function Io(e){var t=this,n=t.display;if(!(bt(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,hn(n,e)){b||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));return}if(!Ja(t,e)){var r=Nn(t,e),i=U(e),l=r?xu(r,i):"single";et(t).focus(),i==1&&t.state.selectingText&&t.state.selectingText(e),!(r&&ku(t,i,r,l,e))&&(i==1?r?Tu(t,r,l,e):Z(e)==n.scroller&&u(e):i==2?(r&&ra(t.doc,r),setTimeout(function(){return n.input.focus()},20)):i==3&&(te?t.display.input.onContextMenu(e):Ca(t)))}}}function ku(e,t,n,r,i){var l="Click";return r=="double"?l="Double"+l:r=="triple"&&(l="Triple"+l),l=(t==1?"Left":t==2?"Middle":"Right")+l,Mi(e,wo(l,i),i,function(s){if(typeof s=="string"&&(s=Ci[s]),!s)return!1;var p=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),p=s(e,n)!=lt}finally{e.state.suppressEdits=!1}return p})}function Au(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(i.unit==null){var l=ge?n.shiftKey&&n.metaKey:n.altKey;i.unit=l?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(i.extend==null||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),i.addNew==null&&(i.addNew=le?n.metaKey:n.ctrlKey),i.moveOnDrag==null&&(i.moveOnDrag=!(le?n.altKey:n.ctrlKey)),i}function Tu(e,t,n,r){w?setTimeout(rt(Il,e),0):e.curOp.focus=at(Qe(e));var i=Au(e,n,r),l=e.doc.sel,s;e.options.dragDrop&&xe&&!e.isReadOnly()&&n=="single"&&(s=l.contains(t))>-1&&(Oe((s=l.ranges[s]).from(),t)<0||t.xRel>0)&&(Oe(s.to(),t)>0||t.xRel<0)?wu(e,r,t,i):Su(e,r,t,i)}function wu(e,t,n,r){var i=e.display,l=!1,s=wr(e,function(C){b&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Ca(e)),Bt(i.wrapper.ownerDocument,"mouseup",s),Bt(i.wrapper.ownerDocument,"mousemove",p),Bt(i.scroller,"dragstart",m),Bt(i.scroller,"drop",s),l||(u(C),r.addNew||ra(e.doc,n,null,null,r.extend),b&&!H||w&&L==9?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),p=function(C){l=l||Math.abs(t.clientX-C.clientX)+Math.abs(t.clientY-C.clientY)>=10},m=function(){return l=!0};b&&(i.scroller.draggable=!0),e.state.draggingText=s,s.copy=!r.moveOnDrag,ht(i.wrapper.ownerDocument,"mouseup",s),ht(i.wrapper.ownerDocument,"mousemove",p),ht(i.scroller,"dragstart",m),ht(i.scroller,"drop",s),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}function Po(e,t,n){if(n=="char")return new fr(t,t);if(n=="word")return e.findWordAt(t);if(n=="line")return new fr(se(t.line,0),$(e.doc,se(t.line+1,0)));var r=n(e,t);return new fr(r.from,r.to)}function Su(e,t,n,r){w&&Ca(e);var i=e.display,l=e.doc;u(t);var s,p,m=l.sel,C=m.ranges;if(r.addNew&&!r.extend?(p=l.sel.contains(n),p>-1?s=C[p]:s=new fr(n,n)):(s=l.sel.primary(),p=l.sel.primIndex),r.unit=="rectangle")r.addNew||(s=new fr(n,n)),n=Nn(e,t,!0,!0),p=-1;else{var oe=Po(e,n,r.unit);r.extend?s=Wa(s,oe.anchor,oe.head,r.extend):s=oe}r.addNew?p==-1?(p=C.length,Rr(l,en(e,C.concat([s]),p),{scroll:!1,origin:"*mouse"})):C.length>1&&C[p].empty()&&r.unit=="char"&&!r.extend?(Rr(l,en(e,C.slice(0,p).concat(C.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),m=l.sel):za(l,p,s,yt):(p=0,Rr(l,new jr([s],0),yt),m=l.sel);var ce=n;function He(Pt){if(Oe(ce,Pt)!=0)if(ce=Pt,r.unit=="rectangle"){for(var zt=[],er=e.options.tabSize,Qt=he(Mt(l,n.line).text,n.ch,er),lr=he(Mt(l,Pt.line).text,Pt.ch,er),hr=Math.min(Qt,lr),Or=Math.max(Qt,lr),_r=Math.min(n.line,Pt.line),zr=Math.min(e.lastLine(),Math.max(n.line,Pt.line));_r<=zr;_r++){var Fr=Mt(l,_r).text,Lr=be(Fr,hr,er);hr==Or?zt.push(new fr(se(_r,Lr),se(_r,Lr))):Fr.length>Lr&&zt.push(new fr(se(_r,Lr),se(_r,be(Fr,Or,er))))}zt.length||zt.push(new fr(n,n)),Rr(l,en(e,m.ranges.slice(0,p).concat(zt),p),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Pt)}else{var Hr=s,Cr=Po(e,Pt,r.unit),kr=Hr.anchor,yr;Oe(Cr.anchor,kr)>0?(yr=Cr.head,kr=k(Hr.from(),Cr.anchor)):(yr=Cr.anchor,kr=kt(Hr.to(),Cr.head));var mr=m.ranges.slice(0);mr[p]=Ou(e,new fr($(l,kr),yr)),Rr(l,en(e,mr,p),yt)}}var Ue=i.wrapper.getBoundingClientRect(),ut=0;function Lt(Pt){var zt=++ut,er=Nn(e,Pt,!0,r.unit=="rectangle");if(er)if(Oe(er,ce)!=0){e.curOp.focus=at(Qe(e)),He(er);var Qt=Zi(i,l);(er.line>=Qt.to||er.line<Qt.from)&&setTimeout(wr(e,function(){ut==zt&&Lt(Pt)}),150)}else{var lr=Pt.clientY<Ue.top?-20:Pt.clientY>Ue.bottom?20:0;lr&&setTimeout(wr(e,function(){ut==zt&&(i.scroller.scrollTop+=lr,Lt(Pt))}),50)}}function Et(Pt){e.state.selectingText=!1,ut=1/0,Pt&&(u(Pt),i.input.focus()),Bt(i.wrapper.ownerDocument,"mousemove",It),Bt(i.wrapper.ownerDocument,"mouseup",Kt),l.history.lastSelOrigin=null}var It=wr(e,function(Pt){Pt.buttons===0||!U(Pt)?Et(Pt):Lt(Pt)}),Kt=wr(e,Et);e.state.selectingText=Kt,ht(i.wrapper.ownerDocument,"mousemove",It),ht(i.wrapper.ownerDocument,"mouseup",Kt)}function Ou(e,t){var n=t.anchor,r=t.head,i=Mt(e.doc,n.line);if(Oe(n,r)==0&&n.sticky==r.sticky)return t;var l=we(i);if(!l)return t;var s=Je(l,n.ch,n.sticky),p=l[s];if(p.from!=n.ch&&p.to!=n.ch)return t;var m=s+(p.from==n.ch==(p.level!=1)?0:1);if(m==0||m==l.length)return t;var C;if(r.line!=n.line)C=(r.line-n.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var oe=Je(l,r.ch,r.sticky),ce=oe-s||(r.ch-n.ch)*(p.level==1?-1:1);oe==m-1||oe==m?C=ce<0:C=ce>0}var He=l[m+(C?-1:0)],Ue=C==(He.level==1),ut=Ue?He.from:He.to,Lt=Ue?"after":"before";return n.ch==ut&&n.sticky==Lt?t:new fr(new se(n.line,ut,Lt),r)}function Do(e,t,n,r){var i,l;if(t.touches)i=t.touches[0].clientX,l=t.touches[0].clientY;else try{i=t.clientX,l=t.clientY}catch{return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&u(t);var s=e.display,p=s.lineDiv.getBoundingClientRect();if(l>p.bottom||!Ft(e,n))return h(t);l-=p.top-s.viewOffset;for(var m=0;m<e.display.gutterSpecs.length;++m){var C=s.gutters.childNodes[m];if(C&&C.getBoundingClientRect().right>=i){var oe=B(e.doc,l),ce=e.display.gutterSpecs[m];return qt(e,n,e,oe,ce.className,t),h(t)}}}function Ja(e,t){return Do(e,t,"gutterClick",!0)}function Bo(e,t){hn(e.display,t)||Eu(e,t)||bt(e,t,"contextmenu")||te||e.display.input.onContextMenu(t)}function Eu(e,t){return Ft(e,"gutterContextMenu")?Do(e,t,"gutterContextMenu",!1):!1}function Fo(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),di(e)}var ei={toString:function(){return"CodeMirror.Init"}},Ho={},ua={};function Nu(e){var t=e.optionHandlers;function n(r,i,l,s){e.defaults[r]=i,l&&(t[r]=s?function(p,m,C){C!=ei&&l(p,m,C)}:l)}e.defineOption=n,e.Init=ei,n("value","",function(r,i){return r.setValue(i)},!0),n("mode",null,function(r,i){r.doc.modeOption=i,Ga(r)},!0),n("indentUnit",2,Ga,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(r){xi(r),di(r),Dr(r)},!0),n("lineSeparator",null,function(r,i){if(r.doc.lineSep=i,!!i){var l=[],s=r.doc.first;r.doc.iter(function(m){for(var C=0;;){var oe=m.text.indexOf(i,C);if(oe==-1)break;C=oe+i.length,l.push(se(s,oe))}s++});for(var p=l.length-1;p>=0;p--)Zn(r.doc,i,l[p],se(l[p].line,l[p].ch+i.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(r,i,l){r.state.specialChars=new RegExp(i.source+(i.test("	")?"":"|	"),"g"),l!=ei&&r.refresh()}),n("specialCharPlaceholder",as,function(r){return r.refresh()},!0),n("electricChars",!0),n("inputStyle",q?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(r,i){return r.getInputField().spellcheck=i},!0),n("autocorrect",!1,function(r,i){return r.getInputField().autocorrect=i},!0),n("autocapitalize",!1,function(r,i){return r.getInputField().autocapitalize=i},!0),n("rtlMoveVisually",!y),n("wholeLineUpdateBefore",!0),n("theme","default",function(r){Fo(r),yi(r)},!0),n("keyMap","default",function(r,i,l){var s=oa(i),p=l!=ei&&oa(l);p&&p.detach&&p.detach(r,s),s.attach&&s.attach(r,p||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Mu,!0),n("gutters",[],function(r,i){r.display.gutterSpecs=Fa(i,r.options.lineNumbers),yi(r)},!0),n("fixedGutter",!0,function(r,i){r.display.gutters.style.left=i?Sa(r.display)+"px":"0",r.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(r){return jn(r)},!0),n("scrollbarStyle","native",function(r){Gl(r),jn(r),r.display.scrollbars.setScrollTop(r.doc.scrollTop),r.display.scrollbars.setScrollLeft(r.doc.scrollLeft)},!0),n("lineNumbers",!1,function(r,i){r.display.gutterSpecs=Fa(r.options.gutters,i),yi(r)},!0),n("firstLineNumber",1,yi,!0),n("lineNumberFormatter",function(r){return r},yi,!0),n("showCursorWhenSelecting",!1,gi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(r,i){i=="nocursor"&&(Wn(r),r.display.input.blur()),r.display.input.readOnlyChanged(i)}),n("screenReaderLabel",null,function(r,i){i=i===""?null:i,r.display.input.screenReaderLabelChanged(i)}),n("disableInput",!1,function(r,i){i||r.display.input.reset()},!0),n("dragDrop",!0,Cu),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,gi,!0),n("singleCursorHeightPerLine",!0,gi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,xi,!0),n("addModeClass",!1,xi,!0),n("pollInterval",100),n("undoDepth",200,function(r,i){return r.doc.history.undoDepth=i}),n("historyEventDelay",1250),n("viewportMargin",10,function(r){return r.refresh()},!0),n("maxHighlightLength",1e4,xi,!0),n("moveInputWithCursor",!0,function(r,i){i||r.display.input.resetPosition()}),n("tabindex",null,function(r,i){return r.display.input.getField().tabIndex=i||""}),n("autofocus",null),n("direction","ltr",function(r,i){return r.doc.setDirection(i)},!0),n("phrases",null)}function Cu(e,t,n){var r=n&&n!=ei;if(!t!=!r){var i=e.display.dragFunctions,l=t?ht:Bt;l(e.display.scroller,"dragstart",i.start),l(e.display.scroller,"dragenter",i.enter),l(e.display.scroller,"dragover",i.over),l(e.display.scroller,"dragleave",i.leave),l(e.display.scroller,"drop",i.drop)}}function Mu(e){e.options.lineWrapping?(re(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Le(e.display.wrapper,"CodeMirror-wrap"),fn(e)),Oa(e),Dr(e),di(e),setTimeout(function(){return jn(e)},100)}function vr(e,t){var n=this;if(!(this instanceof vr))return new vr(e,t);this.options=t=t?ct(t):{},ct(Ho,t,!1);var r=t.value;typeof r=="string"?r=new Br(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new vr.inputStyles[t.inputStyle](this),l=this.display=new zs(e,r,i,t);l.wrapper.CodeMirror=this,Fo(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Gl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ye,keySeq:null,specialChars:null},t.autofocus&&!q&&l.input.focus(),w&&L<11&&setTimeout(function(){return n.display.input.reset(!0)},20),Ru(this),fu(),Un(this),this.curOp.forceUpdate=!0,Jl(this,r),t.autofocus&&!q||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Ma(n)},20):Wn(this);for(var s in ua)ua.hasOwnProperty(s)&&ua[s](this,t[s],ei);Wl(this),t.finishInit&&t.finishInit(this);for(var p=0;p<Qa.length;++p)Qa[p](this);In(this),b&&t.lineWrapping&&getComputedStyle(l.lineDiv).textRendering=="optimizelegibility"&&(l.lineDiv.style.textRendering="auto")}vr.defaults=Ho,vr.optionHandlers=ua;function Ru(e){var t=e.display;ht(t.scroller,"mousedown",wr(e,Io)),w&&L<11?ht(t.scroller,"dblclick",wr(e,function(m){if(!bt(e,m)){var C=Nn(e,m);if(!(!C||Ja(e,m)||hn(e.display,m))){u(m);var oe=e.findWordAt(C);ra(e.doc,oe.anchor,oe.head)}}})):ht(t.scroller,"dblclick",function(m){return bt(e,m)||u(m)}),ht(t.scroller,"contextmenu",function(m){return Bo(e,m)}),ht(t.input.getField(),"contextmenu",function(m){t.scroller.contains(m.target)||Bo(e,m)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),r=t.activeTouch,r.end=+new Date)}function l(m){if(m.touches.length!=1)return!1;var C=m.touches[0];return C.radiusX<=1&&C.radiusY<=1}function s(m,C){if(C.left==null)return!0;var oe=C.left-m.left,ce=C.top-m.top;return oe*oe+ce*ce>20*20}ht(t.scroller,"touchstart",function(m){if(!bt(e,m)&&!l(m)&&!Ja(e,m)){t.input.ensurePolled(),clearTimeout(n);var C=+new Date;t.activeTouch={start:C,moved:!1,prev:C-r.end<=300?r:null},m.touches.length==1&&(t.activeTouch.left=m.touches[0].pageX,t.activeTouch.top=m.touches[0].pageY)}}),ht(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ht(t.scroller,"touchend",function(m){var C=t.activeTouch;if(C&&!hn(t,m)&&C.left!=null&&!C.moved&&new Date-C.start<300){var oe=e.coordsChar(t.activeTouch,"page"),ce;!C.prev||s(C,C.prev)?ce=new fr(oe,oe):!C.prev.prev||s(C,C.prev.prev)?ce=e.findWordAt(oe):ce=new fr(se(oe.line,0),$(e.doc,se(oe.line+1,0))),e.setSelection(ce.anchor,ce.head),e.focus(),u(m)}i()}),ht(t.scroller,"touchcancel",i),ht(t.scroller,"scroll",function(){t.scroller.clientHeight&&(_i(e,t.scroller.scrollTop),Mn(e,t.scroller.scrollLeft,!0),qt(e,"scroll",e))}),ht(t.scroller,"mousewheel",function(m){return Xl(e,m)}),ht(t.scroller,"DOMMouseScroll",function(m){return Xl(e,m)}),ht(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(m){bt(e,m)||T(m)},over:function(m){bt(e,m)||(uu(e,m),T(m))},start:function(m){return su(e,m)},drop:wr(e,ou),leave:function(m){bt(e,m)||xo(e)}};var p=t.input.getField();ht(p,"keyup",function(m){return Ro.call(e,m)}),ht(p,"keydown",wr(e,Mo)),ht(p,"keypress",wr(e,Uo)),ht(p,"focus",function(m){return Ma(e,m)}),ht(p,"blur",function(m){return Wn(e,m)})}var Qa=[];vr.defineInitHook=function(e){return Qa.push(e)};function Ii(e,t,n,r){var i=e.doc,l;n==null&&(n="add"),n=="smart"&&(i.mode.indent?l=tr(e,t).state:n="prev");var s=e.options.tabSize,p=Mt(i,t),m=he(p.text,null,s);p.stateAfter&&(p.stateAfter=null);var C=p.text.match(/^\s*/)[0],oe;if(!r&&!/\S/.test(p.text))oe=0,n="not";else if(n=="smart"&&(oe=i.mode.indent(l,p.text.slice(C.length),p.text),oe==lt||oe>150)){if(!r)return;n="prev"}n=="prev"?t>i.first?oe=he(Mt(i,t-1).text,null,s):oe=0:n=="add"?oe=m+e.options.indentUnit:n=="subtract"?oe=m-e.options.indentUnit:typeof n=="number"&&(oe=m+n),oe=Math.max(0,oe);var ce="",He=0;if(e.options.indentWithTabs)for(var Ue=Math.floor(oe/s);Ue;--Ue)He+=s,ce+="	";if(He<oe&&(ce+=J(oe-He)),ce!=C)return Zn(i,ce,se(t,0),se(t,C.length),"+input"),p.stateAfter=null,!0;for(var ut=0;ut<i.sel.ranges.length;ut++){var Lt=i.sel.ranges[ut];if(Lt.head.line==t&&Lt.head.ch<C.length){var Et=se(t,C.length);za(i,ut,new fr(Et,Et));break}}}var tn=null;function fa(e){tn=e}function $a(e,t,n,r,i){var l=e.doc;e.display.shift=!1,r||(r=l.sel);var s=+new Date-200,p=i=="paste"||e.state.pasteIncoming>s,m=Te(t),C=null;if(p&&r.ranges.length>1)if(tn&&tn.text.join(`
`)==t){if(r.ranges.length%tn.text.length==0){C=[];for(var oe=0;oe<tn.text.length;oe++)C.push(l.splitLines(tn.text[oe]))}}else m.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(C=D(m,function(It){return[It]}));for(var ce=e.curOp.updateInput,He=r.ranges.length-1;He>=0;He--){var Ue=r.ranges[He],ut=Ue.from(),Lt=Ue.to();Ue.empty()&&(n&&n>0?ut=se(ut.line,ut.ch-n):e.state.overwrite&&!p?Lt=se(Lt.line,Math.min(Mt(l,Lt.line).text.length,Lt.ch+d(m).length)):p&&tn&&tn.lineWise&&tn.text.join(`
`)==m.join(`
`)&&(ut=Lt=se(ut.line,0)));var Et={from:ut,to:Lt,text:C?C[He%C.length]:m,origin:i||(p?"paste":e.state.cutIncoming>s?"cut":"+input")};qn(e.doc,Et),Tr(e,"inputRead",e,Et)}t&&!p&&Ko(e,t),zn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=ce),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Go(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&t.hasFocus()&&Wr(t,function(){return $a(t,n,0,null,"paste")}),!0}function Ko(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var l=e.getModeAt(i.head),s=!1;if(l.electricChars){for(var p=0;p<l.electricChars.length;p++)if(t.indexOf(l.electricChars.charAt(p))>-1){s=Ii(e,i.head.line,"smart");break}}else l.electricInput&&l.electricInput.test(Mt(e.doc,i.head.line).text.slice(0,i.head.ch))&&(s=Ii(e,i.head.line,"smart"));s&&Tr(e,"electricInput",e,i.head.line)}}}function Vo(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,l={anchor:se(i,0),head:se(i+1,0)};n.push(l),t.push(e.getRange(l.anchor,l.head))}return{text:t,ranges:n}}function el(e,t,n,r){e.setAttribute("autocorrect",n?"on":"off"),e.setAttribute("autocapitalize",r?"on":"off"),e.setAttribute("spellcheck",!!t)}function Wo(){var e=O("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=O("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?e.style.width="1000px":e.setAttribute("wrap","off"),P&&(e.style.border="1px solid black"),t}function Uu(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){et(this).focus(),this.display.input.focus()},setOption:function(r,i){var l=this.options,s=l[r];l[r]==i&&r!="mode"||(l[r]=i,t.hasOwnProperty(r)&&wr(this,t[r])(this,i,s),qt(this,"optionChange",this,r))},getOption:function(r){return this.options[r]},getDoc:function(){return this.doc},addKeyMap:function(r,i){this.state.keyMaps[i?"push":"unshift"](oa(r))},removeKeyMap:function(r){for(var i=this.state.keyMaps,l=0;l<i.length;++l)if(i[l]==r||i[l].name==r)return i.splice(l,1),!0},addOverlay:Ir(function(r,i){var l=r.token?r:e.getMode(this.options,r);if(l.startState)throw new Error("Overlays may not be stateful.");x(this.state.overlays,{mode:l,modeSpec:r,opaque:i&&i.opaque,priority:i&&i.priority||0},function(s){return s.priority}),this.state.modeGen++,Dr(this)}),removeOverlay:Ir(function(r){for(var i=this.state.overlays,l=0;l<i.length;++l){var s=i[l].modeSpec;if(s==r||typeof r=="string"&&s.name==r){i.splice(l,1),this.state.modeGen++,Dr(this);return}}}),indentLine:Ir(function(r,i,l){typeof i!="string"&&typeof i!="number"&&(i==null?i=this.options.smartIndent?"smart":"prev":i=i?"add":"subtract"),pe(this.doc,r)&&Ii(this,r,i,l)}),indentSelection:Ir(function(r){for(var i=this.doc.sel.ranges,l=-1,s=0;s<i.length;s++){var p=i[s];if(p.empty())p.head.line>l&&(Ii(this,p.head.line,r,!0),l=p.head.line,s==this.doc.sel.primIndex&&zn(this));else{var m=p.from(),C=p.to(),oe=Math.max(l,m.line);l=Math.min(this.lastLine(),C.line-(C.ch?0:1))+1;for(var ce=oe;ce<l;++ce)Ii(this,ce,r);var He=this.doc.sel.ranges;m.ch==0&&i.length==He.length&&He[s].from().ch>0&&za(this.doc,s,new fr(m,He[s].to()),xt)}}}),getTokenAt:function(r,i){return Jt(this,r,i)},getLineTokens:function(r,i){return Jt(this,se(r),i,!0)},getTokenTypeAt:function(r){r=$(this.doc,r);var i=Xt(this,Mt(this.doc,r.line)),l=0,s=(i.length-1)/2,p=r.ch,m;if(p==0)m=i[2];else for(;;){var C=l+s>>1;if((C?i[C*2-1]:0)>=p)s=C;else if(i[C*2+1]<p)l=C+1;else{m=i[C*2+2];break}}var oe=m?m.indexOf("overlay "):-1;return oe<0?m:oe==0?null:m.slice(0,oe-1)},getModeAt:function(r){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(r).state).mode:i},getHelper:function(r,i){return this.getHelpers(r,i)[0]},getHelpers:function(r,i){var l=[];if(!n.hasOwnProperty(i))return l;var s=n[i],p=this.getModeAt(r);if(typeof p[i]=="string")s[p[i]]&&l.push(s[p[i]]);else if(p[i])for(var m=0;m<p[i].length;m++){var C=s[p[i][m]];C&&l.push(C)}else p.helperType&&s[p.helperType]?l.push(s[p.helperType]):s[p.name]&&l.push(s[p.name]);for(var oe=0;oe<s._global.length;oe++){var ce=s._global[oe];ce.pred(p,this)&&De(l,ce.val)==-1&&l.push(ce.val)}return l},getStateAfter:function(r,i){var l=this.doc;return r=de(l,r??l.first+l.size-1),tr(this,r+1,i).state},cursorCoords:function(r,i){var l,s=this.doc.sel.primary();return r==null?l=s.head:typeof r=="object"?l=$(this.doc,r):l=r?s.from():s.to(),$r(this,l,i||"page")},charCoords:function(r,i){return ji(this,$(this.doc,r),i||"page")},coordsChar:function(r,i){return r=Ol(this,r,i||"page"),Aa(this,r.left,r.top)},lineAtHeight:function(r,i){return r=Ol(this,{top:r,left:0},i||"page").top,B(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,i,l){var s=!1,p;if(typeof r=="number"){var m=this.doc.first+this.doc.size-1;r<this.doc.first?r=this.doc.first:r>m&&(r=m,s=!0),p=Mt(this.doc,r)}else p=r;return zi(this,p,{top:0,left:0},i||"page",l||s).top+(s?this.doc.height-ar(p):0)},defaultTextHeight:function(){return Kn(this.display)},defaultCharWidth:function(){return Vn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(r,i,l,s,p){var m=this.display;r=$r(this,$(this.doc,r));var C=r.bottom,oe=r.left;if(i.style.position="absolute",i.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(i),m.sizer.appendChild(i),s=="over")C=r.top;else if(s=="above"||s=="near"){var ce=Math.max(m.wrapper.clientHeight,this.doc.height),He=Math.max(m.sizer.clientWidth,m.lineSpace.clientWidth);(s=="above"||r.bottom+i.offsetHeight>ce)&&r.top>i.offsetHeight?C=r.top-i.offsetHeight:r.bottom+i.offsetHeight<=ce&&(C=r.bottom),oe+i.offsetWidth>He&&(oe=He-i.offsetWidth)}i.style.top=C+"px",i.style.left=i.style.right="",p=="right"?(oe=m.sizer.clientWidth-i.offsetWidth,i.style.right="0px"):(p=="left"?oe=0:p=="middle"&&(oe=(m.sizer.clientWidth-i.offsetWidth)/2),i.style.left=oe+"px"),l&&Cs(this,{left:oe,top:C,right:oe+i.offsetWidth,bottom:C+i.offsetHeight})},triggerOnKeyDown:Ir(Mo),triggerOnKeyPress:Ir(Uo),triggerOnKeyUp:Ro,triggerOnMouseDown:Ir(Io),execCommand:function(r){if(Ci.hasOwnProperty(r))return Ci[r].call(null,this)},triggerElectric:Ir(function(r){Ko(this,r)}),findPosH:function(r,i,l,s){var p=1;i<0&&(p=-1,i=-i);for(var m=$(this.doc,r),C=0;C<i&&(m=tl(this.doc,m,p,l,s),!m.hitSide);++C);return m},moveH:Ir(function(r,i){var l=this;this.extendSelectionsBy(function(s){return l.display.shift||l.doc.extend||s.empty()?tl(l.doc,s.head,r,i,l.options.rtlMoveVisually):r<0?s.from():s.to()},nt)}),deleteH:Ir(function(r,i){var l=this.doc.sel,s=this.doc;l.somethingSelected()?s.replaceSelection("",null,"+delete"):$n(this,function(p){var m=tl(s,p.head,r,i,!1);return r<0?{from:m,to:p.head}:{from:p.head,to:m}})}),findPosV:function(r,i,l,s){var p=1,m=s;i<0&&(p=-1,i=-i);for(var C=$(this.doc,r),oe=0;oe<i;++oe){var ce=$r(this,C,"div");if(m==null?m=ce.left:ce.left=m,C=zo(this,ce,p,l),C.hitSide)break}return C},moveV:Ir(function(r,i){var l=this,s=this.doc,p=[],m=!this.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(oe){if(m)return r<0?oe.from():oe.to();var ce=$r(l,oe.head,"div");oe.goalColumn!=null&&(ce.left=oe.goalColumn),p.push(ce.left);var He=zo(l,ce,r,i);return i=="page"&&oe==s.sel.primary()&&Ua(l,ji(l,He,"div").top-ce.top),He},nt),p.length)for(var C=0;C<s.sel.ranges.length;C++)s.sel.ranges[C].goalColumn=p[C]}),findWordAt:function(r){var i=this.doc,l=Mt(i,r.line).text,s=r.ch,p=r.ch;if(l){var m=this.getHelper(r,"wordChars");(r.sticky=="before"||p==l.length)&&s?--s:++p;for(var C=l.charAt(s),oe=Fe(C,m)?function(ce){return Fe(ce,m)}:/\s/.test(C)?function(ce){return/\s/.test(ce)}:function(ce){return!/\s/.test(ce)&&!Fe(ce)};s>0&&oe(l.charAt(s-1));)--s;for(;p<l.length&&oe(l.charAt(p));)++p}return new fr(se(r.line,s),se(r.line,p))},toggleOverwrite:function(r){r!=null&&r==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?re(this.display.cursorDiv,"CodeMirror-overwrite"):Le(this.display.cursorDiv,"CodeMirror-overwrite"),qt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==at(Qe(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ir(function(r,i){vi(this,r,i)}),getScrollInfo:function(){var r=this.display.scroller;return{left:r.scrollLeft,top:r.scrollTop,height:r.scrollHeight-an(this)-this.display.barHeight,width:r.scrollWidth-an(this)-this.display.barWidth,clientHeight:La(this),clientWidth:On(this)}},scrollIntoView:Ir(function(r,i){r==null?(r={from:this.doc.sel.primary().head,to:null},i==null&&(i=this.options.cursorScrollMargin)):typeof r=="number"?r={from:se(r,0),to:null}:r.from==null&&(r={from:r,to:null}),r.to||(r.to=r.from),r.margin=i||0,r.from.line!=null?Ms(this,r):Dl(this,r.from,r.to,r.margin)}),setSize:Ir(function(r,i){var l=this,s=function(m){return typeof m=="number"||/^\d+$/.test(String(m))?m+"px":m};r!=null&&(this.display.wrapper.style.width=s(r)),i!=null&&(this.display.wrapper.style.height=s(i)),this.options.lineWrapping&&Tl(this);var p=this.display.viewFrom;this.doc.iter(p,this.display.viewTo,function(m){if(m.widgets){for(var C=0;C<m.widgets.length;C++)if(m.widgets[C].noHScroll){mn(l,p,"widget");break}}++p}),this.curOp.forceUpdate=!0,qt(this,"refresh",this)}),operation:function(r){return Wr(this,r)},startOperation:function(){return Un(this)},endOperation:function(){return In(this)},refresh:Ir(function(){var r=this.display.cachedTextHeight;Dr(this),this.curOp.forceUpdate=!0,di(this),vi(this,this.doc.scrollLeft,this.doc.scrollTop),Da(this.display),(r==null||Math.abs(r-Kn(this.display))>.5||this.options.lineWrapping)&&Oa(this),qt(this,"refresh",this)}),swapDoc:Ir(function(r){var i=this.doc;return i.cm=null,this.state.selectingText&&this.state.selectingText(),Jl(this,r),di(this),this.display.input.reset(),vi(this,r.scrollLeft,r.scrollTop),this.curOp.forceScroll=!0,Tr(this,"swapDoc",this,i),i}),phrase:function(r){var i=this.options.phrases;return i&&Object.prototype.hasOwnProperty.call(i,r)?i[r]:r},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},o(e),e.registerHelper=function(r,i,l){n.hasOwnProperty(r)||(n[r]=e[r]={_global:[]}),n[r][i]=l},e.registerGlobalHelper=function(r,i,l,s){e.registerHelper(r,i,s),n[r]._global.push({pred:l,val:s})}}function tl(e,t,n,r,i){var l=t,s=n,p=Mt(e,t.line),m=i&&e.direction=="rtl"?-n:n;function C(){var Kt=t.line+m;return Kt<e.first||Kt>=e.first+e.size?!1:(t=new se(Kt,t.ch,t.sticky),p=Mt(e,Kt))}function oe(Kt){var Pt;if(r=="codepoint"){var zt=p.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(zt))Pt=null;else{var er=n>0?zt>=55296&&zt<56320:zt>=56320&&zt<57343;Pt=new se(t.line,Math.max(0,Math.min(p.text.length,t.ch+n*(er?2:1))),-n)}}else i?Pt=gu(e.cm,p,t,n):Pt=Xa(p,t,n);if(Pt==null)if(!Kt&&C())t=Ya(i,e.cm,p,t.line,m);else return!1;else t=Pt;return!0}if(r=="char"||r=="codepoint")oe();else if(r=="column")oe(!0);else if(r=="word"||r=="group")for(var ce=null,He=r=="group",Ue=e.cm&&e.cm.getHelper(t,"wordChars"),ut=!0;!(n<0&&!oe(!ut));ut=!1){var Lt=p.text.charAt(t.ch)||`
`,Et=Fe(Lt,Ue)?"w":He&&Lt==`
`?"n":!He||/\s/.test(Lt)?null:"p";if(He&&!ut&&!Et&&(Et="s"),ce&&ce!=Et){n<0&&(n=1,oe(),t.sticky="after");break}if(Et&&(ce=Et),n>0&&!oe(!ut))break}var It=ia(e,t,l,s,!0);return Xe(l,It)&&(It.hitSide=!0),It}function zo(e,t,n,r){var i=e.doc,l=t.left,s;if(r=="page"){var p=Math.min(e.display.wrapper.clientHeight,et(e).innerHeight||i(e).documentElement.clientHeight),m=Math.max(p-.5*Kn(e.display),3);s=(n>0?t.bottom:t.top)+n*m}else r=="line"&&(s=n>0?t.bottom+3:t.top-3);for(var C;C=Aa(e,l,s),!!C.outside;){if(n<0?s<=0:s>=i.height){C.hitSide=!0;break}s+=n*5}return C}var cr=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ye,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};cr.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;i.contentEditable=!0,el(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize);function l(p){for(var m=p.target;m;m=m.parentNode){if(m==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(m.className))break}return!1}ht(i,"paste",function(p){!l(p)||bt(r,p)||Go(p,r)||L<=11&&setTimeout(wr(r,function(){return t.updateFromDOM()}),20)}),ht(i,"compositionstart",function(p){t.composing={data:p.data,done:!1}}),ht(i,"compositionupdate",function(p){t.composing||(t.composing={data:p.data,done:!1})}),ht(i,"compositionend",function(p){t.composing&&(p.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),ht(i,"touchstart",function(){return n.forceCompositionEnd()}),ht(i,"input",function(){t.composing||t.readFromDOMSoon()});function s(p){if(!(!l(p)||bt(r,p))){if(r.somethingSelected())fa({lineWise:!1,text:r.getSelections()}),p.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var m=Vo(r);fa({lineWise:!0,text:m.text}),p.type=="cut"&&r.operation(function(){r.setSelections(m.ranges,0,xt),r.replaceSelection("",null,"cut")})}else return;if(p.clipboardData){p.clipboardData.clearData();var C=tn.text.join(`
`);if(p.clipboardData.setData("Text",C),p.clipboardData.getData("Text")==C){p.preventDefault();return}}var oe=Wo(),ce=oe.firstChild;el(ce),r.display.lineSpace.insertBefore(oe,r.display.lineSpace.firstChild),ce.value=tn.text.join(`
`);var He=at(vt(i));_e(ce),setTimeout(function(){r.display.lineSpace.removeChild(oe),He.focus(),He==i&&n.showPrimarySelection()},50)}}ht(i,"copy",s),ht(i,"cut",s)},cr.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},cr.prototype.prepareSelection=function(){var e=Ul(this.cm,!1);return e.focus=at(vt(this.div))==this.div,e},cr.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},cr.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},cr.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||i.line<t.display.viewFrom){e.removeAllRanges();return}var l=ca(t,e.anchorNode,e.anchorOffset),s=ca(t,e.focusNode,e.focusOffset);if(!(l&&!l.bad&&s&&!s.bad&&Oe(k(l,s),r)==0&&Oe(kt(l,s),i)==0)){var p=t.display.view,m=r.line>=t.display.viewFrom&&jo(t,r)||{node:p[0].measure.map[2],offset:0},C=i.line<t.display.viewTo&&jo(t,i);if(!C){var oe=p[p.length-1].measure,ce=oe.maps?oe.maps[oe.maps.length-1]:oe.map;C={node:ce[ce.length-1],offset:ce[ce.length-2]-ce[ce.length-3]}}if(!m||!C){e.removeAllRanges();return}var He=e.rangeCount&&e.getRangeAt(0),Ue;try{Ue=tt(m.node,m.offset,C.offset,C.node)}catch{}Ue&&(!A&&t.state.focused?(e.collapse(m.node,m.offset),Ue.collapsed||(e.removeAllRanges(),e.addRange(Ue))):(e.removeAllRanges(),e.addRange(Ue)),He&&e.anchorNode==null?e.addRange(He):A&&this.startGracePeriod()),this.rememberSelection()}},cr.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},cr.prototype.showMultipleSelections=function(e){ke(this.cm.display.cursorDiv,e.cursors),ke(this.cm.display.selectionDiv,e.selection)},cr.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},cr.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Pe(this.div,t)},cr.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||at(vt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},cr.prototype.blur=function(){this.div.blur()},cr.prototype.getField=function(){return this.div},cr.prototype.supportsTouch=function(){return!0},cr.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Wr(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))}this.polling.set(this.cm.options.pollInterval,n)},cr.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},cr.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(G&&S&&this.cm.display.gutterSpecs.length&&Iu(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var n=ca(t,e.anchorNode,e.anchorOffset),r=ca(t,e.focusNode,e.focusOffset);n&&r&&Wr(t,function(){Rr(t.doc,Ln(n,r),xt),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},cr.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(r.ch==0&&r.line>e.firstLine()&&(r=se(r.line-1,Mt(e.doc,r.line-1).length)),i.ch==Mt(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=se(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;var l,s,p;r.line==t.viewFrom||(l=Cn(e,r.line))==0?(s=f(t.view[0].line),p=t.view[0].node):(s=f(t.view[l].line),p=t.view[l-1].node.nextSibling);var m=Cn(e,i.line),C,oe;if(m==t.view.length-1?(C=t.viewTo-1,oe=t.lineDiv.lastChild):(C=f(t.view[m+1].line)-1,oe=t.view[m+1].node.previousSibling),!p)return!1;for(var ce=e.doc.splitLines(Pu(e,p,oe,s,C)),He=pr(e.doc,se(s,0),se(C,Mt(e.doc,C).text.length));ce.length>1&&He.length>1;)if(d(ce)==d(He))ce.pop(),He.pop(),C--;else if(ce[0]==He[0])ce.shift(),He.shift(),s++;else break;for(var Ue=0,ut=0,Lt=ce[0],Et=He[0],It=Math.min(Lt.length,Et.length);Ue<It&&Lt.charCodeAt(Ue)==Et.charCodeAt(Ue);)++Ue;for(var Kt=d(ce),Pt=d(He),zt=Math.min(Kt.length-(ce.length==1?Ue:0),Pt.length-(He.length==1?Ue:0));ut<zt&&Kt.charCodeAt(Kt.length-ut-1)==Pt.charCodeAt(Pt.length-ut-1);)++ut;if(ce.length==1&&He.length==1&&s==r.line)for(;Ue&&Ue>r.ch&&Kt.charCodeAt(Kt.length-ut-1)==Pt.charCodeAt(Pt.length-ut-1);)Ue--,ut++;ce[ce.length-1]=Kt.slice(0,Kt.length-ut).replace(/^\u200b+/,""),ce[0]=ce[0].slice(Ue).replace(/\u200b+$/,"");var er=se(s,Ue),Qt=se(C,He.length?d(He).length-ut:0);if(ce.length>1||ce[0]||Oe(er,Qt))return Zn(e.doc,ce,er,Qt,"+input"),!0},cr.prototype.ensurePolled=function(){this.forceCompositionEnd()},cr.prototype.reset=function(){this.forceCompositionEnd()},cr.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},cr.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},cr.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Wr(this.cm,function(){return Dr(e.cm)})},cr.prototype.setUneditable=function(e){e.contentEditable="false"},cr.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||wr(this.cm,$a)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},cr.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},cr.prototype.onContextMenu=function(){},cr.prototype.resetPosition=function(){},cr.prototype.needsContentAttribute=!0;function jo(e,t){var n=ya(e,t.line);if(!n||n.hidden)return null;var r=Mt(e.doc,t.line),i=Ll(n,r,t.line),l=we(r,e.doc.direction),s="left";if(l){var p=Je(l,t.ch);s=p%2?"right":"left"}var m=kl(i.map,t.ch,s);return m.offset=m.collapse=="right"?m.end:m.start,m}function Iu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function ti(e,t){return t&&(e.bad=!0),e}function Pu(e,t,n,r,i){var l="",s=!1,p=e.doc.lineSeparator(),m=!1;function C(Ue){return function(ut){return ut.id==Ue}}function oe(){s&&(l+=p,m&&(l+=p),s=m=!1)}function ce(Ue){Ue&&(oe(),l+=Ue)}function He(Ue){if(Ue.nodeType==1){var ut=Ue.getAttribute("cm-text");if(ut){ce(ut);return}var Lt=Ue.getAttribute("cm-marker"),Et;if(Lt){var It=e.findMarks(se(r,0),se(i+1,0),C(+Lt));It.length&&(Et=It[0].find(0))&&ce(pr(e.doc,Et.from,Et.to).join(p));return}if(Ue.getAttribute("contenteditable")=="false")return;var Kt=/^(pre|div|p|li|table|br)$/i.test(Ue.nodeName);if(!/^br$/i.test(Ue.nodeName)&&Ue.textContent.length==0)return;Kt&&oe();for(var Pt=0;Pt<Ue.childNodes.length;Pt++)He(Ue.childNodes[Pt]);/^(pre|p)$/i.test(Ue.nodeName)&&(m=!0),Kt&&(s=!0)}else Ue.nodeType==3&&ce(Ue.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;He(t),t!=n;)t=t.nextSibling,m=!1;return l}function ca(e,t,n){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[n],!r)return ti(e.clipPos(se(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var l=e.display.view[i];if(l.node==r)return Du(l,t,n)}}function Du(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!Pe(r,t))return ti(se(f(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var l=e.rest?d(e.rest):e.line;return ti(se(f(l),l.text.length),i)}var s=t.nodeType==3?t:null,p=t;for(!s&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(s=t.firstChild,n&&(n=s.nodeValue.length));p.parentNode!=r;)p=p.parentNode;var m=e.measure,C=m.maps;function oe(Et,It,Kt){for(var Pt=-1;Pt<(C?C.length:0);Pt++)for(var zt=Pt<0?m.map:C[Pt],er=0;er<zt.length;er+=3){var Qt=zt[er+2];if(Qt==Et||Qt==It){var lr=f(Pt<0?e.line:e.rest[Pt]),hr=zt[er]+Kt;return(Kt<0||Qt!=Et)&&(hr=zt[er+(Kt?1:0)]),se(lr,hr)}}}var ce=oe(s,p,n);if(ce)return ti(ce,i);for(var He=p.nextSibling,Ue=s?s.nodeValue.length-n:0;He;He=He.nextSibling){if(ce=oe(He,He.firstChild,0),ce)return ti(se(ce.line,ce.ch-Ue),i);Ue+=He.textContent.length}for(var ut=p.previousSibling,Lt=n;ut;ut=ut.previousSibling){if(ce=oe(ut,ut.firstChild,-1),ce)return ti(se(ce.line,ce.ch+Lt),i);Lt+=ut.textContent.length}}var br=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new ye,this.hasSelection=!1,this.composing=null,this.resetting=!1};br.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),P&&(i.style.width="0px"),ht(i,"input",function(){w&&L>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),ht(i,"paste",function(s){bt(r,s)||Go(s,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())});function l(s){if(!bt(r,s)){if(r.somethingSelected())fa({lineWise:!1,text:r.getSelections()});else if(r.options.lineWiseCopyCut){var p=Vo(r);fa({lineWise:!0,text:p.text}),s.type=="cut"?r.setSelections(p.ranges,null,xt):(n.prevInput="",i.value=p.text.join(`
`),_e(i))}else return;s.type=="cut"&&(r.state.cutIncoming=+new Date)}}ht(i,"cut",l),ht(i,"copy",l),ht(e.scroller,"paste",function(s){if(!(hn(e,s)||bt(r,s))){if(!i.dispatchEvent){r.state.pasteIncoming=+new Date,n.focus();return}var p=new Event("paste");p.clipboardData=s.clipboardData,i.dispatchEvent(p)}}),ht(e.lineSpace,"selectstart",function(s){hn(e,s)||u(s)}),ht(i,"compositionstart",function(){var s=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:s,range:r.markText(s,r.getCursor("to"),{className:"CodeMirror-composing"})}}),ht(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},br.prototype.createField=function(e){this.wrapper=Wo(),this.textarea=this.wrapper.firstChild;var t=this.cm.options;el(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},br.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},br.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=Ul(e);if(e.options.moveInputWithCursor){var i=$r(e,n.sel.primary().head,"div"),l=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+s.top-l.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+s.left-l.left))}return r},br.prototype.showSelection=function(e){var t=this.cm,n=t.display;ke(n.cursorDiv,e.cursors),ke(n.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},br.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&_e(this.textarea),w&&L>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",w&&L>=9&&(this.hasSelection=null));this.resetting=!1}},br.prototype.getField=function(){return this.textarea},br.prototype.supportsTouch=function(){return!1},br.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!q||at(vt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},br.prototype.blur=function(){this.textarea.blur()},br.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},br.prototype.receivedFocus=function(){this.slowPoll()},br.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},br.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function n(){var r=t.poll();!r&&!e?(e=!0,t.polling.set(60,n)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,n)},br.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||ft(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(w&&L>=9&&this.hasSelection===i||le&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var l=i.charCodeAt(0);if(l==8203&&!r&&(r="​"),l==8666)return this.reset(),this.cm.execCommand("undo")}for(var s=0,p=Math.min(r.length,i.length);s<p&&r.charCodeAt(s)==i.charCodeAt(s);)++s;return Wr(t,function(){$a(t,i.slice(s),r.length-s,null,e.composing?"*compose":null),i.length>1e3||i.indexOf(`
`)>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},br.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},br.prototype.onKeyPress=function(){w&&L>=9&&(this.hasSelection=null),this.fastPoll()},br.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var l=Nn(n,e),s=r.scroller.scrollTop;if(!l||F)return;var p=n.options.resetSelectionOnContextMenu;p&&n.doc.sel.contains(l)==-1&&wr(n,Rr)(n.doc,Ln(l),xt);var m=i.style.cssText,C=t.wrapper.style.cssText,oe=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",i.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-oe.top-5)+"px; left: "+(e.clientX-oe.left-5)+`px;
      z-index: 1000; background: `+(w?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var ce;b&&(ce=i.ownerDocument.defaultView.scrollY),r.input.focus(),b&&i.ownerDocument.defaultView.scrollTo(null,ce),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=Ue,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll);function He(){if(i.selectionStart!=null){var Lt=n.somethingSelected(),Et="​"+(Lt?i.value:"");i.value="⇚",i.value=Et,t.prevInput=Lt?"":"​",i.selectionStart=1,i.selectionEnd=Et.length,r.selForContextMenu=n.doc.sel}}function Ue(){if(t.contextMenuPending==Ue&&(t.contextMenuPending=!1,t.wrapper.style.cssText=C,i.style.cssText=m,w&&L<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=s),i.selectionStart!=null)){(!w||w&&L<9)&&He();var Lt=0,Et=function(){r.selForContextMenu==n.doc.sel&&i.selectionStart==0&&i.selectionEnd>0&&t.prevInput=="​"?wr(n,fo)(n):Lt++<10?r.detectingSelectAll=setTimeout(Et,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(Et,200)}}if(w&&L>=9&&He(),te){T(e);var ut=function(){Bt(window,"mouseup",ut),setTimeout(Ue,20)};ht(window,"mouseup",ut)}else setTimeout(Ue,50)},br.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},br.prototype.setUneditable=function(){},br.prototype.needsContentAttribute=!1;function Bu(e,t){if(t=t?ct(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var n=at(vt(e));t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}function r(){e.value=p.getValue()}var i;if(e.form&&(ht(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var l=e.form;i=l.submit;try{var s=l.submit=function(){r(),l.submit=i,l.submit(),l.submit=s}}catch{}}t.finishInit=function(m){m.save=r,m.getTextArea=function(){return e},m.toTextArea=function(){m.toTextArea=isNaN,r(),e.parentNode.removeChild(m.getWrapperElement()),e.style.display="",e.form&&(Bt(e.form,"submit",r),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=i))}},e.style.display="none";var p=vr(function(m){return e.parentNode.insertBefore(m,e.nextSibling)},t);return p}function Fu(e){e.off=Bt,e.on=ht,e.wheelEventPixels=js,e.Doc=Br,e.splitLines=Te,e.countColumn=he,e.findColumn=be,e.isWordChar=Ie,e.Pass=lt,e.signal=qt,e.Line=cn,e.changeEnd=yn,e.scrollbarModel=Hl,e.Pos=se,e.cmpPos=Oe,e.modes=gt,e.mimeModes=Rt,e.resolveMode=Yt,e.getMode=ur,e.modeExtensions=Ht,e.extendMode=$t,e.copyState=Zt,e.startState=nr,e.innerMode=ir,e.commands=Ci,e.keyMap=dn,e.keyName=So,e.isModifierKey=To,e.lookupKey=Qn,e.normalizeKeyMap=du,e.StringStream=sr,e.SharedTextMarker=Oi,e.TextMarker=kn,e.LineWidget=Si,e.e_preventDefault=u,e.e_stopPropagation=N,e.e_stop=T,e.addClass=re,e.contains=Pe,e.rmClass=Le,e.keyNames=An}Nu(vr),Uu(vr);var Hu="iter insert remove copy getEditor constructor".split(" ");for(var ha in Br.prototype)Br.prototype.hasOwnProperty(ha)&&De(Hu,ha)<0&&(vr.prototype[ha]=function(e){return function(){return e.apply(this.doc,arguments)}}(Br.prototype[ha]));return o(Br),vr.inputStyles={textarea:br,contenteditable:cr},vr.defineMode=function(e){!vr.defaults.mode&&e!="null"&&(vr.defaults.mode=e),Ut.apply(this,arguments)},vr.defineMIME=Ct,vr.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),vr.defineMIME("text/plain","null"),vr.defineExtension=function(e,t){vr.prototype[e]=t},vr.defineDocExtension=function(e,t){Br.prototype[e]=t},vr.fromTextArea=Bu,Fu(vr),vr.version="5.65.17",vr})}(il)),il.exports}(function(a,Ae){(function(v){v(Vr())})(function(v){v.defineMode("javascript",function(R,A){var c=R.indentUnit,g=A.statementIndent,_=A.jsonld,w=A.json||_,L=A.trackScope!==!1,b=A.typescript,E=A.wordCharacters||/[\w$\xa1-\uffff]/,S=function(){function f(pt){return{type:pt,style:"keyword"}}var B=f("keyword a"),pe=f("keyword b"),Re=f("keyword c"),se=f("keyword d"),Oe=f("operator"),Xe={type:"atom",style:"atom"};return{if:f("if"),while:B,with:B,else:pe,do:pe,try:pe,finally:pe,return:se,break:se,continue:se,new:f("new"),delete:Re,void:Re,throw:Re,debugger:f("debugger"),var:f("var"),const:f("var"),let:f("var"),function:f("function"),catch:f("catch"),for:f("for"),switch:f("switch"),case:f("case"),default:f("default"),in:Oe,typeof:Oe,instanceof:Oe,true:Xe,false:Xe,null:Xe,undefined:Xe,NaN:Xe,Infinity:Xe,this:f("this"),class:f("class"),super:f("atom"),yield:Re,export:f("export"),import:f("import"),extends:Re,await:Re}}(),I=/[+\-*&%=<>!?|~^@]/,F=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function H(f){for(var B=!1,pe,Re=!1;(pe=f.next())!=null;){if(!B){if(pe=="/"&&!Re)return;pe=="["?Re=!0:Re&&pe=="]"&&(Re=!1)}B=!B&&pe=="\\"}}var V,M;function P(f,B,pe){return V=f,M=pe,B}function G(f,B){var pe=f.next();if(pe=='"'||pe=="'")return B.tokenize=q(pe),B.tokenize(f,B);if(pe=="."&&f.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return P("number","number");if(pe=="."&&f.match(".."))return P("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(pe))return P(pe);if(pe=="="&&f.eat(">"))return P("=>","operator");if(pe=="0"&&f.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return P("number","number");if(/\d/.test(pe))return f.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),P("number","number");if(pe=="/")return f.eat("*")?(B.tokenize=le,le(f,B)):f.eat("/")?(f.skipToEnd(),P("comment","comment")):X(f,B,1)?(H(f),f.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),P("regexp","string-2")):(f.eat("="),P("operator","operator",f.current()));if(pe=="`")return B.tokenize=ge,ge(f,B);if(pe=="#"&&f.peek()=="!")return f.skipToEnd(),P("meta","meta");if(pe=="#"&&f.eatWhile(E))return P("variable","property");if(pe=="<"&&f.match("!--")||pe=="-"&&f.match("->")&&!/\S/.test(f.string.slice(0,f.start)))return f.skipToEnd(),P("comment","comment");if(I.test(pe))return(pe!=">"||!B.lexical||B.lexical.type!=">")&&(f.eat("=")?(pe=="!"||pe=="=")&&f.eat("="):/[<>*+\-|&?]/.test(pe)&&(f.eat(pe),pe==">"&&f.eat(pe))),pe=="?"&&f.eat(".")?P("."):P("operator","operator",f.current());if(E.test(pe)){f.eatWhile(E);var Re=f.current();if(B.lastType!="."){if(S.propertyIsEnumerable(Re)){var se=S[Re];return P(se.type,se.style,Re)}if(Re=="async"&&f.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return P("async","keyword",Re)}return P("variable","variable",Re)}}function q(f){return function(B,pe){var Re=!1,se;if(_&&B.peek()=="@"&&B.match(F))return pe.tokenize=G,P("jsonld-keyword","meta");for(;(se=B.next())!=null&&!(se==f&&!Re);)Re=!Re&&se=="\\";return Re||(pe.tokenize=G),P("string","string")}}function le(f,B){for(var pe=!1,Re;Re=f.next();){if(Re=="/"&&pe){B.tokenize=G;break}pe=Re=="*"}return P("comment","comment")}function ge(f,B){for(var pe=!1,Re;(Re=f.next())!=null;){if(!pe&&(Re=="`"||Re=="$"&&f.eat("{"))){B.tokenize=G;break}pe=!pe&&Re=="\\"}return P("quasi","string-2",f.current())}var y="([{}])";function z(f,B){B.fatArrowAt&&(B.fatArrowAt=null);var pe=f.string.indexOf("=>",f.start);if(!(pe<0)){if(b){var Re=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(f.string.slice(f.start,pe));Re&&(pe=Re.index)}for(var se=0,Oe=!1,Xe=pe-1;Xe>=0;--Xe){var pt=f.string.charAt(Xe),kt=y.indexOf(pt);if(kt>=0&&kt<3){if(!se){++Xe;break}if(--se==0){pt=="("&&(Oe=!0);break}}else if(kt>=3&&kt<6)++se;else if(E.test(pt))Oe=!0;else if(/["'\/`]/.test(pt))for(;;--Xe){if(Xe==0)return;var k=f.string.charAt(Xe-1);if(k==pt&&f.string.charAt(Xe-2)!="\\"){Xe--;break}}else if(Oe&&!se){++Xe;break}}Oe&&!se&&(B.fatArrowAt=Xe)}}var ee={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function te(f,B,pe,Re,se,Oe){this.indented=f,this.column=B,this.type=pe,this.prev=se,this.info=Oe,Re!=null&&(this.align=Re)}function ne(f,B){if(!L)return!1;for(var pe=f.localVars;pe;pe=pe.next)if(pe.name==B)return!0;for(var Re=f.context;Re;Re=Re.prev)for(var pe=Re.vars;pe;pe=pe.next)if(pe.name==B)return!0}function Le(f,B,pe,Re,se){var Oe=f.cc;for(ie.state=f,ie.stream=se,ie.marked=null,ie.cc=Oe,ie.style=B,f.lexical.hasOwnProperty("align")||(f.lexical.align=!0);;){var Xe=Oe.length?Oe.pop():w?De:he;if(Xe(pe,Re)){for(;Oe.length&&Oe[Oe.length-1].lex;)Oe.pop()();return ie.marked?ie.marked:pe=="variable"&&ne(f,Re)?"variable-2":B}}}var ie={state:null,column:null,marked:null,cc:null};function ke(){for(var f=arguments.length-1;f>=0;f--)ie.cc.push(arguments[f])}function O(){return ke.apply(null,arguments),!0}function Ce(f,B){for(var pe=B;pe;pe=pe.next)if(pe.name==f)return!0;return!1}function tt(f){var B=ie.state;if(ie.marked="def",!!L){if(B.context){if(B.lexical.info=="var"&&B.context&&B.context.block){var pe=Pe(f,B.context);if(pe!=null){B.context=pe;return}}else if(!Ce(f,B.localVars)){B.localVars=new fe(f,B.localVars);return}}A.globalVars&&!Ce(f,B.globalVars)&&(B.globalVars=new fe(f,B.globalVars))}}function Pe(f,B){if(B)if(B.block){var pe=Pe(f,B.prev);return pe?pe==B.prev?B:new re(pe,B.vars,!0):null}else return Ce(f,B.vars)?B:new re(B.prev,new fe(f,B.vars),!1);else return null}function at(f){return f=="public"||f=="private"||f=="protected"||f=="abstract"||f=="readonly"}function re(f,B,pe){this.prev=f,this.vars=B,this.block=pe}function fe(f,B){this.name=f,this.next=B}var _e=new fe("this",new fe("arguments",null));function Ye(){ie.state.context=new re(ie.state.context,ie.state.localVars,!1),ie.state.localVars=_e}function Qe(){ie.state.context=new re(ie.state.context,ie.state.localVars,!0),ie.state.localVars=null}Ye.lex=Qe.lex=!0;function vt(){ie.state.localVars=ie.state.context.vars,ie.state.context=ie.state.context.prev}vt.lex=!0;function et(f,B){var pe=function(){var Re=ie.state,se=Re.indented;if(Re.lexical.type=="stat")se=Re.lexical.indented;else for(var Oe=Re.lexical;Oe&&Oe.type==")"&&Oe.align;Oe=Oe.prev)se=Oe.indented;Re.lexical=new te(se,ie.stream.column(),f,null,Re.lexical,B)};return pe.lex=!0,pe}function rt(){var f=ie.state;f.lexical.prev&&(f.lexical.type==")"&&(f.indented=f.lexical.indented),f.lexical=f.lexical.prev)}rt.lex=!0;function ct(f){function B(pe){return pe==f?O():f==";"||pe=="}"||pe==")"||pe=="]"?ke():O(B)}return B}function he(f,B){return f=="var"?O(et("vardef",B),N,ct(";"),rt):f=="keyword a"?O(et("form"),lt,he,rt):f=="keyword b"?O(et("form"),he,rt):f=="keyword d"?ie.stream.match(/^\s*$/,!1)?O():O(et("stat"),yt,ct(";"),rt):f=="debugger"?O(ct(";")):f=="{"?O(et("}"),Qe,W,rt,vt):f==";"?O():f=="if"?(ie.state.lexical.info=="else"&&ie.state.cc[ie.state.cc.length-1]==rt&&ie.state.cc.pop()(),O(et("form"),lt,he,rt,ot)):f=="function"?O(Te):f=="for"?O(et("form"),Qe,_t,he,vt,rt):f=="class"||b&&B=="interface"?(ie.marked="keyword",O(et("form",f=="class"?f:B),gt,rt)):f=="variable"?b&&B=="declare"?(ie.marked="keyword",O(he)):b&&(B=="module"||B=="enum"||B=="type")&&ie.stream.match(/^\s*\w/,!1)?(ie.marked="keyword",B=="enum"?O(Mt):B=="type"?O(ae,ct("operator"),we,ct(";")):O(et("form"),h,ct("{"),et("}"),W,rt,rt)):b&&B=="namespace"?(ie.marked="keyword",O(et("form"),De,he,rt)):b&&B=="abstract"?(ie.marked="keyword",O(he)):O(et("stat"),ve):f=="switch"?O(et("form"),lt,ct("{"),et("}","switch"),Qe,W,rt,rt,vt):f=="case"?O(De,ct(":")):f=="default"?O(ct(":")):f=="catch"?O(et("form"),Ye,ye,he,rt,vt):f=="export"?O(et("stat"),Yt,rt):f=="import"?O(et("stat"),Ht,rt):f=="async"?O(he):B=="@"?O(De,he):ke(et("stat"),De,ct(";"),rt)}function ye(f){if(f=="(")return O(ze,ct(")"))}function De(f,B){return xt(f,B,!1)}function Se(f,B){return xt(f,B,!0)}function lt(f){return f!="("?ke():O(et(")"),yt,ct(")"),rt)}function xt(f,B,pe){if(ie.state.fatArrowAt==ie.stream.start){var Re=pe?D:d;if(f=="(")return O(Ye,et(")"),wt(ze,")"),rt,ct("=>"),Re,vt);if(f=="variable")return ke(Ye,h,ct("=>"),Re,vt)}var se=pe?be:nt;return ee.hasOwnProperty(f)?O(se):f=="function"?O(Te,se):f=="class"||b&&B=="interface"?(ie.marked="keyword",O(et("form"),Ee,rt)):f=="keyword c"||f=="async"?O(pe?Se:De):f=="("?O(et(")"),yt,ct(")"),rt,se):f=="operator"||f=="spread"?O(pe?Se:De):f=="["?O(et("]"),sr,rt,se):f=="{"?jt(Fe,"}",null,se):f=="quasi"?ke(Ge,se):f=="new"?O(x(pe)):O()}function yt(f){return f.match(/[;\}\)\],]/)?ke():ke(De)}function nt(f,B){return f==","?O(yt):be(f,B,!1)}function be(f,B,pe){var Re=pe==!1?nt:be,se=pe==!1?De:Se;if(f=="=>")return O(Ye,pe?D:d,vt);if(f=="operator")return/\+\+|--/.test(B)||b&&B=="!"?O(Re):b&&B=="<"&&ie.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?O(et(">"),wt(we,">"),rt,Re):B=="?"?O(De,ct(":"),se):O(se);if(f=="quasi")return ke(Ge,Re);if(f!=";"){if(f=="(")return jt(Se,")","call",Re);if(f==".")return O(Ie,Re);if(f=="[")return O(et("]"),yt,ct("]"),rt,Re);if(b&&B=="as")return ie.marked="keyword",O(we,Re);if(f=="regexp")return ie.state.lastType=ie.marked="operator",ie.stream.backUp(ie.stream.pos-ie.stream.start-1),O(se)}}function Ge(f,B){return f!="quasi"?ke():B.slice(B.length-2)!="${"?O(Ge):O(yt,J)}function J(f){if(f=="}")return ie.marked="string-2",ie.state.tokenize=ge,O(Ge)}function d(f){return z(ie.stream,ie.state),ke(f=="{"?he:De)}function D(f){return z(ie.stream,ie.state),ke(f=="{"?he:Se)}function x(f){return function(B){return B=="."?O(f?Q:Y):B=="variable"&&b?O(Ft,f?be:nt):ke(f?Se:De)}}function Y(f,B){if(B=="target")return ie.marked="keyword",O(nt)}function Q(f,B){if(B=="target")return ie.marked="keyword",O(be)}function ve(f){return f==":"?O(rt,he):ke(nt,ct(";"),rt)}function Ie(f){if(f=="variable")return ie.marked="property",O()}function Fe(f,B){if(f=="async")return ie.marked="property",O(Fe);if(f=="variable"||ie.style=="keyword"){if(ie.marked="property",B=="get"||B=="set")return O(it);var pe;return b&&ie.state.fatArrowAt==ie.stream.start&&(pe=ie.stream.match(/^\s*:\s*/,!1))&&(ie.state.fatArrowAt=ie.stream.pos+pe[0].length),O(Nt)}else{if(f=="number"||f=="string")return ie.marked=_?"property":ie.style+" property",O(Nt);if(f=="jsonld-keyword")return O(Nt);if(b&&at(B))return ie.marked="keyword",O(Fe);if(f=="[")return O(De,qe,ct("]"),Nt);if(f=="spread")return O(Se,Nt);if(B=="*")return ie.marked="keyword",O(Fe);if(f==":")return ke(Nt)}}function it(f){return f!="variable"?ke(Nt):(ie.marked="property",O(Te))}function Nt(f){if(f==":")return O(Se);if(f=="(")return ke(Te)}function wt(f,B,pe){function Re(se,Oe){if(pe?pe.indexOf(se)>-1:se==","){var Xe=ie.state.lexical;return Xe.info=="call"&&(Xe.pos=(Xe.pos||0)+1),O(function(pt,kt){return pt==B||kt==B?ke():ke(f)},Re)}return se==B||Oe==B?O():pe&&pe.indexOf(";")>-1?ke(f):O(ct(B))}return function(se,Oe){return se==B||Oe==B?O():ke(f,Re)}}function jt(f,B,pe){for(var Re=3;Re<arguments.length;Re++)ie.cc.push(arguments[Re]);return O(et(B,pe),wt(f,B),rt)}function W(f){return f=="}"?O():ke(he,W)}function qe(f,B){if(b){if(f==":")return O(we);if(B=="?")return O(qe)}}function Ze(f,B){if(b&&(f==":"||B=="in"))return O(we)}function Je(f){if(b&&f==":")return ie.stream.match(/^\s*\w+\s+is\b/,!1)?O(De,We,we):O(we)}function We(f,B){if(B=="is")return ie.marked="keyword",O()}function we(f,B){if(B=="keyof"||B=="typeof"||B=="infer"||B=="readonly")return ie.marked="keyword",O(B=="typeof"?Se:we);if(f=="variable"||B=="void")return ie.marked="type",O(Ot);if(B=="|"||B=="&")return O(we);if(f=="string"||f=="number"||f=="atom")return O(Ot);if(f=="[")return O(et("]"),wt(we,"]",","),rt,Ot);if(f=="{")return O(et("}"),ht,rt,Ot);if(f=="(")return O(wt(bt,")"),dt,Ot);if(f=="<")return O(wt(we,">"),we);if(f=="quasi")return ke(Bt,Ot)}function dt(f){if(f=="=>")return O(we)}function ht(f){return f.match(/[\}\)\]]/)?O():f==","||f==";"?O(ht):ke(Dt,ht)}function Dt(f,B){if(f=="variable"||ie.style=="keyword")return ie.marked="property",O(Dt);if(B=="?"||f=="number"||f=="string")return O(Dt);if(f==":")return O(we);if(f=="[")return O(ct("variable"),Ze,ct("]"),Dt);if(f=="(")return ke(ft,Dt);if(!f.match(/[;\}\)\],]/))return O()}function Bt(f,B){return f!="quasi"?ke():B.slice(B.length-2)!="${"?O(Bt):O(we,qt)}function qt(f){if(f=="}")return ie.marked="string-2",ie.state.tokenize=ge,O(Bt)}function bt(f,B){return f=="variable"&&ie.stream.match(/^\s*[?:]/,!1)||B=="?"?O(bt):f==":"?O(we):f=="spread"?O(bt):ke(we)}function Ot(f,B){if(B=="<")return O(et(">"),wt(we,">"),rt,Ot);if(B=="|"||f=="."||B=="&")return O(we);if(f=="[")return O(we,ct("]"),Ot);if(B=="extends"||B=="implements")return ie.marked="keyword",O(we);if(B=="?")return O(we,ct(":"),we)}function Ft(f,B){if(B=="<")return O(et(">"),wt(we,">"),rt,Ot)}function o(){return ke(we,u)}function u(f,B){if(B=="=")return O(we)}function N(f,B){return B=="enum"?(ie.marked="keyword",O(Mt)):ke(h,qe,U,xe)}function h(f,B){if(b&&at(B))return ie.marked="keyword",O(h);if(f=="variable")return tt(B),O();if(f=="spread")return O(h);if(f=="[")return jt(Z,"]");if(f=="{")return jt(T,"}")}function T(f,B){return f=="variable"&&!ie.stream.match(/^\s*:/,!1)?(tt(B),O(U)):(f=="variable"&&(ie.marked="property"),f=="spread"?O(h):f=="}"?ke():f=="["?O(De,ct("]"),ct(":"),T):O(ct(":"),h,U))}function Z(){return ke(h,U)}function U(f,B){if(B=="=")return O(Se)}function xe(f){if(f==",")return O(N)}function ot(f,B){if(f=="keyword b"&&B=="else")return O(et("form","else"),he,rt)}function _t(f,B){if(B=="await")return O(_t);if(f=="(")return O(et(")"),Vt,rt)}function Vt(f){return f=="var"?O(N,Wt):f=="variable"?O(Wt):ke(Wt)}function Wt(f,B){return f==")"?O():f==";"?O(Wt):B=="in"||B=="of"?(ie.marked="keyword",O(De,Wt)):ke(De,Wt)}function Te(f,B){if(B=="*")return ie.marked="keyword",O(Te);if(f=="variable")return tt(B),O(Te);if(f=="(")return O(Ye,et(")"),wt(ze,")"),rt,Je,he,vt);if(b&&B=="<")return O(et(">"),wt(o,">"),rt,Te)}function ft(f,B){if(B=="*")return ie.marked="keyword",O(ft);if(f=="variable")return tt(B),O(ft);if(f=="(")return O(Ye,et(")"),wt(ze,")"),rt,Je,vt);if(b&&B=="<")return O(et(">"),wt(o,">"),rt,ft)}function ae(f,B){if(f=="keyword"||f=="variable")return ie.marked="type",O(ae);if(B=="<")return O(et(">"),wt(o,">"),rt)}function ze(f,B){return B=="@"&&O(De,ze),f=="spread"?O(ze):b&&at(B)?(ie.marked="keyword",O(ze)):b&&f=="this"?O(qe,U):ke(h,qe,U)}function Ee(f,B){return f=="variable"?gt(f,B):Rt(f,B)}function gt(f,B){if(f=="variable")return tt(B),O(Rt)}function Rt(f,B){if(B=="<")return O(et(">"),wt(o,">"),rt,Rt);if(B=="extends"||B=="implements"||b&&f==",")return B=="implements"&&(ie.marked="keyword"),O(b?we:De,Rt);if(f=="{")return O(et("}"),Ut,rt)}function Ut(f,B){if(f=="async"||f=="variable"&&(B=="static"||B=="get"||B=="set"||b&&at(B))&&ie.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return ie.marked="keyword",O(Ut);if(f=="variable"||ie.style=="keyword")return ie.marked="property",O(Ct,Ut);if(f=="number"||f=="string")return O(Ct,Ut);if(f=="[")return O(De,qe,ct("]"),Ct,Ut);if(B=="*")return ie.marked="keyword",O(Ut);if(b&&f=="(")return ke(ft,Ut);if(f==";"||f==",")return O(Ut);if(f=="}")return O();if(B=="@")return O(De,Ut)}function Ct(f,B){if(B=="!"||B=="?")return O(Ct);if(f==":")return O(we,U);if(B=="=")return O(Se);var pe=ie.state.lexical.prev,Re=pe&&pe.info=="interface";return ke(Re?ft:Te)}function Yt(f,B){return B=="*"?(ie.marked="keyword",O(nr,ct(";"))):B=="default"?(ie.marked="keyword",O(De,ct(";"))):f=="{"?O(wt(ur,"}"),nr,ct(";")):ke(he)}function ur(f,B){if(B=="as")return ie.marked="keyword",O(ct("variable"));if(f=="variable")return ke(Se,ur)}function Ht(f){return f=="string"?O():f=="("?ke(De):f=="."?ke(nt):ke($t,Zt,nr)}function $t(f,B){return f=="{"?jt($t,"}"):(f=="variable"&&tt(B),B=="*"&&(ie.marked="keyword"),O(ir))}function Zt(f){if(f==",")return O($t,Zt)}function ir(f,B){if(B=="as")return ie.marked="keyword",O($t)}function nr(f,B){if(B=="from")return ie.marked="keyword",O(De)}function sr(f){return f=="]"?O():ke(wt(Se,"]"))}function Mt(){return ke(et("form"),h,ct("{"),et("}"),wt(pr,"}"),rt,rt)}function pr(){return ke(h,U)}function dr(f,B){return f.lastType=="operator"||f.lastType==","||I.test(B.charAt(0))||/[,.]/.test(B.charAt(0))}function X(f,B,pe){return B.tokenize==G&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(B.lastType)||B.lastType=="quasi"&&/\{\s*$/.test(f.string.slice(0,f.pos-(pe||0)))}return{startState:function(f){var B={tokenize:G,lastType:"sof",cc:[],lexical:new te((f||0)-c,0,"block",!1),localVars:A.localVars,context:A.localVars&&new re(null,null,!1),indented:f||0};return A.globalVars&&typeof A.globalVars=="object"&&(B.globalVars=A.globalVars),B},token:function(f,B){if(f.sol()&&(B.lexical.hasOwnProperty("align")||(B.lexical.align=!1),B.indented=f.indentation(),z(f,B)),B.tokenize!=le&&f.eatSpace())return null;var pe=B.tokenize(f,B);return V=="comment"?pe:(B.lastType=V=="operator"&&(M=="++"||M=="--")?"incdec":V,Le(B,pe,V,M,f))},indent:function(f,B){if(f.tokenize==le||f.tokenize==ge)return v.Pass;if(f.tokenize!=G)return 0;var pe=B&&B.charAt(0),Re=f.lexical,se;if(!/^\s*else\b/.test(B))for(var Oe=f.cc.length-1;Oe>=0;--Oe){var Xe=f.cc[Oe];if(Xe==rt)Re=Re.prev;else if(Xe!=ot&&Xe!=vt)break}for(;(Re.type=="stat"||Re.type=="form")&&(pe=="}"||(se=f.cc[f.cc.length-1])&&(se==nt||se==be)&&!/^[,\.=+\-*:?[\(]/.test(B));)Re=Re.prev;g&&Re.type==")"&&Re.prev.type=="stat"&&(Re=Re.prev);var pt=Re.type,kt=pe==pt;return pt=="vardef"?Re.indented+(f.lastType=="operator"||f.lastType==","?Re.info.length+1:0):pt=="form"&&pe=="{"?Re.indented:pt=="form"?Re.indented+c:pt=="stat"?Re.indented+(dr(f,B)?g||c:0):Re.info=="switch"&&!kt&&A.doubleIndentSwitch!=!1?Re.indented+(/^(?:case|default)\b/.test(B)?c:2*c):Re.align?Re.column+(kt?0:1):Re.indented+(kt?0:c)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:w?null:"/*",blockCommentEnd:w?null:"*/",blockCommentContinue:w?null:" * ",lineComment:w?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:w?"json":"javascript",jsonldMode:_,jsonMode:w,expressionAllowed:X,skipExpression:function(f){Le(f,"atom","atom","true",new v.StringStream("",2,null))}}}),v.registerHelper("wordChars","javascript",/[\w$]/),v.defineMIME("text/javascript","javascript"),v.defineMIME("text/ecmascript","javascript"),v.defineMIME("application/javascript","javascript"),v.defineMIME("application/x-javascript","javascript"),v.defineMIME("application/ecmascript","javascript"),v.defineMIME("application/json",{name:"javascript",json:!0}),v.defineMIME("application/x-json",{name:"javascript",json:!0}),v.defineMIME("application/manifest+json",{name:"javascript",json:!0}),v.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),v.defineMIME("text/typescript",{name:"javascript",typescript:!0}),v.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();var of={exports:{}};(function(a,Ae){(function(v){v(Vr())})(function(v){function R(_,w,L,b){if(L&&L.call){var E=L;L=null}else var E=g(_,L,"rangeFinder");typeof w=="number"&&(w=v.Pos(w,0));var S=g(_,L,"minFoldSize");function I(M){var P=E(_,w);if(!P||P.to.line-P.from.line<S)return null;if(b==="fold")return P;for(var G=_.findMarksAt(P.from),q=0;q<G.length;++q)if(G[q].__isFold){if(!M)return null;P.cleared=!0,G[q].clear()}return P}var F=I(!0);if(g(_,L,"scanUp"))for(;!F&&w.line>_.firstLine();)w=v.Pos(w.line-1,0),F=I(!1);if(!(!F||F.cleared||b==="unfold")){var H=A(_,L,F);v.on(H,"mousedown",function(M){V.clear(),v.e_preventDefault(M)});var V=_.markText(F.from,F.to,{replacedWith:H,clearOnEnter:g(_,L,"clearOnEnter"),__isFold:!0});V.on("clear",function(M,P){v.signal(_,"unfold",_,M,P)}),v.signal(_,"fold",_,F.from,F.to)}}function A(_,w,L){var b=g(_,w,"widget");if(typeof b=="function"&&(b=b(L.from,L.to)),typeof b=="string"){var E=document.createTextNode(b);b=document.createElement("span"),b.appendChild(E),b.className="CodeMirror-foldmarker"}else b&&(b=b.cloneNode(!0));return b}v.newFoldFunction=function(_,w){return function(L,b){R(L,b,{rangeFinder:_,widget:w})}},v.defineExtension("foldCode",function(_,w,L){R(this,_,w,L)}),v.defineExtension("isFolded",function(_){for(var w=this.findMarksAt(_),L=0;L<w.length;++L)if(w[L].__isFold)return!0}),v.commands.toggleFold=function(_){_.foldCode(_.getCursor())},v.commands.fold=function(_){_.foldCode(_.getCursor(),null,"fold")},v.commands.unfold=function(_){_.foldCode(_.getCursor(),{scanUp:!1},"unfold")},v.commands.foldAll=function(_){_.operation(function(){for(var w=_.firstLine(),L=_.lastLine();w<=L;w++)_.foldCode(v.Pos(w,0),{scanUp:!1},"fold")})},v.commands.unfoldAll=function(_){_.operation(function(){for(var w=_.firstLine(),L=_.lastLine();w<=L;w++)_.foldCode(v.Pos(w,0),{scanUp:!1},"unfold")})},v.registerHelper("fold","combine",function(){var _=Array.prototype.slice.call(arguments,0);return function(w,L){for(var b=0;b<_.length;++b){var E=_[b](w,L);if(E)return E}}}),v.registerHelper("fold","auto",function(_,w){for(var L=_.getHelpers(w,"fold"),b=0;b<L.length;b++){var E=L[b](_,w);if(E)return E}});var c={rangeFinder:v.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};v.defineOption("foldOptions",null);function g(_,w,L){if(w&&w[L]!==void 0)return w[L];var b=_.options.foldOptions;return b&&b[L]!==void 0?b[L]:c[L]}v.defineExtension("foldOption",function(_,w){return g(this,_,w)})})})();var sf=of.exports;(function(a,Ae){(function(v){v(Vr(),sf)})(function(v){v.defineOption("foldGutter",!1,function(V,M,P){P&&P!=v.Init&&(V.clearGutter(V.state.foldGutter.options.gutter),V.state.foldGutter=null,V.off("gutterClick",E),V.off("changes",I),V.off("viewportChange",F),V.off("fold",H),V.off("unfold",H),V.off("swapDoc",I),V.off("optionChange",S)),M&&(V.state.foldGutter=new A(c(M)),b(V),V.on("gutterClick",E),V.on("changes",I),V.on("viewportChange",F),V.on("fold",H),V.on("unfold",H),V.on("swapDoc",I),V.on("optionChange",S))});var R=v.Pos;function A(V){this.options=V,this.from=this.to=0}function c(V){return V===!0&&(V={}),V.gutter==null&&(V.gutter="CodeMirror-foldgutter"),V.indicatorOpen==null&&(V.indicatorOpen="CodeMirror-foldgutter-open"),V.indicatorFolded==null&&(V.indicatorFolded="CodeMirror-foldgutter-folded"),V}function g(V,M){for(var P=V.findMarks(R(M,0),R(M+1,0)),G=0;G<P.length;++G)if(P[G].__isFold){var q=P[G].find(-1);if(q&&q.line===M)return P[G]}}function _(V){if(typeof V=="string"){var M=document.createElement("div");return M.className=V+" CodeMirror-guttermarker-subtle",M}else return V.cloneNode(!0)}function w(V,M,P){var G=V.state.foldGutter.options,q=M-1,le=V.foldOption(G,"minFoldSize"),ge=V.foldOption(G,"rangeFinder"),y=typeof G.indicatorFolded=="string"&&L(G.indicatorFolded),z=typeof G.indicatorOpen=="string"&&L(G.indicatorOpen);V.eachLine(M,P,function(ee){++q;var te=null,ne=ee.gutterMarkers;if(ne&&(ne=ne[G.gutter]),g(V,q)){if(y&&ne&&y.test(ne.className))return;te=_(G.indicatorFolded)}else{var Le=R(q,0),ie=ge&&ge(V,Le);if(ie&&ie.to.line-ie.from.line>=le){if(z&&ne&&z.test(ne.className))return;te=_(G.indicatorOpen)}}!te&&!ne||V.setGutterMarker(ee,G.gutter,te)})}function L(V){return new RegExp("(^|\\s)"+V+"(?:$|\\s)\\s*")}function b(V){var M=V.getViewport(),P=V.state.foldGutter;P&&(V.operation(function(){w(V,M.from,M.to)}),P.from=M.from,P.to=M.to)}function E(V,M,P){var G=V.state.foldGutter;if(G){var q=G.options;if(P==q.gutter){var le=g(V,M);le?le.clear():V.foldCode(R(M,0),q)}}}function S(V,M){M=="mode"&&I(V)}function I(V){var M=V.state.foldGutter;if(M){var P=M.options;M.from=M.to=0,clearTimeout(M.changeUpdate),M.changeUpdate=setTimeout(function(){b(V)},P.foldOnChangeTimeSpan||600)}}function F(V){var M=V.state.foldGutter;if(M){var P=M.options;clearTimeout(M.changeUpdate),M.changeUpdate=setTimeout(function(){var G=V.getViewport();M.from==M.to||G.from-M.to>20||M.from-G.to>20?b(V):V.operation(function(){G.from<M.from&&(w(V,G.from,M.from),M.from=G.from),G.to>M.to&&(w(V,M.to,G.to),M.to=G.to)})},P.updateViewportTimeSpan||400)}}function H(V,M){var P=V.state.foldGutter;if(P){var G=M.line;G>=P.from&&G<P.to&&w(V,G,G+1)}}})})();(function(a,Ae){(function(v){v(Vr())})(function(v){function R(A){return function(c,g){var _=g.line,w=c.getLine(_);function L(H){for(var V,M=g.ch,P=0;;){var G=M<=0?-1:w.lastIndexOf(H[0],M-1);if(G==-1){if(P==1)break;P=1,M=w.length;continue}if(P==1&&G<g.ch)break;if(V=c.getTokenTypeAt(v.Pos(_,G+1)),!/^(comment|string)/.test(V))return{ch:G+1,tokenType:V,pair:H};M=G-1}}function b(H){var V=1,M=c.lastLine(),P,G=H.ch,q;e:for(var le=_;le<=M;++le)for(var ge=c.getLine(le),y=le==_?G:0;;){var z=ge.indexOf(H.pair[0],y),ee=ge.indexOf(H.pair[1],y);if(z<0&&(z=ge.length),ee<0&&(ee=ge.length),y=Math.min(z,ee),y==ge.length)break;if(c.getTokenTypeAt(v.Pos(le,y+1))==H.tokenType){if(y==z)++V;else if(!--V){P=le,q=y;break e}}++y}return P==null||_==P?null:{from:v.Pos(_,G),to:v.Pos(P,q)}}for(var E=[],S=0;S<A.length;S++){var I=L(A[S]);I&&E.push(I)}E.sort(function(H,V){return H.ch-V.ch});for(var S=0;S<E.length;S++){var F=b(E[S]);if(F)return F}return null}}v.registerHelper("fold","brace",R([["{","}"],["[","]"]])),v.registerHelper("fold","brace-paren",R([["{","}"],["[","]"],["(",")"]])),v.registerHelper("fold","import",function(A,c){function g(S){if(S<A.firstLine()||S>A.lastLine())return null;var I=A.getTokenAt(v.Pos(S,1));if(/\S/.test(I.string)||(I=A.getTokenAt(v.Pos(S,I.end+1))),I.type!="keyword"||I.string!="import")return null;for(var F=S,H=Math.min(A.lastLine(),S+10);F<=H;++F){var V=A.getLine(F),M=V.indexOf(";");if(M!=-1)return{startCh:I.end,end:v.Pos(F,M)}}}var _=c.line,w=g(_),L;if(!w||g(_-1)||(L=g(_-2))&&L.end.line==_-1)return null;for(var b=w.end;;){var E=g(b.line+1);if(E==null)break;b=E.end}return{from:A.clipPos(v.Pos(_,w.startCh+1)),to:b}}),v.registerHelper("fold","include",function(A,c){function g(E){if(E<A.firstLine()||E>A.lastLine())return null;var S=A.getTokenAt(v.Pos(E,1));if(/\S/.test(S.string)||(S=A.getTokenAt(v.Pos(E,S.end+1))),S.type=="meta"&&S.string.slice(0,8)=="#include")return S.start+8}var _=c.line,w=g(_);if(w==null||g(_-1)!=null)return null;for(var L=_;;){var b=g(L+1);if(b==null)break;++L}return{from:v.Pos(_,w+1),to:A.clipPos(v.Pos(L))}})})})();(function(a,Ae){(function(v){v(Vr())})(function(v){var R="CodeMirror-activeline",A="CodeMirror-activeline-background",c="CodeMirror-activeline-gutter";v.defineOption("styleActiveLine",!1,function(b,E,S){var I=S==v.Init?!1:S;E!=I&&(I&&(b.off("beforeSelectionChange",L),g(b),delete b.state.activeLines),E&&(b.state.activeLines=[],w(b,b.listSelections()),b.on("beforeSelectionChange",L)))});function g(b){for(var E=0;E<b.state.activeLines.length;E++)b.removeLineClass(b.state.activeLines[E],"wrap",R),b.removeLineClass(b.state.activeLines[E],"background",A),b.removeLineClass(b.state.activeLines[E],"gutter",c)}function _(b,E){if(b.length!=E.length)return!1;for(var S=0;S<b.length;S++)if(b[S]!=E[S])return!1;return!0}function w(b,E){for(var S=[],I=0;I<E.length;I++){var F=E[I],H=b.getOption("styleActiveLine");if(!(typeof H=="object"&&H.nonEmpty?F.anchor.line!=F.head.line:!F.empty())){var V=b.getLineHandleVisualStart(F.head.line);S[S.length-1]!=V&&S.push(V)}}_(b.state.activeLines,S)||b.operation(function(){g(b);for(var M=0;M<S.length;M++)b.addLineClass(S[M],"wrap",R),b.addLineClass(S[M],"background",A),b.addLineClass(S[M],"gutter",c);b.state.activeLines=S})}function L(b,E){w(b,E.ranges)}})})();var uf=Vr();const Zr=ll(uf);(function(a,Ae){(function(v){v(Vr())})(function(v){var R=v.Pos,A="http://www.w3.org/2000/svg";function c(d,D){this.mv=d,this.type=D,this.classes=D=="left"?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}c.prototype={constructor:c,init:function(d,D,x){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=v(d,ct({value:D,readOnly:!this.mv.options.allowEditingOriginals},ct(x))),this.mv.options.connect=="align"&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new lt(this.edit)),this.orig.state.trackAlignable=new lt(this.orig)),this.lockButton.title=this.edit.phrase("Toggle locked scrolling"),this.lockButton.setAttribute("aria-label",this.lockButton.title),this.orig.state.diffViews=[this];var Y=x.chunkClassLocation||"background";Object.prototype.toString.call(Y)!="[object Array]"&&(Y=[Y]),this.classes.classLocation=Y,this.diff=Ce(ke(D),ke(x.value),this.mv.options.ignoreWhitespace),this.chunks=tt(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=x.showDifferences!==!1},registerEvents:function(d){this.forceUpdate=w(this),S(this,!0,!1),L(this,d)},setShowDifferences:function(d){d=d!==!1,d!=this.showDifferences&&(this.showDifferences=d,this.forceUpdate("full"))}};function g(d){d.diffOutOfDate&&(d.diff=Ce(d.orig.getValue(),d.edit.getValue(),d.mv.options.ignoreWhitespace),d.chunks=tt(d.diff),d.diffOutOfDate=!1,v.signal(d.edit,"updateDiff",d.diff))}var _=!1;function w(d){var D={from:0,to:0,marked:[]},x={from:0,to:0,marked:[]},Y,Q=!1;function ve(wt){_=!0,Q=!1,wt=="full"&&(d.svg&&et(d.svg),d.copyButtons&&et(d.copyButtons),F(d.edit,D.marked,d.classes),F(d.orig,x.marked,d.classes),D.from=D.to=x.from=x.to=0),g(d),d.showDifferences&&(H(d.edit,d.diff,D,DIFF_INSERT,d.classes),H(d.orig,d.diff,x,DIFF_DELETE,d.classes)),d.mv.options.connect=="align"&&y(d),P(d),d.needsScrollSync!=null&&b(d,d.needsScrollSync),_=!1}function Ie(wt){_||(d.dealigned=!0,Fe(wt))}function Fe(wt){_||Q||(clearTimeout(Y),wt===!0&&(Q=!0),Y=setTimeout(ve,wt===!0?20:250))}function it(wt,jt){d.diffOutOfDate||(d.diffOutOfDate=!0,D.from=D.to=x.from=x.to=0),Ie(jt.text.length-1!=jt.to.line-jt.from.line)}function Nt(){d.diffOutOfDate=!0,d.dealigned=!0,ve("full")}return d.edit.on("change",it),d.orig.on("change",it),d.edit.on("swapDoc",Nt),d.orig.on("swapDoc",Nt),d.mv.options.connect=="align"&&(v.on(d.edit.state.trackAlignable,"realign",Ie),v.on(d.orig.state.trackAlignable,"realign",Ie)),d.edit.on("viewportChange",function(){Fe(!1)}),d.orig.on("viewportChange",function(){Fe(!1)}),ve(),ve}function L(d,D){d.edit.on("scroll",function(){b(d,!0)&&P(d)}),d.orig.on("scroll",function(){b(d,!1)&&P(d),D&&b(D,!0)&&P(D)})}function b(d,D){if(d.diffOutOfDate)return d.lockScroll&&d.needsScrollSync==null&&(d.needsScrollSync=D),!1;if(d.needsScrollSync=null,!d.lockScroll)return!0;var x,Y,Q=+new Date;if(D?(x=d.edit,Y=d.orig):(x=d.orig,Y=d.edit),x.state.scrollSetBy==d&&(x.state.scrollSetAt||0)+250>Q)return!1;var ve=x.getScrollInfo();if(d.mv.options.connect=="align")qe=ve.top;else{var Ie=.5*ve.clientHeight,Fe=ve.top+Ie,it=x.lineAtHeight(Fe,"local"),Nt=re(d.chunks,it,D),wt=E(x,D?Nt.edit:Nt.orig),jt=E(Y,D?Nt.orig:Nt.edit),W=(Fe-wt.top)/(wt.bot-wt.top),qe=jt.top-Ie+W*(jt.bot-jt.top),Ze,Je;if(qe>ve.top&&(Je=ve.top/Ie)<1)qe=qe*Je+ve.top*(1-Je);else if((Ze=ve.height-ve.clientHeight-ve.top)<Ie){var We=Y.getScrollInfo(),we=We.height-We.clientHeight-qe;we>Ze&&(Je=Ze/Ie)<1&&(qe=qe*Je+(We.height-We.clientHeight-Ze)*(1-Je))}}return Y.scrollTo(ve.left,qe),Y.state.scrollSetAt=Q,Y.state.scrollSetBy=d,!0}function E(d,D){var x=D.after;return x==null&&(x=d.lastLine()+1),{top:d.heightAtLine(D.before||0,"local"),bot:d.heightAtLine(x,"local")}}function S(d,D,x){d.lockScroll=D,D&&x!=!1&&b(d,DIFF_INSERT)&&P(d),(D?v.addClass:v.rmClass)(d.lockButton,"CodeMirror-merge-scrolllock-enabled")}function I(d,D,x){for(var Y=x.classLocation,Q=0;Q<Y.length;Q++)d.removeLineClass(D,Y[Q],x.chunk),d.removeLineClass(D,Y[Q],x.start),d.removeLineClass(D,Y[Q],x.end)}function F(d,D,x){for(var Y=0;Y<D.length;++Y){var Q=D[Y];Q instanceof v.TextMarker?Q.clear():Q.parent&&I(d,Q,x)}D.length=0}function H(d,D,x,Y,Q){var ve=d.getViewport();d.operation(function(){x.from==x.to||ve.from-x.to>20||x.from-ve.to>20?(F(d,x.marked,Q),M(d,D,Y,x.marked,ve.from,ve.to,Q),x.from=ve.from,x.to=ve.to):(ve.from<x.from&&(M(d,D,Y,x.marked,ve.from,x.from,Q),x.from=ve.from),ve.to>x.to&&(M(d,D,Y,x.marked,x.to,ve.to,Q),x.to=ve.to))})}function V(d,D,x,Y,Q,ve){for(var Ie=x.classLocation,Fe=d.getLineHandle(D),it=0;it<Ie.length;it++)Y&&d.addLineClass(Fe,Ie[it],x.chunk),Q&&d.addLineClass(Fe,Ie[it],x.start),ve&&d.addLineClass(Fe,Ie[it],x.end);return Fe}function M(d,D,x,Y,Q,ve,Ie){var Fe=R(0,0),it=R(Q,0),Nt=d.clipPos(R(ve-1)),wt=x==DIFF_DELETE?Ie.del:Ie.insert;function jt(bt,Ot){for(var Ft=Math.max(Q,bt),o=Math.min(ve,Ot),u=Ft;u<o;++u)Y.push(V(d,u,Ie,!0,u==bt,u==Ot-1));bt==Ot&&Ft==Ot&&o==Ot&&(Ft?Y.push(V(d,Ft-1,Ie,!1,!1,!0)):Y.push(V(d,Ft,Ie,!1,!0,!1)))}for(var W=0,qe=!1,Ze=0;Ze<D.length;++Ze){var Je=D[Ze],We=Je[0],we=Je[1];if(We==DIFF_EQUAL){var dt=Fe.line+(at(D,Ze)?0:1);he(Fe,we);var ht=Fe.line+(Pe(D,Ze)?1:0);ht>dt&&(qe&&(jt(W,dt),qe=!1),W=ht)}else if(qe=!0,We==x){var Dt=he(Fe,we,!0),Bt=yt(it,Fe),qt=xt(Nt,Dt);nt(Bt,qt)||Y.push(d.markText(Bt,qt,{className:wt})),Fe=Dt}}qe&&jt(W,Fe.line+1)}function P(d){if(d.showDifferences){if(d.svg){et(d.svg);var D=d.gap.offsetWidth;rt(d.svg,"width",D,"height",d.gap.offsetHeight)}d.copyButtons&&et(d.copyButtons);for(var x=d.edit.getViewport(),Y=d.orig.getViewport(),Q=d.mv.wrap.getBoundingClientRect().top,ve=Q-d.edit.getScrollerElement().getBoundingClientRect().top+d.edit.getScrollInfo().top,Ie=Q-d.orig.getScrollerElement().getBoundingClientRect().top+d.orig.getScrollInfo().top,Fe=0;Fe<d.chunks.length;Fe++){var it=d.chunks[Fe];it.editFrom<=x.to&&it.editTo>=x.from&&it.origFrom<=Y.to&&it.origTo>=Y.from&&te(d,it,Ie,ve,D)}}}function G(d,D){for(var x=0,Y=0,Q=0;Q<D.length;Q++){var ve=D[Q];if(ve.editTo>d&&ve.editFrom<=d)return null;if(ve.editFrom>d)break;x=ve.editTo,Y=ve.origTo}return Y+(d-x)}function q(d,D,x){for(var Y=d.state.trackAlignable,Q=d.firstLine(),ve=0,Ie=[],Fe=0;;Fe++){for(var it=D[Fe],Nt=it?x?it.origFrom:it.editFrom:1e9;ve<Y.alignable.length;ve+=2){var wt=Y.alignable[ve]+1;if(!(wt<=Q))if(wt<=Nt)Ie.push(wt);else break}if(!it)break;Ie.push(Q=x?it.origTo:it.editTo)}return Ie}function le(d,D,x,Y){var Q=0,ve=0,Ie=0,Fe=0;e:for(;;Q++){var it=d[Q],Nt=D[ve];if(!it&&Nt==null)break;for(var wt=it?it[0]:1e9,jt=Nt??1e9;Ie<x.length;){var W=x[Ie];if(W.origFrom<=jt&&W.origTo>jt){ve++,Q--;continue e}if(W.editTo>wt){if(W.editFrom<=wt)continue e;break}Fe+=W.origTo-W.origFrom-(W.editTo-W.editFrom),Ie++}if(wt==jt-Fe)it[Y]=jt,ve++;else if(wt<jt-Fe)it[Y]=wt+Fe;else{var qe=[jt-Fe,null,null];qe[Y]=jt,d.splice(Q,0,qe),ve++}}}function ge(d,D){var x=q(d.edit,d.chunks,!1),Y=[];if(D)for(var Q=0,ve=0;Q<D.chunks.length;Q++){for(var Ie=D.chunks[Q].editTo;ve<x.length&&x[ve]<Ie;)ve++;(ve==x.length||x[ve]!=Ie)&&x.splice(ve++,0,Ie)}for(var Q=0;Q<x.length;Q++)Y.push([x[Q],null,null]);return le(Y,q(d.orig,d.chunks,!0),d.chunks,1),D&&le(Y,q(D.orig,D.chunks,!0),D.chunks,2),Y}function y(d,D){if(!(!d.dealigned&&!D)){if(!d.orig.curOp)return d.orig.operation(function(){y(d,D)});d.dealigned=!1;var x=d.mv.left==d?d.mv.right:d.mv.left;x&&(g(x),x.dealigned=!1);for(var Y=ge(d,x),Q=d.mv.aligners,ve=0;ve<Q.length;ve++)Q[ve].clear();Q.length=0;var Ie=[d.edit,d.orig],Fe=[],it=[];x&&Ie.push(x.orig);for(var ve=0;ve<Ie.length;ve++)Fe.push(Ie[ve].getScrollInfo().top),it.push(-Ie[ve].getScrollerElement().getBoundingClientRect().top);(it[0]!=it[1]||Ie.length==3&&it[1]!=it[2])&&z(Ie,it,[0,0,0],Q);for(var Nt=0;Nt<Y.length;Nt++)z(Ie,it,Y[Nt],Q);for(var ve=0;ve<Ie.length;ve++)Ie[ve].scrollTo(null,Fe[ve])}}function z(d,D,x,Y){for(var Q=-1e8,ve=[],Ie=0;Ie<d.length;Ie++)if(x[Ie]!=null){var Fe=d[Ie].heightAtLine(x[Ie],"local")-D[Ie];ve[Ie]=Fe,Q=Math.max(Q,Fe)}for(var Ie=0;Ie<d.length;Ie++)if(x[Ie]!=null){var it=Q-ve[Ie];it>1&&Y.push(ee(d[Ie],x[Ie],it))}}function ee(d,D,x){var Y=!0;D>d.lastLine()&&(D--,Y=!1);var Q=document.createElement("div");return Q.className="CodeMirror-merge-spacer",Q.style.height=x+"px",Q.style.minWidth="1px",d.addLineWidget(D,Q,{height:x,above:Y,mergeSpacer:!0,handleMouseEvents:!0})}function te(d,D,x,Y,Q){var ve=d.type=="left",Ie=d.orig.heightAtLine(D.origFrom,"local",!0)-x;if(d.svg){var Fe=Ie,it=d.edit.heightAtLine(D.editFrom,"local",!0)-Y;if(ve){var Nt=Fe;Fe=it,it=Nt}var wt=d.orig.heightAtLine(D.origTo,"local",!0)-x,jt=d.edit.heightAtLine(D.editTo,"local",!0)-Y;if(ve){var Nt=wt;wt=jt,jt=Nt}var W=" C "+Q/2+" "+it+" "+Q/2+" "+Fe+" "+(Q+2)+" "+Fe,qe=" C "+Q/2+" "+wt+" "+Q/2+" "+jt+" -1 "+jt;rt(d.svg.appendChild(document.createElementNS(A,"path")),"d","M -1 "+it+W+" L "+(Q+2)+" "+wt+qe+" z","class",d.classes.connect)}if(d.copyButtons){var Ze=d.copyButtons.appendChild(vt("div",d.type=="left"?"⇝":"⇜","CodeMirror-merge-copy")),Je=d.mv.options.allowEditingOriginals;if(Ze.title=d.edit.phrase(Je?"Push to left":"Revert chunk"),Ze.chunk=D,Ze.style.top=(D.origTo>D.origFrom?Ie:d.edit.heightAtLine(D.editFrom,"local")-Y)+"px",Ze.setAttribute("role","button"),Ze.setAttribute("tabindex","0"),Ze.setAttribute("aria-label",Ze.title),Je){var We=d.edit.heightAtLine(D.editFrom,"local")-Y,we=d.copyButtons.appendChild(vt("div",d.type=="right"?"⇝":"⇜","CodeMirror-merge-copy-reverse"));we.title="Push to right",we.chunk={editFrom:D.origFrom,editTo:D.origTo,origFrom:D.editFrom,origTo:D.editTo},we.style.top=We+"px",d.type=="right"?we.style.left="2px":we.style.right="2px",we.setAttribute("role","button"),we.setAttribute("tabindex","0"),we.setAttribute("aria-label",we.title)}}}function ne(d,D,x,Y){if(!d.diffOutOfDate){var Q=Y.origTo>x.lastLine()?R(Y.origFrom-1):R(Y.origFrom,0),ve=R(Y.origTo,0),Ie=Y.editTo>D.lastLine()?R(Y.editFrom-1):R(Y.editFrom,0),Fe=R(Y.editTo,0),it=d.mv.options.revertChunk;it?it(d.mv,x,Q,ve,D,Ie,Fe):D.replaceRange(x.getRange(Q,ve),Ie,Fe)}}var Le=v.MergeView=function(d,D){if(!(this instanceof Le))return new Le(d,D);this.options=D;var x=D.origLeft,Y=D.origRight==null?D.orig:D.origRight,Q=x!=null,ve=Y!=null,Ie=1+(Q?1:0)+(ve?1:0),Fe=[],it=this.left=null,Nt=this.right=null,wt=this;if(Q){it=this.left=new c(this,"left");var jt=vt("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");Fe.push(jt),Fe.push(ie(it))}var W=vt("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(Fe.push(W),ve){Nt=this.right=new c(this,"right"),Fe.push(ie(Nt));var qe=vt("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");Fe.push(qe)}(ve?qe:W).className+=" CodeMirror-merge-pane-rightmost",Fe.push(vt("div",null,null,"height: 0; clear: both;"));var Ze=this.wrap=d.appendChild(vt("div",Fe,"CodeMirror-merge CodeMirror-merge-"+Ie+"pane"));this.edit=v(W,ct(D)),it&&it.init(jt,x,D),Nt&&Nt.init(qe,Y,D),D.collapseIdentical&&this.editor().operation(function(){Qe(wt,D.collapseIdentical)}),D.connect=="align"&&(this.aligners=[],y(this.left||this.right,!0)),it&&it.registerEvents(Nt),Nt&&Nt.registerEvents(it);var Je=function(){it&&P(it),Nt&&P(Nt)};v.on(window,"resize",Je);var We=setInterval(function(){for(var we=Ze.parentNode;we&&we!=document.body;we=we.parentNode);we||(clearInterval(We),v.off(window,"resize",Je))},5e3)};function ie(d){var D=d.lockButton=vt("div",null,"CodeMirror-merge-scrolllock");D.setAttribute("role","button"),D.setAttribute("tabindex","0");var x=vt("div",[D],"CodeMirror-merge-scrolllock-wrap");v.on(D,"click",function(){S(d,!d.lockScroll)}),v.on(D,"keyup",function(Ie){(Ie.key==="Enter"||Ie.code==="Space")&&S(d,!d.lockScroll)});var Y=[x];if(d.mv.options.revertButtons!==!1){d.copyButtons=vt("div",null,"CodeMirror-merge-copybuttons-"+d.type);var Q=function(Ie){var Fe=Ie.target||Ie.srcElement;if(Fe.chunk){if(Fe.className=="CodeMirror-merge-copy-reverse"){ne(d,d.orig,d.edit,Fe.chunk);return}ne(d,d.edit,d.orig,Fe.chunk)}};v.on(d.copyButtons,"click",Q),v.on(d.copyButtons,"keyup",function(Ie){(Ie.key==="Enter"||Ie.code==="Space")&&Q(Ie)}),Y.unshift(d.copyButtons)}if(d.mv.options.connect!="align"){var ve=document.createElementNS&&document.createElementNS(A,"svg");ve&&!ve.createSVGRect&&(ve=null),d.svg=ve,ve&&Y.push(ve)}return d.gap=vt("div",Y,"CodeMirror-merge-gap")}Le.prototype={constructor:Le,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(d){this.right&&this.right.setShowDifferences(d),this.left&&this.left.setShowDifferences(d)},rightChunks:function(){if(this.right)return g(this.right),this.right.chunks},leftChunks:function(){if(this.left)return g(this.left),this.left.chunks}};function ke(d){return typeof d=="string"?d:d.getValue()}var O;function Ce(d,D,x){O||(O=new diff_match_patch);for(var Y=O.diff_main(d,D),Q=0;Q<Y.length;++Q){var ve=Y[Q];(x?!/[^ \t]/.test(ve[1]):!ve[1])?Y.splice(Q--,1):Q&&Y[Q-1][0]==ve[0]&&(Y.splice(Q--,1),Y[Q][1]+=ve[1])}return Y}function tt(d){var D=[];if(!d.length)return D;for(var x=0,Y=0,Q=R(0,0),ve=R(0,0),Ie=0;Ie<d.length;++Ie){var Fe=d[Ie],it=Fe[0];if(it==DIFF_EQUAL){var Nt=!at(d,Ie)||Q.line<x||ve.line<Y?1:0,wt=Q.line+Nt,jt=ve.line+Nt;he(Q,Fe[1],null,ve);var W=Pe(d,Ie)?1:0,qe=Q.line+W,Ze=ve.line+W;qe>wt&&(Ie&&D.push({origFrom:Y,origTo:jt,editFrom:x,editTo:wt}),x=qe,Y=Ze)}else he(it==DIFF_INSERT?Q:ve,Fe[1])}return(x<=Q.line||Y<=ve.line)&&D.push({origFrom:Y,origTo:ve.line+1,editFrom:x,editTo:Q.line+1}),D}function Pe(d,D){if(D==d.length-1)return!0;var x=d[D+1][1];return x.length==1&&D<d.length-2||x.charCodeAt(0)!=10?!1:D==d.length-2?!0:(x=d[D+2][1],(x.length>1||D==d.length-3)&&x.charCodeAt(0)==10)}function at(d,D){if(D==0)return!0;var x=d[D-1][1];return x.charCodeAt(x.length-1)!=10?!1:D==1?!0:(x=d[D-2][1],x.charCodeAt(x.length-1)==10)}function re(d,D,x){for(var Y,Q,ve,Ie,Fe=0;Fe<d.length;Fe++){var it=d[Fe],Nt=x?it.editFrom:it.origFrom,wt=x?it.editTo:it.origTo;Q==null&&(Nt>D?(Q=it.editFrom,Ie=it.origFrom):wt>D&&(Q=it.editTo,Ie=it.origTo)),wt<=D?(Y=it.editTo,ve=it.origTo):Nt<=D&&(Y=it.editFrom,ve=it.origFrom)}return{edit:{before:Y,after:Q},orig:{before:ve,after:Ie}}}function fe(d,D,x){d.addLineClass(D,"wrap","CodeMirror-merge-collapsed-line");var Y=document.createElement("span");Y.className="CodeMirror-merge-collapsed-widget",Y.title=d.phrase("Identical text collapsed. Click to expand.");var Q=d.markText(R(D,0),R(x-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:Y,clearOnEnter:!0});function ve(){Q.clear(),d.removeLineClass(D,"wrap","CodeMirror-merge-collapsed-line")}return Q.explicitlyCleared&&ve(),v.on(Y,"click",ve),Q.on("clear",ve),v.on(Y,"click",ve),{mark:Q,clear:ve}}function _e(d,D){var x=[];function Y(){for(var Fe=0;Fe<x.length;Fe++)x[Fe].clear()}for(var Q=0;Q<D.length;Q++){var ve=D[Q],Ie=fe(ve.cm,ve.line,ve.line+d);x.push(Ie),Ie.mark.on("clear",Y)}return x[0].mark}function Ye(d,D,x,Y){for(var Q=0;Q<d.chunks.length;Q++)for(var ve=d.chunks[Q],Ie=ve.editFrom-D;Ie<ve.editTo+D;Ie++){var Fe=Ie+x;Fe>=0&&Fe<Y.length&&(Y[Fe]=!1)}}function Qe(d,D){typeof D!="number"&&(D=2);for(var x=[],Y=d.editor(),Q=Y.firstLine(),ve=Q,Ie=Y.lastLine();ve<=Ie;ve++)x.push(!0);d.left&&Ye(d.left,D,Q,x),d.right&&Ye(d.right,D,Q,x);for(var Fe=0;Fe<x.length;Fe++)if(x[Fe]){for(var it=Fe+Q,Nt=1;Fe<x.length-1&&x[Fe+1];Fe++,Nt++);if(Nt>D){var wt=[{line:it,cm:Y}];d.left&&wt.push({line:G(it,d.left.chunks),cm:d.left.orig}),d.right&&wt.push({line:G(it,d.right.chunks),cm:d.right.orig});var jt=_e(Nt,wt);d.options.onCollapse&&d.options.onCollapse(d,it,Nt,jt)}}}function vt(d,D,x,Y){var Q=document.createElement(d);if(x&&(Q.className=x),Y&&(Q.style.cssText=Y),typeof D=="string")Q.appendChild(document.createTextNode(D));else if(D)for(var ve=0;ve<D.length;++ve)Q.appendChild(D[ve]);return Q}function et(d){for(var D=d.childNodes.length;D>0;--D)d.removeChild(d.firstChild)}function rt(d){for(var D=1;D<arguments.length;D+=2)d.setAttribute(arguments[D],arguments[D+1])}function ct(d,D){D||(D={});for(var x in d)d.hasOwnProperty(x)&&(D[x]=d[x]);return D}function he(d,D,x,Y){for(var Q=x?R(d.line,d.ch):d,ve=0;;){var Ie=D.indexOf(`
`,ve);if(Ie==-1)break;++Q.line,Y&&++Y.line,ve=Ie+1}return Q.ch=(ve?0:Q.ch)+(D.length-ve),Y&&(Y.ch=(ve?0:Y.ch)+(D.length-ve)),Q}var ye=1,De=2,Se=4;function lt(d){this.cm=d,this.alignable=[],this.height=d.doc.height;var D=this;d.on("markerAdded",function(x,Y){if(Y.collapsed){var Q=Y.find(1);Q!=null&&D.set(Q.line,Se)}}),d.on("markerCleared",function(x,Y,Q,ve){ve!=null&&Y.collapsed&&D.check(ve,Se,D.hasMarker)}),d.on("markerChanged",this.signal.bind(this)),d.on("lineWidgetAdded",function(x,Y,Q){Y.mergeSpacer||(Y.above?D.set(Q-1,De):D.set(Q,ye))}),d.on("lineWidgetCleared",function(x,Y,Q){Y.mergeSpacer||(Y.above?D.check(Q-1,De,D.hasWidgetBelow):D.check(Q,ye,D.hasWidget))}),d.on("lineWidgetChanged",this.signal.bind(this)),d.on("change",function(x,Y){var Q=Y.from.line,ve=Y.to.line-Y.from.line,Ie=Y.text.length-1,Fe=Q+Ie;(ve||Ie)&&D.map(Q,ve,Ie),D.check(Fe,Se,D.hasMarker),(ve||Ie)&&D.check(Y.from.line,Se,D.hasMarker)}),d.on("viewportChange",function(){D.cm.doc.height!=D.height&&D.signal()})}lt.prototype={signal:function(){v.signal(this,"realign"),this.height=this.cm.doc.height},set:function(d,D){for(var x=-1;x<this.alignable.length;x+=2){var Y=this.alignable[x]-d;if(Y==0){if((this.alignable[x+1]&D)==D)return;this.alignable[x+1]|=D,this.signal();return}if(Y>0)break}this.signal(),this.alignable.splice(x,0,d,D)},find:function(d){for(var D=0;D<this.alignable.length;D+=2)if(this.alignable[D]==d)return D;return-1},check:function(d,D,x){var Y=this.find(d);if(!(Y==-1||!(this.alignable[Y+1]&D))&&!x.call(this,d)){this.signal();var Q=this.alignable[Y+1]&~D;Q?this.alignable[Y+1]=Q:this.alignable.splice(Y,2)}},hasMarker:function(d){var D=this.cm.getLineHandle(d);if(D.markedSpans){for(var x=0;x<D.markedSpans.length;x++)if(D.markedSpans[x].marker.collapsed&&D.markedSpans[x].to!=null)return!0}return!1},hasWidget:function(d){var D=this.cm.getLineHandle(d);if(D.widgets){for(var x=0;x<D.widgets.length;x++)if(!D.widgets[x].above&&!D.widgets[x].mergeSpacer)return!0}return!1},hasWidgetBelow:function(d){if(d==this.cm.lastLine())return!1;var D=this.cm.getLineHandle(d+1);if(D.widgets){for(var x=0;x<D.widgets.length;x++)if(D.widgets[x].above&&!D.widgets[x].mergeSpacer)return!0}return!1},map:function(d,D,x){for(var Y=x-D,Q=d+D,ve=-1,Ie=-1,Fe=0;Fe<this.alignable.length;Fe+=2){var it=this.alignable[Fe];it==d&&this.alignable[Fe+1]&De&&(ve=Fe),it==Q&&this.alignable[Fe+1]&De&&(Ie=Fe),!(it<=d)&&(it<Q?this.alignable.splice(Fe--,2):this.alignable[Fe]+=Y)}if(ve>-1){var Nt=this.alignable[ve+1];Nt==De?this.alignable.splice(ve,2):this.alignable[ve+1]=Nt&~De}Ie>-1&&x&&this.set(d+x,De)}};function xt(d,D){return(d.line-D.line||d.ch-D.ch)<0?d:D}function yt(d,D){return(d.line-D.line||d.ch-D.ch)>0?d:D}function nt(d,D){return d.line==D.line&&d.ch==D.ch}function be(d,D,x){for(var Y=d.length-1;Y>=0;Y--){var Q=d[Y],ve=(x?Q.origTo:Q.editTo)-1;if(ve<D)return ve}}function Ge(d,D,x){for(var Y=0;Y<d.length;Y++){var Q=d[Y],ve=x?Q.origFrom:Q.editFrom;if(ve>D)return ve}}function J(d,D){var x=null,Y=d.state.diffViews,Q=d.getCursor().line;if(Y)for(var ve=0;ve<Y.length;ve++){var Ie=Y[ve],Fe=d==Ie.orig;g(Ie);var it=D<0?be(Ie.chunks,Q,Fe):Ge(Ie.chunks,Q,Fe);it!=null&&(x==null||(D<0?it>x:it<x))&&(x=it)}if(x!=null)d.setCursor(x,0);else return v.Pass}v.commands.goNextDiff=function(d){return J(d,1)},v.commands.goPrevDiff=function(d){return J(d,-1)}})})();var $o={exports:{}};(function(a){var Ae=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},v=-1,R=1,A=0;Ae.Diff=function(c,g){return[c,g]},Ae.prototype.diff_main=function(c,g,_,w){typeof w>"u"&&(this.Diff_Timeout<=0?w=Number.MAX_VALUE:w=new Date().getTime()+this.Diff_Timeout*1e3);var L=w;if(c==null||g==null)throw new Error("Null input. (diff_main)");if(c==g)return c?[new Ae.Diff(A,c)]:[];typeof _>"u"&&(_=!0);var b=_,E=this.diff_commonPrefix(c,g),S=c.substring(0,E);c=c.substring(E),g=g.substring(E),E=this.diff_commonSuffix(c,g);var I=c.substring(c.length-E);c=c.substring(0,c.length-E),g=g.substring(0,g.length-E);var F=this.diff_compute_(c,g,b,L);return S&&F.unshift(new Ae.Diff(A,S)),I&&F.push(new Ae.Diff(A,I)),this.diff_cleanupMerge(F),F},Ae.prototype.diff_compute_=function(c,g,_,w){var L;if(!c)return[new Ae.Diff(R,g)];if(!g)return[new Ae.Diff(v,c)];var b=c.length>g.length?c:g,E=c.length>g.length?g:c,S=b.indexOf(E);if(S!=-1)return L=[new Ae.Diff(R,b.substring(0,S)),new Ae.Diff(A,E),new Ae.Diff(R,b.substring(S+E.length))],c.length>g.length&&(L[0][0]=L[2][0]=v),L;if(E.length==1)return[new Ae.Diff(v,c),new Ae.Diff(R,g)];var I=this.diff_halfMatch_(c,g);if(I){var F=I[0],H=I[1],V=I[2],M=I[3],P=I[4],G=this.diff_main(F,V,_,w),q=this.diff_main(H,M,_,w);return G.concat([new Ae.Diff(A,P)],q)}return _&&c.length>100&&g.length>100?this.diff_lineMode_(c,g,w):this.diff_bisect_(c,g,w)},Ae.prototype.diff_lineMode_=function(c,g,_){var w=this.diff_linesToChars_(c,g);c=w.chars1,g=w.chars2;var L=w.lineArray,b=this.diff_main(c,g,!1,_);this.diff_charsToLines_(b,L),this.diff_cleanupSemantic(b),b.push(new Ae.Diff(A,""));for(var E=0,S=0,I=0,F="",H="";E<b.length;){switch(b[E][0]){case R:I++,H+=b[E][1];break;case v:S++,F+=b[E][1];break;case A:if(S>=1&&I>=1){b.splice(E-S-I,S+I),E=E-S-I;for(var V=this.diff_main(F,H,!1,_),M=V.length-1;M>=0;M--)b.splice(E,0,V[M]);E=E+V.length}I=0,S=0,F="",H="";break}E++}return b.pop(),b},Ae.prototype.diff_bisect_=function(c,g,_){for(var w=c.length,L=g.length,b=Math.ceil((w+L)/2),E=b,S=2*b,I=new Array(S),F=new Array(S),H=0;H<S;H++)I[H]=-1,F[H]=-1;I[E+1]=0,F[E+1]=0;for(var V=w-L,M=V%2!=0,P=0,G=0,q=0,le=0,ge=0;ge<b&&!(new Date().getTime()>_);ge++){for(var y=-ge+P;y<=ge-G;y+=2){var z=E+y,ee;y==-ge||y!=ge&&I[z-1]<I[z+1]?ee=I[z+1]:ee=I[z-1]+1;for(var te=ee-y;ee<w&&te<L&&c.charAt(ee)==g.charAt(te);)ee++,te++;if(I[z]=ee,ee>w)G+=2;else if(te>L)P+=2;else if(M){var ne=E+V-y;if(ne>=0&&ne<S&&F[ne]!=-1){var Le=w-F[ne];if(ee>=Le)return this.diff_bisectSplit_(c,g,ee,te,_)}}}for(var ie=-ge+q;ie<=ge-le;ie+=2){var ne=E+ie,Le;ie==-ge||ie!=ge&&F[ne-1]<F[ne+1]?Le=F[ne+1]:Le=F[ne-1]+1;for(var ke=Le-ie;Le<w&&ke<L&&c.charAt(w-Le-1)==g.charAt(L-ke-1);)Le++,ke++;if(F[ne]=Le,Le>w)le+=2;else if(ke>L)q+=2;else if(!M){var z=E+V-ie;if(z>=0&&z<S&&I[z]!=-1){var ee=I[z],te=E+ee-z;if(Le=w-Le,ee>=Le)return this.diff_bisectSplit_(c,g,ee,te,_)}}}}return[new Ae.Diff(v,c),new Ae.Diff(R,g)]},Ae.prototype.diff_bisectSplit_=function(c,g,_,w,L){var b=c.substring(0,_),E=g.substring(0,w),S=c.substring(_),I=g.substring(w),F=this.diff_main(b,E,!1,L),H=this.diff_main(S,I,!1,L);return F.concat(H)},Ae.prototype.diff_linesToChars_=function(c,g){var _=[],w={};_[0]="";function L(I){for(var F="",H=0,V=-1,M=_.length;V<I.length-1;){V=I.indexOf(`
`,H),V==-1&&(V=I.length-1);var P=I.substring(H,V+1);(w.hasOwnProperty?w.hasOwnProperty(P):w[P]!==void 0)?F+=String.fromCharCode(w[P]):(M==b&&(P=I.substring(H),V=I.length),F+=String.fromCharCode(M),w[P]=M,_[M++]=P),H=V+1}return F}var b=4e4,E=L(c);b=65535;var S=L(g);return{chars1:E,chars2:S,lineArray:_}},Ae.prototype.diff_charsToLines_=function(c,g){for(var _=0;_<c.length;_++){for(var w=c[_][1],L=[],b=0;b<w.length;b++)L[b]=g[w.charCodeAt(b)];c[_][1]=L.join("")}},Ae.prototype.diff_commonPrefix=function(c,g){if(!c||!g||c.charAt(0)!=g.charAt(0))return 0;for(var _=0,w=Math.min(c.length,g.length),L=w,b=0;_<L;)c.substring(b,L)==g.substring(b,L)?(_=L,b=_):w=L,L=Math.floor((w-_)/2+_);return L},Ae.prototype.diff_commonSuffix=function(c,g){if(!c||!g||c.charAt(c.length-1)!=g.charAt(g.length-1))return 0;for(var _=0,w=Math.min(c.length,g.length),L=w,b=0;_<L;)c.substring(c.length-L,c.length-b)==g.substring(g.length-L,g.length-b)?(_=L,b=_):w=L,L=Math.floor((w-_)/2+_);return L},Ae.prototype.diff_commonOverlap_=function(c,g){var _=c.length,w=g.length;if(_==0||w==0)return 0;_>w?c=c.substring(_-w):_<w&&(g=g.substring(0,_));var L=Math.min(_,w);if(c==g)return L;for(var b=0,E=1;;){var S=c.substring(L-E),I=g.indexOf(S);if(I==-1)return b;E+=I,(I==0||c.substring(L-E)==g.substring(0,E))&&(b=E,E++)}},Ae.prototype.diff_halfMatch_=function(c,g){if(this.Diff_Timeout<=0)return null;var _=c.length>g.length?c:g,w=c.length>g.length?g:c;if(_.length<4||w.length*2<_.length)return null;var L=this;function b(G,q,le){for(var ge=G.substring(le,le+Math.floor(G.length/4)),y=-1,z="",ee,te,ne,Le;(y=q.indexOf(ge,y+1))!=-1;){var ie=L.diff_commonPrefix(G.substring(le),q.substring(y)),ke=L.diff_commonSuffix(G.substring(0,le),q.substring(0,y));z.length<ke+ie&&(z=q.substring(y-ke,y)+q.substring(y,y+ie),ee=G.substring(0,le-ke),te=G.substring(le+ie),ne=q.substring(0,y-ke),Le=q.substring(y+ie))}return z.length*2>=G.length?[ee,te,ne,Le,z]:null}var E=b(_,w,Math.ceil(_.length/4)),S=b(_,w,Math.ceil(_.length/2)),I;if(!E&&!S)return null;S?E?I=E[4].length>S[4].length?E:S:I=S:I=E;var F,H,V,M;c.length>g.length?(F=I[0],H=I[1],V=I[2],M=I[3]):(V=I[0],M=I[1],F=I[2],H=I[3]);var P=I[4];return[F,H,V,M,P]},Ae.prototype.diff_cleanupSemantic=function(c){for(var g=!1,_=[],w=0,L=null,b=0,E=0,S=0,I=0,F=0;b<c.length;)c[b][0]==A?(_[w++]=b,E=I,S=F,I=0,F=0,L=c[b][1]):(c[b][0]==R?I+=c[b][1].length:F+=c[b][1].length,L&&L.length<=Math.max(E,S)&&L.length<=Math.max(I,F)&&(c.splice(_[w-1],0,new Ae.Diff(v,L)),c[_[w-1]+1][0]=R,w--,w--,b=w>0?_[w-1]:-1,E=0,S=0,I=0,F=0,L=null,g=!0)),b++;for(g&&this.diff_cleanupMerge(c),this.diff_cleanupSemanticLossless(c),b=1;b<c.length;){if(c[b-1][0]==v&&c[b][0]==R){var H=c[b-1][1],V=c[b][1],M=this.diff_commonOverlap_(H,V),P=this.diff_commonOverlap_(V,H);M>=P?(M>=H.length/2||M>=V.length/2)&&(c.splice(b,0,new Ae.Diff(A,V.substring(0,M))),c[b-1][1]=H.substring(0,H.length-M),c[b+1][1]=V.substring(M),b++):(P>=H.length/2||P>=V.length/2)&&(c.splice(b,0,new Ae.Diff(A,H.substring(0,P))),c[b-1][0]=R,c[b-1][1]=V.substring(0,V.length-P),c[b+1][0]=v,c[b+1][1]=H.substring(P),b++),b++}b++}},Ae.prototype.diff_cleanupSemanticLossless=function(c){function g(P,G){if(!P||!G)return 6;var q=P.charAt(P.length-1),le=G.charAt(0),ge=q.match(Ae.nonAlphaNumericRegex_),y=le.match(Ae.nonAlphaNumericRegex_),z=ge&&q.match(Ae.whitespaceRegex_),ee=y&&le.match(Ae.whitespaceRegex_),te=z&&q.match(Ae.linebreakRegex_),ne=ee&&le.match(Ae.linebreakRegex_),Le=te&&P.match(Ae.blanklineEndRegex_),ie=ne&&G.match(Ae.blanklineStartRegex_);return Le||ie?5:te||ne?4:ge&&!z&&ee?3:z||ee?2:ge||y?1:0}for(var _=1;_<c.length-1;){if(c[_-1][0]==A&&c[_+1][0]==A){var w=c[_-1][1],L=c[_][1],b=c[_+1][1],E=this.diff_commonSuffix(w,L);if(E){var S=L.substring(L.length-E);w=w.substring(0,w.length-E),L=S+L.substring(0,L.length-E),b=S+b}for(var I=w,F=L,H=b,V=g(w,L)+g(L,b);L.charAt(0)===b.charAt(0);){w+=L.charAt(0),L=L.substring(1)+b.charAt(0),b=b.substring(1);var M=g(w,L)+g(L,b);M>=V&&(V=M,I=w,F=L,H=b)}c[_-1][1]!=I&&(I?c[_-1][1]=I:(c.splice(_-1,1),_--),c[_][1]=F,H?c[_+1][1]=H:(c.splice(_+1,1),_--))}_++}},Ae.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,Ae.whitespaceRegex_=/\s/,Ae.linebreakRegex_=/[\r\n]/,Ae.blanklineEndRegex_=/\n\r?\n$/,Ae.blanklineStartRegex_=/^\r?\n\r?\n/,Ae.prototype.diff_cleanupEfficiency=function(c){for(var g=!1,_=[],w=0,L=null,b=0,E=!1,S=!1,I=!1,F=!1;b<c.length;)c[b][0]==A?(c[b][1].length<this.Diff_EditCost&&(I||F)?(_[w++]=b,E=I,S=F,L=c[b][1]):(w=0,L=null),I=F=!1):(c[b][0]==v?F=!0:I=!0,L&&(E&&S&&I&&F||L.length<this.Diff_EditCost/2&&E+S+I+F==3)&&(c.splice(_[w-1],0,new Ae.Diff(v,L)),c[_[w-1]+1][0]=R,w--,L=null,E&&S?(I=F=!0,w=0):(w--,b=w>0?_[w-1]:-1,I=F=!1),g=!0)),b++;g&&this.diff_cleanupMerge(c)},Ae.prototype.diff_cleanupMerge=function(c){c.push(new Ae.Diff(A,""));for(var g=0,_=0,w=0,L="",b="",E;g<c.length;)switch(c[g][0]){case R:w++,b+=c[g][1],g++;break;case v:_++,L+=c[g][1],g++;break;case A:_+w>1?(_!==0&&w!==0&&(E=this.diff_commonPrefix(b,L),E!==0&&(g-_-w>0&&c[g-_-w-1][0]==A?c[g-_-w-1][1]+=b.substring(0,E):(c.splice(0,0,new Ae.Diff(A,b.substring(0,E))),g++),b=b.substring(E),L=L.substring(E)),E=this.diff_commonSuffix(b,L),E!==0&&(c[g][1]=b.substring(b.length-E)+c[g][1],b=b.substring(0,b.length-E),L=L.substring(0,L.length-E))),g-=_+w,c.splice(g,_+w),L.length&&(c.splice(g,0,new Ae.Diff(v,L)),g++),b.length&&(c.splice(g,0,new Ae.Diff(R,b)),g++),g++):g!==0&&c[g-1][0]==A?(c[g-1][1]+=c[g][1],c.splice(g,1)):g++,w=0,_=0,L="",b="";break}c[c.length-1][1]===""&&c.pop();var S=!1;for(g=1;g<c.length-1;)c[g-1][0]==A&&c[g+1][0]==A&&(c[g][1].substring(c[g][1].length-c[g-1][1].length)==c[g-1][1]?(c[g][1]=c[g-1][1]+c[g][1].substring(0,c[g][1].length-c[g-1][1].length),c[g+1][1]=c[g-1][1]+c[g+1][1],c.splice(g-1,1),S=!0):c[g][1].substring(0,c[g+1][1].length)==c[g+1][1]&&(c[g-1][1]+=c[g+1][1],c[g][1]=c[g][1].substring(c[g+1][1].length)+c[g+1][1],c.splice(g+1,1),S=!0)),g++;S&&this.diff_cleanupMerge(c)},Ae.prototype.diff_xIndex=function(c,g){var _=0,w=0,L=0,b=0,E;for(E=0;E<c.length&&(c[E][0]!==R&&(_+=c[E][1].length),c[E][0]!==v&&(w+=c[E][1].length),!(_>g));E++)L=_,b=w;return c.length!=E&&c[E][0]===v?b:b+(g-L)},Ae.prototype.diff_prettyHtml=function(c){for(var g=[],_=/&/g,w=/</g,L=/>/g,b=/\n/g,E=0;E<c.length;E++){var S=c[E][0],I=c[E][1],F=I.replace(_,"&amp;").replace(w,"&lt;").replace(L,"&gt;").replace(b,"&para;<br>");switch(S){case R:g[E]='<ins style="background:#e6ffe6;">'+F+"</ins>";break;case v:g[E]='<del style="background:#ffe6e6;">'+F+"</del>";break;case A:g[E]="<span>"+F+"</span>";break}}return g.join("")},Ae.prototype.diff_text1=function(c){for(var g=[],_=0;_<c.length;_++)c[_][0]!==R&&(g[_]=c[_][1]);return g.join("")},Ae.prototype.diff_text2=function(c){for(var g=[],_=0;_<c.length;_++)c[_][0]!==v&&(g[_]=c[_][1]);return g.join("")},Ae.prototype.diff_levenshtein=function(c){for(var g=0,_=0,w=0,L=0;L<c.length;L++){var b=c[L][0],E=c[L][1];switch(b){case R:_+=E.length;break;case v:w+=E.length;break;case A:g+=Math.max(_,w),_=0,w=0;break}}return g+=Math.max(_,w),g},Ae.prototype.diff_toDelta=function(c){for(var g=[],_=0;_<c.length;_++)switch(c[_][0]){case R:g[_]="+"+encodeURI(c[_][1]);break;case v:g[_]="-"+c[_][1].length;break;case A:g[_]="="+c[_][1].length;break}return g.join("	").replace(/%20/g," ")},Ae.prototype.diff_fromDelta=function(c,g){for(var _=[],w=0,L=0,b=g.split(/\t/g),E=0;E<b.length;E++){var S=b[E].substring(1);switch(b[E].charAt(0)){case"+":try{_[w++]=new Ae.Diff(R,decodeURI(S))}catch{throw new Error("Illegal escape in diff_fromDelta: "+S)}break;case"-":case"=":var I=parseInt(S,10);if(isNaN(I)||I<0)throw new Error("Invalid number in diff_fromDelta: "+S);var F=c.substring(L,L+=I);b[E].charAt(0)=="="?_[w++]=new Ae.Diff(A,F):_[w++]=new Ae.Diff(v,F);break;default:if(b[E])throw new Error("Invalid diff operation in diff_fromDelta: "+b[E])}}if(L!=c.length)throw new Error("Delta length ("+L+") does not equal source text length ("+c.length+").");return _},Ae.prototype.match_main=function(c,g,_){if(c==null||g==null||_==null)throw new Error("Null input. (match_main)");return _=Math.max(0,Math.min(_,c.length)),c==g?0:c.length?c.substring(_,_+g.length)==g?_:this.match_bitap_(c,g,_):-1},Ae.prototype.match_bitap_=function(c,g,_){if(g.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var w=this.match_alphabet_(g),L=this;function b(ee,te){var ne=ee/g.length,Le=Math.abs(_-te);return L.Match_Distance?ne+Le/L.Match_Distance:Le?1:ne}var E=this.Match_Threshold,S=c.indexOf(g,_);S!=-1&&(E=Math.min(b(0,S),E),S=c.lastIndexOf(g,_+g.length),S!=-1&&(E=Math.min(b(0,S),E)));var I=1<<g.length-1;S=-1;for(var F,H,V=g.length+c.length,M,P=0;P<g.length;P++){for(F=0,H=V;F<H;)b(P,_+H)<=E?F=H:V=H,H=Math.floor((V-F)/2+F);V=H;var G=Math.max(1,_-H+1),q=Math.min(_+H,c.length)+g.length,le=Array(q+2);le[q+1]=(1<<P)-1;for(var ge=q;ge>=G;ge--){var y=w[c.charAt(ge-1)];if(P===0?le[ge]=(le[ge+1]<<1|1)&y:le[ge]=(le[ge+1]<<1|1)&y|((M[ge+1]|M[ge])<<1|1)|M[ge+1],le[ge]&I){var z=b(P,ge-1);if(z<=E)if(E=z,S=ge-1,S>_)G=Math.max(1,2*_-S);else break}}if(b(P+1,_)>E)break;M=le}return S},Ae.prototype.match_alphabet_=function(c){for(var g={},_=0;_<c.length;_++)g[c.charAt(_)]=0;for(var _=0;_<c.length;_++)g[c.charAt(_)]|=1<<c.length-_-1;return g},Ae.prototype.patch_addContext_=function(c,g){if(g.length!=0){if(c.start2===null)throw Error("patch not initialized");for(var _=g.substring(c.start2,c.start2+c.length1),w=0;g.indexOf(_)!=g.lastIndexOf(_)&&_.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)w+=this.Patch_Margin,_=g.substring(c.start2-w,c.start2+c.length1+w);w+=this.Patch_Margin;var L=g.substring(c.start2-w,c.start2);L&&c.diffs.unshift(new Ae.Diff(A,L));var b=g.substring(c.start2+c.length1,c.start2+c.length1+w);b&&c.diffs.push(new Ae.Diff(A,b)),c.start1-=L.length,c.start2-=L.length,c.length1+=L.length+b.length,c.length2+=L.length+b.length}},Ae.prototype.patch_make=function(c,g,_){var w,L;if(typeof c=="string"&&typeof g=="string"&&typeof _>"u")w=c,L=this.diff_main(w,g,!0),L.length>2&&(this.diff_cleanupSemantic(L),this.diff_cleanupEfficiency(L));else if(c&&typeof c=="object"&&typeof g>"u"&&typeof _>"u")L=c,w=this.diff_text1(L);else if(typeof c=="string"&&g&&typeof g=="object"&&typeof _>"u")w=c,L=g;else if(typeof c=="string"&&typeof g=="string"&&_&&typeof _=="object")w=c,L=_;else throw new Error("Unknown call format to patch_make.");if(L.length===0)return[];for(var b=[],E=new Ae.patch_obj,S=0,I=0,F=0,H=w,V=w,M=0;M<L.length;M++){var P=L[M][0],G=L[M][1];switch(!S&&P!==A&&(E.start1=I,E.start2=F),P){case R:E.diffs[S++]=L[M],E.length2+=G.length,V=V.substring(0,F)+G+V.substring(F);break;case v:E.length1+=G.length,E.diffs[S++]=L[M],V=V.substring(0,F)+V.substring(F+G.length);break;case A:G.length<=2*this.Patch_Margin&&S&&L.length!=M+1?(E.diffs[S++]=L[M],E.length1+=G.length,E.length2+=G.length):G.length>=2*this.Patch_Margin&&S&&(this.patch_addContext_(E,H),b.push(E),E=new Ae.patch_obj,S=0,H=V,I=F);break}P!==R&&(I+=G.length),P!==v&&(F+=G.length)}return S&&(this.patch_addContext_(E,H),b.push(E)),b},Ae.prototype.patch_deepCopy=function(c){for(var g=[],_=0;_<c.length;_++){var w=c[_],L=new Ae.patch_obj;L.diffs=[];for(var b=0;b<w.diffs.length;b++)L.diffs[b]=new Ae.Diff(w.diffs[b][0],w.diffs[b][1]);L.start1=w.start1,L.start2=w.start2,L.length1=w.length1,L.length2=w.length2,g[_]=L}return g},Ae.prototype.patch_apply=function(c,g){if(c.length==0)return[g,[]];c=this.patch_deepCopy(c);var _=this.patch_addPadding(c);g=_+g+_,this.patch_splitMax(c);for(var w=0,L=[],b=0;b<c.length;b++){var E=c[b].start2+w,S=this.diff_text1(c[b].diffs),I,F=-1;if(S.length>this.Match_MaxBits?(I=this.match_main(g,S.substring(0,this.Match_MaxBits),E),I!=-1&&(F=this.match_main(g,S.substring(S.length-this.Match_MaxBits),E+S.length-this.Match_MaxBits),(F==-1||I>=F)&&(I=-1))):I=this.match_main(g,S,E),I==-1)L[b]=!1,w-=c[b].length2-c[b].length1;else{L[b]=!0,w=I-E;var H;if(F==-1?H=g.substring(I,I+S.length):H=g.substring(I,F+this.Match_MaxBits),S==H)g=g.substring(0,I)+this.diff_text2(c[b].diffs)+g.substring(I+S.length);else{var V=this.diff_main(S,H,!1);if(S.length>this.Match_MaxBits&&this.diff_levenshtein(V)/S.length>this.Patch_DeleteThreshold)L[b]=!1;else{this.diff_cleanupSemanticLossless(V);for(var M=0,P,G=0;G<c[b].diffs.length;G++){var q=c[b].diffs[G];q[0]!==A&&(P=this.diff_xIndex(V,M)),q[0]===R?g=g.substring(0,I+P)+q[1]+g.substring(I+P):q[0]===v&&(g=g.substring(0,I+P)+g.substring(I+this.diff_xIndex(V,M+q[1].length))),q[0]!==v&&(M+=q[1].length)}}}}}return g=g.substring(_.length,g.length-_.length),[g,L]},Ae.prototype.patch_addPadding=function(c){for(var g=this.Patch_Margin,_="",w=1;w<=g;w++)_+=String.fromCharCode(w);for(var w=0;w<c.length;w++)c[w].start1+=g,c[w].start2+=g;var L=c[0],b=L.diffs;if(b.length==0||b[0][0]!=A)b.unshift(new Ae.Diff(A,_)),L.start1-=g,L.start2-=g,L.length1+=g,L.length2+=g;else if(g>b[0][1].length){var E=g-b[0][1].length;b[0][1]=_.substring(b[0][1].length)+b[0][1],L.start1-=E,L.start2-=E,L.length1+=E,L.length2+=E}if(L=c[c.length-1],b=L.diffs,b.length==0||b[b.length-1][0]!=A)b.push(new Ae.Diff(A,_)),L.length1+=g,L.length2+=g;else if(g>b[b.length-1][1].length){var E=g-b[b.length-1][1].length;b[b.length-1][1]+=_.substring(0,E),L.length1+=E,L.length2+=E}return _},Ae.prototype.patch_splitMax=function(c){for(var g=this.Match_MaxBits,_=0;_<c.length;_++)if(!(c[_].length1<=g)){var w=c[_];c.splice(_--,1);for(var L=w.start1,b=w.start2,E="";w.diffs.length!==0;){var S=new Ae.patch_obj,I=!0;for(S.start1=L-E.length,S.start2=b-E.length,E!==""&&(S.length1=S.length2=E.length,S.diffs.push(new Ae.Diff(A,E)));w.diffs.length!==0&&S.length1<g-this.Patch_Margin;){var F=w.diffs[0][0],H=w.diffs[0][1];F===R?(S.length2+=H.length,b+=H.length,S.diffs.push(w.diffs.shift()),I=!1):F===v&&S.diffs.length==1&&S.diffs[0][0]==A&&H.length>2*g?(S.length1+=H.length,L+=H.length,I=!1,S.diffs.push(new Ae.Diff(F,H)),w.diffs.shift()):(H=H.substring(0,g-S.length1-this.Patch_Margin),S.length1+=H.length,L+=H.length,F===A?(S.length2+=H.length,b+=H.length):I=!1,S.diffs.push(new Ae.Diff(F,H)),H==w.diffs[0][1]?w.diffs.shift():w.diffs[0][1]=w.diffs[0][1].substring(H.length))}E=this.diff_text2(S.diffs),E=E.substring(E.length-this.Patch_Margin);var V=this.diff_text1(w.diffs).substring(0,this.Patch_Margin);V!==""&&(S.length1+=V.length,S.length2+=V.length,S.diffs.length!==0&&S.diffs[S.diffs.length-1][0]===A?S.diffs[S.diffs.length-1][1]+=V:S.diffs.push(new Ae.Diff(A,V))),I||c.splice(++_,0,S)}}},Ae.prototype.patch_toText=function(c){for(var g=[],_=0;_<c.length;_++)g[_]=c[_];return g.join("")},Ae.prototype.patch_fromText=function(c){var g=[];if(!c)return g;for(var _=c.split(`
`),w=0,L=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;w<_.length;){var b=_[w].match(L);if(!b)throw new Error("Invalid patch string: "+_[w]);var E=new Ae.patch_obj;for(g.push(E),E.start1=parseInt(b[1],10),b[2]===""?(E.start1--,E.length1=1):b[2]=="0"?E.length1=0:(E.start1--,E.length1=parseInt(b[2],10)),E.start2=parseInt(b[3],10),b[4]===""?(E.start2--,E.length2=1):b[4]=="0"?E.length2=0:(E.start2--,E.length2=parseInt(b[4],10)),w++;w<_.length;){var S=_[w].charAt(0);try{var I=decodeURI(_[w].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+I)}if(S=="-")E.diffs.push(new Ae.Diff(v,I));else if(S=="+")E.diffs.push(new Ae.Diff(R,I));else if(S==" ")E.diffs.push(new Ae.Diff(A,I));else{if(S=="@")break;if(S!=="")throw new Error('Invalid patch mode "'+S+'" in: '+I)}w++}}return g},Ae.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},Ae.patch_obj.prototype.toString=function(){var c,g;this.length1===0?c=this.start1+",0":this.length1==1?c=this.start1+1:c=this.start1+1+","+this.length1,this.length2===0?g=this.start2+",0":this.length2==1?g=this.start2+1:g=this.start2+1+","+this.length2;for(var _=["@@ -"+c+" +"+g+` @@
`],w,L=0;L<this.diffs.length;L++){switch(this.diffs[L][0]){case R:w="+";break;case v:w="-";break;case A:w=" ";break}_[L+1]=w+encodeURI(this.diffs[L][1])+`
`}return _.join("").replace(/%20/g," ")},a.exports=Ae,a.exports.diff_match_patch=Ae,a.exports.DIFF_DELETE=v,a.exports.DIFF_INSERT=R,a.exports.DIFF_EQUAL=A})($o);var ff=$o.exports;const cf=ll(ff);(function(a,Ae){(function(v){v(Vr())})(function(v){v.defineSimpleMode=function(S,I){v.defineMode(S,function(F){return v.simpleMode(F,I)})},v.simpleMode=function(S,I){R(I,"start");var F={},H=I.meta||{},V=!1;for(var M in I)if(M!=H&&I.hasOwnProperty(M))for(var P=F[M]=[],G=I[M],q=0;q<G.length;q++){var le=G[q];P.push(new g(le,I)),(le.indent||le.dedent)&&(V=!0)}var ge={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:V?[]:null}},copyState:function(z){var ee={state:z.state,pending:z.pending,local:z.local,localState:null,indent:z.indent&&z.indent.slice(0)};z.localState&&(ee.localState=v.copyState(z.local.mode,z.localState)),z.stack&&(ee.stack=z.stack.slice(0));for(var te=z.persistentStates;te;te=te.next)ee.persistentStates={mode:te.mode,spec:te.spec,state:te.state==z.localState?ee.localState:v.copyState(te.mode,te.state),next:ee.persistentStates};return ee},token:_(F,S),innerMode:function(z){return z.local&&{mode:z.local.mode,state:z.localState}},indent:E(F,H)};if(H)for(var y in H)H.hasOwnProperty(y)&&(ge[y]=H[y]);return ge};function R(S,I){if(!S.hasOwnProperty(I))throw new Error("Undefined state "+I+" in simple mode")}function A(S,I){if(!S)return/(?:)/;var F="";return S instanceof RegExp?(S.ignoreCase&&(F="i"),S.unicode&&(F+="u"),S=S.source):S=String(S),new RegExp((I===!1?"":"^")+"(?:"+S+")",F)}function c(S){if(!S)return null;if(S.apply)return S;if(typeof S=="string")return S.replace(/\./g," ");for(var I=[],F=0;F<S.length;F++)I.push(S[F]&&S[F].replace(/\./g," "));return I}function g(S,I){(S.next||S.push)&&R(I,S.next||S.push),this.regex=A(S.regex),this.token=c(S.token),this.data=S}function _(S,I){return function(F,H){if(H.pending){var V=H.pending.shift();return H.pending.length==0&&(H.pending=null),F.pos+=V.text.length,V.token}if(H.local)if(H.local.end&&F.match(H.local.end)){var M=H.local.endToken||null;return H.local=H.localState=null,M}else{var M=H.local.mode.token(F,H.localState),P;return H.local.endScan&&(P=H.local.endScan.exec(F.current()))&&(F.pos=F.start+P.index),M}for(var G=S[H.state],q=0;q<G.length;q++){var le=G[q],ge=(!le.data.sol||F.sol())&&F.match(le.regex);if(ge){le.data.next?H.state=le.data.next:le.data.push?((H.stack||(H.stack=[])).push(H.state),H.state=le.data.push):le.data.pop&&H.stack&&H.stack.length&&(H.state=H.stack.pop()),le.data.mode&&L(I,H,le.data.mode,le.token),le.data.indent&&H.indent.push(F.indentation()+I.indentUnit),le.data.dedent&&H.indent.pop();var y=le.token;if(y&&y.apply&&(y=y(ge)),ge.length>2&&le.token&&typeof le.token!="string"){for(var z=2;z<ge.length;z++)ge[z]&&(H.pending||(H.pending=[])).push({text:ge[z],token:le.token[z-1]});return F.backUp(ge[0].length-(ge[1]?ge[1].length:0)),y[0]}else return y&&y.join?y[0]:y}}return F.next(),null}}function w(S,I){if(S===I)return!0;if(!S||typeof S!="object"||!I||typeof I!="object")return!1;var F=0;for(var H in S)if(S.hasOwnProperty(H)){if(!I.hasOwnProperty(H)||!w(S[H],I[H]))return!1;F++}for(var H in I)I.hasOwnProperty(H)&&F--;return F==0}function L(S,I,F,H){var V;if(F.persistent)for(var M=I.persistentStates;M&&!V;M=M.next)(F.spec?w(F.spec,M.spec):F.mode==M.mode)&&(V=M);var P=V?V.mode:F.mode||v.getMode(S,F.spec),G=V?V.state:v.startState(P);F.persistent&&!V&&(I.persistentStates={mode:P,spec:F.spec,state:G,next:I.persistentStates}),I.localState=G,I.local={mode:P,end:F.end&&A(F.end),endScan:F.end&&F.forceEnd!==!1&&A(F.end,!1),endToken:H&&H.join?H[H.length-1]:H}}function b(S,I){for(var F=0;F<I.length;F++)if(I[F]===S)return!0}function E(S,I){return function(F,H,V){if(F.local&&F.local.mode.indent)return F.local.mode.indent(F.localState,H,V);if(F.indent==null||F.local||I.dontIndentStates&&b(F.state,I.dontIndentStates)>-1)return v.Pass;var M=F.indent.length-1,P=S[F.state];e:for(;;){for(var G=0;G<P.length;G++){var q=P[G];if(q.data.dedent&&q.data.dedentIfLineStart!==!1){var le=q.regex.exec(H);if(le&&le[0]){M--,(q.next||q.push)&&(P=S[q.next||q.push]),H=H.slice(le[0].length);continue e}}}break}return M<0?0:F.indent[M]}}})})();!window.CodeMirror&&(window.CodeMirror=Zr);const Bi=window.CodeMirror||Zr,hf=ga({name:"DefaultMode",props:{name:{type:String,default:`cm-textarea-${+new Date}`},value:{type:String,default:""},content:{type:String,default:""},options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>null},placeholder:{type:String,default:""}},emits:{ready:a=>a,"update:cminstance":a=>a},setup(a,{emit:Ae}){const v=Mr(),R=Mr(null),A=()=>{R.value=sl(Bi.fromTextArea(v.value,a.options)),Ae("update:cminstance",R.value);const c=ii(()=>a.cminstance,g=>{var _;g&&((_=a.cminstance)==null||_.setValue(a.value||a.content)),Ae("ready",qr(R)),c==null||c()},{deep:!0})};return _a(()=>{A()}),{textarea:v,initialize:A}}}),ul=(a,Ae)=>{const v=a.__vccOpts||a;for(const[R,A]of Ae)v[R]=A;return v},pf=["name","placeholder"];function df(a,Ae,v,R,A,c){return ai(),va("textarea",{ref:"textarea",name:a.$props.name,placeholder:a.$props.placeholder},null,8,pf)}const qo=ul(hf,[["render",df]]);window.diff_match_patch=cf;window.DIFF_DELETE=-1;window.DIFF_INSERT=1;window.DIFF_EQUAL=0;const gf=ga({name:"MergeMode",props:{options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>({})}},emits:["update:cminstance","ready"],setup(a,{emit:Ae}){const v=Mr(),R=Mr(),A=()=>{v.value=sl(Bi.MergeView(R.value,a.options)),Ae("update:cminstance",v.value),Ae("ready",v)};return _a(()=>{A()}),{mergeView:R,initialize:A}}}),vf={ref:"mergeView"};function _f(a,Ae,v,R,A,c){return ai(),va("div",vf,null,512)}const mf=ul(gf,[["render",_f]]);function bf(a){const Ae=/#link#(.+)#link#/g,v=[];let R;for(R=Ae.exec(a);R;){const A=document.createElement("a"),c=JSON.parse(R[1]),g=Object.entries(c);for(const[_,w]of g)A.setAttribute(_,w);A.className="editor_custom_link",A.innerHTML="logDownload",v.push({start:R.index,end:R.index+R[0].length,node:A}),R=Ae.exec(a)}return v}function Lf(a){const Ae=[];function v(){const R=/#log<(\w*)>log#((.|\r\n|\n)*?)#log<(\w*)>log#/g;let A;for(A=R.exec(a);A;){const c=A[0].replace(/\r\n/g,`
`).split(`
`),g=A[2].replace(/\r\n/g,`
`).split(`
`),_=document.createElement("span"),w=A[1];_.className=`c-editor--log__${w}`;let L=0;for(let b=0;b<c.length;b++){const E=c[b],S=g[b],I=_.cloneNode(!1);I.innerText=S,Ae.push({start:A.index+L,end:A.index+L+E.length,node:I}),L=L+E.length+1}A=R.exec(a)}}return v(),Ae}const da=[{regex:/(\[.*?\])([ \t]*)(<error>[ \t])(.+)/,token:["tag","","error.strong","error.strong"],sol:!0},{regex:/(\[.*?\])([ \t]*)(<info>)(.+)(.?)/,token:["tag","","bracket","bracket","hr"],sol:!0},{regex:/(\[.*?\])([ \t]*)(<warning>)(.+)(.?)/,token:["tag","","comment","comment","hr"],sol:!0}];Bi.defineSimpleMode("fclog",{start:[...da,{regex:/.*/,token:"hr"}],error:[...da,{regex:/.*/,token:"error.strong"}],info:[...da,{regex:/.*/,token:"bracket"}],warning:[...da,{regex:/.*\[/,token:"comment"}]});Bi.defineSimpleMode("log",{start:[{regex:/^[=]+[^=]*[=]+/,token:"strong"},{regex:/([^\w])([A-Z][\w]*)/,token:["","string"]},{regex:/(^[A-Z][\w]*)/,token:"string"}]});const yf=ga({name:"CodemirrorFclog",props:{value:{type:String,default:""},name:{type:String,default:`cm-textarea-${+new Date}`},options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>({})},placeholder:{type:String,default:""}},emits:["update:cminstance","ready"],setup(a,{emit:Ae}){const v=Mr(),R=Mr(null),A=(g=a.cminstance)=>{g.getAllMarks().forEach(L=>L.clear());const _=g.getValue(),w=[].concat(bf(_)).concat(Lf(_));for(let L=0;L<w.length;L++){const b=w[L];g.markText(g.posFromIndex(b.start),g.posFromIndex(b.end),{replacedWith:b.node})}},c=()=>{var g;R.value=sl(Bi.fromTextArea(v.value,a.options)),Ae("update:cminstance",qr(R)),(g=R.value)==null||g.on("change",A)};return ii(()=>a.cminstance,g=>{var _;g&&(A(a.cminstance),(_=a.cminstance)==null||_.setValue(a.value),Ae("ready",R))},{deep:!0,immediate:!0}),_a(()=>{c()}),{initialize:c,textarea:v}}}),xf=["name","placeholder"];function kf(a,Ae,v,R,A,c){return ai(),va("textarea",{ref:"textarea",name:a.$props.name,placeholder:a.$props.placeholder},null,8,xf)}const Af=ul(yf,[["render",kf]]),es={"update:value":()=>!0,change:(a,Ae)=>({value:a,cm:Ae}),input:()=>!0,ready:a=>a},Tf=["changes","scroll","beforeChange","cursorActivity","keyHandled","inputRead","electricInput","beforeSelectionChange","viewportChange","swapDoc","gutterClick","gutterContextMenu","focus","blur","refresh","optionChange","scrollCursorIntoView","update"],wf=()=>{const a={};return Tf.forEach(Ae=>{a[Ae]=(...v)=>v}),a},Sf={...es,...wf()},al={mode:"text",theme:"default",lineNumbers:!0,smartIndent:!0,indentUnit:2,styleActiveLine:!0};function Of(a){Promise.resolve().then(()=>{const Ae=a.getScrollInfo();a.scrollTo(Ae.left,Ae.height)})}const Ef=({props:a,cminstance:Ae,emit:v,internalInstance:R,content:A})=>{const c=ol(()=>{var _;return a.merge?(_=qr(Ae))==null?void 0:_.editor():qr(Ae)}),g=()=>{const _=[];return Object.keys(R==null?void 0:R.vnode.props).forEach(w=>{if(w.startsWith("on")){const L=w.replace(w[2],w[2].toLowerCase()).slice(2);!es[L]&&_.push(L)}}),_};return{listenerEvents:()=>{c.value.on("change",w=>{const L=w.getValue();L===A.value&&L!==""||(A.value=L,v("update:value",A.value||""),v("input",A.value||" "),Promise.resolve().then(()=>{v("change",A.value,w)}),a.keepCursorInEnd&&Of(w))});const _={};g().filter(w=>!_[w]&&(_[w]=!0)).forEach(w=>{c.value.on(w,(...L)=>{v(w,...L)})})}}};function Nf({props:a,cminstance:Ae,presetRef:v}){const R=Mr("100%"),A=Mr("100%"),c=ol(()=>{var S;return a.merge?(S=qr(Ae))==null?void 0:S.editor():qr(Ae)}),g=()=>{Yu(()=>{var S;(S=c.value)==null||S.refresh()})},_=S=>!(S&&isNaN(+S)),w=(S=a.width,I=a.height)=>{var F;let H="100%",V="100%";_(S)?H=`${String(S)}px`:S&&(H=S),_(I)?V=`${String(I)}px`:I&&(V=I),R.value=H,A.value=V,console.log("resize",H,V),(F=c.value)==null||F.setSize("100%","100%")},L=()=>{var S;const I=(S=c.value)==null?void 0:S.getWrapperElement();I==null||I.remove()},b=()=>{var S,I,F;const H=(S=c.value)==null?void 0:S.getDoc().getHistory();(I=v.value)==null||I.initialize(),L(),(F=c.value)==null||F.getDoc().setHistory(H)},E=()=>{const S=document.querySelector(".CodeMirror-gutters");return(S==null?void 0:S.style.left.replace("px",""))!=="0"};return{reload:b,refresh:g,resize:w,destroy:L,containerWidth:R,containerHeight:A,reviseStyle:()=>{if(g(),!E())return;const S=setInterval(()=>{E()?g():clearInterval(S)},60),I=setTimeout(()=>{clearInterval(S),clearTimeout(I)},400)}}}const Cf=ga({__name:"index",props:{value:{type:String,default:""},options:{type:Object,default:()=>al},globalOptions:{type:Object,default:()=>al},placeholder:{type:String,default:""},border:{type:Boolean,default:!1},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},originalStyle:{type:Boolean,default:!1},keepCursorInEnd:{type:Boolean,default:!1},merge:{type:Boolean,default:!1},name:{type:String,default:""},marker:{type:Function,default:()=>null},unseenLines:{type:Array,default:()=>[]}},emits:Sf,setup(a,{expose:Ae,emit:v}){var R,A,c;typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value(ne){if(ne==null)throw new TypeError("Cannot convert undefined or null to object");const Le=Object(ne);for(let ie=1;ie<arguments.length;ie++){const ke=arguments[ie];if(ke!=null)for(const O in ke)Object.prototype.hasOwnProperty.call(ke,O)&&(Le[O]=ke[O])}return Le},writable:!0,configurable:!0});const g=a,_=v,w=Mr(null),L=Mr(""),b=Ku(qo),E=Mr({foldGutter:!0,...al,...g.globalOptions,...g.options,gutters:[...new Set(["CodeMirror-linenumbers","CodeMirror-foldgutter",...((R=g.options)==null?void 0:R.gutters)||[]])]}),S=Vu(),I=g.name||((c=(A=S==null?void 0:S.parent)==null?void 0:A.type)==null?void 0:c.name)||void 0,F=Mr(null),H=ol(()=>{var ne;return g.merge?(ne=qr(w))==null?void 0:ne.editor():qr(w)}),{refresh:V,resize:M,destroy:P,containerHeight:G,containerWidth:q,reviseStyle:le}=Nf({props:g,cminstance:w,presetRef:F}),{listenerEvents:ge}=Ef({props:g,cminstance:w,emit:_,internalInstance:S,content:L}),y=()=>{g.unseenLines!==void 0&&g.marker!==void 0&&g.unseenLines.forEach(ne=>{var Le,ie;const ke=(Le=w.value)==null?void 0:Le.lineInfo(ne);(ie=w.value)==null||ie.setGutterMarker(ne,"breakpoints",ke!=null&&ke.gutterMarkers?null:g.marker())})},z=ne=>{var Le,ie;const ke=(Le=w.value)==null?void 0:Le.getValue();ne!==ke&&((ie=w.value)==null||ie.setValue(ne),L.value=ne,le()),y()},ee=()=>{ge(),y(),M(g.width,g.height),_("ready",w.value),ii([()=>g.width,()=>g.height],([ne,Le])=>{M(ne,Le)},{deep:!0})},te=()=>{if(g.options.mode==="fclog"||g.options.mode==="log"){b.value=Af;return}if(g.merge){b.value=mf;return}b.value=qo};return ii(()=>g.options,ne=>{var Le;for(const ie in g.options)(Le=H.value)==null||Le.setOption(ie,qr(ne[ie]))},{deep:!0}),ii(()=>g.value,ne=>{z(ne)}),ii(()=>g.merge,te,{immediate:!0}),Wu(()=>{P()}),Ae({cminstance:w,resize:M,refresh:V,destroy:P}),(ne,Le)=>(ai(),va("div",{class:Xu(["codemirror-container",{merge:ne.$props.merge,bordered:ne.$props.border||ne.$props.merge&&!g.originalStyle,"original-style":g.originalStyle}]),style:Qo({height:qr(G),width:qr(q)})},[(ai(),Jo(ju(b.value),zu({ref_key:"presetRef",ref:F,cminstance:w.value,"onUpdate:cminstance":Le[0]||(Le[0]=ie=>w.value=ie),style:{height:"100%"}},{...ne.$props,...ne.$attrs,options:E.value,name:qr(I),content:L.value},{onReady:ee}),null,16,["cminstance"]))],6))}});function Mf(a,Ae){Ae===void 0&&(Ae={});var v=Ae.insertAt;if(!(typeof document>"u")){var R=document.head||document.getElementsByTagName("head")[0],A=document.createElement("style");A.type="text/css",v==="top"&&R.firstChild?R.insertBefore(A,R.firstChild):R.appendChild(A),A.styleSheet?A.styleSheet.cssText=a:A.appendChild(document.createTextNode(a))}}Mf(`.codemirror-container {
  position: relative;
  display: inline-block;
  height: 100%;
  width: fit-content;
  font-size: 13px;
  overflow: hidden;
}
.codemirror-container.bordered {
  border: 1px solid #aaaaaa;
}

.codemirror-container .editor_custom_link {
  cursor: pointer;
  color: #1474f1;
  text-decoration: underline;
}
.codemirror-container .editor_custom_link:hover {
  color: #04b4fa;
}
.codemirror-container:not(.original-style) .CodeMirror-lines .CodeMirror-placeholder.CodeMirror-line-like {
  color: #666;
}
.codemirror-container:not(.original-style) .CodeMirror,
.codemirror-container:not(.original-style) .CodeMirror-merge-pane {
  height: 100%;
  font-family: consolas !important;
}
.codemirror-container:not(.original-style) .CodeMirror-merge,
.codemirror-container:not(.original-style) .CodeMirror-merge-right .CodeMirror {
  height: 100%;
  border: none !important;
}
.codemirror-container:not(.original-style) .c-editor--log__error {
  color: #bb0606;
  font-weight: bold;
}
.codemirror-container:not(.original-style) .c-editor--log__info {
  color: #333333;
  font-weight: bold;
}
.codemirror-container:not(.original-style) .c-editor--log__warning {
  color: #ee9900;
}
.codemirror-container:not(.original-style) .c-editor--log__success {
  color: #669600;
}
.codemirror-container:not(.original-style) .cm-header,
.codemirror-container:not(.original-style) .cm-strong {
  font-weight: bold;
}
`);(function(a,Ae){(function(v){v(Vr())})(function(v){v.defineMode("lua",function(R,A){var c=R.indentUnit;function g(P){return new RegExp("^(?:"+P.join("|")+")","i")}function _(P){return new RegExp("^(?:"+P.join("|")+")$","i")}var w=_(A.specials||[]),L=_(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable","debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match","string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]),b=_(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]),E=_(["function","if","repeat","do","\\(","{"]),S=_(["end","until","\\)","}"]),I=g(["end","until","\\)","}","else","elseif"]);function F(P){for(var G=0;P.eat("=");)++G;return P.eat("["),G}function H(P,G){var q=P.next();return q=="-"&&P.eat("-")?P.eat("[")&&P.eat("[")?(G.cur=V(F(P),"comment"))(P,G):(P.skipToEnd(),"comment"):q=='"'||q=="'"?(G.cur=M(q))(P,G):q=="["&&/[\[=]/.test(P.peek())?(G.cur=V(F(P),"string"))(P,G):/\d/.test(q)?(P.eatWhile(/[\w.%]/),"number"):/[\w_]/.test(q)?(P.eatWhile(/[\w\\\-_.]/),"variable"):null}function V(P,G){return function(q,le){for(var ge=null,y;(y=q.next())!=null;)if(ge==null)y=="]"&&(ge=0);else if(y=="=")++ge;else if(y=="]"&&ge==P){le.cur=H;break}else ge=null;return G}}function M(P){return function(G,q){for(var le=!1,ge;(ge=G.next())!=null&&!(ge==P&&!le);)le=!le&&ge=="\\";return le||(q.cur=H),"string"}}return{startState:function(P){return{basecol:P||0,indentDepth:0,cur:H}},token:function(P,G){if(P.eatSpace())return null;var q=G.cur(P,G),le=P.current();return q=="variable"&&(b.test(le)?q="keyword":L.test(le)?q="builtin":w.test(le)&&(q="variable-2")),q!="comment"&&q!="string"&&(E.test(le)?++G.indentDepth:S.test(le)&&--G.indentDepth),q},indent:function(P,G){var q=I.test(G);return P.basecol+c*(P.indentDepth-(q?1:0))},electricInput:/^\s*(?:end|until|else|\)|\})$/,lineComment:"--",blockCommentStart:"--[[",blockCommentEnd:"]]"}}),v.defineMIME("text/x-lua","lua")})})();(function(a,Ae){(function(v){v(Vr())})(function(v){var R="CodeMirror-hint",A="CodeMirror-hint-active";v.showHint=function(M,P,G){if(!P)return M.showHint(G);G&&G.async&&(P.async=!0);var q={hint:P};if(G)for(var le in G)q[le]=G[le];return M.showHint(q)},v.defineExtension("showHint",function(M){M=w(this,this.getCursor("start"),M);var P=this.listSelections();if(!(P.length>1)){if(this.somethingSelected()){if(!M.hint.supportsSelection)return;for(var G=0;G<P.length;G++)if(P[G].head.line!=P[G].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var q=this.state.completionActive=new c(this,M);q.options.hint&&(v.signal(this,"startCompletion",this),q.update(!0))}}),v.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function c(M,P){if(this.cm=M,this.options=P,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var G=this;M.on("cursorActivity",this.activityFunc=function(){G.cursorActivity()})}}var g=window.requestAnimationFrame||function(M){return setTimeout(M,1e3/60)},_=window.cancelAnimationFrame||clearTimeout;c.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&v.signal(this.data,"close"),this.widget&&this.widget.close(),v.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(M,P){var G=M.list[P],q=this;this.cm.operation(function(){G.hint?G.hint(q.cm,M,G):q.cm.replaceRange(L(G),G.from||M.from,G.to||M.to,"complete"),v.signal(M,"pick",G),q.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(_(this.debounce),this.debounce=0);var M=this.startPos;this.data&&(M=this.data.from);var P=this.cm.getCursor(),G=this.cm.getLine(P.line);if(P.line!=this.startPos.line||G.length-P.ch!=this.startLen-this.startPos.ch||P.ch<M.ch||this.cm.somethingSelected()||!P.ch||this.options.closeCharacters.test(G.charAt(P.ch-1)))this.close();else{var q=this;this.debounce=g(function(){q.update()}),this.widget&&this.widget.disable()}},update:function(M){if(this.tick!=null){var P=this,G=++this.tick;F(this.options.hint,this.cm,this.options,function(q){P.tick==G&&P.finishUpdate(q,M)})}},finishUpdate:function(M,P){this.data&&v.signal(this.data,"update");var G=this.widget&&this.widget.picked||P&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=M,M&&M.list.length&&(G&&M.list.length==1?this.pick(M,0):(this.widget=new S(this,M),v.signal(M,"shown")))}};function w(M,P,G){var q=M.options.hintOptions,le={};for(var ge in V)le[ge]=V[ge];if(q)for(var ge in q)q[ge]!==void 0&&(le[ge]=q[ge]);if(G)for(var ge in G)G[ge]!==void 0&&(le[ge]=G[ge]);return le.hint.resolve&&(le.hint=le.hint.resolve(M,P)),le}function L(M){return typeof M=="string"?M:M.text}function b(M,P){var G={Up:function(){P.moveFocus(-1)},Down:function(){P.moveFocus(1)},PageUp:function(){P.moveFocus(-P.menuSize()+1,!0)},PageDown:function(){P.moveFocus(P.menuSize()-1,!0)},Home:function(){P.setFocus(0)},End:function(){P.setFocus(P.length-1)},Enter:P.pick,Tab:P.pick,Esc:P.close},q=/Mac/.test(navigator.platform);q&&(G["Ctrl-P"]=function(){P.moveFocus(-1)},G["Ctrl-N"]=function(){P.moveFocus(1)});var le=M.options.customKeys,ge=le?{}:G;function y(te,ne){var Le;typeof ne!="string"?Le=function(ie){return ne(ie,P)}:G.hasOwnProperty(ne)?Le=G[ne]:Le=ne,ge[te]=Le}if(le)for(var z in le)le.hasOwnProperty(z)&&y(z,le[z]);var ee=M.options.extraKeys;if(ee)for(var z in ee)ee.hasOwnProperty(z)&&y(z,ee[z]);return ge}function E(M,P){for(;P&&P!=M;){if(P.nodeName.toUpperCase()==="LI"&&P.parentNode==M)return P;P=P.parentNode}}function S(M,P){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=M,this.data=P,this.picked=!1;var G=this,q=M.cm,le=q.getInputField().ownerDocument,ge=le.defaultView||le.parentWindow,y=this.hints=le.createElement("ul");y.setAttribute("role","listbox"),y.setAttribute("aria-expanded","true"),y.id=this.id;var z=M.cm.options.theme;y.className="CodeMirror-hints "+z,this.selectedHint=P.selectedHint||0;for(var ee=P.list,te=0;te<ee.length;++te){var ne=y.appendChild(le.createElement("li")),Le=ee[te],ie=R+(te!=this.selectedHint?"":" "+A);Le.className!=null&&(ie=Le.className+" "+ie),ne.className=ie,te==this.selectedHint&&ne.setAttribute("aria-selected","true"),ne.id=this.id+"-"+te,ne.setAttribute("role","option"),Le.render?Le.render(ne,P,Le):ne.appendChild(le.createTextNode(Le.displayText||L(Le))),ne.hintId=te}var ke=M.options.container||le.body,O=q.cursorCoords(M.options.alignWithWord?P.from:null),Ce=O.left,tt=O.bottom,Pe=!0,at=0,re=0;if(ke!==le.body){var fe=["absolute","relative","fixed"].indexOf(ge.getComputedStyle(ke).position)!==-1,_e=fe?ke:ke.offsetParent,Ye=_e.getBoundingClientRect(),Qe=le.body.getBoundingClientRect();at=Ye.left-Qe.left-_e.scrollLeft,re=Ye.top-Qe.top-_e.scrollTop}y.style.left=Ce-at+"px",y.style.top=tt-re+"px";var vt=ge.innerWidth||Math.max(le.body.offsetWidth,le.documentElement.offsetWidth),et=ge.innerHeight||Math.max(le.body.offsetHeight,le.documentElement.offsetHeight);ke.appendChild(y),q.getInputField().setAttribute("aria-autocomplete","list"),q.getInputField().setAttribute("aria-owns",this.id),q.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var rt=M.options.moveOnOverlap?y.getBoundingClientRect():new DOMRect,ct=M.options.paddingForScrollbar?y.scrollHeight>y.clientHeight+1:!1,he;setTimeout(function(){he=q.getScrollInfo()});var ye=rt.bottom-et;if(ye>0){var De=rt.bottom-rt.top,Se=rt.top-(O.bottom-O.top)-2;et-rt.top<Se?(De>Se&&(y.style.height=(De=Se)+"px"),y.style.top=(tt=O.top-De)+re+"px",Pe=!1):y.style.height=et-rt.top-2+"px"}var lt=rt.right-vt;if(ct&&(lt+=q.display.nativeBarWidth),lt>0&&(rt.right-rt.left>vt&&(y.style.width=vt-5+"px",lt-=rt.right-rt.left-vt),y.style.left=(Ce=Math.max(O.left-lt-at,0))+"px"),ct)for(var xt=y.firstChild;xt;xt=xt.nextSibling)xt.style.paddingRight=q.display.nativeBarWidth+"px";if(q.addKeyMap(this.keyMap=b(M,{moveFocus:function(be,Ge){G.changeActive(G.selectedHint+be,Ge)},setFocus:function(be){G.changeActive(be)},menuSize:function(){return G.screenAmount()},length:ee.length,close:function(){M.close()},pick:function(){G.pick()},data:P})),M.options.closeOnUnfocus){var yt;q.on("blur",this.onBlur=function(){yt=setTimeout(function(){M.close()},100)}),q.on("focus",this.onFocus=function(){clearTimeout(yt)})}q.on("scroll",this.onScroll=function(){var be=q.getScrollInfo(),Ge=q.getWrapperElement().getBoundingClientRect();he||(he=q.getScrollInfo());var J=tt+he.top-be.top,d=J-(ge.pageYOffset||(le.documentElement||le.body).scrollTop);if(Pe||(d+=y.offsetHeight),d<=Ge.top||d>=Ge.bottom)return M.close();y.style.top=J+"px",y.style.left=Ce+he.left-be.left+"px"}),v.on(y,"dblclick",function(be){var Ge=E(y,be.target||be.srcElement);Ge&&Ge.hintId!=null&&(G.changeActive(Ge.hintId),G.pick())}),v.on(y,"click",function(be){var Ge=E(y,be.target||be.srcElement);Ge&&Ge.hintId!=null&&(G.changeActive(Ge.hintId),M.options.completeOnSingleClick&&G.pick())}),v.on(y,"mousedown",function(){setTimeout(function(){q.focus()},20)});var nt=this.getSelectedHintRange();return(nt.from!==0||nt.to!==0)&&this.scrollToActive(),v.signal(P,"select",ee[this.selectedHint],y.childNodes[this.selectedHint]),!0}S.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var M=this.completion.cm.getInputField();M.removeAttribute("aria-activedescendant"),M.removeAttribute("aria-owns");var P=this.completion.cm;this.completion.options.closeOnUnfocus&&(P.off("blur",this.onBlur),P.off("focus",this.onFocus)),P.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var M=this;this.keyMap={Enter:function(){M.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(M,P){if(M>=this.data.list.length?M=P?this.data.list.length-1:0:M<0&&(M=P?0:this.data.list.length-1),this.selectedHint!=M){var G=this.hints.childNodes[this.selectedHint];G&&(G.className=G.className.replace(" "+A,""),G.removeAttribute("aria-selected")),G=this.hints.childNodes[this.selectedHint=M],G.className+=" "+A,G.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",G.id),this.scrollToActive(),v.signal(this.data,"select",this.data.list[this.selectedHint],G)}},scrollToActive:function(){var M=this.getSelectedHintRange(),P=this.hints.childNodes[M.from],G=this.hints.childNodes[M.to],q=this.hints.firstChild;P.offsetTop<this.hints.scrollTop?this.hints.scrollTop=P.offsetTop-q.offsetTop:G.offsetTop+G.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=G.offsetTop+G.offsetHeight-this.hints.clientHeight+q.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var M=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-M),to:Math.min(this.data.list.length-1,this.selectedHint+M)}}};function I(M,P){if(!M.somethingSelected())return P;for(var G=[],q=0;q<P.length;q++)P[q].supportsSelection&&G.push(P[q]);return G}function F(M,P,G,q){if(M.async)M(P,q,G);else{var le=M(P,G);le&&le.then?le.then(q):q(le)}}function H(M,P){var G=M.getHelpers(P,"hint"),q;if(G.length){var le=function(ge,y,z){var ee=I(ge,G);function te(ne){if(ne==ee.length)return y(null);F(ee[ne],ge,z,function(Le){Le&&Le.list.length>0?y(Le):te(ne+1)})}te(0)};return le.async=!0,le.supportsSelection=!0,le}else return(q=M.getHelper(M.getCursor(),"hintWords"))?function(ge){return v.hint.fromList(ge,{words:q})}:v.hint.anyword?function(ge,y){return v.hint.anyword(ge,y)}:function(){}}v.registerHelper("hint","auto",{resolve:H}),v.registerHelper("hint","fromList",function(M,P){var G=M.getCursor(),q=M.getTokenAt(G),le,ge=v.Pos(G.line,q.start),y=G;q.start<G.ch&&/\w/.test(q.string.charAt(G.ch-q.start-1))?le=q.string.substr(0,G.ch-q.start):(le="",ge=G);for(var z=[],ee=0;ee<P.words.length;ee++){var te=P.words[ee];te.slice(0,le.length)==le&&z.push(te)}if(z.length)return{list:z,from:ge,to:y}}),v.commands.autocomplete=v.showHint;var V={hint:v.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};v.defineOption("hintOptions",null)})})();(function(a,Ae){(function(v){v(Vr())})(function(v){var R="CodeMirror-lint-markers",A="CodeMirror-lint-line-";function c(y,z,ee){var te=document.createElement("div");te.className="CodeMirror-lint-tooltip cm-s-"+y.options.theme,te.appendChild(ee.cloneNode(!0)),y.state.lint.options.selfContain?y.getWrapperElement().appendChild(te):document.body.appendChild(te);function ne(Le){if(!te.parentNode)return v.off(document,"mousemove",ne);var ie=Math.max(0,Le.clientY-te.offsetHeight-5),ke=Math.max(0,Math.min(Le.clientX+5,te.ownerDocument.defaultView.innerWidth-te.offsetWidth));te.style.top=ie+"px",te.style.left=ke+"px"}return v.on(document,"mousemove",ne),ne(z),te.style.opacity!=null&&(te.style.opacity=1),te}function g(y){y.parentNode&&y.parentNode.removeChild(y)}function _(y){y.parentNode&&(y.style.opacity==null&&g(y),y.style.opacity=0,setTimeout(function(){g(y)},600))}function w(y,z,ee,te){var ne=c(y,z,ee);function Le(){v.off(te,"mouseout",Le),ne&&(_(ne),ne=null)}var ie=setInterval(function(){if(ne)for(var ke=te;;ke=ke.parentNode){if(ke&&ke.nodeType==11&&(ke=ke.host),ke==document.body)return;if(!ke){Le();break}}if(!ne)return clearInterval(ie)},400);v.on(te,"mouseout",Le)}function L(y,z,ee){this.marked=[],z instanceof Function&&(z={getAnnotations:z}),(!z||z===!0)&&(z={}),this.options={},this.linterOptions=z.options||{};for(var te in b)this.options[te]=b[te];for(var te in z)b.hasOwnProperty(te)?z[te]!=null&&(this.options[te]=z[te]):z.options||(this.linterOptions[te]=z[te]);this.timeout=null,this.hasGutter=ee,this.onMouseOver=function(ne){ge(y,ne)},this.waitingFor=0}var b={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function E(y){var z=y.state.lint;z.hasGutter&&y.clearGutter(R),z.options.highlightLines&&S(y);for(var ee=0;ee<z.marked.length;++ee)z.marked[ee].clear();z.marked.length=0}function S(y){y.eachLine(function(z){var ee=z.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(z.wrapClass);ee&&y.removeLineClass(z,"wrap",ee[0])})}function I(y,z,ee,te,ne){var Le=document.createElement("div"),ie=Le;return Le.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+ee,te&&(ie=Le.appendChild(document.createElement("div")),ie.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),ne!=!1&&v.on(ie,"mouseover",function(ke){w(y,ke,z,ie)}),Le}function F(y,z){return y=="error"?y:z}function H(y){for(var z=[],ee=0;ee<y.length;++ee){var te=y[ee],ne=te.from.line;(z[ne]||(z[ne]=[])).push(te)}return z}function V(y){var z=y.severity;z||(z="error");var ee=document.createElement("div");return ee.className="CodeMirror-lint-message CodeMirror-lint-message-"+z,typeof y.messageHTML<"u"?ee.innerHTML=y.messageHTML:ee.appendChild(document.createTextNode(y.message)),ee}function M(y,z){var ee=y.state.lint,te=++ee.waitingFor;function ne(){te=-1,y.off("change",ne)}y.on("change",ne),z(y.getValue(),function(Le,ie){y.off("change",ne),ee.waitingFor==te&&(ie&&Le instanceof v&&(Le=ie),y.operation(function(){G(y,Le)}))},ee.linterOptions,y)}function P(y){var z=y.state.lint;if(z){var ee=z.options,te=ee.getAnnotations||y.getHelper(v.Pos(0,0),"lint");if(te)if(ee.async||te.async)M(y,te);else{var ne=te(y.getValue(),z.linterOptions,y);if(!ne)return;ne.then?ne.then(function(Le){y.operation(function(){G(y,Le)})}):y.operation(function(){G(y,ne)})}}}function G(y,z){var ee=y.state.lint;if(ee){var te=ee.options;E(y);for(var ne=H(z),Le=0;Le<ne.length;++Le){var ie=ne[Le];if(ie){for(var ke=null,O=ee.hasGutter&&document.createDocumentFragment(),Ce=0;Ce<ie.length;++Ce){var tt=ie[Ce],Pe=tt.severity;Pe||(Pe="error"),ke=F(ke,Pe),te.formatAnnotation&&(tt=te.formatAnnotation(tt)),ee.hasGutter&&O.appendChild(V(tt)),tt.to&&ee.marked.push(y.markText(tt.from,tt.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+Pe,__annotation:tt}))}ee.hasGutter&&y.setGutterMarker(Le,R,I(y,O,ke,ie.length>1,te.tooltips)),te.highlightLines&&y.addLineClass(Le,"wrap",A+ke)}}te.onUpdateLinting&&te.onUpdateLinting(z,ne,y)}}function q(y){var z=y.state.lint;z&&(clearTimeout(z.timeout),z.timeout=setTimeout(function(){P(y)},z.options.delay))}function le(y,z,ee){for(var te=ee.target||ee.srcElement,ne=document.createDocumentFragment(),Le=0;Le<z.length;Le++){var ie=z[Le];ne.appendChild(V(ie))}w(y,ee,ne,te)}function ge(y,z){var ee=z.target||z.srcElement;if(/\bCodeMirror-lint-mark-/.test(ee.className)){for(var te=ee.getBoundingClientRect(),ne=(te.left+te.right)/2,Le=(te.top+te.bottom)/2,ie=y.findMarksAt(y.coordsChar({left:ne,top:Le},"client")),ke=[],O=0;O<ie.length;++O){var Ce=ie[O].__annotation;Ce&&ke.push(Ce)}ke.length&&le(y,ke,z)}}v.defineOption("lint",!1,function(y,z,ee){if(ee&&ee!=v.Init&&(E(y),y.state.lint.options.lintOnChange!==!1&&y.off("change",q),v.off(y.getWrapperElement(),"mouseover",y.state.lint.onMouseOver),clearTimeout(y.state.lint.timeout),delete y.state.lint),z){for(var te=y.getOption("gutters"),ne=!1,Le=0;Le<te.length;++Le)te[Le]==R&&(ne=!0);var ie=y.state.lint=new L(y,z,ne);ie.options.lintOnChange&&y.on("change",q),ie.options.tooltips!=!1&&ie.options.tooltips!="gutter"&&v.on(y.getWrapperElement(),"mouseover",ie.onMouseOver),P(y)}}),v.defineExtension("performLint",function(){P(this)})})})();(function(a,Ae){(function(v){v(Vr())})(function(v){function R(A,c){var g=A.getLine(c),_=g.search(/\S/);return _==-1||/\bcomment\b/.test(A.getTokenTypeAt(v.Pos(c,_+1)))?-1:v.countColumn(g,null,A.getOption("tabSize"))}v.registerHelper("fold","indent",function(A,c){var g=R(A,c.line);if(!(g<0)){for(var _=null,w=c.line+1,L=A.lastLine();w<=L;++w){var b=R(A,w);if(b!=-1)if(b>g)_=w;else break}if(_)return{from:v.Pos(c.line,A.getLine(c.line).length),to:v.Pos(_,A.getLine(_).length)}}})})})();(function(a,Ae){(function(v){v(Vr())})(function(v){v.registerGlobalHelper("fold","comment",function(R){return R.blockCommentStart&&R.blockCommentEnd},function(R,A){var c=R.getModeAt(A),g=c.blockCommentStart,_=c.blockCommentEnd;if(!(!g||!_)){for(var w=A.line,L=R.getLine(w),b,E=A.ch,S=0;;){var I=E<=0?-1:L.lastIndexOf(g,E-1);if(I==-1){if(S==1)return;S=1,E=L.length;continue}if(S==1&&I<A.ch)return;if(/comment/.test(R.getTokenTypeAt(v.Pos(w,I+1)))&&(I==0||L.slice(I-_.length,I)==_||!/comment/.test(R.getTokenTypeAt(v.Pos(w,I))))){b=I+g.length;break}E=I-1}var F=1,H=R.lastLine(),V,M;e:for(var P=w;P<=H;++P)for(var G=R.getLine(P),q=P==w?b:0;;){var le=G.indexOf(g,q),ge=G.indexOf(_,q);if(le<0&&(le=G.length),ge<0&&(ge=G.length),q=Math.min(le,ge),q==G.length)break;if(q==le)++F;else if(!--F){V=P,M=q;break e}++q}if(!(V==null||w==V&&M==b))return{from:v.Pos(w,b),to:v.Pos(V,M)}}})})})();(function(a,Ae){(function(v){v(Vr())})(function(v){var R=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),A=v.Pos,c={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function g(S){return S&&S.bracketRegex||/[(){}[\]]/}function _(S,I,F){var H=S.getLineHandle(I.line),V=I.ch-1,M=F&&F.afterCursor;M==null&&(M=/(^| )cm-fat-cursor($| )/.test(S.getWrapperElement().className));var P=g(F),G=!M&&V>=0&&P.test(H.text.charAt(V))&&c[H.text.charAt(V)]||P.test(H.text.charAt(V+1))&&c[H.text.charAt(++V)];if(!G)return null;var q=G.charAt(1)==">"?1:-1;if(F&&F.strict&&q>0!=(V==I.ch))return null;var le=S.getTokenTypeAt(A(I.line,V+1)),ge=w(S,A(I.line,V+(q>0?1:0)),q,le,F);return ge==null?null:{from:A(I.line,V),to:ge&&ge.pos,match:ge&&ge.ch==G.charAt(0),forward:q>0}}function w(S,I,F,H,V){for(var M=V&&V.maxScanLineLength||1e4,P=V&&V.maxScanLines||1e3,G=[],q=g(V),le=F>0?Math.min(I.line+P,S.lastLine()+1):Math.max(S.firstLine()-1,I.line-P),ge=I.line;ge!=le;ge+=F){var y=S.getLine(ge);if(y){var z=F>0?0:y.length-1,ee=F>0?y.length:-1;if(!(y.length>M))for(ge==I.line&&(z=I.ch-(F<0?1:0));z!=ee;z+=F){var te=y.charAt(z);if(q.test(te)&&(H===void 0||(S.getTokenTypeAt(A(ge,z+1))||"")==(H||""))){var ne=c[te];if(ne&&ne.charAt(1)==">"==F>0)G.push(te);else if(G.length)G.pop();else return{pos:A(ge,z),ch:te}}}}}return ge-F==(F>0?S.lastLine():S.firstLine())?!1:null}function L(S,I,F){for(var H=S.state.matchBrackets.maxHighlightLineLength||1e3,V=F&&F.highlightNonMatching,M=[],P=S.listSelections(),G=0;G<P.length;G++){var q=P[G].empty()&&_(S,P[G].head,F);if(q&&(q.match||V!==!1)&&S.getLine(q.from.line).length<=H){var le=q.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";M.push(S.markText(q.from,A(q.from.line,q.from.ch+1),{className:le})),q.to&&S.getLine(q.to.line).length<=H&&M.push(S.markText(q.to,A(q.to.line,q.to.ch+1),{className:le}))}}if(M.length){R&&S.state.focused&&S.focus();var ge=function(){S.operation(function(){for(var y=0;y<M.length;y++)M[y].clear()})};if(I)setTimeout(ge,800);else return ge}}function b(S){S.operation(function(){S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null),S.state.matchBrackets.currentlyHighlighted=L(S,!1,S.state.matchBrackets)})}function E(S){S.state.matchBrackets&&S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null)}v.defineOption("matchBrackets",!1,function(S,I,F){F&&F!=v.Init&&(S.off("cursorActivity",b),S.off("focus",b),S.off("blur",E),E(S)),I&&(S.state.matchBrackets=typeof I=="object"?I:{},S.on("cursorActivity",b),S.on("focus",b),S.on("blur",E))}),v.defineExtension("matchBrackets",function(){L(this,!0)}),v.defineExtension("findMatchingBracket",function(S,I,F){return(F||typeof I=="boolean")&&(F?(F.strict=I,I=F):I=I?{strict:!0}:null),_(this,S,I)}),v.defineExtension("scanForBracket",function(S,I,F,H){return w(this,S,I,F,H)})})})();(function(a,Ae){(function(v){v(Vr())})(function(v){v.defineOption("fullScreen",!1,function(c,g,_){_==v.Init&&(_=!1),!_!=!g&&(g?R(c):A(c))});function R(c){var g=c.getWrapperElement();c.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:g.style.width,height:g.style.height},g.style.width="",g.style.height="auto",g.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",c.refresh()}function A(c){var g=c.getWrapperElement();g.className=g.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var _=c.state.fullScreenRestore;g.style.width=_.width,g.style.height=_.height,window.scrollTo(_.scrollLeft,_.scrollTop),c.refresh()}})})();var Di=function(a){var Ae={};function v(R){if(Ae[R])return Ae[R].exports;var A=Ae[R]={i:R,l:!1,exports:{}};return a[R].call(A.exports,A,A.exports,v),A.l=!0,A.exports}return v.m=a,v.c=Ae,v.d=function(R,A,c){v.o(R,A)||Object.defineProperty(R,A,{enumerable:!0,get:c})},v.r=function(R){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})},v.t=function(R,A){if(1&A&&(R=v(R)),8&A||4&A&&typeof R=="object"&&R&&R.__esModule)return R;var c=Object.create(null);if(v.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:R}),2&A&&typeof R!="string")for(var g in R)v.d(c,g,(function(_){return R[_]}).bind(null,g));return c},v.n=function(R){var A=R&&R.__esModule?function(){return R.default}:function(){return R};return v.d(A,"a",A),A},v.o=function(R,A){return Object.prototype.hasOwnProperty.call(R,A)},v.p="",v(v.s=34)}([function(a,Ae,v){/**
@license MIT

Copyright © 2017-2018 Benoit Giannangeli
Copyright © 2017-2018 Daurnimator
Copyright © 1994–2017 Lua.org, PUC-Rio.
*/const R=v(5);a.exports.FENGARI_AUTHORS=R.FENGARI_AUTHORS,a.exports.FENGARI_COPYRIGHT=R.FENGARI_COPYRIGHT,a.exports.FENGARI_RELEASE=R.FENGARI_RELEASE,a.exports.FENGARI_VERSION=R.FENGARI_VERSION,a.exports.FENGARI_VERSION_MAJOR=R.FENGARI_VERSION_MAJOR,a.exports.FENGARI_VERSION_MINOR=R.FENGARI_VERSION_MINOR,a.exports.FENGARI_VERSION_NUM=R.FENGARI_VERSION_NUM,a.exports.FENGARI_VERSION_RELEASE=R.FENGARI_VERSION_RELEASE,a.exports.luastring_eq=R.luastring_eq,a.exports.luastring_indexOf=R.luastring_indexOf,a.exports.luastring_of=R.luastring_of,a.exports.to_jsstring=R.to_jsstring,a.exports.to_luastring=R.to_luastring,a.exports.to_uristring=R.to_uristring;const A=v(3),c=v(2),g=v(7),_=v(17);a.exports.luaconf=A,a.exports.lua=c,a.exports.lauxlib=g,a.exports.lualib=_},function(a,Ae,v){let R,A,c;if(R=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(H){let V=0,M=H.length,P=new Uint8Array(M);for(;M>V;)P[V]=H[V++];return P},typeof new Uint8Array().indexOf=="function")A=function(H,V,M){return H.indexOf(V,M)};else{let H=[].indexOf;if(H.call(new Uint8Array(1),0)!==0)throw Error("missing .indexOf");A=function(V,M,P){return H.call(V,M,P)}}c=typeof Uint8Array.of=="function"?Uint8Array.of.bind(Uint8Array):function(){return R(arguments)};const g=function(H){return H instanceof Uint8Array},_="cannot convert invalid utf8 to javascript string",w=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce(function(H,V){return H[V.charCodeAt(0)]=!0,H},{}),L={},b=function(H,V){if(typeof H!="string")throw new TypeError("to_luastring expects a javascript string");if(V){let q=L[H];if(g(q))return q}let M=H.length,P=Array(M),G=0;for(let q=0;q<M;++q){let le=H.charCodeAt(q);if(le<=127)P[G++]=le;else if(le<=2047)P[G++]=192|le>>6,P[G++]=128|63&le;else{if(le>=55296&&le<=56319&&q+1<M){let ge=H.charCodeAt(q+1);ge>=56320&&ge<=57343&&(q++,le=1024*(le-55296)+ge+9216)}le<=65535?(P[G++]=224|le>>12,P[G++]=128|le>>6&63,P[G++]=128|63&le):(P[G++]=240|le>>18,P[G++]=128|le>>12&63,P[G++]=128|le>>6&63,P[G++]=128|63&le)}}return P=R(P),V&&(L[H]=P),P};a.exports.luastring_from=R,a.exports.luastring_indexOf=A,a.exports.luastring_of=c,a.exports.is_luastring=g,a.exports.luastring_eq=function(H,V){if(H!==V){let M=H.length;if(M!==V.length)return!1;for(let P=0;P<M;P++)if(H[P]!==V[P])return!1}return!0},a.exports.to_jsstring=function(H,V,M,P){if(!g(H))throw new TypeError("to_jsstring expects a Uint8Array");M=M===void 0?H.length:Math.min(H.length,M);let G="";for(let q=V!==void 0?V:0;q<M;){let le=H[q++];if(le<128)G+=String.fromCharCode(le);else if(le<194||le>244){if(!P)throw RangeError(_);G+="�"}else if(le<=223){if(q>=M){if(!P)throw RangeError(_);G+="�";continue}let ge=H[q++];if((192&ge)!=128){if(!P)throw RangeError(_);G+="�";continue}G+=String.fromCharCode(((31&le)<<6)+(63&ge))}else if(le<=239){if(q+1>=M){if(!P)throw RangeError(_);G+="�";continue}let ge=H[q++];if((192&ge)!=128){if(!P)throw RangeError(_);G+="�";continue}let y=H[q++];if((192&y)!=128){if(!P)throw RangeError(_);G+="�";continue}let z=((15&le)<<12)+((63&ge)<<6)+(63&y);if(z<=65535)G+=String.fromCharCode(z);else{let ee=55296+((z-=65536)>>10),te=z%1024+56320;G+=String.fromCharCode(ee,te)}}else{if(q+2>=M){if(!P)throw RangeError(_);G+="�";continue}let ge=H[q++];if((192&ge)!=128){if(!P)throw RangeError(_);G+="�";continue}let y=H[q++];if((192&y)!=128){if(!P)throw RangeError(_);G+="�";continue}let z=H[q++];if((192&z)!=128){if(!P)throw RangeError(_);G+="�";continue}let ee=((7&le)<<18)+((63&ge)<<12)+((63&y)<<6)+(63&z),te=55296+((ee-=65536)>>10),ne=ee%1024+56320;G+=String.fromCharCode(te,ne)}}return G},a.exports.to_uristring=function(H){if(!g(H))throw new TypeError("to_uristring expects a Uint8Array");let V="";for(let M=0;M<H.length;M++){let P=H[M];w[P]?V+=String.fromCharCode(P):V+="%"+(P<16?"0":"")+P.toString(16)}return V},a.exports.to_luastring=b,a.exports.from_userstring=function(H){if(!g(H)){if(typeof H!="string")throw new TypeError("expects an array of bytes or javascript string");H=b(H)}return H};const E=b("\x1BLua");a.exports.LUA_SIGNATURE=E,a.exports.LUA_VERSION_MAJOR="5",a.exports.LUA_VERSION_MINOR="3",a.exports.LUA_VERSION_NUM=503,a.exports.LUA_VERSION_RELEASE="4",a.exports.LUA_VERSION="Lua 5.3",a.exports.LUA_RELEASE="Lua 5.3.4",a.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",a.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";const S={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};S.LUA_TSHRSTR=0|S.LUA_TSTRING,S.LUA_TLNGSTR=16|S.LUA_TSTRING,S.LUA_TNUMFLT=0|S.LUA_TNUMBER,S.LUA_TNUMINT=16|S.LUA_TNUMBER,S.LUA_TLCL=0|S.LUA_TFUNCTION,S.LUA_TLCF=16|S.LUA_TFUNCTION,S.LUA_TCCL=32|S.LUA_TFUNCTION;const{LUAI_MAXSTACK:I}=v(3),F=-I-1e3;a.exports.LUA_HOOKCALL=0,a.exports.LUA_HOOKCOUNT=3,a.exports.LUA_HOOKLINE=2,a.exports.LUA_HOOKRET=1,a.exports.LUA_HOOKTAILCALL=4,a.exports.LUA_MASKCALL=1,a.exports.LUA_MASKCOUNT=8,a.exports.LUA_MASKLINE=4,a.exports.LUA_MASKRET=2,a.exports.LUA_MINSTACK=20,a.exports.LUA_MULTRET=-1,a.exports.LUA_OPADD=0,a.exports.LUA_OPBAND=7,a.exports.LUA_OPBNOT=13,a.exports.LUA_OPBOR=8,a.exports.LUA_OPBXOR=9,a.exports.LUA_OPDIV=5,a.exports.LUA_OPEQ=0,a.exports.LUA_OPIDIV=6,a.exports.LUA_OPLE=2,a.exports.LUA_OPLT=1,a.exports.LUA_OPMOD=3,a.exports.LUA_OPMUL=2,a.exports.LUA_OPPOW=4,a.exports.LUA_OPSHL=10,a.exports.LUA_OPSHR=11,a.exports.LUA_OPSUB=1,a.exports.LUA_OPUNM=12,a.exports.LUA_REGISTRYINDEX=F,a.exports.LUA_RIDX_GLOBALS=2,a.exports.LUA_RIDX_LAST=2,a.exports.LUA_RIDX_MAINTHREAD=1,a.exports.constant_types=S,a.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},a.exports.lua_upvalueindex=function(H){return F-H},a.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(a,Ae,v){const R=v(1),A=v(18),c=v(11),g=v(8),_=v(12);a.exports.LUA_AUTHORS=R.LUA_AUTHORS,a.exports.LUA_COPYRIGHT=R.LUA_COPYRIGHT,a.exports.LUA_ERRERR=R.thread_status.LUA_ERRERR,a.exports.LUA_ERRGCMM=R.thread_status.LUA_ERRGCMM,a.exports.LUA_ERRMEM=R.thread_status.LUA_ERRMEM,a.exports.LUA_ERRRUN=R.thread_status.LUA_ERRRUN,a.exports.LUA_ERRSYNTAX=R.thread_status.LUA_ERRSYNTAX,a.exports.LUA_HOOKCALL=R.LUA_HOOKCALL,a.exports.LUA_HOOKCOUNT=R.LUA_HOOKCOUNT,a.exports.LUA_HOOKLINE=R.LUA_HOOKLINE,a.exports.LUA_HOOKRET=R.LUA_HOOKRET,a.exports.LUA_HOOKTAILCALL=R.LUA_HOOKTAILCALL,a.exports.LUA_MASKCALL=R.LUA_MASKCALL,a.exports.LUA_MASKCOUNT=R.LUA_MASKCOUNT,a.exports.LUA_MASKLINE=R.LUA_MASKLINE,a.exports.LUA_MASKRET=R.LUA_MASKRET,a.exports.LUA_MINSTACK=R.LUA_MINSTACK,a.exports.LUA_MULTRET=R.LUA_MULTRET,a.exports.LUA_NUMTAGS=R.constant_types.LUA_NUMTAGS,a.exports.LUA_OK=R.thread_status.LUA_OK,a.exports.LUA_OPADD=R.LUA_OPADD,a.exports.LUA_OPBAND=R.LUA_OPBAND,a.exports.LUA_OPBNOT=R.LUA_OPBNOT,a.exports.LUA_OPBOR=R.LUA_OPBOR,a.exports.LUA_OPBXOR=R.LUA_OPBXOR,a.exports.LUA_OPDIV=R.LUA_OPDIV,a.exports.LUA_OPEQ=R.LUA_OPEQ,a.exports.LUA_OPIDIV=R.LUA_OPIDIV,a.exports.LUA_OPLE=R.LUA_OPLE,a.exports.LUA_OPLT=R.LUA_OPLT,a.exports.LUA_OPMOD=R.LUA_OPMOD,a.exports.LUA_OPMUL=R.LUA_OPMUL,a.exports.LUA_OPPOW=R.LUA_OPPOW,a.exports.LUA_OPSHL=R.LUA_OPSHL,a.exports.LUA_OPSHR=R.LUA_OPSHR,a.exports.LUA_OPSUB=R.LUA_OPSUB,a.exports.LUA_OPUNM=R.LUA_OPUNM,a.exports.LUA_REGISTRYINDEX=R.LUA_REGISTRYINDEX,a.exports.LUA_RELEASE=R.LUA_RELEASE,a.exports.LUA_RIDX_GLOBALS=R.LUA_RIDX_GLOBALS,a.exports.LUA_RIDX_LAST=R.LUA_RIDX_LAST,a.exports.LUA_RIDX_MAINTHREAD=R.LUA_RIDX_MAINTHREAD,a.exports.LUA_SIGNATURE=R.LUA_SIGNATURE,a.exports.LUA_TNONE=R.constant_types.LUA_TNONE,a.exports.LUA_TNIL=R.constant_types.LUA_TNIL,a.exports.LUA_TBOOLEAN=R.constant_types.LUA_TBOOLEAN,a.exports.LUA_TLIGHTUSERDATA=R.constant_types.LUA_TLIGHTUSERDATA,a.exports.LUA_TNUMBER=R.constant_types.LUA_TNUMBER,a.exports.LUA_TSTRING=R.constant_types.LUA_TSTRING,a.exports.LUA_TTABLE=R.constant_types.LUA_TTABLE,a.exports.LUA_TFUNCTION=R.constant_types.LUA_TFUNCTION,a.exports.LUA_TUSERDATA=R.constant_types.LUA_TUSERDATA,a.exports.LUA_TTHREAD=R.constant_types.LUA_TTHREAD,a.exports.LUA_VERSION=R.LUA_VERSION,a.exports.LUA_VERSION_MAJOR=R.LUA_VERSION_MAJOR,a.exports.LUA_VERSION_MINOR=R.LUA_VERSION_MINOR,a.exports.LUA_VERSION_NUM=R.LUA_VERSION_NUM,a.exports.LUA_VERSION_RELEASE=R.LUA_VERSION_RELEASE,a.exports.LUA_YIELD=R.thread_status.LUA_YIELD,a.exports.lua_Debug=R.lua_Debug,a.exports.lua_upvalueindex=R.lua_upvalueindex,a.exports.lua_absindex=A.lua_absindex,a.exports.lua_arith=A.lua_arith,a.exports.lua_atpanic=A.lua_atpanic,a.exports.lua_atnativeerror=A.lua_atnativeerror,a.exports.lua_call=A.lua_call,a.exports.lua_callk=A.lua_callk,a.exports.lua_checkstack=A.lua_checkstack,a.exports.lua_close=_.lua_close,a.exports.lua_compare=A.lua_compare,a.exports.lua_concat=A.lua_concat,a.exports.lua_copy=A.lua_copy,a.exports.lua_createtable=A.lua_createtable,a.exports.lua_dump=A.lua_dump,a.exports.lua_error=A.lua_error,a.exports.lua_gc=A.lua_gc,a.exports.lua_getallocf=A.lua_getallocf,a.exports.lua_getextraspace=A.lua_getextraspace,a.exports.lua_getfield=A.lua_getfield,a.exports.lua_getglobal=A.lua_getglobal,a.exports.lua_gethook=c.lua_gethook,a.exports.lua_gethookcount=c.lua_gethookcount,a.exports.lua_gethookmask=c.lua_gethookmask,a.exports.lua_geti=A.lua_geti,a.exports.lua_getinfo=c.lua_getinfo,a.exports.lua_getlocal=c.lua_getlocal,a.exports.lua_getmetatable=A.lua_getmetatable,a.exports.lua_getstack=c.lua_getstack,a.exports.lua_gettable=A.lua_gettable,a.exports.lua_gettop=A.lua_gettop,a.exports.lua_getupvalue=A.lua_getupvalue,a.exports.lua_getuservalue=A.lua_getuservalue,a.exports.lua_insert=A.lua_insert,a.exports.lua_isboolean=A.lua_isboolean,a.exports.lua_iscfunction=A.lua_iscfunction,a.exports.lua_isfunction=A.lua_isfunction,a.exports.lua_isinteger=A.lua_isinteger,a.exports.lua_islightuserdata=A.lua_islightuserdata,a.exports.lua_isnil=A.lua_isnil,a.exports.lua_isnone=A.lua_isnone,a.exports.lua_isnoneornil=A.lua_isnoneornil,a.exports.lua_isnumber=A.lua_isnumber,a.exports.lua_isproxy=A.lua_isproxy,a.exports.lua_isstring=A.lua_isstring,a.exports.lua_istable=A.lua_istable,a.exports.lua_isthread=A.lua_isthread,a.exports.lua_isuserdata=A.lua_isuserdata,a.exports.lua_isyieldable=g.lua_isyieldable,a.exports.lua_len=A.lua_len,a.exports.lua_load=A.lua_load,a.exports.lua_newstate=_.lua_newstate,a.exports.lua_newtable=A.lua_newtable,a.exports.lua_newthread=_.lua_newthread,a.exports.lua_newuserdata=A.lua_newuserdata,a.exports.lua_next=A.lua_next,a.exports.lua_pcall=A.lua_pcall,a.exports.lua_pcallk=A.lua_pcallk,a.exports.lua_pop=A.lua_pop,a.exports.lua_pushboolean=A.lua_pushboolean,a.exports.lua_pushcclosure=A.lua_pushcclosure,a.exports.lua_pushcfunction=A.lua_pushcfunction,a.exports.lua_pushfstring=A.lua_pushfstring,a.exports.lua_pushglobaltable=A.lua_pushglobaltable,a.exports.lua_pushinteger=A.lua_pushinteger,a.exports.lua_pushjsclosure=A.lua_pushjsclosure,a.exports.lua_pushjsfunction=A.lua_pushjsfunction,a.exports.lua_pushlightuserdata=A.lua_pushlightuserdata,a.exports.lua_pushliteral=A.lua_pushliteral,a.exports.lua_pushlstring=A.lua_pushlstring,a.exports.lua_pushnil=A.lua_pushnil,a.exports.lua_pushnumber=A.lua_pushnumber,a.exports.lua_pushstring=A.lua_pushstring,a.exports.lua_pushthread=A.lua_pushthread,a.exports.lua_pushvalue=A.lua_pushvalue,a.exports.lua_pushvfstring=A.lua_pushvfstring,a.exports.lua_rawequal=A.lua_rawequal,a.exports.lua_rawget=A.lua_rawget,a.exports.lua_rawgeti=A.lua_rawgeti,a.exports.lua_rawgetp=A.lua_rawgetp,a.exports.lua_rawlen=A.lua_rawlen,a.exports.lua_rawset=A.lua_rawset,a.exports.lua_rawseti=A.lua_rawseti,a.exports.lua_rawsetp=A.lua_rawsetp,a.exports.lua_register=A.lua_register,a.exports.lua_remove=A.lua_remove,a.exports.lua_replace=A.lua_replace,a.exports.lua_resume=g.lua_resume,a.exports.lua_rotate=A.lua_rotate,a.exports.lua_setallof=g.lua_setallof,a.exports.lua_setfield=A.lua_setfield,a.exports.lua_setglobal=A.lua_setglobal,a.exports.lua_sethook=c.lua_sethook,a.exports.lua_seti=A.lua_seti,a.exports.lua_setlocal=c.lua_setlocal,a.exports.lua_setmetatable=A.lua_setmetatable,a.exports.lua_settable=A.lua_settable,a.exports.lua_settop=A.lua_settop,a.exports.lua_setupvalue=A.lua_setupvalue,a.exports.lua_setuservalue=A.lua_setuservalue,a.exports.lua_status=A.lua_status,a.exports.lua_stringtonumber=A.lua_stringtonumber,a.exports.lua_toboolean=A.lua_toboolean,a.exports.lua_todataview=A.lua_todataview,a.exports.lua_tointeger=A.lua_tointeger,a.exports.lua_tointegerx=A.lua_tointegerx,a.exports.lua_tojsstring=A.lua_tojsstring,a.exports.lua_tolstring=A.lua_tolstring,a.exports.lua_tonumber=A.lua_tonumber,a.exports.lua_tonumberx=A.lua_tonumberx,a.exports.lua_topointer=A.lua_topointer,a.exports.lua_toproxy=A.lua_toproxy,a.exports.lua_tostring=A.lua_tostring,a.exports.lua_tothread=A.lua_tothread,a.exports.lua_touserdata=A.lua_touserdata,a.exports.lua_type=A.lua_type,a.exports.lua_typename=A.lua_typename,a.exports.lua_upvalueid=A.lua_upvalueid,a.exports.lua_upvaluejoin=A.lua_upvaluejoin,a.exports.lua_version=A.lua_version,a.exports.lua_xmove=A.lua_xmove,a.exports.lua_yield=g.lua_yield,a.exports.lua_yieldk=g.lua_yieldk,a.exports.lua_tocfunction=A.lua_tocfunction},function(a,Ae,v){const R={},{LUA_VERSION_MAJOR:A,LUA_VERSION_MINOR:c,to_luastring:g}=v(1);a.exports.LUA_PATH_SEP=";",a.exports.LUA_PATH_MARK="?",a.exports.LUA_EXEC_DIR="!";const _=A+"."+c;a.exports.LUA_VDIR=_;{const I="/";a.exports.LUA_DIRSEP=I;const F="./lua/"+_+"/";a.exports.LUA_LDIR=F;const H=F;a.exports.LUA_JSDIR=H;const V=g(F+"?.lua;"+F+"?/init.lua;./?.lua;./?/init.lua");a.exports.LUA_PATH_DEFAULT=V;const M=g(H+"?.js;"+H+"loadall.js;./?.js");a.exports.LUA_JSPATH_DEFAULT=M}const w=R.LUA_COMPAT_FLOATSTRING||!1,L=R.LUAI_MAXSTACK||1e6,b=R.LUA_IDSIZE||59,E=R.LUAL_BUFFERSIZE||8192,S=function(I,F){for(var H=Math.min(3,Math.ceil(Math.abs(F)/1023)),V=I,M=0;M<H;M++)V*=Math.pow(2,Math.floor((F+M)/H));return V};a.exports.LUAI_MAXSTACK=L,a.exports.LUA_COMPAT_FLOATSTRING=w,a.exports.LUA_IDSIZE=b,a.exports.LUA_INTEGER_FMT="%d",a.exports.LUA_INTEGER_FRMLEN="",a.exports.LUA_MAXINTEGER=2147483647,a.exports.LUA_MININTEGER=-2147483648,a.exports.LUA_NUMBER_FMT="%.14g",a.exports.LUA_NUMBER_FRMLEN="",a.exports.LUAL_BUFFERSIZE=E,a.exports.frexp=function(I){if(I===0)return[I,0];var F=new DataView(new ArrayBuffer(8));F.setFloat64(0,I);var H=F.getUint32(0)>>>20&2047;H===0&&(F.setFloat64(0,I*Math.pow(2,64)),H=(F.getUint32(0)>>>20&2047)-64);var V=H-1022;return[S(I,-V),V]},a.exports.ldexp=S,a.exports.lua_getlocaledecpoint=function(){return 46},a.exports.lua_integer2str=function(I){return String(I)},a.exports.lua_number2str=function(I){return String(Number(I.toPrecision(14)))},a.exports.lua_numbertointeger=function(I){return I>=-2147483648&&I<2147483648&&I},a.exports.luai_apicheck=function(I,F){if(!F)throw Error(F)}},function(a,Ae,v){const{luai_apicheck:R}=v(3),A=function(c){if(!c)throw Error("assertion failed")};a.exports.lua_assert=A,a.exports.luai_apicheck=R||function(c,g){return A(g)},a.exports.api_check=function(c,g,_){return R(c,g&&_)},a.exports.LUAI_MAXCCALLS=200,a.exports.LUA_MINBUFFER=32,a.exports.luai_nummod=function(c,g,_){let w=g%_;return w*_<0&&(w+=_),w},a.exports.MAX_INT=2147483647,a.exports.MIN_INT=-2147483648},function(a,Ae,v){const R=v(1),A=`Fengari 0.1.4  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator
Based on: `+R.LUA_COPYRIGHT;a.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",a.exports.FENGARI_COPYRIGHT=A,a.exports.FENGARI_RELEASE="Fengari 0.1.4",a.exports.FENGARI_VERSION="Fengari 0.1",a.exports.FENGARI_VERSION_MAJOR="0",a.exports.FENGARI_VERSION_MINOR="1",a.exports.FENGARI_VERSION_NUM=1,a.exports.FENGARI_VERSION_RELEASE="4",a.exports.is_luastring=R.is_luastring,a.exports.luastring_eq=R.luastring_eq,a.exports.luastring_from=R.luastring_from,a.exports.luastring_indexOf=R.luastring_indexOf,a.exports.luastring_of=R.luastring_of,a.exports.to_jsstring=R.to_jsstring,a.exports.to_luastring=R.to_luastring,a.exports.to_uristring=R.to_uristring,a.exports.from_userstring=R.from_userstring},function(a,Ae,v){const{LUA_OPADD:R,LUA_OPBAND:A,LUA_OPBNOT:c,LUA_OPBOR:g,LUA_OPBXOR:_,LUA_OPDIV:w,LUA_OPIDIV:L,LUA_OPMOD:b,LUA_OPMUL:E,LUA_OPPOW:S,LUA_OPSHL:I,LUA_OPSHR:F,LUA_OPSUB:H,LUA_OPUNM:V,constant_types:{LUA_NUMTAGS:M,LUA_TBOOLEAN:P,LUA_TCCL:G,LUA_TFUNCTION:q,LUA_TLCF:le,LUA_TLCL:ge,LUA_TLIGHTUSERDATA:y,LUA_TLNGSTR:z,LUA_TNIL:ee,LUA_TNUMBER:te,LUA_TNUMFLT:ne,LUA_TNUMINT:Le,LUA_TSHRSTR:ie,LUA_TSTRING:ke,LUA_TTABLE:O,LUA_TTHREAD:Ce,LUA_TUSERDATA:tt},from_userstring:Pe,luastring_indexOf:at,luastring_of:re,to_jsstring:fe,to_luastring:_e}=v(1),{lisdigit:Ye,lisprint:Qe,lisspace:vt,lisxdigit:et}=v(22),rt=v(11),ct=v(8),he=v(12),{luaS_bless:ye,luaS_new:De}=v(10),Se=v(9),{LUA_COMPAT_FLOATSTRING:lt,ldexp:xt,lua_integer2str:yt,lua_number2str:nt}=v(3),be=v(15),{MAX_INT:Ge,luai_nummod:J,lua_assert:d}=v(4),D=v(14),x=M,Y=M+1;class Q{constructor(u,N){this.type=u,this.value=N}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(u){return this.type===u}checktype(u){return this.ttnov()===u}ttisnumber(){return this.checktype(te)}ttisfloat(){return this.checktag(ne)}ttisinteger(){return this.checktag(Le)}ttisnil(){return this.checktag(ee)}ttisboolean(){return this.checktag(P)}ttislightuserdata(){return this.checktag(y)}ttisstring(){return this.checktype(ke)}ttisshrstring(){return this.checktag(ie)}ttislngstring(){return this.checktag(z)}ttistable(){return this.checktag(O)}ttisfunction(){return this.checktype(q)}ttisclosure(){return(31&this.type)===q}ttisCclosure(){return this.checktag(G)}ttisLclosure(){return this.checktag(ge)}ttislcf(){return this.checktag(le)}ttisfulluserdata(){return this.checktag(tt)}ttisthread(){return this.checktag(Ce)}ttisdeadkey(){return this.checktag(Y)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&this.value===!1}setfltvalue(u){this.type=ne,this.value=u}chgfltvalue(u){d(this.type==ne),this.value=u}setivalue(u){this.type=Le,this.value=u}chgivalue(u){d(this.type==Le),this.value=u}setnilvalue(){this.type=ee,this.value=null}setfvalue(u){this.type=le,this.value=u}setpvalue(u){this.type=y,this.value=u}setbvalue(u){this.type=P,this.value=u}setsvalue(u){this.type=z,this.value=u}setuvalue(u){this.type=tt,this.value=u}setthvalue(u){this.type=Ce,this.value=u}setclLvalue(u){this.type=ge,this.value=u}setclCvalue(u){this.type=G,this.value=u}sethvalue(u){this.type=O,this.value=u}setdeadvalue(){this.type=Y,this.value=null}setfrom(u){this.type=u.type,this.value=u.value}tsvalue(){return d(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(u,N){return fe(this.svalue(),u,N,!0)}}const ve=function(o,u,N){o.stack[u].setsvalue(N)},Ie=new Q(ee,null);Object.freeze(Ie),a.exports.luaO_nilobject=Ie;class Fe{constructor(u,N){this.id=u.l_G.id_counter++,this.p=null,this.nupvalues=N,this.upvals=new Array(N)}}class it{constructor(u,N,h){for(this.id=u.l_G.id_counter++,this.f=N,this.nupvalues=h,this.upvalue=new Array(h);h--;)this.upvalue[h]=new Q(ee,null)}}class Nt{constructor(u,N){this.id=u.l_G.id_counter++,this.metatable=null,this.uservalue=new Q(ee,null),this.len=N,this.data=Object.create(null)}}const wt=_e("..."),jt=_e('[string "'),W=_e('"]'),qe=function(o){return Ye(o)?o-48:(223&o)-55},Ze=function(o,u){let N=1;if(d(u<=1114111),u<128)o[7]=u;else{let h=63;do o[8-N++]=128|63&u,u>>=6,h>>=1;while(u>h);o[8-N]=~h<<1|u}return N},Je=function(o,u){let N=u==="x"?function(h){let T,Z=0,U=0,xe=0,ot=0,_t=0,Vt=!1;for(;vt(h[Z]);)Z++;if(((T=h[Z]===45)||h[Z]===43)&&Z++,h[Z]!==48||h[Z+1]!==120&&h[Z+1]!==88)return null;for(Z+=2;;Z++)if(h[Z]===46){if(Vt)break;Vt=!0}else{if(!et(h[Z]))break;xe===0&&h[Z]===48?ot++:++xe<=30?U=16*U+qe(h[Z]):_t++,Vt&&_t--}if(ot+xe===0)return null;if(_t*=4,h[Z]===112||h[Z]===80){let Wt,Te=0;if(((Wt=h[++Z]===45)||h[Z]===43)&&Z++,!Ye(h[Z]))return null;for(;Ye(h[Z]);)Te=10*Te+h[Z++]-48;Wt&&(Te=-Te),_t+=Te}return T&&(U=-U),{n:xt(U,_t),i:Z}}(o):function(h){try{h=fe(h)}catch{return null}let T=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(h);if(!T)return null;let Z=parseFloat(T[0]);return isNaN(Z)?null:{n:Z,i:T[0].length}}(o);if(N===null)return null;for(;vt(o[N.i]);)N.i++;return N.i===o.length||o[N.i]===0?N:null},We=[46,120,88,110,78],we={46:".",120:"x",88:"x",110:"n",78:"n"},dt=Math.floor(Ge/10),ht=Ge%10,Dt=function(o,u){let N;if(u.ttisinteger())N=_e(yt(u.value));else{let h=nt(u.value);!lt&&/^[-0123456789]+$/.test(h)&&(h+=".0"),N=_e(h)}u.setsvalue(ye(o,N))},Bt=function(o,u){ct.luaD_inctop(o),ve(o,o.top-1,De(o,u))},qt=function(o,u,N){let h,T=0,Z=0,U=0;for(;(h=at(u,37,Z))!=-1;){switch(Bt(o,u.subarray(Z,h)),u[h+1]){case 115:{let xe=N[U++];if(xe===null)xe=_e("(null)",!0);else{xe=Pe(xe);let ot=at(xe,0);ot!==-1&&(xe=xe.subarray(0,ot))}Bt(o,xe);break}case 99:{let xe=N[U++];Qe(xe)?Bt(o,re(xe)):bt(o,_e("<\\%d>",!0),xe);break}case 100:case 73:ct.luaD_inctop(o),o.stack[o.top-1].setivalue(N[U++]),Dt(o,o.stack[o.top-1]);break;case 102:ct.luaD_inctop(o),o.stack[o.top-1].setfltvalue(N[U++]),Dt(o,o.stack[o.top-1]);break;case 112:{let xe=N[U++];if(xe instanceof he.lua_State||xe instanceof Se.Table||xe instanceof Nt||xe instanceof Fe||xe instanceof it)Bt(o,_e("0x"+xe.id.toString(16)));else switch(typeof xe){case"undefined":Bt(o,_e("undefined"));break;case"number":Bt(o,_e("Number("+xe+")"));break;case"string":Bt(o,_e("String("+JSON.stringify(xe)+")"));break;case"boolean":Bt(o,_e(xe?"Boolean(true)":"Boolean(false)"));break;case"object":if(xe===null){Bt(o,_e("null"));break}case"function":{let ot=o.l_G.ids.get(xe);ot||(ot=o.l_G.id_counter++,o.l_G.ids.set(xe,ot)),Bt(o,_e("0x"+ot.toString(16)));break}default:Bt(o,_e("<id NYI>"))}break}case 85:{let xe=new Uint8Array(8),ot=Ze(xe,N[U++]);Bt(o,xe.subarray(8-ot));break}case 37:Bt(o,_e("%",!0));break;default:rt.luaG_runerror(o,_e("invalid option '%%%c' to 'lua_pushfstring'"),u[h+1])}T+=2,Z=h+2}return ct.luaD_checkstack(o,1),Bt(o,u.subarray(Z)),T>0&&be.luaV_concat(o,T+1),o.stack[o.top-1].svalue()},bt=function(o,u,...N){return qt(o,u,N)},Ot=function(o,u,N,h){switch(u){case R:return N+h|0;case H:return N-h|0;case E:return be.luaV_imul(N,h);case b:return be.luaV_mod(o,N,h);case L:return be.luaV_div(o,N,h);case A:return N&h;case g:return N|h;case _:return N^h;case I:return be.luaV_shiftl(N,h);case F:return be.luaV_shiftl(N,-h);case V:return 0-N|0;case c:return-1^N;default:d(0)}},Ft=function(o,u,N,h){switch(u){case R:return N+h;case H:return N-h;case E:return N*h;case w:return N/h;case S:return Math.pow(N,h);case L:return Math.floor(N/h);case V:return-N;case b:return J(o,N,h);default:d(0)}};a.exports.CClosure=it,a.exports.LClosure=Fe,a.exports.LUA_TDEADKEY=Y,a.exports.LUA_TPROTO=x,a.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},a.exports.TValue=Q,a.exports.Udata=Nt,a.exports.UTF8BUFFSZ=8,a.exports.luaO_arith=function(o,u,N,h,T){let Z=typeof T=="number"?o.stack[T]:T;switch(u){case A:case g:case _:case I:case F:case c:{let U,xe;if((U=be.tointeger(N))!==!1&&(xe=be.tointeger(h))!==!1)return void Z.setivalue(Ot(o,u,U,xe));break}case w:case S:{let U,xe;if((U=be.tonumber(N))!==!1&&(xe=be.tonumber(h))!==!1)return void Z.setfltvalue(Ft(o,u,U,xe));break}default:{let U,xe;if(N.ttisinteger()&&h.ttisinteger())return void Z.setivalue(Ot(o,u,N.value,h.value));if((U=be.tonumber(N))!==!1&&(xe=be.tonumber(h))!==!1)return void Z.setfltvalue(Ft(o,u,U,xe));break}}d(o!==null),D.luaT_trybinTM(o,N,h,T,u-R+D.TMS.TM_ADD)},a.exports.luaO_chunkid=function(o,u){let N,h=o.length;if(o[0]===61)h<u?(N=new Uint8Array(h-1)).set(o.subarray(1)):(N=new Uint8Array(u)).set(o.subarray(1,u+1));else if(o[0]===64)h<=u?(N=new Uint8Array(h-1)).set(o.subarray(1)):((N=new Uint8Array(u)).set(wt),u-=wt.length,N.set(o.subarray(h-u),wt.length));else{N=new Uint8Array(u);let T=at(o,10);N.set(jt);let Z=jt.length;h<(u-=jt.length+wt.length+W.length)&&T===-1?(N.set(o,Z),Z+=o.length):(T!==-1&&(h=T),h>u&&(h=u),N.set(o.subarray(0,h),Z),Z+=h,N.set(wt,Z),Z+=wt.length),N.set(W,Z),Z+=W.length,N=N.subarray(0,Z)}return N},a.exports.luaO_hexavalue=qe,a.exports.luaO_int2fb=function(o){let u=0;if(o<8)return o;for(;o>=128;)o=o+15>>4,u+=4;for(;o>=16;)o=o+1>>1,u++;return u+1<<3|o-8},a.exports.luaO_pushfstring=bt,a.exports.luaO_pushvfstring=qt,a.exports.luaO_str2num=function(o,u){let N=function(h){let T,Z=0,U=0,xe=!0;for(;vt(h[Z]);)Z++;if(((T=h[Z]===45)||h[Z]===43)&&Z++,h[Z]!==48||h[Z+1]!==120&&h[Z+1]!==88)for(;Z<h.length&&Ye(h[Z]);Z++){let ot=h[Z]-48;if(U>=dt&&(U>dt||ot>ht+T))return null;U=10*U+ot|0,xe=!1}else for(Z+=2;Z<h.length&&et(h[Z]);Z++)U=16*U+qe(h[Z])|0,xe=!1;for(;Z<h.length&&vt(h[Z]);)Z++;return xe||Z!==h.length&&h[Z]!==0?null:{n:0|(T?-U:U),i:Z}}(o);return N!==null?(u.setivalue(N.n),N.i+1):(N=function(h){let T=h.length,Z=0;for(let xe=0;xe<T;xe++){let ot=h[xe];if(We.indexOf(ot)!==-1){Z=ot;break}}let U=we[Z];return U==="n"?null:Je(h,U)}(o))!==null?(u.setfltvalue(N.n),N.i+1):0},a.exports.luaO_tostring=Dt,a.exports.luaO_utf8esc=Ze,a.exports.numarith=Ft,a.exports.pushobj2s=function(o,u){o.stack[o.top++]=new Q(u.type,u.value)},a.exports.pushsvalue2s=function(o,u){o.stack[o.top++]=new Q(z,u)},a.exports.setobjs2s=function(o,u,N){o.stack[u].setfrom(o.stack[N])},a.exports.setobj2s=function(o,u,N){o.stack[u].setfrom(N)},a.exports.setsvalue2s=ve},function(a,Ae,v){const{LUAL_BUFFERSIZE:R}=v(3),{LUA_ERRERR:A,LUA_MULTRET:c,LUA_REGISTRYINDEX:g,LUA_SIGNATURE:_,LUA_TBOOLEAN:w,LUA_TLIGHTUSERDATA:L,LUA_TNIL:b,LUA_TNONE:E,LUA_TNUMBER:S,LUA_TSTRING:I,LUA_TTABLE:F,LUA_VERSION_NUM:H,lua_Debug:V,lua_absindex:M,lua_atpanic:P,lua_call:G,lua_checkstack:q,lua_concat:le,lua_copy:ge,lua_createtable:y,lua_error:z,lua_getfield:ee,lua_getinfo:te,lua_getmetatable:ne,lua_getstack:Le,lua_gettop:ie,lua_insert:ke,lua_isinteger:O,lua_isnil:Ce,lua_isnumber:tt,lua_isstring:Pe,lua_istable:at,lua_len:re,lua_load:fe,lua_newstate:_e,lua_newtable:Ye,lua_next:Qe,lua_pcall:vt,lua_pop:et,lua_pushboolean:rt,lua_pushcclosure:ct,lua_pushcfunction:he,lua_pushfstring:ye,lua_pushinteger:De,lua_pushliteral:Se,lua_pushlstring:lt,lua_pushnil:xt,lua_pushstring:yt,lua_pushvalue:nt,lua_pushvfstring:be,lua_rawequal:Ge,lua_rawget:J,lua_rawgeti:d,lua_rawlen:D,lua_rawseti:x,lua_remove:Y,lua_setfield:Q,lua_setglobal:ve,lua_setmetatable:Ie,lua_settop:Fe,lua_toboolean:it,lua_tointeger:Nt,lua_tointegerx:wt,lua_tojsstring:jt,lua_tolstring:W,lua_tonumber:qe,lua_tonumberx:Ze,lua_topointer:Je,lua_tostring:We,lua_touserdata:we,lua_type:dt,lua_typename:ht,lua_version:Dt}=v(2),{from_userstring:Bt,luastring_eq:qt,to_luastring:bt,to_uristring:Ot}=v(5),Ft=A+1,o=bt("_LOADED"),u=bt("_PRELOAD"),N=bt("FILE*"),h=bt("__name"),T=bt("__tostring"),Z=new Uint8Array(0);class U{constructor(){this.L=null,this.b=Z,this.n=0}}const xe=function(K,ue,je){if(je===0||!at(K,-1))return 0;for(xt(K);Qe(K,-2);){if(dt(K,-2)===I){if(Ge(K,ue,-1))return et(K,1),1;if(xe(K,ue,je-1))return Y(K,-2),Se(K,"."),ke(K,-2),le(K,3),1}et(K,1)}return 0},ot=function(K,ue){let je=ie(K);if(te(K,bt("f"),ue),ee(K,g,o),xe(K,je+1,2)){let At=We(K,-1);return At[0]===95&&At[1]===71&&At[2]===46&&(yt(K,At.subarray(3)),Y(K,-2)),ge(K,-1,je+1),et(K,2),1}return Fe(K,je),0},_t=function(K,ue){ot(K,ue)?(ye(K,bt("function '%s'"),We(K,-1)),Y(K,-2)):ue.namewhat.length!==0?ye(K,bt("%s '%s'"),ue.namewhat,ue.name):ue.what&&ue.what[0]===109?Se(K,"main chunk"):ue.what&&ue.what[0]===76?ye(K,bt("function <%s:%d>"),ue.short_src,ue.linedefined):Se(K,"?")},Vt=function(K){let ue="PANIC: unprotected error in call to Lua API ("+jt(K,-1)+")";throw new Error(ue)},Wt=function(K,ue,je){let At=new V;return Le(K,0,At)?(te(K,bt("n"),At),qt(At.namewhat,bt("method"))&&--ue===0?ae(K,bt("calling '%s' on bad self (%s)"),At.name,je):(At.name===null&&(At.name=ot(K,At)?We(K,-1):bt("?")),ae(K,bt("bad argument #%d to '%s' (%s)"),ue,At.name,je))):ae(K,bt("bad argument #%d (%s)"),ue,je)},Te=function(K,ue,je){let At;At=se(K,ue,h)===I?We(K,-1):dt(K,ue)===L?bt("light userdata",!0):Ut(K,ue);let Jt=ye(K,bt("%s expected, got %s"),je,At);return Wt(K,ue,Jt)},ft=function(K,ue){let je=new V;Le(K,ue,je)&&(te(K,bt("Sl",!0),je),je.currentline>0)?ye(K,bt("%s:%d: "),je.short_src,je.currentline):yt(K,bt(""))},ae=function(K,ue,...je){return ft(K,1),be(K,ue,je),le(K,2),z(K)},ze=function(K,ue,je,At){if(ue)return rt(K,1),1;{let Jt,or;return xt(K),At?(Jt=At.message,or=-At.errno):(Jt="Success",or=0),je?ye(K,bt("%s: %s"),je,bt(Jt)):yt(K,bt(Jt)),De(K,or),3}},Ee=function(K,ue){return ee(K,g,ue)},gt=function(K,ue,je){let At=we(K,ue);return At!==null&&ne(K,ue)?(Ee(K,je),Ge(K,-1,-2)||(At=null),et(K,2),At):null},Rt=function(K,ue,je){Te(K,ue,ht(K,je))},Ut=function(K,ue){return ht(K,dt(K,ue))},Ct=function(K,ue){let je=W(K,ue);return je!=null||Rt(K,ue,I),je},Yt=Ct,ur=function(K,ue,je){return dt(K,ue)<=0?je===null?null:Bt(je):Ct(K,ue)},Ht=ur,$t=function(K,ue){let je=Ze(K,ue);return je===!1&&Rt(K,ue,S),je},Zt=function(K,ue){let je=wt(K,ue);return je===!1&&function(At,Jt){tt(At,Jt)?Wt(At,Jt,bt("number has no integer representation",!0)):Rt(At,Jt,S)}(K,ue),je},ir=function(K,ue){let je=K.n+ue;if(K.b.length<je){let At=Math.max(2*K.b.length,je),Jt=new Uint8Array(At);Jt.set(K.b),K.b=Jt}return K.b.subarray(K.n,je)},nr=function(K,ue){ue.L=K,ue.b=Z},sr=function(K,ue,je){je>0&&(ue=Bt(ue),ir(K,je).set(ue.subarray(0,je)),dr(K,je))},Mt=function(K,ue){ue=Bt(ue),sr(K,ue,ue.length)},pr=function(K){lt(K.L,K.b,K.n),K.n=0,K.b=Z},dr=function(K,ue){K.n+=ue},X=function(K,ue,je,At){return dt(K,je)<=0?At:ue(K,je)},f=function(K,ue){let je=ue.string;return ue.string=null,je},B=function(K,ue,je,At,Jt){return fe(K,f,{string:ue},At,Jt)},pe=function(K,ue,je,At){return B(K,ue,0,At,null)},Re=function(K,ue){return pe(K,ue,ue.length,ue)},se=function(K,ue,je){if(ne(K,ue)){yt(K,je);let At=J(K,-2);return At===b?et(K,2):Y(K,-2),At}return b},Oe=function(K,ue,je){return ue=M(K,ue),se(K,ue,je)!==b&&(nt(K,ue),G(K,1,1),!0)},Xe=bt("%I"),pt=bt("%f"),kt=function(K,ue,je){var At=je>>>0,Jt=ue.length,or=K.length+1-Jt;e:for(;At<or;At++){for(let xr=0;xr<Jt;xr++)if(K[At+xr]!==ue[xr])continue e;return At}return-1},k=function(K,ue,je){return ee(K,ue,je)===F||(et(K,1),ue=M(K,ue),Ye(K),nt(K,-1),Q(K,ue,je),!1)},de=function(K,ue,je){$(K,je,bt("too many upvalues",!0));for(let At in ue){for(let Jt=0;Jt<je;Jt++)nt(K,-je);ct(K,ue[At],je),Q(K,-(je+2),bt(At))}et(K,je)},$=function(K,ue,je){q(K,ue)||(je?ae(K,bt("stack overflow (%s)"),je):ae(K,bt("stack overflow",!0)))},Be=function(K,ue,je,At){let Jt=At.message,or=We(K,je).subarray(1);return ye(K,bt("cannot %s %s: %s"),bt(ue),or,bt(Jt)),Y(K,je),Ft};let Me;const Ne=[239,187,191],St=function(K){let ue=function(je){let At;je.n=0;let Jt=0;do{if((At=Me(je))===null||At!==Ne[Jt])return At;Jt++,je.buff[je.n++]=At}while(Jt<Ne.length);return je.n=0,Me(je)}(K);if(ue===35){do ue=Me(K);while(ue&&ue!==10);return{skipped:!0,c:Me(K)}}return{skipped:!1,c:ue}};let Gt;{class K{constructor(){this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0}}const ue=function(je,At){let Jt=At;if(Jt.f!==null&&Jt.n>0){let xr=Jt.n;return Jt.n=0,Jt.f=Jt.f.subarray(Jt.pos),Jt.buff.subarray(0,xr)}let or=Jt.f;return Jt.f=null,or};Me=function(je){return je.pos<je.f.length?je.f[je.pos++]:null},Gt=function(je,At,Jt){let or=new K,xr=ie(je)+1;if(At===null)throw new Error("Can't read stdin in the browser");{ye(je,bt("@%s"),At);let Ar=Ot(At),gr=new XMLHttpRequest;if(gr.open("GET",Ar,!1),typeof window>"u"&&(gr.responseType="arraybuffer"),gr.send(),!(gr.status>=200&&gr.status<=299))return or.err=gr.status,Be(je,"open",xr,{message:`${gr.status}: ${gr.statusText}`});typeof gr.response=="string"?or.f=bt(gr.response):or.f=new Uint8Array(gr.response)}let rn=St(or);rn.c===_[0]&&At||rn.skipped&&(or.buff[or.n++]=10),rn.c!==null&&(or.buff[or.n++]=rn.c);let sn=fe(je,ue,or,We(je,-1),Jt),nn=or.err;return nn?(Fe(je,xr),Be(je,"read",xr,nn)):(Y(je,xr),sn)}}const Xt=function(K,ue){return Gt(K,ue,null)},tr=function(K,ue,je){let At=Dt(K);je!=72&&ae(K,bt("core and library have incompatible numeric types")),At!=Dt(null)?ae(K,bt("multiple Lua VMs detected")):At!==ue&&ae(K,bt("version mismatch: app. needs %f, Lua core provides %f"),ue,At)};a.exports.LUA_ERRFILE=Ft,a.exports.LUA_FILEHANDLE=N,a.exports.LUA_LOADED_TABLE=o,a.exports.LUA_NOREF=-2,a.exports.LUA_PRELOAD_TABLE=u,a.exports.LUA_REFNIL=-1,a.exports.luaL_Buffer=U,a.exports.luaL_addchar=function(K,ue){ir(K,1),K.b[K.n++]=ue},a.exports.luaL_addlstring=sr,a.exports.luaL_addsize=dr,a.exports.luaL_addstring=Mt,a.exports.luaL_addvalue=function(K){let ue=K.L,je=We(ue,-1);sr(K,je,je.length),et(ue,1)},a.exports.luaL_argcheck=function(K,ue,je,At){ue||Wt(K,je,At)},a.exports.luaL_argerror=Wt,a.exports.luaL_buffinit=nr,a.exports.luaL_buffinitsize=function(K,ue,je){return nr(K,ue),ir(ue,je)},a.exports.luaL_callmeta=Oe,a.exports.luaL_checkany=function(K,ue){dt(K,ue)===E&&Wt(K,ue,bt("value expected",!0))},a.exports.luaL_checkinteger=Zt,a.exports.luaL_checklstring=Ct,a.exports.luaL_checknumber=$t,a.exports.luaL_checkoption=function(K,ue,je,At){let Jt=je!==null?Ht(K,ue,je):Yt(K,ue);for(let or=0;At[or];or++)if(qt(At[or],Jt))return or;return Wt(K,ue,ye(K,bt("invalid option '%s'"),Jt))},a.exports.luaL_checkstack=$,a.exports.luaL_checkstring=Yt,a.exports.luaL_checktype=function(K,ue,je){dt(K,ue)!==je&&Rt(K,ue,je)},a.exports.luaL_checkudata=function(K,ue,je){let At=gt(K,ue,je);return At===null&&Te(K,ue,je),At},a.exports.luaL_checkversion=function(K){tr(K,H,72)},a.exports.luaL_checkversion_=tr,a.exports.luaL_dofile=function(K,ue){return Xt(K,ue)||vt(K,0,c,0)},a.exports.luaL_dostring=function(K,ue){return Re(K,ue)||vt(K,0,c,0)},a.exports.luaL_error=ae,a.exports.luaL_execresult=function(K,ue){let je,At;if(ue===null)return rt(K,1),Se(K,"exit"),De(K,0),3;if(ue.status)je="exit",At=ue.status;else{if(!ue.signal)return ze(K,0,null,ue);je="signal",At=ue.signal}return xt(K),Se(K,je),De(K,At),3},a.exports.luaL_fileresult=ze,a.exports.luaL_getmetafield=se,a.exports.luaL_getmetatable=Ee,a.exports.luaL_getsubtable=k,a.exports.luaL_gsub=function(K,ue,je,At){let Jt,or=new U;for(nr(K,or);(Jt=kt(ue,je))>=0;)sr(or,ue,Jt),Mt(or,At),ue=ue.subarray(Jt+je.length);return Mt(or,ue),pr(or),We(K,-1)},a.exports.luaL_len=function(K,ue){re(K,ue);let je=wt(K,-1);return je===!1&&ae(K,bt("object length is not an integer",!0)),et(K,1),je},a.exports.luaL_loadbuffer=pe,a.exports.luaL_loadbufferx=B,a.exports.luaL_loadfile=Xt,a.exports.luaL_loadfilex=Gt,a.exports.luaL_loadstring=Re,a.exports.luaL_newlib=function(K,ue){y(K),de(K,ue,0)},a.exports.luaL_newlibtable=function(K){y(K)},a.exports.luaL_newmetatable=function(K,ue){return Ee(K,ue)!==b?0:(et(K,1),y(K,0,2),yt(K,ue),Q(K,-2,h),nt(K,-1),Q(K,g,ue),1)},a.exports.luaL_newstate=function(){let K=_e();return K&&P(K,Vt),K},a.exports.luaL_opt=X,a.exports.luaL_optinteger=function(K,ue,je){return X(K,Zt,ue,je)},a.exports.luaL_optlstring=ur,a.exports.luaL_optnumber=function(K,ue,je){return X(K,$t,ue,je)},a.exports.luaL_optstring=Ht,a.exports.luaL_prepbuffer=function(K){return ir(K,R)},a.exports.luaL_prepbuffsize=ir,a.exports.luaL_pushresult=pr,a.exports.luaL_pushresultsize=function(K,ue){dr(K,ue),pr(K)},a.exports.luaL_ref=function(K,ue){let je;return Ce(K,-1)?(et(K,1),-1):(ue=M(K,ue),d(K,ue,0),je=Nt(K,-1),et(K,1),je!==0?(d(K,ue,je),x(K,ue,0)):je=D(K,ue)+1,x(K,ue,je),je)},a.exports.luaL_requiref=function(K,ue,je,At){k(K,g,o),ee(K,-1,ue),it(K,-1)||(et(K,1),he(K,je),yt(K,ue),G(K,1,1),nt(K,-1),Q(K,-3,ue)),Y(K,-2),At&&(nt(K,-1),ve(K,ue))},a.exports.luaL_setfuncs=de,a.exports.luaL_setmetatable=function(K,ue){Ee(K,ue),Ie(K,-2)},a.exports.luaL_testudata=gt,a.exports.luaL_tolstring=function(K,ue){if(Oe(K,ue,T))Pe(K,-1)||ae(K,bt("'__tostring' must return a string"));else switch(dt(K,ue)){case S:O(K,ue)?ye(K,Xe,Nt(K,ue)):ye(K,pt,qe(K,ue));break;case I:nt(K,ue);break;case w:Se(K,it(K,ue)?"true":"false");break;case b:Se(K,"nil");break;default:{let je=se(K,ue,h),At=je===I?We(K,-1):Ut(K,ue);ye(K,bt("%s: %p"),At,Je(K,ue)),je!==b&&Y(K,-2);break}}return W(K,-1)},a.exports.luaL_traceback=function(K,ue,je,At){let Jt=new V,or=ie(K),xr=function(sn){let nn=new V,Ar=1,gr=1;for(;Le(sn,gr,nn);)Ar=gr,gr*=2;for(;Ar<gr;){let Jr=Math.floor((Ar+gr)/2);Le(sn,Jr,nn)?Ar=Jr+1:gr=Jr}return gr-1}(ue),rn=xr-At>21?10:-1;for(je&&ye(K,bt(`%s
`),je),$(K,10,null),Se(K,"stack traceback:");Le(ue,At++,Jt);)rn--==0?(Se(K,`
	...`),At=xr-11+1):(te(ue,bt("Slnt",!0),Jt),ye(K,bt(`
	%s:`),Jt.short_src),Jt.currentline>0&&Se(K,`${Jt.currentline}:`),Se(K," in "),_t(K,Jt),Jt.istailcall&&Se(K,`
	(...tail calls..)`),le(K,ie(K)-or));le(K,ie(K)-or)},a.exports.luaL_typename=Ut,a.exports.luaL_unref=function(K,ue,je){je>=0&&(ue=M(K,ue),d(K,ue,0),x(K,ue,je),De(K,je),x(K,ue,0))},a.exports.luaL_where=ft,a.exports.lua_writestringerror=function(){for(let K=0;K<arguments.length;K++){let ue=arguments[K];do{let je=/([^\n]*)\n?([\d\D]*)/.exec(ue);console.error(je[1]),ue=je[2]}while(ue!=="")}}},function(a,Ae,v){const{LUA_HOOKCALL:R,LUA_HOOKRET:A,LUA_HOOKTAILCALL:c,LUA_MASKCALL:g,LUA_MASKLINE:_,LUA_MASKRET:w,LUA_MINSTACK:L,LUA_MULTRET:b,LUA_SIGNATURE:E,constant_types:{LUA_TCCL:S,LUA_TLCF:I,LUA_TLCL:F,LUA_TNIL:H},thread_status:{LUA_ERRMEM:V,LUA_ERRERR:M,LUA_ERRRUN:P,LUA_ERRSYNTAX:G,LUA_OK:q,LUA_YIELD:le},lua_Debug:ge,luastring_indexOf:y,to_luastring:z}=v(1),ee=v(18),te=v(11),ne=v(13),{api_check:Le,lua_assert:ie,LUAI_MAXCCALLS:ke}=v(4),O=v(6),Ce=v(16),tt=v(23),Pe=v(12),{luaS_newliteral:at}=v(10),re=v(14),{LUAI_MAXSTACK:fe}=v(3),_e=v(36),Ye=v(15),{MBuffer:Qe}=v(19),vt=function(W,qe){if(W.top<qe)for(;W.top<qe;)W.stack[W.top++]=new O.TValue(H,null);else for(;W.top>qe;)delete W.stack[--W.top]},et=function(W,qe,Ze){let Je=W.top;for(;W.top<Ze+1;)W.stack[W.top++]=new O.TValue(H,null);switch(qe){case V:O.setsvalue2s(W,Ze,at(W,"not enough memory"));break;case M:O.setsvalue2s(W,Ze,at(W,"error in error handling"));break;default:O.setobjs2s(W,Ze,Je-1)}for(;W.top>Ze+1;)delete W.stack[--W.top]},rt=fe+200,ct=function(W,qe){ie(qe<=fe||qe==rt),ie(W.stack_last==W.stack.length-Pe.EXTRA_STACK),W.stack.length=qe,W.stack_last=qe-Pe.EXTRA_STACK},he=function(W,qe){let Ze=W.stack.length;if(Ze>fe)d(W,M);else{let Je=W.top+qe+Pe.EXTRA_STACK,We=2*Ze;We>fe&&(We=fe),We<Je&&(We=Je),We>fe?(ct(W,rt),te.luaG_runerror(W,z("stack overflow",!0))):ct(W,We)}},ye=function(W,qe){W.stack_last-W.top<=qe&&he(W,qe)},De=function(W){let qe=function(Je){let We=Je.top;for(let we=Je.ci;we!==null;we=we.previous)We<we.top&&(We=we.top);return ie(We<=Je.stack_last),We+1}(W),Ze=qe+Math.floor(qe/8)+2*Pe.EXTRA_STACK;Ze>fe&&(Ze=fe),W.stack.length>fe&&Pe.luaE_freeCI(W),qe<=fe-Pe.EXTRA_STACK&&Ze<W.stack.length&&ct(W,Ze)},Se=function(W,qe,Ze){let Je=W.stack[qe];switch(Je.type){case S:case I:{let We=Je.type===S?Je.value.f:Je.value;ye(W,L);let we=Pe.luaE_extendCI(W);we.funcOff=qe,we.nresults=Ze,we.func=Je,we.top=W.top+L,ie(we.top<=W.stack_last),we.callstatus=0,W.hookmask&g&&yt(W,R,-1);let dt=We(W);if(typeof dt!="number"||dt<0||(0|dt)!==dt)throw Error("invalid return value from JS function (expected integer)");return ee.api_checknelems(W,dt),lt(W,we,W.top-dt,dt),!0}case F:{let We,we=Je.value.p,dt=W.top-qe-1,ht=we.maxstacksize;if(ye(W,ht),we.is_vararg)We=be(W,we,dt);else{for(;dt<we.numparams;dt++)W.stack[W.top++]=new O.TValue(H,null);We=qe+1}let Dt=Pe.luaE_extendCI(W);return Dt.funcOff=qe,Dt.nresults=Ze,Dt.func=Je,Dt.l_base=We,Dt.top=We+ht,vt(W,Dt.top),Dt.l_code=we.code,Dt.l_savedpc=0,Dt.callstatus=Pe.CIST_LUA,W.hookmask&g&&nt(W,Dt),!1}default:return ye(W,1),Ge(W,qe,Je),Se(W,qe,Ze)}},lt=function(W,qe,Ze,Je){let We=qe.nresults;W.hookmask&(w|_)&&(W.hookmask&w&&yt(W,A,-1),W.oldpc=qe.previous.l_savedpc);let we=qe.funcOff;return W.ci=qe.previous,W.ci.next=null,xt(W,Ze,we,Je,We)},xt=function(W,qe,Ze,Je,We){switch(We){case 0:break;case 1:Je===0?W.stack[Ze].setnilvalue():O.setobjs2s(W,Ze,qe);break;case b:for(let dt=0;dt<Je;dt++)O.setobjs2s(W,Ze+dt,qe+dt);for(let dt=W.top;dt>=Ze+Je;dt--)delete W.stack[dt];return W.top=Ze+Je,!1;default:{let dt;if(We<=Je)for(dt=0;dt<We;dt++)O.setobjs2s(W,Ze+dt,qe+dt);else{for(dt=0;dt<Je;dt++)O.setobjs2s(W,Ze+dt,qe+dt);for(;dt<We;dt++)Ze+dt>=W.top?W.stack[Ze+dt]=new O.TValue(H,null):W.stack[Ze+dt].setnilvalue()}break}}let we=Ze+We;for(let dt=W.top;dt>=we;dt--)delete W.stack[dt];return W.top=we,!0},yt=function(W,qe,Ze){let Je=W.hook;if(Je&&W.allowhook){let We=W.ci,we=W.top,dt=We.top,ht=new ge;ht.event=qe,ht.currentline=Ze,ht.i_ci=We,ye(W,L),We.top=W.top+L,ie(We.top<=W.stack_last),W.allowhook=0,We.callstatus|=Pe.CIST_HOOKED,Je(W,ht),ie(!W.allowhook),W.allowhook=1,We.top=dt,vt(W,we),We.callstatus&=~Pe.CIST_HOOKED}},nt=function(W,qe){let Ze=R;qe.l_savedpc++,qe.previous.callstatus&Pe.CIST_LUA&&qe.previous.l_code[qe.previous.l_savedpc-1].opcode==Ce.OpCodesI.OP_TAILCALL&&(qe.callstatus|=Pe.CIST_TAIL,Ze=c),yt(W,Ze,-1),qe.l_savedpc--},be=function(W,qe,Ze){let Je,We=qe.numparams,we=W.top-Ze,dt=W.top;for(Je=0;Je<We&&Je<Ze;Je++)O.pushobj2s(W,W.stack[we+Je]),W.stack[we+Je].setnilvalue();for(;Je<We;Je++)W.stack[W.top++]=new O.TValue(H,null);return dt},Ge=function(W,qe,Ze){let Je=re.luaT_gettmbyobj(W,Ze,re.TMS.TM_CALL);Je.ttisfunction(Je)||te.luaG_typeerror(W,Ze,z("call",!0)),O.pushobj2s(W,W.stack[W.top-1]);for(let We=W.top-2;We>qe;We--)O.setobjs2s(W,We,We-1);O.setobj2s(W,qe,Je)},J=function(W,qe,Ze){++W.nCcalls>=ke&&function(Je){Je.nCcalls===ke?te.luaG_runerror(Je,z("JS stack overflow",!0)):Je.nCcalls>=ke+(ke>>3)&&d(Je,M)}(W),Se(W,qe,Ze)||Ye.luaV_execute(W),W.nCcalls--},d=function(W,qe){if(W.errorJmp)throw W.errorJmp.status=qe,W.errorJmp;{let Ze=W.l_G;if(W.status=qe,!Ze.mainthread.errorJmp){let Je=Ze.panic;throw Je&&(et(W,qe,W.top),W.ci.top<W.top&&(W.ci.top=W.top),Je(W)),new Error(`Aborted ${qe}`)}Ze.mainthread.stack[Ze.mainthread.top++]=W.stack[W.top-1],d(Ze.mainthread,qe)}},D=function(W,qe,Ze){let Je=W.nCcalls,We={status:q,previous:W.errorJmp};W.errorJmp=We;try{qe(W,Ze)}catch(we){if(We.status===q){let dt=W.l_G.atnativeerror;if(dt)try{if(We.status=q,ee.lua_pushcfunction(W,dt),ee.lua_pushlightuserdata(W,we),Nt(W,W.top-2,1),W.errfunc!==0){let ht=W.errfunc;O.pushobj2s(W,W.stack[W.top-1]),O.setobjs2s(W,W.top-2,ht),Nt(W,W.top-2,1)}We.status=P}catch{We.status===q&&(We.status=-1)}else We.status=-1}}return W.errorJmp=We.previous,W.nCcalls=Je,We.status},x=function(W,qe){let Ze=W.ci;ie(Ze.c_k!==null&&W.nny===0),ie(Ze.callstatus&Pe.CIST_YPCALL||qe===le),Ze.callstatus&Pe.CIST_YPCALL&&(Ze.callstatus&=~Pe.CIST_YPCALL,W.errfunc=Ze.c_old_errfunc),Ze.nresults===b&&W.ci.top<W.top&&(W.ci.top=W.top);let Je=(0,Ze.c_k)(W,qe,Ze.c_ctx);ee.api_checknelems(W,Je),lt(W,Ze,W.top-Je,Je)},Y=function(W,qe){for(qe!==null&&x(W,qe);W.ci!==W.base_ci;)W.ci.callstatus&Pe.CIST_LUA?(Ye.luaV_finishOp(W),Ye.luaV_execute(W)):x(W,le)},Q=function(W,qe){let Ze=function(We){for(let we=We.ci;we!==null;we=we.previous)if(we.callstatus&Pe.CIST_YPCALL)return we;return null}(W);if(Ze===null)return 0;let Je=Ze.extra;return ne.luaF_close(W,Je),et(W,qe,Je),W.ci=Ze,W.allowhook=Ze.callstatus&Pe.CIST_OAH,W.nny=0,De(W),W.errfunc=Ze.c_old_errfunc,1},ve=function(W,qe,Ze){let Je=at(W,qe);if(Ze===0)O.pushsvalue2s(W,Je),Le(W,W.top<=W.ci.top,"stack overflow");else{for(let We=1;We<Ze;We++)delete W.stack[--W.top];O.setsvalue2s(W,W.top-1,Je)}return P},Ie=function(W,qe){let Ze=W.top-qe,Je=W.ci;W.status===q?Se(W,Ze-1,b)||Ye.luaV_execute(W):(ie(W.status===le),W.status=q,Je.funcOff=Je.extra,Je.func=W.stack[Je.funcOff],Je.callstatus&Pe.CIST_LUA?Ye.luaV_execute(W):(Je.c_k!==null&&(qe=Je.c_k(W,le,Je.c_ctx),ee.api_checknelems(W,qe),Ze=W.top-qe),lt(W,Je,Ze,qe)),Y(W,null))},Fe=function(W,qe,Ze,Je){let We=W.ci;return ee.api_checknelems(W,qe),W.nny>0&&(W!==W.l_G.mainthread?te.luaG_runerror(W,z("attempt to yield across a JS-call boundary",!0)):te.luaG_runerror(W,z("attempt to yield from outside a coroutine",!0))),W.status=le,We.extra=We.funcOff,We.callstatus&Pe.CIST_LUA?Le(W,Je===null,"hooks cannot continue after yielding"):(We.c_k=Je,Je!==null&&(We.c_ctx=Ze),We.funcOff=W.top-qe-1,We.func=W.stack[We.funcOff],d(W,le)),ie(We.callstatus&Pe.CIST_HOOKED),0},it=function(W,qe,Ze,Je,We){let we=W.ci,dt=W.allowhook,ht=W.nny,Dt=W.errfunc;W.errfunc=We;let Bt=D(W,qe,Ze);return Bt!==q&&(ne.luaF_close(W,Je),et(W,Bt,Je),W.ci=we,W.allowhook=dt,W.nny=ht,De(W)),W.errfunc=Dt,Bt},Nt=function(W,qe,Ze){W.nny++,J(W,qe,Ze),W.nny--},wt=function(W,qe,Ze){qe&&y(qe,Ze[0])===-1&&(O.luaO_pushfstring(W,z("attempt to load a %s chunk (mode is '%s')"),Ze,qe),d(W,G))},jt=function(W,qe){let Ze,Je=qe.z.zgetc();Je===E[0]?(wt(W,qe.mode,z("binary",!0)),Ze=_e.luaU_undump(W,qe.z,qe.name)):(wt(W,qe.mode,z("text",!0)),Ze=tt.luaY_parser(W,qe.z,qe.buff,qe.dyd,qe.name,Je)),ie(Ze.nupvalues===Ze.p.upvalues.length),ne.luaF_initupvals(W,Ze)};a.exports.adjust_top=vt,a.exports.luaD_call=J,a.exports.luaD_callnoyield=Nt,a.exports.luaD_checkstack=ye,a.exports.luaD_growstack=he,a.exports.luaD_hook=yt,a.exports.luaD_inctop=function(W){ye(W,1),W.stack[W.top++]=new O.TValue(H,null)},a.exports.luaD_pcall=it,a.exports.luaD_poscall=lt,a.exports.luaD_precall=Se,a.exports.luaD_protectedparser=function(W,qe,Ze,Je){let We=new class{constructor(dt,ht,Dt){this.z=dt,this.buff=new Qe,this.dyd=new tt.Dyndata,this.mode=Dt,this.name=ht}}(qe,Ze,Je);W.nny++;let we=it(W,jt,We,W.top,W.errfunc);return W.nny--,we},a.exports.luaD_rawrunprotected=D,a.exports.luaD_reallocstack=ct,a.exports.luaD_throw=d,a.exports.lua_isyieldable=function(W){return W.nny===0},a.exports.lua_resume=function(W,qe,Ze){let Je=W.nny;if(W.status===q){if(W.ci!==W.base_ci)return ve(W,"cannot resume non-suspended coroutine",Ze)}else if(W.status!==le)return ve(W,"cannot resume dead coroutine",Ze);if(W.nCcalls=qe?qe.nCcalls+1:1,W.nCcalls>=ke)return ve(W,"JS stack overflow",Ze);W.nny=0,ee.api_checknelems(W,W.status===q?Ze+1:Ze);let We=D(W,Ie,Ze);if(We===-1)We=P;else{for(;We>le&&Q(W,We);)We=D(W,Y,We);We>le?(W.status=We,et(W,We,W.top),W.ci.top=W.top):ie(We===W.status)}return W.nny=Je,W.nCcalls--,ie(W.nCcalls===(qe?qe.nCcalls:0)),We},a.exports.lua_yield=function(W,qe){Fe(W,qe,0,null)},a.exports.lua_yieldk=Fe},function(a,Ae,v){const{constant_types:{LUA_TBOOLEAN:R,LUA_TCCL:A,LUA_TLCF:c,LUA_TLCL:g,LUA_TLIGHTUSERDATA:_,LUA_TLNGSTR:w,LUA_TNIL:L,LUA_TNUMFLT:b,LUA_TNUMINT:E,LUA_TSHRSTR:S,LUA_TTABLE:I,LUA_TTHREAD:F,LUA_TUSERDATA:H},to_luastring:V}=v(1),{lua_assert:M}=v(4),P=v(11),G=v(6),{luaS_hashlongstr:q,TString:le}=v(10),ge=v(12);let y=new WeakMap;const z=function(O){let Ce=y.get(O);return Ce||(Ce={},y.set(O,Ce)),Ce},ee=function(O,Ce){switch(Ce.type){case L:return P.luaG_runerror(O,V("table index is nil",!0));case b:if(isNaN(Ce.value))return P.luaG_runerror(O,V("table index is NaN",!0));case E:case R:case I:case g:case c:case A:case H:case F:return Ce.value;case S:case w:return q(Ce.tsvalue());case _:{let tt=Ce.value;switch(typeof tt){case"string":return"*"+tt;case"number":return"#"+tt;case"boolean":return tt?"?true":"?false";case"function":return z(tt);case"object":if(tt instanceof ge.lua_State&&tt.l_G===O.l_G||tt instanceof te||tt instanceof G.Udata||tt instanceof G.LClosure||tt instanceof G.CClosure)return z(tt);default:return tt}}default:throw new Error("unknown key type: "+Ce.type)}};class te{constructor(Ce){this.id=Ce.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}}const ne=function(O,Ce,tt,Pe){O.dead_strong.clear(),O.dead_weak=void 0;let at=null,re={key:tt,value:Pe,p:at=O.l,n:void 0};O.f||(O.f=re),at&&(at.n=re),O.strong.set(Ce,re),O.l=re},Le=function(O,Ce){let tt=O.strong.get(Ce);if(tt){tt.key.setdeadvalue(),tt.value=void 0;let Pe=tt.n,at=tt.p;tt.p=void 0,at&&(at.n=Pe),Pe&&(Pe.p=at),O.f===tt&&(O.f=Pe),O.l===tt&&(O.l=at),O.strong.delete(Ce),function(re){return typeof re=="object"?re!==null:typeof re=="function"}(Ce)?(O.dead_weak||(O.dead_weak=new WeakMap),O.dead_weak.set(Ce,tt)):O.dead_strong.set(Ce,tt)}},ie=function(O,Ce){let tt=O.strong.get(Ce);return tt?tt.value:G.luaO_nilobject},ke=function(O,Ce){return M(typeof Ce=="number"&&(0|Ce)===Ce),ie(O,Ce)};a.exports.invalidateTMcache=function(O){O.flags=0},a.exports.luaH_get=function(O,Ce,tt){return M(tt instanceof G.TValue),tt.ttisnil()||tt.ttisfloat()&&isNaN(tt.value)?G.luaO_nilobject:ie(Ce,ee(O,tt))},a.exports.luaH_getint=ke,a.exports.luaH_getn=function(O){let Ce=0,tt=O.strong.size+1;for(;tt-Ce>1;){let Pe=Math.floor((Ce+tt)/2);ke(O,Pe).ttisnil()?tt=Pe:Ce=Pe}return Ce},a.exports.luaH_getstr=function(O,Ce){return M(Ce instanceof le),ie(O,q(Ce))},a.exports.luaH_setfrom=function(O,Ce,tt,Pe){M(tt instanceof G.TValue);let at=ee(O,tt);if(Pe.ttisnil())return void Le(Ce,at);let re=Ce.strong.get(at);if(re)re.value.setfrom(Pe);else{let fe,_e=tt.value;fe=tt.ttisfloat()&&(0|_e)===_e?new G.TValue(E,_e):new G.TValue(tt.type,_e);let Ye=new G.TValue(Pe.type,Pe.value);ne(Ce,at,fe,Ye)}},a.exports.luaH_setint=function(O,Ce,tt){M(typeof Ce=="number"&&(0|Ce)===Ce&&tt instanceof G.TValue);let Pe=Ce;if(tt.ttisnil())return void Le(O,Pe);let at=O.strong.get(Pe);if(at)at.value.setfrom(tt);else{let re=new G.TValue(E,Ce),fe=new G.TValue(tt.type,tt.value);ne(O,Pe,re,fe)}},a.exports.luaH_new=function(O){return new te(O)},a.exports.luaH_next=function(O,Ce,tt){let Pe,at=O.stack[tt];if(at.type===L){if(!(Pe=Ce.f))return!1}else{let re=ee(O,at);if(Pe=Ce.strong.get(re)){if(!(Pe=Pe.n))return!1}else{if(!(Pe=Ce.dead_weak&&Ce.dead_weak.get(re)||Ce.dead_strong.get(re)))return P.luaG_runerror(O,V("invalid key to 'next'"));do if(!(Pe=Pe.n))return!1;while(Pe.key.ttisdeadkey())}}return G.setobj2s(O,tt,Pe.key),G.setobj2s(O,tt+1,Pe.value),!0},a.exports.Table=te},function(a,Ae,v){const{is_luastring:R,luastring_eq:A,luastring_from:c,to_luastring:g}=v(1),{lua_assert:_}=v(4);class w{constructor(S,I){this.hash=null,this.realstring=I}getstr(){return this.realstring}tsslen(){return this.realstring.length}}const L=function(E){_(R(E));let S=E.length,I="|";for(let F=0;F<S;F++)I+=E[F].toString(16);return I},b=function(E,S){return _(S instanceof Uint8Array),new w(E,S)};a.exports.luaS_eqlngstr=function(E,S){return _(E instanceof w),_(S instanceof w),E==S||A(E.realstring,S.realstring)},a.exports.luaS_hash=L,a.exports.luaS_hashlongstr=function(E){return _(E instanceof w),E.hash===null&&(E.hash=L(E.getstr())),E.hash},a.exports.luaS_bless=b,a.exports.luaS_new=function(E,S){return b(E,c(S))},a.exports.luaS_newliteral=function(E,S){return b(E,g(S))},a.exports.TString=w},function(a,Ae,v){const{LUA_HOOKCOUNT:R,LUA_HOOKLINE:A,LUA_MASKCOUNT:c,LUA_MASKLINE:g,constant_types:{LUA_TBOOLEAN:_,LUA_TNIL:w,LUA_TTABLE:L},thread_status:{LUA_ERRRUN:b,LUA_YIELD:E},from_userstring:S,luastring_eq:I,luastring_indexOf:F,to_luastring:H}=v(1),{api_check:V,lua_assert:M}=v(4),{LUA_IDSIZE:P}=v(3),G=v(18),q=v(8),le=v(13),ge=v(20),y=v(6),z=v(16),ee=v(12),te=v(9),ne=v(14),Le=v(15),ie=function(he){return M(he.callstatus&ee.CIST_LUA),he.l_savedpc-1},ke=function(he){return he.func.value.p.lineinfo.length!==0?he.func.value.p.lineinfo[ie(he)]:-1},O=function(he){if(he.status===E){let ye=he.ci,De=ye.funcOff;ye.func=he.stack[ye.extra],ye.funcOff=ye.extra,ye.extra=De}},Ce=function(he,ye){M(ye<he.upvalues.length);let De=he.upvalues[ye].name;return De===null?H("?",!0):De.getstr()},tt=function(he,ye,De){let Se,lt=null;if(ye.callstatus&ee.CIST_LUA){if(De<0)return function(xt,yt){let nt=xt.func.value.p.numparams;return yt>=xt.l_base-xt.funcOff-nt?null:{pos:xt.funcOff+nt+yt,name:H("(*vararg)",!0)}}(ye,-De);Se=ye.l_base,lt=le.luaF_getlocalname(ye.func.value.p,De,ie(ye))}else Se=ye.funcOff+1;if(lt===null){if(!((ye===he.ci?he.top:ye.next.funcOff)-Se>=De&&De>0))return null;lt=H("(*temporary)",!0)}return{pos:Se+(De-1),name:lt}},Pe=function(he,ye){if(ye===null||ye instanceof y.CClosure)he.source=H("=[JS]",!0),he.linedefined=-1,he.lastlinedefined=-1,he.what=H("J",!0);else{let De=ye.p;he.source=De.source?De.source.getstr():H("=?",!0),he.linedefined=De.linedefined,he.lastlinedefined=De.lastlinedefined,he.what=he.linedefined===0?H("main",!0):H("Lua",!0)}he.short_src=y.luaO_chunkid(he.source,P)},at=function(he,ye){let De={name:null,funcname:null};return ye===null?null:ye.callstatus&ee.CIST_FIN?(De.name=H("__gc",!0),De.funcname=H("metamethod",!0),De):!(ye.callstatus&ee.CIST_TAIL)&&ye.previous.callstatus&ee.CIST_LUA?Ye(he,ye.previous):null},re=function(he,ye,De){let Se={name:null,funcname:null};if(z.ISK(De)){let lt=he.k[z.INDEXK(De)];if(lt.ttisstring())return Se.name=lt.svalue(),Se}else{let lt=_e(he,ye,De);if(lt&&lt.funcname[0]===99)return lt}return Se.name=H("?",!0),Se},fe=function(he,ye){return he<ye?-1:he},_e=function(he,ye,De){let Se={name:le.luaF_getlocalname(he,De+1,ye),funcname:null};if(Se.name)return Se.funcname=H("local",!0),Se;let lt=function(yt,nt,be){let Ge=-1,J=0,d=z.OpCodesI;for(let D=0;D<nt;D++){let x=yt.code[D],Y=x.A;switch(x.opcode){case d.OP_LOADNIL:{let Q=x.B;Y<=be&&be<=Y+Q&&(Ge=fe(D,J));break}case d.OP_TFORCALL:be>=Y+2&&(Ge=fe(D,J));break;case d.OP_CALL:case d.OP_TAILCALL:be>=Y&&(Ge=fe(D,J));break;case d.OP_JMP:{let Q=D+1+x.sBx;D<Q&&Q<=nt&&Q>J&&(J=Q);break}default:z.testAMode(x.opcode)&&be===Y&&(Ge=fe(D,J))}}return Ge}(he,ye,De),xt=z.OpCodesI;if(lt!==-1){let yt=he.code[lt];switch(yt.opcode){case xt.OP_MOVE:{let nt=yt.B;if(nt<yt.A)return _e(he,lt,nt);break}case xt.OP_GETTABUP:case xt.OP_GETTABLE:{let nt=yt.C,be=yt.B,Ge=yt.opcode===xt.OP_GETTABLE?le.luaF_getlocalname(he,be+1,lt):Ce(he,be);return Se.name=re(he,lt,nt).name,Se.funcname=Ge&&I(Ge,ge.LUA_ENV)?H("global",!0):H("field",!0),Se}case xt.OP_GETUPVAL:return Se.name=Ce(he,yt.B),Se.funcname=H("upvalue",!0),Se;case xt.OP_LOADK:case xt.OP_LOADKX:{let nt=yt.opcode===xt.OP_LOADK?yt.Bx:he.code[lt+1].Ax;if(he.k[nt].ttisstring())return Se.name=he.k[nt].svalue(),Se.funcname=H("constant",!0),Se;break}case xt.OP_SELF:{let nt=yt.C;return Se.name=re(he,lt,nt).name,Se.funcname=H("method",!0),Se}}}return null},Ye=function(he,ye){let De={name:null,funcname:null},Se=0,lt=ye.func.value.p,xt=ie(ye),yt=lt.code[xt],nt=z.OpCodesI;if(ye.callstatus&ee.CIST_HOOKED)return De.name=H("?",!0),De.funcname=H("hook",!0),De;switch(yt.opcode){case nt.OP_CALL:case nt.OP_TAILCALL:return _e(lt,xt,yt.A);case nt.OP_TFORCALL:return De.name=H("for iterator",!0),De.funcname=H("for iterator",!0),De;case nt.OP_SELF:case nt.OP_GETTABUP:case nt.OP_GETTABLE:Se=ne.TMS.TM_INDEX;break;case nt.OP_SETTABUP:case nt.OP_SETTABLE:Se=ne.TMS.TM_NEWINDEX;break;case nt.OP_ADD:Se=ne.TMS.TM_ADD;break;case nt.OP_SUB:Se=ne.TMS.TM_SUB;break;case nt.OP_MUL:Se=ne.TMS.TM_MUL;break;case nt.OP_MOD:Se=ne.TMS.TM_MOD;break;case nt.OP_POW:Se=ne.TMS.TM_POW;break;case nt.OP_DIV:Se=ne.TMS.TM_DIV;break;case nt.OP_IDIV:Se=ne.TMS.TM_IDIV;break;case nt.OP_BAND:Se=ne.TMS.TM_BAND;break;case nt.OP_BOR:Se=ne.TMS.TM_BOR;break;case nt.OP_BXOR:Se=ne.TMS.TM_BXOR;break;case nt.OP_SHL:Se=ne.TMS.TM_SHL;break;case nt.OP_SHR:Se=ne.TMS.TM_SHR;break;case nt.OP_UNM:Se=ne.TMS.TM_UNM;break;case nt.OP_BNOT:Se=ne.TMS.TM_BNOT;break;case nt.OP_LEN:Se=ne.TMS.TM_LEN;break;case nt.OP_CONCAT:Se=ne.TMS.TM_CONCAT;break;case nt.OP_EQ:Se=ne.TMS.TM_EQ;break;case nt.OP_LT:Se=ne.TMS.TM_LT;break;case nt.OP_LE:Se=ne.TMS.TM_LE;break;default:return null}return De.name=he.l_G.tmname[Se].getstr(),De.funcname=H("metamethod",!0),De},Qe=function(he,ye){let De=he.ci,Se=null;if(De.callstatus&ee.CIST_LUA){Se=function(xt,yt,nt){let be=yt.func.value;for(let Ge=0;Ge<be.nupvalues;Ge++)if(be.upvals[Ge]===nt)return{name:Ce(be.p,Ge),funcname:H("upvalue",!0)};return null}(0,De,ye);let lt=function(xt,yt,nt){for(let be=yt.l_base;be<yt.top;be++)if(xt.stack[be]===nt)return be;return!1}(he,De,ye);!Se&&lt&&(Se=_e(De.func.value.p,ie(De),lt-De.l_base))}return Se?y.luaO_pushfstring(he,H(" (%s '%s')",!0),Se.funcname,Se.name):H("",!0)},vt=function(he,ye,De){let Se=ne.luaT_objtypename(he,ye);rt(he,H("attempt to %s a %s value%s",!0),De,Se,Qe(he,ye))},et=function(he,ye,De,Se){let lt;return lt=De?y.luaO_chunkid(De.getstr(),P):H("?",!0),y.luaO_pushfstring(he,H("%s:%d: %s",!0),lt,Se,ye)},rt=function(he,ye,...De){let Se=he.ci,lt=y.luaO_pushvfstring(he,ye,De);Se.callstatus&ee.CIST_LUA&&et(he,lt,Se.func.value.p.source,ke(Se)),ct(he)},ct=function(he){if(he.errfunc!==0){let ye=he.errfunc;y.pushobj2s(he,he.stack[he.top-1]),y.setobjs2s(he,he.top-2,ye),q.luaD_callnoyield(he,he.top-2,1)}q.luaD_throw(he,b)};a.exports.luaG_addinfo=et,a.exports.luaG_concaterror=function(he,ye,De){(ye.ttisstring()||Le.cvt2str(ye))&&(ye=De),vt(he,ye,H("concatenate",!0))},a.exports.luaG_errormsg=ct,a.exports.luaG_opinterror=function(he,ye,De,Se){Le.tonumber(ye)===!1&&(De=ye),vt(he,De,Se)},a.exports.luaG_ordererror=function(he,ye,De){let Se=ne.luaT_objtypename(he,ye),lt=ne.luaT_objtypename(he,De);I(Se,lt)?rt(he,H("attempt to compare two %s values",!0),Se):rt(he,H("attempt to compare %s with %s",!0),Se,lt)},a.exports.luaG_runerror=rt,a.exports.luaG_tointerror=function(he,ye,De){Le.tointeger(ye)===!1&&(De=ye),rt(he,H("number%s has no integer representation",!0),Qe(he,De))},a.exports.luaG_traceexec=function(he){let ye=he.ci,De=he.hookmask,Se=--he.hookcount==0&&De&c;if(Se)he.hookcount=he.basehookcount;else if(!(De&g))return;if(ye.callstatus&ee.CIST_HOOKYIELD)ye.callstatus&=~ee.CIST_HOOKYIELD;else{if(Se&&q.luaD_hook(he,R,-1),De&g){let lt=ye.func.value.p,xt=ye.l_savedpc-1,yt=lt.lineinfo.length!==0?lt.lineinfo[xt]:-1;(xt===0||ye.l_savedpc<=he.oldpc||yt!==(lt.lineinfo.length!==0?lt.lineinfo[he.oldpc-1]:-1))&&q.luaD_hook(he,A,yt)}he.oldpc=ye.l_savedpc,he.status===E&&(Se&&(he.hookcount=1),ye.l_savedpc--,ye.callstatus|=ee.CIST_HOOKYIELD,ye.funcOff=he.top-1,ye.func=he.stack[ye.funcOff],q.luaD_throw(he,E))}},a.exports.luaG_typeerror=vt,a.exports.lua_gethook=function(he){return he.hook},a.exports.lua_gethookcount=function(he){return he.basehookcount},a.exports.lua_gethookmask=function(he){return he.hookmask},a.exports.lua_getinfo=function(he,ye,De){let Se,lt,xt,yt;return ye=S(ye),O(he),ye[0]===62?(xt=null,yt=he.stack[he.top-1],V(he,yt.ttisfunction(),"function expected"),ye=ye.subarray(1),he.top--):(yt=(xt=De.i_ci).func,M(xt.func.ttisfunction())),Se=function(nt,be,Ge,J,d){let D=1;for(;be.length>0;be=be.subarray(1))switch(be[0]){case 83:Pe(Ge,J);break;case 108:Ge.currentline=d&&d.callstatus&ee.CIST_LUA?ke(d):-1;break;case 117:Ge.nups=J===null?0:J.nupvalues,J===null||J instanceof y.CClosure?(Ge.isvararg=!0,Ge.nparams=0):(Ge.isvararg=J.p.is_vararg,Ge.nparams=J.p.numparams);break;case 116:Ge.istailcall=d?d.callstatus&ee.CIST_TAIL:0;break;case 110:{let x=at(nt,d);x===null?(Ge.namewhat=H("",!0),Ge.name=null):(Ge.namewhat=x.funcname,Ge.name=x.name);break}case 76:case 102:break;default:D=0}return D}(he,ye,De,lt=yt.ttisclosure()?yt.value:null,xt),F(ye,102)>=0&&(y.pushobj2s(he,yt),V(he,he.top<=he.ci.top,"stack overflow")),O(he),F(ye,76)>=0&&function(nt,be){if(be===null||be instanceof y.CClosure)nt.stack[nt.top]=new y.TValue(w,null),G.api_incr_top(nt);else{let Ge=be.p.lineinfo,J=te.luaH_new(nt);nt.stack[nt.top]=new y.TValue(L,J),G.api_incr_top(nt);let d=new y.TValue(_,!0);for(let D=0;D<Ge.length;D++)te.luaH_setint(J,Ge[D],d)}}(he,lt),Se},a.exports.lua_getlocal=function(he,ye,De){let Se;if(O(he),ye===null)Se=he.stack[he.top-1].ttisLclosure()?le.luaF_getlocalname(he.stack[he.top-1].value.p,De,0):null;else{let lt=tt(he,ye.i_ci,De);lt?(Se=lt.name,y.pushobj2s(he,he.stack[lt.pos]),V(he,he.top<=he.ci.top,"stack overflow")):Se=null}return O(he),Se},a.exports.lua_getstack=function(he,ye,De){let Se,lt;if(ye<0)return 0;for(Se=he.ci;ye>0&&Se!==he.base_ci;Se=Se.previous)ye--;return ye===0&&Se!==he.base_ci?(lt=1,De.i_ci=Se):lt=0,lt},a.exports.lua_sethook=function(he,ye,De,Se){ye!==null&&De!==0||(De=0,ye=null),he.ci.callstatus&ee.CIST_LUA&&(he.oldpc=he.ci.l_savedpc),he.hook=ye,he.basehookcount=Se,he.hookcount=he.basehookcount,he.hookmask=De},a.exports.lua_setlocal=function(he,ye,De){let Se;O(he);let lt=tt(he,ye.i_ci,De);return lt?(Se=lt.name,y.setobjs2s(he,lt.pos,he.top-1),delete he.stack[--he.top]):Se=null,O(he),Se}},function(a,Ae,v){const{LUA_MINSTACK:R,LUA_RIDX_GLOBALS:A,LUA_RIDX_MAINTHREAD:c,constant_types:{LUA_NUMTAGS:g,LUA_TNIL:_,LUA_TTABLE:w,LUA_TTHREAD:L},thread_status:{LUA_OK:b}}=v(1),E=v(6),S=v(8),I=v(18),F=v(9),H=v(14),V=2*R;class M{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}}class P{constructor(z){this.id=z.id_counter++,this.base_ci=new M,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=z,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=b,this.errfunc=0}}const G=function(y){y.ci.next=null},q=function(y,z){y.stack=new Array(V),y.top=0,y.stack_last=V-5;let ee=y.base_ci;ee.next=ee.previous=null,ee.callstatus=0,ee.funcOff=y.top,ee.func=y.stack[y.top],y.stack[y.top++]=new E.TValue(_,null),ee.top=y.top+R,y.ci=ee},le=function(y){y.ci=y.base_ci,G(y),y.stack=null},ge=function(y){let z=y.l_G;q(y),function(ee,te){let ne=F.luaH_new(ee);te.l_registry.sethvalue(ne),F.luaH_setint(ne,c,new E.TValue(L,ee)),F.luaH_setint(ne,A,new E.TValue(w,F.luaH_new(ee)))}(y,z),H.luaT_init(y),z.version=I.lua_version(null)};a.exports.lua_State=P,a.exports.CallInfo=M,a.exports.CIST_OAH=1,a.exports.CIST_LUA=2,a.exports.CIST_HOOKED=4,a.exports.CIST_FRESH=8,a.exports.CIST_YPCALL=16,a.exports.CIST_TAIL=32,a.exports.CIST_HOOKYIELD=64,a.exports.CIST_LEQ=128,a.exports.CIST_FIN=256,a.exports.EXTRA_STACK=5,a.exports.lua_close=function(y){(function(z){le(z)})(y=y.l_G.mainthread)},a.exports.lua_newstate=function(){let y=new class{constructor(){this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new E.TValue(_,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(H.TMS.TM_N),this.mt=new Array(g)}},z=new P(y);return y.mainthread=z,S.luaD_rawrunprotected(z,ge,null)!==b&&(z=null),z},a.exports.lua_newthread=function(y){let z=y.l_G,ee=new P(z);return y.stack[y.top]=new E.TValue(L,ee),I.api_incr_top(y),ee.hookmask=y.hookmask,ee.basehookcount=y.basehookcount,ee.hook=y.hook,ee.hookcount=ee.basehookcount,q(ee),ee},a.exports.luaE_extendCI=function(y){let z=new M;return y.ci.next=z,z.previous=y.ci,z.next=null,y.ci=z,z},a.exports.luaE_freeCI=G,a.exports.luaE_freethread=function(y,z){le(z)}},function(a,Ae,v){const{constant_types:{LUA_TNIL:R}}=v(1),A=v(6);a.exports.MAXUPVAL=255,a.exports.Proto=class{constructor(c){this.id=c.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},a.exports.luaF_findupval=function(c,g){return c.stack[g]},a.exports.luaF_close=function(c,g){for(let _=g;_<c.top;_++){let w=c.stack[_];c.stack[_]=new A.TValue(w.type,w.value)}},a.exports.luaF_getlocalname=function(c,g,_){for(let w=0;w<c.locvars.length&&c.locvars[w].startpc<=_;w++)if(_<c.locvars[w].endpc&&--g==0)return c.locvars[w].varname.getstr();return null},a.exports.luaF_initupvals=function(c,g){for(let _=0;_<g.nupvalues;_++)g.upvals[_]=new A.TValue(R,null)},a.exports.luaF_newLclosure=function(c,g){return new A.LClosure(c,g)}},function(a,Ae,v){const{constant_types:{LUA_TTABLE:R,LUA_TUSERDATA:A},to_luastring:c}=v(1),{lua_assert:g}=v(4),_=v(6),w=v(8),L=v(12),{luaS_bless:b,luaS_new:E}=v(10),S=v(9),I=v(11),F=v(15),H=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(y=>c(y)),V=function(y){return H[y+1]},M={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},P=c("__name",!0),G=function(y,z,ee,te,ne,Le){let ie=y.top;if(_.pushobj2s(y,z),_.pushobj2s(y,ee),_.pushobj2s(y,te),Le||_.pushobj2s(y,ne),y.ci.callstatus&L.CIST_LUA?w.luaD_call(y,ie,Le):w.luaD_callnoyield(y,ie,Le),Le){let ke=y.stack[y.top-1];delete y.stack[--y.top],ne.setfrom(ke)}},q=function(y,z,ee,te,ne){let Le=ge(y,z,ne);return Le.ttisnil()&&(Le=ge(y,ee,ne)),!Le.ttisnil()&&(G(y,Le,z,ee,te,1),!0)},le=function(y,z,ee){const te=S.luaH_getstr(y,ee);return g(z<=M.TM_EQ),te.ttisnil()?(y.flags|=1<<z,null):te},ge=function(y,z,ee){let te;switch(z.ttnov()){case R:case A:te=z.value.metatable;break;default:te=y.l_G.mt[z.ttnov()]}return te?S.luaH_getstr(te,y.l_G.tmname[ee]):_.luaO_nilobject};a.exports.fasttm=function(y,z,ee){return z===null||z.flags&1<<ee?null:le(z,ee,y.l_G.tmname[ee])},a.exports.TMS=M,a.exports.luaT_callTM=G,a.exports.luaT_callbinTM=q,a.exports.luaT_trybinTM=function(y,z,ee,te,ne){if(!q(y,z,ee,te,ne))switch(ne){case M.TM_CONCAT:return I.luaG_concaterror(y,z,ee);case M.TM_BAND:case M.TM_BOR:case M.TM_BXOR:case M.TM_SHL:case M.TM_SHR:case M.TM_BNOT:{let Le=F.tonumber(z),ie=F.tonumber(ee);return Le!==!1&&ie!==!1?I.luaG_tointerror(y,z,ee):I.luaG_opinterror(y,z,ee,c("perform bitwise operation on",!0))}default:return I.luaG_opinterror(y,z,ee,c("perform arithmetic on",!0))}},a.exports.luaT_callorderTM=function(y,z,ee,te){let ne=new _.TValue;return q(y,z,ee,ne,te)?!ne.l_isfalse():null},a.exports.luaT_gettm=le,a.exports.luaT_gettmbyobj=ge,a.exports.luaT_init=function(y){y.l_G.tmname[M.TM_INDEX]=new E(y,c("__index",!0)),y.l_G.tmname[M.TM_NEWINDEX]=new E(y,c("__newindex",!0)),y.l_G.tmname[M.TM_GC]=new E(y,c("__gc",!0)),y.l_G.tmname[M.TM_MODE]=new E(y,c("__mode",!0)),y.l_G.tmname[M.TM_LEN]=new E(y,c("__len",!0)),y.l_G.tmname[M.TM_EQ]=new E(y,c("__eq",!0)),y.l_G.tmname[M.TM_ADD]=new E(y,c("__add",!0)),y.l_G.tmname[M.TM_SUB]=new E(y,c("__sub",!0)),y.l_G.tmname[M.TM_MUL]=new E(y,c("__mul",!0)),y.l_G.tmname[M.TM_MOD]=new E(y,c("__mod",!0)),y.l_G.tmname[M.TM_POW]=new E(y,c("__pow",!0)),y.l_G.tmname[M.TM_DIV]=new E(y,c("__div",!0)),y.l_G.tmname[M.TM_IDIV]=new E(y,c("__idiv",!0)),y.l_G.tmname[M.TM_BAND]=new E(y,c("__band",!0)),y.l_G.tmname[M.TM_BOR]=new E(y,c("__bor",!0)),y.l_G.tmname[M.TM_BXOR]=new E(y,c("__bxor",!0)),y.l_G.tmname[M.TM_SHL]=new E(y,c("__shl",!0)),y.l_G.tmname[M.TM_SHR]=new E(y,c("__shr",!0)),y.l_G.tmname[M.TM_UNM]=new E(y,c("__unm",!0)),y.l_G.tmname[M.TM_BNOT]=new E(y,c("__bnot",!0)),y.l_G.tmname[M.TM_LT]=new E(y,c("__lt",!0)),y.l_G.tmname[M.TM_LE]=new E(y,c("__le",!0)),y.l_G.tmname[M.TM_CONCAT]=new E(y,c("__concat",!0)),y.l_G.tmname[M.TM_CALL]=new E(y,c("__call",!0))},a.exports.luaT_objtypename=function(y,z){let ee;if(z.ttistable()&&(ee=z.value.metatable)!==null||z.ttisfulluserdata()&&(ee=z.value.metatable)!==null){let te=S.luaH_getstr(ee,b(y,P));if(te.ttisstring())return te.svalue()}return V(z.ttnov())},a.exports.ttypename=V},function(a,Ae,v){const{LUA_MASKLINE:R,LUA_MASKCOUNT:A,LUA_MULTRET:c,constant_types:{LUA_TBOOLEAN:g,LUA_TLCF:_,LUA_TLIGHTUSERDATA:w,LUA_TLNGSTR:L,LUA_TNIL:b,LUA_TNUMBER:E,LUA_TNUMFLT:S,LUA_TNUMINT:I,LUA_TSHRSTR:F,LUA_TTABLE:H,LUA_TUSERDATA:V},to_luastring:M}=v(1),{INDEXK:P,ISK:G,LFIELDS_PER_FLUSH:q,OpCodesI:{OP_ADD:le,OP_BAND:ge,OP_BNOT:y,OP_BOR:z,OP_BXOR:ee,OP_CALL:te,OP_CLOSURE:ne,OP_CONCAT:Le,OP_DIV:ie,OP_EQ:ke,OP_EXTRAARG:O,OP_FORLOOP:Ce,OP_FORPREP:tt,OP_GETTABLE:Pe,OP_GETTABUP:at,OP_GETUPVAL:re,OP_IDIV:fe,OP_JMP:_e,OP_LE:Ye,OP_LEN:Qe,OP_LOADBOOL:vt,OP_LOADK:et,OP_LOADKX:rt,OP_LOADNIL:ct,OP_LT:he,OP_MOD:ye,OP_MOVE:De,OP_MUL:Se,OP_NEWTABLE:lt,OP_NOT:xt,OP_POW:yt,OP_RETURN:nt,OP_SELF:be,OP_SETLIST:Ge,OP_SETTABLE:J,OP_SETTABUP:d,OP_SETUPVAL:D,OP_SHL:x,OP_SHR:Y,OP_SUB:Q,OP_TAILCALL:ve,OP_TEST:Ie,OP_TESTSET:Fe,OP_TFORCALL:it,OP_TFORLOOP:Nt,OP_UNM:wt,OP_VARARG:jt}}=v(16),{LUA_MAXINTEGER:W,LUA_MININTEGER:qe,lua_numbertointeger:Ze}=v(3),{lua_assert:Je,luai_nummod:We}=v(4),we=v(6),dt=v(13),ht=v(12),{luaS_bless:Dt,luaS_eqlngstr:Bt,luaS_hashlongstr:qt}=v(10),bt=v(8),Ot=v(14),Ft=v(9),o=v(11),u=function(X,f,B){return f+B.A},N=function(X,f,B){return f+B.B},h=function(X,f,B,pe){return G(pe.B)?B[P(pe.B)]:X.stack[f+pe.B]},T=function(X,f,B,pe){return G(pe.C)?B[P(pe.C)]:X.stack[f+pe.C]},Z=function(X,f,B,pe){let Re=B.A;Re!==0&&dt.luaF_close(X,f.l_base+Re-1),f.l_savedpc+=B.sBx+pe},U=function(X,f){Z(X,f,f.l_code[f.l_savedpc],1)},xe=function(X,f,B){if(f.ttisnumber()&&B.ttisnumber())return ae(f,B)?1:0;if(f.ttisstring()&&B.ttisstring())return Ee(f.tsvalue(),B.tsvalue())<0?1:0;{let pe=Ot.luaT_callorderTM(X,f,B,Ot.TMS.TM_LT);return pe===null&&o.luaG_ordererror(X,f,B),pe?1:0}},ot=function(X,f,B){let pe;return f.ttisnumber()&&B.ttisnumber()?ze(f,B)?1:0:f.ttisstring()&&B.ttisstring()?Ee(f.tsvalue(),B.tsvalue())<=0?1:0:(pe=Ot.luaT_callorderTM(X,f,B,Ot.TMS.TM_LE))!==null?pe?1:0:(X.ci.callstatus|=ht.CIST_LEQ,pe=Ot.luaT_callorderTM(X,B,f,Ot.TMS.TM_LT),X.ci.callstatus^=ht.CIST_LEQ,pe===null&&o.luaG_ordererror(X,f,B),pe?0:1)},_t=function(X,f,B){if(f.ttype()!==B.ttype())return f.ttnov()!==B.ttnov()||f.ttnov()!==E?0:f.value===B.value?1:0;let pe;switch(f.ttype()){case b:return 1;case g:return f.value==B.value?1:0;case w:case I:case S:case _:return f.value===B.value?1:0;case F:case L:return Bt(f.tsvalue(),B.tsvalue())?1:0;case V:case H:if(f.value===B.value)return 1;if(X===null)return 0;(pe=Ot.fasttm(X,f.value.metatable,Ot.TMS.TM_EQ))===null&&(pe=Ot.fasttm(X,B.value.metatable,Ot.TMS.TM_EQ));break;default:return f.value===B.value?1:0}if(pe===null)return 0;let Re=new we.TValue;return Ot.luaT_callTM(X,pe,f,B,Re,1),Re.l_isfalse()?0:1},Vt=function(X,f){let B=!1,pe=Wt(X,f<0?2:1);if(pe===!1){let Re=ft(X);if(Re===!1)return!1;0<Re?(pe=W,f<0&&(B=!0)):(pe=qe,f>=0&&(B=!0))}return{stopnow:B,ilimit:pe}},Wt=function(X,f){if(X.ttisfloat()){let B=X.value,pe=Math.floor(B);if(B!==pe){if(f===0)return!1;f>1&&(pe+=1)}return Ze(pe)}if(X.ttisinteger())return X.value;if(Zt(X)){let B=new we.TValue;if(we.luaO_str2num(X.svalue(),B)===X.vslen()+1)return Wt(B,f)}return!1},Te=function(X){return X.ttisinteger()?X.value:Wt(X,0)},ft=function(X){if(X.ttnov()===E)return X.value;if(Zt(X)){let f=new we.TValue;if(we.luaO_str2num(X.svalue(),f)===X.vslen()+1)return f.value}return!1},ae=function(X,f){return X.value<f.value},ze=function(X,f){return X.value<=f.value},Ee=function(X,f){let B=qt(X),pe=qt(f);return B===pe?0:B<pe?-1:1},gt=function(X,f,B){let pe;switch(B.ttype()){case H:{let Re=B.value;if((pe=Ot.fasttm(X,Re.metatable,Ot.TMS.TM_LEN))!==null)break;return void f.setivalue(Ft.luaH_getn(Re))}case F:case L:return void f.setivalue(B.vslen());default:(pe=Ot.luaT_gettmbyobj(X,B,Ot.TMS.TM_LEN)).ttisnil()&&o.luaG_typeerror(X,B,M("get length of",!0))}Ot.luaT_callTM(X,pe,B,B,f,1)},Rt=Math.imul||function(X,f){let B=65535&X,pe=65535&f;return B*pe+((X>>>16&65535)*pe+B*(f>>>16&65535)<<16>>>0)|0},Ut=function(X,f,B){return B===0&&o.luaG_runerror(X,M("attempt to divide by zero")),0|Math.floor(f/B)},Ct=function(X,f,B){return B===0&&o.luaG_runerror(X,M("attempt to perform 'n%%0'")),f-Math.floor(f/B)*B|0},Yt=function(X,f){return f<0?f<=-32?0:X>>>-f:f>=32?0:X<<f},ur=function(X,f,B,pe){let Re=X.cache;if(Re!==null){let se=X.upvalues,Oe=se.length;for(let Xe=0;Xe<Oe;Xe++){let pt=se[Xe].instack?B[pe+se[Xe].idx]:f[se[Xe].idx];if(Re.upvals[Xe]!==pt)return null}}return Re},Ht=function(X,f,B,pe,Re){let se=f.upvalues.length,Oe=f.upvalues,Xe=new we.LClosure(X,se);Xe.p=f,X.stack[Re].setclLvalue(Xe);for(let pt=0;pt<se;pt++)Oe[pt].instack?Xe.upvals[pt]=dt.luaF_findupval(X,pe+Oe[pt].idx):Xe.upvals[pt]=B[Oe[pt].idx];f.cache=Xe},$t=function(X){return X.ttisnumber()},Zt=function(X){return X.ttisstring()},ir=function(X,f){let B=X.stack[f];return!!B.ttisstring()||!!$t(B)&&(we.luaO_tostring(X,B),!0)},nr=function(X){return X.ttisstring()&&X.vslen()===0},sr=function(X,f,B,pe){let Re=0;do{let se=X.stack[f-B],Oe=se.vslen(),Xe=se.svalue();pe.set(Xe,Re),Re+=Oe}while(--B>0)},Mt=function(X,f){Je(f>=2);do{let B=X.top,pe=2;if((X.stack[B-2].ttisstring()||$t(X.stack[B-2]))&&ir(X,B-1))if(nr(X.stack[B-1]))ir(X,B-2);else if(nr(X.stack[B-2]))we.setobjs2s(X,B-2,B-1);else{let Re=X.stack[B-1].vslen();for(pe=1;pe<f&&ir(X,B-pe-1);pe++)Re+=X.stack[B-pe-1].vslen();let se=new Uint8Array(Re);sr(X,B,pe,se);let Oe=Dt(X,se);we.setsvalue2s(X,B-pe,Oe)}else Ot.luaT_trybinTM(X,X.stack[B-2],X.stack[B-1],X.stack[B-2],Ot.TMS.TM_CONCAT);for(f-=pe-1;X.top>B-(pe-1);)delete X.stack[--X.top]}while(f>1)},pr=function(X,f,B,pe){for(let Re=0;Re<2e3;Re++){let se;if(f.ttistable()){let Oe=Ft.luaH_get(X,f.value,B);if(!Oe.ttisnil())return void we.setobj2s(X,pe,Oe);if((se=Ot.fasttm(X,f.value.metatable,Ot.TMS.TM_INDEX))===null)return void X.stack[pe].setnilvalue()}else(se=Ot.luaT_gettmbyobj(X,f,Ot.TMS.TM_INDEX)).ttisnil()&&o.luaG_typeerror(X,f,M("index",!0));if(se.ttisfunction())return void Ot.luaT_callTM(X,se,f,B,X.stack[pe],1);f=se}o.luaG_runerror(X,M("'__index' chain too long; possible loop",!0))},dr=function(X,f,B,pe){for(let Re=0;Re<2e3;Re++){let se;if(f.ttistable()){let Oe=f.value;if(!Ft.luaH_get(X,Oe,B).ttisnil()||(se=Ot.fasttm(X,Oe.metatable,Ot.TMS.TM_NEWINDEX))===null)return Ft.luaH_setfrom(X,Oe,B,pe),void Ft.invalidateTMcache(Oe)}else(se=Ot.luaT_gettmbyobj(X,f,Ot.TMS.TM_NEWINDEX)).ttisnil()&&o.luaG_typeerror(X,f,M("index",!0));if(se.ttisfunction())return void Ot.luaT_callTM(X,se,f,B,pe,0);f=se}o.luaG_runerror(X,M("'__newindex' chain too long; possible loop",!0))};a.exports.cvt2str=$t,a.exports.cvt2num=Zt,a.exports.luaV_gettable=pr,a.exports.luaV_concat=Mt,a.exports.luaV_div=Ut,a.exports.luaV_equalobj=_t,a.exports.luaV_execute=function(X){let f=X.ci;f.callstatus|=ht.CIST_FRESH;e:for(;;){Je(f===X.ci);let B=f.func.value,pe=B.p.k,Re=f.l_base,se=f.l_code[f.l_savedpc++];X.hookmask&(R|A)&&o.luaG_traceexec(X);let Oe=u(0,Re,se);switch(se.opcode){case De:we.setobjs2s(X,Oe,N(0,Re,se));break;case et:{let Xe=pe[se.Bx];we.setobj2s(X,Oe,Xe);break}case rt:{Je(f.l_code[f.l_savedpc].opcode===O);let Xe=pe[f.l_code[f.l_savedpc++].Ax];we.setobj2s(X,Oe,Xe);break}case vt:X.stack[Oe].setbvalue(se.B!==0),se.C!==0&&f.l_savedpc++;break;case ct:for(let Xe=0;Xe<=se.B;Xe++)X.stack[Oe+Xe].setnilvalue();break;case re:{let Xe=se.B;we.setobj2s(X,Oe,B.upvals[Xe]);break}case at:{let Xe=B.upvals[se.B],pt=T(X,Re,pe,se);pr(X,Xe,pt,Oe);break}case Pe:{let Xe=X.stack[N(0,Re,se)],pt=T(X,Re,pe,se);pr(X,Xe,pt,Oe);break}case d:{let Xe=B.upvals[se.A],pt=h(X,Re,pe,se),kt=T(X,Re,pe,se);dr(X,Xe,pt,kt);break}case D:B.upvals[se.B].setfrom(X.stack[Oe]);break;case J:{let Xe=X.stack[Oe],pt=h(X,Re,pe,se),kt=T(X,Re,pe,se);dr(X,Xe,pt,kt);break}case lt:X.stack[Oe].sethvalue(Ft.luaH_new(X));break;case be:{let Xe=N(0,Re,se),pt=T(X,Re,pe,se);we.setobjs2s(X,Oe+1,Xe),pr(X,X.stack[Xe],pt,Oe);break}case le:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);kt.ttisinteger()&&k.ttisinteger()?X.stack[Oe].setivalue(kt.value+k.value|0):(Xe=ft(kt))!==!1&&(pt=ft(k))!==!1?X.stack[Oe].setfltvalue(Xe+pt):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_ADD);break}case Q:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);kt.ttisinteger()&&k.ttisinteger()?X.stack[Oe].setivalue(kt.value-k.value|0):(Xe=ft(kt))!==!1&&(pt=ft(k))!==!1?X.stack[Oe].setfltvalue(Xe-pt):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_SUB);break}case Se:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);kt.ttisinteger()&&k.ttisinteger()?X.stack[Oe].setivalue(Rt(kt.value,k.value)):(Xe=ft(kt))!==!1&&(pt=ft(k))!==!1?X.stack[Oe].setfltvalue(Xe*pt):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_MUL);break}case ye:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);kt.ttisinteger()&&k.ttisinteger()?X.stack[Oe].setivalue(Ct(X,kt.value,k.value)):(Xe=ft(kt))!==!1&&(pt=ft(k))!==!1?X.stack[Oe].setfltvalue(We(X,Xe,pt)):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_MOD);break}case yt:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);(Xe=ft(kt))!==!1&&(pt=ft(k))!==!1?X.stack[Oe].setfltvalue(Math.pow(Xe,pt)):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_POW);break}case ie:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);(Xe=ft(kt))!==!1&&(pt=ft(k))!==!1?X.stack[Oe].setfltvalue(Xe/pt):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_DIV);break}case fe:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);kt.ttisinteger()&&k.ttisinteger()?X.stack[Oe].setivalue(Ut(X,kt.value,k.value)):(Xe=ft(kt))!==!1&&(pt=ft(k))!==!1?X.stack[Oe].setfltvalue(Math.floor(Xe/pt)):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_IDIV);break}case ge:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);(Xe=Te(kt))!==!1&&(pt=Te(k))!==!1?X.stack[Oe].setivalue(Xe&pt):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_BAND);break}case z:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);(Xe=Te(kt))!==!1&&(pt=Te(k))!==!1?X.stack[Oe].setivalue(Xe|pt):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_BOR);break}case ee:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);(Xe=Te(kt))!==!1&&(pt=Te(k))!==!1?X.stack[Oe].setivalue(Xe^pt):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_BXOR);break}case x:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);(Xe=Te(kt))!==!1&&(pt=Te(k))!==!1?X.stack[Oe].setivalue(Yt(Xe,pt)):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_SHL);break}case Y:{let Xe,pt,kt=h(X,Re,pe,se),k=T(X,Re,pe,se);(Xe=Te(kt))!==!1&&(pt=Te(k))!==!1?X.stack[Oe].setivalue(Yt(Xe,-pt)):Ot.luaT_trybinTM(X,kt,k,X.stack[Oe],Ot.TMS.TM_SHR);break}case wt:{let Xe,pt=X.stack[N(0,Re,se)];pt.ttisinteger()?X.stack[Oe].setivalue(0|-pt.value):(Xe=ft(pt))!==!1?X.stack[Oe].setfltvalue(-Xe):Ot.luaT_trybinTM(X,pt,pt,X.stack[Oe],Ot.TMS.TM_UNM);break}case y:{let Xe=X.stack[N(0,Re,se)];Xe.ttisinteger()?X.stack[Oe].setivalue(~Xe.value):Ot.luaT_trybinTM(X,Xe,Xe,X.stack[Oe],Ot.TMS.TM_BNOT);break}case xt:{let Xe=X.stack[N(0,Re,se)];X.stack[Oe].setbvalue(Xe.l_isfalse());break}case Qe:gt(X,X.stack[Oe],X.stack[N(0,Re,se)]);break;case Le:{let Xe=se.B,pt=se.C;X.top=Re+pt+1,Mt(X,pt-Xe+1);let kt=Re+Xe;we.setobjs2s(X,Oe,kt),bt.adjust_top(X,f.top);break}case _e:Z(X,f,se,0);break;case ke:_t(X,h(X,Re,pe,se),T(X,Re,pe,se))!==se.A?f.l_savedpc++:U(X,f);break;case he:xe(X,h(X,Re,pe,se),T(X,Re,pe,se))!==se.A?f.l_savedpc++:U(X,f);break;case Ye:ot(X,h(X,Re,pe,se),T(X,Re,pe,se))!==se.A?f.l_savedpc++:U(X,f);break;case Ie:(se.C?X.stack[Oe].l_isfalse():!X.stack[Oe].l_isfalse())?f.l_savedpc++:U(X,f);break;case Fe:{let Xe=N(0,Re,se),pt=X.stack[Xe];(se.C?pt.l_isfalse():!pt.l_isfalse())?f.l_savedpc++:(we.setobjs2s(X,Oe,Xe),U(X,f));break}case te:{let Xe=se.B,pt=se.C-1;if(Xe!==0&&bt.adjust_top(X,Oe+Xe),!bt.luaD_precall(X,Oe,pt)){f=X.ci;continue e}pt>=0&&bt.adjust_top(X,f.top);break}case ve:{let Xe=se.B;if(Xe!==0&&bt.adjust_top(X,Oe+Xe),!bt.luaD_precall(X,Oe,c)){let pt=X.ci,kt=pt.previous,k=pt.func,de=pt.funcOff,$=kt.funcOff,Be=pt.l_base+k.value.p.numparams;B.p.p.length>0&&dt.luaF_close(X,kt.l_base);for(let Me=0;de+Me<Be;Me++)we.setobjs2s(X,$+Me,de+Me);kt.l_base=$+(pt.l_base-de),kt.top=$+(X.top-de),bt.adjust_top(X,kt.top),kt.l_code=pt.l_code,kt.l_savedpc=pt.l_savedpc,kt.callstatus|=ht.CIST_TAIL,kt.next=null,f=X.ci=kt,Je(X.top===kt.l_base+X.stack[$].value.p.maxstacksize);continue e}break}case nt:{B.p.p.length>0&&dt.luaF_close(X,Re);let Xe=bt.luaD_poscall(X,f,Oe,se.B!==0?se.B-1:X.top-Oe);if(f.callstatus&ht.CIST_FRESH)return;f=X.ci,Xe&&bt.adjust_top(X,f.top),Je(f.callstatus&ht.CIST_LUA),Je(f.l_code[f.l_savedpc-1].opcode===te);continue e}case Ce:if(X.stack[Oe].ttisinteger()){let Xe=X.stack[Oe+2].value,pt=X.stack[Oe].value+Xe|0,kt=X.stack[Oe+1].value;(0<Xe?pt<=kt:kt<=pt)&&(f.l_savedpc+=se.sBx,X.stack[Oe].chgivalue(pt),X.stack[Oe+3].setivalue(pt))}else{let Xe=X.stack[Oe+2].value,pt=X.stack[Oe].value+Xe,kt=X.stack[Oe+1].value;(0<Xe?pt<=kt:kt<=pt)&&(f.l_savedpc+=se.sBx,X.stack[Oe].chgfltvalue(pt),X.stack[Oe+3].setfltvalue(pt))}break;case tt:{let Xe,pt=X.stack[Oe],kt=X.stack[Oe+1],k=X.stack[Oe+2];if(pt.ttisinteger()&&k.ttisinteger()&&(Xe=Vt(kt,k.value))){let de=Xe.stopnow?0:pt.value;kt.value=Xe.ilimit,pt.value=de-k.value|0}else{let de,$,Be;(de=ft(kt))===!1&&o.luaG_runerror(X,M("'for' limit must be a number",!0)),X.stack[Oe+1].setfltvalue(de),($=ft(k))===!1&&o.luaG_runerror(X,M("'for' step must be a number",!0)),X.stack[Oe+2].setfltvalue($),(Be=ft(pt))===!1&&o.luaG_runerror(X,M("'for' initial value must be a number",!0)),X.stack[Oe].setfltvalue(Be-$)}f.l_savedpc+=se.sBx;break}case it:{let Xe=Oe+3;we.setobjs2s(X,Xe+2,Oe+2),we.setobjs2s(X,Xe+1,Oe+1),we.setobjs2s(X,Xe,Oe),bt.adjust_top(X,Xe+3),bt.luaD_call(X,Xe,se.C),bt.adjust_top(X,f.top),se=f.l_code[f.l_savedpc++],Oe=u(0,Re,se),Je(se.opcode===Nt)}case Nt:X.stack[Oe+1].ttisnil()||(we.setobjs2s(X,Oe,Oe+1),f.l_savedpc+=se.sBx);break;case Ge:{let Xe=se.B,pt=se.C;Xe===0&&(Xe=X.top-Oe-1),pt===0&&(Je(f.l_code[f.l_savedpc].opcode===O),pt=f.l_code[f.l_savedpc++].Ax);let kt=X.stack[Oe].value,k=(pt-1)*q+Xe;for(;Xe>0;Xe--)Ft.luaH_setint(kt,k--,X.stack[Oe+Xe]);bt.adjust_top(X,f.top);break}case ne:{let Xe=B.p.p[se.Bx],pt=ur(Xe,B.upvals,X.stack,Re);pt===null?Ht(X,Xe,B.upvals,Re,Oe):X.stack[Oe].setclLvalue(pt);break}case jt:{let Xe,pt=se.B-1,kt=Re-f.funcOff-B.p.numparams-1;for(kt<0&&(kt=0),pt<0&&(pt=kt,bt.luaD_checkstack(X,kt),bt.adjust_top(X,Oe+kt)),Xe=0;Xe<pt&&Xe<kt;Xe++)we.setobjs2s(X,Oe+Xe,Re-kt+Xe);for(;Xe<pt;Xe++)X.stack[Oe+Xe].setnilvalue();break}case O:throw Error("invalid opcode")}}},a.exports.luaV_finishOp=function(X){let f=X.ci,B=f.l_base,pe=f.l_code[f.l_savedpc-1],Re=pe.opcode;switch(Re){case le:case Q:case Se:case ie:case fe:case ge:case z:case ee:case x:case Y:case ye:case yt:case wt:case y:case Qe:case at:case Pe:case be:we.setobjs2s(X,B+pe.A,X.top-1),delete X.stack[--X.top];break;case Ye:case he:case ke:{let se=!X.stack[X.top-1].l_isfalse();delete X.stack[--X.top],f.callstatus&ht.CIST_LEQ&&(Je(Re===Ye),f.callstatus^=ht.CIST_LEQ,se=!se),Je(f.l_code[f.l_savedpc].opcode===_e),se!==!!pe.A&&f.l_savedpc++;break}case Le:{let se=X.top-1,Oe=se-1-(B+pe.B);we.setobjs2s(X,se-2,se),Oe>1&&(X.top=se-1,Mt(X,Oe)),we.setobjs2s(X,f.l_base+pe.A,X.top-1),bt.adjust_top(X,f.top);break}case it:Je(f.l_code[f.l_savedpc].opcode===Nt),bt.adjust_top(X,f.top);break;case te:pe.C-1>=0&&bt.adjust_top(X,f.top)}},a.exports.luaV_imul=Rt,a.exports.luaV_lessequal=ot,a.exports.luaV_lessthan=xe,a.exports.luaV_mod=Ct,a.exports.luaV_objlen=gt,a.exports.luaV_rawequalobj=function(X,f){return _t(null,X,f)},a.exports.luaV_shiftl=Yt,a.exports.luaV_tointeger=Wt,a.exports.settable=dr,a.exports.tointeger=Te,a.exports.tonumber=ft},function(a,Ae,v){const R=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],A=function(L,b){return~(-1<<L)<<b},c=function(L,b){return~A(L,b)},g=function(L,b,E,S){return L.code=L.code&c(S,E)|b<<E&A(S,E),w(L)},_=function(L,b){return g(L,b,14,18)},w=function(L){if(typeof L=="number")return{code:L,opcode:L>>0&A(6,0),A:L>>6&A(8,0),B:L>>23&A(9,0),C:L>>14&A(9,0),Bx:L>>14&A(18,0),Ax:L>>6&A(26,0),sBx:(L>>14&A(18,0))-131071};{let b=L.code;return L.opcode=b>>0&A(6,0),L.A=b>>6&A(8,0),L.B=b>>23&A(9,0),L.C=b>>14&A(9,0),L.Bx=b>>14&A(18,0),L.Ax=b>>6&A(26,0),L.sBx=(b>>14&A(18,0))-131071,L}};a.exports.BITRK=256,a.exports.CREATE_ABC=function(L,b,E,S){return w(L<<0|b<<6|E<<23|S<<14)},a.exports.CREATE_ABx=function(L,b,E){return w(L<<0|b<<6|E<<14)},a.exports.CREATE_Ax=function(L,b){return w(L<<0|b<<6)},a.exports.GET_OPCODE=function(L){return L.opcode},a.exports.GETARG_A=function(L){return L.A},a.exports.GETARG_B=function(L){return L.B},a.exports.GETARG_C=function(L){return L.C},a.exports.GETARG_Bx=function(L){return L.Bx},a.exports.GETARG_Ax=function(L){return L.Ax},a.exports.GETARG_sBx=function(L){return L.sBx},a.exports.INDEXK=function(L){return-257&L},a.exports.ISK=function(L){return 256&L},a.exports.LFIELDS_PER_FLUSH=50,a.exports.MAXARG_A=255,a.exports.MAXARG_Ax=67108863,a.exports.MAXARG_B=511,a.exports.MAXARG_Bx=262143,a.exports.MAXARG_C=511,a.exports.MAXARG_sBx=131071,a.exports.MAXINDEXRK=255,a.exports.NO_REG=255,a.exports.OpArgK=3,a.exports.OpArgN=0,a.exports.OpArgR=2,a.exports.OpArgU=1,a.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],a.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},a.exports.POS_A=6,a.exports.POS_Ax=6,a.exports.POS_B=23,a.exports.POS_Bx=14,a.exports.POS_C=14,a.exports.POS_OP=0,a.exports.RKASK=function(L){return 256|L},a.exports.SETARG_A=function(L,b){return g(L,b,6,8)},a.exports.SETARG_Ax=function(L,b){return g(L,b,6,26)},a.exports.SETARG_B=function(L,b){return g(L,b,23,9)},a.exports.SETARG_Bx=_,a.exports.SETARG_C=function(L,b){return g(L,b,14,9)},a.exports.SETARG_sBx=function(L,b){return _(L,b+131071)},a.exports.SET_OPCODE=function(L,b){return L.code=L.code&c(6,0)|b<<0&A(6,0),w(L)},a.exports.SIZE_A=8,a.exports.SIZE_Ax=26,a.exports.SIZE_B=9,a.exports.SIZE_Bx=18,a.exports.SIZE_C=9,a.exports.SIZE_OP=6,a.exports.fullins=w,a.exports.getBMode=function(L){return R[L]>>4&3},a.exports.getCMode=function(L){return R[L]>>2&3},a.exports.getOpMode=function(L){return 3&R[L]},a.exports.iABC=0,a.exports.iABx=1,a.exports.iAsBx=2,a.exports.iAx=3,a.exports.testAMode=function(L){return 64&R[L]},a.exports.testTMode=function(L){return 128&R[L]}},function(a,Ae,v){const{LUA_VERSION_MAJOR:R,LUA_VERSION_MINOR:A}=v(2),c="_"+R+"_"+A;a.exports.LUA_VERSUFFIX=c,a.exports.lua_assert=function(_){},a.exports.luaopen_base=v(24).luaopen_base,a.exports.LUA_COLIBNAME="coroutine",a.exports.luaopen_coroutine=v(25).luaopen_coroutine,a.exports.LUA_TABLIBNAME="table",a.exports.luaopen_table=v(26).luaopen_table,a.exports.LUA_OSLIBNAME="os",a.exports.luaopen_os=v(27).luaopen_os,a.exports.LUA_STRLIBNAME="string",a.exports.luaopen_string=v(28).luaopen_string,a.exports.LUA_UTF8LIBNAME="utf8",a.exports.luaopen_utf8=v(29).luaopen_utf8,a.exports.LUA_BITLIBNAME="bit32",a.exports.LUA_MATHLIBNAME="math",a.exports.luaopen_math=v(30).luaopen_math,a.exports.LUA_DBLIBNAME="debug",a.exports.luaopen_debug=v(31).luaopen_debug,a.exports.LUA_LOADLIBNAME="package",a.exports.luaopen_package=v(32).luaopen_package,a.exports.LUA_FENGARILIBNAME="fengari",a.exports.luaopen_fengari=v(33).luaopen_fengari;const g=v(39);a.exports.luaL_openlibs=g.luaL_openlibs},function(a,Ae,v){const{LUA_MULTRET:R,LUA_OPBNOT:A,LUA_OPEQ:c,LUA_OPLE:g,LUA_OPLT:_,LUA_OPUNM:w,LUA_REGISTRYINDEX:L,LUA_RIDX_GLOBALS:b,LUA_VERSION_NUM:E,constant_types:{LUA_NUMTAGS:S,LUA_TBOOLEAN:I,LUA_TCCL:F,LUA_TFUNCTION:H,LUA_TLCF:V,LUA_TLCL:M,LUA_TLIGHTUSERDATA:P,LUA_TLNGSTR:G,LUA_TNIL:q,LUA_TNONE:le,LUA_TNUMFLT:ge,LUA_TNUMINT:y,LUA_TSHRSTR:z,LUA_TTABLE:ee,LUA_TTHREAD:te,LUA_TUSERDATA:ne},thread_status:{LUA_OK:Le},from_userstring:ie,to_luastring:ke}=v(1),{api_check:O}=v(4),Ce=v(11),tt=v(8),{luaU_dump:Pe}=v(37),at=v(13),re=v(6),fe=v(12),{luaS_bless:_e,luaS_new:Ye,luaS_newliteral:Qe}=v(10),vt=v(14),{LUAI_MAXSTACK:et}=v(3),rt=v(15),ct=v(9),{ZIO:he}=v(19),ye=re.TValue,De=re.CClosure,Se=function(o){o.top++,O(o,o.top<=o.ci.top,"stack overflow")},lt=function(o,u){O(o,u<o.top-o.ci.funcOff,"not enough elements in the stack")},xt=function(o){if(!o)throw TypeError("invalid argument")},yt=function(o){xt(typeof o=="number"&&(0|o)===o)},nt=function(o){return o!==re.luaO_nilobject},be=function(o,u){let N=o.ci;if(u>0){let h=N.funcOff+u;return O(o,u<=N.top-(N.funcOff+1),"unacceptable index"),h>=o.top?re.luaO_nilobject:o.stack[h]}return u>L?(O(o,u!==0&&-u<=o.top,"invalid index"),o.stack[o.top+u]):u===L?o.l_G.l_registry:(O(o,(u=L-u)<=at.MAXUPVAL+1,"upvalue index too large"),N.func.ttislcf()?re.luaO_nilobject:u<=N.func.value.nupvalues?N.func.value.upvalue[u-1]:re.luaO_nilobject)},Ge=function(o,u){let N=o.ci;if(u>0){let h=N.funcOff+u;return O(o,u<=N.top-(N.funcOff+1),"unacceptable index"),h>=o.top?null:h}if(u>L)return O(o,u!==0&&-u<=o.top,"invalid index"),o.top+u;throw Error("attempt to use pseudo-index")},J=function(o,u){let N,h=o.ci.funcOff;u>=0?(O(o,u<=o.stack_last-(h+1),"new top too large"),N=h+1+u):(O(o,-(u+1)<=o.top-(h+1),"invalid new top"),N=o.top+u+1),tt.adjust_top(o,N)},d=function(o,u){J(o,-u-1)},D=function(o,u,N){for(;u<N;u++,N--){let h=o.stack[u],T=new ye(h.type,h.value);re.setobjs2s(o,u,N),re.setobj2s(o,N,T)}},x=function(o,u,N){let h=o.top-1,T=Ge(o,u),Z=o.stack[T];O(o,nt(Z)&&u>L,"index not in the stack"),O(o,(N>=0?N:-N)<=h-T+1,"invalid 'n'");let U=N>=0?h-N:T-N-1;D(o,T,U),D(o,U+1,o.top-1),D(o,T,o.top-1)},Y=function(o,u,N){let h=be(o,u);be(o,N).setfrom(h)},Q=function(o,u,N){if(xt(typeof u=="function"),yt(N),N===0)o.stack[o.top]=new ye(V,u);else{lt(o,N),O(o,N<=at.MAXUPVAL,"upvalue index too large");let h=new De(o,u,N);for(let T=0;T<N;T++)h.upvalue[T].setfrom(o.stack[o.top-N+T]);for(let T=1;T<N;T++)delete o.stack[--o.top];N>0&&--o.top,o.stack[o.top].setclCvalue(h)}Se(o)},ve=Q,Ie=function(o,u){Q(o,u,0)},Fe=Ie,it=function(o,u,N){let h=Ye(o,ie(N));lt(o,1),re.pushsvalue2s(o,h),O(o,o.top<=o.ci.top,"stack overflow"),rt.settable(o,u,o.stack[o.top-1],o.stack[o.top-2]),delete o.stack[--o.top],delete o.stack[--o.top]},Nt=function(o,u){it(o,ct.luaH_getint(o.l_G.l_registry.value,b),u)},wt=function(o,u,N){let h=Ye(o,ie(N));return re.pushsvalue2s(o,h),O(o,o.top<=o.ci.top,"stack overflow"),rt.luaV_gettable(o,u,o.stack[o.top-1],o.top-1),o.stack[o.top-1].ttnov()},jt=function(o,u,N){let h=be(o,u);return yt(N),O(o,h.ttistable(),"table expected"),re.pushobj2s(o,ct.luaH_getint(h.value,N)),O(o,o.top<=o.ci.top,"stack overflow"),o.stack[o.top-1].ttnov()},W=function(o,u,N){let h=new re.TValue(ee,ct.luaH_new(o));o.stack[o.top]=h,Se(o)},qe=function(o,u,N){switch(yt(N),u.ttype()){case F:{let h=u.value;return 1<=N&&N<=h.nupvalues?{name:ke("",!0),val:h.upvalue[N-1]}:null}case M:{let h=u.value,T=h.p;if(!(1<=N&&N<=T.upvalues.length))return null;let Z=T.upvalues[N-1].name;return{name:Z?Z.getstr():ke("(*no name)",!0),val:h.upvals[N-1]}}default:return null}},Ze=function(o,u){let N=be(o,u);if(!N.ttisstring()){if(!rt.cvt2str(N))return null;re.luaO_tostring(o,N)}return N.svalue()},Je=Ze,We=function(o,u){return rt.tointeger(be(o,u))},we=function(o,u){return rt.tonumber(be(o,u))},dt=new WeakMap,ht=function(o,u){tt.luaD_callnoyield(o,u.funcOff,u.nresults)},Dt=function(o,u){let N=be(o,u);return nt(N)?N.ttnov():le},Bt=ke("?"),qt=function(o,u,N){O(o,N===R||o.ci.top-o.top>=N-u,"results from function overflow current stack size")},bt=function(o,u,N,h,T){O(o,T===null||!(o.ci.callstatus&fe.CIST_LUA),"cannot use continuations inside hooks"),lt(o,u+1),O(o,o.status===Le,"cannot do calls on non-normal thread"),qt(o,u,N);let Z=o.top-(u+1);T!==null&&o.nny===0?(o.ci.c_k=T,o.ci.c_ctx=h,tt.luaD_call(o,Z,N)):tt.luaD_callnoyield(o,Z,N),N===R&&o.ci.top<o.top&&(o.ci.top=o.top)},Ot=function(o,u,N,h,T,Z){let U,xe;O(o,Z===null||!(o.ci.callstatus&fe.CIST_LUA),"cannot use continuations inside hooks"),lt(o,u+1),O(o,o.status===Le,"cannot do calls on non-normal thread"),qt(o,u,N),xe=h===0?0:Ge(o,h);let ot=o.top-(u+1);if(Z===null||o.nny>0){let _t={funcOff:ot,nresults:N};U=tt.luaD_pcall(o,ht,_t,ot,xe)}else{let _t=o.ci;_t.c_k=Z,_t.c_ctx=T,_t.extra=ot,_t.c_old_errfunc=o.errfunc,o.errfunc=xe,_t.callstatus&=~fe.CIST_OAH|o.allowhook,_t.callstatus|=fe.CIST_YPCALL,tt.luaD_call(o,ot,N),_t.callstatus&=~fe.CIST_YPCALL,o.errfunc=_t.c_old_errfunc,U=Le}return N===R&&o.ci.top<o.top&&(o.ci.top=o.top),U},Ft=function(o,u,N){let h=be(o,u);O(o,h.ttisLclosure(),"Lua function expected");let T=h.value;return yt(N),O(o,1<=N&&N<=T.p.upvalues.length,"invalid upvalue index"),{f:T,i:N-1}};a.exports.api_incr_top=Se,a.exports.api_checknelems=lt,a.exports.lua_absindex=function(o,u){return u>0||u<=L?u:o.top-o.ci.funcOff+u},a.exports.lua_arith=function(o,u){u!==w&&u!==A?lt(o,2):(lt(o,1),re.pushobj2s(o,o.stack[o.top-1]),O(o,o.top<=o.ci.top,"stack overflow")),re.luaO_arith(o,u,o.stack[o.top-2],o.stack[o.top-1],o.stack[o.top-2]),delete o.stack[--o.top]},a.exports.lua_atpanic=function(o,u){let N=o.l_G.panic;return o.l_G.panic=u,N},a.exports.lua_atnativeerror=function(o,u){let N=o.l_G.atnativeerror;return o.l_G.atnativeerror=u,N},a.exports.lua_call=function(o,u,N){bt(o,u,N,0,null)},a.exports.lua_callk=bt,a.exports.lua_checkstack=function(o,u){let N,h=o.ci;return O(o,u>=0,"negative 'n'"),o.stack_last-o.top>u?N=!0:o.top+fe.EXTRA_STACK>et-u?N=!1:(tt.luaD_growstack(o,u),N=!0),N&&h.top<o.top+u&&(h.top=o.top+u),N},a.exports.lua_compare=function(o,u,N,h){let T=be(o,u),Z=be(o,N),U=0;if(nt(T)&&nt(Z))switch(h){case c:U=rt.luaV_equalobj(o,T,Z);break;case _:U=rt.luaV_lessthan(o,T,Z);break;case g:U=rt.luaV_lessequal(o,T,Z);break;default:O(o,!1,"invalid option")}return U},a.exports.lua_concat=function(o,u){lt(o,u),u>=2?rt.luaV_concat(o,u):u===0&&(re.pushsvalue2s(o,_e(o,ke("",!0))),O(o,o.top<=o.ci.top,"stack overflow"))},a.exports.lua_copy=Y,a.exports.lua_createtable=W,a.exports.lua_dump=function(o,u,N,h){lt(o,1);let T=o.stack[o.top-1];return T.ttisLclosure()?Pe(o,T.value.p,u,N,h):1},a.exports.lua_error=function(o){lt(o,1),Ce.luaG_errormsg(o)},a.exports.lua_gc=function(){},a.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},a.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},a.exports.lua_getfield=function(o,u,N){return wt(o,be(o,u),N)},a.exports.lua_getglobal=function(o,u){return wt(o,ct.luaH_getint(o.l_G.l_registry.value,b),u)},a.exports.lua_geti=function(o,u,N){let h=be(o,u);return yt(N),o.stack[o.top]=new ye(y,N),Se(o),rt.luaV_gettable(o,h,o.stack[o.top-1],o.top-1),o.stack[o.top-1].ttnov()},a.exports.lua_getmetatable=function(o,u){let N,h=be(o,u),T=!1;switch(h.ttnov()){case ee:case ne:N=h.value.metatable;break;default:N=o.l_G.mt[h.ttnov()]}return N!=null&&(o.stack[o.top]=new ye(ee,N),Se(o),T=!0),T},a.exports.lua_gettable=function(o,u){let N=be(o,u);return rt.luaV_gettable(o,N,o.stack[o.top-1],o.top-1),o.stack[o.top-1].ttnov()},a.exports.lua_gettop=function(o){return o.top-(o.ci.funcOff+1)},a.exports.lua_getupvalue=function(o,u,N){let h=qe(0,be(o,u),N);if(h){let T=h.name,Z=h.val;return re.pushobj2s(o,Z),O(o,o.top<=o.ci.top,"stack overflow"),T}return null},a.exports.lua_getuservalue=function(o,u){let N=be(o,u);O(o,N.ttisfulluserdata(),"full userdata expected");let h=N.value.uservalue;return o.stack[o.top]=new ye(h.type,h.value),Se(o),o.stack[o.top-1].ttnov()},a.exports.lua_insert=function(o,u){x(o,u,1)},a.exports.lua_isboolean=function(o,u){return Dt(o,u)===I},a.exports.lua_iscfunction=function(o,u){let N=be(o,u);return N.ttislcf(N)||N.ttisCclosure()},a.exports.lua_isfunction=function(o,u){return Dt(o,u)===H},a.exports.lua_isinteger=function(o,u){return be(o,u).ttisinteger()},a.exports.lua_islightuserdata=function(o,u){return Dt(o,u)===P},a.exports.lua_isnil=function(o,u){return Dt(o,u)===q},a.exports.lua_isnone=function(o,u){return Dt(o,u)===le},a.exports.lua_isnoneornil=function(o,u){return Dt(o,u)<=0},a.exports.lua_isnumber=function(o,u){return rt.tonumber(be(o,u))!==!1},a.exports.lua_isproxy=function(o,u){let N=dt.get(o);return!!N&&(u===null||u.l_G===N)},a.exports.lua_isstring=function(o,u){let N=be(o,u);return N.ttisstring()||rt.cvt2str(N)},a.exports.lua_istable=function(o,u){return be(o,u).ttistable()},a.exports.lua_isthread=function(o,u){return Dt(o,u)===te},a.exports.lua_isuserdata=function(o,u){let N=be(o,u);return N.ttisfulluserdata(N)||N.ttislightuserdata()},a.exports.lua_len=function(o,u){let N=be(o,u),h=new ye;rt.luaV_objlen(o,h,N),o.stack[o.top]=h,Se(o)},a.exports.lua_load=function(o,u,N,h,T){h=h?ie(h):Bt,T!==null&&(T=ie(T));let Z=new he(o,u,N),U=tt.luaD_protectedparser(o,Z,h,T);if(U===Le){let xe=o.stack[o.top-1].value;if(xe.nupvalues>=1){let ot=ct.luaH_getint(o.l_G.l_registry.value,b);xe.upvals[0].setfrom(ot)}}return U},a.exports.lua_newtable=function(o){W(o)},a.exports.lua_newuserdata=function(o,u){let N=function(h,T){return new re.Udata(h,T)}(o,u);return o.stack[o.top]=new re.TValue(ne,N),Se(o),N.data},a.exports.lua_next=function(o,u){let N=be(o,u);return O(o,N.ttistable(),"table expected"),o.stack[o.top]=new ye,ct.luaH_next(o,N.value,o.top-1)?(Se(o),1):(delete o.stack[o.top],delete o.stack[--o.top],0)},a.exports.lua_pcall=function(o,u,N,h){return Ot(o,u,N,h,0,null)},a.exports.lua_pcallk=Ot,a.exports.lua_pop=d,a.exports.lua_pushboolean=function(o,u){o.stack[o.top]=new ye(I,!!u),Se(o)},a.exports.lua_pushcclosure=Q,a.exports.lua_pushcfunction=Ie,a.exports.lua_pushfstring=function(o,u,...N){return u=ie(u),re.luaO_pushvfstring(o,u,N)},a.exports.lua_pushglobaltable=function(o){jt(o,L,b)},a.exports.lua_pushinteger=function(o,u){yt(u),o.stack[o.top]=new ye(y,u),Se(o)},a.exports.lua_pushjsclosure=ve,a.exports.lua_pushjsfunction=Fe,a.exports.lua_pushlightuserdata=function(o,u){o.stack[o.top]=new ye(P,u),Se(o)},a.exports.lua_pushliteral=function(o,u){if(u==null)o.stack[o.top]=new ye(q,null),o.top++;else{xt(typeof u=="string");let N=Qe(o,u);re.pushsvalue2s(o,N),u=N.getstr()}return O(o,o.top<=o.ci.top,"stack overflow"),u},a.exports.lua_pushlstring=function(o,u,N){let h;return yt(N),N===0?(u=ke("",!0),h=_e(o,u)):(u=ie(u),O(o,u.length>=N,"invalid length to lua_pushlstring"),h=Ye(o,u.subarray(0,N))),re.pushsvalue2s(o,h),O(o,o.top<=o.ci.top,"stack overflow"),h.value},a.exports.lua_pushnil=function(o){o.stack[o.top]=new ye(q,null),Se(o)},a.exports.lua_pushnumber=function(o,u){xt(typeof u=="number"),o.stack[o.top]=new ye(ge,u),Se(o)},a.exports.lua_pushstring=function(o,u){if(u==null)o.stack[o.top]=new ye(q,null),o.top++;else{let N=Ye(o,ie(u));re.pushsvalue2s(o,N),u=N.getstr()}return O(o,o.top<=o.ci.top,"stack overflow"),u},a.exports.lua_pushthread=function(o){return o.stack[o.top]=new ye(te,o),Se(o),o.l_G.mainthread===o},a.exports.lua_pushvalue=function(o,u){re.pushobj2s(o,be(o,u)),O(o,o.top<=o.ci.top,"stack overflow")},a.exports.lua_pushvfstring=function(o,u,N){return u=ie(u),re.luaO_pushvfstring(o,u,N)},a.exports.lua_rawequal=function(o,u,N){let h=be(o,u),T=be(o,N);return nt(h)&&nt(T)?rt.luaV_equalobj(null,h,T):0},a.exports.lua_rawget=function(o,u){let N=be(o,u);return O(o,N.ttistable(N),"table expected"),re.setobj2s(o,o.top-1,ct.luaH_get(o,N.value,o.stack[o.top-1])),o.stack[o.top-1].ttnov()},a.exports.lua_rawgeti=jt,a.exports.lua_rawgetp=function(o,u,N){let h=be(o,u);O(o,h.ttistable(),"table expected");let T=new ye(P,N);return re.pushobj2s(o,ct.luaH_get(o,h.value,T)),O(o,o.top<=o.ci.top,"stack overflow"),o.stack[o.top-1].ttnov()},a.exports.lua_rawlen=function(o,u){let N=be(o,u);switch(N.ttype()){case z:case G:return N.vslen();case ne:return N.value.len;case ee:return ct.luaH_getn(N.value);default:return 0}},a.exports.lua_rawset=function(o,u){lt(o,2);let N=be(o,u);O(o,N.ttistable(),"table expected");let h=o.stack[o.top-2],T=o.stack[o.top-1];ct.luaH_setfrom(o,N.value,h,T),ct.invalidateTMcache(N.value),delete o.stack[--o.top],delete o.stack[--o.top]},a.exports.lua_rawseti=function(o,u,N){yt(N),lt(o,1);let h=be(o,u);O(o,h.ttistable(),"table expected"),ct.luaH_setint(h.value,N,o.stack[o.top-1]),delete o.stack[--o.top]},a.exports.lua_rawsetp=function(o,u,N){lt(o,1);let h=be(o,u);O(o,h.ttistable(),"table expected");let T=new ye(P,N),Z=o.stack[o.top-1];ct.luaH_setfrom(o,h.value,T,Z),delete o.stack[--o.top]},a.exports.lua_register=function(o,u,N){Ie(o,N),Nt(o,u)},a.exports.lua_remove=function(o,u){x(o,u,-1),d(o,1)},a.exports.lua_replace=function(o,u){Y(o,-1,u),d(o,1)},a.exports.lua_rotate=x,a.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},a.exports.lua_setfield=function(o,u,N){it(o,be(o,u),N)},a.exports.lua_setglobal=Nt,a.exports.lua_seti=function(o,u,N){yt(N),lt(o,1);let h=be(o,u);o.stack[o.top]=new ye(y,N),Se(o),rt.settable(o,h,o.stack[o.top-1],o.stack[o.top-2]),delete o.stack[--o.top],delete o.stack[--o.top]},a.exports.lua_setmetatable=function(o,u){let N;lt(o,1);let h=be(o,u);switch(o.stack[o.top-1].ttisnil()?N=null:(O(o,o.stack[o.top-1].ttistable(),"table expected"),N=o.stack[o.top-1].value),h.ttnov()){case ne:case ee:h.value.metatable=N;break;default:o.l_G.mt[h.ttnov()]=N}return delete o.stack[--o.top],!0},a.exports.lua_settable=function(o,u){lt(o,2);let N=be(o,u);rt.settable(o,N,o.stack[o.top-2],o.stack[o.top-1]),delete o.stack[--o.top],delete o.stack[--o.top]},a.exports.lua_settop=J,a.exports.lua_setupvalue=function(o,u,N){let h=be(o,u);lt(o,1);let T=qe(0,h,N);if(T){let Z=T.name;return T.val.setfrom(o.stack[o.top-1]),delete o.stack[--o.top],Z}return null},a.exports.lua_setuservalue=function(o,u){lt(o,1);let N=be(o,u);O(o,N.ttisfulluserdata(),"full userdata expected"),N.value.uservalue.setfrom(o.stack[o.top-1]),delete o.stack[--o.top]},a.exports.lua_status=function(o){return o.status},a.exports.lua_stringtonumber=function(o,u){let N=new ye,h=re.luaO_str2num(u,N);return h!==0&&(o.stack[o.top]=N,Se(o)),h},a.exports.lua_toboolean=function(o,u){return!be(o,u).l_isfalse()},a.exports.lua_tocfunction=function(o,u){let N=be(o,u);return N.ttislcf()||N.ttisCclosure()?N.value:null},a.exports.lua_todataview=function(o,u){let N=Ze(o,u);return new DataView(N.buffer,N.byteOffset,N.byteLength)},a.exports.lua_tointeger=function(o,u){let N=We(o,u);return N===!1?0:N},a.exports.lua_tointegerx=We,a.exports.lua_tojsstring=function(o,u){let N=be(o,u);if(!N.ttisstring()){if(!rt.cvt2str(N))return null;re.luaO_tostring(o,N)}return N.jsstring()},a.exports.lua_tolstring=Ze,a.exports.lua_tonumber=function(o,u){let N=we(o,u);return N===!1?0:N},a.exports.lua_tonumberx=we,a.exports.lua_topointer=function(o,u){let N=be(o,u);switch(N.ttype()){case ee:case M:case F:case V:case te:case ne:case P:return N.value;default:return null}},a.exports.lua_toproxy=function(o,u){let N=be(o,u);return function(h,T,Z){let U=function(xe){O(xe,xe instanceof fe.lua_State&&h===xe.l_G,"must be from same global state"),xe.stack[xe.top]=new ye(T,Z),Se(xe)};return dt.set(U,h),U}(o.l_G,N.type,N.value)},a.exports.lua_tostring=Je,a.exports.lua_tothread=function(o,u){let N=be(o,u);return N.ttisthread()?N.value:null},a.exports.lua_touserdata=function(o,u){let N=be(o,u);switch(N.ttnov()){case ne:return N.value.data;case P:return N.value;default:return null}},a.exports.lua_type=Dt,a.exports.lua_typename=function(o,u){return O(o,le<=u&&u<S,"invalid tag"),vt.ttypename(u)},a.exports.lua_upvalueid=function(o,u,N){let h=be(o,u);switch(h.ttype()){case M:{let T=Ft(o,u,N);return T.f.upvals[T.i]}case F:{let T=h.value;return O(o,(0|N)===N&&N>0&&N<=T.nupvalues,"invalid upvalue index"),T.upvalue[N-1]}default:return O(o,!1,"closure expected"),null}},a.exports.lua_upvaluejoin=function(o,u,N,h,T){let Z=Ft(o,u,N),U=Ft(o,h,T),xe=U.f.upvals[U.i];Z.f.upvals[Z.i]=xe},a.exports.lua_version=function(o){return o===null?E:o.l_G.version},a.exports.lua_xmove=function(o,u,N){if(o!==u){lt(o,N),O(o,o.l_G===u.l_G,"moving among independent states"),O(o,u.ci.top-u.top>=N,"stack overflow"),o.top-=N;for(let h=0;h<N;h++)u.stack[u.top]=new re.TValue,re.setobj2s(u,u.top,o.stack[o.top+h]),delete o.stack[o.top+h],u.top++}}},function(a,Ae,v){const{lua_assert:R}=v(4),A=function(c){let g=c.reader(c.L,c.data);if(g===null)return-1;R(g instanceof Uint8Array,"Should only load binary of array of bytes");let _=g.length;return _===0?-1:(c.buffer=g,c.off=0,c.n=_-1,c.buffer[c.off++])};a.exports.EOZ=-1,a.exports.luaZ_buffer=function(c){return c.buffer.subarray(0,c.n)},a.exports.luaZ_buffremove=function(c,g){c.n-=g},a.exports.luaZ_fill=A,a.exports.luaZ_read=function(c,g,_,w){for(;w;){if(c.n===0){if(A(c)===-1)return w;c.n++,c.off--}let L=w<=c.n?w:c.n;for(let b=0;b<L;b++)g[_++]=c.buffer[c.off++];c.n-=L,c.n===0&&(c.buffer=null),w-=L}return 0},a.exports.luaZ_resetbuffer=function(c){c.n=0},a.exports.luaZ_resizebuffer=function(c,g,_){let w=new Uint8Array(_);g.buffer&&w.set(g.buffer),g.buffer=w},a.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},a.exports.ZIO=class{constructor(c,g,_){this.L=c,R(typeof g=="function","ZIO requires a reader"),this.reader=g,this.data=_,this.n=0,this.buffer=null,this.off=0}zgetc(){return this.n-- >0?this.buffer[this.off++]:A(this)}}},function(a,Ae,v){const{constant_types:{LUA_TBOOLEAN:R,LUA_TLNGSTR:A},thread_status:{LUA_ERRSYNTAX:c},to_luastring:g}=v(1),{LUA_MINBUFFER:_,MAX_INT:w,lua_assert:L}=v(4),b=v(11),E=v(8),{lisdigit:S,lislalnum:I,lislalpha:F,lisspace:H,lisxdigit:V}=v(22),M=v(6),{luaS_bless:P,luaS_hash:G,luaS_hashlongstr:q,luaS_new:le}=v(10),ge=v(9),{EOZ:y,luaZ_buffer:z,luaZ_buffremove:ee,luaZ_resetbuffer:te,luaZ_resizebuffer:ne}=v(19),Le=g("_ENV",!0),ie={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},ke=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map((J,d)=>g(J));class O{constructor(){this.r=NaN,this.i=NaN,this.ts=null}}class Ce{constructor(){this.token=NaN,this.seminfo=new O}}const tt=function(J,d){let D=J.buff;if(D.n+1>D.buffer.length){D.buffer.length>=w/2&&ct(J,g("lexical element too long",!0),0);let x=2*D.buffer.length;ne(J.L,D,x)}D.buffer[D.n++]=d<0?255+d+1:d},Pe=function(J,d){if(d<257)return M.luaO_pushfstring(J.L,g("'%c'",!0),d);{let D=ke[d-257];return d<289?M.luaO_pushfstring(J.L,g("'%s'",!0),D):D}},at=function(J){return J.current===10||J.current===13},re=function(J){J.current=J.z.zgetc()},fe=function(J){tt(J,J.current),re(J)},_e=new M.TValue(R,!0),Ye=function(J,d){let D=J.L,x=le(D,d),Y=J.h.strong.get(q(x));if(Y)x=Y.key.tsvalue();else{let Q=new M.TValue(A,x);ge.luaH_setfrom(D,J.h,Q,_e)}return x},Qe=function(J){let d=J.current;L(at(J)),re(J),at(J)&&J.current!==d&&re(J),++J.linenumber>=w&&ct(J,g("chunk has too many lines",!0),0)},vt=function(J,d){return J.current===d&&(re(J),!0)},et=function(J,d){return(J.current===d[0].charCodeAt(0)||J.current===d[1].charCodeAt(0))&&(fe(J),!0)},rt=function(J,d){let D="Ee",x=J.current;for(L(S(J.current)),fe(J),x===48&&et(J,"xX")&&(D="Pp");;)if(et(J,D)&&et(J,"-+"),V(J.current))fe(J);else{if(J.current!==46)break;fe(J)}let Y=new M.TValue;return M.luaO_str2num(z(J.buff),Y)===0&&ct(J,g("malformed number",!0),290),Y.ttisinteger()?(d.i=Y.value,291):(L(Y.ttisfloat()),d.r=Y.value,290)},ct=function(J,d,D){d=b.luaG_addinfo(J.L,d,J.source,J.linenumber),D&&M.luaO_pushfstring(J.L,g("%s near %s"),d,function(x,Y){switch(Y){case 292:case 293:case 290:case 291:return M.luaO_pushfstring(x.L,g("'%s'",!0),z(x.buff));default:return Pe(x,Y)}}(J,D)),E.luaD_throw(J.L,c)},he=function(J){let d=0,D=J.current;for(L(D===91||D===93),fe(J);J.current===61;)fe(J),d++;return J.current===D?d:-d-1},ye=function(J,d,D){let x=J.linenumber;fe(J),at(J)&&Qe(J);let Y=!1;for(;!Y;)switch(J.current){case y:ct(J,g(`unfinished long ${d?"string":"comment"} (starting at line ${x})`),289);break;case 93:he(J)===D&&(fe(J),Y=!0);break;case 10:case 13:tt(J,10),Qe(J),d||te(J.buff);break;default:d?fe(J):re(J)}d&&(d.ts=Ye(J,J.buff.buffer.subarray(2+D,J.buff.n-(2+D))))},De=function(J,d,D){d||(J.current!==y&&fe(J),ct(J,D,293))},Se=function(J){return fe(J),De(J,V(J.current),g("hexadecimal digit expected",!0)),M.luaO_hexavalue(J.current)},lt=function(J){let d=Se(J);return d=(d<<4)+Se(J),ee(J.buff,2),d},xt=function(J){let d=new Uint8Array(M.UTF8BUFFSZ),D=M.luaO_utf8esc(d,function(x){let Y=4;fe(x),De(x,x.current===123,g("missing '{'",!0));let Q=Se(x);for(fe(x);V(x.current);)Y++,Q=(Q<<4)+M.luaO_hexavalue(x.current),De(x,Q<=1114111,g("UTF-8 value too large",!0)),fe(x);return De(x,x.current===125,g("missing '}'",!0)),re(x),ee(x.buff,Y),Q}(J));for(;D>0;D--)tt(J,d[M.UTF8BUFFSZ-D])},yt=function(J){let d,D=0;for(d=0;d<3&&S(J.current);d++)D=10*D+J.current-48,fe(J);return De(J,D<=255,g("decimal escape too large",!0)),ee(J.buff,d),D},nt=function(J,d,D){for(fe(J);J.current!==d;)switch(J.current){case y:ct(J,g("unfinished string",!0),289);break;case 10:case 13:ct(J,g("unfinished string",!0),293);break;case 92:{let x,Y;switch(fe(J),J.current){case 97:Y=7,x="read_save";break;case 98:Y=8,x="read_save";break;case 102:Y=12,x="read_save";break;case 110:Y=10,x="read_save";break;case 114:Y=13,x="read_save";break;case 116:Y=9,x="read_save";break;case 118:Y=11,x="read_save";break;case 120:Y=lt(J),x="read_save";break;case 117:xt(J),x="no_save";break;case 10:case 13:Qe(J),Y=10,x="only_save";break;case 92:case 34:case 39:Y=J.current,x="read_save";break;case y:x="no_save";break;case 122:for(ee(J.buff,1),re(J);H(J.current);)at(J)?Qe(J):re(J);x="no_save";break;default:De(J,S(J.current),g("invalid escape sequence",!0)),Y=yt(J),x="only_save"}x==="read_save"&&re(J),x!=="read_save"&&x!=="only_save"||(ee(J.buff,1),tt(J,Y));break}default:fe(J)}fe(J),D.ts=Ye(J,J.buff.buffer.subarray(1,J.buff.n-1))},be=Object.create(null);ke.forEach((J,d)=>be[G(J)]=d);const Ge=function(J,d){for(te(J.buff);;)switch(L(typeof J.current=="number"),J.current){case 10:case 13:Qe(J);break;case 32:case 12:case 9:case 11:re(J);break;case 45:if(re(J),J.current!==45)return 45;if(re(J),J.current===91){let D=he(J);if(te(J.buff),D>=0){ye(J,null,D),te(J.buff);break}}for(;!at(J)&&J.current!==y;)re(J);break;case 91:{let D=he(J);return D>=0?(ye(J,d,D),293):(D!==-1&&ct(J,g("invalid long string delimiter",!0),293),91)}case 61:return re(J),vt(J,61)?282:61;case 60:return re(J),vt(J,61)?284:vt(J,60)?286:60;case 62:return re(J),vt(J,61)?283:vt(J,62)?287:62;case 47:return re(J),vt(J,47)?279:47;case 126:return re(J),vt(J,61)?285:126;case 58:return re(J),vt(J,58)?288:58;case 34:case 39:return nt(J,J.current,d),293;case 46:return fe(J),vt(J,46)?vt(J,46)?281:280:S(J.current)?rt(J,d):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return rt(J,d);case y:return 289;default:if(F(J.current)){do fe(J);while(I(J.current));let D=Ye(J,z(J.buff));d.ts=D;let x=be[q(D)];return x!==void 0&&x<=22?x+257:292}{let D=J.current;return re(J),D}}};a.exports.FIRST_RESERVED=257,a.exports.LUA_ENV=Le,a.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new Ce,this.lookahead=new Ce,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},a.exports.RESERVED=ie,a.exports.isreserved=function(J){let d=be[q(J)];return d!==void 0&&d<=22},a.exports.luaX_lookahead=function(J){return L(J.lookahead.token===289),J.lookahead.token=Ge(J,J.lookahead.seminfo),J.lookahead.token},a.exports.luaX_newstring=Ye,a.exports.luaX_next=function(J){J.lastline=J.linenumber,J.lookahead.token!==289?(J.t.token=J.lookahead.token,J.t.seminfo.i=J.lookahead.seminfo.i,J.t.seminfo.r=J.lookahead.seminfo.r,J.t.seminfo.ts=J.lookahead.seminfo.ts,J.lookahead.token=289):J.t.token=Ge(J,J.t.seminfo)},a.exports.luaX_setinput=function(J,d,D,x,Y){d.t={token:0,seminfo:new O},d.L=J,d.current=Y,d.lookahead={token:289,seminfo:new O},d.z=D,d.fs=null,d.linenumber=1,d.lastline=1,d.source=x,d.envn=P(J,Le),ne(J,d.buff,_)},a.exports.luaX_syntaxerror=function(J,d){ct(J,d,J.t.token)},a.exports.luaX_token2str=Pe,a.exports.luaX_tokens=ke},function(a,Ae,v){const{lua:R,lauxlib:A,lualib:c,to_luastring:g}=v(0),{LUA_MULTRET:_,LUA_OK:w,LUA_REGISTRYINDEX:L,LUA_RIDX_MAINTHREAD:b,LUA_TBOOLEAN:E,LUA_TFUNCTION:S,LUA_TLIGHTUSERDATA:I,LUA_TNIL:F,LUA_TNONE:H,LUA_TNUMBER:V,LUA_TSTRING:M,LUA_TTABLE:P,LUA_TTHREAD:G,LUA_TUSERDATA:q,lua_atnativeerror:le,lua_call:ge,lua_getfield:y,lua_gettable:z,lua_gettop:ee,lua_isnil:te,lua_isproxy:ne,lua_newuserdata:Le,lua_pcall:ie,lua_pop:ke,lua_pushboolean:O,lua_pushcfunction:Ce,lua_pushinteger:tt,lua_pushlightuserdata:Pe,lua_pushliteral:at,lua_pushnil:re,lua_pushnumber:fe,lua_pushstring:_e,lua_pushvalue:Ye,lua_rawgeti:Qe,lua_rawgetp:vt,lua_rawsetp:et,lua_rotate:rt,lua_setfield:ct,lua_settable:he,lua_settop:ye,lua_toboolean:De,lua_tojsstring:Se,lua_tonumber:lt,lua_toproxy:xt,lua_tothread:yt,lua_touserdata:nt,lua_type:be}=R,{luaL_argerror:Ge,luaL_checkany:J,luaL_checkoption:d,luaL_checkstack:D,luaL_checkudata:x,luaL_error:Y,luaL_getmetafield:Q,luaL_newlib:ve,luaL_newmetatable:Ie,luaL_requiref:Fe,luaL_setfuncs:it,luaL_setmetatable:Nt,luaL_testudata:wt,luaL_tolstring:jt}=A,{luaopen_base:W}=c,qe=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:(0,eval)("this");let Ze,Je,We;if(typeof Reflect<"u")Ze=Reflect.apply,Je=Reflect.construct,We=Reflect.deleteProperty;else{const ae=Function.apply,ze=Function.bind;Ze=function(Ee,gt,Rt){return ae.call(Ee,gt,Rt)},Je=function(Ee,gt){switch(gt.length){case 0:return new Ee;case 1:return new Ee(gt[0]);case 2:return new Ee(gt[0],gt[1]);case 3:return new Ee(gt[0],gt[1],gt[2]);case 4:return new Ee(gt[0],gt[1],gt[2],gt[3])}let Rt=[null];return Rt.push.apply(Rt,gt),new(ze.apply(Ee,Rt))},We=Function("t","k","delete t[k]")}const we=String.prototype.concat.bind(""),dt=function(ae){return typeof ae=="object"?ae!==null:typeof ae=="function"},ht=g("js object"),Dt=function(ae,ze){let Ee=wt(ae,ze,ht);return Ee?Ee.data:void 0},Bt=function(ae,ze){return x(ae,ze,ht).data},qt=function(ae,ze){Le(ae).data=ze,Nt(ae,ht)},bt=function(ae){Qe(ae,L,b);let ze=yt(ae,-1);return ke(ae,1),ze},Ot=new WeakMap,Ft=function(ae,ze){switch(typeof ze){case"undefined":re(ae);break;case"number":fe(ae,ze);break;case"string":_e(ae,g(ze));break;case"boolean":O(ae,ze);break;case"symbol":Pe(ae,ze);break;case"function":if(ne(ze,ae)){ze(ae);break}case"object":if(ze===null){if(vt(ae,L,null)!==q)throw Error("js library not loaded into lua_State");break}default:{let Ee=Ot.get(bt(ae));if(!Ee)throw Error("js library not loaded into lua_State");let gt=Ee.get(ze);gt?gt(ae):(qt(ae,ze),gt=xt(ae,-1),Ee.set(ze,gt))}}},o=function(ae){let ze=nt(ae,1);return Ft(ae,ze),1},u=function(ae,ze){switch(be(ae,ze)){case H:case F:return;case E:return De(ae,ze);case I:return nt(ae,ze);case V:return lt(ae,ze);case M:return Se(ae,ze);case q:{let Ee=Dt(ae,ze);if(Ee!==void 0)return Ee}case P:case S:case G:default:return Wt(ae,xt(ae,ze))}},N=function(ae,ze){let Ee=ie(ae,ze,1,0),gt=u(ae,-1);switch(ke(ae,1),Ee){case w:return gt;default:throw gt}},h=function(ae,ze,Ee,gt,Rt){if(!dt(gt))throw new TypeError("`args` argument must be an object");let Ut=+gt.length;Ut>=0||(Ut=0),D(ae,2+Ut,null);let Ct=ee(ae);ze(ae),Ft(ae,Ee);for(let Yt=0;Yt<Ut;Yt++)Ft(ae,gt[Yt]);switch(ie(ae,1+Ut,Rt,0)){case w:{let Yt=ee(ae)-Ct,ur=new Array(Yt);for(let Ht=0;Ht<Yt;Ht++)ur[Ht]=u(ae,Ct+Ht+1);return ye(ae,Ct),ur}default:{let Yt=u(ae,-1);throw ye(ae,Ct),Yt}}},T=function(ae){return z(ae,1),1},Z=function(ae,ze,Ee){return D(ae,3,null),Ce(ae,T),ze(ae),Ft(ae,Ee),N(ae,2)},U=function(ae,ze,Ee){switch(D(ae,3,null),Ce(ae,T),ze(ae),Ft(ae,Ee),ie(ae,2,1,0)){case w:{let gt=te(ae,-1);return ke(ae,1),!gt}default:{let gt=u(ae,-1);throw ke(ae,1),gt}}},xe=function(ae,ze,Ee,gt){switch(D(ae,4,null),Ce(ae,function(Rt){return he(Rt,1),0}),ze(ae),Ft(ae,Ee),Ft(ae,gt),ie(ae,3,0,0)){case w:return;default:{let Rt=u(ae,-1);throw ke(ae,1),Rt}}},ot=function(ae,ze,Ee){switch(D(ae,4,null),Ce(ae,function(gt){return he(gt,1),0}),ze(ae),Ft(ae,Ee),re(ae),ie(ae,3,0,0)){case w:return;default:{let gt=u(ae,-1);throw ke(ae,1),gt}}},_t=function(ae,ze){return D(ae,2,null),Ce(ae,function(Ee){return jt(Ee,1),1}),ze(ae),N(ae,1)},Vt=function(){let ae=this.L;D(ae,3,null);let ze=ee(ae);switch(this.iter(ae),this.state(ae),this.last(ae),ie(ae,2,_,0)){case w:{let Ee;if(this.last=xt(ae,ze+1),te(ae,-1))Ee={done:!0,value:void 0};else{let gt=ee(ae)-ze,Rt=new Array(gt);for(let Ut=0;Ut<gt;Ut++)Rt[Ut]=u(ae,ze+Ut+1);Ee={done:!1,value:Rt}}return ye(ae,ze),Ee}default:{let Ee=u(ae,-1);throw ke(ae,1),Ee}}},Wt=function(ae,ze){const Ee=bt(ae);let gt=function(){return h(Ee,ze,this,arguments,1)[0]};gt.apply=function(Ut,Ct){return h(Ee,ze,Ut,Ct,1)[0]},gt.invoke=function(Ut,Ct){return h(Ee,ze,Ut,Ct,_)},gt.get=function(Ut){return Z(Ee,ze,Ut)},gt.has=function(Ut){return U(Ee,ze,Ut)},gt.set=function(Ut,Ct){return xe(Ee,ze,Ut,Ct)},gt.delete=function(Ut){return ot(Ee,ze,Ut)},gt.toString=function(){return _t(Ee,ze)},typeof Symbol=="function"&&(gt[Symbol.toStringTag]="Fengari object",gt[Symbol.iterator]=function(){return function(Ut,Ct){switch(D(Ut,1,null),Ce(Ut,function(Yt){return Fe(Yt,g("_G"),W,0),y(Yt,-1,g("pairs")),Ct(Yt),ge(Yt,1,3),3}),ie(Ut,0,3,0)){case w:{let Yt=xt(Ut,-3),ur=xt(Ut,-2),Ht=xt(Ut,-1);return ke(Ut,3),{L:Ut,iter:Yt,state:ur,last:Ht,next:Vt}}default:{let Yt=u(Ut,-1);throw ke(Ut,1),Yt}}}(Ee,ze)},Symbol.toPrimitive&&(gt[Symbol.toPrimitive]=function(Ut){if(Ut==="string")return _t(Ee,ze)}));let Rt=Ot.get(Ee);if(!Rt)throw Error("js library not loaded into lua_State");return Rt.set(gt,ze),gt},Te={new:function(ae){let ze=u(ae,1),Ee=ee(ae)-1,gt=new Array(Ee);for(let Rt=0;Rt<Ee;Rt++)gt[Rt]=u(ae,Rt+2);return Ft(ae,Je(ze,gt)),1},tonumber:function(ae){let ze=u(ae,1);return fe(ae,+ze),1},tostring:function(ae){let ze=u(ae,1);return at(ae,we(ze)),1},instanceof:function(ae){let ze=u(ae,1),Ee=u(ae,2);return O(ae,ze instanceof Ee),1},typeof:function(ae){let ze=u(ae,1);return at(ae,typeof ze),1}};if(typeof Symbol=="function"&&Symbol.iterator){const ae=function(Ee,gt){let Rt=Bt(Ee,gt),Ut=Rt[Symbol.iterator];Ut||Ge(Ee,gt,g("object not iterable"));let Ct=Ze(Ut,Rt,[]);return dt(Ct)||Ge(Ee,gt,g("Result of the Symbol.iterator method is not an object")),Ct},ze=function(Ee){let gt=u(Ee,1).next();return gt.done?0:(Ft(Ee,gt.value),1)};Te.of=function(Ee){let gt=ae(Ee,1);return Ce(Ee,ze),Ft(Ee,gt),2}}if(typeof Proxy=="function"&&typeof Symbol=="function"){const ae=Symbol("lua_State"),ze=Symbol("fengari-proxy"),Ee={apply:function(Ht,$t,Zt){return h(Ht[ae],Ht[ze],$t,Zt,1)[0]},construct:function(Ht,$t){let Zt=Ht[ae],ir=Ht[ze],nr=$t.length;D(Zt,2+nr,null),ir(Zt);let sr=ee(Zt);if(Q(Zt,sr,g("construct"))===F)throw ke(Zt,1),new TypeError("not a constructor");rt(Zt,sr,1);for(let Mt=0;Mt<nr;Mt++)Ft(Zt,$t[Mt]);return N(Zt,1+nr)},defineProperty:function(Ht,$t,Zt){let ir=Ht[ae],nr=Ht[ze];return D(ir,4,null),nr(ir),Q(ir,-1,g("defineProperty"))===F?(ke(ir,1),!1):(rt(ir,-2,1),Ft(ir,$t),Ft(ir,Zt),N(ir,3))},deleteProperty:function(Ht,$t){return ot(Ht[ae],Ht[ze],$t)},get:function(Ht,$t){return Z(Ht[ae],Ht[ze],$t)},getOwnPropertyDescriptor:function(Ht,$t){let Zt=Ht[ae],ir=Ht[ze];if(D(Zt,3,null),ir(Zt),Q(Zt,-1,g("getOwnPropertyDescriptor"))!==F)return rt(Zt,-2,1),Ft(Zt,$t),N(Zt,2);ke(Zt,1)},getPrototypeOf:function(Ht){let $t=Ht[ae],Zt=Ht[ze];return D($t,2,null),Zt($t),Q($t,-1,g("getPrototypeOf"))===F?(ke($t,1),null):(rt($t,-2,1),N($t,1))},has:function(Ht,$t){return U(Ht[ae],Ht[ze],$t)},ownKeys:function(Ht){let $t=Ht[ae],Zt=Ht[ze];if(D($t,2,null),Zt($t),Q($t,-1,g("ownKeys"))===F)throw ke($t,1),Error("ownKeys unknown for fengari object");return rt($t,-2,1),N($t,1)},set:function(Ht,$t,Zt){return xe(Ht[ae],Ht[ze],$t,Zt),!0},setPrototypeOf:function(Ht,$t){let Zt=Ht[ae],ir=Ht[ze];return D(Zt,3,null),ir(Zt),Q(Zt,-1,g("setPrototypeOf"))===F?(ke(Zt,1),!1):(rt(Zt,-2,1),Ft(Zt,$t),N(Zt,2))}},gt=function(){let Ht=(function(){}).bind();return delete Ht.length,delete Ht.name,Ht},Rt=Function("return ()=>void 0;"),Ut=function(){let Ht=Rt();return delete Ht.length,delete Ht.name,Ht},Ct=function(Ht,$t,Zt){const ir=bt(Ht);let nr;switch(Zt){case"function":nr=gt();break;case"arrow_function":nr=Ut();break;case"object":nr={};break;default:throw TypeError("invalid type to createproxy")}return nr[ze]=$t,nr[ae]=ir,new Proxy(nr,Ee)},Yt=["function","arrow_function","object"],ur=Yt.map(Ht=>g(Ht));Te.createproxy=function(Ht){J(Ht,1);let $t=Yt[d(Ht,2,ur[0],ur)],Zt=Ct(Ht,xt(Ht,1),$t);return Ft(Ht,Zt),1}}let ft={__index:function(ae){let ze=Bt(ae,1),Ee=u(ae,2);return Ft(ae,ze[Ee]),1},__newindex:function(ae){let ze=Bt(ae,1),Ee=u(ae,2),gt=u(ae,3);return gt===void 0?We(ze,Ee):ze[Ee]=gt,0},__tostring:function(ae){let ze=Bt(ae,1),Ee=we(ze);return _e(ae,g(Ee)),1},__call:function(ae){let ze,Ee=Bt(ae,1),gt=ee(ae)-1,Rt=new Array(Math.max(0,gt-1));if(gt>0&&(ze=u(ae,2),gt-- >0))for(let Ut=0;Ut<gt;Ut++)Rt[Ut]=u(ae,Ut+3);return Ft(ae,Ze(Ee,ze,Rt)),1},__pairs:function(ae){let ze,Ee,gt,Rt,Ut=Bt(ae,1);if(typeof Symbol!="function"||(ze=Ut[Symbol.for("__pairs")])===void 0)Ee=function(Ct){if(this.index>=this.keys.length)return;let Yt=this.keys[this.index++];return[Yt,this.object[Yt]]},gt={object:Ut,keys:Object.keys(Ut),index:0};else{let Ct=Ze(ze,Ut,[]);Ct===void 0&&Y(ae,g("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)")),(Ee=Ct.iter)===void 0&&Y(ae,g("bad '__pairs' result (object.iter is missing)")),gt=Ct.state,Rt=Ct.first}return Ce(ae,function(){let Ct=u(ae,1),Yt=u(ae,2),ur=Ze(Ee,Ct,[Yt]);if(ur===void 0)return 0;Array.isArray(ur)||Y(ae,g("bad iterator result (Array or undefined expected)")),D(ae,ur.length,null);for(let Ht=0;Ht<ur.length;Ht++)Ft(ae,ur[Ht]);return ur.length}),Ft(ae,gt),Ft(ae,Rt),3},__len:function(ae){let ze,Ee,gt=Bt(ae,1);return Ee=typeof Symbol!="function"||(ze=gt[Symbol.for("__len")])===void 0?gt.length:Ze(ze,gt,[]),Ft(ae,Ee),1}};a.exports.FENGARI_INTEROP_VERSION="0.1",a.exports.FENGARI_INTEROP_VERSION_NUM=1,a.exports.FENGARI_INTEROP_RELEASE="0.1.2",a.exports.checkjs=Bt,a.exports.testjs=Dt,a.exports.pushjs=qt,a.exports.push=Ft,a.exports.tojs=u,a.exports.luaopen_js=function(ae){return Ot.set(bt(ae),new WeakMap),le(ae,o),ve(ae,Te),at(ae,"0.1"),ct(ae,-2,g("_VERSION")),tt(ae,1),ct(ae,-2,g("_VERSION_NUM")),at(ae,"0.1.2"),ct(ae,-2,g("_RELEASE")),Ie(ae,ht),it(ae,ft,0),ke(ae,1),qt(ae,null),Ye(ae,-1),et(ae,L,null),ct(ae,-2,g("null")),Ft(ae,qe),ct(ae,-2,g("global")),1}},function(a,Ae,v){const{luastring_of:R}=v(1),A=R(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);a.exports.lisdigit=function(c){return(2&A[c+1])!=0},a.exports.lislalnum=function(c){return(3&A[c+1])!=0},a.exports.lislalpha=function(c){return(1&A[c+1])!=0},a.exports.lisprint=function(c){return(4&A[c+1])!=0},a.exports.lisspace=function(c){return(8&A[c+1])!=0},a.exports.lisxdigit=function(c){return(16&A[c+1])!=0}},function(a,Ae,v){const{LUA_MULTRET:R,to_luastring:A}=v(1),{BinOpr:{OPR_ADD:c,OPR_AND:g,OPR_BAND:_,OPR_BOR:w,OPR_BXOR:L,OPR_CONCAT:b,OPR_DIV:E,OPR_EQ:S,OPR_GE:I,OPR_GT:F,OPR_IDIV:H,OPR_LE:V,OPR_LT:M,OPR_MOD:P,OPR_MUL:G,OPR_NE:q,OPR_NOBINOPR:le,OPR_OR:ge,OPR_POW:y,OPR_SHL:z,OPR_SHR:ee,OPR_SUB:te},UnOpr:{OPR_BNOT:ne,OPR_LEN:Le,OPR_MINUS:ie,OPR_NOT:ke,OPR_NOUNOPR:O},NO_JUMP:Ce,getinstruction:tt,luaK_checkstack:Pe,luaK_codeABC:at,luaK_codeABx:re,luaK_codeAsBx:fe,luaK_codek:_e,luaK_concat:Ye,luaK_dischargevars:Qe,luaK_exp2RK:vt,luaK_exp2anyreg:et,luaK_exp2anyregup:rt,luaK_exp2nextreg:ct,luaK_exp2val:he,luaK_fixline:ye,luaK_getlabel:De,luaK_goiffalse:Se,luaK_goiftrue:lt,luaK_indexed:xt,luaK_infix:yt,luaK_intK:nt,luaK_jump:be,luaK_jumpto:Ge,luaK_nil:J,luaK_patchclose:d,luaK_patchlist:D,luaK_patchtohere:x,luaK_posfix:Y,luaK_prefix:Q,luaK_reserveregs:ve,luaK_ret:Ie,luaK_self:Fe,luaK_setlist:it,luaK_setmultret:Nt,luaK_setoneret:wt,luaK_setreturns:jt,luaK_storevar:W,luaK_stringK:qe}=v(35),Ze=v(8),Je=v(13),We=v(20),{LUAI_MAXCCALLS:we,MAX_INT:dt,lua_assert:ht}=v(4),Dt=v(6),{OpCodesI:{OP_CALL:Bt,OP_CLOSURE:qt,OP_FORLOOP:bt,OP_FORPREP:Ot,OP_GETUPVAL:Ft,OP_MOVE:o,OP_NEWTABLE:u,OP_SETTABLE:N,OP_TAILCALL:h,OP_TFORCALL:T,OP_TFORLOOP:Z,OP_VARARG:U},LFIELDS_PER_FLUSH:xe,SETARG_B:ot,SETARG_C:_t,SET_OPCODE:Vt}=v(16),{luaS_eqlngstr:Wt,luaS_new:Te,luaS_newliteral:ft}=v(10),ae=v(9),ze=Je.Proto,Ee=We.RESERVED,gt=function(j){return j===Ct.VCALL||j===Ct.VVARARG},Rt=function(j,me){return Wt(j,me)};class Ut{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}}const Ct={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14};class Yt{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(me){this.k=me.k,this.u=me.u,this.t=me.t,this.f=me.f}}class ur{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}}class Ht{constructor(){this.arr=[],this.n=NaN,this.size=NaN}}const $t=function(j,me){j.t.token=0,We.luaX_syntaxerror(j,me)},Zt=function(j,me){We.luaX_syntaxerror(j,Dt.luaO_pushfstring(j.L,A("%s expected",!0),We.luaX_token2str(j,me)))},ir=function(j,me,Ve,st){me>Ve&&function($e,Ke,mt){let Tt=$e.ls.L,rr=$e.f.linedefined,ar=rr===0?A("main function",!0):Dt.luaO_pushfstring(Tt,A("function at line %d",!0),rr),Nr=Dt.luaO_pushfstring(Tt,A("too many %s (limit is %d) in %s",!0),mt,Ke,ar);We.luaX_syntaxerror($e.ls,Nr)}(j,Ve,st)},nr=function(j,me){return j.t.token===me&&(We.luaX_next(j),!0)},sr=function(j,me){j.t.token!==me&&Zt(j,me)},Mt=function(j,me){sr(j,me),We.luaX_next(j)},pr=function(j,me,Ve){me||We.luaX_syntaxerror(j,Ve)},dr=function(j,me,Ve,st){nr(j,me)||(st===j.linenumber?Zt(j,me):We.luaX_syntaxerror(j,Dt.luaO_pushfstring(j.L,A("%s expected (to close %s at line %d)"),We.luaX_token2str(j,me),We.luaX_token2str(j,Ve),st)))},X=function(j){sr(j,Ee.TK_NAME);let me=j.t.seminfo.ts;return We.luaX_next(j),me},f=function(j,me,Ve){j.f=j.t=Ce,j.k=me,j.u.info=Ve},B=function(j,me,Ve){f(me,Ct.VK,qe(j.fs,Ve))},pe=function(j,me){B(j,me,X(j))},Re=function(j,me){let Ve=j.fs,st=j.dyd,$e=function(Ke,mt){let Tt=Ke.fs,rr=Tt.f;return rr.locvars[Tt.nlocvars]=new Dt.LocVar,rr.locvars[Tt.nlocvars].varname=mt,Tt.nlocvars++}(j,me);ir(Ve,st.actvar.n+1-Ve.firstlocal,200,A("local variables",!0)),st.actvar.arr[st.actvar.n]=new class{constructor(){this.idx=NaN}},st.actvar.arr[st.actvar.n].idx=$e,st.actvar.n++},se=function(j,me){Re(j,We.luaX_newstring(j,A(me,!0)))},Oe=function(j,me){let Ve=j.ls.dyd.actvar.arr[j.firstlocal+me].idx;return ht(Ve<j.nlocvars),j.f.locvars[Ve]},Xe=function(j,me){let Ve=j.fs;for(Ve.nactvar=Ve.nactvar+me;me;me--)Oe(Ve,Ve.nactvar-me).startpc=Ve.pc},pt=function(j,me,Ve){let st=j.f;return ir(j,j.nups+1,Je.MAXUPVAL,A("upvalues",!0)),st.upvalues[j.nups]={instack:Ve.k===Ct.VLOCAL,idx:Ve.u.info,name:me},j.nups++},kt=function(j,me,Ve,st){if(j===null)f(Ve,Ct.VVOID,0);else{let $e=function(Ke,mt){for(let Tt=Ke.nactvar-1;Tt>=0;Tt--)if(Rt(mt,Oe(Ke,Tt).varname))return Tt;return-1}(j,me);if($e>=0)f(Ve,Ct.VLOCAL,$e),st||function(Ke,mt){let Tt=Ke.bl;for(;Tt.nactvar>mt;)Tt=Tt.previous;Tt.upval=1}(j,$e);else{let Ke=function(mt,Tt){let rr=mt.f.upvalues;for(let ar=0;ar<mt.nups;ar++)if(Rt(rr[ar].name,Tt))return ar;return-1}(j,me);if(Ke<0){if(kt(j.prev,me,Ve,0),Ve.k===Ct.VVOID)return;Ke=pt(j,me,Ve)}f(Ve,Ct.VUPVAL,Ke)}}},k=function(j,me){let Ve=X(j),st=j.fs;if(kt(st,Ve,me,1),me.k===Ct.VVOID){let $e=new Yt;kt(st,j.envn,me,1),ht(me.k!==Ct.VVOID),B(j,$e,Ve),xt(st,me,$e)}},de=function(j,me,Ve,st){let $e=j.fs,Ke=me-Ve;if(gt(st.k))++Ke<0&&(Ke=0),jt($e,st,Ke),Ke>1&&ve($e,Ke-1);else if(st.k!==Ct.VVOID&&ct($e,st),Ke>0){let mt=$e.freereg;ve($e,Ke),J($e,mt,Ke)}Ve>me&&(j.fs.freereg-=Ve-me)},$=function(j){let me=j.L;++me.nCcalls,ir(j.fs,me.nCcalls,we,A("JS levels",!0))},Be=function(j){return j.L.nCcalls--},Me=function(j,me,Ve){let st=j.fs,$e=j.dyd.gt,Ke=$e.arr[me];if(ht(Rt(Ke.name,Ve.name)),Ke.nactvar<Ve.nactvar){let mt=Oe(st,Ke.nactvar).varname,Tt=Dt.luaO_pushfstring(j.L,A("<goto %s> at line %d jumps into the scope of local '%s'"),Ke.name.getstr(),Ke.line,mt.getstr());$t(j,Tt)}D(st,Ke.pc,Ve.pc);for(let mt=me;mt<$e.n-1;mt++)$e.arr[mt]=$e.arr[mt+1];$e.n--},Ne=function(j,me){let Ve=j.fs.bl,st=j.dyd,$e=st.gt.arr[me];for(let Ke=Ve.firstlabel;Ke<st.label.n;Ke++){let mt=st.label.arr[Ke];if(Rt(mt.name,$e.name))return $e.nactvar>mt.nactvar&&(Ve.upval||st.label.n>Ve.firstlabel)&&d(j.fs,$e.pc,mt.nactvar),Me(j,me,mt),!0}return!1},St=function(j,me,Ve,st,$e){let Ke=me.n;return me.arr[Ke]=new class{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}},me.arr[Ke].name=Ve,me.arr[Ke].line=st,me.arr[Ke].nactvar=j.fs.nactvar,me.arr[Ke].pc=$e,me.n=Ke+1,Ke},Gt=function(j,me){let Ve=j.dyd.gt,st=j.fs.bl.firstgoto;for(;st<Ve.n;)Rt(Ve.arr[st].name,me.name)?Me(j,st,me):st++},Xt=function(j,me,Ve){me.isloop=Ve,me.nactvar=j.nactvar,me.firstlabel=j.ls.dyd.label.n,me.firstgoto=j.ls.dyd.gt.n,me.upval=0,me.previous=j.bl,j.bl=me,ht(j.freereg===j.nactvar)},tr=function(j,me,Ve){me.prev=j.fs,me.ls=j,j.fs=me,me.pc=0,me.lasttarget=0,me.jpc=Ce,me.freereg=0,me.nk=0,me.np=0,me.nups=0,me.nlocvars=0,me.nactvar=0,me.firstlocal=j.dyd.actvar.n,me.bl=null;let st=me.f;st.source=j.source,st.maxstacksize=2,Xt(me,Ve,!1)},K=function(j){let me=j.bl,Ve=j.ls;if(me.previous&&me.upval){let st=be(j);d(j,st,me.nactvar),x(j,st)}me.isloop&&function(st){let $e=ft(st.L,"break"),Ke=St(st,st.dyd.label,$e,0,st.fs.pc);Gt(st,st.dyd.label.arr[Ke])}(Ve),j.bl=me.previous,function(st,$e){for(st.ls.dyd.actvar.n-=st.nactvar-$e;st.nactvar>$e;)Oe(st,--st.nactvar).endpc=st.pc}(j,me.nactvar),ht(me.nactvar===j.nactvar),j.freereg=j.nactvar,Ve.dyd.label.n=me.firstlabel,me.previous?function(st,$e){let Ke=$e.firstgoto,mt=st.ls.dyd.gt;for(;Ke<mt.n;){let Tt=mt.arr[Ke];Tt.nactvar>$e.nactvar&&($e.upval&&d(st,Tt.pc,$e.nactvar),Tt.nactvar=$e.nactvar),Ne(st.ls,Ke)||Ke++}}(j,me):me.firstgoto<Ve.dyd.gt.n&&function(st,$e){let Ke=We.isreserved($e.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";Ke=Dt.luaO_pushfstring(st.L,A(Ke),$e.name.getstr(),$e.line),$t(st,Ke)}(Ve,Ve.dyd.gt.arr[me.firstgoto])},ue=function(j){let me=j.fs;Ie(me,0,0),K(me),ht(me.bl===null),j.fs=me.prev},je=function(j,me){switch(j.t.token){case Ee.TK_ELSE:case Ee.TK_ELSEIF:case Ee.TK_END:case Ee.TK_EOS:return!0;case Ee.TK_UNTIL:return me;default:return!1}},At=function(j){for(;!je(j,1);){if(j.t.token===Ee.TK_RETURN)return void _n(j);_n(j)}},Jt=function(j,me){let Ve=j.fs,st=new Yt;rt(Ve,me),We.luaX_next(j),pe(j,st),xt(Ve,me,st)},or=function(j,me){We.luaX_next(j),Qr(j,me),he(j.fs,me),Mt(j,93)},xr=function(j,me){let Ve=j.fs,st=j.fs.freereg,$e=new Yt,Ke=new Yt;j.t.token===Ee.TK_NAME?(ir(Ve,me.nh,dt,A("items in a constructor",!0)),pe(j,$e)):or(j,$e),me.nh++,Mt(j,61);let mt=vt(Ve,$e);Qr(j,Ke),at(Ve,N,me.t.u.info,mt,vt(Ve,Ke)),Ve.freereg=st},rn=function(j,me){me.v.k!==Ct.VVOID&&(ct(j,me.v),me.v.k=Ct.VVOID,me.tostore===xe&&(it(j,me.t.u.info,me.na,me.tostore),me.tostore=0))},sn=function(j,me){Qr(j,me.v),ir(j.fs,me.na,dt,A("items in a constructor",!0)),me.na++,me.tostore++},nn=function(j,me){switch(j.t.token){case Ee.TK_NAME:We.luaX_lookahead(j)!==61?sn(j,me):xr(j,me);break;case 91:xr(j,me);break;default:sn(j,me)}},Ar=function(j,me){let Ve=j.fs,st=j.linenumber,$e=at(Ve,u,0,0,0),Ke=new class{constructor(){this.v=new Yt,this.t=new Yt,this.nh=NaN,this.na=NaN,this.tostore=NaN}};Ke.na=Ke.nh=Ke.tostore=0,Ke.t=me,f(me,Ct.VRELOCABLE,$e),f(Ke.v,Ct.VVOID,0),ct(j.fs,me),Mt(j,123);do{if(ht(Ke.v.k===Ct.VVOID||Ke.tostore>0),j.t.token===125)break;rn(Ve,Ke),nn(j,Ke)}while(nr(j,44)||nr(j,59));dr(j,125,123,st),function(mt,Tt){Tt.tostore!==0&&(gt(Tt.v.k)?(Nt(mt,Tt.v),it(mt,Tt.t.u.info,Tt.na,R),Tt.na--):(Tt.v.k!==Ct.VVOID&&ct(mt,Tt.v),it(mt,Tt.t.u.info,Tt.na,Tt.tostore)))}(Ve,Ke),ot(Ve.f.code[$e],Dt.luaO_int2fb(Ke.na)),_t(Ve.f.code[$e],Dt.luaO_int2fb(Ke.nh))},gr=function(j,me,Ve,st){let $e=new ur,Ke=new Ut;$e.f=function(mt){let Tt=mt.L,rr=new ze(Tt),ar=mt.fs;return ar.f.p[ar.np++]=rr,rr}(j),$e.f.linedefined=st,tr(j,$e,Ke),Mt(j,40),Ve&&(se(j,"self"),Xe(j,1)),function(mt){let Tt=mt.fs,rr=Tt.f,ar=0;if(rr.is_vararg=!1,mt.t.token!==41)do switch(mt.t.token){case Ee.TK_NAME:Re(mt,X(mt)),ar++;break;case Ee.TK_DOTS:We.luaX_next(mt),rr.is_vararg=!0;break;default:We.luaX_syntaxerror(mt,A("<name> or '...' expected",!0))}while(!rr.is_vararg&&nr(mt,44));Xe(mt,ar),rr.numparams=Tt.nactvar,ve(Tt,Tt.nactvar)}(j),Mt(j,41),At(j),$e.f.lastlinedefined=j.linenumber,dr(j,Ee.TK_END,Ee.TK_FUNCTION,st),function(mt,Tt){let rr=mt.fs.prev;f(Tt,Ct.VRELOCABLE,re(rr,qt,0,rr.np-1)),ct(rr,Tt)}(j,me),ue(j)},Jr=function(j,me){let Ve=1;for(Qr(j,me);nr(j,44);)ct(j.fs,me),Qr(j,me),Ve++;return Ve},wn=function(j,me,Ve){let st,$e=j.fs,Ke=new Yt;switch(j.t.token){case 40:We.luaX_next(j),j.t.token===41?Ke.k=Ct.VVOID:(Jr(j,Ke),Nt($e,Ke)),dr(j,41,40,Ve);break;case 123:Ar(j,Ke);break;case Ee.TK_STRING:B(j,Ke,j.t.seminfo.ts),We.luaX_next(j);break;default:We.luaX_syntaxerror(j,A("function arguments expected",!0))}ht(me.k===Ct.VNONRELOC);let mt=me.u.info;gt(Ke.k)?st=R:(Ke.k!==Ct.VVOID&&ct($e,Ke),st=$e.freereg-(mt+1)),f(me,Ct.VCALL,at($e,Bt,mt,st+1,2)),ye($e,Ve),$e.freereg=mt+1},un=function(j,me){let Ve=j.fs,st=j.linenumber;for(!function($e,Ke){switch($e.t.token){case 40:{let mt=$e.linenumber;return We.luaX_next($e),Qr($e,Ke),dr($e,41,40,mt),void Qe($e.fs,Ke)}case Ee.TK_NAME:return void k($e,Ke);default:We.luaX_syntaxerror($e,A("unexpected symbol",!0))}}(j,me);;)switch(j.t.token){case 46:Jt(j,me);break;case 91:{let $e=new Yt;rt(Ve,me),or(j,$e),xt(Ve,me,$e);break}case 58:{let $e=new Yt;We.luaX_next(j),pe(j,$e),Fe(Ve,me,$e),wn(j,me,st);break}case 40:case Ee.TK_STRING:case 123:ct(Ve,me),wn(j,me,st);break;default:return}},Fi=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],li=function(j,me,Ve){$(j);let st=function(Ke){switch(Ke){case Ee.TK_NOT:return ke;case 45:return ie;case 126:return ne;case 35:return Le;default:return O}}(j.t.token);if(st!==O){let Ke=j.linenumber;We.luaX_next(j),li(j,me,12),Q(j.fs,st,me,Ke)}else(function(Ke,mt){switch(Ke.t.token){case Ee.TK_FLT:f(mt,Ct.VKFLT,0),mt.u.nval=Ke.t.seminfo.r;break;case Ee.TK_INT:f(mt,Ct.VKINT,0),mt.u.ival=Ke.t.seminfo.i;break;case Ee.TK_STRING:B(Ke,mt,Ke.t.seminfo.ts);break;case Ee.TK_NIL:f(mt,Ct.VNIL,0);break;case Ee.TK_TRUE:f(mt,Ct.VTRUE,0);break;case Ee.TK_FALSE:f(mt,Ct.VFALSE,0);break;case Ee.TK_DOTS:{let Tt=Ke.fs;pr(Ke,Tt.f.is_vararg,A("cannot use '...' outside a vararg function",!0)),f(mt,Ct.VVARARG,at(Tt,U,0,1,0));break}case 123:return void Ar(Ke,mt);case Ee.TK_FUNCTION:return We.luaX_next(Ke),void gr(Ke,mt,0,Ke.linenumber);default:return void un(Ke,mt)}We.luaX_next(Ke)})(j,me);let $e=function(Ke){switch(Ke){case 43:return c;case 45:return te;case 42:return G;case 37:return P;case 94:return y;case 47:return E;case Ee.TK_IDIV:return H;case 38:return _;case 124:return w;case 126:return L;case Ee.TK_SHL:return z;case Ee.TK_SHR:return ee;case Ee.TK_CONCAT:return b;case Ee.TK_NE:return q;case Ee.TK_EQ:return S;case 60:return M;case Ee.TK_LE:return V;case 62:return F;case Ee.TK_GE:return I;case Ee.TK_AND:return g;case Ee.TK_OR:return ge;default:return le}}(j.t.token);for(;$e!==le&&Fi[$e].left>Ve;){let Ke=new Yt,mt=j.linenumber;We.luaX_next(j),yt(j.fs,$e,me);let Tt=li(j,Ke,Fi[$e].right);Y(j.fs,$e,me,Ke,mt),$e=Tt}return Be(j),$e},Qr=function(j,me){li(j,me,0)},Bn=function(j){let me=j.fs,Ve=new Ut;Xt(me,Ve,0),At(j),K(me)};class Fn{constructor(){this.prev=null,this.v=new Yt}}const oi=function(j,me,Ve){let st=new Yt;if(pr(j,function($e){return Ct.VLOCAL<=$e&&$e<=Ct.VINDEXED}(me.v.k),A("syntax error",!0)),nr(j,44)){let $e=new Fn;$e.prev=me,un(j,$e.v),$e.v.k!==Ct.VINDEXED&&function(Ke,mt,Tt){let rr=Ke.fs,ar=rr.freereg,Nr=!1;for(;mt;mt=mt.prev)mt.v.k===Ct.VINDEXED&&(mt.v.u.ind.vt===Tt.k&&mt.v.u.ind.t===Tt.u.info&&(Nr=!0,mt.v.u.ind.vt=Ct.VLOCAL,mt.v.u.ind.t=ar),Tt.k===Ct.VLOCAL&&mt.v.u.ind.idx===Tt.u.info&&(Nr=!0,mt.v.u.ind.idx=ar));if(Nr){let fn=Tt.k===Ct.VLOCAL?o:Ft;at(rr,fn,ar,Tt.u.info,0),ve(rr,1)}}(j,me,$e.v),ir(j.fs,Ve+j.L.nCcalls,we,A("JS levels",!0)),oi(j,$e,Ve+1)}else{Mt(j,61);let $e=Jr(j,st);if($e===Ve)return wt(j.fs,st),void W(j.fs,me.v,st);de(j,Ve,$e,st)}f(st,Ct.VNONRELOC,j.fs.freereg-1),W(j.fs,me.v,st)},Hi=function(j){let me=new Yt;return Qr(j,me),me.k===Ct.VNIL&&(me.k=Ct.VFALSE),lt(j.fs,me),me.f},si=function(j,me){let Ve,st=j.linenumber;nr(j,Ee.TK_GOTO)?Ve=X(j):(We.luaX_next(j),Ve=ft(j.L,"break"));let $e=St(j,j.dyd.gt,Ve,st,me);Ne(j,$e)},Gi=function(j,me,Ve){let st,$e=j.fs,Ke=j.dyd.label;(function(mt,Tt,rr){for(let ar=mt.bl.firstlabel;ar<Tt.n;ar++)if(Rt(rr,Tt.arr[ar].name)){let Nr=Dt.luaO_pushfstring(mt.ls.L,A("label '%s' already defined on line %d",!0),rr.getstr(),Tt.arr[ar].line);$t(mt.ls,Nr)}})($e,Ke,me),Mt(j,Ee.TK_DBCOLON),st=St(j,Ke,me,Ve,De($e)),function(mt){for(;mt.t.token===59||mt.t.token===Ee.TK_DBCOLON;)_n(mt)}(j),je(j,0)&&(Ke.arr[st].nactvar=$e.bl.nactvar),Gt(j,Ke.arr[st])},vn=function(j){let me=new Yt;return Qr(j,me),ct(j.fs,me),ht(me.k===Ct.VNONRELOC),me.u.info},Sn=function(j,me,Ve,st,$e){let Ke,mt=new Ut,Tt=j.fs;Xe(j,3),Mt(j,Ee.TK_DO);let rr=$e?fe(Tt,Ot,me,Ce):be(Tt);Xt(Tt,mt,0),Xe(j,st),ve(Tt,st),Bn(j),K(Tt),x(Tt,rr),$e?Ke=fe(Tt,bt,me,Ce):(at(Tt,T,me,0,st),ye(Tt,Ve),Ke=fe(Tt,Z,me+2,Ce)),D(Tt,Ke,rr+1),ye(Tt,Ve)},ui=function(j,me){let Ve=j.fs,st=new Ut;Xt(Ve,st,1),We.luaX_next(j);let $e=X(j);switch(j.t.token){case 61:(function(Ke,mt,Tt){let rr=Ke.fs,ar=rr.freereg;se(Ke,"(for index)"),se(Ke,"(for limit)"),se(Ke,"(for step)"),Re(Ke,mt),Mt(Ke,61),vn(Ke),Mt(Ke,44),vn(Ke),nr(Ke,44)?vn(Ke):(_e(rr,rr.freereg,nt(rr,1)),ve(rr,1)),Sn(Ke,ar,Tt,1,1)})(j,$e,me);break;case 44:case Ee.TK_IN:(function(Ke,mt){let Tt=Ke.fs,rr=new Yt,ar=4,Nr=Tt.freereg;for(se(Ke,"(for generator)"),se(Ke,"(for state)"),se(Ke,"(for control)"),Re(Ke,mt);nr(Ke,44);)Re(Ke,X(Ke)),ar++;Mt(Ke,Ee.TK_IN);let fn=Ke.linenumber;de(Ke,3,Jr(Ke,rr),rr),Pe(Tt,3),Sn(Ke,Nr,fn,ar-3,0)})(j,$e);break;default:We.luaX_syntaxerror(j,A("'=' or 'in' expected",!0))}dr(j,Ee.TK_END,Ee.TK_FOR,me),K(Ve)},fi=function(j,me){let Ve,st=new Ut,$e=j.fs,Ke=new Yt;if(We.luaX_next(j),Qr(j,Ke),Mt(j,Ee.TK_THEN),j.t.token===Ee.TK_GOTO||j.t.token===Ee.TK_BREAK){for(Se(j.fs,Ke),Xt($e,st,!1),si(j,Ke.t);nr(j,59););if(je(j,0))return K($e),me;Ve=be($e)}else lt(j.fs,Ke),Xt($e,st,!1),Ve=Ke.f;return At(j),K($e),j.t.token!==Ee.TK_ELSE&&j.t.token!==Ee.TK_ELSEIF||(me=Ye($e,me,be($e))),x($e,Ve),me},Ki=function(j,me){let Ve=new Yt,st=new Yt;We.luaX_next(j);let $e=function(Ke,mt){let Tt=0;for(k(Ke,mt);Ke.t.token===46;)Jt(Ke,mt);return Ke.t.token===58&&(Tt=1,Jt(Ke,mt)),Tt}(j,Ve);gr(j,st,$e,me),W(j.fs,Ve,st),ye(j.fs,me)},_n=function(j){let me=j.linenumber;switch($(j),j.t.token){case 59:We.luaX_next(j);break;case Ee.TK_IF:(function(Ve,st){let $e=Ve.fs,Ke=Ce;for(Ke=fi(Ve,Ke);Ve.t.token===Ee.TK_ELSEIF;)Ke=fi(Ve,Ke);nr(Ve,Ee.TK_ELSE)&&Bn(Ve),dr(Ve,Ee.TK_END,Ee.TK_IF,st),x($e,Ke)})(j,me);break;case Ee.TK_WHILE:(function(Ve,st){let $e=Ve.fs,Ke=new Ut;We.luaX_next(Ve);let mt=De($e),Tt=Hi(Ve);Xt($e,Ke,1),Mt(Ve,Ee.TK_DO),Bn(Ve),Ge($e,mt),dr(Ve,Ee.TK_END,Ee.TK_WHILE,st),K($e),x($e,Tt)})(j,me);break;case Ee.TK_DO:We.luaX_next(j),Bn(j),dr(j,Ee.TK_END,Ee.TK_DO,me);break;case Ee.TK_FOR:ui(j,me);break;case Ee.TK_REPEAT:(function(Ve,st){let $e=Ve.fs,Ke=De($e),mt=new Ut,Tt=new Ut;Xt($e,mt,1),Xt($e,Tt,0),We.luaX_next(Ve),At(Ve),dr(Ve,Ee.TK_UNTIL,Ee.TK_REPEAT,st);let rr=Hi(Ve);Tt.upval&&d($e,rr,Tt.nactvar),K($e),D($e,rr,Ke),K($e)})(j,me);break;case Ee.TK_FUNCTION:Ki(j,me);break;case Ee.TK_LOCAL:We.luaX_next(j),nr(j,Ee.TK_FUNCTION)?function(Ve){let st=new Yt,$e=Ve.fs;Re(Ve,X(Ve)),Xe(Ve,1),gr(Ve,st,0,Ve.linenumber),Oe($e,st.u.info).startpc=$e.pc}(j):function(Ve){let st,$e=0,Ke=new Yt;do Re(Ve,X(Ve)),$e++;while(nr(Ve,44));nr(Ve,61)?st=Jr(Ve,Ke):(Ke.k=Ct.VVOID,st=0),de(Ve,$e,st,Ke),Xe(Ve,$e)}(j);break;case Ee.TK_DBCOLON:We.luaX_next(j),Gi(j,X(j),me);break;case Ee.TK_RETURN:We.luaX_next(j),function(Ve){let st,$e,Ke=Ve.fs,mt=new Yt;je(Ve,1)||Ve.t.token===59?st=$e=0:($e=Jr(Ve,mt),gt(mt.k)?(Nt(Ke,mt),mt.k===Ct.VCALL&&$e===1&&(Vt(tt(Ke,mt),h),ht(tt(Ke,mt).A===Ke.nactvar)),st=Ke.nactvar,$e=R):$e===1?st=et(Ke,mt):(ct(Ke,mt),st=Ke.nactvar,ht($e===Ke.freereg-st))),Ie(Ke,st,$e),nr(Ve,59)}(j);break;case Ee.TK_BREAK:case Ee.TK_GOTO:si(j,be(j.fs));break;default:(function(Ve){let st=Ve.fs,$e=new Fn;un(Ve,$e.v),Ve.t.token===61||Ve.t.token===44?($e.prev=null,oi(Ve,$e,1)):(pr(Ve,$e.v.k===Ct.VCALL,A("syntax error",!0)),_t(tt(st,$e.v),1))})(j)}ht(j.fs.f.maxstacksize>=j.fs.freereg&&j.fs.freereg>=j.fs.nactvar),j.fs.freereg=j.fs.nactvar,Be(j)};a.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new Ht,this.label=new Ht}},a.exports.expkind=Ct,a.exports.expdesc=Yt,a.exports.luaY_parser=function(j,me,Ve,st,$e,Ke){let mt=new We.LexState,Tt=new ur,rr=Je.luaF_newLclosure(j,1);return Ze.luaD_inctop(j),j.stack[j.top-1].setclLvalue(rr),mt.h=ae.luaH_new(j),Ze.luaD_inctop(j),j.stack[j.top-1].sethvalue(mt.h),Tt.f=rr.p=new ze(j),Tt.f.source=Te(j,$e),mt.buff=Ve,mt.dyd=st,st.actvar.n=st.gt.n=st.label.n=0,We.luaX_setinput(j,mt,me,Tt.f.source,Ke),function(ar,Nr){let fn=new Ut,cn=new Yt;tr(ar,Nr,fn),Nr.f.is_vararg=!0,f(cn,Ct.VLOCAL,0),pt(Nr,ar.envn,cn),We.luaX_next(ar),At(ar),sr(ar,Ee.TK_EOS),ue(ar)}(mt,Tt),ht(!Tt.prev&&Tt.nups===1&&!mt.fs),ht(st.actvar.n===0&&st.gt.n===0&&st.label.n===0),delete j.stack[--j.top],rr},a.exports.vkisinreg=function(j){return j===Ct.VNONRELOC||j===Ct.VLOCAL}},function(a,Ae,v){const{LUA_MULTRET:R,LUA_OK:A,LUA_TFUNCTION:c,LUA_TNIL:g,LUA_TNONE:_,LUA_TNUMBER:w,LUA_TSTRING:L,LUA_TTABLE:b,LUA_VERSION:E,LUA_YIELD:S,lua_call:I,lua_callk:F,lua_concat:H,lua_error:V,lua_getglobal:M,lua_geti:P,lua_getmetatable:G,lua_gettop:q,lua_insert:le,lua_isnil:ge,lua_isnone:y,lua_isstring:z,lua_load:ee,lua_next:te,lua_pcallk:ne,lua_pop:Le,lua_pushboolean:ie,lua_pushcfunction:ke,lua_pushglobaltable:O,lua_pushinteger:Ce,lua_pushliteral:tt,lua_pushnil:Pe,lua_pushstring:at,lua_pushvalue:re,lua_rawequal:fe,lua_rawget:_e,lua_rawlen:Ye,lua_rawset:Qe,lua_remove:vt,lua_replace:et,lua_rotate:rt,lua_setfield:ct,lua_setmetatable:he,lua_settop:ye,lua_setupvalue:De,lua_stringtonumber:Se,lua_toboolean:lt,lua_tolstring:xt,lua_tostring:yt,lua_type:nt,lua_typename:be}=v(2),{luaL_argcheck:Ge,luaL_checkany:J,luaL_checkinteger:d,luaL_checkoption:D,luaL_checkstack:x,luaL_checktype:Y,luaL_error:Q,luaL_getmetafield:ve,luaL_loadbufferx:Ie,luaL_loadfile:Fe,luaL_loadfilex:it,luaL_optinteger:Nt,luaL_optstring:wt,luaL_setfuncs:jt,luaL_tolstring:W,luaL_where:qe}=v(7),{to_jsstring:Ze,to_luastring:Je}=v(5);let We,we;if(typeof TextDecoder=="function"){let u="",N=new TextDecoder("utf-8");We=function(T){u+=N.decode(T,{stream:!0})};let h=new Uint8Array(0);we=function(){u+=N.decode(h),console.log(u),u=""}}else{let u=[];We=function(N){try{N=Ze(N)}catch{let T=new Uint8Array(N.length);T.set(N),N=T}u.push(N)},we=function(){console.log.apply(console.log,u),u=[]}}const dt=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(u=>Je(u)),ht=function(u){return Y(u,1,b),ye(u,2),te(u,1)?2:(Pe(u),1)},Dt=function(u){let N=d(u,2)+1;return Ce(u,N),P(u,1,N)===g?1:2},Bt=function(u){let N=Nt(u,2,1);return ye(u,1),nt(u,1)===L&&N>0&&(qe(u,N),re(u,1),H(u,2)),V(u)},qt=function(u,N,h){return N!==A&&N!==S?(ie(u,0),re(u,-2),2):q(u)-h},bt=function(u,N,h){return N===A?(h!==0&&(re(u,h),De(u,-2,1)||Le(u,1)),1):(Pe(u),le(u,-2),2)},Ot=function(u,N){return x(u,2,"too many nested functions"),re(u,1),I(u,0,1),ge(u,-1)?(Le(u,1),null):(z(u,-1)||Q(u,Je("reader function must return a string")),et(u,5),yt(u,5))},Ft=function(u,N,h){return q(u)-1},o={assert:function(u){return lt(u,1)?q(u):(J(u,1),vt(u,1),tt(u,"assertion failed!"),ye(u,1),Bt(u))},collectgarbage:function(u){D(u,1,"collect",dt),Nt(u,2,0),Q(u,Je("lua_gc not implemented"))},dofile:function(u){let N=wt(u,1,null);return ye(u,1),Fe(u,N)!==A?V(u):(F(u,0,R,0,Ft),Ft(u))},error:Bt,getmetatable:function(u){return J(u,1),G(u,1)?(ve(u,1,Je("__metatable",!0)),1):(Pe(u),1)},ipairs:function(u){return J(u,1),ke(u,Dt),re(u,1),Ce(u,0),3},load:function(u){let N,h=yt(u,1),T=wt(u,3,"bt"),Z=y(u,4)?0:4;if(h!==null){let U=wt(u,2,h);N=Ie(u,h,h.length,U,T)}else{let U=wt(u,2,"=(load)");Y(u,1,c),ye(u,5),N=ee(u,Ot,null,U,T)}return bt(u,N,Z)},loadfile:function(u){let N=wt(u,1,null),h=wt(u,2,null),T=y(u,3)?0:3,Z=it(u,N,h);return bt(u,Z,T)},next:ht,pairs:function(u){return function(N,h,T,Z){return J(N,1),ve(N,1,h)===g?(ke(N,Z),re(N,1),Pe(N)):(re(N,1),I(N,1,3)),3}(u,Je("__pairs",!0),0,ht)},pcall:function(u){J(u,1),ie(u,1),le(u,1);let N=ne(u,q(u)-2,R,0,0,qt);return qt(u,N,0)},print:function(u){let N=q(u);M(u,Je("tostring",!0));for(let h=1;h<=N;h++){re(u,-1),re(u,h),I(u,1,1);let T=xt(u,-1);if(T===null)return Q(u,Je("'tostring' must return a string to 'print'"));h>1&&We(Je("	")),We(T),Le(u,1)}return we(),0},rawequal:function(u){return J(u,1),J(u,2),ie(u,fe(u,1,2)),1},rawget:function(u){return Y(u,1,b),J(u,2),ye(u,2),_e(u,1),1},rawlen:function(u){let N=nt(u,1);return Ge(u,N===b||N===L,1,"table or string expected"),Ce(u,Ye(u,1)),1},rawset:function(u){return Y(u,1,b),J(u,2),J(u,3),ye(u,3),Qe(u,1),1},select:function(u){let N=q(u);if(nt(u,1)===L&&yt(u,1)[0]===35)return Ce(u,N-1),1;{let h=d(u,1);return h<0?h=N+h:h>N&&(h=N),Ge(u,1<=h,1,"index out of range"),N-h}},setmetatable:function(u){let N=nt(u,2);return Y(u,1,b),Ge(u,N===g||N===b,2,"nil or table expected"),ve(u,1,Je("__metatable",!0))!==g?Q(u,Je("cannot change a protected metatable")):(ye(u,2),he(u,1),1)},tonumber:function(u){if(nt(u,2)<=0){if(J(u,1),nt(u,1)===w)return ye(u,1),1;{let N=yt(u,1);if(N!==null&&Se(u,N)===N.length+1)return 1}}else{let N=d(u,2);Y(u,1,L);let h=yt(u,1);Ge(u,2<=N&&N<=36,2,"base out of range");let T=function(Z,U){try{Z=Ze(Z)}catch{return null}let xe=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(Z);if(!xe)return null;let ot=parseInt(xe[1]+xe[2],U);return isNaN(ot)?null:0|ot}(h,N);if(T!==null)return Ce(u,T),1}return Pe(u),1},tostring:function(u){return J(u,1),W(u,1),1},type:function(u){let N=nt(u,1);return Ge(u,N!==_,1,"value expected"),at(u,be(u,N)),1},xpcall:function(u){let N=q(u);Y(u,2,c),ie(u,1),re(u,1),rt(u,3,2);let h=ne(u,N-2,R,2,2,qt);return qt(u,h,2)}};a.exports.luaopen_base=function(u){return O(u),jt(u,o,0),re(u,-1),ct(u,-2,Je("_G")),tt(u,E),ct(u,-2,Je("_VERSION")),1}},function(a,Ae,v){const{LUA_OK:R,LUA_TFUNCTION:A,LUA_TSTRING:c,LUA_YIELD:g,lua_Debug:_,lua_checkstack:w,lua_concat:L,lua_error:b,lua_getstack:E,lua_gettop:S,lua_insert:I,lua_isyieldable:F,lua_newthread:H,lua_pop:V,lua_pushboolean:M,lua_pushcclosure:P,lua_pushliteral:G,lua_pushthread:q,lua_pushvalue:le,lua_resume:ge,lua_status:y,lua_tothread:z,lua_type:ee,lua_upvalueindex:te,lua_xmove:ne,lua_yield:Le}=v(2),{luaL_argcheck:ie,luaL_checktype:ke,luaL_newlib:O,luaL_where:Ce}=v(7),tt=function(_e){let Ye=z(_e,1);return ie(_e,Ye,1,"thread expected"),Ye},Pe=function(_e,Ye,Qe){if(!w(Ye,Qe))return G(_e,"too many arguments to resume"),-1;if(y(Ye)===R&&S(Ye)===0)return G(_e,"cannot resume dead coroutine"),-1;ne(_e,Ye,Qe);let vt=ge(Ye,_e,Qe);if(vt===R||vt===g){let et=S(Ye);return w(_e,et+1)?(ne(Ye,_e,et),et):(V(Ye,et),G(_e,"too many results to resume"),-1)}return ne(Ye,_e,1),-1},at=function(_e){let Ye=z(_e,te(1)),Qe=Pe(_e,Ye,S(_e));return Qe<0?(ee(_e,-1)===c&&(Ce(_e,1),I(_e,-2),L(_e,2)),b(_e)):Qe},re=function(_e){ke(_e,1,A);let Ye=H(_e);return le(_e,1),ne(_e,Ye,1),1},fe={create:re,isyieldable:function(_e){return M(_e,F(_e)),1},resume:function(_e){let Ye=tt(_e),Qe=Pe(_e,Ye,S(_e)-1);return Qe<0?(M(_e,0),I(_e,-2),2):(M(_e,1),I(_e,-(Qe+1)),Qe+1)},running:function(_e){return M(_e,q(_e)),2},status:function(_e){let Ye=tt(_e);if(_e===Ye)G(_e,"running");else switch(y(Ye)){case g:G(_e,"suspended");break;case R:{let Qe=new _;E(Ye,0,Qe)>0?G(_e,"normal"):S(Ye)===0?G(_e,"dead"):G(_e,"suspended");break}default:G(_e,"dead")}return 1},wrap:function(_e){return re(_e),P(_e,at,1),1},yield:function(_e){return Le(_e,S(_e))}};a.exports.luaopen_coroutine=function(_e){return O(_e,fe),1}},function(a,Ae,v){const{LUA_MAXINTEGER:R}=v(3),{LUA_OPEQ:A,LUA_OPLT:c,LUA_TFUNCTION:g,LUA_TNIL:_,LUA_TTABLE:w,lua_call:L,lua_checkstack:b,lua_compare:E,lua_createtable:S,lua_geti:I,lua_getmetatable:F,lua_gettop:H,lua_insert:V,lua_isnil:M,lua_isnoneornil:P,lua_isstring:G,lua_pop:q,lua_pushinteger:le,lua_pushnil:ge,lua_pushstring:y,lua_pushvalue:z,lua_rawget:ee,lua_setfield:te,lua_seti:ne,lua_settop:Le,lua_toboolean:ie,lua_type:ke}=v(2),{luaL_Buffer:O,luaL_addlstring:Ce,luaL_addvalue:tt,luaL_argcheck:Pe,luaL_buffinit:at,luaL_checkinteger:re,luaL_checktype:fe,luaL_error:_e,luaL_len:Ye,luaL_newlib:Qe,luaL_opt:vt,luaL_optinteger:et,luaL_optlstring:rt,luaL_pushresult:ct,luaL_typename:he}=v(7),ye=v(17),{to_luastring:De}=v(5),Se=function(x,Y,Q){return y(x,Y),ee(x,-Q)!==_},lt=function(x,Y,Q){if(ke(x,Y)!==w){let ve=1;!F(x,Y)||1&Q&&!Se(x,De("__index",!0),++ve)||2&Q&&!Se(x,De("__newindex",!0),++ve)||4&Q&&!Se(x,De("__len",!0),++ve)?fe(x,Y,w):q(x,ve)}},xt=function(x,Y,Q){return lt(x,Y,4|Q),Ye(x,Y)},yt=function(x,Y,Q){I(x,1,Q),G(x,-1)||_e(x,De("invalid value (%s) at index %d in table for 'concat'"),he(x,-1),Q),tt(Y)},nt=function(x,Y,Q){ne(x,1,Y),ne(x,1,Q)},be=function(x,Y,Q){if(M(x,2))return E(x,Y,Q,c);{z(x,2),z(x,Y-1),z(x,Q-2),L(x,2,1);let ve=ie(x,-1);return q(x,1),ve}},Ge=function(x,Y,Q){let ve=Y,Ie=Q-1;for(;;){for(;I(x,1,++ve),be(x,-1,-2);)ve==Q-1&&_e(x,De("invalid order function for sorting")),q(x,1);for(;I(x,1,--Ie),be(x,-3,-1);)Ie<ve&&_e(x,De("invalid order function for sorting")),q(x,1);if(Ie<ve)return q(x,1),nt(x,Q-1,ve),ve;nt(x,ve,Ie)}},J=function(x,Y,Q){let ve=Math.floor((Y-x)/4),Ie=Q%(2*ve)+(x+ve);return ye.lua_assert(x+ve<=Ie&&Ie<=Y-ve),Ie},d=function(x,Y,Q,ve){for(;Y<Q;){if(I(x,1,Y),I(x,1,Q),be(x,-1,-2)?nt(x,Y,Q):q(x,2),Q-Y==1)return;let Ie,Fe;if(Ie=Q-Y<100||ve===0?Math.floor((Y+Q)/2):J(Y,Q,ve),I(x,1,Ie),I(x,1,Y),be(x,-2,-1)?nt(x,Ie,Y):(q(x,1),I(x,1,Q),be(x,-1,-2)?nt(x,Ie,Q):q(x,2)),Q-Y==2)return;I(x,1,Ie),z(x,-1),I(x,1,Q-1),nt(x,Ie,Q-1),(Ie=Ge(x,Y,Q))-Y<Q-Ie?(d(x,Y,Ie-1,ve),Fe=Ie-Y,Y=Ie+1):(d(x,Ie+1,Q,ve),Fe=Q-Ie,Q=Ie-1),(Q-Y)/128>Fe&&(ve=Math.floor(4294967296*Math.random()))}},D={concat:function(x){let Y=xt(x,1,1),Q=rt(x,2,""),ve=Q.length,Ie=et(x,3,1);Y=et(x,4,Y);let Fe=new O;for(at(x,Fe);Ie<Y;Ie++)yt(x,Fe,Ie),Ce(Fe,Q,ve);return Ie===Y&&yt(x,Fe,Ie),ct(Fe),1},insert:function(x){let Y,Q=xt(x,1,3)+1;switch(H(x)){case 2:Y=Q;break;case 3:Y=re(x,2),Pe(x,1<=Y&&Y<=Q,2,"position out of bounds");for(let ve=Q;ve>Y;ve--)I(x,1,ve-1),ne(x,1,ve);break;default:return _e(x,"wrong number of arguments to 'insert'")}return ne(x,1,Y),0},move:function(x){let Y=re(x,2),Q=re(x,3),ve=re(x,4),Ie=P(x,5)?1:5;if(lt(x,1,1),lt(x,Ie,2),Q>=Y){Pe(x,Y>0||Q<R+Y,3,"too many elements to move");let Fe=Q-Y+1;if(Pe(x,ve<=R-Fe+1,4,"destination wrap around"),ve>Q||ve<=Y||Ie!==1&&E(x,1,Ie,A)!==1)for(let it=0;it<Fe;it++)I(x,1,Y+it),ne(x,Ie,ve+it);else for(let it=Fe-1;it>=0;it--)I(x,1,Y+it),ne(x,Ie,ve+it)}return z(x,Ie),1},pack:function(x){let Y=H(x);S(x,Y,1),V(x,1);for(let Q=Y;Q>=1;Q--)ne(x,1,Q);return le(x,Y),te(x,1,De("n")),1},remove:function(x){let Y=xt(x,1,3),Q=et(x,2,Y);for(Q!==Y&&Pe(x,1<=Q&&Q<=Y+1,1,"position out of bounds"),I(x,1,Q);Q<Y;Q++)I(x,1,Q+1),ne(x,1,Q);return ge(x),ne(x,1,Q),1},sort:function(x){let Y=xt(x,1,3);return Y>1&&(Pe(x,Y<R,1,"array too big"),P(x,2)||fe(x,2,g),Le(x,2),d(x,1,Y,0)),0},unpack:function(x){let Y=et(x,2,1),Q=vt(x,re,3,Ye(x,1));if(Y>Q)return 0;let ve=Q-Y;if(ve>=Number.MAX_SAFE_INTEGER||!b(x,++ve))return _e(x,De("too many results to unpack"));for(;Y<Q;Y++)I(x,1,Y);return I(x,1,Q),ve}};a.exports.luaopen_table=function(x){return Qe(x,D),1}},function(a,Ae,v){const{LUA_TNIL:R,LUA_TTABLE:A,lua_close:c,lua_createtable:g,lua_getfield:_,lua_isboolean:w,lua_isnoneornil:L,lua_pop:b,lua_pushboolean:E,lua_pushfstring:S,lua_pushinteger:I,lua_pushliteral:F,lua_pushnil:H,lua_pushnumber:V,lua_pushstring:M,lua_setfield:P,lua_settop:G,lua_toboolean:q,lua_tointegerx:le}=v(2),{luaL_Buffer:ge,luaL_addchar:y,luaL_addstring:z,luaL_argerror:ee,luaL_buffinit:te,luaL_checkinteger:ne,luaL_checkstring:Le,luaL_checktype:ie,luaL_error:ke,luaL_execresult:O,luaL_fileresult:Ce,luaL_newlib:tt,luaL_optinteger:Pe,luaL_optlstring:at,luaL_optstring:re,luaL_pushresult:fe}=v(7),{luastring_eq:_e,to_jsstring:Ye,to_luastring:Qe}=v(5),vt=Qe("aAbBcCdDeFhHIjklmMnpPrRStTuUwWxXyYzZ%"),et=function(be,Ge,J){I(be,J),P(be,-2,Qe(Ge,!0))},rt=function(be,Ge,J){et(be,"sec",J?Ge.getUTCSeconds():Ge.getSeconds()),et(be,"min",J?Ge.getUTCMinutes():Ge.getMinutes()),et(be,"hour",J?Ge.getUTCHours():Ge.getHours()),et(be,"day",J?Ge.getUTCDate():Ge.getDate()),et(be,"month",(J?Ge.getUTCMonth():Ge.getMonth())+1),et(be,"year",J?Ge.getUTCFullYear():Ge.getFullYear()),et(be,"wday",(J?Ge.getUTCDay():Ge.getDay())+1),et(be,"yday",Math.floor((Ge-new Date(Ge.getFullYear(),0,0))/864e5))},ct=Number.MAX_SAFE_INTEGER/2,he=function(be,Ge,J,d){let D=_(be,-1,Qe(Ge,!0)),x=le(be,-1);if(x===!1){if(D!==R)return ke(be,Qe("field '%s' is not an integer"),Ge);if(J<0)return ke(be,Qe("field '%s' missing in date table"),Ge);x=J}else{if(!(-ct<=x&&x<=ct))return ke(be,Qe("field '%s' is out-of-bound"),Ge);x-=d}return b(be,1),x},ye={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(be=>Qe(be)),shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(be=>Qe(be)),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map(be=>Qe(be)),shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(be=>Qe(be)),AM:Qe("AM"),PM:Qe("PM"),am:Qe("am"),pm:Qe("pm"),formats:{c:Qe("%a %b %e %H:%M:%S %Y"),D:Qe("%m/%d/%y"),F:Qe("%Y-%m-%d"),R:Qe("%H:%M"),r:Qe("%I:%M:%S %p"),T:Qe("%H:%M:%S"),X:Qe("%T"),x:Qe("%D")}},De=function(be,Ge){let J=be.getDay();Ge==="monday"&&(J===0?J=6:J--);let d=(be-new Date(be.getFullYear(),0,1))/864e5;return Math.floor((d+7-J)/7)},Se=function(be,Ge,J){Ge<10&&y(be,J),z(be,Qe(String(Ge)))},lt=function(be,Ge,J,d){let D=0;for(;D<J.length;)if(J[D]!==37)y(Ge,J[D++]);else{let x=xt(be,J,++D);switch(J[D]){case 37:y(Ge,37);break;case 65:z(Ge,ye.days[d.getDay()]);break;case 66:z(Ge,ye.months[d.getMonth()]);break;case 67:Se(Ge,Math.floor(d.getFullYear()/100),48);break;case 68:lt(be,Ge,ye.formats.D,d);break;case 70:lt(be,Ge,ye.formats.F,d);break;case 72:Se(Ge,d.getHours(),48);break;case 73:Se(Ge,(d.getHours()+11)%12+1,48);break;case 77:Se(Ge,d.getMinutes(),48);break;case 80:z(Ge,d.getHours()<12?ye.am:ye.pm);break;case 82:lt(be,Ge,ye.formats.R,d);break;case 83:Se(Ge,d.getSeconds(),48);break;case 84:lt(be,Ge,ye.formats.T,d);break;case 85:Se(Ge,De(d,"sunday"),48);break;case 87:Se(Ge,De(d,"monday"),48);break;case 88:lt(be,Ge,ye.formats.X,d);break;case 89:z(Ge,Qe(String(d.getFullYear())));break;case 90:{let Y=d.toString().match(/\(([\w\s]+)\)/);Y&&z(Ge,Qe(Y[1]));break}case 97:z(Ge,ye.shortDays[d.getDay()]);break;case 98:case 104:z(Ge,ye.shortMonths[d.getMonth()]);break;case 99:lt(be,Ge,ye.formats.c,d);break;case 100:Se(Ge,d.getDate(),48);break;case 101:Se(Ge,d.getDate(),32);break;case 106:{let Y=Math.floor((d-new Date(d.getFullYear(),0,1))/864e5);Y<100&&(Y<10&&y(Ge,48),y(Ge,48)),z(Ge,Qe(String(Y)));break}case 107:Se(Ge,d.getHours(),32);break;case 108:Se(Ge,(d.getHours()+11)%12+1,32);break;case 109:Se(Ge,d.getMonth()+1,48);break;case 110:y(Ge,10);break;case 112:z(Ge,d.getHours()<12?ye.AM:ye.PM);break;case 114:lt(be,Ge,ye.formats.r,d);break;case 115:z(Ge,Qe(String(Math.floor(d/1e3))));break;case 116:y(Ge,8);break;case 117:{let Y=d.getDay();z(Ge,Qe(String(Y===0?7:Y)));break}case 119:z(Ge,Qe(String(d.getDay())));break;case 120:lt(be,Ge,ye.formats.x,d);break;case 121:Se(Ge,d.getFullYear()%100,48);break;case 122:{let Y=d.getTimezoneOffset();Y>0?y(Ge,45):(Y=-Y,y(Ge,43)),Se(Ge,Math.floor(Y/60),48),Se(Ge,Y%60,48);break}}D+=x}},xt=function(be,Ge,J){let d=vt,D=0,x=1;for(;D<d.length&&x<=Ge.length-J;D+=x)if(d[D]===124)x++;else if(_e(Ge.subarray(J,J+x),d.subarray(D,D+x)))return x;ee(be,1,S(be,Qe("invalid conversion specifier '%%%s'"),Ge))},yt=function(be,Ge){return ne(be,Ge)},nt={date:function(be){let Ge=at(be,1,"%c"),J=L(be,2)?new Date:new Date(1e3*yt(be,2)),d=!1,D=0;if(Ge[D]===33&&(d=!0,D++),Ge[D]===42&&Ge[D+1]===116)g(be,0,9),rt(be,J,d);else{new Uint8Array(4)[0]=37;let x=new ge;te(be,x),lt(be,x,Ge,J),fe(x)}return 1},difftime:function(be){let Ge=yt(be,1),J=yt(be,2);return V(be,Ge-J),1},time:function(be){let Ge;return L(be,1)?Ge=new Date:(ie(be,1,A),G(be,1),Ge=new Date(he(be,"year",-1,0),he(be,"month",-1,1),he(be,"day",-1,0),he(be,"hour",12,0),he(be,"min",0,0),he(be,"sec",0,0)),rt(be,Ge)),I(be,Math.floor(Ge/1e3)),1},clock:function(be){return V(be,performance.now()/1e3),1}};a.exports.luaopen_os=function(be){return tt(be,nt),1}},function(a,Ae,v){const{sprintf:R}=v(38),{LUA_INTEGER_FMT:A,LUA_INTEGER_FRMLEN:c,LUA_MININTEGER:g,LUA_NUMBER_FMT:_,LUA_NUMBER_FRMLEN:w,frexp:L,lua_getlocaledecpoint:b}=v(3),{LUA_TBOOLEAN:E,LUA_TFUNCTION:S,LUA_TNIL:I,LUA_TNUMBER:F,LUA_TSTRING:H,LUA_TTABLE:V,lua_call:M,lua_createtable:P,lua_dump:G,lua_gettable:q,lua_gettop:le,lua_isinteger:ge,lua_isstring:y,lua_pop:z,lua_pushcclosure:ee,lua_pushinteger:te,lua_pushlightuserdata:ne,lua_pushliteral:Le,lua_pushlstring:ie,lua_pushnil:ke,lua_pushnumber:O,lua_pushstring:Ce,lua_pushvalue:tt,lua_remove:Pe,lua_setfield:at,lua_setmetatable:re,lua_settop:fe,lua_toboolean:_e,lua_tointeger:Ye,lua_tonumber:Qe,lua_tostring:vt,lua_touserdata:et,lua_type:rt,lua_upvalueindex:ct}=v(2),{luaL_Buffer:he,luaL_addchar:ye,luaL_addlstring:De,luaL_addsize:Se,luaL_addstring:lt,luaL_addvalue:xt,luaL_argcheck:yt,luaL_argerror:nt,luaL_buffinit:be,luaL_buffinitsize:Ge,luaL_checkinteger:J,luaL_checknumber:d,luaL_checkstack:D,luaL_checkstring:x,luaL_checktype:Y,luaL_error:Q,luaL_newlib:ve,luaL_optinteger:Ie,luaL_optstring:Fe,luaL_prepbuffsize:it,luaL_pushresult:Nt,luaL_pushresultsize:wt,luaL_tolstring:jt,luaL_typename:W}=v(7),qe=v(17),{luastring_eq:Ze,luastring_indexOf:Je,to_jsstring:We,to_luastring:we}=v(5),dt=37,ht=function(k){let de=Je(k,0);return de>-1?de:k.length},Dt=function(k,de){return k>=0?k:0-k>de?0:de+k+1},Bt=function(k,de,$,Be){return De(Be,de,$),0},qt=w.length+1,bt=function(k,de,$){let Be=function(Me){if(Object.is(Me,1/0))return we("inf");if(Object.is(Me,-1/0))return we("-inf");if(Number.isNaN(Me))return we("nan");if(Me===0){let Ne=R(_+"x0p+0",Me);return Object.is(Me,-0)&&(Ne="-"+Ne),we(Ne)}{let Ne="",St=L(Me),Gt=St[0],Xt=St[1];return Gt<0&&(Ne+="-",Gt=-Gt),Ne+="0x",Ne+=(2*Gt).toString(16),Ne+=R("p%+d",Xt-=1),we(Ne)}}($);if(de[qt]===65)for(let Me=0;Me<Be.length;Me++){let Ne=Be[Me];Ne>=97&&(Be[Me]=223&Ne)}else de[qt]!==97&&Q(k,we("modifiers for format '%%a'/'%%A' not implemented"));return Be},Ot=we("-+ #0"),Ft=k=>97<=k&&k<=122||65<=k&&k<=90,o=k=>48<=k&&k<=57,u=k=>0<=k&&k<=31||k===127,N=k=>33<=k&&k<=126,h=k=>97<=k&&k<=122,T=k=>65<=k&&k<=90,Z=k=>97<=k&&k<=122||65<=k&&k<=90||48<=k&&k<=57,U=k=>N(k)&&!Z(k),xe=k=>k===32||k>=9&&k<=13,ot=k=>48<=k&&k<=57||65<=k&&k<=70||97<=k&&k<=102,_t=function(k,de,$){switch(rt(k,$)){case H:{let Be=vt(k,$);(function(Me,Ne,St){ye(Me,34);let Gt=0;for(;St--;){if(Ne[Gt]===34||Ne[Gt]===92||Ne[Gt]===10)ye(Me,92),ye(Me,Ne[Gt]);else if(u(Ne[Gt])){let Xt=""+Ne[Gt];o(Ne[Gt+1])&&(Xt="0".repeat(3-Xt.length)+Xt),lt(Me,we("\\"+Xt))}else ye(Me,Ne[Gt]);Gt++}ye(Me,34)})(de,Be,Be.length);break}case F:{let Be;if(ge(k,$)){let Me=Ye(k,$);Be=we(R(Me===g?"0x%"+c+"x":A,Me))}else{let Me=Qe(k,$);(function(Ne){if(Je(Ne,46)<0){let St=b(),Gt=Je(Ne,St);Gt&&(Ne[Gt]=46)}})(Be=bt(k,we(`%${c}a`),Me))}lt(de,Be);break}case I:case E:jt(k,$),xt(de);break;default:nt(k,$,we("value has no literal form"))}},Vt=function(k,de,$,Be){let Me=$;for(;de[Me]!==0&&Je(Ot,de[Me])>=0;)Me++;Me-$>=Ot.length&&Q(k,we("invalid format (repeated flags)")),o(de[Me])&&Me++,o(de[Me])&&Me++,de[Me]===46&&(o(de[++Me])&&Me++,o(de[Me])&&Me++),o(de[Me])&&Q(k,we("invalid format (width or precision too long)")),Be[0]=37;for(let Ne=0;Ne<Me-$+1;Ne++)Be[Ne+1]=de[$+Ne];return Me},Wt=function(k,de){let $=k.length,Be=de.length,Me=k[$-1];for(let Ne=0;Ne<Be;Ne++)k[Ne+$-1]=de[Ne];k[$+Be-1]=Me};class Te{constructor(de){this.L=de,this.islittle=!0,this.maxalign=1}}const ft=o,ae=function(k,de){if(k.off>=k.s.length||!ft(k.s[k.off]))return de;{let $=0;do $=10*$+(k.s[k.off++]-48);while(k.off<k.s.length&&ft(k.s[k.off])&&$<=2147483638e-1);return $}},ze=function(k,de,$){let Be=ae(de,$);return(Be>16||Be<=0)&&Q(k.L,we("integral size (%d) out of limits [1,%d]"),Be,16),Be},Ee=function(k,de){let $={opt:de.s[de.off++],size:0};switch($.opt){case 98:return $.size=1,$.opt=0,$;case 66:return $.size=1,$.opt=1,$;case 104:return $.size=2,$.opt=0,$;case 72:return $.size=2,$.opt=1,$;case 108:return $.size=4,$.opt=0,$;case 76:return $.size=4,$.opt=1,$;case 106:return $.size=4,$.opt=0,$;case 74:case 84:return $.size=4,$.opt=1,$;case 102:return $.size=4,$.opt=2,$;case 100:case 110:return $.size=8,$.opt=2,$;case 105:return $.size=ze(k,de,4),$.opt=0,$;case 73:return $.size=ze(k,de,4),$.opt=1,$;case 115:return $.size=ze(k,de,4),$.opt=4,$;case 99:return $.size=ae(de,-1),$.size===-1&&Q(k.L,we("missing size for format option 'c'")),$.opt=3,$;case 122:return $.opt=5,$;case 120:return $.size=1,$.opt=6,$;case 88:return $.opt=7,$;case 32:break;case 60:k.islittle=!0;break;case 62:k.islittle=!1;break;case 61:k.islittle=!0;break;case 33:k.maxalign=ze(k,de,8);break;default:Q(k.L,we("invalid format option '%c'"),$.opt)}return $.opt=8,$},gt=function(k,de,$){let Be={opt:NaN,size:NaN,ntoalign:NaN},Me=Ee(k,$);Be.size=Me.size,Be.opt=Me.opt;let Ne=Be.size;if(Be.opt===7)if($.off>=$.s.length||$.s[$.off]===0)nt(k.L,1,we("invalid next option for option 'X'"));else{let St=Ee(k,$);Ne=St.size,(St=St.opt)!==3&&Ne!==0||nt(k.L,1,we("invalid next option for option 'X'"))}return Ne<=1||Be.opt===3?Be.ntoalign=0:(Ne>k.maxalign&&(Ne=k.maxalign),Ne&Ne-1&&nt(k.L,1,we("format asks for alignment not power of 2")),Be.ntoalign=Ne-(de&Ne-1)&Ne-1),Be},Rt=function(k,de,$,Be,Me){let Ne=it(k,Be);Ne[$?0:Be-1]=255&de;for(let St=1;St<Be;St++)de>>=8,Ne[$?St:Be-1-St]=255&de;if(Me&&Be>4)for(let St=4;St<Be;St++)Ne[$?St:Be-1-St]=255;Se(k,Be)},Ut=function(k,de,$,Be,Me){let Ne=0,St=Be<=4?Be:4;for(let Gt=St-1;Gt>=0;Gt--)Ne<<=8,Ne|=de[$?Gt:Be-1-Gt];if(Be<4){if(Me){let Gt=1<<8*Be-1;Ne=(Ne^Gt)-Gt}}else if(Be>4){let Gt=!Me||Ne>=0?0:255;for(let Xt=St;Xt<Be;Xt++)de[$?Xt:Be-1-Xt]!==Gt&&Q(k,we("%d-byte integer does not fit into Lua Integer"),Be)}return Ne},Ct=function(k,de,$,Be){qe.lua_assert(de.length>=Be);let Me=new DataView(new ArrayBuffer(Be));for(let Ne=0;Ne<Be;Ne++)Me.setUint8(Ne,de[Ne],$);return Be==4?Me.getFloat32(0,$):Me.getFloat64(0,$)},Yt=we("^$*+?.([%-");class ur{constructor(de){this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=de,this.matchdepth=NaN,this.level=NaN,this.capture=[]}}const Ht=function(k,de){switch(k.p[de++]){case dt:return de===k.p_end&&Q(k.L,we("malformed pattern (ends with '%%')")),de+1;case 91:k.p[de]===94&&de++;do de===k.p_end&&Q(k.L,we("malformed pattern (missing ']')")),k.p[de++]===dt&&de<k.p_end&&de++;while(k.p[de]!==93);return de+1;default:return de}},$t=function(k,de){switch(de){case 97:return Ft(k);case 65:return!Ft(k);case 99:return u(k);case 67:return!u(k);case 100:return o(k);case 68:return!o(k);case 103:return N(k);case 71:return!N(k);case 108:return h(k);case 76:return!h(k);case 112:return U(k);case 80:return!U(k);case 115:return xe(k);case 83:return!xe(k);case 117:return T(k);case 85:return!T(k);case 119:return Z(k);case 87:return!Z(k);case 120:return ot(k);case 88:return!ot(k);case 122:return k===0;case 90:return k!==0;default:return de===k}},Zt=function(k,de,$,Be){let Me=!0;for(k.p[$+1]===94&&(Me=!1,$++);++$<Be;)if(k.p[$]===dt){if($++,$t(de,k.p[$]))return Me}else if(k.p[$+1]===45&&$+2<Be){if($+=2,k.p[$-2]<=de&&de<=k.p[$])return Me}else if(k.p[$]===de)return Me;return!Me},ir=function(k,de,$,Be){if(de>=k.src_end)return!1;{let Me=k.src[de];switch(k.p[$]){case 46:return!0;case dt:return $t(Me,k.p[$+1]);case 91:return Zt(k,Me,$,Be-1);default:return k.p[$]===Me}}},nr=function(k,de,$){if($>=k.p_end-1&&Q(k.L,we("malformed pattern (missing arguments to '%%b'")),k.src[de]!==k.p[$])return null;{let Be=k.p[$],Me=k.p[$+1],Ne=1;for(;++de<k.src_end;)if(k.src[de]===Me){if(--Ne==0)return de+1}else k.src[de]===Be&&Ne++}return null},sr=function(k,de,$,Be){let Me=0;for(;ir(k,de+Me,$,Be);)Me++;for(;Me>=0;){let Ne=f(k,de+Me,Be+1);if(Ne)return Ne;Me--}return null},Mt=function(k,de,$,Be){for(;;){let Me=f(k,de,Be+1);if(Me!==null)return Me;if(!ir(k,de,$,Be))return null;de++}},pr=function(k,de,$,Be){let Me,Ne=k.level;return Ne>=32&&Q(k.L,we("too many captures")),k.capture[Ne]=k.capture[Ne]?k.capture[Ne]:{},k.capture[Ne].init=de,k.capture[Ne].len=Be,k.level=Ne+1,(Me=f(k,de,$))===null&&k.level--,Me},dr=function(k,de,$){let Be,Me=function(Ne){let St=Ne.level;for(St--;St>=0;St--)if(Ne.capture[St].len===-1)return St;return Q(Ne.L,we("invalid pattern capture"))}(k);return k.capture[Me].len=de-k.capture[Me].init,(Be=f(k,de,$))===null&&(k.capture[Me].len=-1),Be},X=function(k,de,$){$=function(Me,Ne){return(Ne-=49)<0||Ne>=Me.level||Me.capture[Ne].len===-1?Q(Me.L,we("invalid capture index %%%d"),Ne+1):Ne}(k,$);let Be=k.capture[$].len;return k.src_end-de>=Be&&function(Me,Ne,St,Gt,Xt){return Ze(Me.subarray(Ne,Ne+Xt),St.subarray(Gt,Gt+Xt))}(k.src,k.capture[$].init,k.src,de,Be)?de+Be:null},f=function(k,de,$){let Be=!1,Me=!0;for(k.matchdepth--==0&&Q(k.L,we("pattern too complex"));Me||Be;)if(Me=!1,$!==k.p_end)switch(Be?void 0:k.p[$]){case 40:de=k.p[$+1]===41?pr(k,de,$+2,-2):pr(k,de,$+1,-1);break;case 41:de=dr(k,de,$+1);break;case 36:if($+1!==k.p_end){Be=!0;break}de=k.src.length-de==0?de:null;break;case dt:switch(k.p[$+1]){case 98:(de=nr(k,de,$+2))!==null&&($+=4,Me=!0);break;case 102:{$+=2,k.p[$]!==91&&Q(k.L,we("missing '[' after '%%f' in pattern"));let Ne=Ht(k,$),St=de===k.src_init?0:k.src[de-1];if(!Zt(k,St,$,Ne-1)&&Zt(k,de===k.src_end?0:k.src[de],$,Ne-1)){$=Ne,Me=!0;break}de=null;break}case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:(de=X(k,de,k.p[$+1]))!==null&&($+=2,Me=!0);break;default:Be=!0}break;default:{Be=!1;let Ne=Ht(k,$);if(ir(k,de,$,Ne))switch(k.p[Ne]){case 63:{let St;(St=f(k,de+1,Ne+1))!==null?de=St:($=Ne+1,Me=!0);break}case 43:de++;case 42:de=sr(k,de,$,Ne);break;case 45:de=Mt(k,de,$,Ne);break;default:de++,$=Ne,Me=!0}else{if(k.p[Ne]===42||k.p[Ne]===63||k.p[Ne]===45){$=Ne+1,Me=!0;break}de=null}break}}return k.matchdepth++,de},B=function(k,de,$,Be){if(de>=k.level)de===0?ie(k.L,k.src.subarray($,Be),Be-$):Q(k.L,we("invalid capture index %%%d"),de+1);else{let Me=k.capture[de].len;Me===-1&&Q(k.L,we("unfinished capture")),Me===-2?te(k.L,k.capture[de].init-k.src_init+1):ie(k.L,k.src.subarray(k.capture[de].init),Me)}},pe=function(k,de,$){let Be=k.level===0&&k.src.subarray(de)?1:k.level;D(k.L,Be,"too many captures");for(let Me=0;Me<Be;Me++)B(k,Me,de,$);return Be},Re=function(k,de,$,Be,Me,Ne){k.L=de,k.matchdepth=200,k.src=$,k.src_init=0,k.src_end=Be,k.p=Me,k.p_end=Ne},se=function(k){k.level=0,qe.lua_assert(k.matchdepth===200)},Oe=function(k,de){let $=x(k,1),Be=x(k,2),Me=$.length,Ne=Be.length,St=Dt(Ie(k,3,1),Me);if(St<1)St=1;else if(St>Me+1)return ke(k),1;if(de&&(_e(k,4)||function(Gt,Xt){for(let tr=0;tr<Xt;tr++)if(Je(Yt,Gt[tr])!==-1)return!1;return!0}(Be,Ne))){let Gt=function(Xt,tr,K){var ue=K>>>0,je=tr.length;if(je===0)return ue;for(;(ue=Xt.indexOf(tr[0],ue))!==-1;ue++)if(Ze(Xt.subarray(ue,ue+je),tr))return ue;return-1}($.subarray(St-1),Be,0);if(Gt>-1)return te(k,St+Gt),te(k,St+Gt+Ne-1),2}else{let Gt=new ur(k),Xt=St-1,tr=Be[0]===94;tr&&(Be=Be.subarray(1),Ne--),Re(Gt,k,$,Me,Be,Ne);do{let K;if(se(Gt),(K=f(Gt,Xt,0))!==null)return de?(te(k,Xt+1),te(k,K),pe(Gt,null,0)+2):pe(Gt,Xt,K)}while(Xt++<Gt.src_end&&!tr)}return ke(k),1},Xe=function(k){let de=et(k,ct(3));de.ms.L=k;for(let $=de.src;$<=de.ms.src_end;$++){let Be;if(se(de.ms),(Be=f(de.ms,$,de.p))!==null&&Be!==de.lastmatch)return de.src=de.lastmatch=Be,pe(de.ms,$,Be)}return 0},pt=function(k,de,$,Be,Me){let Ne=k.L;switch(Me){case S:{tt(Ne,3);let St=pe(k,$,Be);M(Ne,St,1);break}case V:B(k,0,$,Be),q(Ne,3);break;default:return void function(St,Gt,Xt,tr){let K=St.L,ue=vt(K,3),je=ue.length;for(let At=0;At<je;At++)ue[At]!==dt?ye(Gt,ue[At]):o(ue[++At])?ue[At]===48?De(Gt,St.src.subarray(Xt,tr),tr-Xt):(B(St,ue[At]-49,Xt,tr),jt(K,-1),Pe(K,-2),xt(Gt)):(ue[At]!==dt&&Q(K,we("invalid use of '%c' in replacement string"),dt),ye(Gt,ue[At]))}(k,de,$,Be)}_e(Ne,-1)?y(Ne,-1)||Q(Ne,we("invalid replacement value (a %s)"),W(Ne,-1)):(z(Ne,1),ie(Ne,k.src.subarray($,Be),Be-$)),xt(de)},kt={byte:function(k){let de=x(k,1),$=de.length,Be=Dt(Ie(k,2,1),$),Me=Dt(Ie(k,3,Be),$);if(Be<1&&(Be=1),Me>$&&(Me=$),Be>Me)return 0;if(Me-Be>=Number.MAX_SAFE_INTEGER)return Q(k,"string slice too long");let Ne=Me-Be+1;D(k,Ne,"string slice too long");for(let St=0;St<Ne;St++)te(k,de[Be+St-1]);return Ne},char:function(k){let de=le(k),$=new he,Be=Ge(k,$,de);for(let Me=1;Me<=de;Me++){let Ne=J(k,Me);yt(k,Ne>=0&&Ne<=255,"value out of range"),Be[Me-1]=Ne}return wt($,de),1},dump:function(k){let de=new he,$=_e(k,2);return Y(k,1,S),fe(k,1),be(k,de),G(k,Bt,de,$)!==0?Q(k,we("unable to dump given function")):(Nt(de),1)},find:function(k){return Oe(k,1)},format:function(k){let de=le(k),$=1,Be=x(k,$),Me=0,Ne=new he;for(be(k,Ne);Me<Be.length;)if(Be[Me]!==dt)ye(Ne,Be[Me++]);else if(Be[++Me]===dt)ye(Ne,Be[Me++]);else{let St=[];switch(++$>de&&nt(k,$,we("no value")),Me=Vt(k,Be,Me,St),String.fromCharCode(Be[Me++])){case"c":ye(Ne,J(k,$));break;case"d":case"i":case"o":case"u":case"x":case"X":{let Gt=J(k,$);Wt(St,we(c,!0)),lt(Ne,we(R(String.fromCharCode(...St),Gt)));break}case"a":case"A":Wt(St,we(c,!0)),lt(Ne,bt(k,St,d(k,$)));break;case"e":case"E":case"f":case"g":case"G":{let Gt=d(k,$);Wt(St,we(c,!0)),lt(Ne,we(R(String.fromCharCode(...St),Gt)));break}case"q":_t(k,Ne,$);break;case"s":{let Gt=jt(k,$);St.length<=2||St[2]===0?xt(Ne):(yt(k,Gt.length===ht(Gt),$,"string contains zeros"),Je(St,46)<0&&Gt.length>=100?xt(Ne):(lt(Ne,we(R(String.fromCharCode(...St),We(Gt)))),z(k,1)));break}default:return Q(k,we("invalid option '%%%c' to 'format'"),Be[Me-1])}}return Nt(Ne),1},gmatch:function(k){let de=x(k,1),$=x(k,2),Be=de.length,Me=$.length;fe(k,2);let Ne=new class{constructor(){this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new ur}};return ne(k,Ne),Re(Ne.ms,k,de,Be,$,Me),Ne.src=0,Ne.p=0,Ne.lastmatch=null,ee(k,Xe,3),1},gsub:function(k){let de=x(k,1),$=de.length,Be=x(k,2),Me=Be.length,Ne=null,St=rt(k,3),Gt=Ie(k,4,$+1),Xt=Be[0]===94,tr=0,K=new ur(k),ue=new he;for(yt(k,St===F||St===H||St===S||St===V,3,"string/function/table expected"),be(k,ue),Xt&&(Be=Be.subarray(1),Me--),Re(K,k,de,$,Be,Me),de=0,Be=0;tr<Gt;){let je;if(se(K),(je=f(K,de,Be))!==null&&je!==Ne)tr++,pt(K,ue,de,je,St),de=Ne=je;else{if(!(de<K.src_end))break;ye(ue,K.src[de++])}if(Xt)break}return De(ue,K.src.subarray(de,K.src_end),K.src_end-de),Nt(ue),te(k,tr),2},len:function(k){return te(k,x(k,1).length),1},lower:function(k){let de=x(k,1),$=de.length,Be=new Uint8Array($);for(let Me=0;Me<$;Me++){let Ne=de[Me];T(Ne)&&(Ne|=32),Be[Me]=Ne}return Ce(k,Be),1},match:function(k){return Oe(k,0)},pack:function(k){let de=new he,$=new Te(k),Be={s:x(k,1),off:0},Me=1,Ne=0;for(ke(k),be(k,de);Be.off<Be.s.length;){let St=gt($,Ne,Be),Gt=St.opt,Xt=St.size,tr=St.ntoalign;for(Ne+=tr+Xt;tr-- >0;)ye(de,0);switch(Me++,Gt){case 0:{let K=J(k,Me);if(Xt<4){let ue=1<<8*Xt-1;yt(k,-ue<=K&&K<ue,Me,"integer overflow")}Rt(de,K,$.islittle,Xt,K<0);break}case 1:{let K=J(k,Me);Xt<4&&yt(k,K>>>0<1<<8*Xt,Me,"unsigned overflow"),Rt(de,K>>>0,$.islittle,Xt,!1);break}case 2:{let K=it(de,Xt),ue=d(k,Me),je=new DataView(K.buffer,K.byteOffset,K.byteLength);Xt===4?je.setFloat32(0,ue,$.islittle):je.setFloat64(0,ue,$.islittle),Se(de,Xt);break}case 3:{let K=x(k,Me),ue=K.length;for(yt(k,ue<=Xt,Me,"string longer than given size"),De(de,K,ue);ue++<Xt;)ye(de,0);break}case 4:{let K=x(k,Me),ue=K.length;yt(k,Xt>=4||ue<1<<8*Xt,Me,"string length does not fit in given size"),Rt(de,ue,$.islittle,Xt,0),De(de,K,ue),Ne+=ue;break}case 5:{let K=x(k,Me),ue=K.length;yt(k,Je(K,0)<0,Me,"strings contains zeros"),De(de,K,ue),ye(de,0),Ne+=ue+1;break}case 6:ye(de,0);case 7:case 8:Me--}}return Nt(de),1},packsize:function(k){let de=new Te(k),$={s:x(k,1),off:0},Be=0;for(;$.off<$.s.length;){let Me=gt(de,Be,$),Ne=Me.opt,St=Me.size,Gt=Me.ntoalign;switch(yt(k,Be<=2147483647-(St+=Gt),1,"format result too large"),Be+=St,Ne){case 4:case 5:nt(k,1,"variable-length format")}}return te(k,Be),1},rep:function(k){let de=x(k,1),$=de.length,Be=J(k,2),Me=Fe(k,3,""),Ne=Me.length;if(Be<=0)Le(k,"");else{if($+Ne<$||$+Ne>2147483647/Be)return Q(k,we("resulting string too large"));{let St=Be*$+(Be-1)*Ne,Gt=new he,Xt=Ge(k,Gt,St),tr=0;for(;Be-- >1;)Xt.set(de,tr),tr+=$,Ne>0&&(Xt.set(Me,tr),tr+=Ne);Xt.set(de,tr),wt(Gt,St)}}return 1},reverse:function(k){let de=x(k,1),$=de.length,Be=new Uint8Array($);for(let Me=0;Me<$;Me++)Be[Me]=de[$-1-Me];return Ce(k,Be),1},sub:function(k){let de=x(k,1),$=de.length,Be=Dt(J(k,2),$),Me=Dt(Ie(k,3,-1),$);return Be<1&&(Be=1),Me>$&&(Me=$),Be<=Me?Ce(k,de.subarray(Be-1,Be-1+(Me-Be+1))):Le(k,""),1},unpack:function(k){let de=new Te(k),$={s:x(k,1),off:0},Be=x(k,2),Me=Be.length,Ne=Dt(Ie(k,3,1),Me)-1,St=0;for(yt(k,Ne<=Me&&Ne>=0,3,"initial position out of string");$.off<$.s.length;){let Gt=gt(de,Ne,$),Xt=Gt.opt,tr=Gt.size,K=Gt.ntoalign;switch(Ne+K+tr>Me&&nt(k,2,we("data string too short")),Ne+=K,D(k,2,"too many results"),St++,Xt){case 0:case 1:{let ue=Ut(k,Be.subarray(Ne),de.islittle,tr,Xt===0);te(k,ue);break}case 2:{let ue=Ct(0,Be.subarray(Ne),de.islittle,tr);O(k,ue);break}case 3:Ce(k,Be.subarray(Ne,Ne+tr));break;case 4:{let ue=Ut(k,Be.subarray(Ne),de.islittle,tr,0);yt(k,Ne+ue+tr<=Me,2,"data string too short"),Ce(k,Be.subarray(Ne+tr,Ne+tr+ue)),Ne+=ue;break}case 5:{let ue=Je(Be,0,Ne);ue===-1&&(ue=Be.length-Ne),Ce(k,Be.subarray(Ne,ue)),Ne=ue+1;break}case 7:case 6:case 8:St--}Ne+=tr}return te(k,Ne+1),St+1},upper:function(k){let de=x(k,1),$=de.length,Be=new Uint8Array($);for(let Me=0;Me<$;Me++){let Ne=de[Me];h(Ne)&&(Ne&=223),Be[Me]=Ne}return Ce(k,Be),1}};a.exports.luaopen_string=function(k){return ve(k,kt),function(de){P(de,0,1),Le(de,""),tt(de,-2),re(de,-2),z(de,1),tt(de,-2),at(de,-2,we("__index",!0)),z(de,1)}(k),1}},function(a,Ae,v){const{lua_gettop:R,lua_pushcfunction:A,lua_pushfstring:c,lua_pushinteger:g,lua_pushnil:_,lua_pushstring:w,lua_pushvalue:L,lua_setfield:b,lua_tointeger:E}=v(2),{luaL_Buffer:S,luaL_addvalue:I,luaL_argcheck:F,luaL_buffinit:H,luaL_checkinteger:V,luaL_checkstack:M,luaL_checkstring:P,luaL_error:G,luaL_newlib:q,luaL_optinteger:le,luaL_pushresult:ge}=v(7),{luastring_of:y,to_luastring:z}=v(5),ee=function(Pe){return(192&Pe)===128},te=function(Pe,at){return Pe>=0?Pe:0-Pe>at?0:at+Pe+1},ne=[255,127,2047,65535],Le=function(Pe,at){let re=Pe[at],fe=0;if(re<128)fe=re;else{let _e=0;for(;64&re;){let Ye=Pe[at+ ++_e];if((192&Ye)!=128)return null;fe=fe<<6|63&Ye,re<<=1}if(fe|=(127&re)<<5*_e,_e>3||fe>1114111||fe<=ne[_e])return null;at+=_e}return{code:fe,pos:at+1}},ie=z("%U"),ke=function(Pe,at){let re=V(Pe,at);F(Pe,0<=re&&re<=1114111,at,"value out of range"),c(Pe,ie,re)},O=function(Pe){let at=P(Pe,1),re=at.length,fe=E(Pe,2)-1;if(fe<0)fe=0;else if(fe<re)for(fe++;ee(at[fe]);)fe++;if(fe>=re)return 0;{let _e=Le(at,fe);return _e===null||ee(at[_e.pos])?G(Pe,z("invalid UTF-8 code")):(g(Pe,fe+1),g(Pe,_e.code),2)}},Ce={char:function(Pe){let at=R(Pe);if(at===1)ke(Pe,1);else{let re=new S;H(Pe,re);for(let fe=1;fe<=at;fe++)ke(Pe,fe),I(re);ge(re)}return 1},codepoint:function(Pe){let at=P(Pe,1),re=te(le(Pe,2,1),at.length),fe=te(le(Pe,3,re),at.length);if(F(Pe,re>=1,2,"out of range"),F(Pe,fe<=at.length,3,"out of range"),re>fe)return 0;if(fe-re>=Number.MAX_SAFE_INTEGER)return G(Pe,"string slice too long");let _e=fe-re+1;for(M(Pe,_e,"string slice too long"),_e=0,re-=1;re<fe;){let Ye=Le(at,re);if(Ye===null)return G(Pe,"invalid UTF-8 code");g(Pe,Ye.code),re=Ye.pos,_e++}return _e},codes:function(Pe){return P(Pe,1),A(Pe,O),L(Pe,1),g(Pe,0),3},len:function(Pe){let at=0,re=P(Pe,1),fe=re.length,_e=te(le(Pe,2,1),fe),Ye=te(le(Pe,3,-1),fe);for(F(Pe,1<=_e&&--_e<=fe,2,"initial position out of string"),F(Pe,--Ye<fe,3,"final position out of string");_e<=Ye;){let Qe=Le(re,_e);if(Qe===null)return _(Pe),g(Pe,_e+1),2;_e=Qe.pos,at++}return g(Pe,at),1},offset:function(Pe){let at=P(Pe,1),re=V(Pe,2),fe=re>=0?1:at.length+1;if(fe=te(le(Pe,3,fe),at.length),F(Pe,1<=fe&&--fe<=at.length,3,"position out of range"),re===0)for(;fe>0&&ee(at[fe]);)fe--;else if(ee(at[fe])&&G(Pe,"initial position is a continuation byte"),re<0)for(;re<0&&fe>0;){do fe--;while(fe>0&&ee(at[fe]));re++}else for(re--;re>0&&fe<at.length;){do fe++;while(ee(at[fe]));re--}return re===0?g(Pe,fe+1):_(Pe),1}},tt=y(91,0,45,127,194,45,244,93,91,128,45,191,93,42);a.exports.luaopen_utf8=function(Pe){return q(Pe,Ce),w(Pe,tt),b(Pe,-2,z("charpattern",!0)),1}},function(a,Ae,v){const{LUA_OPLT:R,LUA_TNUMBER:A,lua_compare:c,lua_gettop:g,lua_isinteger:_,lua_isnoneornil:w,lua_pushboolean:L,lua_pushinteger:b,lua_pushliteral:E,lua_pushnil:S,lua_pushnumber:I,lua_pushvalue:F,lua_setfield:H,lua_settop:V,lua_tointeger:M,lua_tointegerx:P,lua_type:G}=v(2),{luaL_argcheck:q,luaL_argerror:le,luaL_checkany:ge,luaL_checkinteger:y,luaL_checknumber:z,luaL_error:ee,luaL_newlib:te,luaL_optnumber:ne}=v(7),{LUA_MAXINTEGER:Le,LUA_MININTEGER:ie,lua_numbertointeger:ke}=v(3),{to_luastring:O}=v(5);let Ce;const tt=function(){return Ce=1103515245*Ce+12345&2147483647},Pe=function(re,fe){let _e=ke(fe);_e!==!1?b(re,_e):I(re,fe)},at={abs:function(re){if(_(re,1)){let fe=M(re,1);fe<0&&(fe=0|-fe),b(re,fe)}else I(re,Math.abs(z(re,1)));return 1},acos:function(re){return I(re,Math.acos(z(re,1))),1},asin:function(re){return I(re,Math.asin(z(re,1))),1},atan:function(re){let fe=z(re,1),_e=ne(re,2,1);return I(re,Math.atan2(fe,_e)),1},ceil:function(re){return _(re,1)?V(re,1):Pe(re,Math.ceil(z(re,1))),1},cos:function(re){return I(re,Math.cos(z(re,1))),1},deg:function(re){return I(re,z(re,1)*(180/Math.PI)),1},exp:function(re){return I(re,Math.exp(z(re,1))),1},floor:function(re){return _(re,1)?V(re,1):Pe(re,Math.floor(z(re,1))),1},fmod:function(re){if(_(re,1)&&_(re,2)){let fe=M(re,2);fe===0?le(re,2,"zero"):b(re,M(re,1)%fe|0)}else{let fe=z(re,1),_e=z(re,2);I(re,fe%_e)}return 1},log:function(re){let fe,_e=z(re,1);if(w(re,2))fe=Math.log(_e);else{let Ye=z(re,2);fe=Ye===2?Math.log2(_e):Ye===10?Math.log10(_e):Math.log(_e)/Math.log(Ye)}return I(re,fe),1},max:function(re){let fe=g(re),_e=1;q(re,fe>=1,1,"value expected");for(let Ye=2;Ye<=fe;Ye++)c(re,_e,Ye,R)&&(_e=Ye);return F(re,_e),1},min:function(re){let fe=g(re),_e=1;q(re,fe>=1,1,"value expected");for(let Ye=2;Ye<=fe;Ye++)c(re,Ye,_e,R)&&(_e=Ye);return F(re,_e),1},modf:function(re){if(_(re,1))V(re,1),I(re,0);else{let fe=z(re,1),_e=fe<0?Math.ceil(fe):Math.floor(fe);Pe(re,_e),I(re,fe===_e?0:fe-_e)}return 2},rad:function(re){return I(re,z(re,1)*(Math.PI/180)),1},random:function(re){let fe,_e,Ye=Ce===void 0?Math.random():tt()/2147483648;switch(g(re)){case 0:return I(re,Ye),1;case 1:fe=1,_e=y(re,1);break;case 2:fe=y(re,1),_e=y(re,2);break;default:return ee(re,"wrong number of arguments")}return q(re,fe<=_e,1,"interval is empty"),q(re,fe>=0||_e<=Le+fe,1,"interval too large"),Ye*=_e-fe+1,b(re,Math.floor(Ye)+fe),1},randomseed:function(re){return function(fe){(Ce=0|fe)==0&&(Ce=1)}(z(re,1)),tt(),0},sin:function(re){return I(re,Math.sin(z(re,1))),1},sqrt:function(re){return I(re,Math.sqrt(z(re,1))),1},tan:function(re){return I(re,Math.tan(z(re,1))),1},tointeger:function(re){let fe=P(re,1);return fe!==!1?b(re,fe):(ge(re,1),S(re)),1},type:function(re){return G(re,1)===A?_(re,1)?E(re,"integer"):E(re,"float"):(ge(re,1),S(re)),1},ult:function(re){let fe=y(re,1),_e=y(re,2);return L(re,fe>=0?_e<0||fe<_e:_e<0&&fe<_e),1}};a.exports.luaopen_math=function(re){return te(re,at),I(re,Math.PI),H(re,-2,O("pi",!0)),I(re,1/0),H(re,-2,O("huge",!0)),b(re,Le),H(re,-2,O("maxinteger",!0)),b(re,ie),H(re,-2,O("mininteger",!0)),1}},function(a,Ae,v){const{LUA_MASKCALL:R,LUA_MASKCOUNT:A,LUA_MASKLINE:c,LUA_MASKRET:g,LUA_REGISTRYINDEX:_,LUA_TFUNCTION:w,LUA_TNIL:L,LUA_TTABLE:b,LUA_TUSERDATA:E,lua_Debug:S,lua_call:I,lua_checkstack:F,lua_gethook:H,lua_gethookcount:V,lua_gethookmask:M,lua_getinfo:P,lua_getlocal:G,lua_getmetatable:q,lua_getstack:le,lua_getupvalue:ge,lua_getuservalue:y,lua_insert:z,lua_iscfunction:ee,lua_isfunction:te,lua_isnoneornil:ne,lua_isthread:Le,lua_newtable:ie,lua_pcall:ke,lua_pop:O,lua_pushboolean:Ce,lua_pushfstring:tt,lua_pushinteger:Pe,lua_pushlightuserdata:at,lua_pushliteral:re,lua_pushnil:fe,lua_pushstring:_e,lua_pushvalue:Ye,lua_rawgetp:Qe,lua_rawsetp:vt,lua_rotate:et,lua_setfield:rt,lua_sethook:ct,lua_setlocal:he,lua_setmetatable:ye,lua_settop:De,lua_setupvalue:Se,lua_setuservalue:lt,lua_tojsstring:xt,lua_toproxy:yt,lua_tostring:nt,lua_tothread:be,lua_touserdata:Ge,lua_type:J,lua_upvalueid:d,lua_upvaluejoin:D,lua_xmove:x}=v(2),{luaL_argcheck:Y,luaL_argerror:Q,luaL_checkany:ve,luaL_checkinteger:Ie,luaL_checkstring:Fe,luaL_checktype:it,luaL_error:Nt,luaL_loadbuffer:wt,luaL_newlib:jt,luaL_optinteger:W,luaL_optstring:qe,luaL_traceback:Ze,lua_writestringerror:Je}=v(7),We=v(17),{luastring_indexOf:we,to_luastring:dt}=v(5),ht=function(U,xe,ot){U===xe||F(xe,ot)||Nt(U,dt("stack overflow",!0))},Dt=function(U){return Le(U,1)?{arg:1,thread:be(U,1)}:{arg:0,thread:U}},Bt=function(U,xe,ot){_e(U,ot),rt(U,-2,xe)},qt=function(U,xe,ot){Pe(U,ot),rt(U,-2,xe)},bt=function(U,xe,ot){Ce(U,ot),rt(U,-2,xe)},Ot=function(U,xe,ot){U==xe?et(U,-2,1):x(xe,U,1),rt(U,-2,ot)},Ft=function(U,xe){let ot=Ie(U,2);it(U,1,w);let _t=xe?ge(U,1,ot):Se(U,1,ot);return _t===null?0:(_e(U,_t),z(U,-(xe+1)),xe+1)},o=function(U,xe,ot){let _t=Ie(U,ot);return it(U,xe,w),Y(U,ge(U,xe,_t)!==null,ot,"invalid upvalue index"),_t},u=dt("__hooks__",!0),N=["call","return","line","count","tail call"].map(U=>dt(U)),h=function(U,xe){Qe(U,_,u);let ot=Ge(U,-1).get(U);ot&&(ot(U),_e(U,N[xe.event]),xe.currentline>=0?Pe(U,xe.currentline):fe(U),We.lua_assert(P(U,dt("lS"),xe)),I(U,2,0))},T={gethook:function(U){let xe=Dt(U).thread,ot=new Uint8Array(5),_t=M(xe),Vt=H(xe);return Vt===null?fe(U):Vt!==h?re(U,"external hook"):(Qe(U,_,u),Ge(U,-1).get(xe)(U)),_e(U,function(Wt,Te){let ft=0;return Wt&R&&(Te[ft++]=99),Wt&g&&(Te[ft++]=114),Wt&c&&(Te[ft++]=108),Te.subarray(0,ft)}(_t,ot)),Pe(U,V(xe)),3},getinfo:function(U){let xe=new S,ot=Dt(U),_t=ot.arg,Vt=ot.thread,Wt=qe(U,_t+2,"flnStu");if(ht(U,Vt,3),te(U,_t+1))Wt=tt(U,dt(">%s"),Wt),Ye(U,_t+1),x(U,Vt,1);else if(!le(Vt,Ie(U,_t+1),xe))return fe(U),1;return P(Vt,Wt,xe)||Q(U,_t+2,"invalid option"),ie(U),we(Wt,83)>-1&&(Bt(U,dt("source",!0),xe.source),Bt(U,dt("short_src",!0),xe.short_src),qt(U,dt("linedefined",!0),xe.linedefined),qt(U,dt("lastlinedefined",!0),xe.lastlinedefined),Bt(U,dt("what",!0),xe.what)),we(Wt,108)>-1&&qt(U,dt("currentline",!0),xe.currentline),we(Wt,117)>-1&&(qt(U,dt("nups",!0),xe.nups),qt(U,dt("nparams",!0),xe.nparams),bt(U,dt("isvararg",!0),xe.isvararg)),we(Wt,110)>-1&&(Bt(U,dt("name",!0),xe.name),Bt(U,dt("namewhat",!0),xe.namewhat)),we(Wt,116)>-1&&bt(U,dt("istailcall",!0),xe.istailcall),we(Wt,76)>-1&&Ot(U,Vt,dt("activelines",!0)),we(Wt,102)>-1&&Ot(U,Vt,dt("func",!0)),1},getlocal:function(U){let xe=Dt(U),ot=xe.thread,_t=xe.arg,Vt=new S,Wt=Ie(U,_t+2);if(te(U,_t+1))return Ye(U,_t+1),_e(U,G(U,null,Wt)),1;{let Te=Ie(U,_t+1);if(!le(ot,Te,Vt))return Q(U,_t+1,"level out of range");ht(U,ot,1);let ft=G(ot,Vt,Wt);return ft?(x(ot,U,1),_e(U,ft),et(U,-2,1),2):(fe(U),1)}},getmetatable:function(U){return ve(U,1),q(U,1)||fe(U),1},getregistry:function(U){return Ye(U,_),1},getupvalue:function(U){return Ft(U,1)},getuservalue:function(U){return J(U,1)!==E?fe(U):y(U,1),1},sethook:function(U){let xe,ot,_t,Vt,Wt=Dt(U),Te=Wt.thread,ft=Wt.arg;if(ne(U,ft+1))De(U,ft+1),_t=null,xe=0,ot=0;else{const ze=Fe(U,ft+2);it(U,ft+1,w),ot=W(U,ft+3,0),_t=h,xe=function(Ee,gt){let Rt=0;return we(Ee,99)>-1&&(Rt|=R),we(Ee,114)>-1&&(Rt|=g),we(Ee,108)>-1&&(Rt|=c),gt>0&&(Rt|=A),Rt}(ze,ot)}Qe(U,_,u)===L?(Vt=new WeakMap,at(U,Vt),vt(U,_,u)):Vt=Ge(U,-1);let ae=yt(U,ft+1);return Vt.set(Te,ae),ct(Te,_t,xe,ot),0},setlocal:function(U){let xe=Dt(U),ot=xe.thread,_t=xe.arg,Vt=new S,Wt=Ie(U,_t+1),Te=Ie(U,_t+2);if(!le(ot,Wt,Vt))return Q(U,_t+1,"level out of range");ve(U,_t+3),De(U,_t+3),ht(U,ot,1),x(U,ot,1);let ft=he(ot,Vt,Te);return ft===null&&O(ot,1),_e(U,ft),1},setmetatable:function(U){const xe=J(U,2);return Y(U,xe==L||xe==b,2,"nil or table expected"),De(U,2),ye(U,1),1},setupvalue:function(U){return ve(U,3),Ft(U,0)},setuservalue:function(U){return it(U,1,E),ve(U,2),De(U,2),lt(U,1),1},traceback:function(U){let xe=Dt(U),ot=xe.thread,_t=xe.arg,Vt=nt(U,_t+1);if(Vt!==null||ne(U,_t+1)){let Wt=W(U,_t+2,U===ot?1:0);Ze(U,ot,Vt,Wt)}else Ye(U,_t+1);return 1},upvalueid:function(U){let xe=o(U,1,2);return at(U,d(U,1,xe)),1},upvaluejoin:function(U){let xe=o(U,1,2),ot=o(U,3,4);return Y(U,!ee(U,1),1,"Lua function expected"),Y(U,!ee(U,3),3,"Lua function expected"),D(U,1,xe,3,ot),0}};let Z;typeof window<"u"&&(Z=function(){let U=prompt("lua_debug>","");return U!==null?U:""}),Z&&(T.debug=function(U){for(;;){let xe=Z();if(xe==="cont")return 0;if(xe.length===0)continue;let ot=dt(xe);(wt(U,ot,ot.length,dt("=(debug command)",!0))||ke(U,0,0,0))&&Je(xt(U,-1),`
`),De(U,0)}}),a.exports.luaopen_debug=function(U){return jt(U,T),1}},function(a,Ae,v){const{LUA_DIRSEP:R,LUA_EXEC_DIR:A,LUA_JSPATH_DEFAULT:c,LUA_PATH_DEFAULT:g,LUA_PATH_MARK:_,LUA_PATH_SEP:w}=v(3),{LUA_OK:L,LUA_REGISTRYINDEX:b,LUA_TNIL:E,LUA_TTABLE:S,lua_callk:I,lua_createtable:F,lua_getfield:H,lua_insert:V,lua_isfunction:M,lua_isnil:P,lua_isstring:G,lua_newtable:q,lua_pop:le,lua_pushboolean:ge,lua_pushcclosure:y,lua_pushcfunction:z,lua_pushfstring:ee,lua_pushglobaltable:te,lua_pushlightuserdata:ne,lua_pushliteral:Le,lua_pushlstring:ie,lua_pushnil:ke,lua_pushstring:O,lua_pushvalue:Ce,lua_rawgeti:tt,lua_rawgetp:Pe,lua_rawseti:at,lua_rawsetp:re,lua_remove:fe,lua_setfield:_e,lua_setmetatable:Ye,lua_settop:Qe,lua_toboolean:vt,lua_tostring:et,lua_touserdata:rt,lua_upvalueindex:ct}=v(2),{LUA_LOADED_TABLE:he,LUA_PRELOAD_TABLE:ye,luaL_Buffer:De,luaL_addvalue:Se,luaL_buffinit:lt,luaL_checkstring:xt,luaL_error:yt,luaL_getsubtable:nt,luaL_gsub:be,luaL_len:Ge,luaL_loadfile:J,luaL_newlib:d,luaL_optstring:D,luaL_pushresult:x,luaL_setfuncs:Y}=v(7),Q=v(17),{luastring_indexOf:ve,to_jsstring:Ie,to_luastring:Fe,to_uristring:it}=v(5),Nt=v(0),wt=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:(0,eval)("this"),jt=Fe("__JSLIBS__"),W=R,qe=R,Ze=Fe("luaopen_"),Je=Fe("_"),We=Fe("");let we;we=function(Te,ft,ae){ft=it(ft);let ze=new XMLHttpRequest;if(ze.open("GET",ft,!1),ze.send(),ze.status<200||ze.status>=300)return O(Te,Fe(`${ze.status}: ${ze.statusText}`)),null;let Ee,gt=ze.response;/\/\/[#@] sourceURL=/.test(gt)||(gt+=" //# sourceURL="+ft);try{Ee=Function("fengari",gt)}catch(Ut){return O(Te,Fe(`${Ut.name}: ${Ut.message}`)),null}let Rt=Ee(Nt);return typeof Rt=="function"||typeof Rt=="object"&&Rt!==null?Rt:Rt===void 0?wt:(O(Te,Fe(`library returned unexpected type (${typeof Rt})`)),null)};let dt;dt=function(Te){Te=it(Te);let ft=new XMLHttpRequest;return ft.open("GET",Te,!1),ft.send(),ft.status>=200&&ft.status<=299};const ht=function(Te,ft,ae){let ze=qt(Te,ft);if(ze===null){if((ze=we(Te,ft,ae[0]===42))===null)return 1;bt(Te,ft,ze)}if(ae[0]===42)return ge(Te,1),0;{let Ee=function(gt,Rt,Ut){let Ct=Rt[Ie(Ut)];return Ct&&typeof Ct=="function"?Ct:(ee(gt,Fe("undefined symbol: %s"),Ut),null)}(Te,ze,ae);return Ee===null?2:(z(Te,Ee),0)}},Dt=wt,Bt=function(Te,ft,ae,ze){let Ee=`${ae}${Q.LUA_VERSUFFIX}`;O(Te,Fe(Ee));let gt=Dt[Ee];gt===void 0&&(gt=Dt[ae]),gt===void 0||function(Rt){H(Rt,b,Fe("LUA_NOENV"));let Ut=vt(Rt,-1);return le(Rt,1),Ut}(Te)?O(Te,ze):(gt=be(Te,Fe(gt),Fe(w+w,!0),Fe(w+Ie(We)+w,!0)),be(Te,gt,We,ze),fe(Te,-2)),_e(Te,-3,ft),le(Te,1)},qt=function(Te,ft){Pe(Te,b,jt),H(Te,-1,ft);let ae=rt(Te,-1);return le(Te,2),ae},bt=function(Te,ft,ae){Pe(Te,b,jt),ne(Te,ae),Ce(Te,-1),_e(Te,-3,ft),at(Te,-2,Ge(Te,-2)+1),le(Te,1)},Ot=function(Te,ft){for(;ft[0]===w.charCodeAt(0);)ft=ft.subarray(1);if(ft.length===0)return null;let ae=ve(ft,w.charCodeAt(0));return ae<0&&(ae=ft.length),ie(Te,ft,ae),ft.subarray(ae)},Ft=function(Te,ft,ae,ze,Ee){let gt=new De;for(lt(Te,gt),ze[0]!==0&&(ft=be(Te,ft,ze,Ee));(ae=Ot(Te,ae))!==null;){let Rt=be(Te,et(Te,-1),Fe(_,!0),ft);if(fe(Te,-2),dt(Rt))return Rt;ee(Te,Fe(`
	no file '%s'`),Rt),fe(Te,-2),Se(gt)}return x(gt),null},o=function(Te,ft,ae,ze){H(Te,ct(1),ae);let Ee=et(Te,-1);return Ee===null&&yt(Te,Fe("'package.%s' must be a string"),ae),Ft(Te,ft,Ee,Fe("."),ze)},u=function(Te,ft,ae){return ft?(O(Te,ae),2):yt(Te,Fe(`error loading module '%s' from file '%s':
	%s`),et(Te,1),ae,et(Te,-1))},N=function(Te){let ft=xt(Te,1),ae=o(Te,ft,Fe("path",!0),Fe(qe,!0));return ae===null?1:u(Te,J(Te,ae)===L,ae)},h=function(Te,ft,ae){let ze;ae=be(Te,ae,Fe("."),Je);let Ee=ve(ae,45);if(Ee>=0){ze=ie(Te,ae,Ee),ze=ee(Te,Fe("%s%s"),Ze,ze);let gt=ht(Te,ft,ze);if(gt!==2)return gt;ae=Ee+1}return ze=ee(Te,Fe("%s%s"),Ze,ae),ht(Te,ft,ze)},T=function(Te){let ft=xt(Te,1),ae=o(Te,ft,Fe("jspath",!0),Fe(W,!0));return ae===null?1:u(Te,h(Te,ae,ft)===0,ae)},Z=function(Te){let ft,ae=xt(Te,1),ze=ve(ae,46);if(ze<0)return 0;ie(Te,ae,ze);let Ee=o(Te,et(Te,-1),Fe("jspath",!0),Fe(W,!0));return Ee===null?1:(ft=h(Te,Ee,ae))!==0?ft!=2?u(Te,0,Ee):(O(Te,Fe(`
	no module '%s' in file '%s'`),ae,Ee),1):(O(Te,Ee),2)},U=function(Te){let ft=xt(Te,1);return H(Te,b,ye),H(Te,-1,ft)===E&&ee(Te,Fe(`
	no field package.preload['%s']`),ft),1},xe=function(Te,ft,ae){for(;ft===L?(tt(Te,3,ae.i)===E&&(le(Te,1),x(ae.msg),yt(Te,Fe("module '%s' not found:%s"),ae.name,et(Te,-1))),O(Te,ae.name),I(Te,1,2,ae,xe)):ft=L,!M(Te,-2);ae.i++)G(Te,-2)?(le(Te,1),Se(ae.msg)):le(Te,2);return ae.k(Te,L,ae.ctx)},ot=function(Te,ft,ae){return O(Te,ae),V(Te,-2),I(Te,2,1,ae,_t),_t(Te,L,ae)},_t=function(Te,ft,ae){let ze=ae;return P(Te,-1)||_e(Te,2,ze),H(Te,2,ze)==E&&(ge(Te,1),Ce(Te,-1),_e(Te,2,ze)),1},Vt={loadlib:function(Te){let ft=xt(Te,1),ae=xt(Te,2),ze=ht(Te,ft,ae);return ze===0?1:(ke(Te),V(Te,-2),Le(Te,ze===1?"open":"init"),3)},searchpath:function(Te){return Ft(Te,xt(Te,1),xt(Te,2),D(Te,3,"."),D(Te,4,R))!==null?1:(ke(Te),V(Te,-2),2)}},Wt={require:function(Te){let ft=xt(Te,1);return Qe(Te,1),H(Te,b,he),H(Te,2,ft),vt(Te,-1)?1:(le(Te,1),function(ae,ze,Ee,gt){let Rt=new De;return lt(ae,Rt),H(ae,ct(1),Fe("searchers",!0))!==S&&yt(ae,Fe("'package.searchers' must be a table")),xe(ae,L,{name:ze,i:1,msg:Rt,ctx:Ee,k:gt})}(Te,ft,ft,ot))}};a.exports.luaopen_package=function(Te){return function(ft){q(ft),F(ft,0,1),Ye(ft,-2),re(ft,b,jt)}(Te),d(Te,Vt),function(ft){let ae=[U,N,T,Z,null];F(ft);for(let ze=0;ae[ze];ze++)Ce(ft,-2),y(ft,ae[ze],1),at(ft,-2,ze+1);_e(ft,-2,Fe("searchers",!0))}(Te),Bt(Te,Fe("path",!0),"LUA_PATH",g),Bt(Te,Fe("jspath",!0),"LUA_JSPATH",c),Le(Te,R+`
`+w+`
`+_+`
`+A+`
-
`),_e(Te,-2,Fe("config",!0)),nt(Te,b,he),_e(Te,-2,Fe("loaded",!0)),nt(Te,b,ye),_e(Te,-2,Fe("preload",!0)),te(Te),Ce(Te,-2),Y(Te,Wt,1),le(Te,1),1}},function(a,Ae,v){const{lua_pushinteger:R,lua_pushliteral:A,lua_setfield:c}=v(2),{luaL_newlib:g}=v(7),{FENGARI_AUTHORS:_,FENGARI_COPYRIGHT:w,FENGARI_RELEASE:L,FENGARI_VERSION:b,FENGARI_VERSION_MAJOR:E,FENGARI_VERSION_MINOR:S,FENGARI_VERSION_NUM:I,FENGARI_VERSION_RELEASE:F,to_luastring:H}=v(5);a.exports.luaopen_fengari=function(V){return g(V,{}),A(V,_),c(V,-2,H("AUTHORS")),A(V,w),c(V,-2,H("COPYRIGHT")),A(V,L),c(V,-2,H("RELEASE")),A(V,b),c(V,-2,H("VERSION")),A(V,E),c(V,-2,H("VERSION_MAJOR")),A(V,S),c(V,-2,H("VERSION_MINOR")),R(V,I),c(V,-2,H("VERSION_NUM")),A(V,F),c(V,-2,H("VERSION_RELEASE")),1}},function(a,Ae,v){v.r(Ae),v.d(Ae,"L",function(){return ie}),v.d(Ae,"load",function(){return ke});var R=v(0);v.d(Ae,"FENGARI_AUTHORS",function(){return R.FENGARI_AUTHORS}),v.d(Ae,"FENGARI_COPYRIGHT",function(){return R.FENGARI_COPYRIGHT}),v.d(Ae,"FENGARI_RELEASE",function(){return R.FENGARI_RELEASE}),v.d(Ae,"FENGARI_VERSION",function(){return R.FENGARI_VERSION}),v.d(Ae,"FENGARI_VERSION_MAJOR",function(){return R.FENGARI_VERSION_MAJOR}),v.d(Ae,"FENGARI_VERSION_MINOR",function(){return R.FENGARI_VERSION_MINOR}),v.d(Ae,"FENGARI_VERSION_NUM",function(){return R.FENGARI_VERSION_NUM}),v.d(Ae,"FENGARI_VERSION_RELEASE",function(){return R.FENGARI_VERSION_RELEASE}),v.d(Ae,"luastring_eq",function(){return R.luastring_eq}),v.d(Ae,"luastring_indexOf",function(){return R.luastring_indexOf}),v.d(Ae,"luastring_of",function(){return R.luastring_of}),v.d(Ae,"to_jsstring",function(){return R.to_jsstring}),v.d(Ae,"to_luastring",function(){return R.to_luastring}),v.d(Ae,"to_uristring",function(){return R.to_uristring}),v.d(Ae,"lua",function(){return R.lua}),v.d(Ae,"lauxlib",function(){return R.lauxlib}),v.d(Ae,"lualib",function(){return R.lualib});var A=v(21);v.d(Ae,"interop",function(){return A});const{LUA_ERRRUN:c,LUA_ERRSYNTAX:g,LUA_OK:_,LUA_VERSION_MAJOR:w,LUA_VERSION_MINOR:L,lua_Debug:b,lua_getinfo:E,lua_getstack:S,lua_gettop:I,lua_insert:F,lua_pcall:H,lua_pop:V,lua_pushcfunction:M,lua_pushstring:P,lua_remove:G,lua_setglobal:q,lua_tojsstring:le}=R.lua,{luaL_loadbuffer:ge,luaL_newstate:y,luaL_requiref:z}=R.lauxlib,{checkjs:ee,luaopen_js:te,push:ne,tojs:Le}=A,ie=y();function ke(O,Ce){if(typeof O=="string")O=Object(R.to_luastring)(O);else if(!(O instanceof Uint8Array))throw new TypeError("expects an array of bytes or javascript string");Ce=Ce?Object(R.to_luastring)(Ce):null;let tt,Pe=ge(ie,O,null,Ce);if(tt=Pe===g?new SyntaxError(le(ie,-1)):Le(ie,-1),V(ie,1),Pe!==_)throw tt;return tt}if(R.lualib.luaL_openlibs(ie),z(ie,Object(R.to_luastring)("js"),te,1),V(ie,1),P(ie,Object(R.to_luastring)(R.FENGARI_COPYRIGHT)),q(ie,Object(R.to_luastring)("_COPYRIGHT")),typeof document<"u"&&document instanceof HTMLDocument){const O=function(Qe){switch(Qe){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},Ce=function(Qe){let vt=new b;return S(Qe,2,vt)&&E(Qe,Object(R.to_luastring)("Sl"),vt),ne(Qe,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:le(Qe,1),error:Le(Qe,1),filename:vt.short_src?Object(R.to_jsstring)(vt.short_src):void 0,lineno:vt.currentline>0?vt.currentline:void 0})),1},tt=function(Qe,vt,et){let rt,ct=ge(ie,vt,null,et);if(ct===g){let he=le(ie,-1),ye=Qe.src?Qe.src:document.location,De,Se=new SyntaxError(he,ye,De);rt=new ErrorEvent("error",{message:he,error:Se,filename:ye,lineno:De})}else if(ct===_){let he=I(ie);M(ie,Ce),F(ie,he),Object.defineProperty(document,"currentScript",{value:Qe,configurable:!0}),ct=H(ie,0,0,he),delete document.currentScript,G(ie,he),ct===c&&(rt=ee(ie,-1))}ct!==_&&(rt===void 0&&(rt=new ErrorEvent("error",{message:le(ie,-1),error:Le(ie,-1)})),V(ie,1),window.dispatchEvent(rt)&&console.error("uncaught exception",rt.error))},Pe=function(Qe,vt,et){if(Qe.status>=200&&Qe.status<300){let rt=Qe.response;rt=typeof rt=="string"?Object(R.to_luastring)(Qe.response):new Uint8Array(rt),tt(vt,rt,et)}else vt.dispatchEvent(new Event("error"))},at=function(Qe){if(Qe.src){let vt=Object(R.to_luastring)("@"+Qe.src);if(document.readyState==="complete"||Qe.async)if(typeof fetch=="function")fetch(Qe.src,{method:"GET",credentials:O(Qe.crossorigin),redirect:"follow",integrity:Qe.integrity}).then(function(et){if(et.ok)return et.arrayBuffer();throw new Error("unable to fetch")}).then(function(et){let rt=new Uint8Array(et);tt(Qe,rt,vt)}).catch(function(et){Qe.dispatchEvent(new Event("error"))});else{let et=new XMLHttpRequest;et.open("GET",Qe.src,!0),et.responseType="arraybuffer",et.onreadystatechange=function(){et.readyState===4&&Pe(et,Qe,vt)},et.send()}else{let et=new XMLHttpRequest;et.open("GET",Qe.src,!1),et.send(),Pe(et,Qe,vt)}}else{let vt=Object(R.to_luastring)(Qe.innerHTML),et=Qe.id?Object(R.to_luastring)("="+Qe.id):vt;tt(Qe,vt,et)}},re=/^(.*?\/.*?)([\t ]*;.*)?$/,fe=/^(\d+)\.(\d+)$/,_e=function(Qe){if(Qe.tagName!=="SCRIPT")return;let vt=re.exec(Qe.type);if(!vt)return;let et=vt[1];if(et==="application/lua"||et==="text/lua"){if(Qe.hasAttribute("lua-version")){let rt=fe.exec(Qe.getAttribute("lua-version"));if(!rt||rt[1]!==w||rt[2]!==L)return}at(Qe)}};typeof MutationObserver<"u"?new MutationObserver(function(Qe,vt){for(let et=0;et<Qe.length;et++){let rt=Qe[et];for(let ct=0;ct<rt.addedNodes.length;ct++)_e(rt.addedNodes[ct])}}).observe(document,{childList:!0,subtree:!0}):console.warn&&console.warn("fengari-web: MutationObserver not found; lua script tags will not be run when inserted"),Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"], script[type^="text/lua"]'),_e)}},function(a,Ae,v){const{LUA_MULTRET:R,LUA_OPADD:A,LUA_OPBAND:c,LUA_OPBNOT:g,LUA_OPBOR:_,LUA_OPBXOR:w,LUA_OPDIV:L,LUA_OPIDIV:b,LUA_OPMOD:E,LUA_OPSHL:S,LUA_OPSHR:I,LUA_OPUNM:F,constant_types:{LUA_TBOOLEAN:H,LUA_TLIGHTUSERDATA:V,LUA_TLNGSTR:M,LUA_TNIL:P,LUA_TNUMFLT:G,LUA_TNUMINT:q,LUA_TTABLE:le},to_luastring:ge}=v(1),{lua_assert:y}=v(4),z=v(20),ee=v(6),te=v(16),ne=v(23),Le=v(9),ie=v(15),ke=te.OpCodesI,O=ee.TValue,Ce={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},tt={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},Pe=function(h){return h.t!==h.f},at=function(h,T){let Z=ne.expkind;if(Pe(h))return!1;switch(h.k){case Z.VKINT:return!T||new O(q,h.u.ival);case Z.VKFLT:return!T||new O(G,h.u.nval);default:return!1}},re=function(h,T,Z){let U,xe=T+Z-1;if(h.pc>h.lasttarget&&(U=h.f.code[h.pc-1]).opcode===ke.OP_LOADNIL){let ot=U.A,_t=ot+U.B;if(ot<=T&&T<=_t+1||T<=ot&&ot<=xe+1)return ot<T&&(T=ot),_t>xe&&(xe=_t),te.SETARG_A(U,T),void te.SETARG_B(U,xe-T)}nt(h,ke.OP_LOADNIL,T,Z-1,0)},fe=function(h,T){return h.f.code[T.u.info]},_e=function(h,T){let Z=h.f.code[T].sBx;return Z===-1?-1:T+1+Z},Ye=function(h,T,Z){let U=h.f.code[T],xe=Z-(T+1);y(Z!==-1),Math.abs(xe)>te.MAXARG_sBx&&z.luaX_syntaxerror(h.ls,ge("control structure too long",!0)),te.SETARG_sBx(U,xe)},Qe=function(h,T,Z){if(Z===-1)return T;if(T===-1)T=Z;else{let U=T,xe=_e(h,U);for(;xe!==-1;)xe=_e(h,U=xe);Ye(h,U,Z)}return T},vt=function(h){let T=h.jpc;h.jpc=-1;let Z=Ge(h,ke.OP_JMP,0,-1);return Z=Qe(h,Z,T)},et=function(h,T,Z,U,xe){return nt(h,T,Z,U,xe),vt(h)},rt=function(h){return h.lasttarget=h.pc,h.pc},ct=function(h,T){return T>=1&&te.testTMode(h.f.code[T-1].opcode)?T-1:T},he=function(h,T){return h.f.code[ct(h,T)]},ye=function(h,T,Z){let U=ct(h,T),xe=h.f.code[U];return xe.opcode===ke.OP_TESTSET&&(Z!==te.NO_REG&&Z!==xe.B?te.SETARG_A(xe,Z):h.f.code[U]=te.CREATE_ABC(ke.OP_TEST,xe.B,0,xe.C),!0)},De=function(h,T){for(;T!==-1;T=_e(h,T))ye(h,T,te.NO_REG)},Se=function(h,T,Z,U,xe){for(;T!==-1;){let ot=_e(h,T);ye(h,T,U)?Ye(h,T,Z):Ye(h,T,xe),T=ot}},lt=function(h,T){rt(h),h.jpc=Qe(h,h.jpc,T)},xt=function(h,T,Z){Z===h.pc?lt(h,T):(y(Z<h.pc),Se(h,T,Z,te.NO_REG,Z))},yt=function(h,T){let Z=h.f;return function(U){Se(U,U.jpc,U.pc,te.NO_REG,U.pc),U.jpc=-1}(h),Z.code[h.pc]=T,Z.lineinfo[h.pc]=h.ls.lastline,h.pc++},nt=function(h,T,Z,U,xe){return y(te.getOpMode(T)===te.iABC),y(te.getBMode(T)!==te.OpArgN||U===0),y(te.getCMode(T)!==te.OpArgN||xe===0),y(Z<=te.MAXARG_A&&U<=te.MAXARG_B&&xe<=te.MAXARG_C),yt(h,te.CREATE_ABC(T,Z,U,xe))},be=function(h,T,Z,U){return y(te.getOpMode(T)===te.iABx||te.getOpMode(T)===te.iAsBx),y(te.getCMode(T)===te.OpArgN),y(Z<=te.MAXARG_A&&U<=te.MAXARG_Bx),yt(h,te.CREATE_ABx(T,Z,U))},Ge=function(h,T,Z,U){return be(h,T,Z,U+te.MAXARG_sBx)},J=function(h,T){return y(T<=te.MAXARG_Ax),yt(h,te.CREATE_Ax(ke.OP_EXTRAARG,T))},d=function(h,T,Z){if(Z<=te.MAXARG_Bx)return be(h,ke.OP_LOADK,T,Z);{let U=be(h,ke.OP_LOADKX,T,0);return J(h,Z),U}},D=function(h,T){let Z=h.freereg+T;Z>h.f.maxstacksize&&(Z>=255&&z.luaX_syntaxerror(h.ls,ge("function or expression needs too many registers",!0)),h.f.maxstacksize=Z)},x=function(h,T){D(h,T),h.freereg+=T},Y=function(h,T){!te.ISK(T)&&T>=h.nactvar&&(h.freereg--,y(T===h.freereg))},Q=function(h,T){T.k===ne.expkind.VNONRELOC&&Y(h,T.u.info)},ve=function(h,T,Z){let U=T.k===ne.expkind.VNONRELOC?T.u.info:-1,xe=Z.k===ne.expkind.VNONRELOC?Z.u.info:-1;U>xe?(Y(h,U),Y(h,xe)):(Y(h,xe),Y(h,U))},Ie=function(h,T,Z){let U=h.f,xe=Le.luaH_get(h.L,h.ls.h,T);if(xe.ttisinteger()){let _t=xe.value;if(_t<h.nk&&U.k[_t].ttype()===Z.ttype()&&U.k[_t].value===Z.value)return _t}let ot=h.nk;return Le.luaH_setfrom(h.L,h.ls.h,T,new ee.TValue(q,ot)),U.k[ot]=Z,h.nk++,ot},Fe=function(h,T){let Z=new O(V,T),U=new O(q,T);return Ie(h,Z,U)},it=function(h,T){let Z=new O(G,T);return Ie(h,Z,Z)},Nt=function(h,T){let Z=new O(H,T);return Ie(h,Z,Z)},wt=function(h,T,Z){let U=ne.expkind;if(T.k===U.VCALL)te.SETARG_C(fe(h,T),Z+1);else if(T.k===U.VVARARG){let xe=fe(h,T);te.SETARG_B(xe,Z+1),te.SETARG_A(xe,h.freereg),x(h,1)}else y(Z===R)},jt=function(h,T){let Z=ne.expkind;T.k===Z.VCALL?(y(fe(h,T).C===2),T.k=Z.VNONRELOC,T.u.info=fe(h,T).A):T.k===Z.VVARARG&&(te.SETARG_B(fe(h,T),2),T.k=Z.VRELOCABLE)},W=function(h,T){let Z=ne.expkind;switch(T.k){case Z.VLOCAL:T.k=Z.VNONRELOC;break;case Z.VUPVAL:T.u.info=nt(h,ke.OP_GETUPVAL,0,T.u.info,0),T.k=Z.VRELOCABLE;break;case Z.VINDEXED:{let U;Y(h,T.u.ind.idx),T.u.ind.vt===Z.VLOCAL?(Y(h,T.u.ind.t),U=ke.OP_GETTABLE):(y(T.u.ind.vt===Z.VUPVAL),U=ke.OP_GETTABUP),T.u.info=nt(h,U,0,T.u.ind.t,T.u.ind.idx),T.k=Z.VRELOCABLE;break}case Z.VVARARG:case Z.VCALL:jt(h,T)}},qe=function(h,T,Z,U){return rt(h),nt(h,ke.OP_LOADBOOL,T,Z,U)},Ze=function(h,T,Z){let U=ne.expkind;switch(W(h,T),T.k){case U.VNIL:re(h,Z,1);break;case U.VFALSE:case U.VTRUE:nt(h,ke.OP_LOADBOOL,Z,T.k===U.VTRUE,0);break;case U.VK:d(h,Z,T.u.info);break;case U.VKFLT:d(h,Z,it(h,T.u.nval));break;case U.VKINT:d(h,Z,Fe(h,T.u.ival));break;case U.VRELOCABLE:{let xe=fe(h,T);te.SETARG_A(xe,Z);break}case U.VNONRELOC:Z!==T.u.info&&nt(h,ke.OP_MOVE,Z,T.u.info,0);break;default:return void y(T.k===U.VJMP)}T.u.info=Z,T.k=U.VNONRELOC},Je=function(h,T){T.k!==ne.expkind.VNONRELOC&&(x(h,1),Ze(h,T,h.freereg-1))},We=function(h,T){for(;T!==-1;T=_e(h,T))if(he(h,T).opcode!==ke.OP_TESTSET)return!0;return!1},we=function(h,T,Z){let U=ne.expkind;if(Ze(h,T,Z),T.k===U.VJMP&&(T.t=Qe(h,T.t,T.u.info)),Pe(T)){let xe,ot=-1,_t=-1;if(We(h,T.t)||We(h,T.f)){let Vt=T.k===U.VJMP?-1:vt(h);ot=qe(h,Z,0,1),_t=qe(h,Z,1,0),lt(h,Vt)}xe=rt(h),Se(h,T.f,xe,Z,ot),Se(h,T.t,xe,Z,_t)}T.f=T.t=-1,T.u.info=Z,T.k=U.VNONRELOC},dt=function(h,T){W(h,T),Q(h,T),x(h,1),we(h,T,h.freereg-1)},ht=function(h,T){if(W(h,T),T.k===ne.expkind.VNONRELOC){if(!Pe(T))return T.u.info;if(T.u.info>=h.nactvar)return we(h,T,T.u.info),T.u.info}return dt(h,T),T.u.info},Dt=function(h,T){Pe(T)?ht(h,T):W(h,T)},Bt=function(h,T){let Z=ne.expkind,U=!1;switch(Dt(h,T),T.k){case Z.VTRUE:T.u.info=Nt(h,!0),U=!0;break;case Z.VFALSE:T.u.info=Nt(h,!1),U=!0;break;case Z.VNIL:T.u.info=function(xe){let ot=new O(P,null),_t=new O(le,xe.ls.h);return Ie(xe,_t,ot)}(h),U=!0;break;case Z.VKINT:T.u.info=Fe(h,T.u.ival),U=!0;break;case Z.VKFLT:T.u.info=it(h,T.u.nval),U=!0;break;case Z.VK:U=!0}return U&&(T.k=Z.VK,T.u.info<=te.MAXINDEXRK)?te.RKASK(T.u.info):ht(h,T)},qt=function(h,T){let Z=he(h,T.u.info);y(te.testTMode(Z.opcode)&&Z.opcode!==ke.OP_TESTSET&&Z.opcode!==ke.OP_TEST),te.SETARG_A(Z,!Z.A)},bt=function(h,T,Z){if(T.k===ne.expkind.VRELOCABLE){let U=fe(h,T);if(U.opcode===ke.OP_NOT)return h.pc--,et(h,ke.OP_TEST,U.B,0,!Z)}return Je(h,T),Q(h,T),et(h,ke.OP_TESTSET,te.NO_REG,T.u.info,Z)},Ot=function(h,T){let Z,U=ne.expkind;switch(W(h,T),T.k){case U.VJMP:qt(h,T),Z=T.u.info;break;case U.VK:case U.VKFLT:case U.VKINT:case U.VTRUE:Z=-1;break;default:Z=bt(h,T,0)}T.f=Qe(h,T.f,Z),lt(h,T.t),T.t=-1},Ft=function(h,T){let Z,U=ne.expkind;switch(W(h,T),T.k){case U.VJMP:Z=T.u.info;break;case U.VNIL:case U.VFALSE:Z=-1;break;default:Z=bt(h,T,1)}T.t=Qe(h,T.t,Z),lt(h,T.f),T.f=-1},o=function(h,T,Z){let U,xe,ot=ne.expkind;if(!(U=at(T,!0))||!(xe=at(Z,!0))||!function(Vt,Wt,Te){switch(Vt){case c:case _:case w:case S:case I:case g:return ie.tointeger(Wt)!==!1&&ie.tointeger(Te)!==!1;case L:case b:case E:return Te.value!==0;default:return 1}}(h,U,xe))return 0;let _t=new O;if(ee.luaO_arith(null,h,U,xe,_t),_t.ttisinteger())T.k=ot.VKINT,T.u.ival=_t.value;else{let Vt=_t.value;if(isNaN(Vt)||Vt===0)return!1;T.k=ot.VKFLT,T.u.nval=Vt}return!0},u=function(h,T,Z,U,xe){let ot=Bt(h,U),_t=Bt(h,Z);ve(h,Z,U),Z.u.info=nt(h,T,0,_t,ot),Z.k=ne.expkind.VRELOCABLE,N(h,xe)},N=function(h,T){h.f.lineinfo[h.pc-1]=T};a.exports.BinOpr=Ce,a.exports.NO_JUMP=-1,a.exports.UnOpr=tt,a.exports.getinstruction=fe,a.exports.luaK_checkstack=D,a.exports.luaK_code=yt,a.exports.luaK_codeABC=nt,a.exports.luaK_codeABx=be,a.exports.luaK_codeAsBx=Ge,a.exports.luaK_codek=d,a.exports.luaK_concat=Qe,a.exports.luaK_dischargevars=W,a.exports.luaK_exp2RK=Bt,a.exports.luaK_exp2anyreg=ht,a.exports.luaK_exp2anyregup=function(h,T){(T.k!==ne.expkind.VUPVAL||Pe(T))&&ht(h,T)},a.exports.luaK_exp2nextreg=dt,a.exports.luaK_exp2val=Dt,a.exports.luaK_fixline=N,a.exports.luaK_getlabel=rt,a.exports.luaK_goiffalse=Ft,a.exports.luaK_goiftrue=Ot,a.exports.luaK_indexed=function(h,T,Z){let U=ne.expkind;y(!Pe(T)&&(ne.vkisinreg(T.k)||T.k===U.VUPVAL)),T.u.ind.t=T.u.info,T.u.ind.idx=Bt(h,Z),T.u.ind.vt=T.k===U.VUPVAL?U.VUPVAL:U.VLOCAL,T.k=U.VINDEXED},a.exports.luaK_infix=function(h,T,Z){switch(T){case Ce.OPR_AND:Ot(h,Z);break;case Ce.OPR_OR:Ft(h,Z);break;case Ce.OPR_CONCAT:dt(h,Z);break;case Ce.OPR_ADD:case Ce.OPR_SUB:case Ce.OPR_MUL:case Ce.OPR_DIV:case Ce.OPR_IDIV:case Ce.OPR_MOD:case Ce.OPR_POW:case Ce.OPR_BAND:case Ce.OPR_BOR:case Ce.OPR_BXOR:case Ce.OPR_SHL:case Ce.OPR_SHR:at(Z,!1)||Bt(h,Z);break;default:Bt(h,Z)}},a.exports.luaK_intK=Fe,a.exports.luaK_jump=vt,a.exports.luaK_jumpto=function(h,T){return xt(h,vt(h),T)},a.exports.luaK_nil=re,a.exports.luaK_numberK=it,a.exports.luaK_patchclose=function(h,T,Z){for(Z++;T!==-1;T=_e(h,T)){let U=h.f.code[T];y(U.opcode===ke.OP_JMP&&(U.A===0||U.A>=Z)),te.SETARG_A(U,Z)}},a.exports.luaK_patchlist=xt,a.exports.luaK_patchtohere=lt,a.exports.luaK_posfix=function(h,T,Z,U,xe){let ot=ne.expkind;switch(T){case Ce.OPR_AND:y(Z.t===-1),W(h,U),U.f=Qe(h,U.f,Z.f),Z.to(U);break;case Ce.OPR_OR:y(Z.f===-1),W(h,U),U.t=Qe(h,U.t,Z.t),Z.to(U);break;case Ce.OPR_CONCAT:{Dt(h,U);let _t=fe(h,U);U.k===ot.VRELOCABLE&&_t.opcode===ke.OP_CONCAT?(y(Z.u.info===_t.B-1),Q(h,Z),te.SETARG_B(_t,Z.u.info),Z.k=ot.VRELOCABLE,Z.u.info=U.u.info):(dt(h,U),u(h,ke.OP_CONCAT,Z,U,xe));break}case Ce.OPR_ADD:case Ce.OPR_SUB:case Ce.OPR_MUL:case Ce.OPR_DIV:case Ce.OPR_IDIV:case Ce.OPR_MOD:case Ce.OPR_POW:case Ce.OPR_BAND:case Ce.OPR_BOR:case Ce.OPR_BXOR:case Ce.OPR_SHL:case Ce.OPR_SHR:o(T+A,Z,U)||u(h,T+ke.OP_ADD,Z,U,xe);break;case Ce.OPR_EQ:case Ce.OPR_LT:case Ce.OPR_LE:case Ce.OPR_NE:case Ce.OPR_GT:case Ce.OPR_GE:(function(_t,Vt,Wt,Te){let ft,ae=ne.expkind;Wt.k===ae.VK?ft=te.RKASK(Wt.u.info):(y(Wt.k===ae.VNONRELOC),ft=Wt.u.info);let ze=Bt(_t,Te);switch(ve(_t,Wt,Te),Vt){case Ce.OPR_NE:Wt.u.info=et(_t,ke.OP_EQ,0,ft,ze);break;case Ce.OPR_GT:case Ce.OPR_GE:{let Ee=Vt-Ce.OPR_NE+ke.OP_EQ;Wt.u.info=et(_t,Ee,1,ze,ft);break}default:{let Ee=Vt-Ce.OPR_EQ+ke.OP_EQ;Wt.u.info=et(_t,Ee,1,ft,ze);break}}Wt.k=ae.VJMP})(h,T,Z,U)}return Z},a.exports.luaK_prefix=function(h,T,Z,U){let xe=new ne.expdesc;switch(xe.k=ne.expkind.VKINT,xe.u.ival=xe.u.nval=xe.u.info=0,xe.t=-1,xe.f=-1,T){case tt.OPR_MINUS:case tt.OPR_BNOT:if(o(T+F,Z,xe))break;case tt.OPR_LEN:(function(ot,_t,Vt,Wt){let Te=ht(ot,Vt);Q(ot,Vt),Vt.u.info=nt(ot,_t,0,Te,0),Vt.k=ne.expkind.VRELOCABLE,N(ot,Wt)})(h,T+ke.OP_UNM,Z,U);break;case tt.OPR_NOT:(function(ot,_t){let Vt=ne.expkind;switch(W(ot,_t),_t.k){case Vt.VNIL:case Vt.VFALSE:_t.k=Vt.VTRUE;break;case Vt.VK:case Vt.VKFLT:case Vt.VKINT:case Vt.VTRUE:_t.k=Vt.VFALSE;break;case Vt.VJMP:qt(ot,_t);break;case Vt.VRELOCABLE:case Vt.VNONRELOC:Je(ot,_t),Q(ot,_t),_t.u.info=nt(ot,ke.OP_NOT,0,_t.u.info,0),_t.k=Vt.VRELOCABLE}{let Wt=_t.f;_t.f=_t.t,_t.t=Wt}De(ot,_t.f),De(ot,_t.t)})(h,Z)}},a.exports.luaK_reserveregs=x,a.exports.luaK_ret=function(h,T,Z){nt(h,ke.OP_RETURN,T,Z+1,0)},a.exports.luaK_self=function(h,T,Z){ht(h,T);let U=T.u.info;Q(h,T),T.u.info=h.freereg,T.k=ne.expkind.VNONRELOC,x(h,2),nt(h,ke.OP_SELF,T.u.info,U,Bt(h,Z)),Q(h,Z)},a.exports.luaK_setlist=function(h,T,Z,U){let xe=(Z-1)/te.LFIELDS_PER_FLUSH+1,ot=U===R?0:U;y(U!==0&&U<=te.LFIELDS_PER_FLUSH),xe<=te.MAXARG_C?nt(h,ke.OP_SETLIST,T,ot,xe):xe<=te.MAXARG_Ax?(nt(h,ke.OP_SETLIST,T,ot,0),J(h,xe)):z.luaX_syntaxerror(h.ls,ge("constructor too long",!0)),h.freereg=T+1},a.exports.luaK_setmultret=function(h,T){wt(h,T,R)},a.exports.luaK_setoneret=jt,a.exports.luaK_setreturns=wt,a.exports.luaK_storevar=function(h,T,Z){let U=ne.expkind;switch(T.k){case U.VLOCAL:return Q(h,Z),void we(h,Z,T.u.info);case U.VUPVAL:{let xe=ht(h,Z);nt(h,ke.OP_SETUPVAL,xe,T.u.info,0);break}case U.VINDEXED:{let xe=T.u.ind.vt===U.VLOCAL?ke.OP_SETTABLE:ke.OP_SETTABUP,ot=Bt(h,Z);nt(h,xe,T.u.ind.t,T.u.ind.idx,ot);break}}Q(h,Z)},a.exports.luaK_stringK=function(h,T){let Z=new O(M,T);return Ie(h,Z,Z)}},function(a,Ae,v){const{LUA_SIGNATURE:R,constant_types:{LUA_TBOOLEAN:A,LUA_TLNGSTR:c,LUA_TNIL:g,LUA_TNUMFLT:_,LUA_TNUMINT:w,LUA_TSHRSTR:L},thread_status:{LUA_ERRSYNTAX:b},is_luastring:E,luastring_eq:S,to_luastring:I}=v(1),F=v(8),H=v(13),V=v(6),{MAXARG_sBx:M,POS_A:P,POS_Ax:G,POS_B:q,POS_Bx:le,POS_C:ge,POS_OP:y,SIZE_A:z,SIZE_Ax:ee,SIZE_B:te,SIZE_Bx:ne,SIZE_C:Le,SIZE_OP:ie}=v(16),{lua_assert:ke}=v(4),{luaS_bless:O}=v(10),{luaZ_read:Ce,ZIO:tt}=v(19);let Pe=[25,147,13,10,26,10];class at{constructor(fe,_e,Ye){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,ke(_e instanceof tt,"BytecodeParser only operates on a ZIO"),ke(E(Ye)),Ye[0]===64||Ye[0]===61?this.name=Ye.subarray(1):Ye[0]==R[0]?this.name=I("binary string",!0):this.name=Ye,this.L=fe,this.Z=_e,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(fe){let _e=new Uint8Array(fe);return Ce(this.Z,_e,0,fe)!==0&&this.error("truncated"),_e}LoadByte(){return Ce(this.Z,this.u8,0,1)!==0&&this.error("truncated"),this.u8[0]}LoadInt(){return Ce(this.Z,this.u8,0,this.intSize)!==0&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadNumber(){return Ce(this.Z,this.u8,0,this.numberSize)!==0&&this.error("truncated"),this.dv.getFloat64(0,!0)}LoadInteger(){return Ce(this.Z,this.u8,0,this.integerSize)!==0&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadSize_t(){return this.LoadInteger()}LoadString(){let fe=this.LoadByte();return fe===255&&(fe=this.LoadSize_t()),fe===0?null:O(this.L,this.read(fe-1))}static MASK1(fe,_e){return~(-1<<fe)<<_e}LoadCode(fe){let _e=this.LoadInt(),Ye=at;for(let Qe=0;Qe<_e;Qe++){Ce(this.Z,this.u8,0,this.instructionSize)!==0&&this.error("truncated");let vt=this.dv.getUint32(0,!0);fe.code[Qe]={code:vt,opcode:vt>>y&Ye.MASK1(ie,0),A:vt>>P&Ye.MASK1(z,0),B:vt>>q&Ye.MASK1(te,0),C:vt>>ge&Ye.MASK1(Le,0),Bx:vt>>le&Ye.MASK1(ne,0),Ax:vt>>G&Ye.MASK1(ee,0),sBx:(vt>>le&Ye.MASK1(ne,0))-M}}}LoadConstants(fe){let _e=this.LoadInt();for(let Ye=0;Ye<_e;Ye++){let Qe=this.LoadByte();switch(Qe){case g:fe.k.push(new V.TValue(g,null));break;case A:fe.k.push(new V.TValue(A,this.LoadByte()!==0));break;case _:fe.k.push(new V.TValue(_,this.LoadNumber()));break;case w:fe.k.push(new V.TValue(w,this.LoadInteger()));break;case L:case c:fe.k.push(new V.TValue(c,this.LoadString()));break;default:this.error(`unrecognized constant '${Qe}'`)}}}LoadProtos(fe){let _e=this.LoadInt();for(let Ye=0;Ye<_e;Ye++)fe.p[Ye]=new H.Proto(this.L),this.LoadFunction(fe.p[Ye],fe.source)}LoadUpvalues(fe){let _e=this.LoadInt();for(let Ye=0;Ye<_e;Ye++)fe.upvalues[Ye]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}LoadDebug(fe){let _e=this.LoadInt();for(let Ye=0;Ye<_e;Ye++)fe.lineinfo[Ye]=this.LoadInt();_e=this.LoadInt();for(let Ye=0;Ye<_e;Ye++)fe.locvars[Ye]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};_e=this.LoadInt();for(let Ye=0;Ye<_e;Ye++)fe.upvalues[Ye].name=this.LoadString()}LoadFunction(fe,_e){fe.source=this.LoadString(),fe.source===null&&(fe.source=_e),fe.linedefined=this.LoadInt(),fe.lastlinedefined=this.LoadInt(),fe.numparams=this.LoadByte(),fe.is_vararg=this.LoadByte()!==0,fe.maxstacksize=this.LoadByte(),this.LoadCode(fe),this.LoadConstants(fe),this.LoadUpvalues(fe),this.LoadProtos(fe),this.LoadDebug(fe)}checkliteral(fe,_e){let Ye=this.read(fe.length);S(Ye,fe)||this.error(_e)}checkHeader(){this.checkliteral(R.subarray(1),"not a"),this.LoadByte()!==83&&this.error("version mismatch in"),this.LoadByte()!==0&&this.error("format mismatch in"),this.checkliteral(Pe,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),this.LoadInteger()!==22136&&this.error("endianness mismatch in"),this.LoadNumber()!==370.5&&this.error("float format mismatch in")}error(fe){V.luaO_pushfstring(this.L,I("%s: %s precompiled chunk"),this.name,I(fe)),F.luaD_throw(this.L,b)}checksize(fe,_e,Ye){fe!==_e&&this.error(`${Ye} size mismatch in`)}}a.exports.luaU_undump=function(re,fe,_e){let Ye=new at(re,fe,_e);Ye.checkHeader();let Qe=H.luaF_newLclosure(re,Ye.LoadByte());return F.luaD_inctop(re),re.stack[re.top-1].setclLvalue(Qe),Qe.p=new H.Proto(re),Ye.LoadFunction(Qe.p,null),ke(Qe.nupvalues===Qe.p.upvalues.length),Qe}},function(a,Ae,v){const{LUA_SIGNATURE:R,LUA_VERSION_MAJOR:A,LUA_VERSION_MINOR:c,constant_types:{LUA_TBOOLEAN:g,LUA_TLNGSTR:_,LUA_TNIL:w,LUA_TNUMFLT:L,LUA_TNUMINT:b,LUA_TSHRSTR:E},luastring_of:S}=v(1),I=S(25,147,13,10,26,10),F=16*Number(A)+Number(c),H=function(ge,y,z){z.status===0&&y>0&&(z.status=z.writer(z.L,ge,y,z.data))},V=function(ge,y){H(S(ge),1,y)},M=function(ge,y){let z=new ArrayBuffer(4);new DataView(z).setInt32(0,ge,!0);let ee=new Uint8Array(z);H(ee,4,y)},P=function(ge,y){let z=new ArrayBuffer(4);new DataView(z).setInt32(0,ge,!0);let ee=new Uint8Array(z);H(ee,4,y)},G=function(ge,y){let z=new ArrayBuffer(8);new DataView(z).setFloat64(0,ge,!0);let ee=new Uint8Array(z);H(ee,8,y)},q=function(ge,y){if(ge===null)V(0,y);else{let z=ge.tsslen()+1,ee=ge.getstr();z<255?V(z,y):(V(255,y),P(z,y)),H(ee,z-1,y)}},le=function(ge,y,z){z.strip||ge.source===y?q(null,z):q(ge.source,z),M(ge.linedefined,z),M(ge.lastlinedefined,z),V(ge.numparams,z),V(ge.is_vararg?1:0,z),V(ge.maxstacksize,z),function(ee,te){let ne=ee.code.map(Le=>Le.code);M(ne.length,te);for(let Le=0;Le<ne.length;Le++)M(ne[Le],te)}(ge,z),function(ee,te){let ne=ee.k.length;M(ne,te);for(let Le=0;Le<ne;Le++){let ie=ee.k[Le];switch(V(ie.ttype(),te),ie.ttype()){case w:break;case g:V(ie.value?1:0,te);break;case L:G(ie.value,te);break;case b:P(ie.value,te);break;case E:case _:q(ie.tsvalue(),te)}}}(ge,z),function(ee,te){let ne=ee.upvalues.length;M(ne,te);for(let Le=0;Le<ne;Le++)V(ee.upvalues[Le].instack?1:0,te),V(ee.upvalues[Le].idx,te)}(ge,z),function(ee,te){let ne=ee.p.length;M(ne,te);for(let Le=0;Le<ne;Le++)le(ee.p[Le],ee.source,te)}(ge,z),function(ee,te){let ne=te.strip?0:ee.lineinfo.length;M(ne,te);for(let Le=0;Le<ne;Le++)M(ee.lineinfo[Le],te);ne=te.strip?0:ee.locvars.length,M(ne,te);for(let Le=0;Le<ne;Le++)q(ee.locvars[Le].varname,te),M(ee.locvars[Le].startpc,te),M(ee.locvars[Le].endpc,te);ne=te.strip?0:ee.upvalues.length,M(ne,te);for(let Le=0;Le<ne;Le++)q(ee.upvalues[Le].name,te)}(ge,z)};a.exports.luaU_dump=function(ge,y,z,ee,te){let ne=new class{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}};return ne.L=ge,ne.writer=z,ne.data=ee,ne.strip=te,ne.status=0,function(Le){H(R,R.length,Le),V(F,Le),V(0,Le),H(I,I.length,Le),V(4,Le),V(4,Le),V(4,Le),V(4,Le),V(8,Le),P(22136,Le),G(370.5,Le)}(ne),V(y.upvalues.length,ne),le(y,null,ne),ne.status}},function(a,Ae,v){var R;(function(){var A={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function c(w){return function(L,b){var E,S,I,F,H,V,M,P,G,q=1,le=L.length,ge="";for(S=0;S<le;S++)if(typeof L[S]=="string")ge+=L[S];else if(Array.isArray(L[S])){if((F=L[S])[2])for(E=b[q],I=0;I<F[2].length;I++){if(!E.hasOwnProperty(F[2][I]))throw new Error(c('[sprintf] property "%s" does not exist',F[2][I]));E=E[F[2][I]]}else E=F[1]?b[F[1]]:b[q++];if(A.not_type.test(F[8])&&A.not_primitive.test(F[8])&&E instanceof Function&&(E=E()),A.numeric_arg.test(F[8])&&typeof E!="number"&&isNaN(E))throw new TypeError(c("[sprintf] expecting number but found %T",E));switch(A.number.test(F[8])&&(P=E>=0),F[8]){case"b":E=parseInt(E,10).toString(2);break;case"c":E=String.fromCharCode(parseInt(E,10));break;case"d":case"i":E=parseInt(E,10);break;case"j":E=JSON.stringify(E,null,F[6]?parseInt(F[6]):0);break;case"e":E=F[7]?parseFloat(E).toExponential(F[7]):parseFloat(E).toExponential();break;case"f":E=F[7]?parseFloat(E).toFixed(F[7]):parseFloat(E);break;case"g":E=F[7]?String(Number(E.toPrecision(F[7]))):parseFloat(E);break;case"o":E=(parseInt(E,10)>>>0).toString(8);break;case"s":E=String(E),E=F[7]?E.substring(0,F[7]):E;break;case"t":E=String(!!E),E=F[7]?E.substring(0,F[7]):E;break;case"T":E=Object.prototype.toString.call(E).slice(8,-1).toLowerCase(),E=F[7]?E.substring(0,F[7]):E;break;case"u":E=parseInt(E,10)>>>0;break;case"v":E=E.valueOf(),E=F[7]?E.substring(0,F[7]):E;break;case"x":E=(parseInt(E,10)>>>0).toString(16);break;case"X":E=(parseInt(E,10)>>>0).toString(16).toUpperCase()}A.json.test(F[8])?ge+=E:(!A.number.test(F[8])||P&&!F[3]?G="":(G=P?"+":"-",E=E.toString().replace(A.sign,"")),V=F[4]?F[4]==="0"?"0":F[4].charAt(1):" ",M=F[6]-(G+E).length,H=F[6]&&M>0?V.repeat(M):"",ge+=F[5]?G+E+H:V==="0"?G+H+E:H+G+E)}return ge}(function(L){if(_[L])return _[L];for(var b,E=L,S=[],I=0;E;){if((b=A.text.exec(E))!==null)S.push(b[0]);else if((b=A.modulo.exec(E))!==null)S.push("%");else{if((b=A.placeholder.exec(E))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(b[2]){I|=1;var F=[],H=b[2],V=[];if((V=A.key.exec(H))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(F.push(V[1]);(H=H.substring(V[0].length))!=="";)if((V=A.key_access.exec(H))!==null)F.push(V[1]);else{if((V=A.index_access.exec(H))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");F.push(V[1])}b[2]=F}else I|=2;if(I===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");S.push(b)}E=E.substring(b[0].length)}return _[L]=S}(w),arguments)}function g(w,L){return c.apply(null,[w].concat(L||[]))}var _=Object.create(null);Ae.sprintf=c,Ae.vsprintf=g,typeof window<"u"&&(window.sprintf=c,window.vsprintf=g,(R=(function(){return{sprintf:c,vsprintf:g}}).call(Ae,v,Ae,a))===void 0||(a.exports=R))})()},function(a,Ae,v){const{lua_pop:R}=v(2),{luaL_requiref:A}=v(7),{to_luastring:c}=v(5),g={};a.exports.luaL_openlibs=function(P){for(let G in g)A(P,c(G),g[G],1),R(P,1)};const _=v(17),{luaopen_base:w}=v(24),{luaopen_coroutine:L}=v(25),{luaopen_debug:b}=v(31),{luaopen_math:E}=v(30),{luaopen_package:S}=v(32),{luaopen_os:I}=v(27),{luaopen_string:F}=v(28),{luaopen_table:H}=v(26),{luaopen_utf8:V}=v(29);g._G=w,g[_.LUA_LOADLIBNAME]=S,g[_.LUA_COLIBNAME]=L,g[_.LUA_TABLIBNAME]=H,g[_.LUA_OSLIBNAME]=I,g[_.LUA_STRLIBNAME]=F,g[_.LUA_MATHLIBNAME]=E,g[_.LUA_UTF8LIBNAME]=V,g[_.LUA_DBLIBNAME]=b;const{luaopen_fengari:M}=v(33);g[_.LUA_FENGARILIBNAME]=M}]);const Rf=ll(Di),Zo=lf({__proto__:null,default:Rf},[Di]),Uf={class:"h-50px flex items-center c-#fff"},If={style:{display:"flex","justify-content":"space-between","align-items":"center","font-weight":"bolder",margin:"0 10px"}},Pf={style:{display:"flex","align-items":"center",margin:"0 10px"}},Df=Kr("span",null,"字体大小:",-1),Bf={style:{display:"flex","align-items":"center",margin:"0 10px"}},Ff=Kr("span",null,"主题:",-1),Hf={style:{"margin-right":"10px"}},Gf={class:"h-50px flex items-center justify-between px-10px bg-[#fff]"},Kf=Kr("span",{style:{"font-weight":"bolder","font-size":"16px"}},"控制台输出",-1),Vf={style:{"white-space":"pre-wrap"}},Wf={class:"h-50px flex items-center justify-between px-10px bg-[#fff]"},zf=Kr("span",{style:{"font-weight":"bolder","font-size":"16px"}},"错误输出",-1),jf={style:{"white-space":"pre-wrap"}},Jf=Object.assign({name:"scriptcode"},{__name:"index",setup(a){const Ae=qu(),v=[{label:"monokai",value:"monokai"},{label:"ayu-dark",value:"ayu-dark"},{label:"solarized dark",value:"solarized dark"},{label:"solarized light",value:"solarized light"},{label:"yonce",value:"yonce"}],R=Mr(""),A=Mr(),c=Mr(14),g=Mr("solarized dark"),_=Mr(""),w=Mr(""),L=Xo({mode:"text/x-lua",lineNumbers:!0,smartIndent:!0,indentUnit:4,foldGutter:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,readOnly:!1,theme:"solarized dark",tabSize:4,autofocus:!0,line:!0,cursorHeight:1,cursorBlink:!0,cursorStyle:"line",cursorWidth:2,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],foldOptions:{rangeFinder:Zr.fold.combine(Zr.fold.brace,Zr.fold.indent,Zr.fold.comment)},lint:!0,lineWrapping:!0,showCursorWhenSelecting:!0,extraKeys:{"Ctrl-Space":"autocomplete",Tab:G=>G.execCommand("autocomplete")}});L.lint={getAnnotations:G=>{const q=[];try{Di.load(G)()}catch(le){let ge=0;const y=le.message.match(/:(\d+):/),z=le.message.match(/line (\d+)/);y?ge=parseInt(y[1])-1:z&&(ge=parseInt(z[1])-1),q.push({from:Zr.Pos(ge,0),to:Zr.Pos(ge,100),message:le.message,severity:"error"})}return q},async:!1},Zr.registerHelper("lint","lua",G=>{const q=[];try{typeof Zo<"u"&&Di.load(G)()}catch(le){let ge=0;const y=le.message.match(/:(\d+):/),z=le.message.match(/line (\d+)/);y?ge=parseInt(y[1])-1:z&&(ge=parseInt(z[1])-1),q.push({from:Zr.Pos(ge,0),to:Zr.Pos(ge,100),message:le.message,severity:"error"})}return q});const b=Xo({scriptInfo:{}});async function E(){const{data:G,error:q}=await tf({id:Ae.currentRoute.value.query.id});q||(b.scriptInfo=G,R.value=b.scriptInfo.scon)}const S=(G,q)=>{const le=(R.value+"").replace(/[a-z]+[\-|\']+[a-z]+/gi,"").match(/([a-z]+)/gi);Zr.ukeys=le,q.showHint()},I=G=>{var q,le;console.log("代码输入:",G),(le=(q=A.value)==null?void 0:q.performLint)==null||le.call(q)},F=G=>{L.theme=G},H=G=>{console.log("编辑器准备就绪"),G.focus()};async function V(G){let q="";if(!R.value)return!1;const le=["GetTagValue","SetTagValue","GetTagValueAndQos","TxPacket","GetDevTagValue","SetDevTagValue","SetTagValue2","LuaClog","LuaSleep"],ge=le.some(ee=>R.value.includes(ee)),y=le.map(ee=>`${ee} = function(...) 
  print("${ee} called")
  return 1
end`).join(`

`);q=`
    output = ""
    print = function(...)
      local args = {...}
      for i=1, #args do
        output = output .. tostring(args[i]) .. "\\t"
      end
      output = output .. "\\n"
    end
  `+`

`+(ge?y+`

`:"")+R.value+`

return output`;try{if(typeof Zo<"u"){const ee=Di.load(q)();G==="check"&&(window.$message.destroyAll(),window.$message.success("Lua脚本语法正确")),w.value=ee||""}}catch(ee){console.error(ee),window.$message.destroyAll(),window.$message.error("Lua脚本语法错误"),_.value=ee.message}}async function M(){if(_.value="",await V("save"),_.value)return!1;const{data:G,error:q}=await rf([{id:Ae.currentRoute.value.query.id,scon:R.value}]);q||(window.$message.destroyAll(),window.$message.success("Lua脚本保存成功"))}function P(){window.open("https://dingiiot.com/help-doc/lua_page/1.GetTagValue/","_blank")}return _a(()=>{E()}),Zu(()=>{var G;(G=A.value)==null||G.destroy()}),(G,q)=>{const le=nf,ge=Ju,y=Qu,z=$u,ee=ef,te=af;return ai(),Jo(te,{direction:"horizontal","default-size":.7,style:{height:"100%"},max:.8,min:.7},{1:Xr(()=>[Kr("div",Uf,[Yr(z,{align:"center",justify:"space-between",style:{width:"100%"}},{default:Xr(()=>[Kr("div",If,[Kr("span",null,"脚本名称："+pa(b.scriptInfo.sname),1),Kr("div",Pf,[Df,Yr(le,{value:c.value,"onUpdate:value":q[0]||(q[0]=ne=>c.value=ne),step:1,class:"w-120px",min:12,max:24,style:{margin:"0 10px"}},null,8,["value"]),Kr("span",null,pa(c.value)+"px",1)]),Kr("div",Bf,[Ff,Yr(ge,{filterable:"",placeholder:"请选择",value:g.value,"onUpdate:value":[q[1]||(q[1]=ne=>g.value=ne),F],options:v,style:{width:"180px","margin-left":"10px"}},null,8,["value"])])]),Kr("div",Hf,[Yr(z,null,{default:Xr(()=>[Yr(y,{type:"primary",ghost:"",onClick:P},{default:Xr(()=>[Pi("Lua脚本文档帮助")]),_:1}),Yr(y,{type:"primary",ghost:"",onClick:q[2]||(q[2]=ne=>V("check"))},{default:Xr(()=>[Pi("在线检查")]),_:1}),Yr(y,{type:"primary",ghost:"",onClick:M},{default:Xr(()=>[Pi("保存")]),_:1})]),_:1})])]),_:1})]),Yr(qr(Cf),{value:R.value,"onUpdate:value":q[3]||(q[3]=ne=>R.value=ne),options:L,border:"",ref_key:"cmRef",ref:A,class:"scriptCode w-100%",style:Qo({height:"calc(100% - 50px)",fontSize:c.value+"px"}),onChange:S,onInput:I,onReady:H},null,8,["value","options","style"])]),2:Xr(()=>[Yr(te,{direction:"vertical",style:{height:"100%"},max:.4,min:.6},{1:Xr(()=>[Kr("div",Gf,[Kf,Yr(y,{onClick:q[4]||(q[4]=ne=>w.value=""),type:"warning",size:"small",ghost:""},{default:Xr(()=>[Pi("清空输出")]),_:1})]),Yr(ee,{style:{height:"calc(100% - 50px)"},class:"bg-[#fff] p-20px"},{default:Xr(()=>[Kr("pre",Vf,pa(w.value),1)]),_:1})]),2:Xr(()=>[Kr("div",Wf,[zf,Yr(y,{onClick:q[5]||(q[5]=ne=>_.value=""),type:"warning",size:"small",ghost:""},{default:Xr(()=>[Pi("清空输出")]),_:1})]),Yr(ee,{style:{height:"calc(100% - 50px)"},class:"bg-[#fff] p-20px"},{default:Xr(()=>[Kr("pre",jf,pa(_.value),1)]),_:1})]),_:1})]),_:1})}}});export{Jf as default};
