(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7032f43e"],{"05a0":function(e,a,t){},"0c93":function(e,a,t){"use strict";var s=t("05a0");t.n(s).a},6245:function(e,a){e.exports={messages:{CN:{name:"名称",value:"值",noData:"暂无数据",noVersionInfo:"暂无版本信息",softwareName:"软件名称",companyName:"公司名称",systemVersion:"系统版本",softwareVersion:"软件版本",webVersion:"网页版本",systemLanguage:"系统语言",username:"用户名",logo:"图标",powerStationPicture:"电站图片",search:"查询",submit:"提交",softwareNameNotBeEmpty:"软件名称不能为空",companyNameNotBeEmpty:"公司名称不能为空",pleaseSelectLanguage:"请选择语言",imageFormatError:"图片格式错误,请重新上传图片!",imageSizeExceed:"上传图片大小不能超过 5MB!",gatewayNumber:"网关编号",gatewayPassword:"网关密码",gatewayModel:"网关型号"},US:{name:"Name",value:"Value",noData:"No Data",noVersionInfo:"No version information yet",softwareName:"Name of software",companyName:"Company Name",systemVersion:"System version",softwareVersion:"Software version",webVersion:"Web version",systemLanguage:"System language",username:"Username",logo:"Logo",powerStationPicture:"Power station pictures",search:"Search",submit:"Submit",softwareNameNotBeEmpty:"Software name cannot be empty",companyNameNotBeEmpty:"Company name cannot be empty",pleaseSelectLanguage:"Please select language",imageFormatError:"The image format is wrong, please re-upload the image!",imageSizeExceed:"The size of the uploaded image cannot exceed 5MB!",gatewayNumber:"SN",gatewayPassword:"Password",gatewayModel:"Model"}}}},f797:function(e,a,t){"use strict";t.r(a);t("99af"),t("4160"),t("caad"),t("c975"),t("b0c0"),t("ac1f"),t("5319"),t("159b");var s=t("5530"),o=t("2f62"),i=t("e199"),n={name:"about",i18n:t("6245"),data:function(){return{passwordVisible:!0,dataListLoading:!1,dataList:[],fileList:[],stationPictureFileList:[],systemInfo:{name:"软件名称",company:"公司名称",sys_ver:"系统版本",soft_ver:"软件版本",web_ver:"网页版本",language:"系统语言",user:"用户名",logo:"图标",station_pic:"电站图片",languageInfo:{1:"CN",2:"US"},sn:"网关编号",pswd:"网关密码",model:"网关型号"},langList:[{key:"CN",name:"简体中文",alias:"简体"},{key:"US",name:"English",alias:"English"}],cnAndUsObj:{"软件名称":this.$t("softwareName"),"公司名称":this.$t("companyName"),"系统版本":this.$t("systemVersion"),"软件版本":this.$t("softwareVersion"),"网页版本":this.$t("webVersion"),"系统语言":this.$t("systemLanguage"),"用户名":this.$t("username"),"图标":this.$t("logo"),"电站图片":this.$t("powerStationPicture"),"网关编号":this.$t("gatewayNumber"),"网关密码":this.$t("gatewayPassword"),"网关型号":this.$t("gatewayModel")}}},computed:Object(s.a)(Object(s.a)({},Object(o.e)("setting",["theme","isMobile","layout","systemName","lang","pageWidth"])),Object(o.e)("account",["user"])),methods:Object(s.a)(Object(s.a)(Object(s.a)({},Object(o.d)("setting",["setSystemName"])),Object(o.b)("setting",["setLang"])),{},{uploadImage:function(e){var a=this,t=e.file,s=new FormData;s.append("file_type",14),s.append("file_path","/data/webapp/picture"),s.append("file_name",t.name),s.append("file_bin",t),Object(i.ib)(s).then((function(e){var s=e.data;if(0!=s.code)return a.$message.config({maxCount:1}),a.$message.destroy(),a.$message.error(s.msg);for(var o=0;o<a.dataList.length;o++)if("logo"==a.dataList[o].oldName){a.$set(a.dataList[o],"value","/picture/"+t.name);break}return a.$message.success("success")}))},uploadStationPictureImage:function(e){var a=this,t=e.file,s=new FormData;s.append("file_type",14),s.append("file_path","/data/webapp/picture"),s.append("file_name",t.name),s.append("file_bin",t),Object(i.ib)(s).then((function(e){var s=e.data;if(0!=s.code)return a.$message.config({maxCount:1}),a.$message.destroy(),a.$message.error(s.msg);for(var o=0;o<a.dataList.length;o++)if("station_pic"==a.dataList[o].oldName){a.$set(a.dataList[o],"value","/picture/"+t.name);break}return a.$message.success("success")}))},beforeUpload:function(e){var a="image/jpeg"===e.type||"image/png",t=e.size/1024/1024<5;return a||(this.$message.config({maxCount:1}),this.$message.destroy(),this.$message.error(this.$t("imageFormatError"))),t||(this.$message.config({maxCount:1}),this.$message.destroy(),this.$message.error(this.$t("imageSizeExceed"))),a&&t},getDataList:function(){var e=this,a=[],t=[];Object(i.G)().then((function(s){var o=s.data;if(!o)return!1;if(0!=o.code)return e.$message.config({maxCount:1}),e.$message.destroy(),e.$message.error(o.msg);if(e.dataList.length>0){for(var i in e.dataList.forEach((function(e){a.push(e.oldName)})),o.data)if(a.includes(i)){var n=a.indexOf(i);e.$set(e.dataList[n],"name",e.cnAndUsObj[e.systemInfo[i]]||e.systemInfo[i]),e.$set(e.dataList[n],"value","sys_ver"==i||"soft_ver"==i||"web_ver"==i?o.data[i]?-1!=String(o.data[i]).indexOf("V")?o.data[i].substr(1):o.data[i]:"admin"==e.user?"":e.$t("noVersionInfo"):"language"==i?e.systemInfo.languageInfo[o.data[i]]:o.data[i])}else"gw_time"!=i&&t.push({oldName:i,name:e.cnAndUsObj[e.systemInfo[i]]||e.systemInfo[i],value:"sys_ver"==i||"soft_ver"==i||"web_ver"==i?o.data[i]?-1!=String(o.data[i]).indexOf("V")?o.data[i].substr(1):o.data[i]:"admin"==e.user?"":e.$t("noVersionInfo"):"language"==i?e.systemInfo.languageInfo[o.data[i]]:o.data[i]});t.length>0&&(e.dataList=e.dataList.concat(t))}else{for(var r in o.data)"gw_time"!=r&&e.dataList.push({oldName:r,name:e.cnAndUsObj[e.systemInfo[r]]||e.systemInfo[r],value:"sys_ver"==r||"soft_ver"==r||"web_ver"==r?o.data[r]?-1!=String(o.data[r]).indexOf("V")?o.data[r].substr(1):o.data[r]:"admin"==e.user?"":e.$t("noVersionInfo"):"language"==r?e.systemInfo.languageInfo[o.data[r]]:o.data[r]});console.log("this.dataList",e.dataList)}for(var l=0;l<e.dataList.length;l++)if("language"==e.dataList[l].oldName){e.setLang(e.dataList[l].value);break}})).catch((function(e){return console.log(e),!1}))},handleSaveBaseInfoChange:function(){for(var e=this,a=null,t=null,s=null,o="",n={},r=["name","company"],l=document.querySelector("link[rel*='icon']"),m=0;m<e.dataList.length;m++)if("sys_ver"!=e.dataList[m].oldName&&"soft_ver"!=e.dataList[m].oldName&&"web_ver"!=e.dataList[m].oldName&&(n[e.dataList[m].oldName]="language"==e.dataList[m].oldName?"US"==e.dataList[m].value?2:1:"sys_ver"==e.dataList[m].oldName||"soft_ver"==e.dataList[m].oldName||"web_ver"==e.dataList[m].oldName?"V"+e.dataList[m].value:e.dataList[m].value),"name"==e.dataList[m].oldName&&(a=e.dataList[m].value),"language"==e.dataList[m].oldName&&(t=e.dataList[m].value),"logo"==e.dataList[m].oldName&&(s=e.dataList[m].value||"favicon.ico"),r.includes(e.dataList[m].oldName)&&""==String(e.dataList[m].value).replace(/\s/g,"")){o=e.dataList[m].oldName;break}return"name"==o?(e.$message.config({maxCount:1}),e.$message.destroy(),e.$message.error(e.$t("softwareNameNotBeEmpty"))):"company"==o?(e.$message.config({maxCount:1}),e.$message.destroy(),e.$message.error(e.$t("companyNameNotBeEmpty"))):void Object(i.eb)(n).then((function(o){var i=o.data;return!!i&&(0!=i.code?(e.$message.config({maxCount:1}),e.$message.destroy(),e.$message.error(i.msg),e.setSystemName(a),e.setLang(t),l&&s&&(l.href=s),!1):"no effect"==i.data.result?(e.$message.config({maxCount:1}),e.$message.destroy(),e.$message.success("success")):"success"!=i.data.result?(e.$message.config({maxCount:1}),e.$message.destroy(),e.$message.error(i.data.result)):(e.$message.config({maxCount:1}),e.$message.destroy(),e.$message.success(i.msg),e.setSystemName(a),e.setLang(t),l&&s&&(l.href=s),e.getDataList()))}))}}),mounted:function(){this.getDataList()},watch:{lang:{handler:function(){this.cnAndUsObj={"软件名称":this.$t("softwareName"),"公司名称":this.$t("companyName"),"系统版本":this.$t("systemVersion"),"软件版本":this.$t("softwareVersion"),"网页版本":this.$t("webVersion"),"系统语言":this.$t("systemLanguage"),"用户名":this.$t("username"),"图标":this.$t("logo"),"电站图片":this.$t("powerStationPicture"),"网关编号":this.$t("gatewayNumber"),"网关密码":this.$t("gatewayPassword"),"网关型号":this.$t("gatewayModel")},this.getDataList()},deep:!0,immediate:!0}}},r=(t("0c93"),t("0c7c")),l=Object(r.a)(n,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",[t("a-button",{staticStyle:{"margin-bottom":"10px"},attrs:{icon:"search"},on:{click:e.getDataList}},[e._v(e._s(e.$t("search")))]),t("vxe-table",{ref:"recordTable",attrs:{border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","empty-text":e.$t("noData"),"cell-style":{height:"60px"},data:e.dataList,loading:e.dataListLoading}},[t("vxe-column",{attrs:{field:"name",title:e.$t("name"),align:"center","show-overflow":""}}),t("vxe-column",{attrs:{field:"value",title:e.$t("value"),align:"center","show-overflow":""},scopedSlots:e._u([{key:"default",fn:function(a){return["admin"!=e.user?t("div",["logo"!==a.row.oldName?t("span",[e._v(e._s(a.row.value))]):t("div",[t("img",{staticStyle:{width:"40px",margin:"5px 0"},attrs:{src:a.row.value,alt:""}})])]):t("div",["user"==a.row.oldName?t("span",[e._v(e._s(a.row.value))]):"language"==a.row.oldName?t("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",placeholder:e.$t("pleaseSelectLanguage"),"option-filter-prop":"children"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}},e._l(e.langList,(function(a){return t("a-select-option",{key:a.key,attrs:{label:a.name,value:a.key}},[e._v(" "+e._s(a.name)+" ")])})),1):"sys_ver"==a.row.oldName||"soft_ver"==a.row.oldName||"web_ver"==a.row.oldName?t("span",[e._v(" "+e._s("V"+a.row.value)+" ")]):"sn"==a.row.oldName||"model"==a.row.oldName?t("span",[e._v(" "+e._s(a.row.value)+" ")]):"logo"!==a.row.oldName&&"station_pic"!==a.row.oldName&&"pswd"!==a.row.oldName?t("a-input",{attrs:{allowClear:""},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value","string"==typeof t?t.trim():t)},expression:"scope.row.value"}}):"pswd"==a.row.oldName?t("a-input",{attrs:{type:e.passwordVisible?"password":"text",disabled:""},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}},[t("template",{slot:"addonAfter"},[t("a-icon",{attrs:{type:e.passwordVisible?"eye-invisible":"eye"},on:{click:function(a){e.passwordVisible=!e.passwordVisible}}})],1)],2):"logo"==a.row.oldName?t("div",{staticStyle:{height:"100px"}},[t("a-upload",{attrs:{action:"",customRequest:e.uploadImage,accept:".jpg,.JPG,.jpeg,.JPEG,.png,.PNG,.gif,.GIF","list-type":"picture-card","file-list":e.fileList,"before-upload":e.beforeUpload}},[t("img",{staticStyle:{width:"40px",margin:"5px 0"},attrs:{src:a.row.value,alt:""}})])],1):t("div",{staticStyle:{height:"100px"}},[t("a-upload",{attrs:{action:"",customRequest:e.uploadStationPictureImage,accept:".jpg,.JPG,.jpeg,.JPEG,.png,.PNG,.gif,.GIF","list-type":"picture-card","file-list":e.stationPictureFileList,"before-upload":e.beforeUpload}},[t("img",{staticStyle:{width:"40px",margin:"5px 0"},attrs:{src:a.row.value,alt:""}})])],1)],1)]}}])})],1),"admin"==e.user?t("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[t("a-button",{attrs:{type:"primary",icon:"save"},on:{click:e.handleSaveBaseInfoChange}},[e._v(e._s(e.$t("submit")))])],1):e._e()],1)}),[],!1,null,"b1c0e9c2",null).exports;a.default=l}}]);