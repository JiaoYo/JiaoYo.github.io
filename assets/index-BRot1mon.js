import{_ as E}from"./export-CaKIU9TN.js";import{d as S,n as M,p as O,o as z,c as U,w as a,g as e,i as t,$ as o,ah as I,bD as B,h as k,t as C,A as $,F as A,ae as F,B as D,I as P,J as G,a0 as T,T as V,aM as W,j as K,e as q,ak as J,al as H}from"./index-F0x4z3rt.js";import{b as Q,c as X}from"./system-log-Cj8Iql4F.js";import{u as Y}from"./table-DRNLrwJT.js";import{_ as Z}from"./round-search-xJGr_dvE.js";import{_ as ee}from"./round-refresh-8tC0JYox.js";import{_ as te}from"./FormItemGridItem-DvyzlfdR.js";import{_ as oe}from"./Grid-B9eaEnpq.js";import{_ as ae}from"./DataTable-B8y0NXpM.js";import"./RadioGroup-CuVFnOLQ.js";import"./Forward-DSwERy6a.js";const ne=S({name:"LoginlogSearch",__name:"loginlog-search",props:{model:{required:!0},modelModifiers:{}},emits:M(["reset","search"],["update:model"]),setup(u,{expose:f,emit:h}){const b=h,s=O(u,"model");function y(r){s.value.creatorName=r.replace(/\s/g,"")}function x(r){return!r.startsWith(" ")&&!r.endsWith(" ")}function _(){b("reset")}function m(){b("search")}async function N(){const{data:r,error:p}=await Q({creatorName:s.value.creatorName,status:s.value.status});if(!p){let l=r,n=new Blob([l],{type:"application/vnd.ms-excel"}),c=new Date().getTime()+".xls",g=window.webkitURL.createObjectURL(n),i=document.createElement("a");i.href=g,i.download=c,document.body.appendChild(i),i.click(),i.remove()}}return f({handleExportChange:N}),(r,p)=>{const l=A,n=te,c=F,g=ee,i=D,w=Z,d=P,L=oe,R=G,j=T;return z(),U(j,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[e(R,{model:s.value,"label-placement":"left","label-width":80,"show-feedback":!1,onKeyup:$(m,["enter"])},{default:a(()=>[e(L,{responsive:"screen","item-responsive":""},{default:a(()=>[e(n,{span:"24 s:12 m:6",label:t(o)("page.systemlog.login.creatorName"),path:"creatorName",class:"pr-24px"},{default:a(()=>[e(l,{clearable:"",value:s.value.creatorName,"onUpdate:value":p[0]||(p[0]=v=>s.value.creatorName=v),placeholder:t(o)("page.systemlog.login.form.creatorName"),onInput:y,"allow-input":x,onClear:_},null,8,["value","placeholder"])]),_:1},8,["label"]),e(n,{span:"24 s:12 m:6",label:t(o)("page.systemlog.login.status"),path:"status",class:"pr-24px"},{default:a(()=>[e(c,{filterable:"",clearable:"",value:s.value.status,"onUpdate:value":[p[1]||(p[1]=v=>s.value.status=v),m],placeholder:t(o)("page.systemlog.login.form.status"),options:t(I)(t(B)),onClear:_},null,8,["value","placeholder","options"])]),_:1},8,["label"]),e(n,{span:"24 s:12 m:6"},{default:a(()=>[e(d,{class:"w-full"},{default:a(()=>[e(i,{onClick:_},{icon:a(()=>[e(g,{class:"text-icon"})]),default:a(()=>[k(" "+C(t(o)("common.reset")),1)]),_:1}),e(i,{type:"primary",ghost:"",onClick:m},{icon:a(()=>[e(w,{class:"text-icon"})]),default:a(()=>[k(" "+C(t(o)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),le={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function se(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!H(u)}const be=S({name:"logmanage_loginlog",__name:"index",setup(u){const f=V(),{columns:h,columnChecks:b,data:s,getData:y,loading:x,pagination:_,searchParams:m,resetSearchParams:N}=Y({apiFn:X,apiParams:{page:1,pageSize:20,limit:20,creatorName:null,status:null,_t:new Date().getTime()},columns:()=>[{key:"creatorName",title:o("page.systemlog.login.creatorName"),align:"center",width:120,resizable:!0},{key:"operation",title:o("page.systemlog.login.operation"),width:140,align:"center",render:l=>{const n=l.operation==0?o("page.manage.common.loginStatus.login"):o("page.manage.common.loginStatus.logout");return e("span",null,[n])},resizable:!0},{key:"status",title:o("page.systemlog.login.status"),width:100,align:"center",render:l=>{l.status==null&&(l.status=0);const n={0:"error",1:"primary",2:"warning",3:"warning",4:"warning",5:"error",6:"error",7:"error"},c=o(B[l.status].label);return e(W,{size:"small",type:n[l.status]},se(c)?c:{default:()=>[c]})},resizable:!0},{key:"ip",title:o("page.systemlog.login.ip"),width:160,align:"center",resizable:!0},{key:"userAgent",title:o("page.systemlog.login.userAgent"),minWidth:240,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"createDate",title:o("page.systemlog.login.createDate"),width:200,align:"center"}]}),r=K(),p=()=>{r.value.handleExportChange()};return(l,n)=>{const c=E,g=D,i=ae,w=T;return z(),q("div",le,[e(ne,{model:t(m),"onUpdate:model":n[0]||(n[0]=d=>J(m)?m.value=d:null),onReset:t(N),onSearch:t(y),ref_key:"searchRef",ref:r},null,8,["model","onReset","onSearch"]),e(w,{title:t(o)("page.systemlog.login.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":a(()=>[e(g,{type:"info",size:"small",ghost:"",onClick:p},{icon:a(()=>[e(c,{class:"text-icon"})]),default:a(()=>[k(" "+C(t(o)("common.export")),1)]),_:1})]),default:a(()=>[e(i,{columns:t(h),data:t(s),size:"small","flex-height":!t(f).isMobile,"scroll-x":"",loading:t(x),remote:"","row-key":d=>d.id,pagination:t(_),class:"sm:h-full"},null,8,["columns","data","flex-height","loading","row-key","pagination"])]),_:1},8,["title"])])}}});export{be as default};
