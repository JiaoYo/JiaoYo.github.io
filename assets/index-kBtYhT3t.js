import{d as C,p as A,a7 as k,V as S,j as E,v as P,af as V,o as N,e as B,P as O,n as W,ai as H,q as K,aV as g,c as j,w as a,g as t,h as i,t as D,i as p,$ as Z,A as J,L as M,B as Q,M as X,a2 as U,am as R,f as $}from"./index-ByQsQpYG.js";import{_ as Y,f as ee}from"./outline-data-exploration-Ce5RkbE2.js";import{u as ae}from"./table-CQrIFVLV.js";import{u as te}from"./echarts-B_nRPe5W.js";import{_ as oe}from"./round-search-Dxiz62Oh.js";import{_ as ne}from"./DatePicker-DP7ZHnBh.js";import{_ as se}from"./FormItemGridItem-DGZImIns.js";import{_ as le,a as re}from"./RadioGroup-DngHp1Rz.js";import{_ as ie}from"./Grid-B95GY2KH.js";import{_ as ce,a as me}from"./DescriptionsItem-zvewD-_P.js";import"./TimePicker-DZc2cvhP.js";import"./Forward-L7FBmiBZ.js";const ue=C({name:"LineChart",__name:"line-chart",props:{data:{required:!0},dataModifiers:{}},emits:["update:data"],setup(y){const c=A(y,"data");k(()=>c.value,e=>{o()});const h=S(),m=E(null),{domRef:v,updateOptions:x}=te(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(e){return e+"[兆瓦]"}},legend:{data:["预测功率","实际功率"]},grid:{left:"2%",right:"3%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} [兆瓦]"}},series:[{color:"#e90445",name:"预测功率",type:"line",emphasis:{focus:"series"},data:[]},{color:"#addb0b",name:"实际功率",type:"line",emphasis:{focus:"series"},label:{show:!0,position:"top",formatter:function(e){return e.value+"[兆瓦]"}},data:[]}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]}));async function o(){await new Promise(e=>{setTimeout(e,1e3)}),x(e=>(e.xAxis.data=c.value.map(n=>n.time),e.series[0].data=c.value.map(n=>n.actual),e.series[1].data=c.value.map(n=>n.forecast),e))}function l(){x((e,n)=>{const s=n();return e.legend.data=s.legend.data,e.series[0].name=s.series[0].name,e.series[1].name=s.series[1].name,e})}async function d(){o()}return k(()=>h.locale,()=>{l()}),d(),P(()=>{m.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),V(()=>{m.value!==null&&(clearInterval(m.value),m.value=null)}),(e,n)=>(N(),B("div",{ref_key:"domRef",ref:v,class:"h-520px overflow-hidden"},null,512))}}),pe=O(ue,[["__scopeId","data-v-5a23f566"]]),de=C({name:"AlarmSearch",__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:W(["reset","search","exportData"],["update:model"]),setup(y,{emit:c}){H({1:"电场1",2:"电场2",3:"电场3"});const h=c,m=S(),{formRef:v,restoreValidation:x}=K(),o=A(y,"model");o.value.errorType="1",o.value.time=E([Number(g(5,Date.now()-864e5*6)),Number(g(5,Date.now()+864e5))]),o.value.startTime=g(0,Date.now()-864e5*6),o.value.endTime=g(0,Date.now()+864e5);async function l(n,s){o.value.startTime=n[0],o.value.endTime=n[1]}async function d(){h("search")}const e=()=>{h("exportData")};return(n,s)=>{const _=ne,r=se,u=le,w=M,b=re,f=oe,L=Q,F=Y,z=M,G=ie,I=X,q=U;return N(),j(q,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[t(I,{ref_key:"formRef",ref:v,model:o.value,"label-placement":"left","label-width":p(m).locale=="en-US"?120:80,"show-feedback":!1,onKeyup:J(d,["enter"])},{default:a(()=>[t(G,{"y-gap":16,responsive:"screen","item-responsive":""},{default:a(()=>[t(r,{span:"24 s:12 m:6",label:"时间",path:"startTime",class:"pr-24px"},{default:a(()=>[t(_,{value:o.value.time,"onUpdate:value":s[0]||(s[0]=T=>o.value.time=T),type:"daterange","value-format":"yyyy-MM-dd",style:{width:"100%"},"onUpdate:formattedValue":l},null,8,["value"])]),_:1}),t(r,{span:"24 s:12 m:4",label:"",path:"errorType"},{default:a(()=>[t(b,{value:o.value.errorType,"onUpdate:value":s[1]||(s[1]=T=>o.value.errorType=T),name:"radiogroup"},{default:a(()=>[t(w,null,{default:a(()=>[t(u,{value:"0"},{default:a(()=>[i("短期误差")]),_:1}),t(u,{value:"1"},{default:a(()=>[i("超短期误差")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(r,{span:"24 s:12 m:6",class:"pr-24px"},{default:a(()=>[t(z,{class:"w-full"},{default:a(()=>[t(L,{type:"primary",ghost:"",onClick:d},{icon:a(()=>[t(f,{class:"text-icon"})]),default:a(()=>[i(" "+D(p(Z)("common.search")),1)]),_:1}),t(L,{onClick:e},{icon:a(()=>[t(F,{class:"text-icon"})]),default:a(()=>[i(" "+D("导出"))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-width"])]),_:1})}}}),_e={class:"min-h-500px flex-col-stretch gap-16px lt-sm:overflow-auto"},fe=$("span",{class:"font-size-16px"},"误差统计",-1),Ne=C({name:"statisticalanalysis_powererrorstatistics",__name:"index",setup(y){S();const{columns:c,columnChecks:h,data:m,getData:v,loading:x,mobilePagination:o,searchParams:l,resetSearchParams:d}=ae({apiFn:ee,apiParams:{page:1,pageSize:20,limit:20,startTime:g(0,Date.now()-864e5*6)||null,endTime:g(0,Date.now()+864e5)||null,level:null,devtype:null,status:null,_t:new Date().getTime()},immediate:!1,showTotal:!0,columns:()=>[{key:"devname",title:"名称",align:"center",width:160},{key:"reoetits",title:"最大值",align:"center",width:160},{key:"content",title:"最小值",align:"center",minWidth:200},{key:"describe",title:"平均值",align:"center",minWidth:200}]});let e=[{time:"2024-07-18 06:00",actual:125,forecast:345},{time:"2024-07-18 08:00",actual:305,forecast:445},{time:"2024-07-18 10:00",actual:225,forecast:336},{time:"2024-07-18 12:00",actual:195,forecast:245},{time:"2024-07-18 14:00",actual:265,forecast:305},{time:"2024-07-18 16:00",actual:263,forecast:294},{time:"2024-07-18 18:00",actual:305,forecast:285},{time:"2024-07-18 20:00",actual:235,forecast:305},{time:"2024-07-18 22:00",actual:235,forecast:325}];const n=()=>{};k(()=>l.errorType,_=>{_=="1"?e=[{time:"2024-07-18 06:00",actual:125,forecast:345},{time:"2024-07-18 08:00",actual:305,forecast:445},{time:"2024-07-18 10:00",actual:225,forecast:336},{time:"2024-07-18 12:00",actual:195,forecast:245},{time:"2024-07-18 14:00",actual:265,forecast:305},{time:"2024-07-18 16:00",actual:263,forecast:294},{time:"2024-07-18 18:00",actual:305,forecast:285},{time:"2024-07-18 20:00",actual:235,forecast:305},{time:"2024-07-18 22:00",actual:235,forecast:325}]:e=[]});const s=_=>{_.detail.key};return P(()=>{window.addEventListener("localStorageChanged",s)}),V(()=>{window.removeEventListener("localStorageChanged",s)}),(_,r)=>{const u=ce,w=me,b=U;return N(),B("div",_e,[t(de,{model:p(l),"onUpdate:model":r[0]||(r[0]=f=>R(l)?l.value=f:null),onReset:p(d),onSearch:p(v),onExportData:n},null,8,["model","onReset","onSearch"]),t(b,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:a(()=>[$("span",null,D(p(l).errorType=="1"?"超短期功率误差曲线":"短期功率误差曲线"),1)]),default:a(()=>[t(pe,{data:p(e),"onUpdate:data":r[1]||(r[1]=f=>R(e)?e.value=f:e=f)},null,8,["data"]),t(w,{"label-placement":"left",bordered:"",column:4,"label-style":{width:"200px",fontWeight:"bold",textAlign:"center",background:"#fafafa",borderRadius:"2px 0 0 2px",paddingLeft:"8px"}},{header:a(()=>[fe]),default:a(()=>[t(u,{label:"均方根误差(RMSE)"},{default:a(()=>[i(" 26 ")]),_:1}),t(u,{label:"平均绝对误差(MAE)"},{default:a(()=>[i(" 24 ")]),_:1}),t(u,{label:"相关性系数"},{default:a(()=>[i(" 32 ")]),_:1}),t(u,{label:"开机容量平均误差"},{default:a(()=>[i(" 32 ")]),_:1})]),_:1})]),_:1})])}}});export{Ne as default};
