import{d as V,o as k,b as I,e,a4 as le,_ as N,m as b,al as pe,a as Q,am as he,f as C,an as ne,p as P,i as H,c as K,w as S,t as h,F as re,af as X,ao as Z,ap as de,g as w,k as ve,z as ee,ag as ae,ac as be,h as M,v as we,ab as ce,aq as se,ar as ge,u as ye,r as $e,as as oe,at as xe,au as Se,av as ke,aw as U,ax as Le,ay as De,az as Ce,ak as Ie}from"./index-CWjhsADG.js";import{u as ie,L as O}from"./echarts-C3iYjOBL.js";import{G as Te,h as Me,a as Ne,b as Ae}from"./metar-BlQOpDS-.js";const Be={class:"loader-overlay"},Ve=V({__name:"loading",props:{color:{default:"#1890ff"}},setup(l){const t=l;return(r,s)=>(k(),I("div",Be,[e("div",{class:"loader",style:le({"--c":`no-repeat linear-gradient(${t.color} 0 0)`})},null,4)]))}}),Re=N(Ve,[["__scopeId","data-v-c4fc24aa"]]),We=l=>(P("data-v-4ea05f61"),l=l(),H(),l),Oe=["width","height"],Pe=["fill","stroke","d"],He=["stroke"],ze=We(()=>e("path",{fill:"transparent",stroke:"{mergedColor[1]}",d:"M 5 20 L 5 10 L 12 3  L 60 3 L 68 10"},null,-1)),Fe=["stroke","d"],Ee={class:"dv-border-box-content"},Ge=V({__name:"border-box-13",props:{color:{type:Array,default:()=>[]},backgroundColor:{type:String,default:"transparent"}},setup(l){const t=l,r=["#6586ec","#2cf7fe"],s=b(null),{width:f,height:m}=pe(s,{width:0,height:0},{box:"border-box"}),u=Q(()=>he(r,t.color));return(g,x)=>(k(),I("div",{class:"dv-border-box-13 dv-border-box",ref_key:"domRef",ref:s},[(k(),I("svg",{width:C(f),height:C(m),class:"dv-border-svg-container"},[e("path",{fill:l.backgroundColor,stroke:u.value[0],d:`
            M 5 20 L 5 10 L 12 3  L 60 3 L 68 10
            L ${C(f)-20} 10 L ${C(f)-5} 25
            L ${C(f)-5} ${C(m)-5} L 20 ${C(m)-5}
            L 5 ${C(m)-20} L 5 20
        `},null,8,Pe),e("path",{fill:"transparent","stroke-width":"3","stroke-linecap":"round","stroke-dasharray":"10, 5",stroke:u.value[0],d:"M 16 9 L 61 9"},null,8,He),ze,e("path",{fill:"transparent",stroke:u.value[1],d:`M ${C(f)-5} ${C(m)-30} L ${C(f)-5} ${C(m)-5} L ${C(f)-30} ${C(m)-5}`},null,8,Fe)],8,Oe)),e("div",Ee,[ne(g.$slots,"default",{},void 0,!0)])],512))}}),je=N(Ge,[["__scopeId","data-v-4ea05f61"]]),ue=l=>(P("data-v-586f7d9f"),l=l(),H(),l),Ue={key:0,class:"item_title"},qe=ue(()=>e("div",{class:"zuo"},null,-1)),Ye={class:"title-inner"},Je=ue(()=>e("div",{class:"you"},null,-1)),Qe=V({__name:"item-wrap",props:{title:{default:""}},setup(l){return(t,r)=>{const s=je;return k(),K(s,null,{default:S(()=>[t.title!==""?(k(),I("div",Ue,[qe,e("span",Ye,"   "+h(t.title)+"   ",1),Je])):re("",!0),e("div",{class:X(t.title!==""?"item_title_content":"item_title_content_def")},[ne(t.$slots,"default",{},void 0,!0)],2)]),_:3})}}}),Ke=N(Qe,[["__scopeId","data-v-586f7d9f"]]),Xe={class:"list"},Ze={class:"item_info"},et={class:"title"},tt={class:"value"},at=V({__name:"left-bottom",props:{data:{type:Object,default:()=>({})}},setup(l){const t=l,r=Q(()=>{var s,f,m,u,g,x;return[{key:"envT",title:"温度",value:((s=t.data)==null?void 0:s.envT)||0,unit:"℃",icon:"carbon:temperature-celsius"},{key:"envH",title:"湿度",value:((f=t.data)==null?void 0:f.envH)||0,unit:"%",icon:"lets-icons:humidity"},{key:"qy",title:"气压",value:((m=t.data)==null?void 0:m.qy)||0,unit:"hPa",icon:"mdi:car-brake-low-pressure"},{key:"windS",title:"风速",value:((u=t.data)==null?void 0:u.windS)||0,unit:"m/s",icon:"hugeicons:slow-winds"},{key:"windD",title:"风向",value:((g=t.data)==null?void 0:g.windD)||0,unit:"°",icon:"mdi:windsock"},{key:"zfsdCount",title:"总辐射",value:((x=t.data)==null?void 0:x.zfsd)||0,unit:"W/㎡",color:{start:"#ce9ffc",end:"#7367f0"},icon:"material-symbols:clear-day-rounded"}]});return(s,f)=>{const m=ve;return k(),I("div",Xe,[(k(!0),I(Z,null,de(r.value,(u,g)=>(k(),I("div",{class:X(["item",{brBom:[0,1,2].includes(g),brLeft:[0,1,3,4].includes(g)}]),key:u.key},[w(m,{icon:u.icon,class:"iconx"},null,8,["icon"]),e("div",Ze,[e("div",et,h(u.title),1),e("div",tt,h(u.value)+h(u.unit),1)])],2))),128))])}}}),st=N(at,[["__scopeId","data-v-f0512d22"]]),T=l=>(P("data-v-ee7e91f5"),l=l(),H(),l),ot={class:"dashboard"},lt={class:"stats-table"},nt=T(()=>e("td",{class:"label"},"CPU使用率:",-1)),rt={class:"value",colspan:"2"},dt=T(()=>e("td",{class:"label"},"内存使用率:",-1)),ct={class:"value",colspan:"2"},it=T(()=>e("td",{class:"label"},"运行状态:",-1)),ut={class:"value",colspan:"2"},_t=T(()=>e("td",{class:"label"},"是否限电:",-1)),ft={class:"value",colspan:"2"},mt=T(()=>e("td",{class:"label"},"数据接入:",-1)),pt={class:"value",colspan:"2"},ht=T(()=>e("td",{class:"label"},"数据上报:",-1)),vt={class:"value",colspan:"2"},bt=T(()=>e("td",{class:"label"},"有功功率(MW):",-1)),wt={class:"value",colspan:"2"},gt=T(()=>e("td",{class:"label"},"无功功率(MVar):",-1)),yt={class:"value",colspan:"2"},$t=T(()=>e("td",{class:"label"},"更新时间:",-1)),xt={class:"value",colspan:"2"},St=T(()=>e("td",{class:"label"},"功率因数:",-1)),kt={class:"value"},Lt=T(()=>e("td",{class:"label"},"日发电量(MWh):",-1)),Dt={class:"value",colspan:"2"},Ct=T(()=>e("td",{class:"label"},"总发电量(MWh):",-1)),It={class:"value",colspan:"2"},Tt=V({__name:"left-top",props:{data:{type:Object,default:()=>({})}},setup(l){const t=l;return(r,s)=>(k(),I("div",ot,[e("table",lt,[e("tbody",null,[e("tr",null,[nt,e("td",rt,h(t.data.cpu?t.data.cpu+"%":""),1),dt,e("td",ct,h(t.data.mem?t.data.mem+"%":""),1)]),e("tr",null,[it,e("td",ut,h(t.data.stationP&&t.data.stationP>0&&t.data.stationControlled==0?"并网运行":t.data.stationP&&t.data.stationP>0&&t.data.stationControlled==1?"降额运行":t.data.stationP==0?"待机":""),1),_t,e("td",ft,h(t.data.stationControlled==1?"是":"否"),1)]),e("tr",null,[mt,e("td",pt,h(t.data.col=="0"?"🟢":t.data.col=="1"?"🔴":"⚪"),1),ht,e("td",vt,h(t.data.trs=="0"?"🟢":t.data.trs=="1"?"🔴":"⚪"),1)]),e("tr",null,[bt,e("td",wt,h(t.data.stationP??"-"),1),gt,e("td",yt,h(t.data.stationQ??"-"),1)]),e("tr",null,[$t,e("td",xt,h(t.data.dbtime||"-"),1),St,e("td",kt,h(t.data.stationCOS??"-"),1)]),e("tr",null,[Lt,e("td",Dt,h(t.data.stationDayE??"-"),1),Ct,e("td",It,h(t.data.stationTotalE??"-"),1)])])])]))}}),Mt=N(Tt,[["__scopeId","data-v-ee7e91f5"]]),Nt=l=>(P("data-v-dc930ac1"),l=l(),H(),l),At={class:"inner_right"},Bt=Nt(()=>e("div",{class:"dibu"},null,-1)),Vt={class:"info"},Rt={class:"alarmName"},Wt={class:"info_bottom"},Ot={class:"alarmLevel"},Pt={class:"time"},Ht=5e3,zt=3,Ft={__name:"left-center",props:{data:{type:Array,default:()=>[]}},setup(l){const t=l,r=[{label:"一般",color:"#0091FF",value:0},{label:"低级",color:"#ffd600",value:1},{label:"中级",color:"#ffab00",value:2},{label:"高级",color:"#ff6d00",value:3},{label:"严重",color:"#dd2c00",value:4}],s=i=>r.find(o=>o.value===i)||{},f=b(!0),m=Q(()=>f.value?[...t.data,...t.data]:t.data),u=b(!1),g=b(),x=b();let p=null;const L=()=>{u.value=!0,f.value=!1,clearInterval(p)},c=()=>{u.value=!1,f.value=!0,ae(()=>{n()})},n=()=>{clearInterval(p),p=setInterval(()=>{var W;if(u.value||!f.value)return;const i=g.value,o=x.value;if(!i||!o)return;const d=((W=o.children[0])==null?void 0:W.offsetHeight)||0,R=o.scrollHeight/2,A=i.scrollTop+d*zt;A>=R?a(A,()=>{i.scrollTop=A-R}):a(A)},Ht)},a=(i,o)=>{const d=g.value,R=800,A=d.scrollTop,W=i-A,q=performance.now(),B=D=>D<.5?2*D*D:-1+(4-2*D)*D,F=D=>{const E=D-q,G=Math.min(E/R,1);d.scrollTop=A+W*B(G),G<1?requestAnimationFrame(F):o&&o()};requestAnimationFrame(F)};return ee(()=>{ae(()=>{n()})}),be(()=>{clearInterval(p)}),(i,o)=>(k(),I("div",{class:X(["left_boottom scroll-view",{"show-scrollbar":u.value}]),ref_key:"scrollViewRef",ref:g,onMouseenter:L,onMouseleave:c},[e("div",{ref_key:"listRef",ref:x,class:"left_boottom_list"},[(k(!0),I(Z,null,de(m.value,(d,R)=>(k(),I("div",{class:"left_boottom_item",key:R},[e("div",At,[Bt,e("div",Vt,[e("div",Rt,"告警名称："+h(d.aname),1),e("div",Wt,[e("div",Ot,[M(" 告警等级： "),e("span",{style:le({color:s(d.alevel).color,border:"1px solid "+s(d.alevel).color,padding:"0 5px",borderRadius:"5px"})},h(s(d.alevel).label),5)]),e("div",Pt,"时间："+h(d.dbtime),1)])])])]))),128))],512)],34))}},Et=N(Ft,[["__scopeId","data-v-dc930ac1"]]),Gt=V({name:"LineChart",__name:"power",props:{data:{required:!0},dataModifiers:{}},emits:["update:data"],setup(l){const t=(a,i)=>{const o=a.match(/\d+/g);return o?`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${i})`:""};function r(a,i){return a===0||typeof a=="number"&&!isNaN(a)?a+i:""}const s=["rgb(233, 4, 69)","rgb(0, 150, 136)","rgb(59, 66, 146)","rgb(255, 99, 71)"],f=we(l,"data"),m=b(null),u=Date.now(),g=new Date(u).setHours(23,59,59,999),{domRef:x,updateOptions:p,updateOptionsAsync:L}=ie(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:function(a){return`
      ${a[0].axisValueLabel||""}<br/>
      <span class="round" style="background-color: ${s[0]}"></span> ${a[0].seriesName}: ${r(a[0].value[1]," MW")}<br/>
      <span class="round" style="background-color: ${s[1]}"></span> ${a[1].seriesName}: ${r(a[1].value[1]," MW")}<br/>
      <span class="round" style="background-color: ${s[2]}"></span> ${a[2].seriesName}: ${r(a[2].value[1]," W/m^2")}<br/>
      <span class="round" style="background-color: ${s[3]}"></span> ${a[3].seriesName}: ${r(a[3].value[1]," W/m^2")}<br/>
      `},backgroundColor:"#6a7985",textStyle:{color:"#d3d6dd"}},legend:{data:["实际功率","预测功率","实际辐射","预测辐射"],textStyle:{color:"#d3d6dd"}},grid:{left:"3%",right:"3%",bottom:"0%",containLabel:!0},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}",color:"#d3d6dd"},max:g+60*1e3,data:[]},yAxis:[{name:"功率MW",type:"value",axisLabel:{formatter:"{value} MW",color:"#d3d6dd"},splitLine:{show:!1,lineStyle:{color:"#757575",width:1}},nameTextStyle:{color:"#d3d6dd"}},{name:"辐射W/m²",type:"value",axisLabel:{formatter:"{value} W/m²",color:"#d3d6dd"},nameTextStyle:{color:"#d3d6dd"},splitLine:{show:!0,lineStyle:{color:"#757575",width:1}}}],series:[{color:s[0],name:"实际功率",type:"line",emphasis:{focus:"series"},yAxisIndex:0,lineStyle:{width:1},showSymbol:!1,areaStyle:{color:new O(0,0,0,1,[{offset:0,color:t(s[0],.3)},{offset:1,color:t(s[0],0)}],!1),shadowColor:t(s[0],.9),shadowBlur:20},data:[],connectNulls:!0},{color:s[1],name:"预测功率",type:"line",yAxisIndex:0,emphasis:{focus:"series"},lineStyle:{width:1},showSymbol:!1,areaStyle:{color:new O(0,0,0,1,[{offset:0,color:t(s[1],.3)},{offset:1,color:t(s[1],0)}],!1),shadowColor:t(s[1],.9),shadowBlur:20},data:[],connectNulls:!0},{color:s[2],name:"实际辐射",type:"line",showSymbol:!1,yAxisIndex:1,emphasis:{focus:"series"},lineStyle:{width:1},areaStyle:{color:new O(0,0,0,1,[{offset:0,color:t(s[2],.3)},{offset:1,color:t(s[2],0)}],!1),shadowColor:t(s[2],.7),shadowBlur:20},data:[],connectNulls:!0},{color:s[3],name:"预测辐射",type:"line",yAxisIndex:1,showSymbol:!1,emphasis:{focus:"series"},lineStyle:{width:1},areaStyle:{color:new O(0,0,0,1,[{offset:0,color:t(s[3],.3)},{offset:1,color:t(s[3],0)}],!1),shadowColor:t(s[3],.7),shadowBlur:20},data:[],connectNulls:!0}]}));async function c(){await new Promise(a=>{setTimeout(a,1e3)}),p(a=>{if(f.value){const i=f.value.map(o=>({dbtime:o.dbtime,prePower:o.prePower,power:o.power,zfsd:o.zfsd,ssrd:o.ssrd}));a.xAxis.data=i.map(o=>o.dbtime),a.series[0].data=i.map(o=>[o.dbtime,o.power]),a.series[1].data=i.map(o=>[o.dbtime,o.prePower]),a.series[2].data=i.map(o=>[o.dbtime,o.zfsd]),a.series[3].data=i.map(o=>[o.dbtime,o.ssrd]),console.log(a.series,"seriesseriesseries")}return a})}ce(()=>f.value,a=>{L(i=>{if(f.value){const o=f.value.map(d=>({dbtime:d.dbtime,prePower:d.prePower,power:d.power,zfsd:d.zfsd,ssrd:d.ssrd}));i.xAxis.data=o.map(d=>d.dbtime),i.series[0].data=o.map(d=>[d.dbtime,d.power]),i.series[1].data=o.map(d=>[d.dbtime,d.prePower]),i.series[2].data=o.map(d=>[d.dbtime,d.zfsd]),i.series[3].data=o.map(d=>[d.dbtime,d.ssrd])}return i})});async function n(){await c()}return ee(()=>{x.value=m.value}),n(),(a,i)=>(k(),I("div",{ref_key:"chartDom",ref:m,class:"chart"},null,512))}}),jt=N(Gt,[["__scopeId","data-v-3741cc7e"]]),Ut=V({name:"LineChart",__name:"weather-chart",props:{data:{type:Array,default:[]}},setup(l){function t(c,n){return c===0||typeof c=="number"&&!isNaN(c)?c+n:""}const r=l,s=Date.now(),f=new Date(s).setHours(23,59,59,999),{domRef:m,updateOptions:u,showLoading:g,updateOptionsAsync:x}=ie(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(c){return t(c,"°C")},backgroundColor:"#6a7985",textStyle:{color:"#d3d6dd"}},legend:{data:["环境温度","预测温度","组件温度"],textStyle:{color:"#d3d6dd"}},grid:{left:"3%",right:"3%",bottom:"0%",containLabel:!0},xAxis:{type:"time",axisLabel:{formatter:"{HH}:{mm}",color:"#d3d6dd"},max:f+60*1e3,data:[]},yAxis:{name:"温度(°C)",type:"value",axisLabel:{formatter:"{value} °C",color:"#d3d6dd"},splitLine:{show:!0,lineStyle:{color:"#757575",width:1}},nameTextStyle:{color:"#d3d6dd"}},series:[{color:"#27ae60",name:"环境温度",type:"line",lineStyle:{width:1},showSymbol:!1,areaStyle:{color:new O(0,0,0,1,[{offset:0,color:"rgba(39, 174, 96,0.4)"},{offset:1,color:"rgba(39, 174, 96,0)"}],!1),shadowColor:"rgba(39, 174, 96,0.9)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0},{color:"#c0392b",name:"预测温度",type:"line",lineStyle:{width:1},showSymbol:!1,areaStyle:{color:new O(0,0,0,1,[{offset:0,color:"rgba(192, 57, 43,0.3)"},{offset:1,color:"rgba(192, 57, 43,0)"}],!1),shadowColor:"rgba(192, 57, 43,0.9)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0},{color:"#ffa000",name:"组件温度",type:"line",lineStyle:{width:1},showSymbol:!1,areaStyle:{color:new O(0,0,0,1,[{offset:0,color:"rgba(255, 160, 0,0.3)"},{offset:1,color:"rgba(255, 160, 0,0)"}],!1),shadowColor:"rgba(255, 160, 0,0.9)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0}]}));async function p(){await new Promise(c=>{setTimeout(c,1e3)}),u(c=>(r.data&&(c.xAxis.data=r.data.map(n=>n.dbtime),c.series[0].data=r.data.map(n=>[n.dbtime,n.envT]),c.series[1].data=r.data.map(n=>[n.dbtime,n.tt2]),c.series[2].data=r.data.map(n=>[n.dbtime,n.moduleT])),c))}async function L(){p()}return ce(()=>r.data,()=>{x(c=>(r.data&&(c.xAxis.data=r.data.map(n=>n.dbtime),c.series[0].data=r.data.map(n=>[n.dbtime,n.envT]),c.series[1].data=r.data.map(n=>[n.dbtime,n.tt2]),c.series[2].data=r.data.map(n=>[n.dbtime,n.moduleT])),c))}),L(),(c,n)=>(k(),I("div",{ref_key:"domRef",ref:m,class:"chart"},null,512))}}),qt=N(Ut,[["__scopeId","data-v-ec72b241"]]),z=l=>(P("data-v-adf7811f"),l=l(),H(),l),Yt=z(()=>e("h2",{class:"setting-title"},"设置",-1)),Jt=z(()=>e("div",{class:"left_shu"},"全局设置",-1)),Qt={class:"setting_item"},Kt=z(()=>e("span",{class:"setting_label"},[M(" 是否进行自动适配"),e("span",{class:"setting_label_tip"},"(默认分辨率1920*1080)"),M(": ")],-1)),Xt={class:"setting_content"},Zt=z(()=>e("div",{class:"left_shu"},"实时监测",-1)),ea={class:"setting_item"},ta=z(()=>e("span",{class:"setting_label"},[M(" 设备提醒自动轮询: "),e("span",{class:"setting_label_tip"})],-1)),aa={class:"setting_content"},sa={class:"setting_item"},oa=z(()=>e("span",{class:"setting_label"}," 实时预警轮播: ",-1)),la={class:"setting_content"},na=V({__name:"setting",setup(l){const t=b(!0),r=b(!0),s=b(!0);(()=>{r.value=!0,s.value=!0})();const m=x=>{settingStore.setIsScale(x)},u=x=>{settingStore.setIndexConfig({leftBottomSwiper:!0,rightBottomSwiper:!0})},g=b(!1);return(x,p)=>{const L=se("el-radio"),c=se("el-radio-group"),n=ge;return k(),K(n,{show:g.value,"onUpdate:show":p[6]||(p[6]=a=>g.value=a),direction:"rtl",size:"360px"},{header:S(()=>[Yt]),default:S(()=>[Jt,e("div",Qt,[Kt,e("div",Xt,[w(c,{modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=a=>t.value=a),onChange:p[1]||(p[1]=a=>m(a))},{default:S(()=>[w(L,{label:!0},{default:S(()=>[M("是")]),_:1}),w(L,{label:!1},{default:S(()=>[M("否")]),_:1})]),_:1},8,["modelValue"])])]),Zt,e("div",ea,[ta,e("div",aa,[w(c,{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=a=>r.value=a),onChange:p[3]||(p[3]=a=>u(a))},{default:S(()=>[w(L,{label:!0},{default:S(()=>[M("是")]),_:1}),w(L,{label:!1},{default:S(()=>[M("否")]),_:1})]),_:1},8,["modelValue"])])]),e("div",sa,[oa,e("div",la,[w(c,{modelValue:s.value,"onUpdate:modelValue":p[4]||(p[4]=a=>s.value=a),onChange:p[5]||(p[5]=a=>u(a))},{default:S(()=>[w(L,{label:!0},{default:S(()=>[M("是")]),_:1}),w(L,{label:!1},{default:S(()=>[M("否")]),_:1})]),_:1},8,["modelValue"])])])]),_:1},8,["show"])}}}),ra=N(na,[["__scopeId","data-v-adf7811f"]]),da="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%3e%3cpath%20fill='%23fff'%20d='M2.5%2012c-.13%200-.25-.05-.35-.14l-2-1.93A.55.55%200%200%201%200%209.57V2.43c0-.13.06-.26.15-.36l2-1.93c.15-.14.36-.18.55-.1c.18.08.3.26.3.46v11c0%20.2-.12.38-.3.46c-.07.03-.13.04-.2.04m7-3.5c-.06%200-.13-.01-.19-.04A.5.5%200%200%201%209%208l-.01-4.06c0-.2.12-.39.31-.46c.19-.08.4-.03.54.11l1.67%201.7c.38.39.38%201.02-.01%201.41L9.85%208.35a.47.47%200%200%201-.35.15'%20/%3e%3cpath%20fill='none'%20stroke='%23fff'%20stroke-linecap='round'%20d='M2.5%202.5H6c.28%200%20.5.22.5.5v1m-4%205.5H6c.28%200%20.5-.22.5-.5V8M11%206H5'%20stroke-width='1'%20/%3e%3c/svg%3e",J=l=>(P("data-v-0b13438f"),l=l(),H(),l),ca={class:"content_wrap"},ia={class:"d-flex jc-center title_wrap"},ua=J(()=>e("div",{class:"zuojuxing"},null,-1)),_a=J(()=>e("div",{class:"youjuxing"},null,-1)),fa=J(()=>e("div",{class:"guang"},null,-1)),ma=["src"],pa=J(()=>e("div",{class:"d-flex jc-center"},[e("div",{class:"title"},[e("span",{class:"title-text"},"光功率预测系统可视化")])],-1)),ha={class:"top_Info"},va={class:"left"},ba={class:"right"},wa={class:"index-box"},ga={class:"content_left"},ya={class:"content_right"},$a=V({name:"bigscreen",__name:"index",setup(l){const t=ye(),r=$e({dateDay:"",dateYear:"",dateWeek:"",timing:null}),s=["周日","周一","周二","周三","周四","周五","周六"];(()=>{r.timing=setInterval(()=>{r.dateDay=oe().format("YYYY-MM-DD hh : mm : ss"),r.dateWeek=s[oe().day()]},1e3)})();const m=b({}),u=async()=>{const{data:_,error:y}=await xe();y||(m.value=_)},g=async()=>{const{data:_,error:y}=await Se();y||(m.value.cpu=_.cpu,m.value.mem=_.mem)},x=b(),p=async()=>{const{data:_,error:y}=await ke({_t:new Date().getTime()});x.value=_.pname},L=b(),c=async()=>{var v;const{data:_,error:y}=await Te();y||(L.value=_,L.value.length!=0&&(n.value=(v=_[0])==null?void 0:v.id,i()))},n=b(),a=b(),i=async()=>{const{data:_,error:y}=await Me({devId:n.value});y||(a.value=_)},o=_=>{n.value=_,i(),E()},d=Date.now(),R=new Date(d).setHours(0,0,0,0),A=new Date(d).setHours(23,59,59,999),W=b(),q=async()=>{const{data:_,error:y}=await Ne({startTime:U(1,R),endTime:U(1,A),page:1,limit:100});y||(W.value=JSON.parse(JSON.stringify(_)).list)},B=b(),F=async()=>{const{data:_,error:y}=await Le({date:U(0,Date.now())});y||(B.value=_,B.value.forEach(v=>(W.value.forEach($=>{v.dbtime==$.dbtime&&(v.ssrd=$.ssrd)}),v)),D.value.forEach(v=>{const $=B.value.find(j=>j.dbtime===v.dbtime);$?Object.assign($,v):B.value.push(v)}),B.value=B.value.sort((v,$)=>new Date(v.dbtime).getTime()-new Date($.dbtime).getTime()))},D=b(),E=async()=>{if(!n.value)return;const{data:_,error:y}=await Ae({id:n.value,startTime:U(0,Date.now())+" 00:00:00",endTime:U(1,Date.now())});console.log("气象实际数据",_),D.value=_,W.value.forEach(v=>{const $=D.value.find(j=>j.dbtime===v.dbtime);$?Object.assign($,v):D.value.push(v)}),D.value=D.value.sort((v,$)=>new Date(v.dbtime).getTime()-new Date($.dbtime).getTime())},G=b([]),te=async()=>{const{data:_,error:y}=await De({page:1,limit:20});y||(G.value=JSON.parse(JSON.stringify(_)).list)};b(null);const _e=()=>{var _;(_=window.$dialog)==null||_.info({title:"退出登录",content:"确定要退出登录吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{const{data:y,error:v}=await Ce();v||t.clearInfo()}})},fe=b(null),Y=b(!1);return ee(async()=>{p();try{Y.value=!0,await c(),await u(),await g(),await q(),await E(),await F(),await te(),Y.value=!1}catch{Y.value=!1}fe.value=setInterval(async()=>{await i(),await u(),await g(),await q(),await E(),await F(),await te(),p()},1e3*60*1)}),(_,y)=>{const v=Ie,$=Ke,j=Re;return k(),I(Z,null,[e("div",ca,[e("div",ia,[ua,_a,fa,e("img",{src:C(da),alt:"",class:"logoutIcon",onClick:_e},null,8,ma),pa,e("div",ha,[e("div",va,[M(h(x.value)+" ",1),w(v,{filterable:"",placeholder:"请选择气象站",value:n.value,"onUpdate:value":y[0]||(y[0]=me=>n.value=me),options:L.value,"label-field":"sname",size:"tiny","value-field":"id",style:{width:"140px","margin-left":"10px"},onUpdateValue:o},null,8,["value","options"])]),e("div",ba,h(r.dateYear)+" "+h(r.dateWeek)+" "+h(r.dateDay),1)])]),e("div",wa,[e("div",ga,[w($,{class:"content_left-top",title:"运行状态"},{default:S(()=>[w(Mt,{data:m.value},null,8,["data"])]),_:1}),w($,{class:"content_left-center",title:"最近告警"},{default:S(()=>[w(Et,{data:G.value},null,8,["data"])]),_:1}),w($,{class:"content_left-bottom",title:"气象信息"},{default:S(()=>[w(st,{data:a.value},null,8,["data"])]),_:1})]),e("div",ya,[w($,{class:"content_right-top",title:"今日功率"},{default:S(()=>[w(jt,{data:B.value},null,8,["data"])]),_:1}),w($,{class:"content_right-bottom",title:"今日气象"},{default:S(()=>[w(qt,{data:D.value},null,8,["data"])]),_:1})])])]),w(ra),Y.value?(k(),K(j,{key:0})):re("",!0)],64)}}}),La=N($a,[["__scopeId","data-v-0b13438f"]]);export{La as default};
