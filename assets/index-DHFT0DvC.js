import{_ as I}from"./table-header-operation.vue_vue_type_script_setup_true_lang-DCcFtEoA.js";import{d as z,q,j as Z,v as J,s as Q,o as D,c as R,w as l,g as a,i as e,$ as k,Z as X,e as A,an as Y,N as ee,h as H,t as U,f as te,M as ae,a2 as ne,B as le,E as oe,D as se,ad as F,a4 as ie,at as re,ag as P,ah as ce,ai as me}from"./index-ByfxsQvj.js";import{u as pe,a as de}from"./table-Ca-5bYro.js";import{_ as ue,a as _e}from"./arrow-open-up-BQr4szyH.js";import{_ as fe}from"./round-search-U_wZ0GRt.js";import{_ as ge}from"./round-refresh-BRVSTvae.js";import{u as $}from"./usePageData-lPm5H_26.js";import{g as he,h as ve,i as ye}from"./events--VzTCbWs.js";import{a as be,T as De}from"./basicconf-DJQBiVhW.js";import{_ as ke}from"./lodash-21GmhknM.js";import{_ as xe}from"./FormItemGridItem-Dtr_7n7z.js";import{_ as we}from"./DatePicker-ChOIwL9T.js";import{_ as Te}from"./Grid-B9K_tFX2.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-frQqLk93.js";import"./setting-outlined-C6sNL0co.js";import"./export-CaaNVRvS.js";import"./refresh-DDT70CE0.js";import"./round-delete-BsuQe4MI.js";import"./round-plus--T3dOesv.js";import"./Upload-BPNrVbAn.js";import"./Progress-B01mUdYA.js";import"./Popconfirm-Bx1fZnQD.js";import"./TimePicker-Bw31iYnN.js";import"./defineProperty-D9xlJP3p.js";const Se=z({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:q(["reset","search"],["update:model"]),setup(u,{emit:T}){const f=T,c=Z(!1),{formRef:x,restoreValidation:g}=J(),n=Q(u,"model"),{pageData:h,getData:v,nextPage:S}=$(he),B=async i=>{const t=i.currentTarget;t.scrollTop+t.offsetHeight>=t.scrollHeight&&h.data.length<h.total&&S()},{pageData:w,getData:E,nextPage:N}=$(ve),M=async i=>{const t=i.currentTarget;t.scrollTop+t.offsetHeight>=t.scrollHeight&&w.data.length<w.total&&N()};async function m(i,t){i?(n.value.startTime=i[0],n.value.endTime=i[1]):(n.value.startTime=null,n.value.endTime=null),f("search")}async function V(){await g(),n.value.timeRange=null,f("reset")}async function y(){f("search")}const C=ke.throttle(y,1e3,{trailing:!1});return v(),E(),(i,t)=>{const b=ne,o=xe,s=we,d=ge,_=le,L=fe,r=ue,O=_e,G=oe,K=Te,j=se,W=F;return D(),R(W,{bordered:!1,size:"small",class:"card-wrapper"},{default:l(()=>[a(j,{ref_key:"formRef",ref:x,model:n.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:ae(e(C),["enter"])},{default:l(()=>[a(K,{responsive:"screen","item-responsive":"","y-gap":20},{default:l(()=>[a(o,{span:"24 s:24 m:8 l:6",label:"事件名称",path:"enameid"},{default:l(()=>[a(b,{value:n.value.enameid,"onUpdate:value":[t[0]||(t[0]=p=>n.value.enameid=p),y],placeholder:"请选择事件名称",clearable:"",filterable:"","value-field":"id","label-field":"ename",options:e(h).data,"reset-menu-on-options-change":!1,onScroll:B},null,8,["value","options"])]),_:1}),a(o,{span:"24 s:24 m:8 l:6",label:e(k)("page.manage.alarm.level"),path:"elevel"},{default:l(()=>[a(b,{filterable:"",clearable:"",placeholder:e(k)("page.manage.alarm.form.level"),value:n.value.elevel,"onUpdate:value":[t[1]||(t[1]=p=>n.value.elevel=p),y],options:e(X)(e(be))},null,8,["placeholder","value","options"])]),_:1},8,["label"]),c.value?(D(),A(Y,{key:0},[a(o,{span:"24 s:24 m:8 l:6",label:"时间",path:"timeRange"},{default:l(()=>[a(s,{clearable:"",value:n.value.timeRange,"onUpdate:value":t[2]||(t[2]=p=>n.value.timeRange=p),type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss",style:{width:"100%"},"onUpdate:formattedValue":m},null,8,["value"])]),_:1}),a(o,{span:"24 s:24 m:8 l:6",label:"策略名称",path:"pnameid"},{default:l(()=>[a(b,{value:n.value.pnameid,"onUpdate:value":[t[3]||(t[3]=p=>n.value.pnameid=p),y],placeholder:"请选择策略名称",clearable:"",filterable:"","value-field":"id","label-field":"aname",options:e(w).data,"reset-menu-on-options-change":!1,onScroll:M},null,8,["value","options"])]),_:1})],64)):ee("",!0),a(o,{span:"24 s:24 m:8 l:6",label:" "},{default:l(()=>[a(G,{class:"w-full",align:"center"},{default:l(()=>[a(_,{onClick:V},{icon:l(()=>[a(d,{class:"text-icon"})]),default:l(()=>[H(" "+U(e(k)("common.reset")),1)]),_:1}),a(_,{type:"primary",ghost:"",onClick:e(C)},{icon:l(()=>[a(L,{class:"text-icon"})]),default:l(()=>[H(" "+U(e(k)("common.search")),1)]),_:1},8,["onClick"]),te("div",{class:"cursor-pointer",title:"精准查询",onClick:t[4]||(t[4]=p=>c.value=!c.value)},[c.value?(D(),R(r,{key:0,class:"text-icon"})):(D(),R(O,{key:1,class:"text-icon"}))])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1})}}}),Ne={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function Ce(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!ce(u)}const Ye=z({name:"eventalarm_associatedevents",__name:"index",setup(u){const T=ie(),{columns:f,columnChecks:c,data:x,getData:g,loading:n,mobilePagination:h,searchParams:v,resetSearchParams:S}=pe({apiFn:ye,immediate:!0,apiParams:{page:1,pageSize:20,limit:20,pnameid:null,enameid:null,elevel:null,startTime:null,endTime:null,fuzzy:null,_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48,fixed:"left"},{key:"pname",title:"事件类型",align:"center",minWidth:160,ellipsis:{tooltip:!0}},{key:"ename",title:"事件名称",align:"center",minWidth:160,ellipsis:{tooltip:!0}},{key:"aname",title:"策略名称",align:"center",minWidth:160,ellipsis:{tooltip:!0}},{key:"elevel",title:"事件等级",align:"center",minWidth:120,render:o=>{(o.elevel===void 0||o.elevel===null)&&(o.elevel=1);const s={0:"#8e9dff",1:"#5da8ff",2:"#fedc69",3:"#ff9874",4:"#ff0000"},d=k(De[o.elevel]);let _={color:s[o.elevel],textColor:"#ffffff",borderColor:s[o.elevel]};return a(re,{size:"small",color:_},Ce(d)?d:{default:()=>[d]})}},{key:"num",title:"次数",align:"center",width:180},{key:"gnrtime",title:"产生时间",align:"center",width:180},{key:"dbtime",title:"更新时间",align:"center",width:180}]}),{drawerVisible:B,operateType:w,editingData:E,handleAdd:N,handleEdit:M,checkedRowKeys:m,onBatchDeleted:V,onDeleted:y,closeDrawer:C}=de(x,g);async function i(){console.log(m.value),t(m.value)}async function t(o,s){}async function b(){}return(o,s)=>{const d=I,_=me,L=F;return D(),A("div",Ne,[a(Se,{model:e(v),"onUpdate:model":s[0]||(s[0]=r=>P(v)?v.value=r:null),onReset:e(S),onSearch:e(g)},null,8,["model","onReset","onSearch"]),a(L,{title:"关联事件",bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":l(()=>[a(d,{columns:e(c),"onUpdate:columns":s[1]||(s[1]=r=>P(c)?c.value=r:null),"disabled-delete":e(m).length===0,loading:e(n),onAdd:e(N),onDelete:i,onRefresh:e(g),"is-view-export-button":!0,onExportHandler:b},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:l(()=>[a(_,{"checked-row-keys":e(m),"onUpdate:checkedRowKeys":s[2]||(s[2]=r=>P(m)?m.value=r:null),columns:e(f),data:e(x),size:"small","flex-height":!e(T).isMobile,"scroll-x":962,loading:e(n),remote:"","row-key":r=>r.id,pagination:e(h),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"])]),_:1})])}}});export{Ye as default};
