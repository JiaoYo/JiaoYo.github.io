import{_ as Be}from"./table-column-setting.vue_vue_type_script_setup_true_lang-nNpCY9lJ.js";import{_ as Fe}from"./round-delete-B5av1Q-z.js";import{_ as Ve}from"./round-add-Dxx1Q5ac.js";import{aq as ie,d as ye,aw as _e,ay as he,q as be,at as Ce,r as K,cq as ce,bZ as Ee,c as q,o as m,w as o,f as s,G as Ne,h as a,C as te,au as ge,az as Se,b as $,aT as Me,aX as De,e as r,t as f,B as x,g as y,z as Y,aB as Le,aC as He,N as xe,aF as Oe,b4 as Ue,aI as ve,a$ as re,aK as Ge,cr as Je,av as ze,s as Ke,i as Xe,F as Ye,$ as le,U as Te,M as Ze,y as me,aO as fe,aA as Qe,D as ne,aP as We,aU as et}from"./index-BG16ZifG.js";import{u as tt,a as lt}from"./table-B-6Bq47M.js";import{u as Ae}from"./usePageData-D966OD4e.js";import{_ as Ie}from"./Grid-52o7xY5h.js";import{_ as je}from"./FormItemGridItem-CVMlyKk-.js";import{N as Pe}from"./DatePicker-BB5WIdGb.js";import{_ as st}from"./round-search-0CRuG0ER.js";import{_ as at}from"./round-refresh-FqTmFNSv.js";import{N as ot}from"./Table-DVdP8Kom.js";import{N as we}from"./Popconfirm-CW7rsSN1.js";function nt(_){return ie({url:"/projectMeeting/getPage.do",method:"get",params:_})}function Re(_){return ie({url:"/projectMeeting/getById.do",method:"get",params:{id:_}})}function rt(_){return ie({url:"/projectMeeting/insert.do",method:"post",data:_})}function it(_){return ie({url:"/projectMeeting/update.do",method:"put",data:_})}function ke(_){return ie({url:"/projectMeeting/delete.do",method:"delete",params:{arrIds:_}})}const ut={class:"flex pr-20px"},pt={class:"flex-1"},dt={class:"flex mb-10px"},ct={class:"flex mb-10px"},mt={class:"flex mb-10px"},ft={class:"flex mb-10px"},vt={class:"flex-col ml-20px justify-center"},_t={key:0,class:""},yt={key:1,class:"flex items-center w-300px"},bt={key:0,class:""},gt={key:1,class:"flex items-center w-300px"},ht={key:0,class:""},xt={key:1,class:"flex items-center w-300px"},wt=ye({__name:"meetingModal",props:_e({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:_e(["submitted"],["update:visible"]),setup(_,{emit:E}){var ue;const N=he(_,"visible"),O=(ue=be().userInfo)==null?void 0:ue.usertype,H=_,g=E,h=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],L=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],d=[{label:"生产部周例会",value:4}],B=[{label:"销售周例会",value:5}],S=[...h,...L,...d,...B,{label:"管理层周例会",value:6}];Ce(()=>N.value,async l=>{l&&w()});const F=K(null),e=K({id:void 0,con1:"",mdbtime:void 0,mtype:0,musers:[],mtopic:"",contentArr:[{id:ce(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}),n={con2:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtopic:{type:"string",required:!0,message:"请输入",trigger:"blur"},mdbtime:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtype:{type:"number",required:!0,message:"请输入",trigger:"blur"},musers:{type:"array",required:!0,message:"请输入",trigger:"blur"}},P=()=>{const l=new Date;l.setHours(17),l.setMinutes(30),l.setSeconds(0);const t=p=>p<10?"0"+p:p;return`${l.getFullYear()}-${t(l.getMonth()+1)}-${t(l.getDate())} ${t(l.getHours())}:${t(l.getMinutes())}:${t(l.getSeconds())}`},{pageData:U,getData:z,nextPage:R}=Ae(Ue),C=async l=>{const t=l.currentTarget,p=t.scrollTop;t.scrollTop+t.offsetHeight>=t.scrollHeight&&U.data.length<U.total&&(await R(),await ve(),setTimeout(()=>{t.scrollTop=p}))},c=async l=>{await z({usertypes:l,page:1})},G=async()=>{var t;const{data:l}=await Re(H.rowData.id);l&&(e.value=l,e.value.mtype==0&&(e.value.contentArr=JSON.parse(l.con2)),e.value.mdbtime=re(1,l.mdbtime),e.value.musers=(t=l.musers.replaceAll("、",","))==null?void 0:t.split(","))};async function T(l){await ve();const t=document.getElementById(l);if(t){t.scrollIntoView({behavior:"smooth",block:"center"});const p=t.querySelector("input, textarea");p==null||p.focus()}}const w=async()=>{c("0,2,3"),H.operateType=="add"?e.value={id:void 0,con1:"",mdbtime:P(),mtype:0,musers:[],mtopic:"",contentArr:[{id:ce(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:""}:G()},J=Ee.debounce(async()=>{var t,p,A,k,W,ee,pe;await((t=F.value)==null?void 0:t.validate());let l=JSON.parse(JSON.stringify(e.value));if(e.value.mtype==0){for(let I=0;I<e.value.contentArr.length;I++){const D=e.value.contentArr[I];if(D.status1=D.person?"":"error",D.status2=D.proname?"":"error",D.status3=D.desc?"":"error",!D.person)return T("person-"+I),(p=window.$message)==null?void 0:p.error("请填写完整的调试人员");if(!D.proname)return T("proname-"+I),(A=window.$message)==null?void 0:A.error("请填写完整的项目名称");if(!D.desc)return T("desc-"+I),(k=window.$message)==null?void 0:k.error("请填写完整的工作描述")}l.con2=JSON.stringify(l.contentArr),delete l.contentArr}if(l.con1="",l.con3="",l.musers=(W=l.musers)==null?void 0:W.join("、"),e.value.id){const{data:I,error:D}=await it([l]);I&&((ee=window.$message)==null||ee.success("编辑成功"),V(),g("submitted"))}else{const{data:I,error:D}=await rt([l]);I&&((pe=window.$message)==null||pe.success("新增成功"),V(),g("submitted"))}},1e3,{leading:!0,trailing:!1}),V=()=>{N.value=!1,e.value={id:void 0,con1:"",mdbtime:void 0,mtype:0,musers:[],mtopic:"",contentArr:[{id:ce(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}},X=K(),se=l=>{l.status1=l.person?"":"error",l.status2=l.proname?"":"error",l.status3=l.desc?"":"error",!(l.status1=="error"||l.status2=="error"||l.status3=="error")&&(e.value.contentArr.push({id:ce(),person:"",proname:"",desc:"",problem:e.value.contentArr[e.value.contentArr.length-1].problem,status1:"",status2:"",status3:""}),ve(()=>{var t;(t=X.value)==null||t.scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:"smooth"})}))},Q=l=>{l.status1=l.person?"":"error"},ae=l=>{l.status2=l.proname?"":"error"},oe=l=>{l.status3=l.desc?"":"error"},v=l=>{var t;if(l==0)(((t=e.value.contentArr)==null?void 0:t.length)==0||!Object.keys(e.value).includes("contentArr"))&&(e.value.contentArr=[{person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}]);else{let p=function(A){if(!A)return!1;try{return JSON.parse(A),!0}catch{return!1}};e.value.con2=p(e.value.con2)?"":e.value.con2}(l==0||l==1)&&(c("0,2,3"),e.value.mdbtime=l==0?re(0,new Date)+" 17:30:00":re(0,new Date)+" 08:30:00"),(l==2||l==3)&&(c("0,5"),e.value.mdbtime=re(0,new Date)+" 09:00:00"),l==4&&c("0,6"),l==5&&c("0,1"),l==6&&c("0,4"),e.value.musers=[]},i=K(0),b=K("");async function M({file:l},t){b.value=t;const p=await Ge(l.file,l.name,"",A=>{i.value=A});p&&(t=="fl1"?e.value.fl1=p:t=="fl2"?e.value.fl2=p:t=="fl3"&&(e.value.fl3=p),i.value=0)}return(l,t)=>{const p=je,A=Pe,k=Je,W=Le,ee=He,pe=Ie,I=Ne,D=xe,qe=Oe;return m(),q(qe,{show:N.value,"onUpdate:show":t[8]||(t[8]=u=>N.value=u),title:H.operateType==="add"?"新增会议纪要":"编辑会议纪要",preset:"card",class:"w-900px"},{footer:o(()=>[s(D,{justify:"end"},{default:o(()=>[s(a(x),{size:"small",class:"mt-16px",onClick:V},{default:o(()=>[y(f(l.$t("common.cancel")),1)]),_:1}),s(a(x),{type:"primary",size:"small",class:"mt-16px",onClick:a(J)},{default:o(()=>[y(f(l.$t("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),default:o(()=>[s(I,{ref_key:"formRef",ref:F,model:e.value,rules:n,"label-placement":"left"},{default:o(()=>[s(pe,{responsive:"screen","item-responsive":"","x-gap":"15"},{default:o(()=>[s(p,{span:"24 s:24 m:24",label:"会议标题",path:"mtopic"},{default:o(()=>[s(a(te),{value:e.value.mtopic,"onUpdate:value":t[0]||(t[0]=u=>e.value.mtopic=u),placeholder:"请输入会议标题"},null,8,["value"])]),_:1}),s(p,{span:"24 s:12 m:12",label:"会议类型",path:"mtype"},{default:o(()=>[s(a(ge),{clearable:"",value:e.value.mtype,"onUpdate:value":[t[1]||(t[1]=u=>e.value.mtype=u),v],options:a(O)==0||a(O)==4?S:a(O)==2||a(O)==3?h:a(O)==5?L:a(O)==6?d:B,placeholder:"请选择会议类型",size:"small"},null,8,["value","options"])]),_:1}),s(p,{span:"24 s:12 m:12",label:"会议时间",path:"mdbtime"},{default:o(()=>[s(A,{size:"small","formatted-value":e.value.mdbtime,"onUpdate:formattedValue":t[2]||(t[2]=u=>e.value.mdbtime=u),"default-time":"17:30:00",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(p,{span:"24 s:12 m:24",label:"参会人员",path:"musers"},{default:o(()=>[s(a(ge),{clearable:"",multiple:"",filterable:"",value:e.value.musers,"onUpdate:value":t[3]||(t[3]=u=>e.value.musers=u),placeholder:"请选择",options:a(U).data,"label-field":"username","value-field":"username",onScroll:C},null,8,["value","options"])]),_:1}),e.value.mtype==0?(m(),q(p,{key:0,span:"24 s:12 m:24",label:"会议内容",path:"",class:"flex-col"},{default:o(()=>[s(a(Se),{ref_key:"scrollbarRef",ref:X,style:{"max-height":"300px"},class:"flex-col w-100%"},{default:o(()=>[(m(!0),$(Me,null,De(e.value.contentArr,(u,de)=>(m(),$("div",{class:"ml-20px",key:u.id},[r("div",ut,[r("div",pt,[r("div",dt,[t[9]||(t[9]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"调试人员",-1)),s(a(te),{clearable:"",value:u.person,"onUpdate:value":j=>u.person=j,status:u.status1,onInput:j=>Q(u),id:"person-"+de,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",ct,[t[10]||(t[10]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"项目名称",-1)),s(a(te),{clearable:"",value:u.proname,"onUpdate:value":j=>u.proname=j,status:u.status2,onInput:j=>ae(u),id:"proname-"+de,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",mt,[t[11]||(t[11]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"工作描述",-1)),s(a(te),{clearable:"",value:u.desc,"onUpdate:value":j=>u.desc=j,onInput:j=>oe(u),status:u.status3,id:"desc-"+de,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value","onInput","status","id"])]),r("div",ft,[t[12]||(t[12]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"遇到的问题",-1)),s(a(te),{clearable:"",value:u.problem,"onUpdate:value":j=>u.problem=j,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value"])])]),r("div",vt,[s(a(x),{class:"mb-10px",text:"",type:"info",onClick:j=>se(u)},{default:o(()=>t[13]||(t[13]=[y("添加")])),_:2,__:[13]},1032,["onClick"]),e.value.contentArr.length>1?(m(),q(a(x),{key:0,text:"",type:"error",onClick:j=>e.value.contentArr.splice(de,1)},{default:o(()=>t[14]||(t[14]=[y("删除")])),_:2,__:[14]},1032,["onClick"])):Y("",!0)])]),s(k,{dashed:""})]))),128))]),_:1},512)]),_:1})):(m(),q(p,{key:1,span:"24 s:12 m:24",label:"会议内容",path:"con2",class:"flex-col"},{default:o(()=>[s(a(te),{clearable:"",value:e.value.con2,"onUpdate:value":t[4]||(t[4]=u=>e.value.con2=u),placeholder:"请输入",type:"textarea",rows:8},null,8,["value"])]),_:1})),s(p,{span:"24 s:24 m:12",label:"附件1:",path:"fl1"},{default:o(()=>[e.value.fl1?(m(),$("div",_t,[r("span",null,f(e.value.fl1.split("?")[1]),1),s(a(x),{text:"",type:"error",onClick:t[5]||(t[5]=u=>e.value.fl1="")},{default:o(()=>t[15]||(t[15]=[y("删除")])),_:1,__:[15]})])):(m(),$("div",yt,[s(W,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>M(u,"fl1")},{default:o(()=>[s(a(x),{loading:i.value>0&&!e.value.fl1},{default:o(()=>[y(f(i.value>0&&!e.value.fl1&&b.value=="fl1"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl1&&b.value=="fl1"?(m(),q(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Y("",!0)]))]),_:1}),s(p,{span:"24 s:24 m:12",label:"附件2:",path:"fl2"},{default:o(()=>[e.value.fl2?(m(),$("div",bt,[r("span",null,f(e.value.fl2.split("?")[1]),1),s(a(x),{text:"",type:"error",onClick:t[6]||(t[6]=u=>e.value.fl2="")},{default:o(()=>t[16]||(t[16]=[y("删除")])),_:1,__:[16]})])):(m(),$("div",gt,[s(W,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>M(u,"fl2")},{default:o(()=>[s(a(x),{loading:i.value>0&&!e.value.fl2},{default:o(()=>[y(f(i.value>0&&!e.value.fl2&&b.value=="fl2"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl2&&b.value=="fl2"?(m(),q(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Y("",!0)]))]),_:1}),s(p,{span:"24 s:24 m:12",label:"附件3:",path:"fl3"},{default:o(()=>[e.value.fl3?(m(),$("div",ht,[r("span",null,f(e.value.fl3.split("?")[1]),1),s(a(x),{text:"",type:"error",onClick:t[7]||(t[7]=u=>e.value.fl3="")},{default:o(()=>t[17]||(t[17]=[y("删除")])),_:1,__:[17]})])):(m(),$("div",xt,[s(W,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>M(u,"fl3")},{default:o(()=>[s(a(x),{loading:i.value>0&&!e.value.fl3},{default:o(()=>[y(f(i.value>0&&!e.value.fl3&&b.value=="fl3"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl3&&b.value=="fl3"?(m(),q(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Y("",!0)]))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),kt=ze(wt,[["__scopeId","data-v-32bf94f2"]]),$t=ye({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:_e(["reset","search"],["update:model"]),setup(_,{emit:E}){var G;const N=E,{formRef:Z,restoreValidation:O}=Ke(),g=(G=be().userInfo)==null?void 0:G.usertype,h=he(_,"model"),L=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],d=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],B=[{label:"生产部周例会",value:4}],S=[{label:"销售周例会",value:5}],F=[...L,...d,...B,...S,{label:"管理层周例会",value:6}],{pageData:e,getData:n,nextPage:P}=Ae(Ue),U=async T=>{const w=T.currentTarget,J=w.scrollTop;w.scrollTop+w.offsetHeight>=w.scrollHeight&&e.data.length<e.total&&(await P(),await ve(),setTimeout(()=>{w.scrollTop=J}))};Xe(async()=>{n({usertypes:g==0||g==4?"0,1,2,3,4,5,6":g==2||g==3?"0,2,3":g==5?"0,5":g==6?"0,6":"0,1"})});const z=async T=>{h.value.dates=T,N("search")},R=async T=>{h.value.creater=T,N("search")};async function C(){await O(),h.value.dates=null,h.value.mtype=null,h.value.creater=null,N("reset")}async function c(){N("search")}return(T,w)=>{const J=Pe,V=je,X=ge,se=at,Q=x,ae=st,oe=xe,v=Ie,i=Ne,b=Te;return m(),q(b,{bordered:!1,size:"small",class:"card-wrapper"},{default:o(()=>[s(i,{ref_key:"formRef",ref:Z,model:h.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:Ye(c,["enter"])},{default:o(()=>[s(v,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:o(()=>[s(V,{span:"24 s:12 m:6",label:"日期",path:"dates"},{default:o(()=>[s(J,{clearable:"","formatted-value":h.value.dates,"onUpdate:formattedValue":[w[0]||(w[0]=M=>h.value.dates=M),z],type:"date","value-format":"yyyy-MM-dd",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(V,{span:"24 s:12 m:6",label:"会议类型",path:"mtype"},{default:o(()=>[s(X,{clearable:"",filterable:"",value:h.value.mtype,"onUpdate:value":[w[1]||(w[1]=M=>h.value.mtype=M),c],placeholder:"请选择",options:a(g)==0||a(g)==4?F:a(g)==2||a(g)==3?L:a(g)==5?d:a(g)==6?B:S},null,8,["value","options"])]),_:1}),s(V,{span:"24 s:12 m:6",label:"创建者",path:"pid"},{default:o(()=>[s(X,{clearable:"",filterable:"",value:h.value.creater,"onUpdate:value":[w[2]||(w[2]=M=>h.value.creater=M),R],placeholder:"请选择","label-field":"username","value-field":"id",options:a(e).data,onScroll:U},null,8,["value","options"])]),_:1}),s(V,{span:"24  s:12 m:6",class:"pr-24px"},{default:o(()=>[s(oe,{class:"w-full"},{default:o(()=>[s(Q,{onClick:C},{icon:o(()=>[s(se,{class:"text-icon"})]),default:o(()=>[y(" "+f(a(le)("common.reset")),1)]),_:1}),s(Q,{type:"primary",ghost:"",onClick:c},{icon:o(()=>[s(ae,{class:"text-icon"})]),default:o(()=>[y(" "+f(a(le)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),Ct={class:"ml-40px font-bold"},Nt={key:0},St={class:"mb-20px ml-40px"},Mt={class:"flex items-center"},Dt={class:"preview-text"},Ot={class:"flex items-center"},Ut={class:"preview-text"},zt={class:"flex items-center"},Tt={class:"preview-text"},At={class:"flex items-center"},It={class:"preview-text"},jt={key:1},Pt={class:"preview-text ml-40px"},Rt={key:2,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},qt={key:3,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},Bt={key:4,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},Ft=ye({__name:"lookModal",props:_e({id:{}},{lookisible:{type:Boolean,default:!1},lookisibleModifiers:{}}),emits:["update:lookisible"],setup(_){var F;const E=he(_,"lookisible");(F=be().userInfo)==null||F.usertype;const Z=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],O=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],H=[{label:"生产部周例会",value:4}],g=[{label:"销售周例会",value:5}],h=[...Z,...O,...H,...g,{label:"管理层周例会",value:6}],L=_;Ce(()=>E.value,async e=>{e&&B()});const d=K({}),B=async()=>{const{data:e}=await Re(L.id);e&&(d.value=e,d.value.mtype==0&&(d.value.contentArr=JSON.parse(e.con2)),d.value.mdbtime=re(1,e.mdbtime))};async function S(e){if(!e)return;const n=e.split("?")[0],P=e.split("?")[1];try{const z=await(await fetch(n,{mode:"cors"})).blob(),R=URL.createObjectURL(z),C=document.createElement("a");C.href=R,C.download=P,C.style.display="none",document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(R)}catch(U){console.error("下载失败:",U)}}return(e,n)=>{const P=ot,U=Oe;return m(),q(U,{show:E.value,"onUpdate:show":n[3]||(n[3]=z=>E.value=z),preset:"card",class:"w-1000px"},{header:o(()=>n[4]||(n[4]=[r("div",null,"详细信息",-1)])),default:o(()=>[s(a(Se),{style:{height:"calc(80vh)","padding-right":"20px"}},{default:o(()=>{var z,R,C;return[n[15]||(n[15]=r("h3",{class:"font-size-16px font-bold mt-2"},"标题",-1)),r("div",Ct,f(d.value.mtopic),1),n[16]||(n[16]=r("h3",{class:"font-size-16px font-bold mt-2"},"会议信息",-1)),s(P,{bordered:!1,"single-line":!1,class:"ml-40px w-90%"},{default:o(()=>{var c;return[r("tbody",null,[r("tr",null,[n[5]||(n[5]=r("th",null,"会议时间",-1)),r("th",null,f(d.value.mdbtime),1)]),r("tr",null,[n[6]||(n[6]=r("th",null,"会议类型",-1)),r("th",null,f((c=h.find(G=>G.value===d.value.mtype))==null?void 0:c.label),1)]),r("tr",null,[n[7]||(n[7]=r("th",null,"参会人员",-1)),r("th",null,f(d.value.musers),1)])])]}),_:1}),n[17]||(n[17]=r("h3",{class:"font-size-16px font-bold mt-2 mb-2"},"会议内容",-1)),d.value.mtype==0?(m(),$("div",Nt,[(m(!0),$(Me,null,De(d.value.contentArr,c=>(m(),$("div",St,[r("div",Mt,[n[8]||(n[8]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"调试人员：",-1)),r("div",Dt,f(c.person),1)]),r("div",Ot,[n[9]||(n[9]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"项目名称：",-1)),r("div",Ut,f(c.proname),1)]),r("div",zt,[n[10]||(n[10]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"工作描述：",-1)),r("div",Tt,f(c.desc),1)]),r("div",At,[n[11]||(n[11]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"遇到的问题：",-1)),r("div",It,f(c.problem),1)])]))),256))])):(m(),$("div",jt,[r("div",Pt,f(d.value.con2),1)])),n[18]||(n[18]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件1：",-1)),d.value.fl1?(m(),$("div",Rt,[y(f((z=d.value.fl1)==null?void 0:z.split("?")[1])+" ",1),s(a(x),{text:"",type:"primary",size:"small",onClick:n[0]||(n[0]=c=>S(d.value.fl1))},{default:o(()=>n[12]||(n[12]=[y("下载")])),_:1,__:[12]})])):Y("",!0),n[19]||(n[19]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件2：",-1)),d.value.fl2?(m(),$("div",qt,[y(f((R=d.value.fl2)==null?void 0:R.split("?")[1])+" ",1),s(a(x),{text:"",type:"primary",size:"small",onClick:n[1]||(n[1]=c=>S(d.value.fl2))},{default:o(()=>n[13]||(n[13]=[y("下载")])),_:1,__:[13]})])):Y("",!0),n[20]||(n[20]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件3：",-1)),d.value.fl3?(m(),$("div",Bt,[y(f((C=d.value.fl3)==null?void 0:C.split("?")[1])+" ",1),s(a(x),{text:"",type:"primary",size:"small",onClick:n[2]||(n[2]=c=>S(d.value.fl3))},{default:o(()=>n[14]||(n[14]=[y("下载")])),_:1,__:[14]})])):Y("",!0)]}),_:1,__:[15,16,17,18,19,20]})]),_:1},8,["show"])}}}),Vt=ze(Ft,[["__scopeId","data-v-919508b6"]]),Et={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function $e(_){return typeof _=="function"||Object.prototype.toString.call(_)==="[object Object]"&&!et(_)}const sl=ye({name:"meetingminutes",__name:"index",setup(_){const E=Ze(),N=be(),Z=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],O=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],H=[{label:"生产部周例会",value:4}],g=[{label:"销售周例会",value:5}],h=[...Z,...O,...H,...g,{label:"管理层周例会",value:6}],{columns:L,columnChecks:d,data:B,getData:S,loading:F,mobilePagination:e,searchParams:n}=tt({showTotal:!0,apiFn:nt,apiParams:{page:1,pageSize:20,limit:20,mtype:void 0,dates:void 0,creater:void 0,_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48,disabled:v=>N.userInfo.id!=v.creater},{key:"mtopic",title:"会议标题",align:"center",width:120},{key:"mtype",title:"会议类型",align:"center",width:120,render:v=>s("span",null,[h[v.mtype].label])},{key:"mdbtime",title:"会议时间",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"operate",title:le("common.operate"),align:"center",width:140,fixed:"right",render:v=>{let i;return s("div",{class:"flex-center gap-8px"},[ne(s(x,{type:"primary",ghost:!0,size:"small",onClick:()=>V(v.id)},{default:()=>[y("详情")]}),[[me("no-auth"),"project:Meeting:select"]]),N.userInfo.id==v.creater&&ne(s(x,{type:"primary",ghost:!0,size:"small",onClick:()=>Q(v.id)},$e(i=le("common.edit"))?i:{default:()=>[i]}),[[me("no-auth"),"project:Meeting:update"]]),N.userInfo.id==v.creater&&s(we,{onPositiveClick:()=>se(v.id)},{default:()=>le("common.confirmDelete"),trigger:()=>{let b;return ne(s(x,{type:"error",ghost:!0,size:"small"},$e(b=le("common.delete"))?b:{default:()=>[b]}),[[me("no-auth"),"project:Meeting:delete"]])}})])}}]}),{drawerVisible:P,operateType:U,editingData:z,handleAdd:R,handleEdit:C,checkedRowKeys:c,onBatchDeleted:G,onDeleted:T}=lt(B,S),w=K(!1),J=K(0),V=v=>{w.value=!0,J.value=v};async function X(){console.log(c.value),ae(c.value.join(","),v=>{G()})}async function se(v){const{data:i,error:b}=await ke(v);b||T()}function Q(v){C(v)}async function ae(v,i){const{data:b,error:M}=await ke(v);if(!M)i&&i(b);else return!1}const oe=()=>{S()};return(v,i)=>{const b=xe,M=Ve,ue=Fe,l=Be,t=Qe,p=Te,A=me("no-auth");return m(),$("div",Et,[s($t,{model:a(n),"onUpdate:model":i[0]||(i[0]=k=>fe(n)?n.value=k:null),onReset:oe,onSearch:a(S)},null,8,["model","onSearch"]),s(p,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:o(()=>[s(b,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:o(()=>i[5]||(i[5]=[r("div",null,"会议纪要",-1)])),_:1,__:[5]})]),"header-extra":o(()=>[s(b,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:o(()=>[ne((m(),q(a(x),{onClick:a(R),size:"small",ghost:"",type:"primary"},{icon:o(()=>[s(M,{class:"text-icon"})]),default:o(()=>[i[6]||(i[6]=y(" "+f("新增")))]),_:1,__:[6]},8,["onClick"])),[[A,"project:Meeting:insert"]]),s(a(we),{onPositiveClick:X},{trigger:o(()=>[ne((m(),q(a(x),{size:"small",ghost:"",type:"error",disabled:a(c).length==0},{icon:o(()=>[s(ue,{class:We(["text-icon",{"animate-spin":a(F)}])},null,8,["class"])]),default:o(()=>[i[7]||(i[7]=y(" "+f("批量删除")))]),_:1,__:[7]},8,["disabled"])),[[A,"project:Meeting:delete"]])]),default:o(()=>[i[8]||(i[8]=y(" 确定要删除选中的会议吗？ "))]),_:1,__:[8]}),s(l,{columns:a(d),"onUpdate:columns":i[1]||(i[1]=k=>fe(d)?d.value=k:null)},null,8,["columns"])]),_:1})]),default:o(()=>[s(t,{"checked-row-keys":a(c),"onUpdate:checkedRowKeys":i[2]||(i[2]=k=>fe(c)?c.value=k:null),columns:a(L),data:a(B),size:"small","flex-height":!a(E).isMobile,loading:a(F),remote:"","row-key":k=>k.id,pagination:a(e),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),s(Vt,{id:J.value,lookisible:w.value,"onUpdate:lookisible":i[3]||(i[3]=k=>w.value=k)},null,8,["id","lookisible"]),s(kt,{visible:a(P),"onUpdate:visible":i[4]||(i[4]=k=>fe(P)?P.value=k:null),onSubmitted:a(S),"operate-type":a(U),"row-data":a(z)},null,8,["visible","onSubmitted","operate-type","row-data"])]),_:1})])}}});export{sl as default};
