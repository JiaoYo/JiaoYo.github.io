import{_ as Be}from"./table-column-setting.vue_vue_type_script_setup_true_lang-BqSXzLBW.js";import{_ as Fe}from"./round-delete-C1xvOo2m.js";import{_ as Oe}from"./round-add-CnBYTu1X.js";import{d as he,aq as _e,p as ke,s as Me,r as ee,q as xe,a as Ae,ar as Ne,a1 as Ve,c as U,o as m,w as t,f as e,b5 as He,F as Se,y as T,h as s,at as Z,A as O,b as z,g as d,e as _,t as c,B as x,N as we,$ as V,b6 as je,bX as Ge,bW as Ee,E as Je,U as Te,L as Ke,bY as We,i as Xe,x as J,az as ge,av as Ye,C as A,bl as Qe,aa as Ze,ab as ce,aC as et}from"./index-BrSW3Qk_.js";import{a as tt,f as ze,b as at,c as Ue,d as lt,e as Ce,g as nt}from"./project-ClKCYf-S.js";import{u as st,a as ot}from"./table-BgZMMP2L.js";import{u as me}from"./usePageData-DxOb3kll.js";import{_ as Pe}from"./Grid-CF6VHH9t.js";import{_ as qe}from"./FormItemGridItem-CtEU2lvz.js";import{N as rt}from"./DatePicker-D5ILBl1K.js";import{N as it}from"./Upload-Do_zf-0j.js";import{_ as ut}from"./round-search-Bt589pab.js";import{_ as dt}from"./round-refresh-DBlHyOAy.js";import{_ as pt,a as ct}from"./DescriptionsItem-DcWxPhJ4.js";import{N as fe}from"./Popconfirm-BS6m75G8.js";import{N as ft}from"./RadioButton-ClrCDq2O.js";import"./Progress-ZAqDftr5.js";import"./utils-BNOftVEY.js";const mt={key:0},gt={key:0},bt={key:0},vt={key:0},yt=he({name:"OperateDrawer",__name:"operate-drawer",props:_e({operateType:{},rowData:{},pid:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:_e(["submitted"],["update:visible"]),setup(B,{emit:te}){const h=te,D=ke(),N=B,l=Me(v());function v(){return{pid:void 0,id:"",debugname:"",docker:void 0,dockcharge:"",dockcontact:"",status:0,notes:"",debugresult:0,dtype:void 0,starttime:null,endtime:null,dbcreater:void 0,startAndTimeRange:void 0,re1:"",re2:"",re3:"",re4:"",fl1:"",fl2:"",fl3:"",fl4:""}}const{pageData:y,getData:R}=me(Ge),H=async()=>{await R({usertypes:"2,3"})},ae=async o=>{const a=o.currentTarget;a.scrollTop+a.offsetHeight>=a.scrollHeight&&y.data.length<y.total&&K()},{pageData:k,getData:G,nextPage:le}=me(tt),ne=async o=>{const a=o.currentTarget;a.scrollTop+a.offsetHeight>=a.scrollHeight&&k.data.length<k.total&&le()},se=async()=>{await G({pid:l.pid})},oe=async o=>{if(l.docker=o,l.docker){const a=k.data.find(f=>f.docker===l.docker);a?(l.dockcharge=a.pname,l.dockcontact=a.pcontact):(l.dockcharge="",l.dockcontact="")}},{pageData:P,getData:re,nextPage:K}=me(Ee),W=async o=>{const a=o.currentTarget;a.scrollTop+a.offsetHeight>=a.scrollHeight&&P.data.length<P.total&&K()},w=async()=>{await re()},g=ee([]),{pageData:S,getData:F,nextPage:M}=me(ze),X=async o=>{const a=o.currentTarget;a.scrollTop+a.offsetHeight>=a.scrollHeight&&S.data.length<S.total&&(M(),g.value=S.data)},Y=async()=>{await F({fuzzy:D.userInfo.pname}),g.value=S.data},ie=async()=>{await F(),g.value=S.data},ue=async o=>{l.pid=o},de=ee(void 0);async function u(){Y(),w(),H(),Object.assign(l,v()),N.operateType==="add"&&(l.pid=Number(N.pid)),N.operateType==="edit"&&N.rowData&&(Object.assign(l,N.rowData),de.value=l.status,l.startAndTimeRange=[N.rowData.starttime,N.rowData.endtime]),se()}const{formRef:E,validate:$,restoreValidation:r}=xe(),n={pid:{type:"number",required:!0,trigger:["blur","change"],message:"请选择"},dtype:{type:"number",required:!0,trigger:["blur","change"],message:"请选择"},dbcreater:{type:"string",required:!0,trigger:["blur","change"],message:"请选择"},debugname:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},docker:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},dockcharge:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},dockcontact:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},status:{type:"number",required:!0,trigger:["blur","change"],message:"请选择"}},j=Ae(()=>({add:"新增待调试业务",edit:"修改待调试业务"})[N.operateType]),I=Ne(B,"visible");Ve(I,()=>{I.value&&(u(),setTimeout(()=>{const o=document.querySelector(".n-scrollbar-content");o==null||o.scrollTo(0,0)},300),r())});async function L({file:o},a){let f=new FormData;f.append("multipartFile",o.file);const{data:i,error:q}=await at(f);q||(l[a]=i)}function pe(){I.value=!1}async function Q(o){if(o)try{const f=await(await fetch(o==null?void 0:o.split("?")[0],{mode:"cors"})).blob(),i=URL.createObjectURL(f),q=document.createElement("a");q.href=i,q.download=o==null?void 0:o.split("?")[1],q.style.display="none",document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(i)}catch(a){console.error("下载失败:",a)}}async function be(){var o;await $(),(o=window.$dialog)==null||o.info({title:"提示",content:"确定提交吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{await ve()}})}async function ve(){var o,a;if(await $(),N.operateType==="edit"){const f=JSON.parse(JSON.stringify(l)),{data:i,error:q}=await Ue([f]);q||(pe(),h("submitted"),(o=window.$message)==null||o.success("修改成功"))}else{const{data:f,error:i}=await lt([{...l}]);i||(pe(),h("submitted"),(a=window.$message)==null||a.success("添加成功"))}}const ye=o=>{var a;l.debugname=(a=P.data.find(f=>f.id==o))==null?void 0:a.tname,l.dtype=o};async function C(o,a){l.startAndTimeRange=o,l.starttime=o==null?void 0:o[0],l.endtime=o==null?void 0:o[1]}return(o,a)=>{const f=qe,i=it,q=Pe,Re=Se,Ie=He,$e=we,Le=je;return m(),U(Le,{show:I.value,"onUpdate:show":a[22]||(a[22]=p=>I.value=p),title:j.value,preset:"card",class:"w-800px"},{footer:t(()=>[e($e,{justify:"end",size:16},{default:t(()=>[e(s(x),{onClick:pe},{default:t(()=>[d(c(s(V)("common.cancel")),1)]),_:1}),e(s(x),{type:"primary",onClick:be},{default:t(()=>[d(c(s(V)("common.confirm")),1)]),_:1})]),_:1})]),default:t(()=>[e(Ie,{class:"pr-20px"},{default:t(()=>[e(Re,{ref_key:"formRef",ref:E,model:l,rules:n,"label-placement":"left","label-width":120},{default:t(()=>[e(q,{responsive:"screen","item-responsive":""},{default:t(()=>[e(f,{span:"24 m:12",label:"项目列表",path:"pid"},{default:t(()=>[e(s(Z),{filterable:"",clearable:"",value:l.pid,"onUpdate:value":[a[0]||(a[0]=p=>l.pid=p),ue],placeholder:"请选择项目","label-field":"proname","value-field":"id",onClear:ie,options:g.value,onScroll:X},null,8,["value","options"])]),_:1}),e(f,{span:"24 m:12",label:"权重",path:"dtype"},{default:t(()=>[e(s(Z),{filterable:"",value:l.dtype,"onUpdate:value":[a[1]||(a[1]=p=>l.dtype=p),ye],tag:"",placeholder:"请选择权重","label-field":"tname","value-field":"id",options:s(P).data,onScroll:W},null,8,["value","options"])]),_:1}),e(f,{span:"24 m:12",label:"业务名称",path:"debugname"},{default:t(()=>[e(s(O),{value:l.debugname,"onUpdate:value":a[2]||(a[2]=p=>l.debugname=p),placeholder:"请输入"},null,8,["value"])]),_:1}),e(f,{span:"24 m:12",label:"调试人",path:"dbcreater"},{default:t(()=>[e(s(Z),{filterable:"",value:l.dbcreater,"onUpdate:value":a[3]||(a[3]=p=>l.dbcreater=p),placeholder:"请选择调试人","label-field":"username","value-field":"id",options:s(y).data,onScroll:ae},null,8,["value","options"])]),_:1}),e(f,{span:"24 m:24",label:"起止时间",path:"startAndTimeRange"},{default:t(()=>[e(s(rt),{clearable:"",value:l.startAndTimeRange,"onUpdate:value":a[4]||(a[4]=p=>l.startAndTimeRange=p),type:"daterange","value-format":"yyyy-MM-dd",style:{width:"100%"},"onUpdate:formattedValue":C},null,8,["value"])]),_:1}),e(f,{span:"24 m:12",label:"对接方",path:"docker"},{default:t(()=>[e(s(Z),{filterable:"",value:l.docker,"onUpdate:value":[a[5]||(a[5]=p=>l.docker=p),oe],clearable:"",tag:"",placeholder:"请选择或输入对接方","label-field":"docker","value-field":"docker",options:s(k).data,onScroll:ne},null,8,["value","options"])]),_:1}),e(f,{span:"24 m:12",label:"对接方负责人",path:"dockcharge"},{default:t(()=>[e(s(O),{value:l.dockcharge,"onUpdate:value":a[6]||(a[6]=p=>l.dockcharge=p),placeholder:"请输入",style:{width:"100%"}},null,8,["value"])]),_:1}),e(f,{span:"24 m:12",label:"联系方式",path:"dockcontact"},{default:t(()=>[e(s(O),{value:l.dockcontact,"onUpdate:value":a[7]||(a[7]=p=>l.dockcontact=p),placeholder:"请输入",style:{width:"100%"}},null,8,["value"])]),_:1}),N.operateType=="edit"?(m(),U(f,{key:0,span:"24 m:12",label:"状态",path:"status"},{default:t(()=>[e(s(Z),{clearable:"",value:l.status,"onUpdate:value":a[8]||(a[8]=p=>l.status=p),placeholder:"请选择",options:s(D).userInfo.usertype==0||s(D).userInfo.usertype==2?[{label:"待调试",value:0},{label:"开始调试",value:1},{label:"完成调试",value:2},{label:"审核完成",value:3}]:[{label:"待调试",value:0},{label:"开始调试",value:1},{label:"完成调试",value:2}]},null,8,["value","options"])]),_:1})):T("",!0),e(f,{span:"24 m:12",label:"备注",path:"notes"},{default:t(()=>[e(s(O),{value:l.notes,"onUpdate:value":a[9]||(a[9]=p=>l.notes=p),placeholder:"请输入"},null,8,["value"])]),_:1}),e(f,{span:"24 m:24",label:"附件1",path:"notes"},{default:t(()=>{var p;return[e(s(O),{value:l.re1,"onUpdate:value":a[10]||(a[10]=b=>l.re1=b),placeholder:"请输入",style:{width:"250px","margin-right":"20px"}},null,8,["value"]),l.fl1?(m(),z("span",mt,[d(c((p=l.fl1)==null?void 0:p.split("?")[1])+" ",1),_("span",{class:"cursor-pointer c-#c92a2a",onClick:a[11]||(a[11]=b=>l.fl1="")},"删除"),_("span",{class:"cursor-pointer c-#1890ff ml-5px inline-block",onClick:a[12]||(a[12]=b=>Q(l.fl1))},"下载")])):(m(),U(i,{key:1,style:{width:"auto"},ref:"uploadRef",action:"#","custom-request":b=>L(b,"fl1"),"show-file-list":!1},{default:t(()=>[e(s(x),{size:"small",ghost:"",type:"primary"},{default:t(()=>a[23]||(a[23]=[d("选择文件")])),_:1,__:[23]})]),_:1},8,["custom-request"]))]}),_:1}),e(f,{span:"24 m:24",label:"附件2",path:"notes"},{default:t(()=>{var p;return[e(s(O),{value:l.re2,"onUpdate:value":a[13]||(a[13]=b=>l.re2=b),placeholder:"请输入",style:{width:"250px","margin-right":"20px"}},null,8,["value"]),l.fl2?(m(),z("span",gt,[d(c((p=l.fl2)==null?void 0:p.split("?")[1])+" ",1),_("span",{class:"cursor-pointer c-#c92a2a",onClick:a[14]||(a[14]=b=>l.fl2="")},"删除"),_("span",{class:"cursor-pointer c-#1890ff ml-5px inline-block",onClick:a[15]||(a[15]=b=>Q(l.fl2))},"下载")])):(m(),U(i,{key:1,style:{width:"auto"},ref:"uploadRef",action:"#","custom-request":b=>L(b,"fl2"),"show-file-list":!1},{default:t(()=>[e(s(x),{size:"small",ghost:"",type:"primary"},{default:t(()=>a[24]||(a[24]=[d("选择文件")])),_:1,__:[24]})]),_:1},8,["custom-request"]))]}),_:1}),e(f,{span:"24 m:24",label:"附件3",path:"notes"},{default:t(()=>{var p;return[e(s(O),{value:l.re3,"onUpdate:value":a[16]||(a[16]=b=>l.re3=b),placeholder:"请输入",style:{width:"250px","margin-right":"20px"}},null,8,["value"]),l.fl3?(m(),z("span",bt,[d(c((p=l.fl3)==null?void 0:p.split("?")[1])+" ",1),_("span",{class:"cursor-pointer c-#c92a2a",onClick:a[17]||(a[17]=b=>l.fl3="")},"删除"),_("span",{class:"cursor-pointer c-#1890ff ml-5px inline-block",onClick:a[18]||(a[18]=b=>Q(l.fl3))},"下载")])):(m(),U(i,{key:1,style:{width:"auto"},ref:"uploadRef",action:"#","custom-request":b=>L(b,"fl3"),"show-file-list":!1},{default:t(()=>[e(s(x),{size:"small",ghost:"",type:"primary"},{default:t(()=>a[25]||(a[25]=[d("选择文件")])),_:1,__:[25]})]),_:1},8,["custom-request"]))]}),_:1}),e(f,{span:"24 m:24",label:"附件4",path:"notes"},{default:t(()=>{var p;return[e(s(O),{value:l.re4,"onUpdate:value":a[19]||(a[19]=b=>l.re4=b),placeholder:"请输入",style:{width:"250px","margin-right":"20px"}},null,8,["value"]),l.fl4?(m(),z("span",vt,[d(c((p=l.fl4)==null?void 0:p.split("?")[1])+" ",1),_("span",{class:"cursor-pointer c-#c92a2a",onClick:a[20]||(a[20]=b=>l.fl4="")},"删除"),_("span",{class:"cursor-pointer c-#1890ff ml-5px inline-block",onClick:a[21]||(a[21]=b=>Q(l.fl4))},"下载")])):(m(),U(i,{key:1,style:{width:"auto"},ref:"uploadRef",action:"#","custom-request":b=>L(b,"fl4"),"show-file-list":!1},{default:t(()=>[e(s(x),{size:"small",ghost:"",type:"primary"},{default:t(()=>a[26]||(a[26]=[d("选择文件")])),_:1,__:[26]})]),_:1},8,["custom-request"]))]}),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}}),_t=he({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:_e(["reset","search","search1","clear"],["update:model"]),setup(B,{emit:te}){const h=te,D=ke(),{formRef:N,restoreValidation:l}=xe(),v=Ne(B,"model"),y=ee([]),{pageData:R,getData:H,nextPage:ae}=me(ze),k=async w=>{const g=w.currentTarget;g.scrollTop+g.offsetHeight>=g.scrollHeight&&R.data.length<R.total&&(ae(),y.value=R.data)},G=async w=>{var g;w?(v.value.pid=w,h("search1"),D.setProjectInfo({pname:(g=y.value.find(S=>S.id==w))==null?void 0:g.proname,pid:w})):h("clear")},le=async w=>{await H({fuzzy:w}),y.value=R.data},ne=async()=>{await H(),y.value=R.data},se=async w=>{v.value.status=w,h("search")},oe=async()=>{v.value.status=null,h("search")};(async()=>{var w,g;await H({fuzzy:D.userInfo.pname}),y.value=R.data,v.value.pid=D.userInfo.pid?D.userInfo.pid:(w=y.value[0])==null?void 0:w.id,D.setProjectInfo({pid:v.value.pid,pname:(g=y.value.find(S=>S.id==v.value.pid))==null?void 0:g.proname}),h("search")})();async function re(){await l(),v.value.fuzzy="",h("reset")}const K=()=>{v.value.fuzzy="",h("search")};async function W(){h("search")}return(w,g)=>{const S=Z,F=qe,M=O,X=dt,Y=x,ie=ut,ue=we,de=Pe,u=Se,E=Te;return m(),U(E,{bordered:!1,size:"small",class:"card-wrapper"},{default:t(()=>[e(u,{ref_key:"formRef",ref:N,model:v.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:Je(W,["enter"])},{default:t(()=>[e(de,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:t(()=>[e(F,{span:"24 s:12 m:6",label:"项目列表",path:"pid"},{default:t(()=>[e(S,{filterable:"",clearable:"",value:v.value.pid,"onUpdate:value":[g[0]||(g[0]=$=>v.value.pid=$),G],placeholder:"请选择项目","label-field":"proname","value-field":"id",onClear:ne,onSearch:le,options:y.value,onScroll:k},null,8,["value","options"])]),_:1}),e(F,{span:"24 s:12 m:6",label:"状态",path:"status"},{default:t(()=>[e(S,{clearable:"",filterable:"",value:v.value.status,"onUpdate:value":[g[1]||(g[1]=$=>v.value.status=$),se],placeholder:"请选择状态",onClear:oe,options:[{label:"待调试",value:0},{label:"开始调试",value:1},{label:"完成调试(待审核)",value:2},{label:"审核完成",value:3}]},null,8,["value"])]),_:1}),e(F,{span:"24 s:12 m:6",label:"业务名称",path:"fuzzy"},{default:t(()=>[e(M,{value:v.value.fuzzy,"onUpdate:value":g[2]||(g[2]=$=>v.value.fuzzy=$),placeholder:"请输入",clearable:"",onClear:K},null,8,["value"])]),_:1}),e(F,{span:"24  s:12 m:6",class:"pr-24px"},{default:t(()=>[e(ue,{class:"w-full"},{default:t(()=>[e(Y,{onClick:re},{icon:t(()=>[e(X,{class:"text-icon"})]),default:t(()=>[d(" "+c(s(V)("common.reset")),1)]),_:1}),e(Y,{type:"primary",ghost:"",onClick:W},{icon:t(()=>[e(ie,{class:"text-icon"})]),default:t(()=>[d(" "+c(s(V)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),ht={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},kt={key:0},wt={key:1},Ct={key:0},Dt={key:1},xt={key:0},Nt={key:1},St={key:0},jt={key:1};function De(B){return typeof B=="function"||Object.prototype.toString.call(B)==="[object Object]"&&!et(B)}const Jt=he({name:"projectmanagement_business",__name:"index",setup(B){const te=Ke(),h=ke(),D=We(),{columns:N,columnChecks:l,data:v,getData:y,loading:R,pagination:H,mobilePagination:ae,searchParams:k}=st({showTotal:!0,immediate:!1,apiFn:nt,apiParams:{page:1,pageSize:20,limit:20,fuzzy:"",status:null,dbcreater:void 0,_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48},{key:"debugname",title:"业务名称",align:"center",width:120},{key:"docker",title:"对接方",align:"center",width:120},{key:"dockcharge",title:"对接方负责人",align:"center",width:120},{key:"dockcontact",title:"联系方式",align:"center",width:120},{key:"status",title:"状态",align:"center",width:120,render(r){return e(ce,{type:r.status==0?"info":r.status==1||r.status==2?"warning":"success"},{default:()=>[r.status==0?"待调试":r.status==1?"开始调试":r.status==2?"完成调试":"审核完成"]})}},{key:"dbusername",title:"调试人",align:"center",width:120},{key:"notes",title:"备注",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dbtime",title:"创建时间",align:"center",width:120},{key:"operate",title:V("common.operate"),align:"center",width:280,fixed:"right",render:r=>{let n;return e("div",{class:"flex-center gap-8px"},[r.status==0&&r.dbcreater==h.userInfo.id&&e(fe,{onPositiveClick:()=>g(r,1)},{default:()=>"确定开始调试吗？",trigger:()=>A(e(x,{type:"success",ghost:!0,size:"small"},{default:()=>["开始"]}),[[J("no-auth"),"project:Debug:update"]])}),r.status==1&&r.dbcreater==h.userInfo.id&&e(fe,{onPositiveClick:()=>g(r,2)},{default:()=>"确定完成调试？",trigger:()=>A(e(x,{type:"success",ghost:!0,size:"small"},{default:()=>["完成"]}),[[J("no-auth"),"project:Debug:update"]])}),r.status==2&&(h.userInfo.usertype==0||h.userInfo.usertype==2)&&e(fe,{onPositiveClick:()=>g(r,3)},{default:()=>"是否确认执行审核操作？",trigger:()=>A(e(x,{type:"warning",ghost:!0,size:"small"},{default:()=>["审核"]}),[[J("no-auth"),"project:Debug:update"]])}),A(e(x,{type:"primary",ghost:!0,size:"small",onClick:()=>$(r)},{default:()=>[d("详情")]}),[[J("no-auth"),"project:Debug:select"]]),A(e(x,{type:"primary",ghost:!0,size:"small",onClick:()=>S(r.id)},De(n=V("common.edit"))?n:{default:()=>[n]}),[[J("no-auth"),"project:Debug:update"]]),e(fe,{onPositiveClick:()=>w(r.id)},{default:()=>V("common.confirmDelete"),trigger:()=>{let j;return A(e(x,{type:"error",ghost:!0,size:"small"},De(j=V("common.delete"))?j:{default:()=>[j]}),[[J("no-auth"),"project:Debug:delete"]])}})])}}]}),{drawerVisible:G,operateType:le,editingData:ne,handleAdd:se,handleEdit:oe,checkedRowKeys:P,onBatchDeleted:re,onDeleted:K}=ot(v,y);Xe(async()=>{});async function W(){console.log(P.value),F(P.value.join(","),r=>{re()})}async function w(r){const{data:n,error:j}=await Ce(r,k.pid);j||K()}const g=async(r,n)=>{var L;const{data:j,error:I}=await Ue([{id:r.id,status:n,pid:r.pid}]);I||((L=window.$message)==null||L.success("操作成功"),y())};function S(r){oe(r)}async function F(r,n){const{data:j,error:I}=await Ce(r,k.pid);if(!I)n&&n(j);else return!1}const M=ee(-1),X=r=>{r>0?(M.value=r,k.dbcreater=JSON.parse(JSON.stringify(r)),y()):(k.dbcreater=void 0,M.value=-1,y())},Y=r=>{y()},ie=()=>{console.log(D.query.prjId,"route.query.prjId"),D.query.prjId&&D.query.debug&&(k.pid=Number(D.query.prjId),X(h.userInfo.id)),D.query.prjId&&!D.query.debug&&(k.pid=Number(D.query.prjId),k.status=2),y()},ue=()=>{y()},de=()=>{v.value=[],H.itemCount=0},u=ee(null),E=ee(!1),$=r=>{u.value=r,E.value=!0};return(r,n)=>{const j=ft,I=Ze,L=we,pe=Oe,Q=Fe,be=Be,ve=Ye,ye=Te,C=ct,o=pt,a=je,f=J("no-auth");return m(),z("div",ht,[e(_t,{model:s(k),"onUpdate:model":n[0]||(n[0]=i=>ge(k)?k.value=i:null),onReset:ue,onSearch:ie,onSearch1:s(y),onClear:de},null,8,["model","onSearch1"]),e(ye,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:t(()=>[e(L,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:t(()=>[n[6]||(n[6]=_("div",null,"待调试业务",-1)),e(I,{size:"small",value:M.value,"onUpdate:value":[n[1]||(n[1]=i=>M.value=i),X],name:"radiobuttongroup1"},{default:t(()=>[e(j,{value:-1,label:"默认"}),e(j,{value:s(h).userInfo.id,label:"我的调试"},null,8,["value"])]),_:1},8,["value"])]),_:1,__:[6]})]),"header-extra":t(()=>[e(L,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:t(()=>[A((m(),U(s(x),{onClick:s(se),size:"small",ghost:"",type:"primary"},{icon:t(()=>[e(pe,{class:"text-icon"})]),default:t(()=>[n[7]||(n[7]=d(" "+c("新增")))]),_:1,__:[7]},8,["onClick"])),[[f,"project:Debug:insert"]]),e(s(fe),{onPositiveClick:W},{trigger:t(()=>[A((m(),U(s(x),{size:"small",ghost:"",type:"error",disabled:s(P).length==0},{icon:t(()=>[e(Q,{class:Qe(["text-icon",{"animate-spin":s(R)}])},null,8,["class"])]),default:t(()=>[n[8]||(n[8]=d(" "+c("批量删除")))]),_:1,__:[8]},8,["disabled"])),[[f,"project:Debug:delete"]])]),default:t(()=>[n[9]||(n[9]=d(" 确定要删除选中的吗？ "))]),_:1,__:[9]}),e(be,{columns:s(l),"onUpdate:columns":n[2]||(n[2]=i=>ge(l)?l.value=i:null)},null,8,["columns"])]),_:1})]),default:t(()=>[e(ve,{"checked-row-keys":s(P),"onUpdate:checkedRowKeys":n[3]||(n[3]=i=>ge(P)?P.value=i:null),columns:s(N),data:s(v),size:"small","flex-height":!s(te).isMobile,loading:s(R),remote:"","row-key":i=>i.id,pagination:s(ae),class:"sm:h-full","onUpdate:filters":Y},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),e(yt,{visible:s(G),"onUpdate:visible":n[4]||(n[4]=i=>ge(G)?G.value=i:null),onSubmitted:s(y),"operate-type":s(le),pid:s(k).pid,"row-data":s(ne)},null,8,["visible","onSubmitted","operate-type","pid","row-data"])]),_:1}),e(a,{show:E.value,"onUpdate:show":n[5]||(n[5]=i=>E.value=i),title:"查看详情",preset:"card",class:"w-1200px"},{default:t(()=>[e(o,{bordered:"","label-placement":"left","label-align":"center",columns:2,"label-style":{width:"160px"}},{default:t(()=>[e(C,null,{label:t(()=>n[10]||(n[10]=[d(" 权重 ")])),default:t(()=>[_("span",null,c(u.value.tname),1)]),_:1}),e(C,null,{label:t(()=>n[11]||(n[11]=[d(" 业务名称 ")])),default:t(()=>[_("span",null,c(u.value.debugname),1)]),_:1}),e(C,null,{label:t(()=>n[12]||(n[12]=[d(" 计划起止时间 ")])),default:t(()=>[_("span",null,c(u.value.starttime)+"--"+c(u.value.endtime),1)]),_:1}),e(C,null,{label:t(()=>n[13]||(n[13]=[d(" 对接方 ")])),default:t(()=>[_("span",null,c(u.value.docker),1)]),_:1}),e(C,null,{label:t(()=>n[14]||(n[14]=[d(" 对接方负责人 ")])),default:t(()=>[_("span",null,c(u.value.dockcharge),1)]),_:1}),e(C,null,{label:t(()=>n[15]||(n[15]=[d(" 联系方式 ")])),default:t(()=>[_("span",null,c(u.value.dockcontact),1)]),_:1}),e(C,null,{label:t(()=>n[16]||(n[16]=[d(" 状态 ")])),default:t(()=>[u.value.status==0?(m(),U(s(ce),{key:0,type:"default"},{default:t(()=>n[17]||(n[17]=[d("未调试")])),_:1,__:[17]})):T("",!0),u.value.status==1?(m(),U(s(ce),{key:1,type:"info"},{default:t(()=>n[18]||(n[18]=[d("开始调试")])),_:1,__:[18]})):T("",!0),u.value.status==2?(m(),U(s(ce),{key:2,type:"success"},{default:t(()=>n[19]||(n[19]=[d("完成调试")])),_:1,__:[19]})):T("",!0),u.value.status==3?(m(),U(s(ce),{key:3,type:"success"},{default:t(()=>n[20]||(n[20]=[d("审核完成")])),_:1,__:[20]})):T("",!0)]),_:1}),e(C,null,{label:t(()=>n[21]||(n[21]=[d(" 备注 ")])),default:t(()=>[_("span",null,c(u.value.notes),1)]),_:1}),e(C,null,{label:t(()=>n[22]||(n[22]=[d(" 调试人 ")])),default:t(()=>[_("span",null,c(u.value.dbusername),1)]),_:1}),e(C,null,{label:t(()=>n[23]||(n[23]=[d(" 调试时间 ")])),default:t(()=>[_("span",null,c(u.value.dbdbtime),1)]),_:1}),e(C,null,{label:t(()=>n[24]||(n[24]=[d(" 审核人 ")])),default:t(()=>[_("span",null,c(u.value.ckcreater),1)]),_:1}),e(C,null,{label:t(()=>n[25]||(n[25]=[d(" 审核时间 ")])),default:t(()=>[_("span",null,c(u.value.ckdbtime),1)]),_:1}),e(C,null,{label:t(()=>n[26]||(n[26]=[d(" 附件1 ")])),default:t(()=>{var i;return[u.value.re1?(m(),z("span",kt,"文件别名"+c(u.value.re1),1)):T("",!0),u.value.fl1?(m(),z("span",wt,c((i=u.value.fl1)==null?void 0:i.split("?")[1]),1)):T("",!0)]}),_:1}),e(C,null,{label:t(()=>n[27]||(n[27]=[d(" 附件2 ")])),default:t(()=>{var i;return[u.value.re2?(m(),z("span",Ct,"文件别名"+c(u.value.re2),1)):T("",!0),u.value.fl2?(m(),z("span",Dt,c((i=u.value.fl2)==null?void 0:i.split("?")[1]),1)):T("",!0)]}),_:1}),e(C,null,{label:t(()=>n[28]||(n[28]=[d(" 附件3 ")])),default:t(()=>{var i;return[u.value.re3?(m(),z("span",xt,"文件别名"+c(u.value.re3),1)):T("",!0),u.value.fl3?(m(),z("span",Nt,c((i=u.value.fl3)==null?void 0:i.split("?")[1]),1)):T("",!0)]}),_:1}),e(C,null,{label:t(()=>n[29]||(n[29]=[d(" 附件4 ")])),default:t(()=>{var i;return[u.value.re4?(m(),z("span",St,"文件别名"+c(u.value.re4),1)):T("",!0),u.value.fl4?(m(),z("span",jt,c((i=u.value.fl4)==null?void 0:i.split("?")[1]),1)):T("",!0)]}),_:1})]),_:1})]),_:1},8,["show"])])}}});export{Jt as default};
