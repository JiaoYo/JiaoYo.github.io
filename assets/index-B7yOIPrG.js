import{_ as k}from"./table-header-operation.vue_vue_type_script_setup_true_lang-DblglBez.js";import{d as w,a4 as y,g as a,aq as b,E as x,o as T,e as D,w as d,i as e,ag as p,ad as v}from"./index-7Q9xZuwa.js";import{u as N,a as R}from"./table-G6_8Abm0.js";import{h as C}from"./scheduleTask-DOPo8pTp.js";import{_ as P}from"./DataTable-n3fP4Loy.js";import"./table-column-setting.vue_vue_type_script_setup_true_lang-D8fMBsYv.js";import"./setting-outlined-V9qGIWHT.js";import"./export-oh2-I3ZA.js";import"./refresh-av0Mcmzj.js";import"./round-delete-BZFRn3Yp.js";import"./round-plus-Cy8c1zzO.js";import"./Upload-CwzIyBrH.js";import"./Progress-DAZ1S5w7.js";import"./Popconfirm-BEMrdOuM.js";import"./Forward-BzUEeUAa.js";const S={class:"min-h-500px flex-col-stretch gap-16px overflow-auto lt-sm:overflow-auto"},oe=w({name:"manage_tasklog",__name:"index",setup(z){const c=y(),{columns:u,columnChecks:i,data:l,getData:r,loading:m,mobilePagination:g,searchParams:B,resetSearchParams:E}=N({apiFn:C,apiParams:{page:1,pageSize:20,limit:20,_t:new Date().getTime()},immediate:!0,columns:()=>[{key:"jobId",title:"任务id",align:"center",width:200,ellipsis:{tooltip:!0}},{key:"beanName",title:"任务名称",align:"center",width:160},{key:"params",title:"参数",align:"center",width:160},{key:"status",title:"任务状态",align:"center",width:160,render:n=>a(x,{justify:"center"},{default:()=>[a(b,{type:n.status==0?"success":"error"},{default:()=>[n.status==0?"成功":"失败"]})]})},{key:"times",title:"耗时(ms)",align:"center",width:100},{key:"sn",title:"网关编号",align:"center",width:200,ellipsis:{tooltip:!0}},{key:"error",title:"失败信息",align:"center",width:160,ellipsis:!0}]}),{drawerVisible:j,operateType:A,editingData:K,handleAdd:O,handleEdit:U,checkedRowKeys:o,onBatchDeleted:V,onDeleted:q,closeDrawer:F}=R(l,r);return(n,s)=>{const _=k,h=P,f=v;return T(),D("div",S,[a(f,{title:"任务日志",bordered:!1,size:"small",class:"sm:flex-1-hidden"},{"header-extra":d(()=>[a(_,{columns:e(i),"onUpdate:columns":s[0]||(s[0]=t=>p(i)?i.value=t:null),"disabled-delete":e(o).length===0,loading:e(m),onRefresh:e(r)},null,8,["columns","disabled-delete","loading","onRefresh"])]),default:d(()=>[a(h,{"checked-row-keys":e(o),"onUpdate:checkedRowKeys":s[1]||(s[1]=t=>p(o)?o.value=t:null),columns:e(u),data:e(l),size:"small","flex-height":!e(c).isMobile,"scroll-x":962,loading:e(m),remote:"","row-key":t=>t.id,pagination:e(g),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"])]),_:1})])}}});export{oe as default};
