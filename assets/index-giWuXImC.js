import{_ as O}from"./export-BdHlkXxq.js";import{d as z,ay as A,aw as B,c as D,o as q,w as s,f as t,M as T,h as o,$ as e,aM as U,bq as j,J as R,B as S,g as w,t as k,a2 as C,aN as $,b as E,aO as F,aD as L,n as y,eA as v,aR as V,aV as W}from"./index-DTejdFLI.js";import{d as G,e as I}from"./system-log-C4fZRRm8.js";import{u as J}from"./table-5sK02S3E.js";import{j as P}from"./business-D1O2jGqr.js";import{_ as H}from"./round-search-CcVdI1HR.js";import{_ as K}from"./round-refresh-CFg-lT0v.js";import{_ as Q}from"./Grid-U7VbogCl.js";import{_ as X}from"./FormItemGridItem-OdWiLkIi.js";const Y=z({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:A(["reset","search"],["update:model"]),setup(p,{emit:b}){const _=b,c=B(p,"model");function g(){_("reset")}function f(){_("search")}return(N,r)=>{const x=U,h=X,a=K,l=S,i=H,m=R,u=Q,d=T,n=C;return q(),D(n,{bordered:!1,size:"small",class:"card-wrapper"},{default:s(()=>[t(d,{model:c.value,"label-placement":"left","label-width":80,"show-feedback":!1},{default:s(()=>[t(u,{responsive:"screen","item-responsive":""},{default:s(()=>[t(h,{span:"24 s:12 m:6",label:o(e)("page.systemlog.option.status"),path:"status",class:"pr-24px"},{default:s(()=>[t(x,{filterable:"",clearable:"",value:c.value.status,"onUpdate:value":[r[0]||(r[0]=M=>c.value.status=M),f],placeholder:o(e)("page.systemlog.option.form.status"),options:o(j)(o(P)),onClear:g},null,8,["value","placeholder","options"])]),_:1},8,["label"]),t(h,{span:"24 s:12 m:6"},{default:s(()=>[t(m,{class:"w-full"},{default:s(()=>[t(l,{onClick:g},{icon:s(()=>[t(a,{class:"text-icon"})]),default:s(()=>[w(" "+k(o(e)("common.reset")),1)]),_:1}),t(l,{type:"primary",ghost:"",onClick:f},{icon:s(()=>[t(i,{class:"text-icon"})]),default:s(()=>[w(" "+k(o(e)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),Z={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function ee(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!W(p)}const ce=z({name:"syslog_optionlog",__name:"index",setup(p){const b=$(),{columns:_,data:c,getData:g,loading:f,pagination:N,searchParams:r,resetSearchParams:x}=J({apiFn:I,apiParams:{page:1,pageSize:20,limit:20,status:null,_t:new Date().getTime()},columns:()=>[{key:"creatorName",title:e("page.systemlog.option.creatorName"),align:"center",width:120,resizable:!0},{key:"operation",title:e("page.systemlog.option.operation"),width:140,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestUri",title:e("page.systemlog.option.requestUri"),width:200,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestMethod",title:e("page.systemlog.option.requestMethod"),width:100,align:"center",resizable:!0},{key:"requestParams",title:e("page.systemlog.option.requestParams"),width:200,align:"center",resizable:!0,render(a){return y(v,{tooltipPlacement:"center",style:{maxWidth:"180px"}},{default:()=>a.requestParams||"",tooltip:()=>y("div",{style:{textAlign:"center",padding:"8px",maxWidth:"600px"}},a.requestParams||"")})}},{key:"requestTime",title:e("page.systemlog.option.requestTime")+"ms",width:100,align:"center",resizable:!0},{key:"status",title:e("page.systemlog.option.status"),width:100,align:"center",render:a=>{a.status==null&&(a.status=0);const l={0:"error",1:"primary"},i=e(P[a.status].label);return t(V,{size:"small",type:l[a.status]},ee(i)?i:{default:()=>[i]})},resizable:!0},{key:"ip",title:e("page.systemlog.option.ip"),width:140,align:"center",resizable:!0},{key:"userAgent",title:e("page.systemlog.option.userAgent"),width:200,align:"center",render(a){return y(v,{tooltipPlacement:"center",style:{maxWidth:"180px"}},{default:()=>a.userAgent||"",tooltip:()=>y("div",{style:{textAlign:"center",padding:"8px",maxWidth:"600px"}},a.userAgent||"")})},resizable:!0},{key:"createDate",title:e("page.systemlog.option.createDate"),width:200,align:"center"}]}),h=async()=>{const{data:a,error:l}=await G(r);if(!l){let i=a,m=new Blob([i],{type:"application/vnd.ms-excel"}),u=new Date().getTime()+".xls",d=window.webkitURL.createObjectURL(m),n=document.createElement("a");n.href=d,n.download=u,document.body.appendChild(n),n.click(),n.remove()}};return(a,l)=>{const i=O,m=S,u=L,d=C;return q(),E("div",Z,[t(Y,{model:o(r),"onUpdate:model":l[0]||(l[0]=n=>F(r)?r.value=n:null),onReset:o(x),onSearch:o(g)},null,8,["model","onReset","onSearch"]),t(d,{title:o(e)("page.systemlog.option.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":s(()=>[t(m,{type:"info",size:"small",ghost:"",onClick:h},{icon:s(()=>[t(i,{class:"text-icon"})]),default:s(()=>[w(" "+k(o(e)("common.export")),1)]),_:1})]),default:s(()=>[t(u,{columns:o(_),data:o(c),size:"small","flex-height":!o(b).isMobile,"scroll-x":"",loading:o(f),remote:"","row-key":n=>n.id,pagination:o(N),class:"sm:h-full"},null,8,["columns","data","flex-height","loading","row-key","pagination"])]),_:1},8,["title"])])}}});export{ce as default};
