import{_ as Be}from"./table-column-setting.vue_vue_type_script_setup_true_lang-BlVNmerJ.js";import{_ as Fe}from"./round-delete-D-_gcuU9.js";import{_ as Ve}from"./round-add-xlQYjvjV.js";import{aW as pe,d as ye,av as _e,ax as he,z as ge,at as Se,s as K,cv as me,aJ as Le,c as P,o as f,w as o,f as s,M as Ce,h as a,H as te,au as be,a3 as Ne,b as S,aO as Me,a_ as De,e as r,t as v,B as b,g as _,G as Q,az as Ee,aA as He,J as xe,a4 as Oe,aS as ze,aE as ve,aR as ue,aG as Je,a6 as Ge,W as Te,A as Ke,i as We,L as Qe,$ as se,a2 as Ue,aI as Xe,F as ie,aK as fe,ay as Ye,I as le,aL as Ze,aQ as et}from"./index-01hyoC1y.js";import{u as tt,a as lt}from"./table-BMW6PgLk.js";import{u as Ie}from"./usePageData-CuJtYE7O.js";import{_ as Ae}from"./Grid-PO4pV7Qi.js";import{_ as je}from"./FormItemGridItem-Ddu3CU7K.js";import{_ as Re}from"./DatePicker-Dmv5Ctw7.js";import{_ as st}from"./round-search-CLmP8aC9.js";import{_ as at}from"./round-refresh-CVCEexzc.js";import{N as ot}from"./Table-CWATVshX.js";import{N as we}from"./Popconfirm-Lve2YCRm.js";function nt(y){return pe({url:"/projectMeeting/getPage.do",method:"get",params:y})}function Pe(y){return pe({url:"/projectMeeting/getById.do",method:"get",params:{id:y}})}function rt(y){return pe({url:"/projectMeeting/insert.do",method:"post",data:y})}function it(y){return pe({url:"/projectMeeting/update.do",method:"put",data:y})}function ke(y){return pe({url:"/projectMeeting/delete.do",method:"delete",params:{arrIds:y}})}const ut={class:"flex pr-20px"},pt={class:"flex-1"},dt={class:"flex mb-10px"},ct={class:"flex mb-10px"},mt={class:"flex mb-10px"},ft={class:"flex mb-10px"},vt={class:"flex-col ml-20px justify-center"},_t={key:0,class:""},yt={key:1,class:"flex items-center w-300px"},gt={key:0,class:""},bt={key:1,class:"flex items-center w-300px"},ht={key:0,class:""},xt={key:1,class:"flex items-center w-300px"},wt=ye({__name:"meetingModal",props:_e({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:_e(["submitted"],["update:visible"]),setup(y,{emit:L}){var Z;const C=he(y,"visible"),O=(Z=ge().userInfo)==null?void 0:Z.usertype,q=y,h=L,x=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],E=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],c=[{label:"生产部周例会",value:4}],B=[{label:"销售周例会",value:5}],N=[...x,...E,...c,...B,{label:"管理层周例会",value:6}];Se(()=>C.value,async t=>{t&&w()});const F=K(null),e=K({id:void 0,con1:"",mdbtime:void 0,mtype:0,musers:[],mtopic:"",contentArr:[{id:me(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}),n={con2:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtopic:{type:"string",required:!0,message:"请输入",trigger:"blur"},mdbtime:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtype:{type:"number",required:!0,message:"请输入",trigger:"blur"},musers:{type:"array",required:!0,message:"请输入",trigger:"blur"}},A=()=>{const t=new Date;t.setHours(17),t.setMinutes(30),t.setSeconds(0);const l=d=>d<10?"0"+d:d;return`${t.getFullYear()}-${l(t.getMonth()+1)}-${l(t.getDate())} ${l(t.getHours())}:${l(t.getMinutes())}:${l(t.getSeconds())}`},{pageData:M,getData:z,nextPage:j}=Ie(ze),$=async t=>{const l=t.currentTarget,d=l.scrollTop;l.scrollTop+l.offsetHeight>=l.scrollHeight&&M.data.length<M.total&&(await j(),await ve(),setTimeout(()=>{l.scrollTop=d}))},m=async t=>{await z({usertypes:t,page:1})},H=async()=>{var l;const{data:t}=await Pe(q.rowData.id);t&&(e.value=t,e.value.mtype==0&&(e.value.contentArr=JSON.parse(t.con2)),e.value.mdbtime=ue(1,t.mdbtime),e.value.musers=(l=t.musers.replaceAll("、",","))==null?void 0:l.split(","))};async function T(t){await ve();const l=document.getElementById(t);if(l){l.scrollIntoView({behavior:"smooth",block:"center"});const d=l.querySelector("input, textarea");d==null||d.focus()}}const w=async()=>{m("0,2,3"),q.operateType=="add"?e.value={id:void 0,con1:"",mdbtime:A(),mtype:0,musers:[],mtopic:"",contentArr:[{id:me(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:""}:H()},J=Le.debounce(async()=>{var l,d,R,G,k,ee,de;await((l=F.value)==null?void 0:l.validate());let t=JSON.parse(JSON.stringify(e.value));if(e.value.mtype==0){for(let U=0;U<e.value.contentArr.length;U++){const D=e.value.contentArr[U];if(D.status1=D.person?"":"error",D.status2=D.proname?"":"error",D.status3=D.desc?"":"error",!D.person)return T("person-"+U),(d=window.$message)==null?void 0:d.error("请填写完整的调试人员");if(!D.proname)return T("proname-"+U),(R=window.$message)==null?void 0:R.error("请填写完整的项目名称");if(!D.desc)return T("desc-"+U),(G=window.$message)==null?void 0:G.error("请填写完整的工作描述")}t.con2=JSON.stringify(t.contentArr),delete t.contentArr}if(t.con1="",t.con3="",t.musers=(k=t.musers)==null?void 0:k.join("、"),q.operateType=="edit"){const{data:U,error:D}=await it([t]);U&&((ee=window.$message)==null||ee.success("编辑成功"),V(),h("submitted"))}else{t.id=void 0;const{data:U,error:D}=await rt([t]);U&&((de=window.$message)==null||de.success("新增成功"),V(),h("submitted"))}},1e3,{leading:!0,trailing:!1}),V=()=>{C.value=!1,e.value={id:void 0,con1:"",mdbtime:void 0,mtype:0,musers:[],mtopic:"",contentArr:[{id:me(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}},W=K(),ae=t=>{var l;if(t.status1=t.person?"":"error",t.status2=t.proname?"":"error",t.status3=t.desc?"":"error",t.status1=="error"||t.status2=="error"||t.status3=="error")return(l=window.$message)==null?void 0:l.warning("请填写完整的信息，在进行添加");e.value.contentArr.push({id:me(),person:"",proname:"",desc:"",problem:e.value.contentArr[e.value.contentArr.length-1].problem,status1:"",status2:"",status3:""}),ve(()=>{var d;(d=W.value)==null||d.scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:"smooth"})})},Y=t=>{t.status1=t.person?"":"error"},oe=t=>{t.status2=t.proname?"":"error"},ne=t=>{t.status3=t.desc?"":"error"},re=t=>{var l;if(t==0)(((l=e.value.contentArr)==null?void 0:l.length)==0||!Object.keys(e.value).includes("contentArr"))&&(e.value.contentArr=[{person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}]);else{let d=function(R){if(!R)return!1;try{return JSON.parse(R),!0}catch{return!1}};e.value.con2=d(e.value.con2)?"":e.value.con2}(t==0||t==1)&&(m("0,2,3"),e.value.mdbtime=t==0?ue(0,new Date)+" 17:30:00":ue(0,new Date)+" 08:30:00"),(t==2||t==3)&&(m("0,5"),e.value.mdbtime=ue(0,new Date)+" 09:00:00"),t==4&&m("0,6"),t==5&&m("0,1"),t==6&&m("0,4"),e.value.musers=[]},i=K(0),p=K("");async function g({file:t},l){p.value=l;const d=await Je(t.file,t.name,"",R=>{i.value=R});d&&(l=="fl1"?e.value.fl1=d:l=="fl2"?e.value.fl2=d:l=="fl3"&&(e.value.fl3=d),i.value=0)}return(t,l)=>{const d=je,R=Re,G=Ge,k=Ee,ee=He,de=Ae,U=Ce,D=xe,qe=Oe;return f(),P(qe,{show:C.value,"onUpdate:show":l[8]||(l[8]=u=>C.value=u),title:q.operateType==="add"?"新增会议纪要":q.operateType==="edit"?"编辑会议纪要":"新增会议纪要（复制）",preset:"card",class:"w-900px","mask-closable":!1,draggable:!0},{footer:o(()=>[s(D,{justify:"end"},{default:o(()=>[s(a(b),{size:"small",class:"mt-16px",onClick:V},{default:o(()=>[_(v(t.$t("common.cancel")),1)]),_:1}),s(a(b),{type:"primary",size:"small",class:"mt-16px",onClick:a(J)},{default:o(()=>[_(v(t.$t("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),default:o(()=>[s(U,{ref_key:"formRef",ref:F,model:e.value,rules:n,"label-placement":"left"},{default:o(()=>[s(de,{responsive:"screen","item-responsive":"","x-gap":"15"},{default:o(()=>[s(d,{span:"24 s:24 m:24",label:"会议标题",path:"mtopic"},{default:o(()=>[s(a(te),{value:e.value.mtopic,"onUpdate:value":l[0]||(l[0]=u=>e.value.mtopic=u),placeholder:"请输入会议标题"},null,8,["value"])]),_:1}),s(d,{span:"24 s:12 m:12",label:"会议类型",path:"mtype"},{default:o(()=>[s(a(be),{clearable:"",value:e.value.mtype,"onUpdate:value":[l[1]||(l[1]=u=>e.value.mtype=u),re],options:a(O)==0||a(O)==4?N:a(O)==2||a(O)==3?x:a(O)==5?E:a(O)==6?c:B,placeholder:"请选择会议类型"},null,8,["value","options"])]),_:1}),s(d,{span:"24 s:12 m:12",label:"会议时间",path:"mdbtime"},{default:o(()=>[s(R,{"formatted-value":e.value.mdbtime,"onUpdate:formattedValue":l[2]||(l[2]=u=>e.value.mdbtime=u),"default-time":"17:30:00",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(d,{span:"24 s:12 m:24",label:"参会人员",path:"musers"},{default:o(()=>[s(a(be),{clearable:"",multiple:"",filterable:"",value:e.value.musers,"onUpdate:value":l[3]||(l[3]=u=>e.value.musers=u),placeholder:"请选择",options:a(M).data,"label-field":"username","value-field":"username",onScroll:$},null,8,["value","options"])]),_:1}),e.value.mtype==0?(f(),P(d,{key:0,span:"24 s:12 m:24",label:"会议内容",path:"",class:"flex-col"},{default:o(()=>[s(a(Ne),{ref_key:"scrollbarRef",ref:W,style:{"max-height":"300px"},class:"flex-col w-100%"},{default:o(()=>[(f(!0),S(Me,null,De(e.value.contentArr,(u,ce)=>(f(),S("div",{class:"ml-20px",key:u.id},[r("div",ut,[r("div",pt,[r("div",dt,[l[9]||(l[9]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"调试人员",-1)),s(a(te),{clearable:"",value:u.person,"onUpdate:value":I=>u.person=I,status:u.status1,onInput:I=>Y(u),id:"person-"+ce,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",ct,[l[10]||(l[10]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"项目名称",-1)),s(a(te),{clearable:"",value:u.proname,"onUpdate:value":I=>u.proname=I,status:u.status2,onInput:I=>oe(u),id:"proname-"+ce,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",mt,[l[11]||(l[11]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"工作描述",-1)),s(a(te),{clearable:"",value:u.desc,"onUpdate:value":I=>u.desc=I,onInput:I=>ne(u),status:u.status3,id:"desc-"+ce,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value","onInput","status","id"])]),r("div",ft,[l[12]||(l[12]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"遇到的问题",-1)),s(a(te),{clearable:"",value:u.problem,"onUpdate:value":I=>u.problem=I,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value"])])]),r("div",vt,[s(a(b),{class:"mb-10px",text:"",type:"info",onClick:I=>ae(u)},{default:o(()=>l[13]||(l[13]=[_("添加")])),_:2,__:[13]},1032,["onClick"]),e.value.contentArr.length>1?(f(),P(a(b),{key:0,text:"",type:"error",onClick:I=>e.value.contentArr.splice(ce,1)},{default:o(()=>l[14]||(l[14]=[_("删除")])),_:2,__:[14]},1032,["onClick"])):Q("",!0)])]),s(G,{dashed:""})]))),128))]),_:1},512)]),_:1})):(f(),P(d,{key:1,span:"24 s:12 m:24",label:"会议内容",path:"con2",class:"flex-col"},{default:o(()=>[s(a(te),{clearable:"",value:e.value.con2,"onUpdate:value":l[4]||(l[4]=u=>e.value.con2=u),placeholder:"请输入",type:"textarea",rows:8},null,8,["value"])]),_:1})),s(d,{span:"24 s:24 m:12",label:"附件1:",path:"fl1"},{default:o(()=>[e.value.fl1?(f(),S("div",_t,[r("span",null,v(e.value.fl1.split("?")[1]),1),s(a(b),{text:"",type:"error",onClick:l[5]||(l[5]=u=>e.value.fl1="")},{default:o(()=>l[15]||(l[15]=[_("删除")])),_:1,__:[15]})])):(f(),S("div",yt,[s(k,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>g(u,"fl1")},{default:o(()=>[s(a(b),{loading:i.value>0&&!e.value.fl1},{default:o(()=>[_(v(i.value>0&&!e.value.fl1&&p.value=="fl1"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl1&&p.value=="fl1"?(f(),P(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Q("",!0)]))]),_:1}),s(d,{span:"24 s:24 m:12",label:"附件2:",path:"fl2"},{default:o(()=>[e.value.fl2?(f(),S("div",gt,[r("span",null,v(e.value.fl2.split("?")[1]),1),s(a(b),{text:"",type:"error",onClick:l[6]||(l[6]=u=>e.value.fl2="")},{default:o(()=>l[16]||(l[16]=[_("删除")])),_:1,__:[16]})])):(f(),S("div",bt,[s(k,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>g(u,"fl2")},{default:o(()=>[s(a(b),{loading:i.value>0&&!e.value.fl2},{default:o(()=>[_(v(i.value>0&&!e.value.fl2&&p.value=="fl2"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl2&&p.value=="fl2"?(f(),P(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Q("",!0)]))]),_:1}),s(d,{span:"24 s:24 m:12",label:"附件3:",path:"fl3"},{default:o(()=>[e.value.fl3?(f(),S("div",ht,[r("span",null,v(e.value.fl3.split("?")[1]),1),s(a(b),{text:"",type:"error",onClick:l[7]||(l[7]=u=>e.value.fl3="")},{default:o(()=>l[17]||(l[17]=[_("删除")])),_:1,__:[17]})])):(f(),S("div",xt,[s(k,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>g(u,"fl3")},{default:o(()=>[s(a(b),{loading:i.value>0&&!e.value.fl3},{default:o(()=>[_(v(i.value>0&&!e.value.fl3&&p.value=="fl3"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl3&&p.value=="fl3"?(f(),P(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Q("",!0)]))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),kt=Te(wt,[["__scopeId","data-v-b3202950"]]),$t=ye({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:_e(["reset","search"],["update:model"]),setup(y,{emit:L}){var H;const C=L,{formRef:X,restoreValidation:O}=Ke(),h=(H=ge().userInfo)==null?void 0:H.usertype,x=he(y,"model"),E=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],c=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],B=[{label:"生产部周例会",value:4}],N=[{label:"销售周例会",value:5}],F=[...E,...c,...B,...N,{label:"管理层周例会",value:6}],{pageData:e,getData:n,nextPage:A}=Ie(ze),M=async T=>{const w=T.currentTarget,J=w.scrollTop;w.scrollTop+w.offsetHeight>=w.scrollHeight&&e.data.length<e.total&&(await A(),await ve(),setTimeout(()=>{w.scrollTop=J}))};We(async()=>{n({usertypes:h==0||h==4?"0,1,2,3,4,5,6":h==2||h==3?"0,2,3":h==5?"0,5":h==6?"0,6":"0,1"})});const z=async T=>{x.value.dates=T,C("search")},j=async T=>{x.value.creater=T,C("search")};async function $(){await O(),x.value.dates=null,x.value.mtype=null,x.value.creater=null,C("reset")}async function m(){C("search")}return(T,w)=>{const J=Re,V=je,W=be,ae=at,Y=b,oe=st,ne=xe,re=Ae,i=Ce,p=Ue;return f(),P(p,{bordered:!1,size:"small",class:"card-wrapper"},{default:o(()=>[s(i,{ref_key:"formRef",ref:X,model:x.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:Qe(m,["enter"])},{default:o(()=>[s(re,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:o(()=>[s(V,{span:"24 s:12 m:6",label:"日期",path:"dates"},{default:o(()=>[s(J,{clearable:"","formatted-value":x.value.dates,"onUpdate:formattedValue":[w[0]||(w[0]=g=>x.value.dates=g),z],type:"date","value-format":"yyyy-MM-dd",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(V,{span:"24 s:12 m:6",label:"会议类型",path:"mtype"},{default:o(()=>[s(W,{clearable:"",filterable:"",value:x.value.mtype,"onUpdate:value":[w[1]||(w[1]=g=>x.value.mtype=g),m],placeholder:"请选择",options:a(h)==0||a(h)==4?F:a(h)==2||a(h)==3?E:a(h)==5?c:a(h)==6?B:N},null,8,["value","options"])]),_:1}),s(V,{span:"24 s:12 m:6",label:"创建者",path:"pid"},{default:o(()=>[s(W,{clearable:"",filterable:"",value:x.value.creater,"onUpdate:value":[w[2]||(w[2]=g=>x.value.creater=g),j],placeholder:"请选择","label-field":"username","value-field":"id",options:a(e).data,onScroll:M},null,8,["value","options"])]),_:1}),s(V,{span:"24  s:12 m:6",class:"pr-24px"},{default:o(()=>[s(ne,{class:"w-full"},{default:o(()=>[s(Y,{onClick:$},{icon:o(()=>[s(ae,{class:"text-icon"})]),default:o(()=>[_(" "+v(a(se)("common.reset")),1)]),_:1}),s(Y,{type:"primary",ghost:"",onClick:m},{icon:o(()=>[s(oe,{class:"text-icon"})]),default:o(()=>[_(" "+v(a(se)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),St={class:"ml-40px font-bold"},Ct={key:0},Nt={class:"mb-20px ml-40px"},Mt={class:"flex items-center"},Dt={class:"preview-text"},Ot={class:"flex items-center"},zt={class:"preview-text"},Tt={class:"flex"},Ut={class:"preview-text"},It={class:"flex"},At={class:"preview-text"},jt={key:1},Rt={class:"preview-text ml-40px"},Pt={key:2,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},qt={key:3,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},Bt={key:4,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},Ft=ye({__name:"lookModal",props:_e({id:{}},{lookisible:{type:Boolean,default:!1},lookisibleModifiers:{}}),emits:["update:lookisible"],setup(y){var F;const L=he(y,"lookisible");(F=ge().userInfo)==null||F.usertype;const X=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],O=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],q=[{label:"生产部周例会",value:4}],h=[{label:"销售周例会",value:5}],x=[...X,...O,...q,...h,{label:"管理层周例会",value:6}],E=y;Se(()=>L.value,async e=>{e&&B()});const c=K({}),B=async()=>{const{data:e}=await Pe(E.id);e&&(c.value=e,c.value.mtype==0&&(c.value.contentArr=JSON.parse(e.con2)),c.value.mdbtime=ue(1,e.mdbtime))};async function N(e){if(!e)return;const n=e.split("?")[0],A=e.split("?")[1];try{const z=await(await fetch(n,{mode:"cors"})).blob(),j=URL.createObjectURL(z),$=document.createElement("a");$.href=j,$.download=A,$.style.display="none",document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(j)}catch(M){console.error("下载失败:",M)}}return(e,n)=>{const A=ot,M=Oe;return f(),P(M,{show:L.value,"onUpdate:show":n[3]||(n[3]=z=>L.value=z),preset:"card",class:"w-1000px"},{header:o(()=>n[4]||(n[4]=[r("div",null,"详细信息",-1)])),default:o(()=>[s(a(Ne),{style:{height:"calc(80vh)","padding-right":"20px"}},{default:o(()=>{var z,j,$;return[n[15]||(n[15]=r("h3",{class:"font-size-16px font-bold mt-2"},"标题",-1)),r("div",St,v(c.value.mtopic),1),n[16]||(n[16]=r("h3",{class:"font-size-16px font-bold mt-2"},"会议信息",-1)),s(A,{bordered:!1,"single-line":!1,class:"ml-40px w-90%"},{default:o(()=>{var m;return[r("tbody",null,[r("tr",null,[n[5]||(n[5]=r("th",null,"会议时间",-1)),r("th",null,v(c.value.mdbtime),1)]),r("tr",null,[n[6]||(n[6]=r("th",null,"会议类型",-1)),r("th",null,v((m=x.find(H=>H.value===c.value.mtype))==null?void 0:m.label),1)]),r("tr",null,[n[7]||(n[7]=r("th",null,"参会人员",-1)),r("th",null,v(c.value.musers),1)])])]}),_:1}),n[17]||(n[17]=r("h3",{class:"font-size-16px font-bold mt-2 mb-2"},"会议内容",-1)),c.value.mtype==0?(f(),S("div",Ct,[(f(!0),S(Me,null,De(c.value.contentArr,m=>(f(),S("div",Nt,[r("div",Mt,[n[8]||(n[8]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"调试人员：",-1)),r("div",Dt,v(m.person),1)]),r("div",Ot,[n[9]||(n[9]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"项目名称：",-1)),r("div",zt,v(m.proname),1)]),r("div",Tt,[n[10]||(n[10]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"工作描述：",-1)),r("div",Ut,v(m.desc),1)]),r("div",It,[n[11]||(n[11]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"遇到的问题：",-1)),r("div",At,v(m.problem),1)])]))),256))])):(f(),S("div",jt,[r("div",Rt,v(c.value.con2),1)])),n[18]||(n[18]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件1：",-1)),c.value.fl1?(f(),S("div",Pt,[_(v((z=c.value.fl1)==null?void 0:z.split("?")[1])+" ",1),s(a(b),{text:"",type:"primary",size:"small",onClick:n[0]||(n[0]=m=>N(c.value.fl1))},{default:o(()=>n[12]||(n[12]=[_("下载")])),_:1,__:[12]})])):Q("",!0),n[19]||(n[19]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件2：",-1)),c.value.fl2?(f(),S("div",qt,[_(v((j=c.value.fl2)==null?void 0:j.split("?")[1])+" ",1),s(a(b),{text:"",type:"primary",size:"small",onClick:n[1]||(n[1]=m=>N(c.value.fl2))},{default:o(()=>n[13]||(n[13]=[_("下载")])),_:1,__:[13]})])):Q("",!0),n[20]||(n[20]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件3：",-1)),c.value.fl3?(f(),S("div",Bt,[_(v(($=c.value.fl3)==null?void 0:$.split("?")[1])+" ",1),s(a(b),{text:"",type:"primary",size:"small",onClick:n[2]||(n[2]=m=>N(c.value.fl3))},{default:o(()=>n[14]||(n[14]=[_("下载")])),_:1,__:[14]})])):Q("",!0)]}),_:1,__:[15,16,17,18,19,20]})]),_:1},8,["show"])}}}),Vt=Te(Ft,[["__scopeId","data-v-18001e28"]]),Lt={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function $e(y){return typeof y=="function"||Object.prototype.toString.call(y)==="[object Object]"&&!et(y)}const sl=ye({name:"meetingminutes",__name:"index",setup(y){const L=Xe(),C=ge(),X=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],O=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],q=[{label:"生产部周例会",value:4}],h=[{label:"销售周例会",value:5}],x=[...X,...O,...q,...h,{label:"管理层周例会",value:6}],{columns:E,columnChecks:c,data:B,getData:N,loading:F,mobilePagination:e,searchParams:n}=tt({showTotal:!0,apiFn:nt,apiParams:{page:1,pageSize:20,limit:20,mtype:void 0,dates:void 0,creater:void 0,_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48,disabled:i=>C.userInfo.id!=i.creater},{key:"mtopic",title:"会议标题",align:"center",width:120},{key:"mtype",title:"会议类型",align:"center",width:120,render:i=>s("span",null,[x[i.mtype].label])},{key:"mdbtime",title:"会议时间",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dates",title:"创建日期",align:"center",width:120},{key:"operate",title:se("common.operate"),align:"center",width:140,fixed:"right",render:i=>{let p;return s("div",{class:"flex-center gap-8px"},[le(s(b,{type:"primary",ghost:!0,size:"small",onClick:()=>V(i.id)},{default:()=>[_("详情")]}),[[ie("no-auth"),"project:Meeting:select"]]),C.userInfo.id==i.creater&&le(s(b,{type:"success",ghost:!0,size:"small",onClick:()=>ne(i)},{default:()=>[_("复制")]}),[[ie("no-auth"),"project:Meeting:insert"]]),C.userInfo.id==i.creater&&le(s(b,{type:"primary",ghost:!0,size:"small",onClick:()=>Y(i.id)},$e(p=se("common.edit"))?p:{default:()=>[p]}),[[ie("no-auth"),"project:Meeting:update"]]),C.userInfo.id==i.creater&&s(we,{onPositiveClick:()=>ae(i.id)},{default:()=>se("common.confirmDelete"),trigger:()=>{let g;return le(s(b,{type:"error",ghost:!0,size:"small"},$e(g=se("common.delete"))?g:{default:()=>[g]}),[[ie("no-auth"),"project:Meeting:delete"]])}})])}}]}),{drawerVisible:A,operateType:M,editingData:z,handleAdd:j,handleEdit:$,checkedRowKeys:m,onBatchDeleted:H,onDeleted:T}=lt(B,N),w=K(!1),J=K(0),V=i=>{w.value=!0,J.value=i};async function W(){console.log(m.value),oe(m.value.join(","),i=>{H()})}async function ae(i){const{data:p,error:g}=await ke(i);g||T()}function Y(i){$(i)}async function oe(i,p){const{data:g,error:Z}=await ke(i);if(!Z)p&&p(g);else return!1}const ne=async i=>{$(i.id),M.value="copy"},re=()=>{N()};return(i,p)=>{const g=xe,Z=Ve,t=Fe,l=Be,d=Ye,R=Ue,G=ie("no-auth");return f(),S("div",Lt,[s($t,{model:a(n),"onUpdate:model":p[0]||(p[0]=k=>fe(n)?n.value=k:null),onReset:re,onSearch:a(N)},null,8,["model","onSearch"]),s(R,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:o(()=>[s(g,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:o(()=>p[5]||(p[5]=[r("div",null,"会议纪要",-1)])),_:1,__:[5]})]),"header-extra":o(()=>[s(g,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:o(()=>[le((f(),P(a(b),{onClick:a(j),size:"small",ghost:"",type:"primary"},{icon:o(()=>[s(Z,{class:"text-icon"})]),default:o(()=>[p[6]||(p[6]=_(" "+v("新增")))]),_:1,__:[6]},8,["onClick"])),[[G,"project:Meeting:insert"]]),s(a(we),{onPositiveClick:W},{trigger:o(()=>[le((f(),P(a(b),{size:"small",ghost:"",type:"error",disabled:a(m).length==0},{icon:o(()=>[s(t,{class:Ze(["text-icon",{"animate-spin":a(F)}])},null,8,["class"])]),default:o(()=>[p[7]||(p[7]=_(" "+v("批量删除")))]),_:1,__:[7]},8,["disabled"])),[[G,"project:Meeting:delete"]])]),default:o(()=>[p[8]||(p[8]=_(" 确定要删除选中的会议吗？ "))]),_:1,__:[8]}),s(l,{columns:a(c),"onUpdate:columns":p[1]||(p[1]=k=>fe(c)?c.value=k:null)},null,8,["columns"])]),_:1})]),default:o(()=>[s(d,{"checked-row-keys":a(m),"onUpdate:checkedRowKeys":p[2]||(p[2]=k=>fe(m)?m.value=k:null),columns:a(E),data:a(B),size:"small","flex-height":!a(L).isMobile,loading:a(F),remote:"","row-key":k=>k.id,pagination:a(e),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),s(Vt,{id:J.value,lookisible:w.value,"onUpdate:lookisible":p[3]||(p[3]=k=>w.value=k)},null,8,["id","lookisible"]),s(kt,{visible:a(A),"onUpdate:visible":p[4]||(p[4]=k=>fe(A)?A.value=k:null),onSubmitted:a(N),"operate-type":a(M),"row-data":a(z)},null,8,["visible","onSubmitted","operate-type","row-data"])]),_:1})])}}});export{sl as default};
