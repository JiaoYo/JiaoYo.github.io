import{o as c,e as D,f as z,d as G,s as J,r as P,av as u,$ as l,k as U,z as T,g as n,w as i,i as a,aE as k,aF as d,A as N,c as C,h as M,t as B,au as W,et as A,eu as Q,L as H,ak as K,Q as X,B as Y,P as Z,a6 as ee}from"./index-CoiYVBHb.js";import{p as te,a as ae}from"./station-BqYXwvbJ.js";import{_ as le}from"./FormItemGridItem-DGToKMmh.js";import{_ as ne}from"./DatePicker-CirSnnB_.js";import{_ as oe}from"./Grid-CYVE_Tlm.js";const ie={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},se=z("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2M9.29 16.29L5.7 12.7a.996.996 0 1 1 1.41-1.41L10 14.17l6.88-6.88a.996.996 0 1 1 1.41 1.41l-7.59 7.59a.996.996 0 0 1-1.41 0"},null,-1),pe=[se];function re($,f){return c(),D("svg",ie,[...pe])}const de={name:"ic-round-check-circle",render:re},ue={ref:"wrapperRef",class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},be=G({name:"stationmanagement_electricfieldsetting",__name:"index",setup($){const{formRef:f,validate:F,restoreValidation:me}=J(),m=(p,t)=>({type:t,required:!0,trigger:["input","change","blur","password-input"],message:p}),e=P(V());function V(){return{id:void 0,pname:"",ptoken:"",pwd:"",repname:"",code:"001",ptype:1,codeprv:"0",maxeqmt:5,realeqmt:5,longitude:0,latitude:0,altitude:0,wheel:0,transform:"",voltagelevel:"10",operationtime:u(0,new Date),location:"",land:0,status:0,gridtime:u(0,new Date),owner:"",compy:"",epc:"",re1:"",re2:"",re3:"",re4:""}}const O={pwd:{required:!0,trigger:"blur",message:l("page.station.stationSetting.form.pwd")},code:{type:"string",required:!0,trigger:"blur",message:l("page.station.stationSetting.form.code")},ptype:m(l("page.station.stationSetting.form.ptype"),"number"),maxeqmt:m(l("page.station.stationSetting.form.maxeqmt"),"number"),realeqmt:m(l("page.station.stationSetting.form.realeqmt"),"number"),longitude:m(l("page.station.stationSetting.form.longitude"),"number"),latitude:m(l("page.station.stationSetting.form.latitude"),"number")},v=U({}),g=U(!1);async function h(){const{data:p}=await W({_t:new Date().getTime()});p.hasOwnProperty("ptoken")?(v.value=p,Object.assign(e,p),e.operationtime=u(0,e.operationtime),e.gridtime=u(0,e.gridtime)):g.value=!0}async function b(){var r;await F();const p=JSON.parse(JSON.stringify(e));p.operationtime=u(1,e.operationtime),p.gridtime=u(1,e.gridtime),g.value?await A([p]):await Q([p]),(r=window.$message)==null||r.success("保存成功");const t=new CustomEvent("powerNameChange",{detail:{pname:e.pname}});window.dispatchEvent(t),h(),g.value=!1}const I=p=>{p&&v.value.realeqmt>p&&(e.realeqmt=e.maxeqmt)};h();const _=p=>{if(p==0)return"0";if(p!==null){let t=p.toFixed(6);return t=t.replace(/(\.\d*?[1-9])0+$/,"$1"),t=t.replace(/\.$/,""),parseFloat(t)===Math.floor(parseFloat(t))?Math.floor(parseFloat(t)).toString():t+""}else return""};return(p,t)=>{const r=H,s=le,w=K,S=ne,R=oe,E=X,y=de,x=Y,L=Z,j=ee,q=T("no-auth");return c(),D("div",ue,[n(j,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper",title:"电场设置"},{default:i(()=>[n(E,{ref_key:"formRef",ref:f,model:e,rules:O,"label-placement":"left","label-width":180,"require-mark-placement":"left"},{default:i(()=>[n(R,{responsive:"screen","item-responsive":""},{default:i(()=>[n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.pname"),path:"pname"},{default:i(()=>[n(r,{clearable:"",value:e.pname,"onUpdate:value":t[0]||(t[0]=o=>e.pname=o),maxlength:"64",placeholder:a(l)("page.station.stationSetting.form.pname")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.ptoken"),path:"ptoken"},{default:i(()=>[n(r,{clearable:"",value:e.ptoken,"onUpdate:value":t[1]||(t[1]=o=>e.ptoken=o),placeholder:a(l)("page.station.stationSetting.form.ptoken"),style:{width:"100%"},maxlength:"64"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.pwd"),path:"pwd"},{default:i(()=>[n(r,{clearable:"",value:e.pwd,"onUpdate:value":t[2]||(t[2]=o=>e.pwd=o),placeholder:a(l)("page.station.stationSetting.form.pwd"),style:{width:"100%"},maxlength:"64"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.repname"),path:"repname"},{default:i(()=>[n(r,{clearable:"",value:e.repname,"onUpdate:value":t[3]||(t[3]=o=>e.repname=o),maxlength:"64",placeholder:a(l)("page.station.stationSetting.form.repname"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.code"),path:"code"},{default:i(()=>[n(r,{clearable:"",value:e.code,"onUpdate:value":t[4]||(t[4]=o=>e.code=o),placeholder:a(l)("page.station.stationSetting.form.code"),style:{width:"100%"},maxlength:"64"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.ptype"),path:"ptype"},{default:i(()=>[n(w,{class:"w-200px",placeholder:a(l)("page.station.stationSetting.form.ptype"),value:e.ptype,"onUpdate:value":t[5]||(t[5]=o=>e.ptype=o),options:a(k)(a(te)),style:{width:"100%"}},null,8,["placeholder","value","options"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.codeprv"),path:"codeprv"},{default:i(()=>[n(r,{clearable:"",value:e.codeprv,"onUpdate:value":t[6]||(t[6]=o=>e.codeprv=o),maxlength:"64",placeholder:a(l)("page.station.stationSetting.form.codeprv"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.maxeqmt")+"(MW)",path:"maxeqmt"},{default:i(()=>[n(a(d),{value:e.maxeqmt,"onUpdate:value":[t[7]||(t[7]=o=>e.maxeqmt=o),I],placeholder:a(l)("page.station.stationSetting.form.maxeqmt"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.realeqmt")+"(MW)",path:"realeqmt"},{default:i(()=>[n(a(d),{clearable:"",value:e.realeqmt,"onUpdate:value":t[8]||(t[8]=o=>e.realeqmt=o),max:e.maxeqmt,style:{width:"100%"},placeholder:a(l)("page.station.stationSetting.form.realeqmt")},null,8,["value","max","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.longitude"),path:"longitude"},{default:i(()=>[n(a(d),{clearable:"",value:e.longitude,"onUpdate:value":t[9]||(t[9]=o=>e.longitude=o),format:_,"show-button":!1,placeholder:a(l)("page.station.stationSetting.form.longitude"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.latitude"),path:"latitude"},{default:i(()=>[n(a(d),{clearable:"",value:e.latitude,"onUpdate:value":t[10]||(t[10]=o=>e.latitude=o),format:_,"show-button":!1,placeholder:a(l)("page.station.stationSetting.form.latitude"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.altitude"),path:"altitude"},{default:i(()=>[n(a(d),{clearable:"",value:e.altitude,"onUpdate:value":t[11]||(t[11]=o=>e.altitude=o),placeholder:a(l)("page.station.stationSetting.form.altitude"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.wheel"),path:"wheel"},{default:i(()=>[n(a(d),{clearable:"",value:e.wheel,"onUpdate:value":t[12]||(t[12]=o=>e.wheel=o),placeholder:a(l)("page.station.stationSetting.form.wheel"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.transform"),path:"transform"},{default:i(()=>[n(r,{clearable:"",value:e.transform,"onUpdate:value":t[13]||(t[13]=o=>e.transform=o),placeholder:a(l)("page.station.stationSetting.form.transform"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.voltagelevel")+"(kV)",path:"voltagelevel"},{default:i(()=>[n(r,{clearable:"",value:e.voltagelevel,"onUpdate:value":t[14]||(t[14]=o=>e.voltagelevel=o),maxlength:"64",placeholder:a(l)("page.station.stationSetting.form.voltagelevel"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.operationtime"),path:"operationtime"},{default:i(()=>[n(S,{"formatted-value":e.operationtime,"onUpdate:formattedValue":t[15]||(t[15]=o=>e.operationtime=o),"value-format":"yyyy-MM-dd",type:"date",clearable:"",placeholder:a(l)("page.station.stationSetting.form.operationtime"),style:{width:"100%"}},null,8,["formatted-value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.location"),path:"location"},{default:i(()=>[n(r,{clearable:"",value:e.location,"onUpdate:value":t[16]||(t[16]=o=>e.location=o),maxlength:"64",placeholder:a(l)("page.station.stationSetting.form.location"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.land"),path:"land"},{default:i(()=>[n(a(d),{clearable:"",value:e.land,"onUpdate:value":t[17]||(t[17]=o=>e.land=o),placeholder:a(l)("page.station.stationSetting.form.land"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.status"),path:"status"},{default:i(()=>[n(w,{class:"w-200px",value:e.status,"onUpdate:value":t[18]||(t[18]=o=>e.status=o),options:a(k)(a(ae)),placeholder:a(l)("page.station.stationSetting.form.status"),style:{width:"100%"}},null,8,["value","options","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.gridtime"),path:"gridtime"},{default:i(()=>[n(S,{"formatted-value":e.gridtime,"onUpdate:formattedValue":t[19]||(t[19]=o=>e.gridtime=o),"value-format":"yyyy-MM-dd",type:"date",clearable:"",style:{width:"100%"},placeholder:a(l)("page.station.stationSetting.form.gridtime")},null,8,["formatted-value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.owner"),path:"owner"},{default:i(()=>[n(r,{clearable:"",value:e.owner,"onUpdate:value":t[20]||(t[20]=o=>e.owner=o),placeholder:a(l)("page.station.stationSetting.form.owner"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.compy"),path:"compy"},{default:i(()=>[n(r,{clearable:"",value:e.compy,"onUpdate:value":t[21]||(t[21]=o=>e.compy=o),placeholder:a(l)("page.station.stationSetting.form.compy"),style:{width:"100%"},maxlength:"64"},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.epc"),path:"epc"},{default:i(()=>[n(r,{clearable:"",value:e.epc,"onUpdate:value":t[22]||(t[22]=o=>e.epc=o),placeholder:a(l)("page.station.stationSetting.form.epc"),style:{width:"100%"},maxlength:"64"},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"]),n(L,{size:16,justify:"center"},{default:i(()=>[g.value?N((c(),C(x,{key:0,type:"primary",ghost:"",onClick:b,class:"w-100px"},{icon:i(()=>[n(y,{class:"text-icon"})]),default:i(()=>[M(" "+B(a(l)("page.manage.scencename.save")),1)]),_:1})),[[q,"site:insert"]]):N((c(),C(x,{key:1,type:"primary",ghost:"",onClick:b,class:"w-100px"},{icon:i(()=>[n(y,{class:"text-icon"})]),default:i(()=>[M(" "+B(a(l)("page.manage.scencename.save")),1)]),_:1})),[[q,"site:update"]])]),_:1})]),_:1})],512)}}});export{be as default};
