import{_ as Ue}from"./table-column-setting.vue_vue_type_script_setup_true_lang-fY8m_u01.js";import{_ as Oe}from"./round-delete-CDJUW-C5.js";import{_ as Ae}from"./round-add-DgWQyj4X.js";import{aq as ae,d as ie,at as ue,av as ce,q as pe,aw as ye,r as E,bZ as Ie,c as T,o as d,w as a,f as s,G as ge,h as o,C as K,az as be,ax as Te,b as $,aT as he,aX as xe,e as r,t as c,B as b,g as f,z as X,aA as je,aB as Re,N as me,aE as we,a$ as ke,aH as de,aJ as qe,ev as Pe,aM as $e,s as Be,i as Fe,F as Ve,$ as W,U as Ce,b4 as Ee,M as Je,y as ne,aO as re,ay as Le,D as se,aP as Ge,aU as He}from"./index-BNVSoAe1.js";import{u as Ke,a as Xe}from"./table-Bc7IRs7L.js";import{_ as Se}from"./Grid-Bnspya2n.js";import{_ as Ne}from"./FormItemGridItem-D8jDEAxR.js";import{N as Me}from"./DatePicker-ClyBenhv.js";import{_ as Ye}from"./round-search-DN4eVXbo.js";import{_ as Ze}from"./round-refresh-BIjbakx1.js";import{u as Qe}from"./usePageData-Qn8L0v7U.js";import{_ as We}from"./Table-CFqESvHT.js";import{N as fe}from"./Popconfirm-fOVGsQ7s.js";function et(m){return ae({url:"/projectMeeting/getPage.do",method:"get",params:m})}function ze(m){return ae({url:"/projectMeeting/getById.do",method:"get",params:{id:m}})}function tt(m){return ae({url:"/projectMeeting/insert.do",method:"post",data:m})}function lt(m){return ae({url:"/projectMeeting/update.do",method:"put",data:m})}function ve(m){return ae({url:"/projectMeeting/delete.do",method:"delete",params:{arrIds:m}})}const st={class:"flex pr-20px"},at={class:"flex-1"},ot={class:"flex mb-10px"},nt={class:"flex mb-10px"},rt={class:"flex mb-10px"},ut={class:"flex mb-10px"},it={class:"flex-col ml-20px justify-center"},pt={key:0,class:""},dt={key:1,class:"flex items-center w-300px"},ct={key:0,class:""},mt={key:1,class:"flex items-center w-300px"},ft={key:0,class:""},vt={key:1,class:"flex items-center w-300px"},_t=ie({__name:"meetingModal",props:ue({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:ue(["submitted"],["update:visible"]),setup(m,{emit:R}){var Q;const S=ce(m,"visible"),p=(Q=pe().userInfo)==null?void 0:Q.usertype,q=m,v=R,_=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],y=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],n=[{label:"生产部周例会",value:4}],O=[{label:"销售周例会",value:5}],N=[..._,...y,...n,...O,{label:"管理层周例会",value:6}];ye(()=>S.value,async t=>{t&&te()});const M=E(null),l=E({id:void 0,con1:"",mdbtime:void 0,mtype:0,musers:[],mtopic:"",contentArr:[{person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}),w={con2:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtopic:{type:"string",required:!0,message:"请输入",trigger:"blur"},mdbtime:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtype:{type:"number",required:!0,message:"请输入",trigger:"blur"},musers:{type:"string",required:!0,message:"请输入",trigger:"blur"}},C=()=>{const t=new Date;t.setHours(17),t.setMinutes(30),t.setSeconds(0);const e=u=>u<10?"0"+u:u;return`${t.getFullYear()}-${e(t.getMonth()+1)}-${e(t.getDate())} ${e(t.getHours())}:${e(t.getMinutes())}:${e(t.getSeconds())}`},ee=async()=>{const{data:t}=await ze(q.rowData.id);t&&(l.value=t,l.value.mtype==0&&(l.value.contentArr=JSON.parse(t.con2)),l.value.mdbtime=ke(1,t.mdbtime))};async function J(t){await de();const e=document.getElementById(t);if(e){e.scrollIntoView({behavior:"smooth",block:"center"});const u=e.querySelector("input, textarea");u==null||u.focus()}}const te=async()=>{q.operateType=="add"?l.value={id:void 0,con1:"",mdbtime:C(),mtype:0,musers:[],mtopic:"",contentArr:[{person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:""}:ee()},le=Ie.debounce(async()=>{var e,u,g,H,F,V;await((e=M.value)==null?void 0:e.validate());let t=JSON.parse(JSON.stringify(l.value));if(l.value.mtype==0){for(let D=0;D<l.value.contentArr.length;D++){const k=l.value.contentArr[D];if(k.status1=k.person?"":"error",k.status2=k.proname?"":"error",k.status3=k.desc?"":"error",!k.person)return J("person-"+D),(u=window.$message)==null?void 0:u.error("请填写完整的调试人员");if(!k.proname)return J("proname-"+D),(g=window.$message)==null?void 0:g.error("请填写完整的项目名称");if(!k.desc)return J("desc-"+D),(H=window.$message)==null?void 0:H.error("请填写完整的工作描述")}t.con2=JSON.stringify(t.contentArr),delete t.contentArr}if(t.con1="",t.con3="",l.value.id){const{data:D,error:k}=await lt([t]);D&&((F=window.$message)==null||F.success("编辑成功"),z(),v("submitted"))}else{const{data:D,error:k}=await tt([t]);D&&((V=window.$message)==null||V.success("新增成功"),z(),v("submitted"))}},1e3,{leading:!0,trailing:!1}),z=()=>{S.value=!1,l.value={id:void 0,con1:"",mdbtime:void 0,mtype:0,musers:[],mtopic:"",contentArr:[{person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}},L=E(),j=t=>{t.status1=t.person?"":"error",t.status2=t.proname?"":"error",t.status3=t.desc?"":"error",!(t.status1=="error"||t.status2=="error"||t.status3=="error")&&(l.value.contentArr.push({person:"",proname:"",desc:"",problem:l.value.contentArr[l.value.contentArr.length-1].problem,status1:"",status2:"",status3:""}),de(()=>{var e;(e=L.value)==null||e.scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:"smooth"})}))},h=t=>{t.status1=t.person?"":"error"},P=t=>{t.status2=t.proname?"":"error"},B=t=>{t.status3=t.desc?"":"error"},Z=t=>{var e;if(t==0)console.log(l.value),(((e=l.value.contentArr)==null?void 0:e.length)==0||!Object.keys(l.value).includes("contentArr"))&&(l.value.contentArr=[{person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}]);else{let u=function(g){if(!g)return!1;try{return JSON.parse(g),!0}catch{return!1}};l.value.con2=u(l.value.con2)?"":l.value.con2}},x=E(0),A=E("");async function G({file:t},e){A.value=e;const u=await qe(t.file,t.name,"",g=>{x.value=g});u&&(e=="fl1"?l.value.fl1=u:e=="fl2"?l.value.fl2=u:e=="fl3"&&(l.value.fl3=u),x.value=0)}return(t,e)=>{const u=Ne,g=Me,H=Pe,F=je,V=Re,D=Se,k=ge,U=me,De=we;return d(),T(De,{show:S.value,"onUpdate:show":e[8]||(e[8]=i=>S.value=i),title:q.operateType==="add"?"新增会议纪要":"编辑会议纪要",preset:"card",class:"w-900px"},{footer:a(()=>[s(U,{justify:"end"},{default:a(()=>[s(o(b),{size:"small",class:"mt-16px",onClick:z},{default:a(()=>[f(c(t.$t("common.cancel")),1)]),_:1}),s(o(b),{type:"primary",size:"small",class:"mt-16px",onClick:o(le)},{default:a(()=>[f(c(t.$t("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[s(k,{ref_key:"formRef",ref:M,model:l.value,rules:w,"label-placement":"left"},{default:a(()=>[s(D,{responsive:"screen","item-responsive":"","x-gap":"15"},{default:a(()=>[s(u,{span:"24 s:24 m:24",label:"会议标题",path:"mtopic"},{default:a(()=>[s(o(K),{value:l.value.mtopic,"onUpdate:value":e[0]||(e[0]=i=>l.value.mtopic=i),placeholder:"请输入会议标题"},null,8,["value"])]),_:1}),s(u,{span:"24 s:12 m:12",label:"会议时间",path:"mdbtime"},{default:a(()=>[s(g,{size:"small","formatted-value":l.value.mdbtime,"onUpdate:formattedValue":e[1]||(e[1]=i=>l.value.mdbtime=i),"default-time":"17:30:00",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(u,{span:"24 s:12 m:12",label:"会议类型",path:"mtype"},{default:a(()=>[s(o(be),{clearable:"",value:l.value.mtype,"onUpdate:value":[e[2]||(e[2]=i=>l.value.mtype=i),Z],options:o(p)==0||o(p)==4?N:o(p)==2||o(p)==3?_:o(p)==5?y:o(p)==6?n:O,placeholder:"请选择会议类型",size:"small"},null,8,["value","options"])]),_:1}),s(u,{span:"24 s:12 m:24",label:"参会人员",path:"musers"},{default:a(()=>[s(o(K),{value:l.value.musers,"onUpdate:value":e[3]||(e[3]=i=>l.value.musers=i),placeholder:"请输入参会人员"},null,8,["value"])]),_:1}),l.value.mtype==0?(d(),T(u,{key:0,span:"24 s:12 m:24",label:"会议内容",path:"",class:"flex-col"},{default:a(()=>[s(o(Te),{ref_key:"scrollbarRef",ref:L,style:{"max-height":"300px"},class:"flex-col w-100%"},{default:a(()=>[(d(!0),$(he,null,xe(l.value.contentArr,(i,oe)=>(d(),$("div",{class:"ml-20px",key:i.person},[r("div",st,[r("div",at,[r("div",ot,[e[9]||(e[9]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"调试人员",-1)),s(o(K),{clearable:"",value:i.person,"onUpdate:value":I=>i.person=I,status:i.status1,onInput:I=>h(i),id:"person-"+oe,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",nt,[e[10]||(e[10]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"项目名称",-1)),s(o(K),{clearable:"",value:i.proname,"onUpdate:value":I=>i.proname=I,status:i.status2,onInput:I=>P(i),id:"proname-"+oe,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",rt,[e[11]||(e[11]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"工作描述",-1)),s(o(K),{clearable:"",value:i.desc,"onUpdate:value":I=>i.desc=I,onInput:I=>B(i),status:i.status3,id:"desc-"+oe,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value","onInput","status","id"])]),r("div",ut,[e[12]||(e[12]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"遇到的问题",-1)),s(o(K),{clearable:"",value:i.problem,"onUpdate:value":I=>i.problem=I,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value"])])]),r("div",it,[s(o(b),{class:"mb-10px",text:"",type:"info",onClick:I=>j(i)},{default:a(()=>e[13]||(e[13]=[f("添加")])),_:2,__:[13]},1032,["onClick"]),l.value.contentArr.length>1?(d(),T(o(b),{key:0,text:"",type:"error",onClick:I=>l.value.contentArr.splice(oe,1)},{default:a(()=>e[14]||(e[14]=[f("删除")])),_:2,__:[14]},1032,["onClick"])):X("",!0)])]),s(H,{dashed:""})]))),128))]),_:1},512)]),_:1})):(d(),T(u,{key:1,span:"24 s:12 m:24",label:"会议内容",path:"con2",class:"flex-col"},{default:a(()=>[s(o(K),{clearable:"",value:l.value.con2,"onUpdate:value":e[4]||(e[4]=i=>l.value.con2=i),placeholder:"请输入",type:"textarea",rows:8},null,8,["value"])]),_:1})),s(u,{span:"24 s:24 m:12",label:"附件1:",path:"fl1"},{default:a(()=>[l.value.fl1?(d(),$("div",pt,[r("span",null,c(l.value.fl1.split("?")[1]),1),s(o(b),{text:"",type:"error",onClick:e[5]||(e[5]=i=>l.value.fl1="")},{default:a(()=>e[15]||(e[15]=[f("删除")])),_:1,__:[15]})])):(d(),$("div",dt,[s(F,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":i=>G(i,"fl1")},{default:a(()=>[s(o(b),{loading:x.value>0&&!l.value.fl1},{default:a(()=>[f(c(x.value>0&&!l.value.fl1&&A.value=="fl1"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),x.value&&!l.value.fl1&&A.value=="fl1"?(d(),T(V,{key:0,type:"line",percentage:x.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):X("",!0)]))]),_:1}),s(u,{span:"24 s:24 m:12",label:"附件2:",path:"fl2"},{default:a(()=>[l.value.fl2?(d(),$("div",ct,[r("span",null,c(l.value.fl2.split("?")[1]),1),s(o(b),{text:"",type:"error",onClick:e[6]||(e[6]=i=>l.value.fl2="")},{default:a(()=>e[16]||(e[16]=[f("删除")])),_:1,__:[16]})])):(d(),$("div",mt,[s(F,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":i=>G(i,"fl2")},{default:a(()=>[s(o(b),{loading:x.value>0&&!l.value.fl2},{default:a(()=>[f(c(x.value>0&&!l.value.fl2&&A.value=="fl2"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),x.value&&!l.value.fl2&&A.value=="fl2"?(d(),T(V,{key:0,type:"line",percentage:x.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):X("",!0)]))]),_:1}),s(u,{span:"24 s:24 m:12",label:"附件3:",path:"fl3"},{default:a(()=>[l.value.fl3?(d(),$("div",ft,[r("span",null,c(l.value.fl3.split("?")[1]),1),s(o(b),{text:"",type:"error",onClick:e[7]||(e[7]=i=>l.value.fl3="")},{default:a(()=>e[17]||(e[17]=[f("删除")])),_:1,__:[17]})])):(d(),$("div",vt,[s(F,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":i=>G(i,"fl3")},{default:a(()=>[s(o(b),{loading:x.value>0&&!l.value.fl3},{default:a(()=>[f(c(x.value>0&&!l.value.fl3&&A.value=="fl3"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),x.value&&!l.value.fl3&&A.value=="fl3"?(d(),T(V,{key:0,type:"line",percentage:x.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):X("",!0)]))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),yt=$e(_t,[["__scopeId","data-v-d3c1ce2c"]]),gt=ie({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:ue(["reset","search"],["update:model"]),setup(m,{emit:R}){var L;const S=R,{formRef:Y,restoreValidation:p}=Be(),v=(L=pe().userInfo)==null?void 0:L.usertype,_=ce(m,"model"),y=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],n=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],O=[{label:"生产部周例会",value:4}],N=[{label:"销售周例会",value:5}],M=[...y,...n,...O,...N,{label:"管理层周例会",value:6}],{pageData:l,getData:w,nextPage:C}=Qe(Ee),ee=async j=>{const h=j.currentTarget,P=h.scrollTop;h.scrollTop+h.offsetHeight>=h.scrollHeight&&l.data.length<l.total&&(await C(),await de(),setTimeout(()=>{h.scrollTop=P}))};Fe(async()=>{w({usertypes:v==0||v==4?"0,1,2,3,4,5,6":v==2||v==3?"2,3":v==5?"5":v==6?"6":"1"})});const J=async j=>{_.value.dates=j,S("search")},te=async j=>{_.value.creater=j,S("search")};async function le(){await p(),_.value.dates=null,_.value.mtype=null,_.value.creater=null,S("reset")}async function z(){S("search")}return(j,h)=>{const P=Me,B=Ne,Z=be,x=Ze,A=b,G=Ye,Q=me,t=Se,e=ge,u=Ce;return d(),T(u,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[s(e,{ref_key:"formRef",ref:Y,model:_.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:Ve(z,["enter"])},{default:a(()=>[s(t,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:a(()=>[s(B,{span:"24 s:12 m:6",label:"日期",path:"dates"},{default:a(()=>[s(P,{clearable:"","formatted-value":_.value.dates,"onUpdate:formattedValue":[h[0]||(h[0]=g=>_.value.dates=g),J],type:"date","value-format":"yyyy-MM-dd",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(B,{span:"24 s:12 m:6",label:"会议类型",path:"mtype"},{default:a(()=>[s(Z,{clearable:"",filterable:"",value:_.value.mtype,"onUpdate:value":[h[1]||(h[1]=g=>_.value.mtype=g),z],placeholder:"请选择",options:o(v)==0||o(v)==4?M:o(v)==2||o(v)==3?y:o(v)==5?n:o(v)==6?O:N},null,8,["value","options"])]),_:1}),s(B,{span:"24 s:12 m:6",label:"创建者",path:"pid"},{default:a(()=>[s(Z,{clearable:"",filterable:"",value:_.value.creater,"onUpdate:value":[h[2]||(h[2]=g=>_.value.creater=g),te],placeholder:"请选择","label-field":"username","value-field":"id",options:o(l).data,onScroll:ee},null,8,["value","options"])]),_:1}),s(B,{span:"24  s:12 m:6",class:"pr-24px"},{default:a(()=>[s(Q,{class:"w-full"},{default:a(()=>[s(A,{onClick:le},{icon:a(()=>[s(x,{class:"text-icon"})]),default:a(()=>[f(" "+c(o(W)("common.reset")),1)]),_:1}),s(A,{type:"primary",ghost:"",onClick:z},{icon:a(()=>[s(G,{class:"text-icon"})]),default:a(()=>[f(" "+c(o(W)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),bt={class:"ml-40px font-bold"},ht={key:0},xt={class:"mb-20px ml-40px"},wt={class:"flex items-center"},kt={class:"preview-text"},$t={class:"flex items-center"},Ct={class:"preview-text"},St={class:"flex items-center"},Nt={class:"preview-text"},Mt={class:"flex items-center"},zt={class:"preview-text"},Dt={key:1},Ut={class:"preview-text ml-40px"},Ot={key:2,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},At={key:3,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},It={key:4,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},Tt=ie({__name:"lookModal",props:ue({id:{}},{lookisible:{type:Boolean,default:!1},lookisibleModifiers:{}}),emits:["update:lookisible"],setup(m){var _;const R=ce(m,"lookisible");(_=pe().userInfo)==null||_.usertype;const Y=m;ye(()=>R.value,async y=>{y&&q()});const p=E({}),q=async()=>{const{data:y}=await ze(Y.id);y&&(p.value=y,p.value.mtype==0&&(p.value.contentArr=JSON.parse(y.con2)),p.value.mdbtime=ke(1,y.mdbtime))};async function v(y){if(!y)return;const n=y.split("?")[0],O=y.split("?")[1];try{const M=await(await fetch(n,{mode:"cors"})).blob(),l=URL.createObjectURL(M),w=document.createElement("a");w.href=l,w.download=O,w.style.display="none",document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(l)}catch(N){console.error("下载失败:",N)}}return(y,n)=>{const O=We,N=we;return d(),T(N,{show:R.value,"onUpdate:show":n[3]||(n[3]=M=>R.value=M),preset:"card",class:"w-1000px"},{header:a(()=>n[4]||(n[4]=[r("div",null,"详细信息",-1)])),default:a(()=>{var M,l,w;return[n[15]||(n[15]=r("h3",{class:"font-size-16px font-bold mt-2"},"标题",-1)),r("div",bt,c(p.value.mtopic),1),n[16]||(n[16]=r("h3",{class:"font-size-16px font-bold mt-2"},"会议信息",-1)),s(O,{bordered:!1,"single-line":!1,class:"ml-40px w-90%"},{default:a(()=>[r("tbody",null,[r("tr",null,[n[5]||(n[5]=r("th",null,"会议时间",-1)),r("th",null,c(p.value.mdbtime),1)]),r("tr",null,[n[6]||(n[6]=r("th",null,"会议方式",-1)),r("th",null,c(p.value.mtype==0?"线上会议（钉钉）":""),1)]),r("tr",null,[n[7]||(n[7]=r("th",null,"参会人员",-1)),r("th",null,c(p.value.musers),1)])])]),_:1}),n[17]||(n[17]=r("h3",{class:"font-size-16px font-bold mt-2 mb-2"},"会议内容",-1)),p.value.mtype==0?(d(),$("div",ht,[(d(!0),$(he,null,xe(p.value.contentArr,C=>(d(),$("div",xt,[r("div",wt,[n[8]||(n[8]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"调试人员：",-1)),r("div",kt,c(C.person),1)]),r("div",$t,[n[9]||(n[9]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"项目名称：",-1)),r("div",Ct,c(C.proname),1)]),r("div",St,[n[10]||(n[10]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"工作描述：",-1)),r("div",Nt,c(C.desc),1)]),r("div",Mt,[n[11]||(n[11]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"遇到的问题：",-1)),r("div",zt,c(C.problem),1)])]))),256))])):(d(),$("div",Dt,[r("div",Ut,c(p.value.con2),1)])),n[18]||(n[18]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件1：",-1)),p.value.fl1?(d(),$("div",Ot,[f(c((M=p.value.fl1)==null?void 0:M.split("?")[1])+" ",1),s(o(b),{text:"",type:"primary",size:"small",onClick:n[0]||(n[0]=C=>v(p.value.fl1))},{default:a(()=>n[12]||(n[12]=[f("下载")])),_:1,__:[12]})])):X("",!0),n[19]||(n[19]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件2：",-1)),p.value.fl2?(d(),$("div",At,[f(c((l=p.value.fl2)==null?void 0:l.split("?")[1])+" ",1),s(o(b),{text:"",type:"primary",size:"small",onClick:n[1]||(n[1]=C=>v(p.value.fl2))},{default:a(()=>n[13]||(n[13]=[f("下载")])),_:1,__:[13]})])):X("",!0),n[20]||(n[20]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件3：",-1)),p.value.fl3?(d(),$("div",It,[f(c((w=p.value.fl3)==null?void 0:w.split("?")[1])+" ",1),s(o(b),{text:"",type:"primary",size:"small",onClick:n[2]||(n[2]=C=>v(p.value.fl3))},{default:a(()=>n[14]||(n[14]=[f("下载")])),_:1,__:[14]})])):X("",!0)]}),_:1,__:[15,16,17,18,19,20]},8,["show"])}}}),jt=$e(Tt,[["__scopeId","data-v-fcfbe4e3"]]),Rt={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function _e(m){return typeof m=="function"||Object.prototype.toString.call(m)==="[object Object]"&&!He(m)}const Zt=ie({name:"reportmanagement_meetingminutes",__name:"index",setup(m){const R=Je(),S=pe(),Y=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],p=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],q=[{label:"生产部周例会",value:4}],v=[{label:"销售周例会",value:5}],_=[...Y,...p,...q,...v,{label:"管理层周例会",value:6}],{columns:y,columnChecks:n,data:O,getData:N,loading:M,mobilePagination:l,searchParams:w}=Ke({showTotal:!0,apiFn:et,apiParams:{page:1,pageSize:20,limit:20,mtype:void 0,dates:void 0,creater:void 0,_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48,disabled:t=>S.userInfo.id!=t.creater},{key:"mtopic",title:"会议标题",align:"center",width:120},{key:"mtype",title:"会议类型",align:"center",width:120,render:t=>s("span",null,[_[t.mtype].label])},{key:"mdbtime",title:"会议时间",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"operate",title:W("common.operate"),align:"center",width:140,fixed:"right",render:t=>{let e;return s("div",{class:"flex-center gap-8px"},[se(s(b,{type:"primary",ghost:!0,size:"small",onClick:()=>B(t.id)},{default:()=>[f("详情")]}),[[ne("no-auth"),"project:Meeting:select"]]),S.userInfo.id==t.creater&&se(s(b,{type:"primary",ghost:!0,size:"small",onClick:()=>A(t.id)},_e(e=W("common.edit"))?e:{default:()=>[e]}),[[ne("no-auth"),"project:Meeting:update"]]),S.userInfo.id==t.creater&&s(fe,{onPositiveClick:()=>x(t.id)},{default:()=>W("common.confirmDelete"),trigger:()=>{let u;return se(s(b,{type:"error",ghost:!0,size:"small"},_e(u=W("common.delete"))?u:{default:()=>[u]}),[[ne("no-auth"),"project:Meeting:delete"]])}})])}}]}),{drawerVisible:C,operateType:ee,editingData:J,handleAdd:te,handleEdit:le,checkedRowKeys:z,onBatchDeleted:L,onDeleted:j}=Xe(O,N),h=E(!1),P=E(0),B=t=>{h.value=!0,P.value=t};async function Z(){console.log(z.value),G(z.value.join(","),t=>{L()})}async function x(t){const{data:e,error:u}=await ve(t);u||j()}function A(t){le(t)}async function G(t,e){const{data:u,error:g}=await ve(t);if(!g)e&&e(u);else return!1}const Q=()=>{N()};return(t,e)=>{const u=me,g=Ae,H=Oe,F=Ue,V=Le,D=Ce,k=ne("no-auth");return d(),$("div",Rt,[s(gt,{model:o(w),"onUpdate:model":e[0]||(e[0]=U=>re(w)?w.value=U:null),onReset:Q,onSearch:o(N)},null,8,["model","onSearch"]),s(D,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:a(()=>[s(u,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:a(()=>e[5]||(e[5]=[r("div",null,"会议纪要",-1)])),_:1,__:[5]})]),"header-extra":a(()=>[s(u,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[se((d(),T(o(b),{onClick:o(te),size:"small",ghost:"",type:"primary"},{icon:a(()=>[s(g,{class:"text-icon"})]),default:a(()=>[e[6]||(e[6]=f(" "+c("新增")))]),_:1,__:[6]},8,["onClick"])),[[k,"project:Meeting:insert"]]),s(o(fe),{onPositiveClick:Z},{trigger:a(()=>[se((d(),T(o(b),{size:"small",ghost:"",type:"error",disabled:o(z).length==0},{icon:a(()=>[s(H,{class:Ge(["text-icon",{"animate-spin":o(M)}])},null,8,["class"])]),default:a(()=>[e[7]||(e[7]=f(" "+c("批量删除")))]),_:1,__:[7]},8,["disabled"])),[[k,"project:Meeting:delete"]])]),default:a(()=>[e[8]||(e[8]=f(" 确定要删除选中的会议吗？ "))]),_:1,__:[8]}),s(F,{columns:o(n),"onUpdate:columns":e[1]||(e[1]=U=>re(n)?n.value=U:null)},null,8,["columns"])]),_:1})]),default:a(()=>[s(V,{"checked-row-keys":o(z),"onUpdate:checkedRowKeys":e[2]||(e[2]=U=>re(z)?z.value=U:null),columns:o(y),data:o(O),size:"small","flex-height":!o(R).isMobile,loading:o(M),remote:"","row-key":U=>U.id,pagination:o(l),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),s(jt,{id:P.value,lookisible:h.value,"onUpdate:lookisible":e[3]||(e[3]=U=>h.value=U)},null,8,["id","lookisible"]),s(yt,{visible:o(C),"onUpdate:visible":e[4]||(e[4]=U=>re(C)?C.value=U:null),onSubmitted:o(N),"operate-type":o(ee),"row-data":o(J)},null,8,["visible","onSubmitted","operate-type","row-data"])]),_:1})])}}});export{Zt as default};
