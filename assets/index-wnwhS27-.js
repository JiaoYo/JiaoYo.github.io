import{_ as Be}from"./table-column-setting.vue_vue_type_script_setup_true_lang-DT_rKwFE.js";import{_ as Ve}from"./round-delete-CXeWWwZt.js";import{_ as Fe}from"./round-add-fZpBfy1-.js";import{as as de,d as ye,ax as _e,az as he,p as be,av as Ce,r as K,cs as me,b_ as Le,c as R,o as f,w as o,f as s,F as Ne,h as a,A as te,aw as ge,aA as Se,b as C,aU as Me,aY as De,e as r,t as v,B as g,g as _,y as Y,aC as Ee,aD as He,N as xe,aG as Ue,b5 as Oe,aJ as ve,b0 as ue,aL as Je,V as Ge,X as Te,q as Ke,i as Xe,E as Ye,$ as se,U as ze,L as Qe,x as ie,aP as fe,aB as We,C as le,aQ as Ze,aV as et}from"./index-C1b7XuIM.js";import{u as tt,a as lt}from"./table-CxZfD_QR.js";import{u as Ae}from"./usePageData-DJD0HzyT.js";import{_ as Ie}from"./Grid-doj7iZBh.js";import{_ as je}from"./FormItemGridItem-CdsywRZD.js";import{N as Pe}from"./DatePicker-1VWc3FRs.js";import{_ as st}from"./round-search-Bo3FaEpc.js";import{_ as at}from"./round-refresh-DUW2ws6U.js";import{N as ot}from"./Table-CqwlReV9.js";import{N as we}from"./Popconfirm-5yWRjm7D.js";function nt(y){return de({url:"/projectMeeting/getPage.do",method:"get",params:y})}function Re(y){return de({url:"/projectMeeting/getById.do",method:"get",params:{id:y}})}function rt(y){return de({url:"/projectMeeting/insert.do",method:"post",data:y})}function it(y){return de({url:"/projectMeeting/update.do",method:"put",data:y})}function ke(y){return de({url:"/projectMeeting/delete.do",method:"delete",params:{arrIds:y}})}const ut={class:"flex pr-20px"},dt={class:"flex-1"},pt={class:"flex mb-10px"},ct={class:"flex mb-10px"},mt={class:"flex mb-10px"},ft={class:"flex mb-10px"},vt={class:"flex-col ml-20px justify-center"},_t={key:0,class:""},yt={key:1,class:"flex items-center w-300px"},bt={key:0,class:""},gt={key:1,class:"flex items-center w-300px"},ht={key:0,class:""},xt={key:1,class:"flex items-center w-300px"},wt=ye({__name:"meetingModal",props:_e({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:_e(["submitted"],["update:visible"]),setup(y,{emit:L}){var Z;const N=he(y,"visible"),U=(Z=be().userInfo)==null?void 0:Z.usertype,q=y,h=L,x=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],E=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],c=[{label:"生产部周例会",value:4}],B=[{label:"销售周例会",value:5}],S=[...x,...E,...c,...B,{label:"管理层周例会",value:6}];Ce(()=>N.value,async t=>{t&&w()});const V=K(null),e=K({id:void 0,con1:"",mdbtime:void 0,mtype:0,musers:[],mtopic:"",contentArr:[{id:me(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}),n={con2:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtopic:{type:"string",required:!0,message:"请输入",trigger:"blur"},mdbtime:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtype:{type:"number",required:!0,message:"请输入",trigger:"blur"},musers:{type:"array",required:!0,message:"请输入",trigger:"blur"}},I=()=>{const t=new Date;t.setHours(17),t.setMinutes(30),t.setSeconds(0);const l=p=>p<10?"0"+p:p;return`${t.getFullYear()}-${l(t.getMonth()+1)}-${l(t.getDate())} ${l(t.getHours())}:${l(t.getMinutes())}:${l(t.getSeconds())}`},{pageData:M,getData:O,nextPage:j}=Ae(Oe),$=async t=>{const l=t.currentTarget,p=l.scrollTop;l.scrollTop+l.offsetHeight>=l.scrollHeight&&M.data.length<M.total&&(await j(),await ve(),setTimeout(()=>{l.scrollTop=p}))},m=async t=>{await O({usertypes:t,page:1})},H=async()=>{var l;const{data:t}=await Re(q.rowData.id);t&&(e.value=t,e.value.mtype==0&&(e.value.contentArr=JSON.parse(t.con2)),e.value.mdbtime=ue(1,t.mdbtime),e.value.musers=(l=t.musers.replaceAll("、",","))==null?void 0:l.split(","))};async function T(t){await ve();const l=document.getElementById(t);if(l){l.scrollIntoView({behavior:"smooth",block:"center"});const p=l.querySelector("input, textarea");p==null||p.focus()}}const w=async()=>{m("0,2,3"),q.operateType=="add"?e.value={id:void 0,con1:"",mdbtime:I(),mtype:0,musers:[],mtopic:"",contentArr:[{id:me(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:""}:H()},J=Le.debounce(async()=>{var l,p,P,G,k,ee,pe;await((l=V.value)==null?void 0:l.validate());let t=JSON.parse(JSON.stringify(e.value));if(e.value.mtype==0){for(let z=0;z<e.value.contentArr.length;z++){const D=e.value.contentArr[z];if(D.status1=D.person?"":"error",D.status2=D.proname?"":"error",D.status3=D.desc?"":"error",!D.person)return T("person-"+z),(p=window.$message)==null?void 0:p.error("请填写完整的调试人员");if(!D.proname)return T("proname-"+z),(P=window.$message)==null?void 0:P.error("请填写完整的项目名称");if(!D.desc)return T("desc-"+z),(G=window.$message)==null?void 0:G.error("请填写完整的工作描述")}t.con2=JSON.stringify(t.contentArr),delete t.contentArr}if(t.con1="",t.con3="",t.musers=(k=t.musers)==null?void 0:k.join("、"),q.operateType=="edit"){const{data:z,error:D}=await it([t]);z&&((ee=window.$message)==null||ee.success("编辑成功"),F(),h("submitted"))}else{t.id=void 0;const{data:z,error:D}=await rt([t]);z&&((pe=window.$message)==null||pe.success("新增成功"),F(),h("submitted"))}},1e3,{leading:!0,trailing:!1}),F=()=>{N.value=!1,e.value={id:void 0,con1:"",mdbtime:void 0,mtype:0,musers:[],mtopic:"",contentArr:[{id:me(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}},X=K(),ae=t=>{var l;if(t.status1=t.person?"":"error",t.status2=t.proname?"":"error",t.status3=t.desc?"":"error",t.status1=="error"||t.status2=="error"||t.status3=="error")return(l=window.$message)==null?void 0:l.warning("请填写完整的信息，在进行添加");e.value.contentArr.push({id:me(),person:"",proname:"",desc:"",problem:e.value.contentArr[e.value.contentArr.length-1].problem,status1:"",status2:"",status3:""}),ve(()=>{var p;(p=X.value)==null||p.scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:"smooth"})})},W=t=>{t.status1=t.person?"":"error"},oe=t=>{t.status2=t.proname?"":"error"},ne=t=>{t.status3=t.desc?"":"error"},re=t=>{var l;if(t==0)(((l=e.value.contentArr)==null?void 0:l.length)==0||!Object.keys(e.value).includes("contentArr"))&&(e.value.contentArr=[{person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}]);else{let p=function(P){if(!P)return!1;try{return JSON.parse(P),!0}catch{return!1}};e.value.con2=p(e.value.con2)?"":e.value.con2}(t==0||t==1)&&(m("0,2,3"),e.value.mdbtime=t==0?ue(0,new Date)+" 17:30:00":ue(0,new Date)+" 08:30:00"),(t==2||t==3)&&(m("0,5"),e.value.mdbtime=ue(0,new Date)+" 09:00:00"),t==4&&m("0,6"),t==5&&m("0,1"),t==6&&m("0,4"),e.value.musers=[]},i=K(0),d=K("");async function b({file:t},l){d.value=l;const p=await Je(t.file,t.name,"",P=>{i.value=P});p&&(l=="fl1"?e.value.fl1=p:l=="fl2"?e.value.fl2=p:l=="fl3"&&(e.value.fl3=p),i.value=0)}return(t,l)=>{const p=je,P=Pe,G=Ge,k=Ee,ee=He,pe=Ie,z=Ne,D=xe,qe=Ue;return f(),R(qe,{show:N.value,"onUpdate:show":l[8]||(l[8]=u=>N.value=u),title:q.operateType==="add"?"新增会议纪要":q.operateType==="edit"?"编辑会议纪要":"新增会议纪要（复制）",preset:"card",class:"w-900px","mask-closable":!1,draggable:!0},{footer:o(()=>[s(D,{justify:"end"},{default:o(()=>[s(a(g),{size:"small",class:"mt-16px",onClick:F},{default:o(()=>[_(v(t.$t("common.cancel")),1)]),_:1}),s(a(g),{type:"primary",size:"small",class:"mt-16px",onClick:a(J)},{default:o(()=>[_(v(t.$t("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),default:o(()=>[s(z,{ref_key:"formRef",ref:V,model:e.value,rules:n,"label-placement":"left"},{default:o(()=>[s(pe,{responsive:"screen","item-responsive":"","x-gap":"15"},{default:o(()=>[s(p,{span:"24 s:24 m:24",label:"会议标题",path:"mtopic"},{default:o(()=>[s(a(te),{value:e.value.mtopic,"onUpdate:value":l[0]||(l[0]=u=>e.value.mtopic=u),placeholder:"请输入会议标题"},null,8,["value"])]),_:1}),s(p,{span:"24 s:12 m:12",label:"会议类型",path:"mtype"},{default:o(()=>[s(a(ge),{clearable:"",value:e.value.mtype,"onUpdate:value":[l[1]||(l[1]=u=>e.value.mtype=u),re],options:a(U)==0||a(U)==4?S:a(U)==2||a(U)==3?x:a(U)==5?E:a(U)==6?c:B,placeholder:"请选择会议类型"},null,8,["value","options"])]),_:1}),s(p,{span:"24 s:12 m:12",label:"会议时间",path:"mdbtime"},{default:o(()=>[s(P,{"formatted-value":e.value.mdbtime,"onUpdate:formattedValue":l[2]||(l[2]=u=>e.value.mdbtime=u),"default-time":"17:30:00",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(p,{span:"24 s:12 m:24",label:"参会人员",path:"musers"},{default:o(()=>[s(a(ge),{clearable:"",multiple:"",filterable:"",value:e.value.musers,"onUpdate:value":l[3]||(l[3]=u=>e.value.musers=u),placeholder:"请选择",options:a(M).data,"label-field":"username","value-field":"username",onScroll:$},null,8,["value","options"])]),_:1}),e.value.mtype==0?(f(),R(p,{key:0,span:"24 s:12 m:24",label:"会议内容",path:"",class:"flex-col"},{default:o(()=>[s(a(Se),{ref_key:"scrollbarRef",ref:X,style:{"max-height":"300px"},class:"flex-col w-100%"},{default:o(()=>[(f(!0),C(Me,null,De(e.value.contentArr,(u,ce)=>(f(),C("div",{class:"ml-20px",key:u.id},[r("div",ut,[r("div",dt,[r("div",pt,[l[9]||(l[9]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"调试人员",-1)),s(a(te),{clearable:"",value:u.person,"onUpdate:value":A=>u.person=A,status:u.status1,onInput:A=>W(u),id:"person-"+ce,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",ct,[l[10]||(l[10]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"项目名称",-1)),s(a(te),{clearable:"",value:u.proname,"onUpdate:value":A=>u.proname=A,status:u.status2,onInput:A=>oe(u),id:"proname-"+ce,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",mt,[l[11]||(l[11]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"工作描述",-1)),s(a(te),{clearable:"",value:u.desc,"onUpdate:value":A=>u.desc=A,onInput:A=>ne(u),status:u.status3,id:"desc-"+ce,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value","onInput","status","id"])]),r("div",ft,[l[12]||(l[12]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"遇到的问题",-1)),s(a(te),{clearable:"",value:u.problem,"onUpdate:value":A=>u.problem=A,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value"])])]),r("div",vt,[s(a(g),{class:"mb-10px",text:"",type:"info",onClick:A=>ae(u)},{default:o(()=>l[13]||(l[13]=[_("添加")])),_:2,__:[13]},1032,["onClick"]),e.value.contentArr.length>1?(f(),R(a(g),{key:0,text:"",type:"error",onClick:A=>e.value.contentArr.splice(ce,1)},{default:o(()=>l[14]||(l[14]=[_("删除")])),_:2,__:[14]},1032,["onClick"])):Y("",!0)])]),s(G,{dashed:""})]))),128))]),_:1},512)]),_:1})):(f(),R(p,{key:1,span:"24 s:12 m:24",label:"会议内容",path:"con2",class:"flex-col"},{default:o(()=>[s(a(te),{clearable:"",value:e.value.con2,"onUpdate:value":l[4]||(l[4]=u=>e.value.con2=u),placeholder:"请输入",type:"textarea",rows:8},null,8,["value"])]),_:1})),s(p,{span:"24 s:24 m:12",label:"附件1:",path:"fl1"},{default:o(()=>[e.value.fl1?(f(),C("div",_t,[r("span",null,v(e.value.fl1.split("?")[1]),1),s(a(g),{text:"",type:"error",onClick:l[5]||(l[5]=u=>e.value.fl1="")},{default:o(()=>l[15]||(l[15]=[_("删除")])),_:1,__:[15]})])):(f(),C("div",yt,[s(k,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>b(u,"fl1")},{default:o(()=>[s(a(g),{loading:i.value>0&&!e.value.fl1},{default:o(()=>[_(v(i.value>0&&!e.value.fl1&&d.value=="fl1"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl1&&d.value=="fl1"?(f(),R(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Y("",!0)]))]),_:1}),s(p,{span:"24 s:24 m:12",label:"附件2:",path:"fl2"},{default:o(()=>[e.value.fl2?(f(),C("div",bt,[r("span",null,v(e.value.fl2.split("?")[1]),1),s(a(g),{text:"",type:"error",onClick:l[6]||(l[6]=u=>e.value.fl2="")},{default:o(()=>l[16]||(l[16]=[_("删除")])),_:1,__:[16]})])):(f(),C("div",gt,[s(k,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>b(u,"fl2")},{default:o(()=>[s(a(g),{loading:i.value>0&&!e.value.fl2},{default:o(()=>[_(v(i.value>0&&!e.value.fl2&&d.value=="fl2"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl2&&d.value=="fl2"?(f(),R(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Y("",!0)]))]),_:1}),s(p,{span:"24 s:24 m:12",label:"附件3:",path:"fl3"},{default:o(()=>[e.value.fl3?(f(),C("div",ht,[r("span",null,v(e.value.fl3.split("?")[1]),1),s(a(g),{text:"",type:"error",onClick:l[7]||(l[7]=u=>e.value.fl3="")},{default:o(()=>l[17]||(l[17]=[_("删除")])),_:1,__:[17]})])):(f(),C("div",xt,[s(k,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>b(u,"fl3")},{default:o(()=>[s(a(g),{loading:i.value>0&&!e.value.fl3},{default:o(()=>[_(v(i.value>0&&!e.value.fl3&&d.value=="fl3"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl3&&d.value=="fl3"?(f(),R(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Y("",!0)]))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),kt=Te(wt,[["__scopeId","data-v-b3202950"]]),$t=ye({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:_e(["reset","search"],["update:model"]),setup(y,{emit:L}){var H;const N=L,{formRef:Q,restoreValidation:U}=Ke(),h=(H=be().userInfo)==null?void 0:H.usertype,x=he(y,"model"),E=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],c=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],B=[{label:"生产部周例会",value:4}],S=[{label:"销售周例会",value:5}],V=[...E,...c,...B,...S,{label:"管理层周例会",value:6}],{pageData:e,getData:n,nextPage:I}=Ae(Oe),M=async T=>{const w=T.currentTarget,J=w.scrollTop;w.scrollTop+w.offsetHeight>=w.scrollHeight&&e.data.length<e.total&&(await I(),await ve(),setTimeout(()=>{w.scrollTop=J}))};Xe(async()=>{n({usertypes:h==0||h==4?"0,1,2,3,4,5,6":h==2||h==3?"0,2,3":h==5?"0,5":h==6?"0,6":"0,1"})});const O=async T=>{x.value.dates=T,N("search")},j=async T=>{x.value.creater=T,N("search")};async function $(){await U(),x.value.dates=null,x.value.mtype=null,x.value.creater=null,N("reset")}async function m(){N("search")}return(T,w)=>{const J=Pe,F=je,X=ge,ae=at,W=g,oe=st,ne=xe,re=Ie,i=Ne,d=ze;return f(),R(d,{bordered:!1,size:"small",class:"card-wrapper"},{default:o(()=>[s(i,{ref_key:"formRef",ref:Q,model:x.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:Ye(m,["enter"])},{default:o(()=>[s(re,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:o(()=>[s(F,{span:"24 s:12 m:6",label:"日期",path:"dates"},{default:o(()=>[s(J,{clearable:"","formatted-value":x.value.dates,"onUpdate:formattedValue":[w[0]||(w[0]=b=>x.value.dates=b),O],type:"date","value-format":"yyyy-MM-dd",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(F,{span:"24 s:12 m:6",label:"会议类型",path:"mtype"},{default:o(()=>[s(X,{clearable:"",filterable:"",value:x.value.mtype,"onUpdate:value":[w[1]||(w[1]=b=>x.value.mtype=b),m],placeholder:"请选择",options:a(h)==0||a(h)==4?V:a(h)==2||a(h)==3?E:a(h)==5?c:a(h)==6?B:S},null,8,["value","options"])]),_:1}),s(F,{span:"24 s:12 m:6",label:"创建者",path:"pid"},{default:o(()=>[s(X,{clearable:"",filterable:"",value:x.value.creater,"onUpdate:value":[w[2]||(w[2]=b=>x.value.creater=b),j],placeholder:"请选择","label-field":"username","value-field":"id",options:a(e).data,onScroll:M},null,8,["value","options"])]),_:1}),s(F,{span:"24  s:12 m:6",class:"pr-24px"},{default:o(()=>[s(ne,{class:"w-full"},{default:o(()=>[s(W,{onClick:$},{icon:o(()=>[s(ae,{class:"text-icon"})]),default:o(()=>[_(" "+v(a(se)("common.reset")),1)]),_:1}),s(W,{type:"primary",ghost:"",onClick:m},{icon:o(()=>[s(oe,{class:"text-icon"})]),default:o(()=>[_(" "+v(a(se)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),Ct={class:"ml-40px font-bold"},Nt={key:0},St={class:"mb-20px ml-40px"},Mt={class:"flex items-center"},Dt={class:"preview-text"},Ut={class:"flex items-center"},Ot={class:"preview-text"},Tt={class:"flex"},zt={class:"preview-text"},At={class:"flex"},It={class:"preview-text"},jt={key:1},Pt={class:"preview-text ml-40px"},Rt={key:2,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},qt={key:3,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},Bt={key:4,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},Vt=ye({__name:"lookModal",props:_e({id:{}},{lookisible:{type:Boolean,default:!1},lookisibleModifiers:{}}),emits:["update:lookisible"],setup(y){var V;const L=he(y,"lookisible");(V=be().userInfo)==null||V.usertype;const Q=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],U=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],q=[{label:"生产部周例会",value:4}],h=[{label:"销售周例会",value:5}],x=[...Q,...U,...q,...h,{label:"管理层周例会",value:6}],E=y;Ce(()=>L.value,async e=>{e&&B()});const c=K({}),B=async()=>{const{data:e}=await Re(E.id);e&&(c.value=e,c.value.mtype==0&&(c.value.contentArr=JSON.parse(e.con2)),c.value.mdbtime=ue(1,e.mdbtime))};async function S(e){if(!e)return;const n=e.split("?")[0],I=e.split("?")[1];try{const O=await(await fetch(n,{mode:"cors"})).blob(),j=URL.createObjectURL(O),$=document.createElement("a");$.href=j,$.download=I,$.style.display="none",document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(j)}catch(M){console.error("下载失败:",M)}}return(e,n)=>{const I=ot,M=Ue;return f(),R(M,{show:L.value,"onUpdate:show":n[3]||(n[3]=O=>L.value=O),preset:"card",class:"w-1000px"},{header:o(()=>n[4]||(n[4]=[r("div",null,"详细信息",-1)])),default:o(()=>[s(a(Se),{style:{height:"calc(80vh)","padding-right":"20px"}},{default:o(()=>{var O,j,$;return[n[15]||(n[15]=r("h3",{class:"font-size-16px font-bold mt-2"},"标题",-1)),r("div",Ct,v(c.value.mtopic),1),n[16]||(n[16]=r("h3",{class:"font-size-16px font-bold mt-2"},"会议信息",-1)),s(I,{bordered:!1,"single-line":!1,class:"ml-40px w-90%"},{default:o(()=>{var m;return[r("tbody",null,[r("tr",null,[n[5]||(n[5]=r("th",null,"会议时间",-1)),r("th",null,v(c.value.mdbtime),1)]),r("tr",null,[n[6]||(n[6]=r("th",null,"会议类型",-1)),r("th",null,v((m=x.find(H=>H.value===c.value.mtype))==null?void 0:m.label),1)]),r("tr",null,[n[7]||(n[7]=r("th",null,"参会人员",-1)),r("th",null,v(c.value.musers),1)])])]}),_:1}),n[17]||(n[17]=r("h3",{class:"font-size-16px font-bold mt-2 mb-2"},"会议内容",-1)),c.value.mtype==0?(f(),C("div",Nt,[(f(!0),C(Me,null,De(c.value.contentArr,m=>(f(),C("div",St,[r("div",Mt,[n[8]||(n[8]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"调试人员：",-1)),r("div",Dt,v(m.person),1)]),r("div",Ut,[n[9]||(n[9]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"项目名称：",-1)),r("div",Ot,v(m.proname),1)]),r("div",Tt,[n[10]||(n[10]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"工作描述：",-1)),r("div",zt,v(m.desc),1)]),r("div",At,[n[11]||(n[11]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"遇到的问题：",-1)),r("div",It,v(m.problem),1)])]))),256))])):(f(),C("div",jt,[r("div",Pt,v(c.value.con2),1)])),n[18]||(n[18]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件1：",-1)),c.value.fl1?(f(),C("div",Rt,[_(v((O=c.value.fl1)==null?void 0:O.split("?")[1])+" ",1),s(a(g),{text:"",type:"primary",size:"small",onClick:n[0]||(n[0]=m=>S(c.value.fl1))},{default:o(()=>n[12]||(n[12]=[_("下载")])),_:1,__:[12]})])):Y("",!0),n[19]||(n[19]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件2：",-1)),c.value.fl2?(f(),C("div",qt,[_(v((j=c.value.fl2)==null?void 0:j.split("?")[1])+" ",1),s(a(g),{text:"",type:"primary",size:"small",onClick:n[1]||(n[1]=m=>S(c.value.fl2))},{default:o(()=>n[13]||(n[13]=[_("下载")])),_:1,__:[13]})])):Y("",!0),n[20]||(n[20]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件3：",-1)),c.value.fl3?(f(),C("div",Bt,[_(v(($=c.value.fl3)==null?void 0:$.split("?")[1])+" ",1),s(a(g),{text:"",type:"primary",size:"small",onClick:n[2]||(n[2]=m=>S(c.value.fl3))},{default:o(()=>n[14]||(n[14]=[_("下载")])),_:1,__:[14]})])):Y("",!0)]}),_:1,__:[15,16,17,18,19,20]})]),_:1},8,["show"])}}}),Ft=Te(Vt,[["__scopeId","data-v-18001e28"]]),Lt={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function $e(y){return typeof y=="function"||Object.prototype.toString.call(y)==="[object Object]"&&!et(y)}const sl=ye({name:"meetingminutes",__name:"index",setup(y){const L=Qe(),N=be(),Q=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],U=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],q=[{label:"生产部周例会",value:4}],h=[{label:"销售周例会",value:5}],x=[...Q,...U,...q,...h,{label:"管理层周例会",value:6}],{columns:E,columnChecks:c,data:B,getData:S,loading:V,mobilePagination:e,searchParams:n}=tt({showTotal:!0,apiFn:nt,apiParams:{page:1,pageSize:20,limit:20,mtype:void 0,dates:void 0,creater:void 0,_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48,disabled:i=>N.userInfo.id!=i.creater},{key:"mtopic",title:"会议标题",align:"center",width:120},{key:"mtype",title:"会议类型",align:"center",width:120,render:i=>s("span",null,[x[i.mtype].label])},{key:"mdbtime",title:"会议时间",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dates",title:"创建日期",align:"center",width:120},{key:"operate",title:se("common.operate"),align:"center",width:140,fixed:"right",render:i=>{let d;return s("div",{class:"flex-center gap-8px"},[le(s(g,{type:"primary",ghost:!0,size:"small",onClick:()=>F(i.id)},{default:()=>[_("详情")]}),[[ie("no-auth"),"project:Meeting:select"]]),N.userInfo.id==i.creater&&le(s(g,{type:"success",ghost:!0,size:"small",onClick:()=>ne(i)},{default:()=>[_("复制")]}),[[ie("no-auth"),"project:Meeting:insert"]]),N.userInfo.id==i.creater&&le(s(g,{type:"primary",ghost:!0,size:"small",onClick:()=>W(i.id)},$e(d=se("common.edit"))?d:{default:()=>[d]}),[[ie("no-auth"),"project:Meeting:update"]]),N.userInfo.id==i.creater&&s(we,{onPositiveClick:()=>ae(i.id)},{default:()=>se("common.confirmDelete"),trigger:()=>{let b;return le(s(g,{type:"error",ghost:!0,size:"small"},$e(b=se("common.delete"))?b:{default:()=>[b]}),[[ie("no-auth"),"project:Meeting:delete"]])}})])}}]}),{drawerVisible:I,operateType:M,editingData:O,handleAdd:j,handleEdit:$,checkedRowKeys:m,onBatchDeleted:H,onDeleted:T}=lt(B,S),w=K(!1),J=K(0),F=i=>{w.value=!0,J.value=i};async function X(){console.log(m.value),oe(m.value.join(","),i=>{H()})}async function ae(i){const{data:d,error:b}=await ke(i);b||T()}function W(i){$(i)}async function oe(i,d){const{data:b,error:Z}=await ke(i);if(!Z)d&&d(b);else return!1}const ne=async i=>{$(i.id),M.value="copy"},re=()=>{S()};return(i,d)=>{const b=xe,Z=Fe,t=Ve,l=Be,p=We,P=ze,G=ie("no-auth");return f(),C("div",Lt,[s($t,{model:a(n),"onUpdate:model":d[0]||(d[0]=k=>fe(n)?n.value=k:null),onReset:re,onSearch:a(S)},null,8,["model","onSearch"]),s(P,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:o(()=>[s(b,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:o(()=>d[5]||(d[5]=[r("div",null,"会议纪要",-1)])),_:1,__:[5]})]),"header-extra":o(()=>[s(b,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:o(()=>[le((f(),R(a(g),{onClick:a(j),size:"small",ghost:"",type:"primary"},{icon:o(()=>[s(Z,{class:"text-icon"})]),default:o(()=>[d[6]||(d[6]=_(" "+v("新增")))]),_:1,__:[6]},8,["onClick"])),[[G,"project:Meeting:insert"]]),s(a(we),{onPositiveClick:X},{trigger:o(()=>[le((f(),R(a(g),{size:"small",ghost:"",type:"error",disabled:a(m).length==0},{icon:o(()=>[s(t,{class:Ze(["text-icon",{"animate-spin":a(V)}])},null,8,["class"])]),default:o(()=>[d[7]||(d[7]=_(" "+v("批量删除")))]),_:1,__:[7]},8,["disabled"])),[[G,"project:Meeting:delete"]])]),default:o(()=>[d[8]||(d[8]=_(" 确定要删除选中的会议吗？ "))]),_:1,__:[8]}),s(l,{columns:a(c),"onUpdate:columns":d[1]||(d[1]=k=>fe(c)?c.value=k:null)},null,8,["columns"])]),_:1})]),default:o(()=>[s(p,{"checked-row-keys":a(m),"onUpdate:checkedRowKeys":d[2]||(d[2]=k=>fe(m)?m.value=k:null),columns:a(E),data:a(B),size:"small","flex-height":!a(L).isMobile,loading:a(V),remote:"","row-key":k=>k.id,pagination:a(e),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),s(Ft,{id:J.value,lookisible:w.value,"onUpdate:lookisible":d[3]||(d[3]=k=>w.value=k)},null,8,["id","lookisible"]),s(kt,{visible:a(I),"onUpdate:visible":d[4]||(d[4]=k=>fe(I)?I.value=k:null),onSubmitted:a(S),"operate-type":a(M),"row-data":a(O)},null,8,["visible","onSubmitted","operate-type","row-data"])]),_:1})])}}});export{sl as default};
