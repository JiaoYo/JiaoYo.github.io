import{_ as E}from"./export-BdHlkXxq.js";import{d as C,c as I,o as D,w as t,f as e,M as L,J as M,B as x,g as k,t as N,h as r,$ as o,a2 as B,aN as j,s as S,b as q,aD as T,a3 as U,a4 as V,aV as F}from"./index-DTejdFLI.js";import{f as O,a as P}from"./system-log-C4fZRRm8.js";import{u as $}from"./table-5sK02S3E.js";import{_ as A}from"./round-search-CcVdI1HR.js";import{_ as G}from"./Grid-U7VbogCl.js";import{_ as R}from"./FormItemGridItem-OdWiLkIi.js";const J=C({name:"FormSearch",__name:"form-search",emits:["search"],setup(l,{emit:p}){const i=p;function c(){i("search")}return(v,z)=>{const m=A,_=x,u=M,d=R,g=G,n=L,a=B;return D(),I(a,{bordered:!1,size:"small",class:"card-wrapper"},{default:t(()=>[e(n,{"label-placement":"left","label-width":80,"show-feedback":!1},{default:t(()=>[e(g,{responsive:"screen","item-responsive":""},{default:t(()=>[e(d,{span:"24 s:12 m:6"},{default:t(()=>[e(u,{class:"w-full"},{default:t(()=>[e(_,{type:"primary",ghost:"",onClick:c},{icon:t(()=>[e(m,{class:"text-icon"})]),default:t(()=>[k(" "+N(r(o)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),H={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function K(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!F(l)}const oe=C({name:"syslog_errorlog",__name:"index",setup(l){const p=j(),i=S(!1),c=S({errorInfo:""}),{columns:v,data:z,getData:m,loading:_,pagination:u}=$({apiFn:P,apiParams:{page:1,pageSize:20,limit:20,_t:new Date().getTime()},columns:()=>[{key:"requestUri",title:o("page.systemlog.error.requestUri"),width:350,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestMethod",title:o("page.systemlog.error.requestMethod"),width:100,align:"center",resizable:!0},{key:"requestParams",title:o("page.systemlog.error.requestParams"),width:350,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"ip",title:o("page.systemlog.error.ip"),width:160,align:"center",resizable:!0},{key:"userAgent",title:o("page.systemlog.error.userAgent"),width:240,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"createDate",title:o("page.systemlog.error.createDate"),width:160,align:"center",resizable:!0},{key:"operate",title:o("common.operate"),align:"center",width:130,render:n=>{let a;return e("div",{class:"flex-center gap-8px"},[e(x,{type:"primary",ghost:!0,size:"small",onClick:()=>d(n)},K(a=o("page.systemlog.error.errorMsg"))?a:{default:()=>[a]})])}}]});function d(n){c.value.errorInfo=n.errorInfo,i.value=!0}const g=async()=>{const{data:n,error:a}=await O({_t:new Date().getTime()});if(!a){let f=n,h=new Blob([f],{type:"application/vnd.ms-excel"}),w=new Date().getTime()+".xls",b=window.webkitURL.createObjectURL(h),s=document.createElement("a");s.href=b,s.download=w,document.body.appendChild(s),s.click(),s.remove()}};return(n,a)=>{const f=E,h=T,w=B,b=U,s=V;return D(),q("div",H,[e(J,{onSearch:r(m)},null,8,["onSearch"]),e(w,{title:r(o)("page.systemlog.error.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":t(()=>[e(r(x),{type:"info",size:"small",ghost:"",onClick:g},{icon:t(()=>[e(f,{class:"text-icon"})]),default:t(()=>[k(" "+N(r(o)("common.export")),1)]),_:1})]),default:t(()=>[e(h,{columns:r(v),data:r(z),size:"small","flex-height":!r(p).isMobile,"scroll-x":"",loading:r(_),remote:"","row-key":y=>y.id,pagination:r(u),class:"sm:h-full"},null,8,["columns","data","flex-height","loading","row-key","pagination"])]),_:1},8,["title"]),e(s,{show:i.value,"onUpdate:show":a[0]||(a[0]=y=>i.value=y),title:r(o)("page.systemlog.error.errorMsg"),preset:"card",class:"w-800px"},{default:t(()=>[e(b,{class:"h-480px pr-20px"},{default:t(()=>[k(N(c.value.errorInfo),1)]),_:1})]),_:1},8,["show","title"])])}}});export{oe as default};
