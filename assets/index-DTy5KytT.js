import{_ as Oe}from"./table-column-setting.vue_vue_type_script_setup_true_lang-Bd_ydgz6.js";import{_ as Me}from"./round-delete-DpC2P942.js";import{_ as Ae}from"./round-add-D3WUtpeV.js";import{d as he,as as _e,p as ke,s as Ve,r as te,q as xe,a as He,at as Se,a1 as Ne,c as q,o as g,w as t,f as e,b7 as Ee,F as Te,y as z,h as s,av as ee,A as F,b as U,g as d,e as _,t as f,bp as Ge,B as x,N as we,$ as A,b8 as je,b_ as Je,b$ as Ke,bZ as We,ad as ze,c0 as Ze,c1 as Ue,c2 as Qe,c3 as qe,E as Xe,U as Pe,L as Ye,i as et,x as G,aB as ge,ax as tt,C as M,bn as at,aa as lt,ac as ce,c4 as Ce,c5 as nt,aE as st}from"./index-GKZr6R-C.js";import{u as ot,a as rt}from"./table-VcDsA4zD.js";import{u as me}from"./usePageData-CFaE5rQl.js";import{_ as Re}from"./Grid-C-96xXAi.js";import{_ as $e}from"./FormItemGridItem-Dlimnbl-.js";import{N as ut}from"./DatePicker--SC4nRCK.js";import{_ as it}from"./round-search-DYdIbIbe.js";import{_ as dt}from"./round-refresh-BRaDYp-e.js";import{_ as pt,a as ct}from"./DescriptionsItem-BCWGASfW.js";import{N as fe}from"./Popconfirm-C9ev1_yH.js";import{N as ft}from"./RadioButton-D1mbb0Eu.js";const mt={key:0},gt={key:0},vt={key:0},bt={key:0},yt=he({name:"OperateDrawer",__name:"operate-drawer",props:_e({operateType:{},rowData:{},pid:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:_e(["submitted"],["update:visible"]),setup(B,{emit:ae}){const C=ae,D=ke(),h=B,l=Ve(O());function O(){return{pid:void 0,id:"",debugname:"",docker:void 0,dockcharge:"",dockcontact:"",status:0,notes:"",debugresult:0,dtype:void 0,starttime:null,endtime:null,dbcreater:void 0,startAndTimeRange:void 0,re1:"",re2:"",re3:"",re4:"",fl1:"",fl2:"",fl3:"",fl4:""}}const{pageData:c,getData:N}=me(Je),I=async()=>{await N({usertypes:"2,3"})},V=async o=>{const a=o.currentTarget;a.scrollTop+a.offsetHeight>=a.scrollHeight&&c.data.length<c.total&&K()},{pageData:k,getData:H,nextPage:le}=me(Ke),ne=async o=>{const a=o.currentTarget;a.scrollTop+a.offsetHeight>=a.scrollHeight&&k.data.length<k.total&&le()},se=async()=>{await H({pid:l.pid})},oe=async o=>{if(l.docker=o,l.docker){const a=k.data.find(m=>m.docker===l.docker);a?(l.dockcharge=a.pname,l.dockcontact=a.pcontact):(l.dockcharge="",l.dockcontact="")}},{pageData:T,getData:J,nextPage:K}=me(We),re=async o=>{const a=o.currentTarget;a.scrollTop+a.offsetHeight>=a.scrollHeight&&T.data.length<T.total&&K()},W=async()=>{await J()},v=te([]),{pageData:b,getData:P,nextPage:R}=me(ze),Z=async o=>{const a=o.currentTarget;a.scrollTop+a.offsetHeight>=a.scrollHeight&&b.data.length<b.total&&(R(),v.value=b.data)},ue=async()=>{await P({fuzzy:D.userInfo.pname}),v.value=b.data},Q=async()=>{await P(),v.value=b.data},ie=async o=>{l.pid=o},de=te(void 0);async function i(){ue(),W(),I(),Object.assign(l,O()),h.operateType==="add"&&(l.pid=Number(h.pid)),h.operateType==="edit"&&h.rowData&&(Object.assign(l,h.rowData),de.value=l.status,l.startAndTimeRange=[h.rowData.starttime,h.rowData.endtime]),se()}const{formRef:E,validate:X,restoreValidation:r}=xe(),n={pid:{type:"number",required:!0,trigger:["blur","change"],message:"请选择"},dtype:{type:"number",required:!0,trigger:["blur","change"],message:"请选择"},dbcreater:{type:"string",required:!0,trigger:["blur","change"],message:"请选择"},debugname:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},docker:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},dockcharge:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},dockcontact:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},status:{type:"number",required:!0,trigger:["blur","change"],message:"请选择"}},j=He(()=>({add:"新增待调试业务",edit:"修改待调试业务"})[h.operateType]),$=Se(B,"visible");Ne($,()=>{$.value&&(i(),setTimeout(()=>{const o=document.querySelector(".n-scrollbar-content");o==null||o.scrollTo(0,0)},300),r())});async function L({file:o},a){let m=new FormData;m.append("multipartFile",o.file);const{data:u,error:S}=await Ze(m);S||(l[a]=u)}function pe(){$.value=!1}async function Y(o){if(o)try{const m=await(await fetch(o==null?void 0:o.split("?")[0],{mode:"cors"})).blob(),u=URL.createObjectURL(m),S=document.createElement("a");S.href=u,S.download=o==null?void 0:o.split("?")[1],S.style.display="none",document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(u)}catch(a){console.error("下载失败:",a)}}async function ve(){var o;await X(),(o=window.$dialog)==null||o.info({title:"提示",content:"确定提交吗？",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{await be()}})}async function be(){var o,a;if(await X(),h.operateType==="edit"){const m=JSON.parse(JSON.stringify(l)),{data:u,error:S}=await Ue([m]);S||(pe(),C("submitted"),(o=window.$message)==null||o.success("修改成功"))}else{const{data:m,error:u}=await Qe([{...l}]);u||(pe(),C("submitted"),(a=window.$message)==null||a.success("添加成功"))}}const ye=o=>{var a;l.debugname=(a=T.data.find(m=>m.id==o))==null?void 0:a.tname,l.dtype=o};async function w(o,a){l.startAndTimeRange=o,l.starttime=o==null?void 0:o[0],l.endtime=o==null?void 0:o[1]}return(o,a)=>{const m=$e,u=Ge,S=Re,Ie=Te,Le=Ee,Be=we,Fe=je;return g(),q(Fe,{show:$.value,"onUpdate:show":a[22]||(a[22]=p=>$.value=p),title:j.value,preset:"card",class:"w-800px"},{footer:t(()=>[e(Be,{justify:"end",size:16},{default:t(()=>[e(s(x),{onClick:pe},{default:t(()=>[d(f(s(A)("common.cancel")),1)]),_:1}),e(s(x),{type:"primary",onClick:ve},{default:t(()=>[d(f(s(A)("common.confirm")),1)]),_:1})]),_:1})]),default:t(()=>[e(Le,{class:"pr-20px"},{default:t(()=>[e(Ie,{ref_key:"formRef",ref:E,model:l,rules:n,"label-placement":"left","label-width":120},{default:t(()=>[e(S,{responsive:"screen","item-responsive":""},{default:t(()=>[e(m,{span:"24 m:12",label:"项目列表",path:"pid"},{default:t(()=>[e(s(ee),{filterable:"",clearable:"",value:l.pid,"onUpdate:value":[a[0]||(a[0]=p=>l.pid=p),ie],placeholder:"请选择项目","label-field":"proname","value-field":"id",onClear:Q,options:v.value,onScroll:Z},null,8,["value","options"])]),_:1}),e(m,{span:"24 m:12",label:"权重",path:"dtype"},{default:t(()=>[e(s(ee),{filterable:"",value:l.dtype,"onUpdate:value":[a[1]||(a[1]=p=>l.dtype=p),ye],tag:"",placeholder:"请选择权重","label-field":"tname","value-field":"id",options:s(T).data,onScroll:re},null,8,["value","options"])]),_:1}),e(m,{span:"24 m:12",label:"业务名称",path:"debugname"},{default:t(()=>[e(s(F),{value:l.debugname,"onUpdate:value":a[2]||(a[2]=p=>l.debugname=p),placeholder:"请输入"},null,8,["value"])]),_:1}),e(m,{span:"24 m:12",label:"调试人",path:"dbcreater"},{default:t(()=>[e(s(ee),{filterable:"",value:l.dbcreater,"onUpdate:value":a[3]||(a[3]=p=>l.dbcreater=p),placeholder:"请选择调试人","label-field":"username","value-field":"id",options:s(c).data,onScroll:V},null,8,["value","options"])]),_:1}),e(m,{span:"24 m:24",label:"起止时间",path:"startAndTimeRange"},{default:t(()=>[e(s(ut),{clearable:"",value:l.startAndTimeRange,"onUpdate:value":a[4]||(a[4]=p=>l.startAndTimeRange=p),type:"daterange","value-format":"yyyy-MM-dd",style:{width:"100%"},"onUpdate:formattedValue":w},null,8,["value"])]),_:1}),e(m,{span:"24 m:12",label:"对接方",path:"docker"},{default:t(()=>[e(s(ee),{filterable:"",value:l.docker,"onUpdate:value":[a[5]||(a[5]=p=>l.docker=p),oe],clearable:"",tag:"",placeholder:"请选择或输入对接方","label-field":"docker","value-field":"docker",options:s(k).data,onScroll:ne},null,8,["value","options"])]),_:1}),e(m,{span:"24 m:12",label:"对接方负责人",path:"dockcharge"},{default:t(()=>[e(s(F),{value:l.dockcharge,"onUpdate:value":a[6]||(a[6]=p=>l.dockcharge=p),placeholder:"请输入",style:{width:"100%"}},null,8,["value"])]),_:1}),e(m,{span:"24 m:12",label:"联系方式",path:"dockcontact"},{default:t(()=>[e(s(F),{value:l.dockcontact,"onUpdate:value":a[7]||(a[7]=p=>l.dockcontact=p),placeholder:"请输入",style:{width:"100%"}},null,8,["value"])]),_:1}),h.operateType=="edit"?(g(),q(m,{key:0,span:"24 m:12",label:"状态",path:"status"},{default:t(()=>[e(s(ee),{clearable:"",value:l.status,"onUpdate:value":a[8]||(a[8]=p=>l.status=p),placeholder:"请选择",options:s(D).userInfo.usertype==0||s(D).userInfo.usertype==2?[{label:"待调试",value:0},{label:"开始调试",value:1},{label:"完成调试",value:2},{label:"审核完成",value:3}]:[{label:"待调试",value:0},{label:"开始调试",value:1},{label:"完成调试",value:2}]},null,8,["value","options"])]),_:1})):z("",!0),e(m,{span:"24 m:12",label:"备注",path:"notes"},{default:t(()=>[e(s(F),{value:l.notes,"onUpdate:value":a[9]||(a[9]=p=>l.notes=p),placeholder:"请输入"},null,8,["value"])]),_:1}),e(m,{span:"24 m:24",label:"附件1",path:"notes"},{default:t(()=>{var p;return[e(s(F),{value:l.re1,"onUpdate:value":a[10]||(a[10]=y=>l.re1=y),placeholder:"请输入",style:{width:"250px","margin-right":"20px"}},null,8,["value"]),l.fl1?(g(),U("span",mt,[d(f((p=l.fl1)==null?void 0:p.split("?")[1])+" ",1),_("span",{class:"cursor-pointer c-#c92a2a",onClick:a[11]||(a[11]=y=>l.fl1="")},"删除"),_("span",{class:"cursor-pointer c-#1890ff ml-5px inline-block",onClick:a[12]||(a[12]=y=>Y(l.fl1))},"下载")])):(g(),q(u,{key:1,style:{width:"auto"},ref:"uploadRef",action:"#","custom-request":y=>L(y,"fl1"),"show-file-list":!1},{default:t(()=>[e(s(x),{size:"small",ghost:"",type:"primary"},{default:t(()=>a[23]||(a[23]=[d("选择文件")])),_:1,__:[23]})]),_:1},8,["custom-request"]))]}),_:1}),e(m,{span:"24 m:24",label:"附件2",path:"notes"},{default:t(()=>{var p;return[e(s(F),{value:l.re2,"onUpdate:value":a[13]||(a[13]=y=>l.re2=y),placeholder:"请输入",style:{width:"250px","margin-right":"20px"}},null,8,["value"]),l.fl2?(g(),U("span",gt,[d(f((p=l.fl2)==null?void 0:p.split("?")[1])+" ",1),_("span",{class:"cursor-pointer c-#c92a2a",onClick:a[14]||(a[14]=y=>l.fl2="")},"删除"),_("span",{class:"cursor-pointer c-#1890ff ml-5px inline-block",onClick:a[15]||(a[15]=y=>Y(l.fl2))},"下载")])):(g(),q(u,{key:1,style:{width:"auto"},ref:"uploadRef",action:"#","custom-request":y=>L(y,"fl2"),"show-file-list":!1},{default:t(()=>[e(s(x),{size:"small",ghost:"",type:"primary"},{default:t(()=>a[24]||(a[24]=[d("选择文件")])),_:1,__:[24]})]),_:1},8,["custom-request"]))]}),_:1}),e(m,{span:"24 m:24",label:"附件3",path:"notes"},{default:t(()=>{var p;return[e(s(F),{value:l.re3,"onUpdate:value":a[16]||(a[16]=y=>l.re3=y),placeholder:"请输入",style:{width:"250px","margin-right":"20px"}},null,8,["value"]),l.fl3?(g(),U("span",vt,[d(f((p=l.fl3)==null?void 0:p.split("?")[1])+" ",1),_("span",{class:"cursor-pointer c-#c92a2a",onClick:a[17]||(a[17]=y=>l.fl3="")},"删除"),_("span",{class:"cursor-pointer c-#1890ff ml-5px inline-block",onClick:a[18]||(a[18]=y=>Y(l.fl3))},"下载")])):(g(),q(u,{key:1,style:{width:"auto"},ref:"uploadRef",action:"#","custom-request":y=>L(y,"fl3"),"show-file-list":!1},{default:t(()=>[e(s(x),{size:"small",ghost:"",type:"primary"},{default:t(()=>a[25]||(a[25]=[d("选择文件")])),_:1,__:[25]})]),_:1},8,["custom-request"]))]}),_:1}),e(m,{span:"24 m:24",label:"附件4",path:"notes"},{default:t(()=>{var p;return[e(s(F),{value:l.re4,"onUpdate:value":a[19]||(a[19]=y=>l.re4=y),placeholder:"请输入",style:{width:"250px","margin-right":"20px"}},null,8,["value"]),l.fl4?(g(),U("span",bt,[d(f((p=l.fl4)==null?void 0:p.split("?")[1])+" ",1),_("span",{class:"cursor-pointer c-#c92a2a",onClick:a[20]||(a[20]=y=>l.fl4="")},"删除"),_("span",{class:"cursor-pointer c-#1890ff ml-5px inline-block",onClick:a[21]||(a[21]=y=>Y(l.fl4))},"下载")])):(g(),q(u,{key:1,style:{width:"auto"},ref:"uploadRef",action:"#","custom-request":y=>L(y,"fl4"),"show-file-list":!1},{default:t(()=>[e(s(x),{size:"small",ghost:"",type:"primary"},{default:t(()=>a[26]||(a[26]=[d("选择文件")])),_:1,__:[26]})]),_:1},8,["custom-request"]))]}),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}}),_t=he({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:_e(["reset","search","search1","clear"],["update:model"]),setup(B,{emit:ae}){const C=qe(),D=ae,h=ke(),{formRef:l,restoreValidation:O}=xe(),c=Se(B,"model"),N=te([]),{pageData:I,getData:V,nextPage:k}=me(ze),H=async v=>{const b=v.currentTarget;b.scrollTop+b.offsetHeight>=b.scrollHeight&&I.data.length<I.total&&(k(),N.value=I.data)},le=async v=>{var b;v?(c.value.pid=v,D("search1"),h.setProjectInfo({pname:(b=N.value.find(P=>P.id==v))==null?void 0:b.proname,pid:v})):D("clear")},ne=async v=>{await V({fuzzy:v,page:1}),N.value=I.data},se=async()=>{await V({page:1}),N.value=I.data,D("search1")},oe=async v=>{c.value.status=v,D("search1")},T=async()=>{c.value.status=null},J=async()=>{var v,b;await V({fuzzy:C.query.pname?C.query.pname:h.userInfo.pname}),N.value=I.data,c.value.pid=C.query.prjId?Number(C.query.prjId):h.userInfo.pid?h.userInfo.pid:(v=N.value[0])==null?void 0:v.id,h.setProjectInfo({pid:c.value.pid,pname:(b=N.value.find(P=>P.id==c.value.pid))==null?void 0:b.proname}),D("search")};J();async function K(){await O(),c.value.fuzzy="",c.value.pid=null,c.value.status=null,D("reset")}const re=()=>{c.value.fuzzy="",D("search")};async function W(){D("search")}return Ne(()=>C.query,v=>{v.pname&&J()}),(v,b)=>{const P=ee,R=$e,Z=F,ue=dt,Q=x,ie=it,de=we,i=Re,E=Te,X=Pe;return g(),q(X,{bordered:!1,size:"small",class:"card-wrapper"},{default:t(()=>[e(E,{ref_key:"formRef",ref:l,model:c.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:Xe(W,["enter"])},{default:t(()=>[e(i,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:t(()=>[e(R,{span:"24 s:12 m:6",label:"项目列表",path:"pid"},{default:t(()=>[e(P,{filterable:"",clearable:"",value:c.value.pid,"onUpdate:value":[b[0]||(b[0]=r=>c.value.pid=r),le],placeholder:"请选择项目","label-field":"proname","value-field":"id",onClear:se,onSearch:ne,options:N.value,onScroll:H},null,8,["value","options"])]),_:1}),e(R,{span:"24 s:12 m:6",label:"状态",path:"status"},{default:t(()=>[e(P,{clearable:"",filterable:"",value:c.value.status,"onUpdate:value":[b[1]||(b[1]=r=>c.value.status=r),oe],placeholder:"请选择状态",onClear:T,options:[{label:"待调试",value:0},{label:"开始调试",value:1},{label:"完成调试(待审核)",value:2},{label:"审核完成",value:3}]},null,8,["value"])]),_:1}),e(R,{span:"24 s:12 m:6",label:"业务名称",path:"fuzzy"},{default:t(()=>[e(Z,{value:c.value.fuzzy,"onUpdate:value":b[2]||(b[2]=r=>c.value.fuzzy=r),placeholder:"请输入",clearable:"",onClear:re},null,8,["value"])]),_:1}),e(R,{span:"24  s:12 m:6",class:"pr-24px"},{default:t(()=>[e(de,{class:"w-full"},{default:t(()=>[e(Q,{onClick:K},{icon:t(()=>[e(ue,{class:"text-icon"})]),default:t(()=>[d(" "+f(s(A)("common.reset")),1)]),_:1}),e(Q,{type:"primary",ghost:"",onClick:W},{icon:t(()=>[e(ie,{class:"text-icon"})]),default:t(()=>[d(" "+f(s(A)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),ht={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},kt={key:0},wt={key:1},Ct={key:0},Dt={key:1},xt={key:0},St={key:1},Nt={key:0},Tt={key:1};function De(B){return typeof B=="function"||Object.prototype.toString.call(B)==="[object Object]"&&!st(B)}const Vt=he({name:"projectmanagement_business",__name:"index",setup(B){const ae=Ye(),C=ke(),D=qe(),{columns:h,columnChecks:l,data:O,getData:c,loading:N,pagination:I,mobilePagination:V,searchParams:k}=ot({showTotal:!0,immediate:!1,apiFn:nt,apiParams:{page:1,pageSize:20,limit:20,fuzzy:"",status:null,dbcreater:void 0,_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48},{key:"debugname",title:"业务名称",align:"center",width:180},{key:"proname",title:"所属项目",align:"center",width:180},{key:"docker",title:"对接方",align:"center",width:120},{key:"dockcharge",title:"对接方负责人",align:"center",width:120},{key:"dockcontact",title:"联系方式",align:"center",width:120},{key:"status",title:"状态",align:"center",width:120,render(r){return e(ce,{type:r.status==0?"info":r.status==1||r.status==2?"warning":"success"},{default:()=>[r.status==0?"待调试":r.status==1?"开始调试":r.status==2?"完成调试":"审核完成"]})}},{key:"dbusername",title:"调试人",align:"center",width:120},{key:"notes",title:"备注",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dbtime",title:"创建时间",align:"center",width:180},{key:"operate",title:A("common.operate"),align:"center",width:280,fixed:"right",render:r=>{let n;return e("div",{class:"flex-center gap-8px"},[r.status==0&&r.dbcreater==C.userInfo.id&&e(fe,{onPositiveClick:()=>v(r,1)},{default:()=>"确定开始调试吗？",trigger:()=>M(e(x,{type:"success",ghost:!0,size:"small"},{default:()=>["开始"]}),[[G("no-auth"),"project:Debug:update"]])}),r.status==1&&r.dbcreater==C.userInfo.id&&e(fe,{onPositiveClick:()=>v(r,2)},{default:()=>"确定完成调试？",trigger:()=>M(e(x,{type:"success",ghost:!0,size:"small"},{default:()=>["完成"]}),[[G("no-auth"),"project:Debug:update"]])}),r.status==2&&(C.userInfo.usertype==0||C.userInfo.usertype==2)&&e(fe,{onPositiveClick:()=>v(r,3)},{default:()=>"是否确认执行审核操作？",trigger:()=>M(e(x,{type:"warning",ghost:!0,size:"small"},{default:()=>["审核"]}),[[G("no-auth"),"project:Debug:update"]])}),M(e(x,{type:"primary",ghost:!0,size:"small",onClick:()=>X(r)},{default:()=>[d("详情")]}),[[G("no-auth"),"project:Debug:select"]]),M(e(x,{type:"primary",ghost:!0,size:"small",onClick:()=>b(r.id)},De(n=A("common.edit"))?n:{default:()=>[n]}),[[G("no-auth"),"project:Debug:update"]]),e(fe,{onPositiveClick:()=>W(r.id)},{default:()=>A("common.confirmDelete"),trigger:()=>{let j;return M(e(x,{type:"error",ghost:!0,size:"small"},De(j=A("common.delete"))?j:{default:()=>[j]}),[[G("no-auth"),"project:Debug:delete"]])}})])}}]}),{drawerVisible:H,operateType:le,editingData:ne,handleAdd:se,handleEdit:oe,checkedRowKeys:T,onBatchDeleted:J,onDeleted:K}=rt(O,c);et(async()=>{});async function re(){console.log(T.value),P(T.value.join(","),r=>{J()})}async function W(r){const{data:n,error:j}=await Ce(r,k.pid);j||K()}const v=async(r,n)=>{var L;const{data:j,error:$}=await Ue([{id:r.id,status:n,pid:r.pid}]);$||((L=window.$message)==null||L.success("操作成功"),c())};function b(r){oe(r)}async function P(r,n){const{data:j,error:$}=await Ce(r,k.pid);if(!$)n&&n(j);else return!1}const R=te(-1),Z=r=>{r>0?(R.value=r,k.dbcreater=JSON.parse(JSON.stringify(r)),c()):(k.dbcreater=void 0,R.value=-1,c())},ue=r=>{c()},Q=()=>{if(console.log(D.query.prjId,"route.query.prjId"),D.query.debug){k.status=0,k.dbcreater=C.userInfo.id,Z(C.userInfo.id);return}D.query.review&&(k.status=2),c()},ie=()=>{c()},de=()=>{O.value=[],I.itemCount=0},i=te(null),E=te(!1),X=r=>{i.value=r,E.value=!0};return(r,n)=>{const j=ft,$=lt,L=we,pe=Ae,Y=Me,ve=Oe,be=tt,ye=Pe,w=ct,o=pt,a=je,m=G("no-auth");return g(),U("div",ht,[e(_t,{model:s(k),"onUpdate:model":n[0]||(n[0]=u=>ge(k)?k.value=u:null),onReset:ie,onSearch:Q,onSearch1:s(c),onClear:de},null,8,["model","onSearch1"]),e(ye,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:t(()=>[e(L,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:t(()=>[n[6]||(n[6]=_("div",null,"待调试业务",-1)),e($,{size:"small",value:R.value,"onUpdate:value":[n[1]||(n[1]=u=>R.value=u),Z],name:"radiobuttongroup1"},{default:t(()=>[e(j,{value:-1,label:"默认"}),e(j,{value:s(C).userInfo.id,label:"我的调试"},null,8,["value"])]),_:1},8,["value"])]),_:1,__:[6]})]),"header-extra":t(()=>[e(L,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:t(()=>[M((g(),q(s(x),{onClick:s(se),size:"small",ghost:"",type:"primary"},{icon:t(()=>[e(pe,{class:"text-icon"})]),default:t(()=>[n[7]||(n[7]=d(" "+f("新增")))]),_:1,__:[7]},8,["onClick"])),[[m,"project:Debug:insert"]]),e(s(fe),{onPositiveClick:re},{trigger:t(()=>[M((g(),q(s(x),{size:"small",ghost:"",type:"error",disabled:s(T).length==0},{icon:t(()=>[e(Y,{class:at(["text-icon",{"animate-spin":s(N)}])},null,8,["class"])]),default:t(()=>[n[8]||(n[8]=d(" "+f("批量删除")))]),_:1,__:[8]},8,["disabled"])),[[m,"project:Debug:delete"]])]),default:t(()=>[n[9]||(n[9]=d(" 确定要删除选中的吗？ "))]),_:1,__:[9]}),e(ve,{columns:s(l),"onUpdate:columns":n[2]||(n[2]=u=>ge(l)?l.value=u:null)},null,8,["columns"])]),_:1})]),default:t(()=>[e(be,{"checked-row-keys":s(T),"onUpdate:checkedRowKeys":n[3]||(n[3]=u=>ge(T)?T.value=u:null),columns:s(h),data:s(O),size:"small","flex-height":!s(ae).isMobile,loading:s(N),remote:"","row-key":u=>u.id,"scroll-x":s(h).reduce((u,S)=>u+(S.width||100),0),pagination:s(V),class:"sm:h-full","onUpdate:filters":ue},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","scroll-x","pagination"]),e(yt,{visible:s(H),"onUpdate:visible":n[4]||(n[4]=u=>ge(H)?H.value=u:null),onSubmitted:s(c),"operate-type":s(le),pid:s(k).pid,"row-data":s(ne)},null,8,["visible","onSubmitted","operate-type","pid","row-data"])]),_:1}),e(a,{show:E.value,"onUpdate:show":n[5]||(n[5]=u=>E.value=u),title:"查看详情",preset:"card",class:"w-1200px"},{default:t(()=>[e(o,{bordered:"","label-placement":"left","label-align":"center",columns:2,"label-style":{width:"160px"}},{default:t(()=>[e(w,null,{label:t(()=>n[10]||(n[10]=[d(" 权重 ")])),default:t(()=>[_("span",null,f(i.value.tname),1)]),_:1}),e(w,null,{label:t(()=>n[11]||(n[11]=[d(" 业务名称 ")])),default:t(()=>[_("span",null,f(i.value.debugname),1)]),_:1}),e(w,null,{label:t(()=>n[12]||(n[12]=[d(" 计划起止时间 ")])),default:t(()=>[_("span",null,f(i.value.starttime)+"--"+f(i.value.endtime),1)]),_:1}),e(w,null,{label:t(()=>n[13]||(n[13]=[d(" 对接方 ")])),default:t(()=>[_("span",null,f(i.value.docker),1)]),_:1}),e(w,null,{label:t(()=>n[14]||(n[14]=[d(" 对接方负责人 ")])),default:t(()=>[_("span",null,f(i.value.dockcharge),1)]),_:1}),e(w,null,{label:t(()=>n[15]||(n[15]=[d(" 联系方式 ")])),default:t(()=>[_("span",null,f(i.value.dockcontact),1)]),_:1}),e(w,null,{label:t(()=>n[16]||(n[16]=[d(" 状态 ")])),default:t(()=>[i.value.status==0?(g(),q(s(ce),{key:0,type:"default"},{default:t(()=>n[17]||(n[17]=[d("未调试")])),_:1,__:[17]})):z("",!0),i.value.status==1?(g(),q(s(ce),{key:1,type:"info"},{default:t(()=>n[18]||(n[18]=[d("开始调试")])),_:1,__:[18]})):z("",!0),i.value.status==2?(g(),q(s(ce),{key:2,type:"success"},{default:t(()=>n[19]||(n[19]=[d("完成调试")])),_:1,__:[19]})):z("",!0),i.value.status==3?(g(),q(s(ce),{key:3,type:"success"},{default:t(()=>n[20]||(n[20]=[d("审核完成")])),_:1,__:[20]})):z("",!0)]),_:1}),e(w,null,{label:t(()=>n[21]||(n[21]=[d(" 备注 ")])),default:t(()=>[_("span",null,f(i.value.notes),1)]),_:1}),e(w,null,{label:t(()=>n[22]||(n[22]=[d(" 调试人 ")])),default:t(()=>[_("span",null,f(i.value.dbusername),1)]),_:1}),e(w,null,{label:t(()=>n[23]||(n[23]=[d(" 调试时间 ")])),default:t(()=>[_("span",null,f(i.value.dbdbtime),1)]),_:1}),e(w,null,{label:t(()=>n[24]||(n[24]=[d(" 审核人 ")])),default:t(()=>[_("span",null,f(i.value.ckcreater),1)]),_:1}),e(w,null,{label:t(()=>n[25]||(n[25]=[d(" 审核时间 ")])),default:t(()=>[_("span",null,f(i.value.ckdbtime),1)]),_:1}),e(w,null,{label:t(()=>n[26]||(n[26]=[d(" 附件1 ")])),default:t(()=>{var u;return[i.value.re1?(g(),U("span",kt,"文件别名"+f(i.value.re1),1)):z("",!0),i.value.fl1?(g(),U("span",wt,f((u=i.value.fl1)==null?void 0:u.split("?")[1]),1)):z("",!0)]}),_:1}),e(w,null,{label:t(()=>n[27]||(n[27]=[d(" 附件2 ")])),default:t(()=>{var u;return[i.value.re2?(g(),U("span",Ct,"文件别名"+f(i.value.re2),1)):z("",!0),i.value.fl2?(g(),U("span",Dt,f((u=i.value.fl2)==null?void 0:u.split("?")[1]),1)):z("",!0)]}),_:1}),e(w,null,{label:t(()=>n[28]||(n[28]=[d(" 附件3 ")])),default:t(()=>{var u;return[i.value.re3?(g(),U("span",xt,"文件别名"+f(i.value.re3),1)):z("",!0),i.value.fl3?(g(),U("span",St,f((u=i.value.fl3)==null?void 0:u.split("?")[1]),1)):z("",!0)]}),_:1}),e(w,null,{label:t(()=>n[29]||(n[29]=[d(" 附件4 ")])),default:t(()=>{var u;return[i.value.re4?(g(),U("span",Nt,"文件别名"+f(i.value.re4),1)):z("",!0),i.value.fl4?(g(),U("span",Tt,f((u=i.value.fl4)==null?void 0:u.split("?")[1]),1)):z("",!0)]}),_:1})]),_:1})]),_:1},8,["show"])])}}});export{Vt as default};
