import{_ as G}from"./table-column-setting.vue_vue_type_script_setup_true_lang-ClnnMZ8m.js";import{_ as j}from"./export-CfTimPav.js";import{_ as I}from"./round-search-DvEif4Da.js";import{d as J,b0 as d,m as k,o as v,b as K,g as t,w as a,f as n,B as x,ag as M,h as b,t as D,$ as T,c as A,aq as N,F as H,T as L,a7 as Q,at as W,c0 as X,R as Y,c1 as Z,_ as ee}from"./index-BZ_tiE68.js";import{a as te}from"./metar-CIlnaown.js";import{u as ne,a as ae}from"./table-CbqdblXu.js";import{e as oe}from"./exportExcel-Bv4G4H50.js";import{_ as se}from"./DatePicker-Do0AGOQp.js";import{_ as le}from"./FormItemGridItem-B6-5it0O.js";import{_ as ie}from"./Grid-D7XZy9aU.js";const ce={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},re=J({name:"realtimequery_nwpquery",__name:"index",setup(me){const{columns:g,columnChecks:_,data:m,getData:p,loading:h,mobilePagination:C,searchParams:u,resetSearchParams:de}=ne({apiFn:te,apiParams:{page:1,pageSize:20,limit:20,startTime:d(1,Date.now())||null,endTime:d(1,Date.now()+2592e5)||null,_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",width:50},{key:"dbtime",title:"时间",align:"center",width:160},{key:"tt2",title:"2m气温(℃)",align:"center",width:100},{key:"dt2",title:"2m露点(℃)",align:"center",width:100},{key:"rh2",title:"相对湿度(%)",align:"center",width:100},{key:"wd10",title:"10m风向(°)",align:"center",width:100},{key:"ws10",title:"10m风速(m/s)",align:"center",width:100},{key:"rain",title:"降水量(mm)",align:"center",width:100},{key:"ps",title:"气压(Pa)",align:"center",width:100},{key:"tcc",title:"总云量(%)",align:"center",width:100},{key:"ssrd",title:"太阳总辐射(w/m²)",align:"center",width:140},{key:"tsdsr",title:"太阳直接辐射(w/m²)",align:"center",width:140},{key:"ssrdiff",title:"太阳散辐射(w/m²)",align:"center",width:140},{key:"lasttime",title:"最后更新时间",align:"center",width:160}]}),{drawerVisible:_e,operateType:pe,editingData:ue,handleAdd:fe,handleEdit:ge,checkedRowKeys:c,onBatchDeleted:he,onDeleted:we}=ae(m,p),S=()=>{p()},w=k([Date.now(),Date.now()+864e5*3]);async function P(r,e){u.startTime=d(1,e[0]),u.endTime=d(1,e[1]),p()}const z=()=>{const r={};g.value.forEach(o=>{o.key!="index"&&o.key!="operation"&&o.type!=="selection"&&(r[o.key]=o.title)});const e=[];m.value.forEach(o=>{if(c.value.includes(o.id)){const l=JSON.parse(JSON.stringify(r));for(const i in l)o.hasOwnProperty(i)?l[i]=o[i]:l[i]="";e.push(l)}}),oe(e,r,"天气预报数据")},f=k("0"),B={近一天:[Date.now()-864e5*1,Date.now()],近三天:[Date.now()-864e5*3,Date.now()],近七天:[Date.now()-864e5*7,Date.now()]};return(r,e)=>{const o=se,l=I,i=le,$=ie,E=L,y=Q,F=W,R=X,U=j,O=G,V=Y,q=Z;return v(),K("div",ce,[t(y,{bordered:!1,size:"small"},{default:a(()=>[t(E,{ref:"formRef",model:n(u),"label-placement":"left","show-feedback":!1},{default:a(()=>[t($,{"y-gap":16,responsive:"screen","item-responsive":""},{default:a(()=>[t(i,{span:"24 s:12 m:12",label:"起止时间",path:"startTime"},{default:a(()=>[t(o,{value:w.value,"onUpdate:value":e[0]||(e[0]=s=>w.value=s),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":P,"default-time":["00:00:00","23:59:59"],shortcuts:B},null,8,["value"]),t(n(x),{type:"primary",ghost:"",onClick:S,class:"ml-20px"},{icon:a(()=>[t(l,{class:M(["text-icon",{"animate-spin":n(h)}])},null,8,["class"])]),default:a(()=>[b(" "+D(n(T)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(y,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{default:a(()=>[t(q,{type:"card",animated:"",value:f.value,"onUpdate:value":e[3]||(e[3]=s=>f.value=s),class:"h-100%","pane-wrapper-style":{flex:1}},{suffix:a(()=>[f.value=="0"?(v(),A(V,{key:0,align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[t(n(x),{onClick:z,size:"small",disabled:n(c).length==0},{icon:a(()=>[t(U,{class:"text-icon"})]),default:a(()=>[b(" "+D(n(T)("common.export")),1)]),_:1},8,["disabled"]),t(O,{columns:n(_),"onUpdate:columns":e[2]||(e[2]=s=>N(_)?_.value=s:null)},null,8,["columns"])]),_:1})):H("",!0)]),default:a(()=>[t(R,{name:"0",tab:"表格",class:"h-100%"},{default:a(()=>[t(F,{"checked-row-keys":n(c),"onUpdate:checkedRowKeys":e[1]||(e[1]=s=>N(c)?c.value=s:null),columns:n(g),data:n(m),size:"small",loading:n(h),remote:"","row-key":s=>s.id,pagination:n(m).length?n(C):void 0,class:"sm:h-full","flex-height":!0,"scroll-x":""},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1})]),_:1},8,["value"])]),_:1})])}}}),Pe=ee(re,[["__scopeId","data-v-1ad56331"]]);export{Pe as default};
