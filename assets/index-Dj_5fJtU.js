import{d as N,j as D,r as z,o as j,c as q,w as l,g as e,h,e8 as ee,bU as le,G as ae,ai as ne,B as W,J as H,a0 as S,I,af as te,aM as G,$,z as B,y as O,e as E,i as f,t as V,a9 as se,ak as F,al as de,ae as ie,bR as oe,bS as me,M as ue}from"./index-CI2HX52s.js";import{h as re,i as pe,j as fe,k as ce,l as be,m as K}from"./basic_config-BEwNNSL0.js";import{a as _e,_ as J}from"./Grid-BjU2Fuoz.js";import{_ as ve}from"./table-column-setting.vue_vue_type_script_setup_true_lang-B5exJvFm.js";import{_ as xe}from"./round-delete-Qhm9c8vJ.js";import{_ as ge}from"./round-search-DiRf-ajt.js";import{u as we,a as he}from"./table-CL5JRpix.js";import{N as M}from"./Popconfirm-D1QMSnFH.js";import{_ as ye}from"./FormItemGridItem-H5-g3JS3.js";import{_ as ke}from"./DataTable-iODjs3SB.js";import"./RadioGroup-A-fOClpI.js";import"./Forward-CE5gwjyU.js";const Ue=N({__name:"overLimitConfig",setup(y){const _=D(0);(async()=>{const{data:p,error:n}=await ee({_t:new Date().getTime()});n||(_.value=p.maxeqmt)})();const v=async()=>{const{data:p,error:n}=await re();n||Object.assign(m,p)};v();const m=z({peanble:0,maxv:0,minv:0,id:void 0}),x=D(),k={maxv:{type:"number",required:!0,message:"请输入最大值",trigger:"blur"},minv:{type:"number",required:!0,message:"请输入最小值",trigger:"blur"}},U=async()=>{await x.value.validate(),pe(m).then(p=>{var n;p.error||((n=window.$message)==null||n.success("保存成功"),v())})},a=z({id:void 0,feanble:0,maxdt2:void 0,mindt2:void 0,maxrh2:void 0,minrh2:void 0,maxwd10:void 0,minwd10:void 0,maxws10:void 0,minws10:void 0,maxrain:void 0,minrain:void 0,maxps:void 0,minps:void 0,maxtcc:void 0,mintcc:void 0,maxssrd:void 0,minssrd:void 0,maxtsdsr:void 0,mintsdsr:void 0,maxssrdiff:void 0,minssrdiff:void 0}),g=async()=>{const{data:p,error:n}=await fe();n||Object.assign(a,p)};g();const R=()=>{var c,s,i;const p=[["maxtt2","mintt2","2m气温(°C)"],["maxdt2","mindt2","2m露点温度(°C)"],["maxrh2","minrh2","2m相对湿度(%)"],["maxwd10","minwd10","10m风向(°)"],["maxws10","minws10","10m风速(m/s)"],["maxrain","minrain","降水(mm)"],["maxps","minps","气压(hPa)"],["maxtcc","mintcc","总云量(%)"],["maxssrd","minssrd","太阳总辐射(W/m²)"],["maxtsdsr","mintsdsr","太阳直接辐射(W/m²)"],["maxssrdiff","minssrdiff","太阳散辐射(W/m²)"]];let n=!1;for(const[b,r,d]of p){const u=a[b],o=a[r];if((o!=null||o!=null)&&u==null||(u!=null||u!=null)&&o==null){(c=window.$message)==null||c.error(`${d}的上下限必须同时填写或同时为空`);return}if((u!=null&&u!==void 0||o!=null&&o!==void 0)&&(n=!0),u!=null&&o!=null&&o>u){(s=window.$message)==null||s.error(`${d}的下限不能超过上限`);return}}if(!n&&a.feanble==1){(i=window.$message)==null||i.error("至少需要填写一组有效的上下限");return}ce(a).then(b=>{var r;b.error||((r=window.$message)==null||r.success("保存成功"),g())})};return(p,n)=>{const c=le,s=ae,i=ne,b=W,r=H,d=S,u=I,o=_e,L=J,C=te;return j(),q(C,{style:{maxHeight:"calc(100vh - 220px)"}},{default:l(()=>[e(d,{title:"功率越限配置",class:"mb-15px"},{default:l(()=>[e(r,{ref_key:"powerFormRef",ref:x,model:m,inline:"","label-placement":"left","show-feedback":!1,rules:k,"label-width":"auto",style:{width:"100%"}},{default:l(()=>[e(s,{label:"是否开启"},{default:l(()=>[e(c,{value:m.peanble,"onUpdate:value":n[0]||(n[0]=t=>m.peanble=t),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),e(s,{label:"上限(MW)",path:m.peanble==1?"maxv":""},{default:l(()=>[e(i,{value:m.maxv,"onUpdate:value":n[1]||(n[1]=t=>m.maxv=t),disabled:m.peanble==0,placeholder:"",min:m.minv,max:_.value},null,8,["value","disabled","min","max"])]),_:1},8,["path"]),e(s,{label:"下限(MW)",path:m.peanble==1?"minv":""},{default:l(()=>[e(i,{value:m.minv,"onUpdate:value":n[2]||(n[2]=t=>m.minv=t),disabled:m.peanble==0,placeholder:"",min:0},null,8,["value","disabled"])]),_:1},8,["path"]),e(s,{label:""},{default:l(()=>[e(b,{type:"info",ghost:"",onClick:U},{default:l(()=>[h(" 保存 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(d,null,{header:l(()=>[e(u,{align:"center"},{default:l(()=>[h(" 天气预报越限配置 "),e(s,{label:"是否开启","label-placement":"left","show-feedback":!1},{default:l(()=>[e(c,{value:a.feanble,"onUpdate:value":n[3]||(n[3]=t=>a.feanble=t),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1})]),_:1})]),default:l(()=>[e(L,{"x-gap":"15","y-gap":"15",cols:8,"item-responsive":"",responsive:"screen"},{default:l(()=>[e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"2m气温(°C) 上限 ","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxtt2,"onUpdate:value":n[4]||(n[4]=t=>a.maxtt2=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"2m气温(°C) 下限 ","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.mintt2,"onUpdate:value":n[5]||(n[5]=t=>a.mintt2=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"2m露点温度(°C)上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxdt2,"onUpdate:value":n[6]||(n[6]=t=>a.maxdt2=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"2m露点温度(°C)下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.mindt2,"onUpdate:value":n[7]||(n[7]=t=>a.mindt2=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"相对湿度(%)上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxrh2,"onUpdate:value":n[8]||(n[8]=t=>a.maxrh2=t),max:100,precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"相对湿度(%)下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.minrh2,"onUpdate:value":n[9]||(n[9]=t=>a.minrh2=t),min:0,precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"总云量(%)上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxtcc,"onUpdate:value":n[10]||(n[10]=t=>a.maxtcc=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"总云量(%)下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.mintcc,"onUpdate:value":n[11]||(n[11]=t=>a.mintcc=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"降水量(mm)上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxrain,"onUpdate:value":n[12]||(n[12]=t=>a.maxrain=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"降水量(mm)下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.minrain,"onUpdate:value":n[13]||(n[13]=t=>a.minrain=t),min:0,precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"10m风速(m/s) 上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxws10,"onUpdate:value":n[14]||(n[14]=t=>a.maxws10=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"10m风速(m/s) 下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.minws10,"onUpdate:value":n[15]||(n[15]=t=>a.minws10=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"10m风向(°) 上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxwd10,"onUpdate:value":n[16]||(n[16]=t=>a.maxwd10=t),max:360,precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"10m风向(°) 下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.minwd10,"onUpdate:value":n[17]||(n[17]=t=>a.minwd10=t),min:-360,precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"气压(hPa)上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxps,"onUpdate:value":n[18]||(n[18]=t=>a.maxps=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"气压(hPa)下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.minps,"onUpdate:value":n[19]||(n[19]=t=>a.minps=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"太阳总辐射(W/m²)上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxssrd,"onUpdate:value":n[20]||(n[20]=t=>a.maxssrd=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"太阳总辐射(W/m²)下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.minssrd,"onUpdate:value":n[21]||(n[21]=t=>a.minssrd=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"太阳直接辐射(W/m²)上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxtsdsr,"onUpdate:value":n[22]||(n[22]=t=>a.maxtsdsr=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"太阳直接辐射(W/m²)下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.mintsdsr,"onUpdate:value":n[23]||(n[23]=t=>a.mintsdsr=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1}),e(o,{span:"8 m:4 l:2"},{default:l(()=>[e(d,{"content-style":{padding:"15px"}},{default:l(()=>[e(s,{label:"太阳散辐射(W/m²)上限","label-placement":"left","show-feedback":!1,class:"mb-10px"},{default:l(()=>[e(i,{value:a.maxssrdiff,"onUpdate:value":n[24]||(n[24]=t=>a.maxssrdiff=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1}),e(s,{label:"太阳散辐射(W/m²)下限","label-placement":"left","show-feedback":!1},{default:l(()=>[e(i,{value:a.minssrdiff,"onUpdate:value":n[25]||(n[25]=t=>a.minssrdiff=t),precision:1,disabled:a.feanble==0,placeholder:"请输入"},null,8,["value","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{justify:"center"},{default:l(()=>[e(s,{label:""},{default:l(()=>[e(u,{justify:"center",class:"w-100%"},{default:l(()=>[e(b,{type:"info",ghost:"",onClick:R},{default:l(()=>[h(" 保存 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ce={class:"h-full flex-col"};function $e(y){return typeof y=="function"||Object.prototype.toString.call(y)==="[object Object]"&&!de(y)}const Pe=N({__name:"overLimitLog",setup(y){const _=D(window.innerHeight-430),P=[{label:"功率",value:0},{label:"天气预报",value:1}],{columns:v,columnChecks:m,data:x,getData:k,loading:U,mobilePagination:a,searchParams:g,resetSearchParams:R}=we({apiFn:be,apiParams:{page:1,pageSize:20,limit:20,cname:void 0,ltype:0,_t:new Date().getTime()},immediate:!1,showTotal:!0,columns:()=>[{type:"selection",align:"center",width:48},{key:"ovalue",title:"原始值",align:"center",width:100},{key:"lvalue",title:"限值",align:"center",width:140},{key:"lfg",title:"限值方向",align:"center",width:140,render:r=>e(G,{type:"info",round:!0},{default:()=>[r.lfg===0?"越上限":"越下限"]})},{key:"dbtime",title:"时间",align:"center",width:140},{key:"ltype",title:"限值类型",align:"center",width:100,render:r=>e(G,{type:"info",round:!0},{default:()=>{var d;return[(d=P.find(u=>u.value===r.ltype))==null?void 0:d.label]}})},{key:"cname",title:"字段",align:"center",width:100},{key:"operate",title:$("common.operate"),align:"center",width:200,fixed:"right",render:r=>e("div",{class:"flex-center gap-8px"},[B(e(M,{onPositiveClick:()=>b(r.id)},{default:()=>$("common.confirmDelete"),trigger:()=>{let d;return e(W,{type:"error",ghost:!0,size:"small"},$e(d=$("common.delete"))?d:{default:()=>[d]})}}),[[O("no-auth"),"limit.record.delete"]])])}]}),{checkedRowKeys:p,onDeleted:n}=he(x,k),c=()=>{k()},s=r=>{g.ltype=r,c()},i=async()=>{const r=p.value.join(","),{data:d,error:u}=await K({ids:r});u||(n(),p.value=[])},b=async r=>{const{data:d,error:u}=await K({ids:r});u||n()};return(r,d)=>{const u=ie,o=ye,L=ge,C=I,t=J,A=H,T=S,Q=xe,X=ve,Y=ke,Z=O("no-auth");return j(),E("div",Ce,[e(T,{bordered:!1,size:"small"},{default:l(()=>[e(A,{ref:"formRef",model:f(g),"label-placement":"left","show-feedback":!1},{default:l(()=>[e(t,{"y-gap":16,responsive:"screen","item-responsive":""},{default:l(()=>[e(o,{span:"24 s:12 m:5",label:"限值类型",class:"pr-24px"},{default:l(()=>[e(u,{value:f(g).ltype,"onUpdate:value":[d[0]||(d[0]=w=>f(g).ltype=w),s],options:P,filterable:"",placeholder:"请选择限值类型",style:{width:"100%"}},null,8,["value"])]),_:1}),e(o,{span:"24 s:12 m:5",label:"",class:"pr-24px"},{default:l(()=>[e(C,{class:"w-full"},{default:l(()=>[e(f(W),{type:"primary",ghost:"",onClick:c},{icon:l(()=>[e(L,{class:"text-icon"})]),default:l(()=>[h(" "+V(f($)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(T,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:l(()=>[e(C,{align:"center",wrap:"",justify:"start",class:"lt-sm:w-200px"},{default:l(()=>[h(" 限值记录 ")]),_:1})]),"header-extra":l(()=>[e(C,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:l(()=>[B((j(),q(f(M),{onPositiveClick:i},{trigger:l(()=>[e(f(W),{size:"small",ghost:"",type:"error",disabled:f(p).length==0},{icon:l(()=>[e(Q,{class:se(["text-icon",{"animate-spin":f(U)}])},null,8,["class"])]),default:l(()=>[h(" "+V(f($)("common.batchDelete")),1)]),_:1},8,["disabled"])]),default:l(()=>[h(" 确认删除选中的项吗？ ")]),_:1})),[[Z,"pvModule:delete"]]),e(X,{columns:f(m),"onUpdate:columns":d[1]||(d[1]=w=>F(m)?m.value=w:null)},null,8,["columns"])]),_:1})]),default:l(()=>[e(Y,{"checked-row-keys":f(p),"onUpdate:checkedRowKeys":d[2]||(d[2]=w=>F(p)?p.value=w:null),columns:f(v),data:f(x),size:"small",loading:f(U),remote:"","row-key":w=>w.id,pagination:f(a),"max-height":_.value,class:"sm:h-full"},null,8,["checked-row-keys","columns","data","loading","row-key","pagination","max-height"])]),_:1})])}}}),We={class:"h-full"},De=N({name:"stationmanagement_overlimitconfiguration",__name:"index",setup(y){const _=D("越限配置");return(P,v)=>{const m=oe,x=me,k=S;return j(),E("div",We,[e(k,{style:{"margin-bottom":"16px"},class:"h-full","content-style":{height:"100%"}},{default:l(()=>[e(x,{type:"card",animated:"",class:"h-100%",value:_.value,"onUpdate:value":v[0]||(v[0]=U=>_.value=U)},{default:l(()=>[e(m,{name:"越限配置",tab:"越限配置"},{default:l(()=>[e(Ue)]),_:1}),e(m,{name:"限值记录",tab:"限值记录",class:"h-100%"},{default:l(()=>[e(Pe)]),_:1})]),_:1},8,["value"])]),_:1})])}}}),Ke=ue(De,[["__scopeId","data-v-3fe14484"]]);export{Ke as default};
