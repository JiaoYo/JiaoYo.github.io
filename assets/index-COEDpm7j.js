import{_ as Be}from"./table-column-setting.vue_vue_type_script_setup_true_lang-Bv9tlAlp.js";import{_ as Fe}from"./round-delete-B_8F17d_.js";import{_ as Ve}from"./round-add-DT_ryrzO.js";import{aW as de,d as ye,av as _e,ax as he,z as ge,at as Se,s as K,cv as me,aJ as Le,c as P,o as v,w as o,f as s,M as Ce,h as a,H as te,au as be,a3 as Me,b as C,aO as Ne,a_ as De,e as r,t as _,B as x,g as y,G as Q,az as Ee,aA as He,J as xe,a4 as Oe,aS as ze,aE as ve,aR as ue,aG as Je,a6 as Ge,W as Te,A as Ke,i as We,L as Qe,$ as se,a2 as Ue,aI as Xe,F as ie,aK as fe,ay as Ye,I as le,aL as Ze,aQ as et}from"./index-BHYK3A_G.js";import{u as tt,a as lt}from"./table-B6LlmD7Q.js";import{u as Ie}from"./usePageData-BU1qqIQs.js";import{_ as Ae}from"./Grid-B2A8-T_X.js";import{_ as je}from"./FormItemGridItem-C5bXUl4-.js";import{_ as Re}from"./DatePicker-Bf16rwUA.js";import{_ as st}from"./round-search-Cl9yVEe0.js";import{_ as at}from"./round-refresh-DtTh3Oti.js";import{N as ot}from"./Table-Ma1-Ugmt.js";import{N as we}from"./Popconfirm-CZ_7v-Ns.js";function nt(g){return de({url:"/projectMeeting/getPage.do",method:"get",params:g})}function Pe(g){return de({url:"/projectMeeting/getById.do",method:"get",params:{id:g}})}function rt(g){return de({url:"/projectMeeting/insert.do",method:"post",data:g})}function it(g){return de({url:"/projectMeeting/update.do",method:"put",data:g})}function ke(g){return de({url:"/projectMeeting/delete.do",method:"delete",params:{arrIds:g}})}const ut={class:"flex pr-20px"},dt={class:"flex-1"},pt={class:"flex mb-10px"},ct={class:"flex mb-10px"},mt={class:"flex mb-10px"},ft={class:"flex mb-10px"},vt={class:"flex-col ml-20px justify-center"},_t={key:0,class:""},yt={key:1,class:"flex items-center w-300px"},gt={key:0,class:""},bt={key:1,class:"flex items-center w-300px"},ht={key:0,class:""},xt={key:1,class:"flex items-center w-300px"},wt=ye({__name:"meetingModal",props:_e({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:_e(["submitted"],["update:visible"]),setup(g,{emit:L}){var Z;const $=he(g,"visible"),O=(Z=ge().userInfo)==null?void 0:Z.usertype,q=g,f=L,b=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],E=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],c=[{label:"生产部周例会",value:4}],B=[{label:"销售周例会",value:5}],M=[...b,...E,...c,...B,{label:"管理层周例会",value:6}];Se(()=>$.value,async t=>{t&&w()});const F=K(null),e=K({id:void 0,con1:"",mdbtime:void 0,mtype:void 0,musers:[],mtopic:"",contentArr:[{id:me(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}),n={con2:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtopic:{type:"string",required:!0,message:"请输入",trigger:"blur"},mdbtime:{type:"string",required:!0,message:"请输入",trigger:"blur"},mtype:{type:"number",required:!0,message:"请输入",trigger:"blur"},musers:{type:"array",required:!0,message:"请输入",trigger:"blur"}},A=()=>{const t=new Date;t.setHours(17),t.setMinutes(30),t.setSeconds(0);const l=p=>p<10?"0"+p:p;return`${t.getFullYear()}-${l(t.getMonth()+1)}-${l(t.getDate())} ${l(t.getHours())}:${l(t.getMinutes())}:${l(t.getSeconds())}`},{pageData:N,getData:z,nextPage:j}=Ie(ze),S=async t=>{const l=t.currentTarget,p=l.scrollTop;l.scrollTop+l.offsetHeight>=l.scrollHeight&&N.data.length<N.total&&(await j(),await ve(),setTimeout(()=>{l.scrollTop=p}))},m=async t=>{await z({usertypes:t,page:1})},H=async()=>{var l;const{data:t}=await Pe(q.rowData.id);t&&(e.value=t,e.value.mtype==0&&(e.value.contentArr=JSON.parse(t.con2)),e.value.mdbtime=ue(1,t.mdbtime),e.value.musers=(l=t.musers.replaceAll("、",","))==null?void 0:l.split(","))};async function T(t){await ve();const l=document.getElementById(t);if(l){l.scrollIntoView({behavior:"smooth",block:"center"});const p=l.querySelector("input, textarea");p==null||p.focus()}}const w=async()=>{m("0,2,3"),q.operateType=="add"?e.value={id:void 0,con1:"",mdbtime:A(),mtype:void 0,musers:[],mtopic:"",contentArr:[{id:me(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:""}:H()},J=Le.debounce(async()=>{var l,p,R,G,k,ee,pe;await((l=F.value)==null?void 0:l.validate());let t=JSON.parse(JSON.stringify(e.value));if(e.value.mtype==0){for(let U=0;U<e.value.contentArr.length;U++){const D=e.value.contentArr[U];if(D.status1=D.person?"":"error",D.status2=D.proname?"":"error",D.status3=D.desc?"":"error",!D.person)return T("person-"+U),(p=window.$message)==null?void 0:p.error("请填写完整的调试人员");if(!D.proname)return T("proname-"+U),(R=window.$message)==null?void 0:R.error("请填写完整的项目名称");if(!D.desc)return T("desc-"+U),(G=window.$message)==null?void 0:G.error("请填写完整的工作描述")}t.con2=JSON.stringify(t.contentArr),delete t.contentArr}if(t.con1="",t.con3="",t.musers=(k=t.musers)==null?void 0:k.join("、"),q.operateType=="edit"){const{data:U,error:D}=await it([t]);U&&((ee=window.$message)==null||ee.success("编辑成功"),V(),f("submitted"))}else{t.id=void 0;const{data:U,error:D}=await rt([t]);U&&((pe=window.$message)==null||pe.success("新增成功"),V(),f("submitted"))}},1e3,{leading:!0,trailing:!1}),V=()=>{$.value=!1,e.value={id:void 0,con1:"",mdbtime:void 0,mtype:void 0,musers:[],mtopic:"",contentArr:[{id:me(),person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}],fl1:"",fl2:"",fl3:""}},W=K(),ae=t=>{var l;if(t.status1=t.person?"":"error",t.status2=t.proname?"":"error",t.status3=t.desc?"":"error",t.status1=="error"||t.status2=="error"||t.status3=="error")return(l=window.$message)==null?void 0:l.warning("请填写完整的信息，在进行添加");e.value.contentArr.push({id:me(),person:"",proname:"",desc:"",problem:e.value.contentArr[e.value.contentArr.length-1].problem,status1:"",status2:"",status3:""}),ve(()=>{var p;(p=W.value)==null||p.scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:"smooth"})})},Y=t=>{t.status1=t.person?"":"error"},oe=t=>{t.status2=t.proname?"":"error"},ne=t=>{t.status3=t.desc?"":"error"},re=t=>{var l;if(t==0)(((l=e.value.contentArr)==null?void 0:l.length)==0||!Object.keys(e.value).includes("contentArr"))&&(e.value.contentArr=[{person:"",proname:"",desc:"",problem:"",status1:"",status2:"",status3:""}]);else{let p=function(R){if(!R)return!1;try{return JSON.parse(R),!0}catch{return!1}};e.value.con2=p(e.value.con2)?"":e.value.con2}(t==0||t==1)&&(m("0,2,3"),e.value.mdbtime=t==0?ue(0,new Date)+" 17:30:00":ue(0,new Date)+" 08:30:00"),(t==2||t==3)&&(m("0,5"),e.value.mdbtime=ue(0,new Date)+" 09:00:00"),t==4&&m("0,6"),t==5&&m("0,1"),t==6&&m("0,4"),e.value.musers=[]},i=K(0),d=K("");async function h({file:t},l){d.value=l;const p=await Je(t.file,t.name,"",R=>{i.value=R});p&&(l=="fl1"?e.value.fl1=p:l=="fl2"?e.value.fl2=p:l=="fl3"&&(e.value.fl3=p),i.value=0)}return(t,l)=>{const p=je,R=Re,G=Ge,k=Ee,ee=He,pe=Ae,U=Ce,D=xe,qe=Oe;return v(),P(qe,{show:$.value,"onUpdate:show":l[8]||(l[8]=u=>$.value=u),title:q.operateType==="add"?"新增会议纪要":q.operateType==="edit"?"编辑会议纪要":"新增会议纪要（复制）",preset:"card",class:"w-900px","mask-closable":!1,draggable:!0},{footer:o(()=>[s(D,{justify:"end"},{default:o(()=>[s(a(x),{size:"small",class:"mt-16px",onClick:V},{default:o(()=>[y(_(t.$t("common.cancel")),1)]),_:1}),s(a(x),{type:"primary",size:"small",class:"mt-16px",onClick:a(J)},{default:o(()=>[y(_(t.$t("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),default:o(()=>[s(U,{ref_key:"formRef",ref:F,model:e.value,rules:n,"label-placement":"left"},{default:o(()=>[s(pe,{responsive:"screen","item-responsive":"","x-gap":"15"},{default:o(()=>[s(p,{span:"24 s:24 m:24",label:"会议标题",path:"mtopic"},{default:o(()=>[s(a(te),{value:e.value.mtopic,"onUpdate:value":l[0]||(l[0]=u=>e.value.mtopic=u),placeholder:"请输入会议标题"},null,8,["value"])]),_:1}),s(p,{span:"24 s:12 m:12",label:"会议类型",path:"mtype"},{default:o(()=>[s(a(be),{clearable:"",value:e.value.mtype,"onUpdate:value":[l[1]||(l[1]=u=>e.value.mtype=u),re],options:a(O)==0||a(O)==4?M:a(O)==2||a(O)==3?b:a(O)==5?E:a(O)==6?c:B,placeholder:"请选择会议类型"},null,8,["value","options"])]),_:1}),s(p,{span:"24 s:12 m:12",label:"会议时间",path:"mdbtime"},{default:o(()=>[s(R,{"formatted-value":e.value.mdbtime,"onUpdate:formattedValue":l[2]||(l[2]=u=>e.value.mdbtime=u),"default-time":"17:30:00",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(p,{span:"24 s:12 m:24",label:"参会人员",path:"musers"},{default:o(()=>[s(a(be),{clearable:"",multiple:"",filterable:"",value:e.value.musers,"onUpdate:value":l[3]||(l[3]=u=>e.value.musers=u),placeholder:"请选择",options:a(N).data,"label-field":"username","value-field":"username",onScroll:S},null,8,["value","options"])]),_:1}),e.value.mtype==0?(v(),P(p,{key:0,span:"24 s:12 m:24",label:"会议内容",path:"",class:"flex-col"},{default:o(()=>[s(a(Me),{ref_key:"scrollbarRef",ref:W,style:{"max-height":"300px"},class:"flex-col w-100%"},{default:o(()=>[(v(!0),C(Ne,null,De(e.value.contentArr,(u,ce)=>(v(),C("div",{class:"ml-20px",key:u.id},[r("div",ut,[r("div",dt,[r("div",pt,[l[9]||(l[9]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"调试人员",-1)),s(a(te),{clearable:"",value:u.person,"onUpdate:value":I=>u.person=I,status:u.status1,onInput:I=>Y(u),id:"person-"+ce,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",ct,[l[10]||(l[10]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"项目名称",-1)),s(a(te),{clearable:"",value:u.proname,"onUpdate:value":I=>u.proname=I,status:u.status2,onInput:I=>oe(u),id:"proname-"+ce,placeholder:"请输入"},null,8,["value","onUpdate:value","status","onInput","id"])]),r("div",mt,[l[11]||(l[11]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"工作描述",-1)),s(a(te),{clearable:"",value:u.desc,"onUpdate:value":I=>u.desc=I,onInput:I=>ne(u),status:u.status3,id:"desc-"+ce,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value","onInput","status","id"])]),r("div",ft,[l[12]||(l[12]=r("h3",{class:"font-size-12px font-bold mt-2 w-100px"},"遇到的问题",-1)),s(a(te),{clearable:"",value:u.problem,"onUpdate:value":I=>u.problem=I,placeholder:"请输入",type:"textarea",rows:2},null,8,["value","onUpdate:value"])])]),r("div",vt,[s(a(x),{class:"mb-10px",text:"",type:"info",onClick:I=>ae(u)},{default:o(()=>l[13]||(l[13]=[y("添加")])),_:2,__:[13]},1032,["onClick"]),e.value.contentArr.length>1?(v(),P(a(x),{key:0,text:"",type:"error",onClick:I=>e.value.contentArr.splice(ce,1)},{default:o(()=>l[14]||(l[14]=[y("删除")])),_:2,__:[14]},1032,["onClick"])):Q("",!0)])]),s(G,{dashed:""})]))),128))]),_:1},512)]),_:1})):(v(),P(p,{key:1,span:"24 s:12 m:24",label:"会议内容",path:"con2",class:"flex-col"},{default:o(()=>[s(a(te),{clearable:"",value:e.value.con2,"onUpdate:value":l[4]||(l[4]=u=>e.value.con2=u),placeholder:"请输入",type:"textarea",rows:8},null,8,["value"])]),_:1})),s(p,{span:"24 s:24 m:12",label:"附件1:",path:"fl1"},{default:o(()=>[e.value.fl1?(v(),C("div",_t,[r("span",null,_(e.value.fl1.split("?")[1]),1),s(a(x),{text:"",type:"error",onClick:l[5]||(l[5]=u=>e.value.fl1="")},{default:o(()=>l[15]||(l[15]=[y("删除")])),_:1,__:[15]})])):(v(),C("div",yt,[s(k,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>h(u,"fl1")},{default:o(()=>[s(a(x),{loading:i.value>0&&!e.value.fl1},{default:o(()=>[y(_(i.value>0&&!e.value.fl1&&d.value=="fl1"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl1&&d.value=="fl1"?(v(),P(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Q("",!0)]))]),_:1}),s(p,{span:"24 s:24 m:12",label:"附件2:",path:"fl2"},{default:o(()=>[e.value.fl2?(v(),C("div",gt,[r("span",null,_(e.value.fl2.split("?")[1]),1),s(a(x),{text:"",type:"error",onClick:l[6]||(l[6]=u=>e.value.fl2="")},{default:o(()=>l[16]||(l[16]=[y("删除")])),_:1,__:[16]})])):(v(),C("div",bt,[s(k,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>h(u,"fl2")},{default:o(()=>[s(a(x),{loading:i.value>0&&!e.value.fl2},{default:o(()=>[y(_(i.value>0&&!e.value.fl2&&d.value=="fl2"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl2&&d.value=="fl2"?(v(),P(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Q("",!0)]))]),_:1}),s(p,{span:"24 s:24 m:12",label:"附件3:",path:"fl3"},{default:o(()=>[e.value.fl3?(v(),C("div",ht,[r("span",null,_(e.value.fl3.split("?")[1]),1),s(a(x),{text:"",type:"error",onClick:l[7]||(l[7]=u=>e.value.fl3="")},{default:o(()=>l[17]||(l[17]=[y("删除")])),_:1,__:[17]})])):(v(),C("div",xt,[s(k,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":u=>h(u,"fl3")},{default:o(()=>[s(a(x),{loading:i.value>0&&!e.value.fl3},{default:o(()=>[y(_(i.value>0&&!e.value.fl3&&d.value=="fl3"?"上传中":"上传文件"),1)]),_:1},8,["loading"])]),_:1},8,["custom-request"]),i.value&&!e.value.fl3&&d.value=="fl3"?(v(),P(ee,{key:0,type:"line",percentage:i.value,"indicator-placement":"inside",processing:""},null,8,["percentage"])):Q("",!0)]))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),kt=Te(wt,[["__scopeId","data-v-997da154"]]),$t=ye({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:_e(["reset","search"],["update:model"]),setup(g,{emit:L}){var H;const $=L,{formRef:X,restoreValidation:O}=Ke(),f=(H=ge().userInfo)==null?void 0:H.usertype,b=he(g,"model"),E=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],c=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],B=[{label:"生产部周例会",value:4}],M=[{label:"销售周例会",value:5}],F=[...E,...c,...B,...M,{label:"管理层周例会",value:6}],{pageData:e,getData:n,nextPage:A}=Ie(ze),N=async T=>{const w=T.currentTarget,J=w.scrollTop;w.scrollTop+w.offsetHeight>=w.scrollHeight&&e.data.length<e.total&&(await A(),await ve(),setTimeout(()=>{w.scrollTop=J}))};We(async()=>{n({usertypes:f==0||f==4?"0,1,2,3,4,5,6":f==2||f==3?"0,2,3":f==5?"0,5":f==6?"0,6":"0,1"}),b.value.mtype=f==0||f==4?void 0:f==2||f==3?0:f==5?2:f==6?4:5,$("search")});const z=async T=>{b.value.dates=T,$("search")},j=async T=>{b.value.creater=T,$("search")};async function S(){await O(),b.value.dates=null,b.value.mtype=null,b.value.creater=null,$("reset")}async function m(){$("search")}return(T,w)=>{const J=Re,V=je,W=be,ae=at,Y=x,oe=st,ne=xe,re=Ae,i=Ce,d=Ue;return v(),P(d,{bordered:!1,size:"small",class:"card-wrapper"},{default:o(()=>[s(i,{ref_key:"formRef",ref:X,model:b.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:Qe(m,["enter"])},{default:o(()=>[s(re,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:o(()=>[s(V,{span:"24 s:12 m:6",label:"日期",path:"dates"},{default:o(()=>[s(J,{clearable:"","formatted-value":b.value.dates,"onUpdate:formattedValue":[w[0]||(w[0]=h=>b.value.dates=h),z],type:"date","value-format":"yyyy-MM-dd",style:{width:"100%"}},null,8,["formatted-value"])]),_:1}),s(V,{span:"24 s:12 m:6",label:"会议类型",path:"mtype"},{default:o(()=>[s(W,{clearable:a(f)==0||a(f)==4,filterable:"",value:b.value.mtype,"onUpdate:value":[w[1]||(w[1]=h=>b.value.mtype=h),m],placeholder:"请选择",options:a(f)==0||a(f)==4?F:a(f)==2||a(f)==3?E:a(f)==5?c:a(f)==6?B:M},null,8,["clearable","value","options"])]),_:1}),s(V,{span:"24 s:12 m:6",label:"创建者",path:"pid"},{default:o(()=>[s(W,{clearable:"",filterable:"",value:b.value.creater,"onUpdate:value":[w[2]||(w[2]=h=>b.value.creater=h),j],placeholder:"请选择","label-field":"username","value-field":"id",options:a(e).data,onScroll:N},null,8,["value","options"])]),_:1}),s(V,{span:"24  s:12 m:6",class:"pr-24px"},{default:o(()=>[s(ne,{class:"w-full"},{default:o(()=>[s(Y,{onClick:S},{icon:o(()=>[s(ae,{class:"text-icon"})]),default:o(()=>[y(" "+_(a(se)("common.reset")),1)]),_:1}),s(Y,{type:"primary",ghost:"",onClick:m},{icon:o(()=>[s(oe,{class:"text-icon"})]),default:o(()=>[y(" "+_(a(se)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),St={class:"ml-40px font-bold"},Ct={key:0},Mt={class:"mb-20px ml-40px"},Nt={class:"flex items-center"},Dt={class:"preview-text"},Ot={class:"flex items-center"},zt={class:"preview-text"},Tt={class:"flex"},Ut={class:"preview-text"},It={class:"flex"},At={class:"preview-text"},jt={key:1},Rt={class:"preview-text ml-40px"},Pt={key:2,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},qt={key:3,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},Bt={key:4,class:"mt-3 mb-3 ml-40px text-gray-700 preview-text"},Ft=ye({__name:"lookModal",props:_e({id:{}},{lookisible:{type:Boolean,default:!1},lookisibleModifiers:{}}),emits:["update:lookisible"],setup(g){var F;const L=he(g,"lookisible");(F=ge().userInfo)==null||F.usertype;const X=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],O=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],q=[{label:"生产部周例会",value:4}],f=[{label:"销售周例会",value:5}],b=[...X,...O,...q,...f,{label:"管理层周例会",value:6}],E=g;Se(()=>L.value,async e=>{e&&B()});const c=K({}),B=async()=>{const{data:e}=await Pe(E.id);e&&(c.value=e,c.value.mtype==0&&(c.value.contentArr=JSON.parse(e.con2)),c.value.mdbtime=ue(1,e.mdbtime))};async function M(e){if(!e)return;const n=e.split("?")[0],A=e.split("?")[1];try{const z=await(await fetch(n,{mode:"cors"})).blob(),j=URL.createObjectURL(z),S=document.createElement("a");S.href=j,S.download=A,S.style.display="none",document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(j)}catch(N){console.error("下载失败:",N)}}return(e,n)=>{const A=ot,N=Oe;return v(),P(N,{show:L.value,"onUpdate:show":n[3]||(n[3]=z=>L.value=z),preset:"card",class:"w-1000px"},{header:o(()=>n[4]||(n[4]=[r("div",null,"详细信息",-1)])),default:o(()=>[s(a(Me),{style:{height:"calc(80vh)","padding-right":"20px"}},{default:o(()=>{var z,j,S;return[n[15]||(n[15]=r("h3",{class:"font-size-16px font-bold mt-2"},"标题",-1)),r("div",St,_(c.value.mtopic),1),n[16]||(n[16]=r("h3",{class:"font-size-16px font-bold mt-2"},"会议信息",-1)),s(A,{bordered:!1,"single-line":!1,class:"ml-40px w-90%"},{default:o(()=>{var m;return[r("tbody",null,[r("tr",null,[n[5]||(n[5]=r("th",null,"会议时间",-1)),r("th",null,_(c.value.mdbtime),1)]),r("tr",null,[n[6]||(n[6]=r("th",null,"会议类型",-1)),r("th",null,_((m=b.find(H=>H.value===c.value.mtype))==null?void 0:m.label),1)]),r("tr",null,[n[7]||(n[7]=r("th",null,"参会人员",-1)),r("th",null,_(c.value.musers),1)])])]}),_:1}),n[17]||(n[17]=r("h3",{class:"font-size-16px font-bold mt-2 mb-2"},"会议内容",-1)),c.value.mtype==0?(v(),C("div",Ct,[(v(!0),C(Ne,null,De(c.value.contentArr,m=>(v(),C("div",Mt,[r("div",Nt,[n[8]||(n[8]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"调试人员：",-1)),r("div",Dt,_(m.person),1)]),r("div",Ot,[n[9]||(n[9]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"项目名称：",-1)),r("div",zt,_(m.proname),1)]),r("div",Tt,[n[10]||(n[10]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"工作描述：",-1)),r("div",Ut,_(m.desc),1)]),r("div",It,[n[11]||(n[11]=r("h3",{class:"font-size-14px font-bold whitespace-nowrap"},"遇到的问题：",-1)),r("div",At,_(m.problem),1)])]))),256))])):(v(),C("div",jt,[r("div",Rt,_(c.value.con2),1)])),n[18]||(n[18]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件1：",-1)),c.value.fl1?(v(),C("div",Pt,[y(_((z=c.value.fl1)==null?void 0:z.split("?")[1])+" ",1),s(a(x),{text:"",type:"primary",size:"small",onClick:n[0]||(n[0]=m=>M(c.value.fl1))},{default:o(()=>n[12]||(n[12]=[y("下载")])),_:1,__:[12]})])):Q("",!0),n[19]||(n[19]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件2：",-1)),c.value.fl2?(v(),C("div",qt,[y(_((j=c.value.fl2)==null?void 0:j.split("?")[1])+" ",1),s(a(x),{text:"",type:"primary",size:"small",onClick:n[1]||(n[1]=m=>M(c.value.fl2))},{default:o(()=>n[13]||(n[13]=[y("下载")])),_:1,__:[13]})])):Q("",!0),n[20]||(n[20]=r("h3",{class:"font-size-16px font-bold mt-2"},"附件3：",-1)),c.value.fl3?(v(),C("div",Bt,[y(_((S=c.value.fl3)==null?void 0:S.split("?")[1])+" ",1),s(a(x),{text:"",type:"primary",size:"small",onClick:n[2]||(n[2]=m=>M(c.value.fl3))},{default:o(()=>n[14]||(n[14]=[y("下载")])),_:1,__:[14]})])):Q("",!0)]}),_:1,__:[15,16,17,18,19,20]})]),_:1},8,["show"])}}}),Vt=Te(Ft,[["__scopeId","data-v-18001e28"]]),Lt={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function $e(g){return typeof g=="function"||Object.prototype.toString.call(g)==="[object Object]"&&!et(g)}const sl=ye({name:"meetingminutes",__name:"index",setup(g){const L=Xe(),$=ge(),X=[{label:"技术部每日例会",value:0},{label:"技术部周例会",value:1}],O=[{label:"研发周例会(网络安全) ",value:2},{label:"研发周例会(数据通讯)",value:3}],q=[{label:"生产部周例会",value:4}],f=[{label:"销售周例会",value:5}],b=[...X,...O,...q,...f,{label:"管理层周例会",value:6}],{columns:E,columnChecks:c,data:B,getData:M,loading:F,mobilePagination:e,searchParams:n}=tt({showTotal:!0,immediate:!1,apiFn:nt,apiParams:{page:1,pageSize:20,limit:20,mtype:void 0,dates:void 0,creater:void 0,_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48,disabled:i=>$.userInfo.id!=i.creater},{key:"mtopic",title:"会议标题",align:"center",width:120},{key:"mtype",title:"会议类型",align:"center",width:120,render:i=>s("span",null,[b[i.mtype].label])},{key:"mdbtime",title:"会议时间",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dates",title:"创建日期",align:"center",width:120},{key:"operate",title:se("common.operate"),align:"center",width:140,fixed:"right",render:i=>{let d;return s("div",{class:"flex-center gap-8px"},[le(s(x,{type:"primary",ghost:!0,size:"small",onClick:()=>V(i.id)},{default:()=>[y("详情")]}),[[ie("no-auth"),"project:Meeting:select"]]),$.userInfo.id==i.creater&&le(s(x,{type:"success",ghost:!0,size:"small",onClick:()=>ne(i)},{default:()=>[y("复制")]}),[[ie("no-auth"),"project:Meeting:insert"]]),$.userInfo.id==i.creater&&le(s(x,{type:"primary",ghost:!0,size:"small",onClick:()=>Y(i.id)},$e(d=se("common.edit"))?d:{default:()=>[d]}),[[ie("no-auth"),"project:Meeting:update"]]),$.userInfo.id==i.creater&&s(we,{onPositiveClick:()=>ae(i.id)},{default:()=>se("common.confirmDelete"),trigger:()=>{let h;return le(s(x,{type:"error",ghost:!0,size:"small"},$e(h=se("common.delete"))?h:{default:()=>[h]}),[[ie("no-auth"),"project:Meeting:delete"]])}})])}}]}),{drawerVisible:A,operateType:N,editingData:z,handleAdd:j,handleEdit:S,checkedRowKeys:m,onBatchDeleted:H,onDeleted:T}=lt(B,M),w=K(!1),J=K(0),V=i=>{w.value=!0,J.value=i};async function W(){console.log(m.value),oe(m.value.join(","),i=>{H()})}async function ae(i){const{data:d,error:h}=await ke(i);h||T()}function Y(i){S(i)}async function oe(i,d){const{data:h,error:Z}=await ke(i);if(!Z)d&&d(h);else return!1}const ne=async i=>{S(i.id),N.value="copy"},re=()=>{M()};return(i,d)=>{const h=xe,Z=Ve,t=Fe,l=Be,p=Ye,R=Ue,G=ie("no-auth");return v(),C("div",Lt,[s($t,{model:a(n),"onUpdate:model":d[0]||(d[0]=k=>fe(n)?n.value=k:null),onReset:re,onSearch:a(M)},null,8,["model","onSearch"]),s(R,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:o(()=>[s(h,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:o(()=>d[5]||(d[5]=[r("div",null,"会议纪要",-1)])),_:1,__:[5]})]),"header-extra":o(()=>[s(h,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:o(()=>[le((v(),P(a(x),{onClick:a(j),size:"small",ghost:"",type:"primary"},{icon:o(()=>[s(Z,{class:"text-icon"})]),default:o(()=>[d[6]||(d[6]=y(" "+_("新增")))]),_:1,__:[6]},8,["onClick"])),[[G,"project:Meeting:insert"]]),s(a(we),{onPositiveClick:W},{trigger:o(()=>[le((v(),P(a(x),{size:"small",ghost:"",type:"error",disabled:a(m).length==0},{icon:o(()=>[s(t,{class:Ze(["text-icon",{"animate-spin":a(F)}])},null,8,["class"])]),default:o(()=>[d[7]||(d[7]=y(" "+_("批量删除")))]),_:1,__:[7]},8,["disabled"])),[[G,"project:Meeting:delete"]])]),default:o(()=>[d[8]||(d[8]=y(" 确定要删除选中的会议吗？ "))]),_:1,__:[8]}),s(l,{columns:a(c),"onUpdate:columns":d[1]||(d[1]=k=>fe(c)?c.value=k:null)},null,8,["columns"])]),_:1})]),default:o(()=>[s(p,{"checked-row-keys":a(m),"onUpdate:checkedRowKeys":d[2]||(d[2]=k=>fe(m)?m.value=k:null),columns:a(E),data:a(B),size:"small","flex-height":!a(L).isMobile,loading:a(F),remote:"","row-key":k=>k.id,pagination:a(e),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),s(Vt,{id:J.value,lookisible:w.value,"onUpdate:lookisible":d[3]||(d[3]=k=>w.value=k)},null,8,["id","lookisible"]),s(kt,{visible:a(A),"onUpdate:visible":d[4]||(d[4]=k=>fe(A)?A.value=k:null),onSubmitted:a(M),"operate-type":a(N),"row-data":a(z)},null,8,["visible","onSubmitted","operate-type","row-data"])]),_:1})])}}});export{sl as default};
