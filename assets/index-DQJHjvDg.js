import{d as Y,a0 as H,j as y,J as Q,K as $,o as i,e as _,f as p,ai as B,ag as E,g as a,w as s,h as f,i as v,B as N,t as g,M as Z,L as x,c as k,aW as ee,an as z,A as ne,C as ae,D as se,E as te,aa as oe,ab as le,aX as re,S as ie,a6 as de,aY as ce,_ as ue,X as pe,a9 as me,av as _e,aw as fe,ax as ve}from"./index-DvMCw3Rq.js";import{d as ge,e as ke,g as be}from"./basic-config-JbWbfaap.js";import{_ as we}from"./FormItemGridItem-B8AmNpme.js";import{_ as he}from"./Grid-BUt7FBa5.js";const ye=b=>(_e("data-v-c10ce5a6"),b=b(),fe(),b),Ne={class:"min-h-500px flex-col-stretch gap-16px overflow-auto lt-sm:overflow-auto"},Se={key:0,class:"lan-network"},xe={class:"lanList"},Ce=["onClick"],Ie={class:"but"},De=ye(()=>p("span",{style:{width:"3px",height:"15px",background:"#1980ff",display:"inline-block","margin-right":"5px","border-radius":"20px"}},null,-1)),Ue=Y({name:"basicconfig_network-manage",__name:"index",setup(b){const V=H(),A=()=>{let t=[];for(let e=1;e<=32;e++)t.push({label:e+"",value:e});return t},u=y([{id:1,nname:"eno1",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:2,nname:"eno2",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:3,nname:"eno3",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:4,nname:"eno4",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:5,nname:"eno5",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:6,nname:"eno6",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:7,nname:"eno7",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""},{id:8,nname:"eno8",nip:"",nmaskbits:null,nmask:"",predns:"",bakdns:"",gateway:""}]),w=y(0),M=async()=>{const{data:t,error:e}=await ge();if(t){const o=JSON.parse(JSON.stringify(t));w.value=o.id||o.nname.charAt(o.nname.length-1)||o.nname.replace("eno",""),u.value.forEach(l=>{l.id==w.value&&Object.assign(l,o)}),ee(()=>{var c;const l=document.getElementById((c=u.value.find(h=>h.id==w.value))==null?void 0:c.nname);l&&l.scrollIntoView({behavior:"smooth",block:"center"})})}},O=async t=>{var l,c;const{data:e,error:o}=await be(u.value[t]);o||((l=window.$message)==null||l.destroyAll(),(c=window.$message)==null||c.success("配置成功"))},P=y(null),j=async(t,e)=>{const o=document.getElementById(t.nname);o&&o.scrollIntoView({behavior:"smooth",block:"start"}),P.value=e},r=y({visible:!1,dns1:"",dns2:""}),F={dns1:{required:!0,trigger:["blur","input"],validator:(t,e)=>e?z(e)?!0:new Error("请输入正确的DNS"):new Error("请输入DNS")},dns2:{required:!0,trigger:["blur","input"],validator:(t,e)=>e?z(e)?!0:new Error("请输入正确的DNS"):new Error("请输入DNS")}},C=async()=>{var o,l;const{data:t,error:e}=await ke({dns1:r.value.dns1,dns2:r.value.dns2});e||((o=window.$message)==null||o.destroyAll(),(l=window.$message)==null||l.success("配置成功"),I())},I=()=>{r.value.visible=!1,r.value.dns1="",r.value.dns2=""},T=(t,e)=>{e.nmask=ce(t)};return Q(()=>{M()}),(t,e)=>{const o=ue,l=ne,c=ae,h=se,D=te,q=oe,G=le,J=re,m=we,K=pe,L=he,R=me,W=ie,U=$("no-space"),X=$("no-auth");return i(),_("div",Ne,[u.value.length>0?(i(),_("div",Se,[p("div",xe,[(i(!0),_(B,null,E(u.value,(n,S)=>(i(),_("div",{class:"lanItem",key:n.id,onClick:d=>j(n,S)},[Number(n.nname.charAt(n.nname.length-1)||n.nname.replace("eno",""))==w.value?(i(),k(o,{key:0,"local-icon":"lan-active",style:{"font-size":"30px"},class:"animation"})):(i(),k(o,{key:1,"local-icon":"lan-default",style:{"font-size":"30px"}})),p("span",null,g(n.nname),1)],8,Ce))),128))]),p("div",Ie,[a(v(N),{type:"info",ghost:"",onClick:e[0]||(e[0]=n=>r.value.visible=!0)},{default:s(()=>[f("DNS配置")]),_:1})]),a(G,{show:r.value.visible,"onUpdate:show":e[3]||(e[3]=n=>r.value.visible=n),"display-directive":"show",width:300},{default:s(()=>[a(q,{title:"设置DNS","native-scrollbar":!1,closable:""},{footer:s(()=>[a(D,{size:16},{default:s(()=>[a(v(N),{onClick:I},{default:s(()=>[f(g(t.$t("common.cancel")),1)]),_:1}),a(v(N),{type:"primary",onClick:C},{default:s(()=>[f(g(t.$t("common.confirm")),1)]),_:1})]),_:1})]),default:s(()=>[a(h,{ref:"formRef",model:r.value,rules:F,onKeyup:Z(C,["enter"])},{default:s(()=>[a(c,{label:"DNS(首选)",path:"dns1"},{default:s(()=>[x(a(l,{clearable:"",value:r.value.dns1,"onUpdate:value":e[1]||(e[1]=n=>r.value.dns1=n),placeholder:"请输入IP"},null,8,["value"]),[[U]])]),_:1}),a(c,{label:"DNS(备用)",path:"dns2"},{default:s(()=>[x(a(l,{clearable:"",value:r.value.dns2,"onUpdate:value":e[2]||(e[2]=n=>r.value.dns2=n),placeholder:"请输入IP"},null,8,["value"]),[[U]])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])])):(i(),k(J,{key:1,size:"huge",description:"未检测到有效的系统返回码"})),a(W,null,{default:s(()=>[(i(!0),_(B,null,E(u.value,(n,S)=>(i(),k(R,{bordered:!1,size:"small",class:"card-wrapper",key:n.nname,id:n.nname},{header:s(()=>[p("div",{style:de({color:v(V).themeScheme==="dark"?"#fff":"#000",fontWeight:"bolder",padding:"5px",fontSize:"18px",marginBottom:"10px",display:"flex",alignItems:"center"})},[De,f(" "+g(n.nname)+"网络配置 ",1)],4)]),default:s(()=>[a(h,{ref_for:!0,ref:"formRef",model:n,"label-placement":"left","label-width":140,"require-mark-placement":"left"},{default:s(()=>[a(L,{responsive:"screen","item-responsive":""},{default:s(()=>[a(m,{span:"24 s:12 m:6",label:"IP地址",path:"nip"},{default:s(()=>[a(l,{clearable:"",placeholder:"请输入IP地址",value:n.nip,"onUpdate:value":d=>n.nip=d},null,8,["value","onUpdate:value"])]),_:2},1024),a(m,{span:"24 s:12 m:6",label:"掩码位数",path:"nmaskbits"},{default:s(()=>[a(K,{clearable:"",options:A(),placeholder:"请选择掩码位数",value:n.nmaskbits,"onUpdate:value":d=>n.nmaskbits=d,onUpdateValue:d=>T(d,n)},null,8,["options","value","onUpdate:value","onUpdateValue"])]),_:2},1024),a(m,{span:"24 s:12 m:6",label:"掩码",path:"nmask"},{default:s(()=>[p("span",null,g(n.nmask),1)]),_:2},1024),a(m,{span:"24 s:12 m:6",label:"网关",path:"gateway"},{default:s(()=>[a(l,{clearable:"",placeholder:"请输入网关",value:n.gateway,"onUpdate:value":d=>n.gateway=d},null,8,["value","onUpdate:value"])]),_:2},1024),a(m,{span:"24 s:24 m:24"},{default:s(()=>[a(D,{justify:"center",class:"w-100%"},{default:s(()=>[x((i(),k(v(N),{type:"info",ghost:"",onClick:d=>O(S)},{default:s(()=>[f("应用配置 ")]),_:2},1032,["onClick"])),[[X,"sys.network.update"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["model"])]),_:2},1032,["id"]))),128))]),_:1})])}}}),Ve=ve(Ue,[["__scopeId","data-v-c10ce5a6"]]);export{Ve as default};
