import{r as Y,a as C,k as ee,l as oe,d as N,$ as h,c as U,o as b,m as te,b as z,n as ne,p as E,e as u,q as se,u as T,s as D,v as I,x as A,i as ae,y as le,w as m,f as s,z as re,A as G,C as O,h as f,D as ce,N as V,E as ie,g as R,t as P,B as K,F as q,G as H,H as pe,I as de,J as W,K as ue,L as me,R as fe,M as he,O as ge,P as M,Q as _e,T as we,S as ve,U as xe,V as ye}from"./index-BNVSoAe1.js";function Ce(a){const t=Y(0),l=C(()=>Math.ceil(t.value)),w=C(()=>t.value>0),{pause:e,resume:r}=ee(({delta:o})=>{if(t.value<=0){t.value=0,e();return}const x=o/1e3;t.value-=x,t.value<=0&&(t.value=0,e())},{immediate:!1});function c(o=a){t.value=o,r()}function p(){t.value=0,e()}return oe(()=>{e()}),{count:l,isCounting:w,start:c,stop:p}}const ke=N({name:"ThemeSchemaSwitch",__name:"theme-schema-switch",props:{themeSchema:{},showTooltip:{type:Boolean,default:!0},tooltipPlacement:{default:"bottom"}},emits:["switch"],setup(a,{emit:t}){const l=a,w=t;function e(){w("switch")}const r={light:"material-symbols:sunny",dark:"material-symbols:nightlight-rounded",auto:"material-symbols:hdr-auto"},c=C(()=>r[l.themeSchema]),p=C(()=>l.showTooltip?h("icon.themeSchema"):"");return(o,x)=>{const i=te;return b(),U(i,{icon:c.value,"tooltip-content":p.value,"tooltip-placement":o.tooltipPlacement,onClick:e},null,8,["icon","tooltip-content","tooltip-placement"])}}}),be={src:ne,alt:"linkqi",style:{width:"64px",height:"64px"}},Se=N({name:"SystemLogo",__name:"system-logo",setup(a){return(t,l)=>(b(),z("img",be))}}),Pe={class:"absolute-lt z-1 size-full overflow-hidden"},$e={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},Re={height:"1337",width:"1337"},Ne={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Ue=["stop-color"],ze=["stop-color"],Le={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Be={height:"896",width:"967.8852157128662"},Ie={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Me=["stop-color"],je=["stop-color"],Ee=N({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(a){const t=a,l=C(()=>E(t.themeColor,200)),w=C(()=>E(t.themeColor,500));return(e,r)=>(b(),z("div",Pe,[u("div",$e,[(b(),z("svg",Re,[u("defs",null,[r[0]||(r[0]=u("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),u("linearGradient",Ne,[u("stop",{offset:"0","stop-color":l.value,"stop-opacity":"1"},null,8,Ue),u("stop",{offset:"1","stop-color":w.value,"stop-opacity":"1"},null,8,ze)])]),r[1]||(r[1]=u("g",{opacity:"1"},[u("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),u("div",Le,[(b(),z("svg",Be,[u("defs",null,[r[2]||(r[2]=u("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),u("linearGradient",Ie,[u("stop",{offset:"0","stop-color":w.value,"stop-opacity":"1"},null,8,Me),u("stop",{offset:"1","stop-color":l.value,"stop-opacity":"1"},null,8,je)])]),r[3]||(r[3]=u("g",{opacity:"1"},[u("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}});function Fe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const t=Math.random()*16|0;return(a==="x"?t:t&3|8).toString(16)})}/*! js-cookie v3.0.5 | MIT */function L(a){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var w in l)a[w]=l[w]}return a}var Te={read:function(a){return a[0]==='"'&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(a){return encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function F(a,t){function l(e,r,c){if(!(typeof document>"u")){c=L({},t,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var p="";for(var o in c)c[o]&&(p+="; "+o,c[o]!==!0&&(p+="="+c[o].split(";")[0]));return document.cookie=e+"="+a.write(r,e)+p}}function w(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var r=document.cookie?document.cookie.split("; "):[],c={},p=0;p<r.length;p++){var o=r[p].split("="),x=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(c[i]=a.read(x,i),e===i)break}catch{}}return e?c[e]:c}}return Object.create({set:l,get:w,remove:function(e,r){l(e,"",L({},r,{expires:-1}))},withAttributes:function(e){return F(this.converter,L({},this.attributes,e))},withConverter:function(e){return F(L({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(a)}})}var Z=F(Te,{path:"/"});const j=(a,t,l)=>{Z.set(a,t)},B=a=>Z.get(a),De={class:"w-full flex-y-center gap-16px"},Ae=["src"],Ge={class:"flex-y-center justify-between"},Oe=N({name:"PwdLogin",__name:"pwd-login",setup(a){const t=se();T();const{formRef:l,validate:w}=D(),e=I({username:"",password:"",captcha:"",captchaSrc:"",captchaUuid:"",checked:!0}),r=I({captchaEnable:null}),c=C(()=>{const{defaultRequiredRule:v,formRules:n,patternRules:_}=A();return{username:n.username,password:{...v,..._.password},captcha:v}});async function p(){const{data:v,error:n}=await pe();n||(r.captchaEnable=v,r.captchaEnable===1&&o())}async function o(){e.captchaUuid=Fe(),e.captchaSrc=de+"/captcha?uuid="+e.captchaUuid}async function x(){await w(),e.checked?i(e.username,e.password,e.checked):d(),await t.login(W(e.username),W(e.password),e.captchaUuid,e.captcha)||(e.captcha="",e.captchaSrc="",r.captchaEnable===0&&o())}function i(v,n,_){j("project_storage_user",v),j("project_storage_pwd",n),j("project_storage_check",String(_))}function g(){e.username=B("project_storage_user")||"",e.password=B("project_storage_pwd")||"",e.checked=B("project_storage_check")?B("project_storage_check")=="true":!1}function d(){i("","",!1)}return ae(()=>{g(),p()}),(v,n)=>{const _=O,y=G,S=ie,k=K,J=V,Q=H,X=le("no-special");return b(),U(Q,{ref_key:"formRef",ref:l,model:e,rules:c.value,size:"large","show-label":!1,onKeyup:q(x,["enter"])},{default:m(()=>[s(y,{path:"userName"},{default:m(()=>[s(_,{value:e.username,"onUpdate:value":n[0]||(n[0]=$=>e.username=$),placeholder:f(h)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),s(y,null,{default:m(()=>[s(_,{value:e.password,"onUpdate:value":n[1]||(n[1]=$=>e.password=$),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),r.captchaEnable===1?(b(),U(y,{key:0,path:"captcha"},{default:m(()=>[u("div",De,[ce(s(_,{value:e.captcha,"onUpdate:value":n[2]||(n[2]=$=>e.captcha=$),placeholder:"请输入验证码"},null,8,["value"]),[[X]]),u("img",{src:e.captchaSrc,alt:"验证码",style:{width:"160px",height:"40px"},onClick:o},null,8,Ae)])]),_:1})):re("",!0),s(J,{vertical:"",size:24},{default:m(()=>[u("div",Ge,[s(S,{checked:e.checked,"onUpdate:checked":n[3]||(n[3]=$=>e.checked=$)},{default:m(()=>[R(P(f(h)("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["checked"])]),s(k,{type:"primary",size:"large",round:"",block:"",loading:f(t).loginLoading,onClick:x},{default:m(()=>[R(P(f(h)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}});function Ve(){const{loading:a,startLoading:t,endLoading:l}=ue(),{count:w,start:e,stop:r,isCounting:c}=Ce(60),p=C(()=>{let i=h("page.login.codeLogin.getCode");const g=h("page.login.codeLogin.reGetCode",{time:w.value});return a.value&&(i=""),c.value&&(i=g),i});function o(i){var g,d,v,n,_,y;return i.trim()===""?((g=window.$message)==null||g.destroyAll(),(v=(d=window.$message)==null?void 0:d.error)==null||v.call(d,h("form.mobile.required")),!1):fe.test(i)?!0:((n=window.$message)==null||n.destroyAll(),(y=(_=window.$message)==null?void 0:_.error)==null||y.call(_,h("form.mobile.invalid")),!1)}async function x(i,g){!o(i)||a.value||(t(),await new Promise(v=>{me(i,g).then(n=>{var _,y,S;console.log("response",n),n.error||(setTimeout(v,500),(_=window.$message)==null||_.destroyAll(),(S=(y=window.$message)==null?void 0:y.success)==null||S.call(y,h("page.login.codeLogin.sendCodeSuccess")),e(),l())}).catch(n=>{var _,y,S;return console.log("error",n),(_=window.$message)==null||_.destroyAll(),(S=(y=window.$message)==null?void 0:y.error)==null||S.call(y,h("page.login.codeLogin.sendCodeFailed")),!1})}))}return{label:p,start:e,stop:r,isCounting:c,loading:a,getCaptcha:x}}const Ke={class:"w-full flex-y-center gap-16px"},qe=N({name:"Register",__name:"register",setup(a){const{toggleLoginModule:t}=T(),{formRef:l,validate:w}=D(),{label:e,isCounting:r,loading:c,getCaptcha:p}=Ve(),o=I({phone:"",code:"",password:"",confirmPassword:""}),x=C(()=>{const{formRules:g,createConfirmPwdRule:d}=A();return{phone:g.phone,code:g.code,password:g.pwd,confirmPassword:d(o.password)}});async function i(){var g;await w(),(g=window.$message)==null||g.success(h("page.login.common.validateSuccess"))}return(g,d)=>{const v=O,n=G,_=K,y=V,S=H;return b(),U(S,{ref_key:"formRef",ref:l,model:o,rules:x.value,size:"large","show-label":!1,onKeyup:q(i,["enter"])},{default:m(()=>[s(n,{path:"phone"},{default:m(()=>[s(v,{clearable:"",maxlength:"11",value:o.phone,"onUpdate:value":d[0]||(d[0]=k=>o.phone=k),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),s(n,{path:"code"},{default:m(()=>[u("div",Ke,[s(v,{value:o.code,"onUpdate:value":d[1]||(d[1]=k=>o.code=k),placeholder:f(h)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),s(_,{size:"large",disabled:f(r),loading:f(c),onClick:d[2]||(d[2]=k=>f(p)(o.phone,0))},{default:m(()=>[R(P(f(e)),1)]),_:1},8,["disabled","loading"])])]),_:1}),s(n,{path:"password"},{default:m(()=>[s(v,{value:o.password,"onUpdate:value":d[3]||(d[3]=k=>o.password=k),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),s(n,{path:"confirmPassword"},{default:m(()=>[s(v,{value:o.confirmPassword,"onUpdate:value":d[4]||(d[4]=k=>o.confirmPassword=k),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),s(y,{vertical:"",size:18,class:"w-full"},{default:m(()=>[s(_,{type:"primary",size:"large",round:"",block:"",onClick:i},{default:m(()=>[R(P(f(h)("common.confirm")),1)]),_:1}),s(_,{size:"large",round:"",block:"",onClick:d[5]||(d[5]=k=>f(t)("pwd-login"))},{default:m(()=>[R(P(f(h)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),He=N({name:"ResetPwd",__name:"reset-pwd",setup(a){const{toggleLoginModule:t}=T(),{formRef:l,validate:w}=D(),e=I({phone:"",code:"",password:"",confirmPassword:""}),r=C(()=>{const{formRules:p,createConfirmPwdRule:o}=A();return{phone:p.phone,password:p.pwd,confirmPassword:o(e.password)}});async function c(){var p;await w(),(p=window.$message)==null||p.success(h("page.login.common.validateSuccess"))}return(p,o)=>{const x=O,i=G,g=K,d=V,v=H;return b(),U(v,{ref_key:"formRef",ref:l,model:e,rules:r.value,size:"large","show-label":!1,onKeyup:q(c,["enter"])},{default:m(()=>[s(i,{path:"phone"},{default:m(()=>[s(x,{clearable:"",maxlength:"11",value:e.phone,"onUpdate:value":o[0]||(o[0]=n=>e.phone=n),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),s(i,{path:"code"},{default:m(()=>[s(x,{value:e.code,"onUpdate:value":o[1]||(o[1]=n=>e.code=n),placeholder:f(h)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),s(i,{path:"password"},{default:m(()=>[s(x,{value:e.password,"onUpdate:value":o[2]||(o[2]=n=>e.password=n),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),s(i,{path:"confirmPassword"},{default:m(()=>[s(x,{value:e.confirmPassword,"onUpdate:value":o[3]||(o[3]=n=>e.confirmPassword=n),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),s(d,{vertical:"",size:18,class:"w-full"},{default:m(()=>[s(g,{type:"primary",size:"large",round:"",block:"",onClick:c},{default:m(()=>[R(P(f(h)("common.confirm")),1)]),_:1}),s(g,{size:"large",round:"",block:"",onClick:o[4]||(o[4]=n=>f(t)("pwd-login"))},{default:m(()=>[R(P(f(h)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),We={class:"w-400px lt-sm:w-300px"},Ze={class:"flex-y-center justify-between"},Je={class:"text-28px text-primary font-500 lt-sm:text-22px"},Qe={class:"i-flex-col"},Xe={class:"pt-24px"},Ye={class:"pt-24px"},oo=N({name:"login",__name:"index",props:{module:{}},setup(a){const t=a;he();const l=ge(),w={"pwd-login":{label:M["pwd-login"],component:Oe},register:{label:M.register,component:qe},"reset-pwd":{label:M["reset-pwd"],component:He}},e=C(()=>w[t.module||"pwd-login"]),r=C(()=>l.darkMode?E(l.themeColor,600):l.themeColor),c=C(()=>{const p="#ffffff",o=l.darkMode?.5:.2;return _e(p,l.themeColor,o)});return(p,o)=>{const x=Ee,i=Se,g=ke,d=xe;return b(),z("div",{class:"relative size-full flex-center overflow-hidden",style:ye({backgroundColor:c.value})},[s(x,{"theme-color":r.value},null,8,["theme-color"]),s(d,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:m(()=>[u("div",We,[u("header",Ze,[s(i,{class:"text-64px text-primary lt-sm:text-48px"}),u("h3",Je,P(f(h)("system.title")),1),u("div",Qe,[s(g,{"theme-schema":f(l).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:f(l).toggleThemeScheme},null,8,["theme-schema","onSwitch"])])]),u("main",Xe,[u("div",Ye,[s(we,{name:f(l).page.animateMode,mode:"out-in",appear:""},{default:m(()=>[(b(),U(ve(e.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{oo as default};
