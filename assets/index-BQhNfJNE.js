import{d as b,o as x,c as M,w as r,g as e,h as k,t as S,i as o,$ as t,B as N,E as $,D as j,aa as v,a0 as E,j as w,e as P,ae as V,S as F,F as T}from"./index-De3doW-I.js";import{f as A}from"./system-log-DWvQzxwK.js";import{u as G}from"./table-CyJJv8c_.js";import{_ as L}from"./round-search-BHO9ozyz.js";import{_ as O}from"./FormItemGridItem-D9ymTlC3.js";import{_ as U}from"./Grid--J-WRE4U.js";import{_ as W}from"./DataTable-igK3_np4.js";import"./Forward-CYpjZEFa.js";const H=b({name:"ErrorSearch",__name:"errorlog-search",emits:["search"],setup(s,{emit:p}){const n=p;function i(){n("search")}return(m,z)=>{const _=L,u=N,g=$,d=O,h=U,y=j,f=v;return x(),M(f,{bordered:!1,size:"small",class:"card-wrapper"},{default:r(()=>[e(y,{"label-placement":"left","label-width":80,"show-feedback":!1},{default:r(()=>[e(h,{responsive:"screen","item-responsive":""},{default:r(()=>[e(d,{span:"24 s:12 m:6"},{default:r(()=>[e(g,{class:"w-full"},{default:r(()=>[e(u,{type:"primary",ghost:"",onClick:i},{icon:r(()=>[e(_,{class:"text-icon"})]),default:r(()=>[k(" "+S(o(t)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),J={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function K(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!V(s)}const re=b({name:"logmanage_errorlog",__name:"index",setup(s){const p=E(),n=w(!1),i=w({errorInfo:""}),{columns:m,columnChecks:z,data:_,getData:u,loading:g,pagination:d,searchParams:h,resetSearchParams:y}=G({apiFn:A,immediate:!0,apiParams:{page:1,pageSize:20,limit:20,_t:new Date().getTime()},columns:()=>[{key:"requestUri",title:t("page.systemlog.error.requestUri"),width:160,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestMethod",title:t("page.systemlog.error.requestMethod"),width:100,align:"center",resizable:!0},{key:"requestParams",title:t("page.systemlog.error.requestParams"),width:140,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"ip",title:t("page.systemlog.error.ip"),width:160,align:"center",resizable:!0},{key:"userAgent",title:t("page.systemlog.error.userAgent"),minWidth:240,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"createDate",title:t("page.systemlog.error.createDate"),width:160,align:"center",resizable:!0},{key:"operate",title:t("common.operate"),align:"center",width:130,render:c=>{let a;return e("div",{class:"flex-center gap-8px"},[e(N,{type:"primary",ghost:!0,size:"small",onClick:()=>f(c)},K(a=t("page.systemlog.error.errorMsg"))?a:{default:()=>[a]})])}}]});function f(c){i.value.errorInfo=c.errorInfo,n.value=!0}return(c,a)=>{const C=W,D=v,I=F,q=T;return x(),P("div",J,[e(H,{onSearch:o(u)},null,8,["onSearch"]),e(D,{title:o(t)("page.systemlog.error.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{default:r(()=>[e(C,{columns:o(m),data:o(_),size:"small","flex-height":!o(p).isMobile,"scroll-x":o(m).reduce((l,B)=>l+B.width,0),loading:o(g),remote:"","row-key":l=>l.id,pagination:o(d),class:"sm:h-full"},null,8,["columns","data","flex-height","scroll-x","loading","row-key","pagination"])]),_:1},8,["title"]),e(q,{show:n.value,"onUpdate:show":a[0]||(a[0]=l=>n.value=l),title:o(t)("page.systemlog.error.errorMsg"),preset:"card",class:"w-800px"},{default:r(()=>[e(I,{class:"h-480px pr-20px"},{default:r(()=>[k(S(i.value.errorInfo),1)]),_:1})]),_:1},8,["show","title"])])}}});export{re as default};
