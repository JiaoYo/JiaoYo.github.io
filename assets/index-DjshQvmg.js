import{d as E,o as _,e as y,f as e,aa as J,R,j as p,bl as ue,b as X,bm as xe,i as B,bn as oe,P as Y,Q,c as N,w as H,t as V,G as fe,bo as se,ae as W,A as q,bp as Le,a4 as he,l as ke,aG as U,bq as j,g as M,br as _e,bs as ve,ao as ne,am as pe,h as me,a3 as Ce,bt as ge,n as Se,s as Ie,u as Te,r as Ae,bu as ce,bv as Be}from"./index-DtoPL81G.js";import{d as Me}from"./debounce-jHj8VFZm.js";import{f as Oe,a as Re,b as ze,c as De,d as Fe}from"./home-D4asn32V.js";import{b as He}from"./common-C__IF0ch.js";import{u as be,i as Ne,a as Ve,b as We,c as Ee,d as je,e as Ge,f as Pe,g as qe,h as Ye,j as Qe,k as Ze,l as Ue,m as Xe,n as Je,o as Ke,p as et,q as tt,r as at,s as ot,L as te}from"./installCanvasRenderer-CyOrKSjT.js";import{i as st}from"./install-CX03SWNg.js";import{_ as nt}from"./NumberAnimation-CWBjcofm.js";const lt={class:"loader-overlay"},rt=E({__name:"loading",props:{color:{default:"#1890ff"}},setup(o){const a=o;return(h,l)=>(_(),y("div",lt,[e("div",{class:"loader",style:J({"--c":`no-repeat linear-gradient(${a.color} 0 0)`})},null,4)]))}}),it=R(rt,[["__scopeId","data-v-c4fc24aa"]]),ct=o=>(Y("data-v-4ea05f61"),o=o(),Q(),o),dt=["width","height"],ut=["fill","stroke","d"],ft=["stroke"],ht=ct(()=>e("path",{fill:"transparent",stroke:"{mergedColor[1]}",d:"M 5 20 L 5 10 L 12 3  L 60 3 L 68 10"},null,-1)),_t=["stroke","d"],vt={class:"dv-border-box-content"},pt=E({__name:"border-box-13",props:{color:{type:Array,default:()=>[]},backgroundColor:{type:String,default:"transparent"}},setup(o){const a=o,h=["#6586ec","#2cf7fe"],l=p(null),{width:c,height:r}=ue(l,{width:0,height:0},{box:"border-box"}),d=X(()=>xe(h,a.color));return(b,s)=>(_(),y("div",{class:"dv-border-box-13 dv-border-box",ref_key:"domRef",ref:l},[(_(),y("svg",{width:B(c),height:B(r),class:"dv-border-svg-container"},[e("path",{fill:o.backgroundColor,stroke:d.value[0],d:`
            M 5 20 L 5 10 L 12 3  L 60 3 L 68 10
            L ${B(c)-20} 10 L ${B(c)-5} 25
            L ${B(c)-5} ${B(r)-5} L 20 ${B(r)-5}
            L 5 ${B(r)-20} L 5 20
        `},null,8,ut),e("path",{fill:"transparent","stroke-width":"3","stroke-linecap":"round","stroke-dasharray":"10, 5",stroke:d.value[0],d:"M 16 9 L 61 9"},null,8,ft),ht,e("path",{fill:"transparent",stroke:d.value[1],d:`M ${B(c)-5} ${B(r)-30} L ${B(c)-5} ${B(r)-5} L ${B(c)-30} ${B(r)-5}`},null,8,_t)],8,dt)),e("div",vt,[oe(b.$slots,"default",{},void 0,!0)])],512))}}),mt=R(pt,[["__scopeId","data-v-4ea05f61"]]),ye=o=>(Y("data-v-9eaf43ad"),o=o(),Q(),o),gt={key:0,class:"item_title"},bt=ye(()=>e("div",{class:"zuo"},null,-1)),yt={class:"title-inner"},wt=ye(()=>e("div",{class:"you"},null,-1)),$t=E({__name:"item-wrap",props:{title:{default:""}},setup(o){return(a,h)=>{const l=mt;return _(),N(l,null,{default:H(()=>[a.title!==""?(_(),y("div",gt,[bt,e("span",yt,"   "+V(a.title)+"   ",1),wt])):fe("",!0),e("div",{class:se(a.title!==""?"item_title_content":"item_title_content_def")},[oe(a.$slots,"default",{},void 0,!0)],2)]),_:3})}}}),xt=R($t,[["__scopeId","data-v-9eaf43ad"]]),we=o=>(Y("data-v-2dd4fe8a"),o=o(),Q(),o),Lt=["width","height"],kt=["d"],Ct=we(()=>e("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"1"},null,-1)),St=we(()=>e("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"},null,-1)),It=[Ct,St],Tt=["fill"],At=["dur","path"],Bt=["fill","points"],Mt=["stroke","href"],Ot=["stroke","href","mask"],Rt=["from","to","dur"],zt={class:"border-box-content"},Dt={__name:"border-box-8",props:{color:{type:Array,default:()=>[]},dur:{type:Number,default:3},backgroundColor:{type:String,default:"transparent"},reverse:{type:Boolean,default:!1}},setup(o){const a=o,h=()=>"xxxx-xxxx-xxxx".replace(/[x]/g,()=>Math.floor(Math.random()*16).toString(16)),l=p(null),c=p(0),r=p(0),d=h(),b=`border-box-8-path-${d}`,s=`border-box-8-gradient-${d}`,t=`border-box-8-mask-${d}`,f=["#235fa7","#4fd2dd"],i=p([...f]),n=(g,x)=>{const w=[...g];return x.forEach((A,F)=>{A!==void 0&&(w[F]=A)}),w},u=()=>{l.value&&(c.value=l.value.clientWidth,r.value=l.value.clientHeight)},v=X(()=>(c.value+r.value-5)*2),m=X(()=>a.reverse?`M 2.5, 2.5 L 2.5, ${r.value-2.5} L ${c.value-2.5}, ${r.value-2.5} L ${c.value-2.5}, 2.5 L 2.5, 2.5`:`M2.5, 2.5 L${c.value-2.5}, 2.5 L${c.value-2.5}, ${r.value-2.5} L2.5, ${r.value-2.5} L2.5, 2.5`);return W(()=>a.color,g=>{i.value=n(f,g)},{immediate:!0}),q(()=>{u(),window.addEventListener("resize",u)}),(g,x)=>(_(),y("div",{class:"dv-border-box-8",ref_key:"containerRef",ref:l},[(_(),y("svg",{class:"dv-border-svg-container",width:c.value,height:r.value},[e("defs",null,[e("path",{id:b,d:m.value,fill:"transparent"},null,8,kt),e("radialGradient",{id:s,cx:"50%",cy:"50%",r:"50%"},It),e("mask",{id:t},[e("circle",{cx:"0",cy:"0",r:"150",fill:`url(#${s})`},[e("animateMotion",{dur:`${o.dur}s`,path:m.value,rotate:"auto",repeatCount:"indefinite"},null,8,At)],8,Tt)])]),e("polygon",{fill:o.backgroundColor,points:`5, 5 ${c.value-5}, 5 ${c.value-5} ${r.value-5} 5, ${r.value-5}`},null,8,Bt),e("use",{stroke:i.value[0],"stroke-width":"1",href:`#${b}`},null,8,Mt),e("use",{stroke:i.value[1],"stroke-width":"3",href:`#${b}`,mask:`url(#${t})`},[e("animate",{attributeName:"stroke-dasharray",from:`0, ${v.value}`,to:`${v.value}, 0`,dur:`${o.dur}s`,repeatCount:"indefinite"},null,8,Rt)],8,Ot)],8,Lt)),e("div",zt,[oe(g.$slots,"default",{},void 0,!0)])],512))}},Ft=R(Dt,[["__scopeId","data-v-2dd4fe8a"]]);be(st);be([Ne,Ve,We,Ee,je,Ge,Pe,qe,Ye,Qe,Ze,Ue,Xe,Je,Ke,et,tt,at]);function K(o,a={}){const h=Le(),l=he(),c=X(()=>l.darkMode),r=p(null),d={width:0,height:0},{width:b,height:s}=ue(r,d);let t=null;const f=o(),{onRender:i=L=>{m()&&c.value},onUpdated:n=L=>{L.hideLoading()},onDestroy:u}=a;function v(){return r.value&&d.width>0&&d.height>0}function m(){return!!(r.value&&t)}async function g(L=()=>f){if(!m())return;const T=L(f,o);Object.assign(f,T),m()&&(t==null||t.clear()),t==null||t.setOption({...T,backgroundColor:"transparent"}),await(n==null?void 0:n(t))}async function x(L=()=>f){const T=L(f,o);t==null||t.setOption({...T,backgroundColor:"transparent"})}function w(L){t==null||t.setOption(L)}async function A(){if(!m()){const L=c.value?"dark":"light";await U(),t=ot(r.value,L),t.setOption({...f,backgroundColor:"transparent"}),await(i==null?void 0:i(t))}}function F(){t==null||t.resize()}async function S(){t&&(await(u==null?void 0:u(t)),t==null||t.dispose(),t=null)}async function G(){await S(),await A(),await(n==null?void 0:n(t))}async function I(L,T){if(d.width=L,d.height=T,!v()){await S();return}m()&&F(),await A()}h.run(()=>{W([b,s],([L,T])=>{I(L,T)}),W(c,()=>{G()})}),ke(()=>{S(),h.stop()});function Z(){t==null||t.hideLoading()}return{domRef:r,updateOptions:g,updateOptionsAsync:x,setOptions:w,hideLoading:Z}}const Ht=E({name:"LineChart",__name:"pieChart",props:{value:{type:Number,default:0}},setup(o){const a=o,h=[{max:70,color:"#4CAF50"},{max:90,color:"#FFB300"},{max:100,color:"#F44336"}],l=f=>(h.find(n=>f<=n.max)||h[h.length-1]).color,{domRef:c,updateOptionsAsync:r,hideLoading:d,updateOptions:b}=K(()=>({series:[{type:"pie",radius:["60%","78%"],avoidLabelOverlap:!1,clockWise:!0,animation:!0,itemStyle:{borderWidth:0,borderColor:"transparent",color:"",shadowColor:"",shadowBlur:0},hoverAnimation:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:[{value:0,label:{formatter:function(f){return f.value+"%"},position:"center",show:!0,textStyle:{fontSize:j(14),fontWeight:"bold",color:""}},itemStyle:{borderRadius:0}},{value:0,name:"invisible",itemStyle:{color:"#ccc",borderWidth:0,borderColor:"transparent"}}]}]}));async function s(){r(f=>{d(),f.series[0].data[0].value=a.value,f.series[0].data[1].value=100-a.value;const i=l(a.value);return f.series[0].itemStyle.color=i,f.series[0].itemStyle.shadowColor=i,f.series[0].label.color=i,f})}W(()=>a.value,async f=>{s()});async function t(){s()}return t(),(f,i)=>(_(),y("div",{ref_key:"domRef",ref:c,class:"chart"},null,512))}}),ae=R(Ht,[["__scopeId","data-v-59d0d00b"]]),D=o=>(Y("data-v-72cfccb9"),o=o(),Q(),o),Nt={class:"list"},Vt={class:"item"},Wt={class:"item_info"},Et={class:"item_info_text"},jt=D(()=>e("path",{fill:"currentColor",d:"M34 21.08L30.86 8.43A2 2 0 0 0 28.94 7H7.06a2 2 0 0 0-1.93 1.47L2 21.08a1 1 0 0 0 0 .24V29a2 2 0 0 0 2 2h28a2 2 0 0 0 2-2v-7.69a1 1 0 0 0 0-.23M4 29v-7.56L7.06 9h21.87L32 21.44V29Z",class:"clr-i-outline clr-i-outline-path-1"},null,-1)),Gt=D(()=>e("path",{fill:"currentColor",d:"M6 20h24v2H6z",class:"clr-i-outline clr-i-outline-path-2"},null,-1)),Pt=D(()=>e("path",{fill:"currentColor",d:"M26 24h4v2h-4z",class:"clr-i-outline clr-i-outline-path-3"},null,-1)),qt=D(()=>e("path",{fill:"none",d:"M0 0h36v36H0z"},null,-1)),Yt=[jt,Gt,Pt,qt],Qt=D(()=>e("div",{class:"title"},"磁盘",-1)),Zt={class:"item"},Ut={class:"item_info"},Xt={class:"item_info_text"},Jt=_e('<g fill="none" data-v-72cfccb9><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 28h38v14H5zM5 6h38v14H5z" data-v-72cfccb9></path><rect width="4" height="4" x="11" y="11" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="11" y="33" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="19" y="11" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="19" y="33" fill="currentColor" rx="2" data-v-72cfccb9></rect><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M31 13h4m-4 22h4" data-v-72cfccb9></path></g>',1),Kt=[Jt],ea=D(()=>e("div",{class:"title"},"内存",-1)),ta={class:"item brBom"},aa={class:"item_info"},oa={class:"item_info_text"},sa=D(()=>e("path",{fill:"currentColor",d:"M15 9H9v6h6zm-2 4h-2v-2h2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2zm-4 6H7V7h10z"},null,-1)),na=[sa],la=D(()=>e("div",{class:"title"},"CPU",-1)),ra={class:"item_Cardinfo"},ia=D(()=>e("div",{class:"title"},"日志接收总数",-1)),ca={class:"value"},da={class:"logTotalClass"},ua=D(()=>e("span",{class:"unit"},"条",-1)),fa={class:"item_Cardinfo"},ha=D(()=>e("div",{class:"title"},"日志源资产数",-1)),_a={class:"value"},va={class:"logTotalClass"},pa=D(()=>e("span",{class:"unit"},"条",-1)),ma=E({__name:"left-top",props:{data:{type:Object,default:()=>({})},logInfo:{type:Object,default:()=>({logTotal:void 0,logSource:void 0})},key:{type:Number,default:""}},setup(o){const a=o,h=[{max:70,color:"#4CAF50"},{max:90,color:"#FFB300"},{max:100,color:"#F44336"}],l=c=>{const r=h.find(d=>c<=d.max);return r?r.color:"#CCCCCC"};return(c,r)=>{var s,t,f,i,n,u;const d=nt,b=Ft;return _(),y("div",Nt,[e("div",Vt,[e("div",Wt,[e("div",Et,[(_(),y("svg",{xmlns:"http://www.w3.org/2000/svg",style:J({color:l((s=a.data.disk)==null?void 0:s.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 36 36"},Yt,4)),Qt]),(_(),N(ae,{class:"pieChart",key:a.key,value:(t=a.data.disk)==null?void 0:t.replace("%","")},null,8,["value"]))])]),e("div",Zt,[e("div",Ut,[e("div",Xt,[(_(),y("svg",{xmlns:"http://www.w3.org/2000/svg",style:J({color:l((f=a.data.mem)==null?void 0:f.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 48 48"},Kt,4)),ea]),(_(),N(ae,{class:"pieChart",key:a.key,value:(i=a.data.mem)==null?void 0:i.replace("%","")},null,8,["value"]))])]),e("div",ta,[e("div",aa,[e("div",oa,[(_(),y("svg",{xmlns:"http://www.w3.org/2000/svg",style:J({color:l((n=a.data.cpu)==null?void 0:n.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 24 24"},na,4)),la]),(_(),N(ae,{class:"pieChart",key:a.key,value:(u=a.data.cpu)==null?void 0:u.replace("%","")},null,8,["value"]))])]),M(b,{class:"itemCard",dur:60},{default:H(()=>[e("div",ra,[ia,e("div",ca,[e("span",da,[M(d,{ref:"numberAnimationInstRef",from:0,to:a.logInfo.logTotal||0},null,8,["to"])]),ua])])]),_:1}),M(b,{class:"itemCard",dur:60},{default:H(()=>[e("div",fa,[ha,e("div",_a,[e("span",va,[M(d,{ref:"numberAnimationInstRef",from:0,to:a.logInfo.logSource||0},null,8,["to"])]),pa])])]),_:1})])}}}),ga=R(ma,[["__scopeId","data-v-72cfccb9"]]),ba="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%3e%3cpath%20fill='%23fff'%20d='M2.5%2012c-.13%200-.25-.05-.35-.14l-2-1.93A.55.55%200%200%201%200%209.57V2.43c0-.13.06-.26.15-.36l2-1.93c.15-.14.36-.18.55-.1c.18.08.3.26.3.46v11c0%20.2-.12.38-.3.46c-.07.03-.13.04-.2.04m7-3.5c-.06%200-.13-.01-.19-.04A.5.5%200%200%201%209%208l-.01-4.06c0-.2.12-.39.31-.46c.19-.08.4-.03.54.11l1.67%201.7c.38.39.38%201.02-.01%201.41L9.85%208.35a.47.47%200%200%201-.35.15'%20/%3e%3cpath%20fill='none'%20stroke='%23fff'%20stroke-linecap='round'%20d='M2.5%202.5H6c.28%200%20.5.22.5.5v1m-4%205.5H6c.28%200%20.5-.22.5-.5V8M11%206H5'%20stroke-width='1'%20/%3e%3c/svg%3e",ya=o=>(Y("data-v-6581f397"),o=o(),Q(),o),wa={class:"inner_right"},$a=ya(()=>e("div",{class:"dibu"},null,-1)),xa={class:"info"},La={class:"alarmName"},ka={class:"info_bottom"},Ca={class:"alarmLevel"},Sa={class:"time"},Ia=3e3,Ta=3,Aa={__name:"left-center",props:{data:{type:Array,default:()=>[]}},setup(o){const a=o,h=[{label:"一般",color:"#0091FF",value:0},{label:"低级",color:"#ffd600",value:1},{label:"中级",color:"#ffab00",value:2},{label:"高级",color:"#ff6d00",value:3},{label:"严重",color:"#dd2c00",value:4}],l=v=>h.find(m=>m.value===v)||h[0],c=p(!0),r=X(()=>c.value?[...a.data,...a.data]:a.data),d=p(!1),b=p(),s=p();let t=null;const f=()=>{d.value=!0,c.value=!1,clearInterval(t)},i=()=>{d.value=!1,c.value=!0,U(()=>{n()})},n=()=>{clearInterval(t),t=setInterval(()=>{var A;if(d.value||!c.value)return;const v=b.value,m=s.value;if(!v||!m)return;const g=((A=m.children[0])==null?void 0:A.offsetHeight)||0,x=m.scrollHeight/2,w=v.scrollTop+g*Ta;w>=x?u(w,()=>{v.scrollTop=w-x}):u(w)},Ia)},u=(v,m)=>{const g=b.value,x=800,w=g.scrollTop,A=v-w,F=performance.now(),S=I=>I<.5?2*I*I:-1+(4-2*I)*I,G=I=>{const Z=I-F,L=Math.min(Z/x,1);g.scrollTop=w+A*S(L),L<1?requestAnimationFrame(G):m&&m()};requestAnimationFrame(G)};return q(()=>{U(()=>{n()})}),ve(()=>{clearInterval(t)}),(v,m)=>(_(),y("div",{class:se(["left_boottom scroll-view",{"show-scrollbar":d.value}]),ref_key:"scrollViewRef",ref:b,onMouseenter:f,onMouseleave:i},[e("div",{ref_key:"listRef",ref:s,class:"left_boottom_list"},[(_(!0),y(ne,null,pe(r.value,(g,x)=>(_(),y("div",{class:"left_boottom_item",key:x},[e("div",wa,[$a,e("div",xa,[e("div",La,"告警名称："+V(g.aname),1),e("div",ka,[e("div",Ca,[me(" 告警等级： "),e("span",{style:J({color:l(g.alevel).color,border:"1px solid "+l(g.alevel).color,padding:"0 5px",borderRadius:"5px"})},V(l(g.alevel).label),5)]),e("div",Sa,"时间："+V(g.dbtime),1)])])])]))),128))],512)],34))}},Ba=R(Aa,[["__scopeId","data-v-6581f397"]]),Ma=E({name:"LineChart",__name:"loglineChart",props:{data:{type:Array,default:[]}},setup(o){const a=o,{domRef:h,updateOptions:l,updateOptionsAsync:c,hideLoading:r}=K(()=>({xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:j(12)}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.2)"}},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:j(12)}},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"},valueFormatter:function(s){return(s+""!="undefined"?s:"--")+"条"}},grid:{left:"5%",right:"5%",bottom:"0%",containLabel:!0},dataZoom:[{type:"inside",start:0,show:!1,end:100}],series:[{color:"rgb(9, 202, 243)",type:"line",lineStyle:{width:1,normal:{color:"rgb(9, 202, 243)",shadowBlur:3,shadowColor:"rgba(9, 202, 243,0.5)",shadowOffsetY:8}},areaStyle:{color:new te(0,0,0,1,[{offset:0,color:"rgba(9, 202, 243,0.2)"},{offset:1,color:"rgba(9, 202, 243,0)"}],!1),shadowColor:"rgba(9, 202, 243,0.5)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0}]}));async function d(){await new Promise(s=>{setTimeout(s,1e3)}),l(s=>(r(),a.data&&(s.xAxis.data=a.data.map(t=>t.date),s.series[0].data=a.data.map(t=>t.dailycount)),s))}async function b(){d()}return W(()=>a.data,()=>{c(s=>(r(),a.data&&(s.xAxis.data=a.data.map(t=>t.date),s.series[0].data=a.data.map(t=>[t.date,t.dailycount])),s))}),b(),(s,t)=>(_(),y("div",{ref_key:"domRef",ref:h,class:"chart"},null,512))}}),Oa=R(Ma,[["__scopeId","data-v-3a13ec33"]]),Ra=E({name:"LineChart",__name:"auditlineChart",props:{data:{type:Array,default:[]}},setup(o){const a=o,{domRef:h,updateOptions:l,updateOptionsAsync:c,hideLoading:r}=K(()=>({xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:j(12)}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.2)"}},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:j(12)}},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"},valueFormatter:function(s){return(s+""!="undefined"?s:"--")+"条"}},grid:{left:"5%",right:"5%",bottom:"0%",containLabel:!0},dataZoom:[{type:"inside",start:0,show:!1,end:100}],series:[{color:"rgb(9, 202, 243)",type:"line",lineStyle:{width:1,normal:{color:"rgb(9, 202, 243)",shadowBlur:3,shadowColor:"rgba(9, 202, 243,0.5)",shadowOffsetY:8}},areaStyle:{color:new te(0,0,0,1,[{offset:0,color:"rgba(9, 202, 243,0.2)"},{offset:1,color:"rgba(9, 202, 243,0)"}],!1),shadowColor:"rgba(9, 202, 243,0.5)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0}]}));async function d(){await new Promise(s=>{setTimeout(s,1e3)}),l(s=>(r(),a.data&&(s.xAxis.data=a.data.map(t=>t.logname),s.series[0].data=a.data.map(t=>[t.logname,t.count])),s))}async function b(){d()}return W(()=>a.data,()=>{c(s=>(a.data&&(s.xAxis.data=a.data.map(t=>t.logname),s.series[0].data=a.data.map(t=>[t.logname,t.count])),s))}),b(),(s,t)=>(_(),y("div",{ref_key:"domRef",ref:h,class:"chart"},null,512))}}),za=R(Ra,[["__scopeId","data-v-b192f843"]]),Da=E({name:"LineChart",__name:"assetsType",props:{data:{type:Object,default:()=>({})}},setup(o){const a=o;W(()=>a.data,async i=>{s()});const h=Ce(),l=p(null),{domRef:c,updateOptionsAsync:r,hideLoading:d,updateOptions:b}=K(()=>({backgroundColor:"#0f1c3f",tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",borderWidth:1,backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"}},legend:{show:!1},grid:{left:"5%",right:"5%",bottom:"2%",top:"5%",containLabel:!0},series:[{type:"pie",selectedMode:"single",radius:[0,"30%"],label:{position:"inner",fontSize:j(14),color:"#f2f3f5",fontWeight:"bold"},labelLine:{show:!1},itemStyle:{shadowBlur:8,shadowColor:"rgba(255, 255, 255, 0.2)"},data:[]},{type:"pie",radius:["45%","60%"],labelLine:{length:30,lineStyle:{color:"#aaa"}},label:{color:"#fff",fontSize:j(14),fontWeight:"bold"},itemStyle:{borderRadius:10,shadowBlur:8,shadowOffsetX:0,shadowColor:"rgba(255, 255, 255, 0.2)",color:i=>{const n=[["#00c6ff","#0072ff"],["#f77062","#fe5196"],["#00f2fe","#4facfe"],["#43e97b","#38f9d7"],["#fa709a","#fee140"],["#7b4397","#dc2430"],["#1f4037","#99f2c8"]],u=n[i.dataIndex%n.length];return new te(0,0,1,1,[{offset:0,color:u[0]},{offset:1,color:u[1]}])}},data:[]}],animationDuration:1e3,animationEasing:"cubicOut"}));async function s(){r(i=>{d(),i.series[0].data=Object.keys(a.data).map(u=>({name:u,value:Object.values(a.data[u]).reduce((v,m)=>v+m,0)}));const n=[];return Object.keys(a.data).map(u=>a.data[u]).forEach(u=>{for(let v in u)u.hasOwnProperty(v)&&n.push({name:v,value:u[v]})}),i.series[1].data=n,i})}function t(){b((i,n)=>(n(),i))}async function f(){s()}return W(()=>h.locale,()=>{t()}),f(),q(()=>{l.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),ge(()=>{l.value!==null&&(clearInterval(l.value),l.value=null)}),(i,n)=>(_(),y("div",{ref_key:"domRef",ref:c,class:"chart"},null,512))}}),Fa=R(Da,[["__scopeId","data-v-c0eef00b"]]),Ha=o=>(Y("data-v-bd3a938c"),o=o(),Q(),o),Na=["aria-label"],Va={class:"inner_right"},Wa=Ha(()=>e("div",{class:"dibu"},null,-1)),Ea={class:"info"},ja={class:"info_left"},Ga={class:"logName"},Pa={class:"scname"},qa={class:"status"},Ya=3e3,Qa=3,Za={__name:"right-top",props:{data:{type:Array,default:()=>[]}},setup(o){const a=o,h=p(!1),l=p(),c=p();let r=null;const d=p(!0),b=X(()=>d.value?[...a.data,...a.data]:a.data),s=()=>{h.value=!0,d.value=!1,clearInterval(r)},t=()=>{h.value=!1,d.value=!0,U(()=>{f()})},f=()=>{clearInterval(r),a.data.length!==0&&(r=setInterval(()=>{var x;if(h.value||!d.value)return;const n=l.value,u=c.value;if(!n||!u)return;const v=((x=u.children[0])==null?void 0:x.offsetHeight)||0,m=u.scrollHeight/2,g=n.scrollTop+v*Qa;g>=m?i(g,()=>{n.scrollTop=g-m}):i(g)},Ya))},i=(n,u)=>{const v=l.value,m=800,g=v.scrollTop,x=n-g,w=performance.now(),A=S=>S<.5?2*S*S:-1+(4-2*S)*S,F=S=>{const G=S-w,I=Math.min(G/m,1);v.scrollTop=g+x*A(I),I<1?requestAnimationFrame(F):u&&u()};requestAnimationFrame(F)};return W(()=>a.data,n=>{n.length>0&&U(()=>{l.value.scrollTop=0,f()})},{immediate:!0}),q(()=>{U(()=>{f()})}),ve(()=>{clearInterval(r)}),(n,u)=>(_(),y("div",{class:se(["left_boottom scroll-view",{"show-scrollbar":h.value}]),ref_key:"scrollViewRef",ref:l,onMouseenter:s,onMouseleave:t},[e("div",{ref_key:"listRef",ref:c,class:"left_boottom_list"},[(_(!0),y(ne,null,pe(b.value,(v,m)=>(_(),y("div",{class:"left_boottom_item",key:m,"aria-label":`项目${m%a.data.length+1}: ${v.type}, 状态: ${v.enable===0?"正常":"异常"}`,tabindex:"0"},[e("div",Va,[Wa,e("div",Ea,[e("div",ja,[e("div",Ga,V(v.type),1),e("div",Pa,V(v.scname),1)]),e("div",qa,V(v.enable==0?"🟢":"🔴"),1)])])],8,Na))),128))],512)],34))}},Ua=R(Za,[["__scopeId","data-v-bd3a938c"]]),Xa=E({name:"LineChart",__name:"barChart",props:Se({data:{type:Array,default:[]}},{data:{required:!0},dataModifiers:{}}),emits:["update:data"],setup(o){const a=o,h=Ie(o,"data"),l=p(null),c=Date.now();new Date(c).setHours(23,59,59,999);const{domRef:r,updateOptions:d,updateOptionsAsync:b,hideLoading:s}=K(()=>({tooltip:{trigger:"item",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",borderWidth:2,textStyle:{color:"#FFF"},valueFormatter:function(i){return(i+""!="undefined"?i:"--")+"条"}},xAxis:{data:[],axisLine:{lineStyle:{color:"#B4B4B4"}},axisTick:{show:!1},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:j(12)}},yAxis:[{splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.3)"}},axisLine:{lineStyle:{color:"#B4B4B4"}},axisLabel:{formatter:"{value}",fontSize:j(12),color:"#B4B4B4",fontWeight:500}}],grid:{left:"3%",right:"10%",bottom:"3%",top:"5%",containLabel:!0},series:[{type:"bar",barMaxWidth:30,itemStyle:{borderRadius:10,color:new te(0,0,0,1,[{offset:0,color:"#956FD4"},{offset:1,color:"#3EACE5"}])},data:[]}]}));async function t(){await new Promise(i=>{setTimeout(i,1e3)}),d(i=>(s(),h.value&&(i.xAxis.data=a.data.map(n=>n.logname),i.series[0].data=a.data.map(n=>[n.logname,n.count])),i))}W(()=>h.value,i=>{b(n=>(h.value&&(n.xAxis.data=a.data.map(u=>u.logname),n.series[0].data=a.data.map(u=>[u.logname,u.count])),n))});async function f(){await t()}return q(()=>{r.value=l.value}),f(),(i,n)=>(_(),y("div",{ref_key:"chartDom",ref:l,class:"chart"},null,512))}}),de=R(Xa,[["__scopeId","data-v-4a2adcfd"]]),Ja=o=>(Y("data-v-4ed01809"),o=o(),Q(),o),Ka={class:"content_wrap"},eo={class:"d-flex jc-center title_wrap"},to=_e('<div class="zuojuxing" data-v-4ed01809></div><div class="youjuxing" data-v-4ed01809></div><div class="guang" data-v-4ed01809></div><div class="d-flex jc-center" data-v-4ed01809><div class="title" data-v-4ed01809><span class="title-text" data-v-4ed01809>日志审计可视化</span></div></div>',4),ao={class:"top_Info"},oo=Ja(()=>e("div",{class:"left"},null,-1)),so={class:"right"},no={class:"setting_icon"},lo=["src"],ro={class:"index-box"},io={class:"content_left"},co={class:"content_center"},uo={class:"content_right"},fo=E({name:"bigscreen",__name:"index",setup(o){const a=Te(),h=he(),l=Ae({dateDay:"",dateYear:"",dateWeek:"",timing:null}),c=["周日","周一","周二","周三","周四","周五","周六"];(()=>{l.timing=setInterval(()=>{l.dateDay=ce().format("YYYY-MM-DD hh : mm : ss"),l.dateWeek=c[ce().day()]},1e3)})();const d=p(),b=async()=>{const{data:k,error:O}=await He({pageSize:20});O||(d.value=k)},s=p(),t=p(2),f=async()=>{const{data:k,error:O}=await Oe({dateType:t.value});O||(s.value=k)},i=p(),n=p(),u=p(2),v=p(),m=p(),g=p(),x=async()=>{const{data:k,error:O}=await Re({dateType:u.value,lsid:v.value,ctype:g.value});O||(n.value=Number(k.total),u.value==3||u.value==4?i.value=k.data.map($=>($.date=$.dateStr,$)).sort(($,z)=>{let C=new Date($.date),P=new Date(z.date);return C-P}):i.value=k.data.sort(($,z)=>{let C=new Date($.date),P=new Date(z.date);return C-P}))},w=p(),A=async()=>{const{data:k,error:O}=await ze();if(!O){w.value=k,w.value.logSoursceList.sort((z,C)=>z.enable-C.enable);const $=new Set;k.logSoursceList.forEach(z=>{const C=`${z.logsoudev},${z.type}`;$.add(C)}),m.value=Array.from($).map(z=>{const[C,P]=z.split(",");return{logsoudev:parseInt(C,10),type:P}})}},F=p(),S=async()=>{const{data:k,error:O}=await De();O||(F.value=k)},G=p(2),I=p(),Z=async()=>{const{data:k,error:O}=await Fe({dateType:G.value});O||(I.value=k,console.log(I.value,"securityNumsList.value"))},L=()=>{var k;(k=window.$dialog)==null||k.info({title:"退出登录",content:"确定要退出登录吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{const{data:O,error:$}=await Be();$||(a.clearInfo(),window.location.reload())}})},T=p(0),$e=Me(()=>{T.value++},500),le=()=>{$e()},re=p(),ee=p(!1);return q(async()=>{try{ee.value=!0,b(),f(),x(),A(),S(),Z(),setTimeout(()=>{ee.value=!1},2e3)}catch{ee.value=!1}re.value=setInterval(()=>{A(),x(),S(),f(),Z()},1e3*5)}),q(()=>{h.themeScheme!="dark"&&h.toggleThemeScheme(),window.addEventListener("resize",le)}),ge(()=>{clearInterval(re.value),window.removeEventListener("resize",le)}),(k,O)=>{const $=xt,z=it;return _(),y(ne,null,[e("div",Ka,[e("div",eo,[to,e("div",ao,[oo,e("div",so,[me(V(l.dateYear)+" "+V(l.dateWeek)+" "+V(l.dateDay)+" ",1),e("div",no,[e("img",{src:B(ba),alt:"",onClick:L},null,8,lo)])])])]),e("div",ro,[e("div",io,[M($,{class:"content_left-top",title:"系统信息"},{default:H(()=>{var C,P,ie;return[(_(),N(ga,{data:(C=w.value)==null?void 0:C.systemStatus,key:T.value,logInfo:{logTotal:n.value,logSource:(ie=(P=w.value)==null?void 0:P.logSourceDevAsset)==null?void 0:ie.aunum}},null,8,["data","logInfo"]))]}),_:1}),M($,{class:"content_left-center",title:"系统告警"},{default:H(()=>[M(Ba,{data:d.value},null,8,["data"])]),_:1}),M($,{class:"content_left-bottom",title:"日志源日志数量TOP10"},{default:H(()=>[(_(),N(de,{data:F.value,key:T.value},null,8,["data"]))]),_:1})]),e("div",co,[M($,{title:"日志源资产类型",class:"content_center-top"},{default:H(()=>{var C;return[(_(),N(Fa,{data:(C=w.value)==null?void 0:C.logSoursceAssetType,key:T.value},null,8,["data"]))]}),_:1}),M($,{title:"日志采集趋势",class:"content_center-bottom"},{default:H(()=>[(_(),N(Oa,{data:i.value,key:T.value},null,8,["data"]))]),_:1})]),e("div",uo,[M($,{title:"日志源接收状态",class:"content_right-top"},{default:H(()=>{var C;return[M(Ua,{data:(C=w.value)==null?void 0:C.logSoursceList},null,8,["data"])]}),_:1}),M($,{class:"content_right-center",title:"审计告警数量趋势"},{default:H(()=>[(_(),N(za,{data:s.value,key:T.value},null,8,["data"]))]),_:1}),M($,{class:"content_right-bottom",title:"安全事件类别数量Top10"},{default:H(()=>[(_(),N(de,{data:I.value,key:T.value},null,8,["data"]))]),_:1})])])]),ee.value?(_(),N(z,{key:0})):fe("",!0)],64)}}}),yo=R(fo,[["__scopeId","data-v-4ed01809"]]);export{yo as default};
