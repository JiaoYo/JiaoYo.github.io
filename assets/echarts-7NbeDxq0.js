import{bL as L,a1 as T,b as j,j as x,dr as B,y as w,l as E,ay as M}from"./index-CaRSwrxR.js";import{u as R,i as q,a as A,b as D,c as G,d as H,e as I,f as J,g as K,h as N,j as P,k as Q,l as V,m as W,n as X,o as Y,p as Z,q as _,r as F,s as U}from"./installCanvasRenderer-iCPGNWhM.js";R([q,A,D,G,H,I,J,K,N,P,Q,V,W,X,Y,Z,_,F]);function ta(d,$={}){const h=L(),p=T(),o=j(()=>p.darkMode),i=x(null),e={width:0,height:0},{width:m,height:b}=B(i,e);let a=null;const r=d(),{onRender:u=s=>{if(!l())return;const t=o.value?"rgb(224, 224, 224)":"rgb(31, 31, 31)",C=o.value?"#001408":"rgba(255, 255, 255, 0.8)";s.showLoading({color:p.themeColor,textColor:t,fontSize:14,maskColor:C})},onUpdated:n=s=>{s.hideLoading()},onDestroy:c}=$;function k(){return i.value&&e.width>0&&e.height>0}function l(){return!!(i.value&&a)}async function y(s=()=>r){if(!l())return;const t=s(r,d);Object.assign(r,t),l()&&(a==null||a.clear()),a==null||a.setOption({...t,backgroundColor:"transparent"}),await(n==null?void 0:n(a))}function O(s){a==null||a.setOption(s)}async function g(){if(!l()){const s=o.value?"dark":"light";await M(),a=U(i.value,s),a.setOption({...r,backgroundColor:"transparent"}),await(u==null?void 0:u(a))}}function S(){a==null||a.resize()}async function f(){a&&(await(c==null?void 0:c(a)),a==null||a.dispose(),a=null)}async function v(){await f(),await g(),await(n==null?void 0:n(a))}async function z(s,t){if(e.width=s,e.height=t,!k()){await f();return}l()&&S(),await g()}return h.run(()=>{w([m,b],([s,t])=>{z(s,t)}),w(o,()=>{v()})}),E(()=>{f(),h.stop()}),{domRef:i,updateOptions:y,setOptions:O}}export{ta as u};
