import{_ as I}from"./table-column-setting.vue_vue_type_script_setup_true_lang-CpEk0H9p.js";import{_ as J}from"./export-DCiyxnkL.js";import{_ as K}from"./round-search-DCFj1fEa.js";import{d as M,b0 as l,m as v,o as x,b as A,g as e,w as a,f as t,B as f,ag as H,h as w,t as b,$ as T,c as L,aq as C,F as Q,T as W,a7 as X,at as Y,c0 as Z,R as ee,c1 as te,_ as ae}from"./index-BhO9mJqH.js";import{a as ne}from"./metar-CQAyAPIp.js";import{u as oe,a as se}from"./table-Dxg8ykSZ.js";import{e as le}from"./exportExcel-Bv4G4H50.js";import{_ as ie}from"./DatePicker-C96CTQMI.js";import{_ as re}from"./FormItemGridItem-B6FnsOtc.js";import{_ as ce}from"./Grid-Dy0tlGIH.js";const me={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},de=M({name:"realtimequery_nwpquery",__name:"index",setup(pe){const{columns:y,columnChecks:h,data:_,getData:m,loading:k,mobilePagination:N,searchParams:i,resetSearchParams:_e}=oe({apiFn:ne,apiParams:{page:1,pageSize:20,limit:20,startTime:l(1,Date.now())||null,endTime:l(1,Date.now()+2592e5)||null,_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",width:50},{key:"dbtime",title:"时间",align:"center",width:160},{key:"tt2",title:"2m气温(℃)",align:"center",width:100},{key:"dt2",title:"2m露点(℃)",align:"center",width:100},{key:"rh2",title:"相对湿度(%)",align:"center",width:100},{key:"wd10",title:"10m风向(°)",align:"center",width:100},{key:"ws10",title:"10m风速(m/s)",align:"center",width:100},{key:"rain",title:"降水量(mm)",align:"center",width:100},{key:"ps",title:"气压(Pa)",align:"center",width:100},{key:"tcc",title:"总云量(%)",align:"center",width:100},{key:"ssrd",title:"太阳总辐射(w/m²)",align:"center",width:140},{key:"tsdsr",title:"太阳直接辐射(w/m²)",align:"center",width:140},{key:"ssrdiff",title:"太阳散辐射(w/m²)",align:"center",width:140},{key:"lasttime",title:"最后更新时间",align:"center",width:160}]}),{drawerVisible:ue,operateType:fe,editingData:we,handleAdd:he,handleEdit:ge,checkedRowKeys:d,onBatchDeleted:ye,onDeleted:ke}=se(_,m),S=()=>{m()},u=v([Date.now(),Date.now()+864e5*3]);async function P(p,n){i.startTime=l(1,n[0]),i.endTime=l(1,n[1]),m()}const z=()=>{const p={};y.value.forEach(o=>{o.key!="index"&&o.key!="operation"&&o.type!=="selection"&&(p[o.key]=o.title)});const n=[];_.value.forEach(o=>{if(d.value.includes(o.id)){const r=JSON.parse(JSON.stringify(p));for(const c in r)o.hasOwnProperty(c)?r[c]=o[c]:r[c]="";n.push(r)}}),le(n,p,"天气预报数据")},g=v("0"),B={近一天:[Date.now()-864e5*1,Date.now()],近三天:[Date.now()-864e5*3,Date.now()],近七天:[Date.now()-864e5*7,Date.now()],超短期:[Date.now(),Date.now()+144e5],短期:[Date.now(),Date.now()+864e5*10]},$=()=>{u.value=[Date.now(),Date.now()+144e5],i.startTime=l(1,Date.now()),i.endTime=l(1,Date.now()+144e5),m()},q=()=>{u.value=[Date.now(),Date.now()+864e5*10],i.startTime=l(1,Date.now()),i.endTime=l(1,Date.now()+864e5*10),m()};return(p,n)=>{const o=ie,r=K,c=re,E=ce,F=W,D=X,R=Y,U=Z,O=J,V=I,G=ee,j=te;return x(),A("div",me,[e(D,{bordered:!1,size:"small"},{default:a(()=>[e(F,{ref:"formRef",model:t(i),"label-placement":"left","show-feedback":!1},{default:a(()=>[e(E,{"y-gap":16,responsive:"screen","item-responsive":""},{default:a(()=>[e(c,{span:"24 s:12 m:12",label:"起止时间",path:"startTime"},{default:a(()=>[e(o,{value:u.value,"onUpdate:value":n[0]||(n[0]=s=>u.value=s),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":P,"default-time":["00:00:00","23:59:59"],shortcuts:B},null,8,["value"]),e(t(f),{type:"primary",ghost:"",onClick:S,class:"ml-20px"},{icon:a(()=>[e(r,{class:H(["text-icon",{"animate-spin":t(k)}])},null,8,["class"])]),default:a(()=>[w(" "+b(t(T)("common.search")),1)]),_:1}),e(t(f),{type:"primary",ghost:"",onClick:$,class:"ml-10px"},{default:a(()=>[w(" 查询超短期 ")]),_:1}),e(t(f),{type:"primary",ghost:"",onClick:q,class:"ml-10px"},{default:a(()=>[w(" 查询短期 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(D,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{default:a(()=>[e(j,{type:"card",animated:"",value:g.value,"onUpdate:value":n[3]||(n[3]=s=>g.value=s),class:"h-100%","pane-wrapper-style":{flex:1}},{suffix:a(()=>[g.value=="0"?(x(),L(G,{key:0,align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[e(t(f),{onClick:z,size:"small",disabled:t(d).length==0},{icon:a(()=>[e(O,{class:"text-icon"})]),default:a(()=>[w(" "+b(t(T)("common.export")),1)]),_:1},8,["disabled"]),e(V,{columns:t(h),"onUpdate:columns":n[2]||(n[2]=s=>C(h)?h.value=s:null)},null,8,["columns"])]),_:1})):Q("",!0)]),default:a(()=>[e(U,{name:"0",tab:"表格",class:"h-100%"},{default:a(()=>[e(R,{"checked-row-keys":t(d),"onUpdate:checkedRowKeys":n[1]||(n[1]=s=>C(d)?d.value=s:null),columns:t(y),data:t(_),size:"small",loading:t(k),remote:"","row-key":s=>s.id,pagination:t(_).length?t(N):void 0,class:"sm:h-full","flex-height":!0,"scroll-x":""},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1})]),_:1},8,["value"])]),_:1})])}}}),Be=ae(de,[["__scopeId","data-v-f676e698"]]);export{Be as default};
