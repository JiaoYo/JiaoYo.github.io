import{_ as P}from"./twotone-add-circle-outline-CPh4lscx.js";import{d as U,n as A,ah as G,U as M,q as L,p as q,j,aV as c,o as $,c as I,w as t,g as e,h as B,t as E,i as n,$ as O,A as J,J as W,K as F,dn as H,B as Q,L as X,a1 as z,v as Y,ae as Z,e as ee,al as R,f as te,aK as ae}from"./index-CqzOHcIS.js";import{_ as ne,f as oe}from"./outline-data-exploration-CJxXubao.js";import{u as se,a as le}from"./table-rbqxuxT2.js";import{e as ie}from"./exportExcel-Bv4G4H50.js";import{_ as re}from"./round-search-BOCawFnh.js";import{_ as ce}from"./DatePicker-O1E_UvUw.js";import{_ as me}from"./FormItemGridItem-BivQWFD-.js";import{_ as de}from"./Grid--OF1Knvj.js";import{_ as pe}from"./DataTable-BdHa8wrw.js";import"./TimePicker-DG80wuP4.js";import"./Forward-DTSMmYEU.js";import"./RadioGroup-DbJqgTyK.js";const ue=U({name:"AlarmSearch",__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:A(["reset","search","exportData"],["update:model"]),setup(D,{emit:y}){G({1:"电场1",2:"电场2",3:"电场3"});const _=y,S=M(),{formRef:f,restoreValidation:v}=L(),a=q(D,"model");a.value.cities=void 0,a.value.time=j([Number(c(5,Date.now()-864e5*6)),Number(c(5,Date.now()+864e5))]),a.value.startTime=c(0,Date.now()-864e5*6),a.value.endTime=c(0,Date.now()+864e5);async function w(i,s){a.value.startTime=i[0],a.value.endTime=i[1]}async function l(){_("search")}const x=()=>{_("exportData")};return(i,s)=>{const N=ce,h=me,r=W,T=F,C=H,m=re,b=Q,V=ne,g=F,k=de,d=X,o=z;return $(),I(o,{bordered:!1,size:"small",class:"card-wrapper"},{default:t(()=>[e(d,{ref_key:"formRef",ref:f,model:a.value,"label-placement":"left","label-width":n(S).locale=="en-US"?120:80,"show-feedback":!1,onKeyup:J(l,["enter"])},{default:t(()=>[e(k,{"y-gap":16,responsive:"screen","item-responsive":""},{default:t(()=>[e(h,{span:"24 s:12 m:6",label:"时间",path:"time",class:"pr-24px"},{default:t(()=>[e(N,{value:a.value.time,"onUpdate:value":s[0]||(s[0]=p=>a.value.time=p),type:"daterange","value-format":"yyyy-MM-dd",style:{width:"100%"},"onUpdate:formattedValue":w},null,8,["value"])]),_:1}),e(h,{span:"24 s:12 m:8",label:"",class:"pr-24px"},{default:t(()=>[e(C,{modelValue:a.value.cities,"onUpdate:modelValue":s[1]||(s[1]=p=>a.value.cities=p)},{default:t(()=>[e(T,{"item-style":"display: flex;"},{default:t(()=>[e(r,{value:"Beijing",label:"通讯事件"}),e(r,{value:"Shanghai",label:"系统配置"}),e(r,{value:"Guangzhou",label:"预测事件"}),e(r,{value:"Shenzen",label:"修改事件"}),e(r,{value:"other",label:"其他事件"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(h,{span:"24 s:12 m:6",class:"pr-24px"},{default:t(()=>[e(g,{class:"w-full"},{default:t(()=>[e(b,{type:"primary",ghost:"",onClick:l},{icon:t(()=>[e(m,{class:"text-icon"})]),default:t(()=>[B(" "+E(n(O)("common.search")),1)]),_:1}),e(b,{onClick:x},{icon:t(()=>[e(V,{class:"text-icon"})]),default:t(()=>[B(" "+E("导出"))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-width"])]),_:1})}}}),_e={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},fe=te("span",null,"事件列表",-1),Ve=U({name:"statisticalanalysis_eventinquiry",__name:"index",setup(D){const y=M(),{columns:_,columnChecks:S,data:f,getData:v,loading:a,mobilePagination:w,searchParams:l,resetSearchParams:x}=se({apiFn:oe,apiParams:{page:1,pageSize:20,limit:20,startTime:c(0,Date.now()-864e5*6)||null,endTime:c(0,Date.now()+864e5)||null,level:null,devtype:null,status:null,_t:new Date().getTime()},immediate:!1,showTotal:!0,columns:()=>[{title:"",key:"index",width:50,align:"center",render:(d,o)=>`${o+1}`},{key:"timeFrame",title:"编号",align:"center",width:100},{key:"describe",title:"用户",align:"center",width:100},{key:"statrttime",title:"产生时间",align:"center",width:240},{key:"devname",title:"电厂名称",align:"center",width:240},{key:"dtype",title:"事件类型",align:"center",width:140},{key:"subdtype",title:"事件等级",align:"center",width:140},{key:"reoetits",title:"事件内容",align:"center",maxWidth:200}]}),i=[{id:"1",timeFrame:"11",describe:"文城",statrttime:"2024-07-12 10:00:19",devname:"光功率预测电站",dtype:"通讯事件",subdtype:"一般",reoetits:"修改通讯配置项",content:"修改通讯配置项"},{id:"2",timeFrame:"12",describe:"文城",statrttime:"2024-07-12 09:17:19",devname:"光功率预测电站",dtype:"系统配置",subdtype:"一般",reoetits:"修改系统配置项",content:"修改通讯配置项"}],s=()=>{ie(i,{timeFrame:"时间范围",describe:"描述",statrttime:"开机容量",devname:"实发功率",dtype:"预测功率",subdtype:"均方根误差",reoetits:"平均绝对误差",content:"相关性系数"},"短期预测日报","sheet1")},{drawerVisible:N,operateType:h,editingData:r,handleAdd:T,handleEdit:C,checkedRowKeys:m,onBatchDeleted:b,onDeleted:V}=le(f,v),g=d=>{d.detail.key};Y(()=>{window.addEventListener("localStorageChanged",g)}),Z(()=>{window.removeEventListener("localStorageChanged",g)});const k=()=>ae(e(P,null,null));return(d,o)=>{const p=pe,K=z;return $(),ee("div",_e,[e(ue,{model:n(l),"onUpdate:model":o[0]||(o[0]=u=>R(l)?l.value=u:null),onReset:n(x),onSearch:n(v),onExportData:s},null,8,["model","onReset","onSearch"]),e(K,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:t(()=>[fe]),default:t(()=>[e(p,{bordered:!1,"render-expand-icon":k,"single-line":!1,"checked-row-keys":n(m),"onUpdate:checkedRowKeys":o[1]||(o[1]=u=>R(m)?m.value=u:null),columns:n(_),data:i,size:"small","flex-height":!n(y).isMobile,"scroll-x":702,loading:n(a),remote:"","row-key":u=>u.id,pagination:n(f).length?n(w):void 0,class:"sm:h-full"},null,8,["checked-row-keys","columns","flex-height","loading","row-key","pagination"])]),_:1})])}}});export{Ve as default};
