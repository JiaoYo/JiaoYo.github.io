import{_ as _e}from"./round-add-Br-lguCK.js";import{aU as H,d as Z,av as X,z as ee,D as re,A as ie,a as ve,at as ne,s as q,au as Y,d6 as ge,c as I,o as b,w as o,f as n,e as d,a3 as ye,b as T,G as F,M as oe,N as ce,h as t,H as B,aF as de,ay as be,d7 as we,t as v,B as D,g as C,aB as he,J as ae,$ as V,a4 as xe,aG as ke,W as ue,X as Ce,aQ as $e,F as Q,bm as De,aK as O,b0 as Se,I as J,L as pe,d8 as ze,ax as Ne,aY as je,bo as Ue,a2 as me,aH as Te,b4 as Le,aC as Ie,aI as Pe,i as Re,aJ as te,cY as Fe,az as Be,aP as We}from"./index-DdfiWQes.js";import{u as Me,a as Ee}from"./table-CXVEJiiW.js";import{_ as Oe,a as qe}from"./text-DkU8klMh.js";import{N as fe}from"./Popconfirm-DY3Dc_PH.js";import{_ as Ge}from"./round-search-Cus0un5g.js";import{u as Ke}from"./usePageData-CaNzzdLX.js";import{_ as Ae}from"./Grid-CPKP2Pfd.js";import{_ as Ve}from"./FormItemGridItem-DIoGuRnG.js";function He(f){return H({url:"/projectWeek/getPage.do",method:"get",params:f})}function Je(f){return H({url:"/projectWeek/insert.do",method:"post",data:f})}function Ye(f){return H({url:"/projectWeek/update.do",method:"put",data:f})}function Qe(f){return H({url:"/projectWeek/delete.do",method:"delete",params:{arrIds:f}})}function Xe(f){return H({url:"/projectWeekComment/getPage.do",method:"get",params:f})}function Ze(f){return H({url:"/projectWeekComment/insert.do",method:"post",data:f})}function et(f){return H({url:"/projectWeekComment/delete.do",method:"delete",params:{arrIds:f}})}const tt={class:"avatar-wrapper"},nt={key:0},ot={class:"mr-10px"},at={key:1,class:"flex items-center w-300px"},lt={key:0},st={style:{display:"flex","justify-content":"space-between"}},rt={class:"mt-10px"},it=Z({name:"OperateDrawer",__name:"operate-drawer",props:X({operateType:{},rowData:{},pid:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:X(["submitted"],["update:visible"]),setup(f,{emit:G}){ee();const l=G,S=f,e=re($());function $(){return{id:"",content1:"",content2:"",content3:"",content4:"",content5:"",content6:"",content7:"",content8:"",charctras:"",file1:"",file2:""}}const W={content1:{required:!0,message:"请输入",trigger:"blur"}};async function z(){Object.assign(e,$()),c.value=[{name:"",url:"",file:void 0},{name:"",url:"",file:void 0}],S.operateType==="edit"&&S.rowData&&Object.assign(e,S.rowData)}const{formRef:x,validate:K,restoreValidation:P}=ie(),k=ve(()=>({add:"新增项目周报",edit:"修改项目周报"})[S.operateType]),w=ne(f,"visible"),L=()=>{w.value=!1},N=q(!1),y=async()=>{var u,s,h,U,r;if(!N.value)try{if(await K(),N.value=!0,e.charctras<30)return(u=window.$message)==null?void 0:u.warning("字数不能少于30字,请继续填写");let p=!0;if(c.value.forEach((_,g)=>{var i,le;const M=`file${g+1}`,A=_.name||"",E=((i=_.url)==null?void 0:i.split("?")[1])||((le=_.file)==null?void 0:le.name);(A&&!E||!A&&E)&&(p=!1),_.status==="done"&&(e[M]=A,e[M]=E)}),!p){(h=(s=window.$message)==null?void 0:s.error)==null||h.call(s,"文件名称和文件地址必须同时存在，不能只填一个");return}a.value=!0;for(let _=0;_<c.value.length;_++){m.value=_;const g=c.value[_];if(g.file){g.indexText=`${_+1}/${c.value.length}`,g.progress=0,g.status="uploading";try{g.url=await ke(g.file.file,g.file.name,"",M=>{g.progress=M}),g.progress=100,g.status="done"}catch{g.status="error"}}}if(c.value.forEach((_,g)=>{_.status==="done"&&(e[`file${g+1}`]=_.url||"")}),a.value=!1,S.operateType==="edit"){const{data:_,error:g}=await Ye([{...e}]);g||((U=window.$message)==null||U.success("修改成功"),l("submitted"),L())}else{const{data:_,error:g}=await Je([{pid:e.pid,content1:e.content1,content2:e.content2,content3:e.content3,content4:e.content4,content5:e.content5,content6:e.content6,content7:e.content7,content8:e.content8,file1:e.file1,file2:e.file2,charctras:e.charctras}]);g||((r=window.$message)==null||r.success("添加成功"),l("submitted"),L())}}catch{}finally{N.value=!1}};Y(w,()=>{w.value&&(z(),setTimeout(()=>{const u=document.querySelector(".n-scrollbar-content");u==null||u.scrollTo(0,0)},300),P())});const a=q(!1),m=q(0),c=q([{name:"",url:"",file:void 0},{name:"",url:"",file:void 0}]);async function R({file:u},s){s=="file1"?(c.value[0].file=u,c.value[0].name=u.name):(c.value[1].file=u,c.value[1].name=u.name)}async function j(u,s){var h,U;return s=="file1"&&!["image/jpeg","image/png","image/jpg","image/x-icon"].includes(u.file.file.type)?((h=window.$message)==null||h.destroyAll(),(U=window.$message)==null||U.error("只能上传 JPG/PNG/JPEG/ICO 格式的图片"),!1):!0}return Y(()=>[e.content1,e.content2,e.content3,e.content4,e.content5,e.content6,e.content7,e.content8],()=>{e.charctras=ge(e.content1+e.content2+e.content3+e.content4+e.content5+e.content6+e.content7+e.content8)},{immediate:!0}),(u,s)=>{const h=ce,U=de,r=be,p=we,_=oe,g=he,M=ye,A=ae,E=xe;return b(),I(E,{show:w.value,"onUpdate:show":s[12]||(s[12]=i=>w.value=i),title:k.value,preset:"card",class:"w-800px","mask-closable":!1,draggable:!0},{footer:o(()=>[n(A,{justify:"end"},{default:o(()=>[n(t(D),{size:"small",class:"mt-16px",onClick:L},{default:o(()=>[C(v(t(V)("common.cancel")),1)]),_:1}),n(t(D),{type:"primary",size:"small",class:"mt-16px",loading:N.value,onClick:y},{default:o(()=>[C(v(t(V)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:o(()=>[n(M,{style:{height:"70vh","padding-right":"10px"}},{default:o(()=>[n(_,{ref_key:"formRef",ref:x,model:e,rules:W},{default:o(()=>[n(h,{label:"本周完成",path:"content1"},{default:o(()=>[n(t(B),{clearable:"",type:"textarea",rows:3,value:e.content1,"onUpdate:value":s[0]||(s[0]=i=>e.content1=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"本周对你帮助最大的人，具体描述一下对你的帮助",path:"content2"},{default:o(()=>[n(t(B),{clearable:"",type:"textarea",rows:2,value:e.content2,"onUpdate:value":s[1]||(s[1]=i=>e.content2=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"未完成项目",path:"content3"},{default:o(()=>[n(t(B),{clearable:"",type:"textarea",rows:2,value:e.content3,"onUpdate:value":s[2]||(s[2]=i=>e.content3=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"下周计划",path:"content4"},{default:o(()=>[n(t(B),{clearable:"",type:"textarea",rows:2,value:e.content4,"onUpdate:value":s[3]||(s[3]=i=>e.content4=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"需协调与帮助",path:"content5"},{default:o(()=>[n(t(B),{clearable:"",type:"textarea",rows:2,value:e.content5,"onUpdate:value":s[4]||(s[4]=i=>e.content5=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"本周做的比较好的",path:"content6"},{default:o(()=>[n(t(B),{clearable:"",type:"textarea",rows:2,value:e.content6,"onUpdate:value":s[5]||(s[5]=i=>e.content6=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"自己哪些需要提升",path:"content7"},{default:o(()=>[n(t(B),{clearable:"",type:"textarea",rows:2,value:e.content7,"onUpdate:value":s[6]||(s[6]=i=>e.content7=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"下个阶段的目标，如果达成目标你想要什么(如:团建、旅游、吃饭等):",path:"content8"},{default:o(()=>[n(t(B),{clearable:"",type:"textarea",rows:2,value:e.content8,"onUpdate:value":s[7]||(s[7]=i=>e.content8=i),placeholder:"请输入内容"},null,8,["value"])]),_:1}),n(h,{label:"图片:",path:"file1"},{default:o(()=>[d("div",tt,[e.file1?(b(),I(U,{key:0,src:e.file1,class:"avatar-img","preview-disabled":""},null,8,["src"])):(b(),I(r,{key:1,ref:"uploadRef",action:"#","list-type":"image-card","default-upload":!0,max:1,"custom-request":i=>R(i,"file1"),onBeforeUpload:s[8]||(s[8]=i=>j(i,"file1"))},null,8,["custom-request"])),e.file1?(b(),T("div",{key:2,class:"avatar-overlay",onClick:s[9]||(s[9]=i=>e.file1="")},[n(p,{class:"icon-close"})])):F("",!0)])]),_:1}),n(h,{label:"附件:",path:"file2"},{default:o(()=>[e.file2||c.value[1].name?(b(),T("div",nt,[d("span",ot,v(e.file2.split("?")[1]||c.value[1].name),1),n(t(D),{text:"",type:"error",onClick:s[10]||(s[10]=i=>{e.file2="",c.value[1].file=void 0})},{default:o(()=>s[13]||(s[13]=[C("删除")])),_:1,__:[13]})])):(b(),T("div",at,[n(r,{ref:"uploadRef",action:"#","show-file-list":!1,"custom-request":i=>R(i,"file2"),onBeforeUpload:s[11]||(s[11]=i=>j(i,"file2"))},{default:o(()=>[n(t(D),null,{default:o(()=>s[14]||(s[14]=[C(v("上传文件"))])),_:1,__:[14]})]),_:1},8,["custom-request"])]))]),_:1})]),_:1},8,["model"]),c.value[m.value]&&a.value?(b(),T("div",lt,[d("div",st,[d("span",null,v(c.value[m.value].filename||c.value[m.value].name),1),d("span",null,v(c.value[m.value].indexText),1)]),n(g,{percentage:c.value[m.value].progress,status:c.value[m.value].status==="error"?"error":"success","show-indicator":""},null,8,["percentage","status"])])):F("",!0)]),_:1}),d("div",rt,"字数："+v(e.charctras),1)]),_:1},8,["show","title"])}}}),ct=ue(it,[["__scopeId","data-v-91cda8c6"]]),dt={key:1,class:"mt-3 mb-3 text-gray-700 preview-text"},ut={key:0,class:"mt-3 mb-3 text-gray-700 preview-text"},pt={class:"font-size-12px c-#a19f9d my-5px"},mt={key:0},ft={class:"mt-4 border-t pt-3"},_t={class:"flex items-start gap-2 mb-3"},vt={class:"ml-2 flex-1"},gt={class:"flex items-center"},yt={class:"font-medium font-size-16px font-bold"},bt={class:"text-gray-600 mt-1"},wt=Z({name:"drawerLog",__name:"drawerLog",props:X({rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(f){const G=ee();Ce();let l=re({id:"",content1:"",content2:"",content3:"",content4:"",content5:"",content6:"",content7:"",content8:"",username:"",contractname:"",num:0});const S=f,e={id:99,name:"张三",avatar:"https://cdn-icons-png.flaticon.com/128/3135/3135715.png"},$=q({});async function W(){z.value=[],Object.assign(l,S.rowData),k()}const z=q([]),x=ne(f,"visible");Y(x,()=>{x.value?W():(z.value=[],l.id=void 0)}),Y(()=>S.rowData,()=>{x.value&&W()});function K(y){y||P()}function P(){x.value=!1}const k=async()=>{const{data:y,error:a}=await Xe({page:1,limit:100,pid:l.id});y&&(z.value=y.list)},w=$e.debounce(async()=>{var c;const y=$.value[l.id];if(!(y!=null&&y.trim()))return(c=window.$message)==null?void 0:c.warning("请输入评论内容");const{data:a,error:m}=await Ze([{pid:l.id,content:y}]);a&&($.value[l.id]="",l.num++,k())},1e3,{leading:!0,trailing:!1}),L=async y=>{const{data:a,error:m}=await et(y.id);a&&(k(),l.num--,console.log("删除成功"))};async function N(y){if(!y)return;const a=y.split("?")[0],m=y.split("?")[1];try{const R=await(await fetch(a,{mode:"cors"})).blob(),j=URL.createObjectURL(R),u=document.createElement("a");u.href=j,u.download=m,u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(j)}catch(c){console.error("下载失败:",c)}}return(y,a)=>{const m=ce,c=de,R=oe,j=Oe,u=qe,s=De,h=Ue,U=Q("no-auth");return b(),I(h,{show:x.value,"onUpdate:show":[a[3]||(a[3]=r=>x.value=r),K],"display-directive":"show",width:600,onMaskClick:P,onEsc:P},{default:o(()=>[n(s,{title:t(l).username+"的项目周报","native-scrollbar":!1,closable:""},{default:o(()=>[n(R,{ref:"formRef",model:t(l),"show-feedback":!1},{default:o(()=>[n(m,{label:"本周完成",path:"content1"},{label:o(()=>a[4]||(a[4]=[d("div",{class:"font-size-16px font-bold"},"本周完成:",-1)])),default:o(()=>[d("span",{class:O(["preview-text",{textstyle:t(l).content1}])},v(t(l).content1),3)]),_:1}),n(m,{label:"本周对你帮助最大的人，具体描述一下对你的帮助",path:"content2"},{label:o(()=>a[5]||(a[5]=[d("div",{class:"font-size-16px font-bold"},"本周对你帮助最大的人，具体描述一下对你的帮助:",-1)])),default:o(()=>[d("span",{class:O(["preview-text",{textstyle:t(l).content2}])},v(t(l).content2),3)]),_:1}),n(m,{label:"未完成项目",path:"content3"},{label:o(()=>a[6]||(a[6]=[d("div",{class:"font-size-16px font-bold"},"未完成项目:",-1)])),default:o(()=>[d("span",{class:O(["preview-text",{textstyle:t(l).content3}])},v(t(l).content3),3)]),_:1}),n(m,{label:"下周计划",path:"content4"},{label:o(()=>a[7]||(a[7]=[d("div",{class:"font-size-16px font-bold"},"下周计划:",-1)])),default:o(()=>[d("span",{class:O(["preview-text",{textstyle:t(l).content4}])},v(t(l).content4),3)]),_:1}),n(m,{label:"需协调与帮助",path:"content5"},{label:o(()=>a[8]||(a[8]=[d("div",{class:"font-size-16px font-bold"},"需协调与帮助:",-1)])),default:o(()=>[d("span",{class:O(["preview-text",{textstyle:t(l).content5}])},v(t(l).content5),3)]),_:1}),n(m,{label:"",path:"content6"},{label:o(()=>a[9]||(a[9]=[d("div",{class:"font-size-16px font-bold"},"本周做的比较好的:",-1)])),default:o(()=>[d("span",{class:O(["preview-text",{textstyle:t(l).content6}])},v(t(l).content6),3)]),_:1}),n(m,{label:"",path:"content7"},{label:o(()=>a[10]||(a[10]=[d("div",{class:"font-size-16px font-bold"},"自己哪些需要提升:",-1)])),default:o(()=>[d("span",{class:O(["preview-text",{textstyle:t(l).content7}])},v(t(l).content7),3)]),_:1}),n(m,{label:"",path:"content8"},{label:o(()=>a[11]||(a[11]=[d("div",{class:"font-size-16px font-bold"},"下个阶段的目标，如果达成目标你想要什么(如:团建、旅游、吃饭等):",-1)])),default:o(()=>[d("span",{class:O(["preview-text",{textstyle:t(l).content8}])},v(t(l).content8),3)]),_:1}),n(m,{label:"图片",path:""},{label:o(()=>a[12]||(a[12]=[d("div",{class:"font-size-16px font-bold"},"图片",-1)])),default:o(()=>{var r;return[t(l).file1?(b(),I(c,{key:0,width:"80",height:"80",src:t(l).file1,class:"rounded-md object-cover"},null,8,["src"])):F("",!0),t(l).file1?(b(),T("div",dt,[C(v((r=t(l).file1)==null?void 0:r.split("?")[1])+" ",1),n(t(D),{text:"",type:"primary",size:"small",onClick:a[0]||(a[0]=p=>N(t(l).file1))},{default:o(()=>a[13]||(a[13]=[C("下载")])),_:1,__:[13]})])):F("",!0)]}),_:1}),n(m,{label:"附件",path:""},{label:o(()=>a[14]||(a[14]=[d("div",{class:"font-size-16px font-bold"},"附件",-1)])),default:o(()=>{var r;return[t(l).file2?(b(),T("div",ut,[C(v((r=t(l).file2)==null?void 0:r.split("?")[1])+" ",1),n(t(D),{text:"",type:"primary",size:"small",onClick:a[1]||(a[1]=p=>N(t(l).file2))},{default:o(()=>a[15]||(a[15]=[C("下载")])),_:1,__:[15]})])):F("",!0)]}),_:1}),d("div",pt,"字符数："+v(t(l).charctras),1)]),_:1},8,["model"]),t(l).num?(b(),T("div",mt,v(t(l).num)+"评论",1)):F("",!0),n(Se,{name:"fade"},{default:o(()=>[d("div",ft,[J((b(),T("div",_t,[d("div",null,[n(j,{size:"small",src:e.avatar},null,8,["src"])]),n(t(B),{type:"textarea",id:`comment-input-${t(l).id}`,value:$.value[t(l).id],"onUpdate:value":a[2]||(a[2]=r=>$.value[t(l).id]=r),placeholder:"善语结善缘，恶语伤人心...",autosize:"",onKeydown:pe(ze(t(w),["exact","prevent"]),["enter"])},null,8,["id","value","onKeydown"]),n(t(D),{type:"primary",ghost:"",onClick:t(w)},{default:o(()=>a[16]||(a[16]=[C("发送")])),_:1,__:[16]},8,["onClick"])])),[[U,"project:Summary:Comment:insert"]]),(b(!0),T(Ne,null,je(z.value,r=>(b(),T("div",{key:r.id,class:"flex mb-3"},[n(j,{size:"small",src:e.avatar},null,8,["src"]),d("div",vt,[d("div",gt,[d("span",yt,v(r.username),1),n(u,{depth:"3",style:{"font-size":"12px","margin-left":"20px"}},{default:o(()=>[C(v(r.dbtime),1)]),_:2},1024),t(G).userInfo.id==r.creater?(b(),I(t(fe),{key:0,onPositiveClick:p=>L(r)},{trigger:o(()=>[J((b(),I(t(D),{quaternary:"",type:"error",size:"small"},{default:o(()=>a[17]||(a[17]=[C(" 删除 ")])),_:1,__:[17]})),[[U,"project:Summary:Comment:delete"]])]),default:o(()=>[a[18]||(a[18]=C(" 确定删除吗？ "))]),_:2,__:[18]},1032,["onPositiveClick"])):F("",!0)]),d("div",bt,v(r.content),1)])]))),128))])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"])}}}),ht=ue(wt,[["__scopeId","data-v-d6d14539"]]),xt=Z({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:X(["reset","search","clear"],["update:model"]),setup(f,{emit:G}){const l=G,{formRef:S}=ie(),e=ne(f,"model");ee();const{pageData:$,getData:W,nextPage:z}=Ke(Le),x=async k=>{const w=k.currentTarget,L=w.scrollTop;w.scrollTop+w.offsetHeight>=w.scrollHeight&&$.data.length<$.total&&(await z(),await Ie(),setTimeout(()=>{w.scrollTop=L}))},K=async k=>{e.value.creater=k,l("search")};W({usertypes:"2,3"});async function P(){l("search")}return(k,w)=>{const L=Te,N=Ve,y=Ge,a=D,m=ae,c=Ae,R=oe,j=me;return b(),I(j,{bordered:!1,size:"small",class:"card-wrapper"},{default:o(()=>[n(R,{ref_key:"formRef",ref:S,model:e.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:pe(P,["enter"])},{default:o(()=>[n(c,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:o(()=>[n(N,{span:"24 s:12 m:6",label:"用户",path:"creater"},{default:o(()=>[n(L,{clearable:"",filterable:"",value:e.value.creater,"onUpdate:value":[w[0]||(w[0]=u=>e.value.creater=u),K],placeholder:"请选择","label-field":"username","value-field":"id",options:t($).data,onScroll:x},null,8,["value","options"])]),_:1}),n(N,{span:"24  s:12 m:6",class:"pr-24px"},{default:o(()=>[n(m,{class:"w-full"},{default:o(()=>[n(a,{type:"primary",ghost:"",onClick:P},{icon:o(()=>[n(y,{class:"text-icon"})]),default:o(()=>[C(" "+v(t(V)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),kt={class:"h-300px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},Ct={key:0};function se(f){return typeof f=="function"||Object.prototype.toString.call(f)==="[object Object]"&&!We(f)}const It=Z({name:"projectmanagement_memberlog",__name:"index",props:{pid:{default:void 0},type:{},prjId:{default:void 0}},emits:["thereIsData"],setup(f,{emit:G}){const l=Pe(),S=ee(),e=f,$=G,{columns:W,data:z,getData:x,loading:K,mobilePagination:P,searchParams:k}=Me({showTotal:!0,immediate:!0,apiFn:He,apiParams:{page:1,pageSize:20,limit:20,_t:new Date().getTime()},columns:()=>[{key:"kk",title:" ",align:"center",width:120,render:r=>n("div",null,[r.username+"的项目周报"])},{key:"charctras",title:"字数",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dbtime",title:"创建时间",align:"center",width:120},{key:"operate",title:V("common.operate"),align:"center",width:140,fixed:"right",render:r=>{let p;return n("div",{class:"flex-center gap-8px"},[n(D,{type:"primary",ghost:!0,size:"small",onClick:()=>h(r)},{default:()=>[C("查看详情")]}),S.userInfo.id==r.creater&&J(n(D,{type:"primary",ghost:!0,size:"small",onClick:()=>j(r.id)},se(p=V("common.edit"))?p:{default:()=>[p]}),[[Q("no-auth"),"project:Summary:update"]]),S.userInfo.id==r.creater&&n(fe,{onPositiveClick:()=>R(r.id)},{default:()=>V("common.confirmDelete"),trigger:()=>{let _;return J(n(D,{type:"error",ghost:!0,size:"small"},se(_=V("common.delete"))?_:{default:()=>[_]}),[[Q("no-auth"),"project:Summary:delete"]])}})])}}]}),{drawerVisible:w,operateType:L,editingData:N,handleAdd:y,handleEdit:a,checkedRowKeys:m,onDeleted:c}=Ee(z,x);async function R(r){const{data:p,error:_}=await Qe(r);_||c()}function j(r){a(r)}const u=q(!1),s=q({}),h=r=>{u.value=!0,s.value=r},U=()=>{x()};return Y(()=>e.pid,async r=>{r&&(k.pid=r,await x())}),Y(()=>z.value,async r=>{r.length>0?$("thereIsData",1):$("thereIsData",0)}),Re(()=>{e.type!="externalLiaison"}),(r,p)=>{const _=ae,g=_e,M=Be,A=me,E=Q("no-auth");return b(),T("div",kt,[e.pid?F("",!0):(b(),I(xt,{key:0,model:t(k),"onUpdate:model":p[0]||(p[0]=i=>te(k)?k.value=i:null),onReset:U,onSearch:t(x),onClear:p[1]||(p[1]=i=>z.value=[])},null,8,["model","onSearch"])),n(A,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},Fe({header:o(()=>[n(_,{align:"center",wrap:"",class:"lt-sm:w-200px"},{default:o(()=>[e.pid?F("",!0):(b(),T("div",Ct,"项目周报"))]),_:1}),e.pid?J((b(),I(t(D),{key:0,onClick:t(y),size:"small",ghost:"",type:"primary"},{icon:o(()=>[n(g,{class:"text-icon"})]),default:o(()=>[p[5]||(p[5]=C(" "+v("新增")))]),_:1,__:[5]},8,["onClick"])),[[E,"project:Summary:insert"]]):F("",!0)]),default:o(()=>[n(M,{"checked-row-keys":t(m),"onUpdate:checkedRowKeys":p[2]||(p[2]=i=>te(m)?m.value=i:null),columns:t(W),data:t(z),size:"small","flex-height":!t(l).isMobile,loading:t(K),remote:"","row-key":i=>i.id,pagination:t(P),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),n(ct,{visible:t(w),"onUpdate:visible":p[3]||(p[3]=i=>te(w)?w.value=i:null),onSubmitted:t(x),"operate-type":t(L),pid:e.pid||t(k).pid,"row-data":t(N)},null,8,["visible","onSubmitted","operate-type","pid","row-data"]),n(ht,{visible:u.value,"onUpdate:visible":p[4]||(p[4]=i=>u.value=i),"row-data":s.value},null,8,["visible","row-data"])]),_:2},[e.pid?void 0:{name:"header-extra",fn:o(()=>[n(_,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:o(()=>[J((b(),I(t(D),{onClick:t(y),size:"small",ghost:"",type:"primary"},{icon:o(()=>[n(g,{class:"text-icon"})]),default:o(()=>[p[6]||(p[6]=C(" "+v("新增")))]),_:1,__:[6]},8,["onClick"])),[[E,"project:Summary:insert"]])]),_:1})]),key:"0"}]),1024)])}}});export{It as default};
