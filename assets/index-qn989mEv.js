import{_ as oe}from"./table-column-setting.vue_vue_type_script_setup_true_lang-B5exJvFm.js";import{_ as ae}from"./round-delete-Qhm9c8vJ.js";import{_ as le}from"./export-DwQa_Uz4.js";import{_ as se}from"./round-add-CSo305d1.js";import{d as A,n as F,ag as K,p as E,r as ie,q as J,s as re,a5 as q,b as ce,o as I,c as W,w as t,g as e,h as y,t as b,i as n,ah as pe,F as H,G as me,ae as de,J as L,B as h,I as P,aj as ue,T as Q,$ as z,A as _e,a0 as X,j as fe,e as ge,ak as U,a9 as R,al as he}from"./index-CI2HX52s.js";import{f as ye}from"./task-DiDSy7An.js";import{u as be,a as xe}from"./table-CL5JRpix.js";import{_ as ve}from"./round-search-DiRf-ajt.js";import{_ as we}from"./FormItemGridItem-H5-g3JS3.js";import{_ as ke}from"./Grid-BjU2Fuoz.js";import{N as Ne}from"./Popconfirm-D1QMSnFH.js";import{_ as Se}from"./DataTable-iODjs3SB.js";import"./RadioGroup-A-fOClpI.js";import"./Forward-CE5gwjyU.js";const De=A({__name:"taskModel",props:F({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:F(["submitted"],["update:visible"]),setup(r,{emit:x}){const v=K({0:"数据生成",1:"文件解析",2:"文件生成",3:"其他"}),c=E(r,"visible"),_=x,p=r,a=ie(s());function s(){return{type:0,name:"",startTime:null,description:"",cron:"",status:0}}function w(){Object.assign(a,s()),p.operateType==="edit"&&p.rowData&&Object.assign(a,p.rowData)}const{formRef:d,validate:k,restoreValidation:f}=J();re(),q(()=>p.rowData,()=>{w()}),q(c,()=>{c.value&&(w(),f())});const u=()=>{c.value=!1},N=async()=>{console.log(a),p.operateType,await k(),u(),_("submitted")},S={type:[{type:"number",required:!0,message:"任务类型不能为空",trigger:["input","blur"]}],name:{type:"number",required:!0,trigger:["input","blur"],message:"请选择执行类"},description:[{required:!0,message:"任务描述不能为空",trigger:["input","blur"]}]},D=ce(()=>({add:"新增初始化任务",edit:"修改初始化任务"})[p.operateType]);return(g,l)=>{const T=H,C=me,B=de,M=L,j=h,O=P,i=ue;return I(),W(i,{show:c.value,"onUpdate:show":l[3]||(l[3]=o=>c.value=o),title:D.value,preset:"card",class:"w-600px"},{footer:t(()=>[e(O,{size:16,justify:"end"},{default:t(()=>[e(j,{onClick:u},{default:t(()=>[y(b(g.$t("common.cancel")),1)]),_:1}),e(j,{type:"primary",onClick:N},{default:t(()=>[y(b(g.$t("common.confirm")),1)]),_:1})]),_:1})]),default:t(()=>[e(M,{ref_key:"formRef",ref:d,model:a,rules:S,"label-placement":"left","label-width":"140px"},{default:t(()=>[e(C,{label:"任务别名",path:"name"},{default:t(()=>[e(T,{value:a.name,"onUpdate:value":l[0]||(l[0]=o=>a.name=o),placeholder:"请输入任务别名",style:{width:"100%"},disabled:p.operateType==="edit"},null,8,["value","disabled"])]),_:1}),e(C,{label:"执行类路径",path:"description"},{default:t(()=>[e(T,{value:a.description,"onUpdate:value":l[1]||(l[1]=o=>a.description=o),placeholder:"请输入执行类路径",style:{width:"100%"}},null,8,["value"])]),_:1}),e(C,{label:"任务类型",path:"type"},{default:t(()=>[e(B,{placeholder:"选择",value:a.type,"onUpdate:value":l[2]||(l[2]=o=>a.type=o),options:n(pe)(n(v))},null,8,["value","options"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),Te=A({name:"AlarmSearch",__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:F(["add","search","exportData"],["update:model"]),setup(r,{emit:x}){K({1:"文件生成",2:"手动更改"});const v=x,c=Q(),{formRef:_,restoreValidation:p}=J(),a=E(r,"model");a.value.name="";async function s(){v("search")}return(w,d)=>{const k=H,f=we,u=ve,N=h,S=P,D=ke,g=L,l=X;return I(),W(l,{bordered:!1,size:"small",class:"card-wrapper"},{default:t(()=>[e(g,{ref_key:"formRef",ref:_,model:a.value,"label-placement":"left","label-width":n(c).locale=="en-US"?120:80,"show-feedback":!1,onKeyup:_e(s,["enter"])},{default:t(()=>[e(D,{"y-gap":16,responsive:"screen","item-responsive":""},{default:t(()=>[e(f,{span:"24 s:12 m:4",label:"任务别名",path:"name",class:"pr-24px"},{default:t(()=>[e(k,{clearable:"",filterable:"",placeholder:"请输入任务别名",value:a.value.name,"onUpdate:value":d[0]||(d[0]=T=>a.value.name=T)},null,8,["value"])]),_:1}),e(f,{span:"24 s:12 m:12",class:"pr-24px"},{default:t(()=>[e(S,{class:"w-full"},{default:t(()=>[e(N,{type:"primary",ghost:"",onClick:s},{icon:t(()=>[e(u,{class:"text-icon"})]),default:t(()=>[y(" "+b(n(z)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-width"])]),_:1})}}}),Ce={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function G(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!he(r)}const Ge=A({name:"manage_initscheduledtasks",__name:"index",setup(r){const x={0:"数据生成",1:"文件解析",2:"文件生成",3:"其他"},v=Q(),{columns:c,columnChecks:_,data:p,getData:a,loading:s,mobilePagination:w,searchParams:d,resetSearchParams:k}=be({apiFn:ye,apiParams:{page:1,pageSize:20,limit:20,type:null,_t:new Date().getTime()},immediate:!1,showTotal:!0,columns:()=>[{type:"selection",align:"center",width:48},{key:"name",title:"任务别名",align:"center",width:160},{key:"description",title:"执行类路径",align:"center",minWidth:180},{key:"type",title:"任务类型",align:"center",width:160,render:i=>e("span",null,[x[i.type]])},{key:"operate",title:z("common.operate"),align:"center",width:200,fixed:"right",render:i=>{let o;return e("div",{class:"flex-center gap-8px"},[e(h,{type:"primary",ghost:!0,size:"small",onClick:()=>O(i.id)},G(o=z("common.edit"))?o:{default:()=>[o]}),e(Ne,{onPositiveClick:()=>j(i.id)},{default:()=>z("common.confirmDelete"),trigger:()=>{let $;return e(h,{type:"error",ghost:!0,size:"small"},G($=z("common.delete"))?$:{default:()=>[$]})}})])}}]}),f=fe([{id:1,name:"短期",description:"xxxxxxxxxxxxxxxxxxx",type:1}]),{drawerVisible:u,operateType:N,editingData:S,handleAdd:D,handleEdit:g,checkedRowKeys:l,onBatchDeleted:T,onDeleted:C}=xe(f,a),B=()=>{},M=()=>{},j=i=>{C()},O=i=>{g(i)};return(i,o)=>{const $=se,Y=le,Z=ae,V=P,ee=oe,te=Se,ne=X;return I(),ge("div",Ce,[e(Te,{model:n(d),"onUpdate:model":o[0]||(o[0]=m=>U(d)?d.value=m:null),onAdd:n(k),onSearch:n(a)},null,8,["model","onAdd","onSearch"]),e(ne,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:t(()=>[e(V,{align:"center",wrap:"",justify:"start",class:"lt-sm:w-200px"},{default:t(()=>[e(n(h),{onClick:n(D),size:"small",ghost:"",type:"primary"},{icon:t(()=>[e($,{class:R(["text-icon",{"animate-spin":n(s)}])},null,8,["class"])]),default:t(()=>[y(" "+b("添加任务"))]),_:1},8,["onClick"]),e(n(h),{onClick:B,size:"small",disabled:n(l).length==0},{icon:t(()=>[e(Y,{class:R(["text-icon",{"animate-spin":n(s)}])},null,8,["class"])]),default:t(()=>[y(" "+b("导出数据"))]),_:1},8,["disabled"]),e(n(h),{onClick:M,size:"small",ghost:"",type:"error",disabled:n(l).length==0},{icon:t(()=>[e(Z,{class:R(["text-icon",{"animate-spin":n(s)}])},null,8,["class"])]),default:t(()=>[y(" "+b("批量删除"))]),_:1},8,["disabled"])]),_:1})]),"header-extra":t(()=>[e(V,{align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:t(()=>[e(ee,{columns:n(_),"onUpdate:columns":o[1]||(o[1]=m=>U(_)?_.value=m:null)},null,8,["columns"])]),_:1})]),default:t(()=>[e(te,{"checked-row-keys":n(l),"onUpdate:checkedRowKeys":o[2]||(o[2]=m=>U(l)?l.value=m:null),columns:n(c),data:f.value,size:"small","flex-height":!n(v).isMobile,"scroll-x":702,loading:n(s),remote:"","row-key":m=>m.id,pagination:n(w),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),e(De,{visible:n(u),"onUpdate:visible":o[3]||(o[3]=m=>U(u)?u.value=m:null),onSubmitted:n(a),"operate-type":n(N),"row-data":n(S)},null,8,["visible","onSubmitted","operate-type","row-data"])]),_:1})])}}});export{Ge as default};
