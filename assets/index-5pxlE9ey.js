import{r as Y,a as k,k as ee,l as oe,d as U,b as N,o as b,m as te,n as E,e as p,p as ne,u as D,q as A,s as M,v as G,i as se,x as ae,c as z,w as u,f as s,y as le,z as T,A as O,h as f,$ as h,C as re,N as V,D as ce,g as R,t as P,B as K,E as q,F as H,G as ie,H as de,I as W,J as pe,K as ue,R as me,L as fe,M as he,O as I,P as ge,Q as _e,T as we,S as ve,U as xe,V as Ce}from"./index-CXGXpIU7.js";function ye(a){const t=Y(0),l=k(()=>Math.ceil(t.value)),v=k(()=>t.value>0),{pause:e,resume:r}=ee(({delta:o})=>{if(t.value<=0){t.value=0,e();return}const C=o/1e3;t.value-=C,t.value<=0&&(t.value=0,e())},{immediate:!1});function c(o=a){t.value=o,r()}function m(){t.value=0,e()}return oe(()=>{e()}),{count:l,isCounting:v,start:c,stop:m}}const ke={src:te,alt:"linkqi",style:{width:"64px",height:"64px"}},be=U({name:"SystemLogo",__name:"system-logo",setup(a){return(t,l)=>(b(),N("img",ke))}}),Se={class:"absolute-lt z-1 size-full overflow-hidden"},Pe={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},$e={height:"1337",width:"1337"},Re={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Ue=["stop-color"],Ne=["stop-color"],ze={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Le={height:"896",width:"967.8852157128662"},Be={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Me=["stop-color"],Ie=["stop-color"],je=U({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(a){const t=a,l=k(()=>E(t.themeColor,200)),v=k(()=>E(t.themeColor,500));return(e,r)=>(b(),N("div",Se,[p("div",Pe,[(b(),N("svg",$e,[p("defs",null,[r[0]||(r[0]=p("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),p("linearGradient",Re,[p("stop",{offset:"0","stop-color":l.value,"stop-opacity":"1"},null,8,Ue),p("stop",{offset:"1","stop-color":v.value,"stop-opacity":"1"},null,8,Ne)])]),r[1]||(r[1]=p("g",{opacity:"1"},[p("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),p("div",ze,[(b(),N("svg",Le,[p("defs",null,[r[2]||(r[2]=p("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),p("linearGradient",Be,[p("stop",{offset:"0","stop-color":v.value,"stop-opacity":"1"},null,8,Me),p("stop",{offset:"1","stop-color":l.value,"stop-opacity":"1"},null,8,Ie)])]),r[3]||(r[3]=p("g",{opacity:"1"},[p("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}});function Ee(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const t=Math.random()*16|0;return(a==="x"?t:t&3|8).toString(16)})}/*! js-cookie v3.0.5 | MIT */function L(a){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var v in l)a[v]=l[v]}return a}var Fe={read:function(a){return a[0]==='"'&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(a){return encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function F(a,t){function l(e,r,c){if(!(typeof document>"u")){c=L({},t,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var m="";for(var o in c)c[o]&&(m+="; "+o,c[o]!==!0&&(m+="="+c[o].split(";")[0]));return document.cookie=e+"="+a.write(r,e)+m}}function v(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var r=document.cookie?document.cookie.split("; "):[],c={},m=0;m<r.length;m++){var o=r[m].split("="),C=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(c[i]=a.read(C,i),e===i)break}catch{}}return e?c[e]:c}}return Object.create({set:l,get:v,remove:function(e,r){l(e,"",L({},r,{expires:-1}))},withAttributes:function(e){return F(this.converter,L({},this.attributes,e))},withConverter:function(e){return F(L({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(a)}})}var Z=F(Fe,{path:"/"});const j=(a,t,l)=>{Z.set(a,t)},B=a=>Z.get(a),De={class:"w-full flex-y-center gap-16px"},Ae=["src"],Ge={class:"flex-y-center justify-between"},Te=U({name:"PwdLogin",__name:"pwd-login",setup(a){const t=ne();D();const{formRef:l,validate:v}=A(),e=M({username:"",password:"",captcha:"",captchaSrc:"",captchaUuid:"",checked:!0}),r=M({captchaEnable:null}),c=k(()=>{const{defaultRequiredRule:w,formRules:n,patternRules:_}=G();return{username:n.username,password:{...w,..._.password},captcha:w}});async function m(){const{data:w,error:n}=await ie();n||(r.captchaEnable=w,r.captchaEnable===1&&o())}async function o(){e.captchaUuid=Ee(),e.captchaSrc=de+"/captcha?uuid="+e.captchaUuid}async function C(){await v(),e.checked?i(e.username,e.password,e.checked):d(),await t.login(W(e.username),W(e.password),e.captchaUuid,e.captcha)||(e.captcha="",e.captchaSrc="",r.captchaEnable===0&&o())}function i(w,n,_){j("project_storage_user",w),j("project_storage_pwd",n),j("project_storage_check",String(_))}function g(){e.username=B("project_storage_user")||"",e.password=B("project_storage_pwd")||"",e.checked=B("project_storage_check")?B("project_storage_check")=="true":!1}function d(){i("","",!1)}return se(()=>{g(),m()}),(w,n)=>{const _=O,x=T,S=ce,y=K,J=V,Q=H,X=ae("no-special");return b(),z(Q,{ref_key:"formRef",ref:l,model:e,rules:c.value,size:"large","show-label":!1,onKeyup:q(C,["enter"])},{default:u(()=>[s(x,{path:"userName"},{default:u(()=>[s(_,{value:e.username,"onUpdate:value":n[0]||(n[0]=$=>e.username=$),placeholder:f(h)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),s(x,null,{default:u(()=>[s(_,{value:e.password,"onUpdate:value":n[1]||(n[1]=$=>e.password=$),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),r.captchaEnable===1?(b(),z(x,{key:0,path:"captcha"},{default:u(()=>[p("div",De,[re(s(_,{value:e.captcha,"onUpdate:value":n[2]||(n[2]=$=>e.captcha=$),placeholder:"请输入验证码"},null,8,["value"]),[[X]]),p("img",{src:e.captchaSrc,alt:"验证码",style:{width:"160px",height:"40px"},onClick:o},null,8,Ae)])]),_:1})):le("",!0),s(J,{vertical:"",size:24},{default:u(()=>[p("div",Ge,[s(S,{checked:e.checked,"onUpdate:checked":n[3]||(n[3]=$=>e.checked=$)},{default:u(()=>[R(P(f(h)("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["checked"])]),s(y,{type:"primary",size:"large",round:"",block:"",loading:f(t).loginLoading,onClick:C},{default:u(()=>[R(P(f(h)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}});function Oe(){const{loading:a,startLoading:t,endLoading:l}=pe(),{count:v,start:e,stop:r,isCounting:c}=ye(60),m=k(()=>{let i=h("page.login.codeLogin.getCode");const g=h("page.login.codeLogin.reGetCode",{time:v.value});return a.value&&(i=""),c.value&&(i=g),i});function o(i){var g,d,w,n,_,x;return i.trim()===""?((g=window.$message)==null||g.destroyAll(),(w=(d=window.$message)==null?void 0:d.error)==null||w.call(d,h("form.mobile.required")),!1):me.test(i)?!0:((n=window.$message)==null||n.destroyAll(),(x=(_=window.$message)==null?void 0:_.error)==null||x.call(_,h("form.mobile.invalid")),!1)}async function C(i,g){!o(i)||a.value||(t(),await new Promise(w=>{ue(i,g).then(n=>{var _,x,S;console.log("response",n),n.error||(setTimeout(w,500),(_=window.$message)==null||_.destroyAll(),(S=(x=window.$message)==null?void 0:x.success)==null||S.call(x,h("page.login.codeLogin.sendCodeSuccess")),e(),l())}).catch(n=>{var _,x,S;return console.log("error",n),(_=window.$message)==null||_.destroyAll(),(S=(x=window.$message)==null?void 0:x.error)==null||S.call(x,h("page.login.codeLogin.sendCodeFailed")),!1})}))}return{label:m,start:e,stop:r,isCounting:c,loading:a,getCaptcha:C}}const Ve={class:"w-full flex-y-center gap-16px"},Ke=U({name:"Register",__name:"register",setup(a){const{toggleLoginModule:t}=D(),{formRef:l,validate:v}=A(),{label:e,isCounting:r,loading:c,getCaptcha:m}=Oe(),o=M({phone:"",code:"",password:"",confirmPassword:""}),C=k(()=>{const{formRules:g,createConfirmPwdRule:d}=G();return{phone:g.phone,code:g.code,password:g.pwd,confirmPassword:d(o.password)}});async function i(){var g;await v(),(g=window.$message)==null||g.success(h("page.login.common.validateSuccess"))}return(g,d)=>{const w=O,n=T,_=K,x=V,S=H;return b(),z(S,{ref_key:"formRef",ref:l,model:o,rules:C.value,size:"large","show-label":!1,onKeyup:q(i,["enter"])},{default:u(()=>[s(n,{path:"phone"},{default:u(()=>[s(w,{clearable:"",maxlength:"11",value:o.phone,"onUpdate:value":d[0]||(d[0]=y=>o.phone=y),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),s(n,{path:"code"},{default:u(()=>[p("div",Ve,[s(w,{value:o.code,"onUpdate:value":d[1]||(d[1]=y=>o.code=y),placeholder:f(h)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),s(_,{size:"large",disabled:f(r),loading:f(c),onClick:d[2]||(d[2]=y=>f(m)(o.phone,0))},{default:u(()=>[R(P(f(e)),1)]),_:1},8,["disabled","loading"])])]),_:1}),s(n,{path:"password"},{default:u(()=>[s(w,{value:o.password,"onUpdate:value":d[3]||(d[3]=y=>o.password=y),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),s(n,{path:"confirmPassword"},{default:u(()=>[s(w,{value:o.confirmPassword,"onUpdate:value":d[4]||(d[4]=y=>o.confirmPassword=y),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),s(x,{vertical:"",size:18,class:"w-full"},{default:u(()=>[s(_,{type:"primary",size:"large",round:"",block:"",onClick:i},{default:u(()=>[R(P(f(h)("common.confirm")),1)]),_:1}),s(_,{size:"large",round:"",block:"",onClick:d[5]||(d[5]=y=>f(t)("pwd-login"))},{default:u(()=>[R(P(f(h)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),qe=U({name:"ResetPwd",__name:"reset-pwd",setup(a){const{toggleLoginModule:t}=D(),{formRef:l,validate:v}=A(),e=M({phone:"",code:"",password:"",confirmPassword:""}),r=k(()=>{const{formRules:m,createConfirmPwdRule:o}=G();return{phone:m.phone,password:m.pwd,confirmPassword:o(e.password)}});async function c(){var m;await v(),(m=window.$message)==null||m.success(h("page.login.common.validateSuccess"))}return(m,o)=>{const C=O,i=T,g=K,d=V,w=H;return b(),z(w,{ref_key:"formRef",ref:l,model:e,rules:r.value,size:"large","show-label":!1,onKeyup:q(c,["enter"])},{default:u(()=>[s(i,{path:"phone"},{default:u(()=>[s(C,{clearable:"",maxlength:"11",value:e.phone,"onUpdate:value":o[0]||(o[0]=n=>e.phone=n),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),s(i,{path:"code"},{default:u(()=>[s(C,{value:e.code,"onUpdate:value":o[1]||(o[1]=n=>e.code=n),placeholder:f(h)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),s(i,{path:"password"},{default:u(()=>[s(C,{value:e.password,"onUpdate:value":o[2]||(o[2]=n=>e.password=n),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),s(i,{path:"confirmPassword"},{default:u(()=>[s(C,{value:e.confirmPassword,"onUpdate:value":o[3]||(o[3]=n=>e.confirmPassword=n),type:"password","show-password-on":"click",placeholder:f(h)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),s(d,{vertical:"",size:18,class:"w-full"},{default:u(()=>[s(g,{type:"primary",size:"large",round:"",block:"",onClick:c},{default:u(()=>[R(P(f(h)("common.confirm")),1)]),_:1}),s(g,{size:"large",round:"",block:"",onClick:o[4]||(o[4]=n=>f(t)("pwd-login"))},{default:u(()=>[R(P(f(h)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),He={class:"w-400px lt-sm:w-300px"},We={class:"flex-y-center justify-between"},Ze={class:"text-28px text-primary font-500 lt-sm:text-22px"},Je={class:"i-flex-col"},Qe={class:"pt-24px"},Xe={class:"pt-24px"},eo=U({name:"login",__name:"index",props:{module:{}},setup(a){const t=a;fe();const l=he(),v={"pwd-login":{label:I["pwd-login"],component:Te},register:{label:I.register,component:Ke},"reset-pwd":{label:I["reset-pwd"],component:qe}},e=k(()=>v[t.module||"pwd-login"]),r=k(()=>l.darkMode?E(l.themeColor,600):l.themeColor),c=k(()=>{const m="#ffffff",o=l.darkMode?.5:.2;return ge(m,l.themeColor,o)});return(m,o)=>{const C=je,i=be,g=_e,d=xe;return b(),N("div",{class:"relative size-full flex-center overflow-hidden",style:Ce({backgroundColor:c.value})},[s(C,{"theme-color":r.value},null,8,["theme-color"]),s(d,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:u(()=>[p("div",He,[p("header",We,[s(i,{class:"text-64px text-primary lt-sm:text-48px"}),p("h3",Ze,P(f(h)("system.title")),1),p("div",Je,[s(g,{"theme-schema":f(l).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:f(l).toggleThemeScheme},null,8,["theme-schema","onSwitch"])])]),p("main",Qe,[p("div",Xe,[s(we,{name:f(l).page.animateMode,mode:"out-in",appear:""},{default:u(()=>[(b(),z(ve(e.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{eo as default};
