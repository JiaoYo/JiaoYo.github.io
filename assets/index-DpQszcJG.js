import{r as q,a as S,k as ee,l as oe,d as P,b as z,o as b,m as te,n as E,e as l,p as ne,u as D,q as A,s as M,v as Z,i as se,x as ae,c as U,w as m,f as n,y as le,z as G,A as V,h as x,$ as y,C as re,N as O,D as ce,g as R,t as N,B,E as H,F as K,G as ie,H as de,I as W,J as pe,K as ue,R as me,L as fe,M as _e,O as ge,P as he,Q as ve,S as we,T,U as xe,V as ye,W as Ce,X as ke,Y as be,Z as Se,a0 as $e,a1 as Re}from"./index-TrXGIlo8.js";function Ne(s){const t=q(0),r=S(()=>Math.ceil(t.value)),p=S(()=>t.value>0),{pause:e,resume:a}=ee(({delta:o})=>{if(t.value<=0){t.value=0,e();return}const g=o/1e3;t.value-=g,t.value<=0&&(t.value=0,e())},{immediate:!1});function c(o=s){t.value=o,a()}function v(){t.value=0,e()}return oe(()=>{e()}),{count:r,isCounting:p,start:c,stop:v}}const ze={src:te,alt:"linkqi",style:{width:"64px",height:"64px"}},Pe=P({name:"SystemLogo",__name:"system-logo",setup(s){return(t,r)=>(b(),z("img",ze))}}),Ue={class:"absolute-lt z-1 size-full overflow-hidden"},Le={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},Ie={height:"1337",width:"1337"},Me={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Be=["stop-color"],Te=["stop-color"],je={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},qe={height:"896",width:"967.8852157128662"},Ee={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Fe=["stop-color"],De=["stop-color"],Ae=P({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(s){const t=s,r=S(()=>E(t.themeColor,200)),p=S(()=>E(t.themeColor,500));return(e,a)=>(b(),z("div",Ue,[l("div",Le,[(b(),z("svg",Ie,[l("defs",null,[a[0]||(a[0]=l("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),l("linearGradient",Me,[l("stop",{offset:"0","stop-color":r.value,"stop-opacity":"1"},null,8,Be),l("stop",{offset:"1","stop-color":p.value,"stop-opacity":"1"},null,8,Te)])]),a[1]||(a[1]=l("g",{opacity:"1"},[l("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),l("div",je,[(b(),z("svg",qe,[l("defs",null,[a[2]||(a[2]=l("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),l("linearGradient",Ee,[l("stop",{offset:"0","stop-color":p.value,"stop-opacity":"1"},null,8,Fe),l("stop",{offset:"1","stop-color":r.value,"stop-opacity":"1"},null,8,De)])]),a[3]||(a[3]=l("g",{opacity:"1"},[l("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}});function Ge(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const t=Math.random()*16|0;return(s==="x"?t:t&3|8).toString(16)})}/*! js-cookie v3.0.5 | MIT */function L(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var p in r)s[p]=r[p]}return s}var Ve={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function F(s,t){function r(e,a,c){if(!(typeof document>"u")){c=L({},t,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var v="";for(var o in c)c[o]&&(v+="; "+o,c[o]!==!0&&(v+="="+c[o].split(";")[0]));return document.cookie=e+"="+s.write(a,e)+v}}function p(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var a=document.cookie?document.cookie.split("; "):[],c={},v=0;v<a.length;v++){var o=a[v].split("="),g=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(c[i]=s.read(g,i),e===i)break}catch{}}return e?c[e]:c}}return Object.create({set:r,get:p,remove:function(e,a){r(e,"",L({},a,{expires:-1}))},withAttributes:function(e){return F(this.converter,L({},this.attributes,e))},withConverter:function(e){return F(L({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(s)}})}var J=F(Ve,{path:"/"});const j=(s,t,r)=>{J.set(s,t)},I=s=>J.get(s),Oe={class:"w-full flex-y-center gap-16px"},He=["src"],Ke={class:"flex-y-center justify-between"},We=P({name:"PwdLogin",__name:"pwd-login",setup(s){const t=ne();D();const{formRef:r,validate:p}=A(),e=M({username:"",password:"",captcha:"",captchaSrc:"",captchaUuid:"",checked:!0}),a=M({captchaEnable:null}),c=S(()=>{const{defaultRequiredRule:h,formRules:d,patternRules:_}=Z();return{username:d.username,password:{...h,..._.password},captcha:h}});async function v(){const{data:h,error:d}=await ie();d||(a.captchaEnable=h,a.captchaEnable===1&&o())}async function o(){e.captchaUuid=Ge(),e.captchaSrc=de+"/captcha?uuid="+e.captchaUuid}async function g(){await p(),e.checked?i(e.username,e.password,e.checked):u(),await t.login(W(e.username),W(e.password),e.captchaUuid,e.captcha)||(e.captcha="",e.captchaSrc="",a.captchaEnable===1&&o())}function i(h,d,_){j("project_storage_user",h),j("project_storage_pwd",d),j("project_storage_check",String(_))}function f(){e.username=I("project_storage_user")||"",e.password=I("project_storage_pwd")||"",e.checked=I("project_storage_check")?I("project_storage_check")=="true":!1}function u(){i("","",!1)}return se(()=>{f(),v()}),(h,d)=>{const _=V,w=G,k=ce,C=B,Q=O,X=K,Y=ae("no-special");return b(),U(X,{ref_key:"formRef",ref:r,model:e,rules:c.value,size:"large","show-label":!1,onKeyup:H(g,["enter"])},{default:m(()=>[n(w,{path:"userName"},{default:m(()=>[n(_,{value:e.username,"onUpdate:value":d[0]||(d[0]=$=>e.username=$),placeholder:x(y)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),n(w,null,{default:m(()=>[n(_,{value:e.password,"onUpdate:value":d[1]||(d[1]=$=>e.password=$),type:"password","show-password-on":"click",placeholder:x(y)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),a.captchaEnable===1?(b(),U(w,{key:0,path:"captcha"},{default:m(()=>[l("div",Oe,[re(n(_,{value:e.captcha,"onUpdate:value":d[2]||(d[2]=$=>e.captcha=$),placeholder:"请输入验证码"},null,8,["value"]),[[Y]]),l("img",{src:e.captchaSrc,alt:"验证码",style:{width:"160px",height:"40px"},onClick:o},null,8,He)])]),_:1})):le("",!0),n(Q,{vertical:"",size:24},{default:m(()=>[l("div",Ke,[n(k,{checked:e.checked,"onUpdate:checked":d[3]||(d[3]=$=>e.checked=$)},{default:m(()=>[R(N(x(y)("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["checked"])]),n(C,{type:"primary",size:"large",round:"",block:"",loading:x(t).loginLoading,onClick:g},{default:m(()=>[R(N(x(y)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}});function Ze(){const{loading:s,startLoading:t,endLoading:r}=pe(),{count:p,start:e,stop:a,isCounting:c}=Ne(60),v=S(()=>{let i=y("page.login.codeLogin.getCode");const f=y("page.login.codeLogin.reGetCode",{time:p.value});return s.value&&(i=""),c.value&&(i=f),i});function o(i){var f,u,h,d,_,w;return i.trim()===""?((f=window.$message)==null||f.destroyAll(),(h=(u=window.$message)==null?void 0:u.error)==null||h.call(u,y("form.mobile.required")),!1):me.test(i)?!0:((d=window.$message)==null||d.destroyAll(),(w=(_=window.$message)==null?void 0:_.error)==null||w.call(_,y("form.mobile.invalid")),!1)}async function g(i,f){!o(i)||s.value||(t(),await new Promise(h=>{ue(i,f).then(d=>{var _,w,k;console.log("response",d),d.error||(setTimeout(h,500),(_=window.$message)==null||_.destroyAll(),(k=(w=window.$message)==null?void 0:w.success)==null||k.call(w,y("page.login.codeLogin.sendCodeSuccess")),e(),r())}).catch(d=>{var _,w,k;return console.log("error",d),(_=window.$message)==null||_.destroyAll(),(k=(w=window.$message)==null?void 0:w.error)==null||k.call(w,y("page.login.codeLogin.sendCodeFailed")),!1})}))}return{label:v,start:e,stop:a,isCounting:c,loading:s,getCaptcha:g}}const Je={class:"w-full flex-y-center gap-16px"},Qe=P({name:"Register",__name:"register",setup(s){const{toggleLoginModule:t}=D(),{formRef:r,validate:p}=A(),{label:e,isCounting:a,loading:c,getCaptcha:v}=Ze(),o=M({phone:"",code:"",password:"",confirmPassword:""}),g=S(()=>{const{formRules:f,createConfirmPwdRule:u}=Z();return{phone:f.phone,code:f.code,password:f.pwd,confirmPassword:u(o.password)}});async function i(){var f;await p(),(f=window.$message)==null||f.success(y("page.login.common.validateSuccess"))}return(f,u)=>{const h=V,d=G,_=B,w=O,k=K;return b(),U(k,{ref_key:"formRef",ref:r,model:o,rules:g.value,size:"large","show-label":!1,onKeyup:H(i,["enter"])},{default:m(()=>[n(d,{path:"phone"},{default:m(()=>[n(h,{clearable:"",maxlength:"11",value:o.phone,"onUpdate:value":u[0]||(u[0]=C=>o.phone=C),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),n(d,{path:"code"},{default:m(()=>[l("div",Je,[n(h,{value:o.code,"onUpdate:value":u[1]||(u[1]=C=>o.code=C),placeholder:x(y)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),n(_,{size:"large",disabled:x(a),loading:x(c),onClick:u[2]||(u[2]=C=>x(v)(o.phone,0))},{default:m(()=>[R(N(x(e)),1)]),_:1},8,["disabled","loading"])])]),_:1}),n(d,{path:"password"},{default:m(()=>[n(h,{value:o.password,"onUpdate:value":u[3]||(u[3]=C=>o.password=C),type:"password","show-password-on":"click",placeholder:x(y)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),n(d,{path:"confirmPassword"},{default:m(()=>[n(h,{value:o.confirmPassword,"onUpdate:value":u[4]||(u[4]=C=>o.confirmPassword=C),type:"password","show-password-on":"click",placeholder:x(y)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),n(w,{vertical:"",size:18,class:"w-full"},{default:m(()=>[n(_,{type:"primary",size:"large",round:"",block:"",onClick:i},{default:m(()=>[R(N(x(y)("common.confirm")),1)]),_:1}),n(_,{size:"large",round:"",block:"",onClick:u[5]||(u[5]=C=>x(t)("pwd-login"))},{default:m(()=>[R(N(x(y)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Xe={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function Ye(s,t){return b(),z("svg",Xe,t[0]||(t[0]=[l("path",{fill:"currentColor",d:"M10.5 20h3q.2 0 .35-.15t.15-.35t-.15-.35t-.35-.15h-3q-.2 0-.35.15t-.15.35t.15.35t.35.15M7 23q-.825 0-1.412-.587T5 21V3q0-.825.588-1.412T7 1h10q.825 0 1.413.588T19 3v18q0 .825-.587 1.413T17 23zm0-5v3h10v-3zm0-2h10V6H7zM7 4h10V3H7zm0 14v3zM7 4V3z"},null,-1)]))}const eo=fe({name:"material-symbols-phone-android-outline-rounded",render:Ye}),oo={class:"flex"},to={class:"flex w-70px items-center"},no=P({name:"ResetPwd",__name:"reset-pwd",setup(s){D();const{formRef:t,validate:r}=A(),p=M({phone:"",code:""}),e=q({phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:["blur","change"]}],code:[{required:!1,message:"请输入验证码",trigger:"blur"}]}),a=q(0),c=async()=>{var i;await r(),e.value.code=[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}];const{data:o,error:g}=await ge(p.phone);if(o){(i=window.$message)==null||i.success(`验证码已发送到${p.phone}，请注意查收`),a.value=60;const f=setInterval(()=>{a.value-=1,a.value<=0&&clearInterval(f)},1e3)}};async function v(){var i;await r();const{data:o,error:g}=await he({phone:p.phone,code:p.code});o&&(console.log(o),(i=window.$message)==null||i.success(y("page.login.common.validateSuccess")))}return(o,g)=>{const i=eo,f=V,u=G,h=B,d=_e,_=B,w=O,k=K;return b(),U(k,{ref_key:"formRef",ref:t,model:p,rules:e.value,size:"large","show-label":!1,onKeyup:H(v,["enter"])},{default:m(()=>[n(u,{path:"phone","feedback-style":{marginLeft:"70px"}},{default:m(()=>[l("div",oo,[l("div",to,[n(i,{class:"font-size-20px mr-8px"}),g[2]||(g[2]=l("span",null,"+86",-1))])]),n(f,{clearable:"",maxlength:"11",class:"flex-1 w-100%",value:p.phone,"onUpdate:value":g[0]||(g[0]=C=>p.phone=C),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),n(u,{path:"code"},{default:m(()=>[n(d,null,{default:m(()=>[n(f,{value:p.code,"onUpdate:value":g[1]||(g[1]=C=>p.code=C),placeholder:x(y)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),n(h,{type:"primary",ghost:"",onClick:c},{default:m(()=>[R(N(a.value>0?`${a.value}秒后可再次获取`:"获取验证码"),1)]),_:1})]),_:1})]),_:1}),n(w,{vertical:"",size:18,class:"w-full"},{default:m(()=>[n(_,{type:"primary",size:"large",round:"",block:"",onClick:v},{default:m(()=>g[3]||(g[3]=[R("登录 ")])),_:1,__:[3]})]),_:1})]),_:1},8,["model","rules"])}}}),so={class:"w-400px lt-sm:w-300px"},ao={class:"flex-y-center justify-between"},lo={class:"text-28px text-primary font-500 lt-sm:text-22px"},ro={class:"i-flex-col"},co={class:"pt-24px"},io={class:"pt-24px"},po={class:"login-footer"},uo=P({name:"login",__name:"index",props:{module:{}},setup(s){const t=s;ve();const r=we(),p={"pwd-login":{label:T["pwd-login"],component:We},register:{label:T.register,component:Qe},"reset-pwd":{label:T["reset-pwd"],component:no}},e=S(()=>p[t.module||"pwd-login"]),a=S(()=>r.darkMode?E(r.themeColor,600):r.themeColor),c=S(()=>{const v="#ffffff",o=r.darkMode?.5:.2;return xe(v,r.themeColor,o)});return(v,o)=>{const g=Ae,i=Pe,f=ye,u=be,h=Se;return b(),z("div",{class:"relative size-full flex-center overflow-hidden",style:$e({backgroundColor:c.value})},[n(g,{"theme-color":a.value},null,8,["theme-color"]),n(u,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:m(()=>[l("div",so,[l("header",ao,[n(i,{class:"text-64px text-primary lt-sm:text-48px"}),l("h3",lo,N(x(y)("system.title")),1),l("div",ro,[n(f,{"theme-schema":x(r).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:x(r).toggleThemeScheme},null,8,["theme-schema","onSwitch"])])]),l("main",co,[l("div",io,[n(Ce,{name:x(r).page.animateMode,mode:"out-in",appear:""},{default:m(()=>[(b(),U(ke(e.value.component)))]),_:1},8,["name"])])])])]),_:1}),l("div",po,[o[0]||(o[0]=l("a",{href:"http://www.linkqi.cn/",target:"_blank",rel:"noopener noreferrer"},"杭州领祺科技有限公司",-1)),n(h,{vertical:""}),o[1]||(o[1]=l("a",{href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank",rel:"noopener noreferrer"},"浙ICP备19034246号-2",-1))])],4)}}}),fo=Re(uo,[["__scopeId","data-v-9ce35fa4"]]);export{fo as default};
