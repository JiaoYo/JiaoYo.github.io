import{o as p,e as D,f as c,d as M,q as R,r as E,v as K,y as z,c as h,w as n,g as l,h as s,i as y,t as F,C as V,z as B,aV as _,bV as G,bW as L,I as P,B as Q,aj as W,an as A,K as J,L as X,ag as Y,M as Z,N as ee,O as I,j as te,bT as le,bU as ne,a1 as ae}from"./index-Pu-ecW3m.js";import{f as se,a as oe}from"./basic_config-BGGXK-Ta.js";import{_ as ie}from"./TimePicker-DdM3oWJk.js";const de={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},ue=c("path",{fill:"currentColor",d:"M12 22q-3.475-.875-5.738-3.988T4 11.1V5l8-3l8 3v6.1q0 3.8-2.262 6.913T12 22m0-2.1q2.6-.825 4.3-3.3t1.7-5.5V6.375l-6-2.25l-6 2.25V11.1q0 3.025 1.7 5.5t4.3 3.3m0-2.9q.425 0 .738-.312t.312-.738t-.312-.737T12 14.9t-.737.313t-.313.737t.313.738T12 17m.025-3.1q.3 0 .538-.225t.237-.525q.025-.175.075-.337t.15-.313q.175-.25.388-.45t.412-.4q.425-.425.738-.95t.312-1.15q0-1.125-.862-1.838T12 7q-.8 0-1.475.375T9.45 8.425q-.15.275-.037.55t.412.4q.275.125.55-.012T10.85 9q.225-.275.513-.412T12 8.45q.55 0 .963.325t.412.825q0 .425-.262.788t-.588.662q-.275.275-.55.538t-.475.587q-.125.2-.175.45t-.05.5q0 .325.212.55t.538.225"},null,-1),re=[ue];function me(f,b){return p(),D("svg",de,[...re])}const $={name:"material-symbols-shield-question-outline-rounded",render:me},x=f=>(Z("data-v-6ff3f411"),f=f(),ee(),f),ce={class:"flex justify-center"},pe=x(()=>c("span",{class:"font-bold"},"提示：",-1)),fe={style:{"text-decoration":"underline"}},ve=x(()=>c("span",{class:"font-bold"},"提示：",-1)),_e=x(()=>c("span",{style:{"text-decoration":"underline"}},"被锁定的账号会在设定的时间周期后自动解锁",-1)),be=x(()=>c("span",{class:"font-bold"},"提示：",-1)),ke=x(()=>c("span",{style:{"text-decoration":"underline"}},"建议根据电站所在位置的日出日落时间设置统计周期，以确保数据准确性。",-1)),he=M({name:"basicConfig",__name:"basicConfig",setup(f){const{formRef:b,validate:q,restoreValidation:g}=R(),e=E(w());function w(){return{enablelock:1,locktime:5,lockcount:3,unlockeanble:1,unlocktime:5,aceffective:1,pwdexpire:1,expiretime:1,cputhreshold:80,memthreshold:80,passrate:20,captcha:1,tokentime:30,whiteenable:1,statistics:1,sstarttime:void 0,sendtime:void 0,hisintervel:1}}const d={type:"number",required:!0,message:"不能为空",trigger:["blur","change"]},C={locktime:d,lockcount:d,unlocktime:d,expiretime:d,cputhreshold:d,memthreshold:d,tokentime:d,sstarttime:d,sendtime:d,passrate:d,hisintervel:d},U=async()=>{const{data:v,error:t}=await se();t||(Object.assign(e,v),e.locktime=v.locktime/60,e.unlocktime=v.unlocktime/60,e.sstarttime=_(5,_(0,new Date)+" "+e.sstarttime),e.sendtime=_(5,_(0,new Date)+" "+e.sendtime))};K(()=>{U()});const N=async()=>{var o;const v=_(7,e.sstarttime),t=_(7,e.sendtime),k=e.locktime*60,u=e.unlocktime*60;await q();const{error:i}=await oe({...e,sstarttime:v,sendtime:t,locktime:k,unlocktime:u});i||(o=window.$message)==null||o.success("设置成功")};return(v,t)=>{const k=G,u=L,i=P,o=Q,r=W,m=A,T=ie,j=J,H=X,O=Y,S=z("no-auth");return p(),h(O,{style:{"max-height":"calc(100vh - 245px)"}},{default:n(()=>[c("div",ce,[l(H,{ref_key:"formRef",ref:b,"label-width":200,"label-placement":"left",model:e,rules:C},{default:n(()=>[l(i,{label:"是否开启账号锁定",path:"enablelock"},{label:n(()=>[s(" 是否开启账号锁定 "),l(k,{trigger:"hover",placement:"top","content-style":"padding: 5px;"},{trigger:n(()=>[l(y($),{class:"text-xl cursor-pointer c-#7a7b78"})]),default:n(()=>[pe,c("span",fe,"当锁定监听周期设置为 "+F(e.locktime)+" 小时，系统会从首次登录失败开始计时。如果在此期间内，错误登录次数达到设定的锁定次数，账号将被锁定。",1)]),_:1})]),default:n(()=>[l(u,{value:e.enablelock,"onUpdate:value":t[0]||(t[0]=a=>e.enablelock=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),l(i,{label:"锁定监听周期",path:"locktime"},{default:n(()=>[l(m,{class:"flex items-center"},{default:n(()=>[l(o,{onClick:t[1]||(t[1]=a=>e.locktime--),disabled:e.locktime==1||e.enablelock==0},{default:n(()=>[s(" − ")]),_:1},8,["disabled"]),l(r,{"show-button":!1,value:e.locktime,"onUpdate:value":t[2]||(t[2]=a=>e.locktime=a),placeholder:"",disabled:e.enablelock==0,min:1,max:24},null,8,["value","disabled"]),l(o,{onClick:t[3]||(t[3]=a=>e.locktime++),disabled:e.locktime==24||e.enablelock==0,class:"mr-5px"},{default:n(()=>[s(" + ")]),_:1},8,["disabled"]),s(" 小时 ")]),_:1})]),_:1}),l(i,{label:"锁定监听次数",path:"lockcount"},{default:n(()=>[l(m,{class:"flex items-center"},{default:n(()=>[l(o,{onClick:t[4]||(t[4]=a=>e.lockcount--),disabled:e.lockcount==2||e.enablelock==0},{default:n(()=>[s(" − ")]),_:1},8,["disabled"]),l(r,{"show-button":!1,value:e.lockcount,"onUpdate:value":t[5]||(t[5]=a=>e.lockcount=a),disabled:e.enablelock==0,placeholder:"",min:2,max:5},null,8,["value","disabled"]),l(o,{onClick:t[6]||(t[6]=a=>e.lockcount++),disabled:e.lockcount==5||e.enablelock==0,class:"mr-5px"},{default:n(()=>[s(" + ")]),_:1},8,["disabled"]),s(" 次 ")]),_:1})]),_:1}),l(i,{label:"是否开启自动解锁",path:"unlockeanble"},{label:n(()=>[s(" 是否开启自动解锁 "),l(k,{trigger:"hover",placement:"top","content-style":"padding: 5px;"},{trigger:n(()=>[l(y($),{class:"text-xl cursor-pointer c-#7a7b78"})]),default:n(()=>[ve,_e]),_:1})]),default:n(()=>[l(u,{value:e.unlockeanble,"onUpdate:value":t[7]||(t[7]=a=>e.unlockeanble=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),l(i,{label:"解锁时间",path:"unlocktime"},{default:n(()=>[l(m,{class:"flex items-center"},{default:n(()=>[l(o,{onClick:t[8]||(t[8]=a=>e.unlocktime--),disabled:e.unlocktime==e.locktime||e.unlockeanble==0},{default:n(()=>[s(" − ")]),_:1},8,["disabled"]),l(r,{"show-button":!1,value:e.unlocktime,"onUpdate:value":t[9]||(t[9]=a=>e.unlocktime=a),placeholder:"",min:e.locktime,disabled:e.unlockeanble==0},null,8,["value","min","disabled"]),l(o,{onClick:t[10]||(t[10]=a=>e.unlocktime++),class:"mr-5px",disabled:e.unlockeanble==0},{default:n(()=>[s(" + ")]),_:1},8,["disabled"]),s(" 小时 ")]),_:1})]),_:1}),l(i,{label:"是否开启密码过期",path:"pwdexpire"},{default:n(()=>[l(u,{value:e.pwdexpire,"onUpdate:value":t[11]||(t[11]=a=>e.pwdexpire=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),l(i,{label:"密码过期时间",path:"expiretime"},{default:n(()=>[l(m,{class:"flex items-center"},{default:n(()=>[l(o,{onClick:t[12]||(t[12]=a=>e.expiretime--),disabled:e.expiretime==1},{default:n(()=>[s(" − ")]),_:1},8,["disabled"]),l(r,{"show-button":!1,value:e.expiretime,"onUpdate:value":t[13]||(t[13]=a=>e.expiretime=a),placeholder:"",min:1},null,8,["value"]),l(o,{onClick:t[14]||(t[14]=a=>e.expiretime++),class:"mr-5px"},{default:n(()=>[s(" + ")]),_:1}),s(" 天 ")]),_:1})]),_:1}),l(i,{label:"是否开启账号有效期登录",path:"aceffective"},{default:n(()=>[l(u,{value:e.aceffective,"onUpdate:value":t[15]||(t[15]=a=>e.aceffective=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),l(i,{label:"是否开启白名单",path:"whiteenable"},{default:n(()=>[l(u,{value:e.whiteenable,"onUpdate:value":t[16]||(t[16]=a=>e.whiteenable=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),l(i,{label:"是否开启验证码",path:"captcha"},{default:n(()=>[l(u,{value:e.captcha,"onUpdate:value":t[17]||(t[17]=a=>e.captcha=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),l(i,{label:"CPU阈值",path:"cputhreshold"},{default:n(()=>[l(m,{class:"flex items-center"},{default:n(()=>[l(o,{onClick:t[18]||(t[18]=a=>e.cputhreshold--),disabled:e.cputhreshold==0},{default:n(()=>[s(" − ")]),_:1},8,["disabled"]),l(r,{"show-button":!1,value:e.cputhreshold,"onUpdate:value":t[19]||(t[19]=a=>e.cputhreshold=a),precision:0,placeholder:"",min:0,max:100},null,8,["value"]),l(o,{onClick:t[20]||(t[20]=a=>e.cputhreshold++),disabled:e.cputhreshold==100,class:"mr-5px"},{default:n(()=>[s(" + ")]),_:1},8,["disabled"]),s(" % ")]),_:1})]),_:1}),l(i,{label:"MEM阈值",path:"memthreshold"},{default:n(()=>[l(m,{class:"flex items-center"},{default:n(()=>[l(o,{onClick:t[21]||(t[21]=a=>e.memthreshold--),disabled:e.memthreshold==0},{default:n(()=>[s(" − ")]),_:1},8,["disabled"]),l(r,{"show-button":!1,value:e.memthreshold,"onUpdate:value":t[22]||(t[22]=a=>e.memthreshold=a),precision:0,placeholder:"",min:0,max:100},null,8,["value"]),l(o,{onClick:t[23]||(t[23]=a=>e.memthreshold++),disabled:e.memthreshold==100,class:"mr-5px"},{default:n(()=>[s(" + ")]),_:1},8,["disabled"]),s(" % ")]),_:1})]),_:1}),l(i,{label:"合规率阈值",path:"passrate"},{default:n(()=>[l(m,{class:"flex items-center"},{default:n(()=>[l(o,{onClick:t[24]||(t[24]=a=>e.passrate--),disabled:e.passrate==0},{default:n(()=>[s(" − ")]),_:1},8,["disabled"]),l(r,{"show-button":!1,value:e.passrate,"onUpdate:value":t[25]||(t[25]=a=>e.passrate=a),placeholder:"",min:0,max:100},null,8,["value"]),l(o,{onClick:t[26]||(t[26]=a=>e.passrate++),disabled:e.passrate==100,class:"mr-5px"},{default:n(()=>[s(" + ")]),_:1},8,["disabled"])]),_:1})]),_:1}),l(i,{label:"token过期时间",path:"tokentime"},{default:n(()=>[l(m,{class:"flex items-center"},{default:n(()=>[l(o,{onClick:t[27]||(t[27]=a=>e.tokentime--),disabled:e.tokentime==1},{default:n(()=>[s(" − ")]),_:1},8,["disabled"]),l(r,{"show-button":!1,value:e.tokentime,"onUpdate:value":t[28]||(t[28]=a=>e.tokentime=a),placeholder:"",min:1},null,8,["value"]),l(o,{onClick:t[29]||(t[29]=a=>e.tokentime++),class:"mr-5px"},{default:n(()=>[s(" + ")]),_:1}),s(" 小时 ")]),_:1})]),_:1}),l(i,{label:"是否开启统计",path:"statistics"},{label:n(()=>[s(" 是否开启统计 "),l(k,{trigger:"hover",placement:"top","content-style":"padding: 5px;"},{trigger:n(()=>[l(y($),{class:"text-xl cursor-pointer c-#7a7b78"})]),default:n(()=>[be,ke]),_:1})]),default:n(()=>[l(u,{value:e.statistics,"onUpdate:value":t[30]||(t[30]=a=>e.statistics=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1}),e.statistics==1?(p(),h(i,{key:0,label:"统计开始时间",path:"sstarttime"},{default:n(()=>[l(T,{value:e.sstarttime,"onUpdate:value":t[31]||(t[31]=a=>e.sstarttime=a),format:"HH:mm",class:"w-150px"},null,8,["value"])]),_:1})):V("",!0),e.statistics==1?(p(),h(i,{key:1,label:"统计结束时间",path:"sendtime"},{default:n(()=>[l(T,{value:e.sendtime,"onUpdate:value":t[32]||(t[32]=a=>e.sendtime=a),format:"HH:mm",class:"w-150px"},null,8,["value"])]),_:1})):V("",!0),l(i,{label:"历史数据存储误差允许间隔",path:"hisintervel"},{default:n(()=>[l(m,{class:"flex items-center"},{default:n(()=>[l(o,{onClick:t[33]||(t[33]=a=>e.hisintervel--),disabled:e.hisintervel==0},{default:n(()=>[s(" − ")]),_:1},8,["disabled"]),l(r,{"show-button":!1,value:e.hisintervel,"onUpdate:value":t[34]||(t[34]=a=>e.hisintervel=a),precision:0,placeholder:"",min:1,max:5},null,8,["value"]),l(o,{onClick:t[35]||(t[35]=a=>e.hisintervel++),disabled:e.hisintervel==5,class:"mr-5px"},{default:n(()=>[s(" + ")]),_:1},8,["disabled"]),s(" 分钟 ")]),_:1})]),_:1}),l(i,{label:" "},{default:n(()=>[l(j,null,{default:n(()=>[B((p(),h(o,{type:"default",ghost:"",onClick:U},{default:n(()=>[s(" 刷新 ")]),_:1})),[[S,"system.conf.select"]]),B((p(),h(o,{type:"info",ghost:"",onClick:N},{default:n(()=>[s(" 保存 ")]),_:1})),[[S,"system.conf.update"]])]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1})}}}),xe=I(he,[["__scopeId","data-v-6ff3f411"]]),ge={class:"h-full"},we=M({name:"manage_systemconfig",__name:"index",setup(f){const b=te("基础配置");return(q,g)=>{const e=le,w=ne,d=ae;return p(),D("div",ge,[l(d,{style:{"margin-bottom":"16px"},class:"h-full","content-style":{height:"100%"}},{default:n(()=>[l(w,{type:"card",animated:"",class:"h-100%",value:b.value,"onUpdate:value":g[0]||(g[0]=C=>b.value=C)},{default:n(()=>[l(e,{name:"基础配置",tab:"基础配置"},{default:n(()=>[l(xe)]),_:1})]),_:1},8,["value"])]),_:1})])}}}),qe=I(we,[["__scopeId","data-v-fd7530ae"]]);export{qe as default};
