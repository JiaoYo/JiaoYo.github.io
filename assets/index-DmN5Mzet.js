import{d as L,b as U,o as b,k as _e,a as P,l as O,e as a,m as K,u as ae,n as Z,r as T,p as se,i as Q,q as fe,c as D,w as s,f as t,s as he,v as J,x as X,h,$ as y,y as ge,N as Y,z as ve,g as I,t as B,B as V,A as ee,C as oe,D as we,E as xe,F as ne,G as ye,H as M,I as Ce,J as be,K as ke,L as $e,M as re,O as Se,P as Ne,Q as Re,R as Ue,S as qe,T as ze,U as Me,V as Ie,W as Le,X as Pe,Y as Be,Z as je,a0 as Ee,a1 as Fe,a2 as Te,a3 as De,a4 as Ve}from"./index-iudaQIXk.js";const Ge={src:_e,alt:"linkqi",style:{width:"64px",height:"64px"}},We=L({name:"SystemLogo",__name:"system-logo",setup(r){return(n,u)=>(b(),U("img",Ge))}}),Ae={class:"absolute-lt z-1 size-full overflow-hidden"},Oe={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},He={height:"1337",width:"1337"},Ke={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},Ze=["stop-color"],Qe=["stop-color"],Je={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Xe={height:"896",width:"967.8852157128662"},Ye={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},eo=["stop-color"],oo=["stop-color"],to=L({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(r){const n=r,u=P(()=>O(n.themeColor,200)),p=P(()=>O(n.themeColor,500));return(e,o)=>(b(),U("div",Ae,[a("div",Oe,[(b(),U("svg",He,[a("defs",null,[o[0]||(o[0]=a("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),a("linearGradient",Ke,[a("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,Ze),a("stop",{offset:"1","stop-color":p.value,"stop-opacity":"1"},null,8,Qe)])]),o[1]||(o[1]=a("g",{opacity:"1"},[a("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),a("div",Je,[(b(),U("svg",Xe,[a("defs",null,[o[2]||(o[2]=a("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),a("linearGradient",Ye,[a("stop",{offset:"0","stop-color":p.value,"stop-opacity":"1"},null,8,eo),a("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,oo)])]),o[3]||(o[3]=a("g",{opacity:"1"},[a("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}});function no(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const n=Math.random()*16|0;return(r==="x"?n:n&3|8).toString(16)})}/*! js-cookie v3.0.5 | MIT */function E(r){for(var n=1;n<arguments.length;n++){var u=arguments[n];for(var p in u)r[p]=u[p]}return r}var ao={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function H(r,n){function u(e,o,c){if(!(typeof document>"u")){c=E({},n,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var _ in c)c[_]&&(d+="; "+_,c[_]!==!0&&(d+="="+c[_].split(";")[0]));return document.cookie=e+"="+r.write(o,e)+d}}function p(e){if(!(typeof document>"u"||arguments.length&&!e)){for(var o=document.cookie?document.cookie.split("; "):[],c={},d=0;d<o.length;d++){var _=o[d].split("="),$=_.slice(1).join("=");try{var v=decodeURIComponent(_[0]);if(c[v]=r.read($,v),e===v)break}catch{}}return e?c[e]:c}}return Object.create({set:u,get:p,remove:function(e,o){u(e,"",E({},o,{expires:-1}))},withAttributes:function(e){return H(this.converter,E({},this.attributes,e))},withConverter:function(e){return H(E({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(r)}})}var le=H(ao,{path:"/"});const A=(r,n,u)=>{le.set(r,n)},F=r=>le.get(r),so={class:"w-full flex-y-center gap-16px"},ro=["src"],lo={class:"flex-y-center justify-between"},co=L({name:"PwdLogin",__name:"pwd-login",setup(r){const n=K();ae();const{formRef:u,validate:p}=Z(),e=T({username:"",password:"",captcha:"",captchaSrc:"",captchaUuid:"",checked:!0}),o=T({captchaEnable:null}),c=P(()=>{const{defaultRequiredRule:g,formRules:i,patternRules:C}=se();return{username:i.username,password:{...g,...C.password},captcha:g}});async function d(){const{data:g,error:i}=await we();i||(o.captchaEnable=g,o.captchaEnable===1&&_())}async function _(){e.captchaUuid=no(),e.captchaSrc=xe+"/captcha?uuid="+e.captchaUuid}async function $(){await p(),e.checked?v(e.username,e.password,e.checked):S(),await n.login(ne(e.username),ne(e.password),e.captchaUuid,e.captcha)||(e.captcha="",e.captchaSrc="",o.captchaEnable===1&&_())}function v(g,i,C){A("project_storage_user",g),A("project_storage_pwd",i),A("project_storage_check",String(C))}function f(){e.username=F("project_storage_user")||"",e.password=F("project_storage_pwd")||"",e.checked=F("project_storage_check")?F("project_storage_check")=="true":!1}function S(){v("","",!1)}return Q(()=>{f(),d()}),(g,i)=>{const C=X,N=J,q=ve,x=V,l=Y,m=oe,R=fe("no-special");return b(),D(m,{ref_key:"formRef",ref:u,model:e,rules:c.value,size:"large","show-label":!1,onKeyup:ee($,["enter"])},{default:s(()=>[t(N,{path:"userName"},{default:s(()=>[t(C,{value:e.username,"onUpdate:value":i[0]||(i[0]=w=>e.username=w),placeholder:h(y)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),t(N,null,{default:s(()=>[t(C,{value:e.password,"onUpdate:value":i[1]||(i[1]=w=>e.password=w),type:"password","show-password-on":"click",placeholder:h(y)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o.captchaEnable===1?(b(),D(N,{key:0,path:"captcha"},{default:s(()=>[a("div",so,[ge(t(C,{value:e.captcha,"onUpdate:value":i[2]||(i[2]=w=>e.captcha=w),placeholder:"请输入验证码"},null,8,["value"]),[[R]]),a("img",{src:e.captchaSrc,alt:"验证码",style:{width:"160px",height:"40px"},onClick:_},null,8,ro)])]),_:1})):he("",!0),t(l,{vertical:"",size:24},{default:s(()=>[a("div",lo,[t(q,{checked:e.checked,"onUpdate:checked":i[3]||(i[3]=w=>e.checked=w)},{default:s(()=>[I(B(h(y)("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["checked"])]),t(x,{type:"primary",size:"large",round:"",block:"",loading:h(n).loginLoading,onClick:$},{default:s(()=>[I(B(h(y)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),io={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function uo(r,n){return b(),U("svg",io,n[0]||(n[0]=[a("path",{fill:"currentColor",d:"M10.5 20h3q.2 0 .35-.15t.15-.35t-.15-.35t-.35-.15h-3q-.2 0-.35.15t-.15.35t.15.35t.35.15M7 23q-.825 0-1.412-.587T5 21V3q0-.825.588-1.412T7 1h10q.825 0 1.413.588T19 3v18q0 .825-.587 1.413T17 23zm0-5v3h10v-3zm0-2h10V6H7zM7 4h10V3H7zm0 14v3zM7 4V3z"},null,-1)]))}const po=ye({name:"material-symbols-phone-android-outline-rounded",render:uo}),mo={class:"flex"},_o={class:"flex w-70px items-center"},fo=L({name:"ResetPwd",__name:"reset-pwd",setup(r){ae();const{formRef:n,validate:u}=Z(),p=K(),e=T({phnum:"",code:""}),o=M({phnum:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:["blur","change"]}],code:[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]}),c=()=>{o.value.code=[{required:!1,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}]},d=M(0),_=async()=>{var S;await u(),o.value.code=[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码为6位数字",trigger:["blur","change"]}];const{data:v,error:f}=await be(e.phnum);if(!f){(S=window.$message)==null||S.success(`验证码已发送到${e.phnum}，请注意查收`),d.value=60;const g=setInterval(()=>{d.value-=1,d.value<=0&&clearInterval(g)},1e3)}};async function $(){await u();const{data:v,error:f}=await ke({phnum:e.phnum,code:e.code});v&&(console.log(v),await p.captchaLogin(v.data))}return(v,f)=>{const S=po,g=X,i=J,C=V,N=Ce,q=V,x=Y,l=oe;return b(),D(l,{ref_key:"formRef",ref:n,model:e,rules:o.value,size:"large","show-label":!1,onKeyup:ee($,["enter"])},{default:s(()=>[t(i,{path:"phone","feedback-style":{marginLeft:"70px"}},{default:s(()=>[a("div",mo,[a("div",_o,[t(S,{class:"font-size-20px mr-8px"}),f[2]||(f[2]=a("span",null,"+86",-1))])]),t(g,{clearable:"",maxlength:"11",class:"flex-1 w-100%",onBlur:c,value:e.phnum,"onUpdate:value":f[0]||(f[0]=m=>e.phnum=m),placeholder:"请输入手机号码"},null,8,["value"])]),_:1}),t(i,{path:"code"},{default:s(()=>[t(N,null,{default:s(()=>[t(g,{value:e.code,"onUpdate:value":f[1]||(f[1]=m=>e.code=m),placeholder:h(y)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),t(C,{type:"primary",ghost:"",onClick:_,loading:d.value>0},{default:s(()=>[I(B(d.value>0?`${d.value}秒后可再次获取`:"获取验证码"),1)]),_:1},8,["loading"])]),_:1})]),_:1}),t(x,{vertical:"",size:18,class:"w-full"},{default:s(()=>[t(q,{type:"primary",size:"large",round:"",block:"",onClick:$},{default:s(()=>f[3]||(f[3]=[I("登录 ")])),_:1,__:[3]})]),_:1})]),_:1},8,["model","rules"])}}}),ho={class:"qr-wrapper"},go=["src"],vo=L({__name:"qrcode_login",setup(r){const n=M(""),u=async()=>{const{data:p,error:e}=await $e();e||(n.value=p)};return Q(()=>{u()}),(p,e)=>(b(),U("div",ho,[a("iframe",{src:n.value,frameborder:"0",scrolling:"no",class:"qr-frame"},null,8,go),e[0]||(e[0]=a("div",{class:"qr-tip"},"微信二维码有效期5分钟",-1))]))}}),wo=re(vo,[["__scopeId","data-v-5e717107"]]),xo={class:"w-400px lt-sm:w-300px"},yo={class:"logoName"},Co={class:"text-26px text-primary font-500 lt-sm:text-22px"},bo={class:"login-footer"},ko=L({name:"login",__name:"index",setup(r){K(),Se(),Ne();const n=Re(),u={"pwd-login":{label:"账号密码登录",component:co},qrCode:{label:"微信扫码登录",component:wo},"reset-pwd":{label:"手机验证码登录",component:fo}},p=M("pwd-login"),e=P(()=>n.darkMode?O(n.themeColor,600):n.themeColor),o=T(c());function c(){return{username:"",password:"",comfirmPassword:"",state:""}}const{createConfirmPwdRule:d,defaultRequiredRule:_,patternRules:$}=se(),v={username:_,password:{..._,...$.password}},f=P(()=>{const x="#ffffff",l=n.darkMode?.5:.2;return Ue(x,n.themeColor,l)}),{formRef:S,validate:g}=Z(),i=M(!1),C=async()=>{var m;await g();const{data:x,error:l}=await Ve({username:o.username,password:o.password,uuid:o.state});l||(p.value="qrCode",i.value=!1,(m=window.$message)==null||m.success("绑定成功，请重新扫码登录！"))},N=M(0);Q(()=>{var w;const x=window.location.href,l=x.match(/status=(\d)/);if(console.log(x,"statusMatch"),!l)return;const m=l[1];console.log(m,"statusstatusstatus");const R={0:"获取微信信息失败",1:"获取用户信息失败",2:"二维码过期",4:"账号停用",6:"其他未知原因"};if(R[m]){(w=window.$message)==null||w.error(R[m]),m=="2"&&N.value++,q();return}if(m=="3"){const z=x.match(/state=([^#&]+)/),j=z?z[1]:"";i.value=!0,o.state=j,q()}window.addEventListener("captchaLogin",z=>{i.value=!0,o.state=z.detail.state})});function q(){const{protocol:x,host:l,pathname:m,hash:R}=window.location,w=R||"#/login";window.history.replaceState({},"",`${x}//${l}${m}${w}`)}return qe(()=>{window.removeEventListener("captchaLogin",()=>{})}),(x,l)=>{const m=to,R=We,w=Le,z=ze,j=je,G=X,W=J,ce=oe,ie=Ee,ue=V,pe=Y,de=Fe,me=Te;return b(),U("div",{class:"relative size-full flex-center overflow-hidden",style:De({backgroundColor:f.value})},[t(m,{"theme-color":e.value},null,8,["theme-color"]),t(j,{bordered:!1,class:"relative z-4 w-auto rd-12px","content-style":{display:"flex"}},{default:s(()=>[a("div",xo,[a("div",yo,[t(R,{class:"text-64px text-primary lt-sm:text-48px"}),a("h3",Co,B(h(y)("system.title")),1)]),t(z,{value:p.value,"onUpdate:value":l[0]||(l[0]=k=>p.value=k)},{default:s(()=>[(b(),U(Me,null,Ie(u,(k,te)=>t(w,{key:te,name:te,tab:k.label},{default:s(()=>[t(Pe,{name:h(n).page.animateMode,mode:"out-in",appear:""},{default:s(()=>[(b(),D(Be(k.component),{key:N.value}))]),_:2},1032,["name"])]),_:2},1032,["name","tab"])),64))]),_:1},8,["value"])])]),_:1}),t(de,{show:i.value,title:"",class:"w-500px","mask-closable":!1,"close-on-esc":!1},{default:s(()=>[t(j,null,{header:s(()=>l[4]||(l[4]=[I(" 绑定微信 "),a("span",{class:"c-red font-size-14px"},"绑定过期时间10分钟",-1)])),footer:s(()=>[t(pe,{justify:"end",size:16},{default:s(()=>[t(ue,{type:"primary",onClick:C},{default:s(()=>[I(B(h(y)("common.confirm")),1)]),_:1})]),_:1})]),default:s(()=>[t(ie,null,{default:s(()=>[t(ce,{ref_key:"formRef",ref:S,model:o,rules:v,"label-placement":"left","label-width":100,"require-mark-placement":"left",onKeyup:ee(C,["enter"])},{default:s(()=>[t(W,{label:h(y)("page.manage.user.username"),path:"username"},{default:s(()=>[t(G,{value:o.username,"onUpdate:value":l[1]||(l[1]=k=>o.username=k),placeholder:h(y)("page.manage.user.form.username")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(W,{label:h(y)("page.login.common.password"),path:"password"},{default:s(()=>[t(G,{type:"password","show-password-on":"click",clearable:"",value:o.password,"onUpdate:value":l[2]||(l[2]=k=>o.password=k),placeholder:h(y)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(W,{label:h(y)("page.login.common.confirmPassword"),path:"comfirmPassword",rule:h(d)(o.password)},{default:s(()=>[t(G,{type:"password","show-password-on":"click",clearable:"",value:o.comfirmPassword,"onUpdate:value":l[3]||(l[3]=k=>o.comfirmPassword=k),placeholder:h(y)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label","rule"])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["show"]),a("div",bo,[l[5]||(l[5]=a("a",{href:"http://www.linkqi.cn/",target:"_blank",rel:"noopener noreferrer"},"杭州领祺科技有限公司",-1)),t(me,{vertical:""}),l[6]||(l[6]=a("a",{href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank",rel:"noopener noreferrer"},"浙ICP备19034246号-2",-1))])],4)}}}),So=re(ko,[["__scopeId","data-v-2a73983e"]]);export{So as default};
