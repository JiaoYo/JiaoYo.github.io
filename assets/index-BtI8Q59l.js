import{_ as E}from"./export-B4PdoAZu.js";import{d as q,p as A,q as D,o as S,c as M,w as n,g as t,i as o,$ as e,aE as R,bY as P,h as N,t as z,ak as U,B as O,P as j,Q as $,a6 as T,a0 as L,b4 as f,bZ as C,b7 as W,k as F,e as G,aN as V,aO as I,aT as Q}from"./index-DpQqTUwv.js";import{d as Y,e as Z}from"./system-log-Bglq-jbs.js";import{u as H}from"./table-D_LxFwsQ.js";import{_ as J}from"./round-search-CTyryMOO.js";import{_ as K}from"./round-refresh-DSyDIyN3.js";import{_ as X}from"./FormItemGridItem-CaDVclKw.js";import{_ as ee}from"./Grid-DJ9dd8u4.js";const te=q({name:"OptionlogSearch",__name:"optionlog-search",props:{model:{required:!0},modelModifiers:{}},emits:A(["reset","search"],["update:model"]),setup(i,{expose:h,emit:y}){const b=y,r=D(i,"model");function _(){b("reset")}function g(){b("search")}async function x(){const{data:p,error:c}=await Y({status:r.value.status});if(!c){let m=p,u=new Blob([m],{type:"application/vnd.ms-excel"}),a=new Date().getTime()+".xls",l=window.webkitURL.createObjectURL(u),s=document.createElement("a");s.href=l,s.download=a,document.body.appendChild(s),s.click(),s.remove()}}return h({handleExportChange:x}),(p,c)=>{const m=U,u=X,a=K,l=O,s=J,k=j,w=ee,v=$,d=T;return S(),M(d,{bordered:!1,size:"small",class:"card-wrapper"},{default:n(()=>[t(v,{model:r.value,"label-placement":"left","label-width":80,"show-feedback":!1},{default:n(()=>[t(w,{responsive:"screen","item-responsive":""},{default:n(()=>[t(u,{span:"24 s:12 m:6",label:o(e)("page.systemlog.option.status"),path:"status",class:"pr-24px"},{default:n(()=>[t(m,{filterable:"",clearable:"",value:r.value.status,"onUpdate:value":[c[0]||(c[0]=B=>r.value.status=B),g],placeholder:o(e)("page.systemlog.option.form.status"),options:o(R)(o(P)),onClear:_},null,8,["value","placeholder","options"])]),_:1},8,["label"]),t(u,{span:"24 s:12 m:6"},{default:n(()=>[t(k,{class:"w-full"},{default:n(()=>[t(l,{onClick:_},{icon:n(()=>[t(a,{class:"text-icon"})]),default:n(()=>[N(" "+z(o(e)("common.reset")),1)]),_:1}),t(l,{type:"primary",ghost:"",onClick:g},{icon:n(()=>[t(s,{class:"text-icon"})]),default:n(()=>[N(" "+z(o(e)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),oe={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function ae(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!I(i)}const ue=q({name:"logmanage_optionlog",__name:"index",setup(i){const h=L(),{columns:y,columnChecks:b,data:r,getData:_,loading:g,pagination:x,searchParams:p,resetSearchParams:c}=H({apiFn:Z,apiParams:{page:1,pageSize:20,limit:20,status:null,_t:new Date().getTime()},columns:()=>[{key:"creatorName",title:e("page.systemlog.option.creatorName"),align:"center",width:120,resizable:!0},{key:"operation",title:e("page.systemlog.option.operation"),width:140,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestUri",title:e("page.systemlog.option.requestUri"),width:200,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestMethod",title:e("page.systemlog.option.requestMethod"),width:100,align:"center",resizable:!0},{key:"requestParams",title:e("page.systemlog.option.requestParams"),width:200,align:"center",resizable:!0,render(a){return f(C,{tooltipPlacement:"center",style:{maxWidth:"180px"}},{default:()=>a.requestParams||"",tooltip:()=>f("div",{style:{textAlign:"center",padding:"8px",maxWidth:"600px"}},a.requestParams||"")})}},{key:"requestTime",title:e("page.systemlog.option.requestTime")+"ms",width:100,align:"center",resizable:!0},{key:"status",title:e("page.systemlog.option.status"),width:100,align:"center",render:a=>{a.status==null&&(a.status=0);const l={0:"error",1:"primary"},s=e(P[a.status].label);return t(W,{size:"small",type:l[a.status]},ae(s)?s:{default:()=>[s]})},resizable:!0},{key:"ip",title:e("page.systemlog.option.ip"),width:140,align:"center",resizable:!0},{key:"userAgent",title:e("page.systemlog.option.userAgent"),width:200,align:"center",render(a){return f(C,{tooltipPlacement:"center",style:{maxWidth:"180px"}},{default:()=>a.userAgent||"",tooltip:()=>f("div",{style:{textAlign:"center",padding:"8px",maxWidth:"600px"}},a.userAgent||"")})},resizable:!0},{key:"createDate",title:e("page.systemlog.option.createDate"),width:200,align:"center"}]}),m=F(),u=()=>{m.value.handleExportChange()};return(a,l)=>{const s=E,k=O,w=Q,v=T;return S(),G("div",oe,[t(te,{model:o(p),"onUpdate:model":l[0]||(l[0]=d=>V(p)?p.value=d:null),onReset:o(c),onSearch:o(_),ref_key:"searchRef",ref:m},null,8,["model","onReset","onSearch"]),t(v,{title:o(e)("page.systemlog.option.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":n(()=>[t(k,{type:"info",size:"small",ghost:"",onClick:u},{icon:n(()=>[t(s,{class:"text-icon"})]),default:n(()=>[N(" "+z(o(e)("common.export")),1)]),_:1})]),default:n(()=>[t(w,{columns:o(y),data:o(r),size:"small","flex-height":!o(h).isMobile,"scroll-x":"",loading:o(g),remote:"","row-key":d=>d.id,pagination:o(x),class:"sm:h-full"},null,8,["columns","data","flex-height","loading","row-key","pagination"])]),_:1},8,["title"])])}}});export{ue as default};
