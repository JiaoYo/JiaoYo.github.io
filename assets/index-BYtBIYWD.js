import{_ as J}from"./table-column-setting.vue_vue_type_script_setup_true_lang-Bt-q2Vy2.js";import{_ as K}from"./export-BILJPgvr.js";import{_ as M}from"./round-search-CqTNgSQz.js";import{d as A,a$ as n,m as g,o as v,b as L,g as t,w as o,f as a,B as D,af as Q,h as x,t as b,$ as T,c as W,ap as N,F as X,aF as Y,T as Z,R as ee,as as te,a6 as ae,_ as ne}from"./index-DN-pI471.js";import{a as oe}from"./metar-T1lbymQG.js";import{u as se,a as le}from"./table-DgK90yuN.js";import{e as ie}from"./exportExcel-Bv4G4H50.js";import{_ as re}from"./DatePicker-CvKpaRU8.js";import{_ as ce}from"./RadioButton-VDUBefds.js";import{_ as me}from"./FormItemGridItem-B0l7aXEc.js";import{_ as de}from"./Grid-B8j5Zs_r.js";const ue={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},_e=A({name:"realtimequery_nwpquery",__name:"index",setup(pe){const C=Date.now(),r=new Date(C).setHours(0,0,0,0),{columns:y,columnChecks:h,data:p,getData:f,loading:k,mobilePagination:S,searchParams:s,resetSearchParams:fe}=se({apiFn:oe,apiParams:{page:1,pageSize:20,limit:20,startTime:n(1,r)||null,endTime:n(1,Date.now()+864e5*3)||null,_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",width:50},{key:"dbtime",title:"时间",align:"center",width:160},{key:"tt2",title:"2m气温(℃)",align:"center",width:100},{key:"dt2",title:"2m露点(℃)",align:"center",width:100},{key:"rh2",title:"相对湿度(%)",align:"center",width:100},{key:"wd10",title:"10m风向(°)",align:"center",width:100},{key:"ws10",title:"10m风速(m/s)",align:"center",width:100},{key:"rain",title:"降水量(mm)",align:"center",width:100},{key:"ps",title:"气压(Pa)",align:"center",width:100},{key:"tcc",title:"总云量(%)",align:"center",width:100},{key:"ssrd",title:"太阳总辐射(w/m²)",align:"center",width:140},{key:"tsdsr",title:"太阳直接辐射(w/m²)",align:"center",width:140},{key:"ssrdiff",title:"太阳散辐射(w/m²)",align:"center",width:140},{key:"lasttime",title:"最后更新时间",align:"center",width:160}]}),{drawerVisible:we,operateType:he,editingData:ge,handleAdd:ye,handleEdit:ke,checkedRowKeys:_,onBatchDeleted:ve,onDeleted:De}=le(p,f),B=()=>{f()},w=g([r,Date.now()+144e5]);async function P(c,e){s.startTime==n(1,r)&&s.endTime==n(1,Date.now()+144e5)?d.value="0":s.startTime==n(1,r)&&s.endTime==n(1,Date.now()+864e5*10)?d.value="1":d.value="2",s.startTime=n(1,e[0]),s.endTime=n(1,e[1]),f()}const F=()=>{const c={};y.value.forEach(l=>{l.key!="index"&&l.key!="operate"&&l.type!=="selection"&&(c[l.key]=l.title)});const e=[];p.value.forEach(l=>{if(_.value.includes(l.id)){const m=JSON.parse(JSON.stringify(c));for(const u in m)l.hasOwnProperty(u)?m[u]=l[u]:m[u]="";e.push(m)}}),ie(e,c,"天气预报数据")},R=g("0"),$={近一天:[Date.now()-864e5*1,Date.now()],近三天:[Date.now()-864e5*3,Date.now()],近七天:[Date.now()-864e5*7,Date.now()]},d=g("0"),z=c=>{d.value=c,c=="0"?(w.value=[r,Date.now()+144e5],s.startTime=n(1,r),s.endTime=n(1,Date.now()+144e5)):(w.value=[r,Date.now()+864e5*10],s.startTime=n(1,r),s.endTime=n(1,Date.now()+864e5*10)),f()};return(c,e)=>{const l=re,m=ce,u=Y,E=M,O=me,U=de,V=Z,G=K,j=J,q=ee,H=te,I=ae;return v(),L("div",ue,[t(I,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:o(()=>[t(V,{ref:"formRef",model:a(s),"label-placement":"left","show-feedback":!1},{default:o(()=>[t(U,{"y-gap":16,responsive:"screen","item-responsive":""},{default:o(()=>[t(O,{span:"24 s:12 m:12",label:"起止时间",path:"startTime"},{default:o(()=>[t(l,{value:w.value,"onUpdate:value":e[0]||(e[0]=i=>w.value=i),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":P,"default-time":["00:00:00","23:59:59"],shortcuts:$},null,8,["value"]),t(u,{value:d.value,"onUpdate:value":[e[1]||(e[1]=i=>d.value=i),z],class:"ml-20px"},{default:o(()=>[t(m,{value:"0",label:"超短期"}),t(m,{value:"1",label:"短期"})]),_:1},8,["value"]),t(a(D),{type:"primary",ghost:"",onClick:B,class:"ml-20px"},{icon:o(()=>[t(E,{class:Q(["text-icon",{"animate-spin":a(k)}])},null,8,["class"])]),default:o(()=>[x(" "+b(a(T)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),"header-extra":o(()=>[R.value=="0"?(v(),W(q,{key:0,align:"center",justify:"end",class:"w-100% mb--10px"},{default:o(()=>[t(a(D),{onClick:F,size:"small",disabled:a(_).length==0},{icon:o(()=>[t(G,{class:"text-icon"})]),default:o(()=>[x(" "+b(a(T)("common.export")),1)]),_:1},8,["disabled"]),t(j,{columns:a(h),"onUpdate:columns":e[2]||(e[2]=i=>N(h)?h.value=i:null)},null,8,["columns"])]),_:1})):X("",!0)]),default:o(()=>[t(H,{"checked-row-keys":a(_),"onUpdate:checkedRowKeys":e[3]||(e[3]=i=>N(_)?_.value=i:null),columns:a(y),data:a(p),size:"small",loading:a(k),remote:"","row-key":i=>i.id,pagination:a(p).length?a(S):void 0,class:"sm:h-full","flex-height":!0,"scroll-x":""},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1})])}}}),ze=ne(_e,[["__scopeId","data-v-8f8ba3f5"]]);export{ze as default};
