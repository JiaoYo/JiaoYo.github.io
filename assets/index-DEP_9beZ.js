import{_ as O}from"./export-oh2-I3ZA.js";import{d as z,q as R,s as $,o as B,c as j,w as a,g as e,i as t,$ as o,Z as M,dr as U,h as S,t as C,M as A,A as I,a2 as P,B as D,E as q,D as F,ad as L,a4 as G,ds as V,aq as W,j as K,e as Z,ag as H,ah as J}from"./index-7Q9xZuwa.js";import{b as Q,c as X}from"./system-log-Di2MRGoN.js";import{u as Y}from"./table-G6_8Abm0.js";import{_ as ee}from"./round-search-BQOA9W6m.js";import{_ as te}from"./round-refresh-DJiiF7wv.js";import{_ as oe}from"./FormItemGridItem-DYTXkfwP.js";import{_ as ae}from"./Grid-CRtcNhSF.js";import{_ as ne}from"./DataTable-n3fP4Loy.js";import"./Forward-BzUEeUAa.js";const se=z({name:"LoginlogSearch",__name:"loginlog-search",props:{model:{required:!0},modelModifiers:{}},emits:R(["reset","search"],["update:model"]),setup(_,{expose:h,emit:f}){const b=f,l=$(_,"model");function y(r){l.value.creatorName=r.replace(/\s/g,"")}function x(r){return!r.startsWith(" ")&&!r.endsWith(" ")}function g(){b("reset")}function m(){b("search")}async function N(){const{data:r,error:p}=await Q({creatorName:l.value.creatorName,status:l.value.status});if(!p){let s=r,n=new Blob([s],{type:"application/vnd.ms-excel"}),c=new Date().getTime()+".xls",d=window.webkitURL.createObjectURL(n),i=document.createElement("a");i.href=d,i.download=c,document.body.appendChild(i),i.click(),i.remove()}}return h({handleExportChange:N}),(r,p)=>{const s=I,n=oe,c=P,d=te,i=D,w=ee,u=q,v=ae,T=F,E=L;return B(),j(E,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[e(T,{model:l.value,"label-placement":"left","label-width":80,"show-feedback":!1,onKeyup:A(m,["enter"])},{default:a(()=>[e(v,{responsive:"screen","item-responsive":""},{default:a(()=>[e(n,{span:"24 s:12 m:6",label:t(o)("page.systemlog.login.creatorName"),path:"creatorName",class:"pr-24px"},{default:a(()=>[e(s,{clearable:"",value:l.value.creatorName,"onUpdate:value":p[0]||(p[0]=k=>l.value.creatorName=k),placeholder:t(o)("page.systemlog.login.form.creatorName"),onInput:y,"allow-input":x,onClear:g},null,8,["value","placeholder"])]),_:1},8,["label"]),e(n,{span:"24 s:12 m:6",label:t(o)("page.systemlog.login.status"),path:"status",class:"pr-24px"},{default:a(()=>[e(c,{filterable:"",clearable:"",value:l.value.status,"onUpdate:value":[p[1]||(p[1]=k=>l.value.status=k),m],placeholder:t(o)("page.systemlog.login.form.status"),options:t(M)(t(U)),onClear:g},null,8,["value","placeholder","options"])]),_:1},8,["label"]),e(n,{span:"24 s:12 m:6"},{default:a(()=>[e(u,{class:"w-full"},{default:a(()=>[e(i,{onClick:g},{icon:a(()=>[e(d,{class:"text-icon"})]),default:a(()=>[S(" "+C(t(o)("common.reset")),1)]),_:1}),e(i,{type:"primary",ghost:"",onClick:m},{icon:a(()=>[e(w,{class:"text-icon"})]),default:a(()=>[S(" "+C(t(o)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),le={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function re(_){return typeof _=="function"||Object.prototype.toString.call(_)==="[object Object]"&&!J(_)}const be=z({name:"logmanage_loginlog",__name:"index",setup(_){const h=G(),{columns:f,columnChecks:b,data:l,getData:y,loading:x,pagination:g,searchParams:m,resetSearchParams:N}=Y({apiFn:X,immediate:!0,apiParams:{page:1,pageSize:20,limit:20,creatorName:null,status:null,_t:new Date().getTime()},columns:()=>[{key:"creatorName",title:o("page.systemlog.login.creatorName"),align:"center",width:160,resizable:!0},{key:"operation",title:o("page.systemlog.login.operation"),width:140,align:"center",render:s=>{const n=s.operation==0?o("page.manage.common.loginStatus.login"):o("page.manage.common.loginStatus.logout");return e("span",null,[n])},resizable:!0},{key:"status",title:o("page.systemlog.login.status"),width:100,align:"center",render:s=>{s.status==null&&(s.status=0);const n={0:"error",1:"success",2:"warning",3:"info",4:"info",5:"error",6:"info",7:"error"},c=o(V[s.status].label);return e(W,{size:"small",type:n[s.status]},re(c)?c:{default:()=>[c]})},resizable:!0},{key:"ip",title:o("page.systemlog.login.ip"),width:160,align:"center",resizable:!0},{key:"userAgent",title:o("page.systemlog.login.userAgent"),minWidth:400,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"createDate",title:o("page.systemlog.login.createDate"),width:160,align:"center"}]}),r=K(),p=()=>{r.value.handleExportChange()};return(s,n)=>{const c=O,d=D,i=ne,w=L;return B(),Z("div",le,[e(se,{model:t(m),"onUpdate:model":n[0]||(n[0]=u=>H(m)?m.value=u:null),onReset:t(N),onSearch:t(y),ref_key:"searchRef",ref:r},null,8,["model","onReset","onSearch"]),e(w,{title:t(o)("page.systemlog.login.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":a(()=>[e(d,{type:"info",size:"small",ghost:"",onClick:p},{icon:a(()=>[e(c,{class:"text-icon"})]),default:a(()=>[S(" "+C(t(o)("common.export")),1)]),_:1})]),default:a(()=>[e(i,{columns:t(f),data:t(l),size:"small","flex-height":!t(h).isMobile,"scroll-x":t(f).reduce((u,v)=>u+v.width,0),loading:t(x),remote:"","row-key":u=>u.id,pagination:t(g),class:"sm:h-full"},null,8,["columns","data","flex-height","scroll-x","loading","row-key","pagination"])]),_:1},8,["title"])])}}});export{be as default};
