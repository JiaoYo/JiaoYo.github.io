import{d as G,o as f,e as y,f as t,aa as X,R as M,j as m,bl as he,b as U,bm as Ce,i as T,bn as oe,P as q,Q as Z,c as N,w as H,t as E,G as ve,bo as se,ae as j,A as Y,bp as Ie,a4 as _e,l as Ae,aG as Q,bq as P,g as O,br as pe,bs as me,ao as le,am as ge,h as be,a3 as Be,bt as ye,u as Te,r as Oe,bu as ue,bv as ze,Z as Me}from"./index-Cm1lm8Ic.js";import{d as Re}from"./debounce-CRKpNicL.js";import{f as De,a as Fe,b as He,c as Ne,d as Ve}from"./home-dtusslZr.js";import{b as We}from"./common-DxPm9aVX.js";import{u as we,i as Ee,a as je,b as Ge,c as Pe,d as Ye,e as qe,f as Ze,g as Qe,h as Ue,j as Je,k as Xe,l as Ke,m as et,n as tt,o as at,p as ot,q as st,r as lt,s as nt,L as te}from"./installCanvasRenderer-CyOrKSjT.js";import{i as rt}from"./install-CX03SWNg.js";import{_ as it}from"./NumberAnimation-CkZk-ZIL.js";const ct={class:"loader-overlay"},dt=G({__name:"loading",props:{color:{default:"#1890ff"}},setup(o){const e=o;return(_,i)=>(f(),y("div",ct,[t("div",{class:"loader",style:X({"--c":`no-repeat linear-gradient(${e.color} 0 0)`})},null,4)]))}}),ut=M(dt,[["__scopeId","data-v-c4fc24aa"]]),ft=o=>(q("data-v-4ea05f61"),o=o(),Z(),o),ht=["width","height"],vt=["fill","stroke","d"],_t=["stroke"],pt=ft(()=>t("path",{fill:"transparent",stroke:"{mergedColor[1]}",d:"M 5 20 L 5 10 L 12 3  L 60 3 L 68 10"},null,-1)),mt=["stroke","d"],gt={class:"dv-border-box-content"},bt=G({__name:"border-box-13",props:{color:{type:Array,default:()=>[]},backgroundColor:{type:String,default:"transparent"}},setup(o){const e=o,_=["#6586ec","#2cf7fe"],i=m(null),{width:c,height:r}=he(i,{width:0,height:0},{box:"border-box"}),u=U(()=>Ce(_,e.color));return(h,s)=>(f(),y("div",{class:"dv-border-box-13 dv-border-box",ref_key:"domRef",ref:i},[(f(),y("svg",{width:T(c),height:T(r),class:"dv-border-svg-container"},[t("path",{fill:o.backgroundColor,stroke:u.value[0],d:`
            M 5 20 L 5 10 L 12 3  L 60 3 L 68 10
            L ${T(c)-20} 10 L ${T(c)-5} 25
            L ${T(c)-5} ${T(r)-5} L 20 ${T(r)-5}
            L 5 ${T(r)-20} L 5 20
        `},null,8,vt),t("path",{fill:"transparent","stroke-width":"3","stroke-linecap":"round","stroke-dasharray":"10, 5",stroke:u.value[0],d:"M 16 9 L 61 9"},null,8,_t),pt,t("path",{fill:"transparent",stroke:u.value[1],d:`M ${T(c)-5} ${T(r)-30} L ${T(c)-5} ${T(r)-5} L ${T(c)-30} ${T(r)-5}`},null,8,mt)],8,ht)),t("div",gt,[oe(h.$slots,"default",{},void 0,!0)])],512))}}),yt=M(bt,[["__scopeId","data-v-4ea05f61"]]),$e=o=>(q("data-v-beef5fe6"),o=o(),Z(),o),wt={key:0,class:"item_title"},$t=$e(()=>t("div",{class:"zuo"},null,-1)),xt={class:"title-inner"},Lt=$e(()=>t("div",{class:"you"},null,-1)),kt=G({__name:"item-wrap",props:{title:{default:""}},setup(o){return(e,_)=>{const i=yt;return f(),N(i,null,{default:H(()=>[e.title!==""?(f(),y("div",wt,[$t,t("span",xt,"   "+E(e.title)+"   ",1),Lt])):ve("",!0),t("div",{class:se(e.title!==""?"item_title_content":"item_title_content_def")},[oe(e.$slots,"default",{},void 0,!0)],2)]),_:3})}}}),St=M(kt,[["__scopeId","data-v-beef5fe6"]]),xe=o=>(q("data-v-2dd4fe8a"),o=o(),Z(),o),Ct=["width","height"],It=["d"],At=xe(()=>t("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"1"},null,-1)),Bt=xe(()=>t("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"},null,-1)),Tt=[At,Bt],Ot=["fill"],zt=["dur","path"],Mt=["fill","points"],Rt=["stroke","href"],Dt=["stroke","href","mask"],Ft=["from","to","dur"],Ht={class:"border-box-content"},Nt={__name:"border-box-8",props:{color:{type:Array,default:()=>[]},dur:{type:Number,default:3},backgroundColor:{type:String,default:"transparent"},reverse:{type:Boolean,default:!1}},setup(o){const e=o,_=()=>"xxxx-xxxx-xxxx".replace(/[x]/g,()=>Math.floor(Math.random()*16).toString(16)),i=m(null),c=m(0),r=m(0),u=_(),h=`border-box-8-path-${u}`,s=`border-box-8-gradient-${u}`,a=`border-box-8-mask-${u}`,n=["#235fa7","#4fd2dd"],l=m([...n]),d=(b,L)=>{const $=[...b];return L.forEach((A,D)=>{A!==void 0&&($[D]=A)}),$},v=()=>{i.value&&(c.value=i.value.clientWidth,r.value=i.value.clientHeight)},p=U(()=>(c.value+r.value-5)*2),g=U(()=>e.reverse?`M 2.5, 2.5 L 2.5, ${r.value-2.5} L ${c.value-2.5}, ${r.value-2.5} L ${c.value-2.5}, 2.5 L 2.5, 2.5`:`M2.5, 2.5 L${c.value-2.5}, 2.5 L${c.value-2.5}, ${r.value-2.5} L2.5, ${r.value-2.5} L2.5, 2.5`);return j(()=>e.color,b=>{l.value=d(n,b)},{immediate:!0}),Y(()=>{v(),window.addEventListener("resize",v)}),(b,L)=>(f(),y("div",{class:"dv-border-box-8",ref_key:"containerRef",ref:i},[(f(),y("svg",{class:"dv-border-svg-container",width:c.value,height:r.value},[t("defs",null,[t("path",{id:h,d:g.value,fill:"transparent"},null,8,It),t("radialGradient",{id:s,cx:"50%",cy:"50%",r:"50%"},Tt),t("mask",{id:a},[t("circle",{cx:"0",cy:"0",r:"150",fill:`url(#${s})`},[t("animateMotion",{dur:`${o.dur}s`,path:g.value,rotate:"auto",repeatCount:"indefinite"},null,8,zt)],8,Ot)])]),t("polygon",{fill:o.backgroundColor,points:`5, 5 ${c.value-5}, 5 ${c.value-5} ${r.value-5} 5, ${r.value-5}`},null,8,Mt),t("use",{stroke:l.value[0],"stroke-width":"1",href:`#${h}`},null,8,Rt),t("use",{stroke:l.value[1],"stroke-width":"3",href:`#${h}`,mask:`url(#${a})`},[t("animate",{attributeName:"stroke-dasharray",from:`0, ${p.value}`,to:`${p.value}, 0`,dur:`${o.dur}s`,repeatCount:"indefinite"},null,8,Ft)],8,Dt)],8,Ct)),t("div",Ht,[oe(b.$slots,"default",{},void 0,!0)])],512))}},Vt=M(Nt,[["__scopeId","data-v-2dd4fe8a"]]);we(rt);we([Ee,je,Ge,Pe,Ye,qe,Ze,Qe,Ue,Je,Xe,Ke,et,tt,at,ot,st,lt]);function K(o,e={}){const _=Ie(),i=_e(),c=U(()=>i.darkMode),r=m(null),u={width:0,height:0},{width:h,height:s}=he(r,u);let a=null;const n=o(),{onRender:l=w=>{g()&&c.value},onUpdated:d=w=>{w.hideLoading()},onDestroy:v}=e;function p(){return r.value&&u.width>0&&u.height>0}function g(){return!!(r.value&&a)}async function b(w=()=>n){if(!g())return;const W=w(n,o);Object.assign(n,W),g()&&(a==null||a.clear()),a==null||a.setOption({...W,backgroundColor:"transparent"}),await(d==null?void 0:d(a))}async function L(w=()=>n){const W=w(n,o);a==null||a.setOption({...W,backgroundColor:"transparent"})}function $(w){a==null||a.setOption(w)}async function A(){if(!g()){const w=c.value?"dark":"light";await Q(),a=nt(r.value,w),a.setOption({...n,backgroundColor:"transparent"}),await(l==null?void 0:l(a))}}function D(){a==null||a.resize()}async function S(){a&&(await(v==null?void 0:v(a)),a==null||a.dispose(),a=null)}async function V(){await S(),await A(),await(d==null?void 0:d(a))}async function C(w,W){if(u.width=w,u.height=W,!p()){await S();return}g()&&D(),await A()}_.run(()=>{j([h,s],([w,W])=>{C(w,W)}),j(c,()=>{V()})}),Ae(()=>{S(),_.stop()});function J(){a==null||a.hideLoading()}return{domRef:r,updateOptions:b,updateOptionsAsync:L,setOptions:$,hideLoading:J}}const Wt=G({name:"LineChart",__name:"pieChart",props:{value:{type:Number,default:0}},setup(o){const e=o,_=[{max:70,color:"#4CAF50"},{max:90,color:"#FFB300"},{max:100,color:"#F44336"}],i=n=>(_.find(d=>n<=d.max)||_[_.length-1]).color,{domRef:c,updateOptionsAsync:r,hideLoading:u,updateOptions:h}=K(()=>({series:[{type:"pie",radius:["60%","78%"],avoidLabelOverlap:!1,clockWise:!0,animation:!0,itemStyle:{borderWidth:0,borderColor:"transparent",color:"",shadowColor:"",shadowBlur:0},hoverAnimation:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:[{value:0,label:{formatter:function(n){return n.value+"%"},position:"center",show:!0,textStyle:{fontSize:P(14),fontWeight:"bold",color:""}},itemStyle:{borderRadius:0}},{value:0,name:"invisible",itemStyle:{color:"#ccc",borderWidth:0,borderColor:"transparent"}}]}]}));async function s(){r(n=>{u(),n.series[0].data[0].value=e.value,n.series[0].data[1].value=100-e.value;const l=i(e.value);return n.series[0].itemStyle.color=l,n.series[0].itemStyle.shadowColor=l,n.series[0].label.color=l,n})}j(()=>e.value,async n=>{s()});async function a(){s()}return a(),(n,l)=>(f(),y("div",{ref_key:"domRef",ref:c,class:"chart"},null,512))}}),ae=M(Wt,[["__scopeId","data-v-59d0d00b"]]),R=o=>(q("data-v-72cfccb9"),o=o(),Z(),o),Et={class:"list"},jt={class:"item"},Gt={class:"item_info"},Pt={class:"item_info_text"},Yt=R(()=>t("path",{fill:"currentColor",d:"M34 21.08L30.86 8.43A2 2 0 0 0 28.94 7H7.06a2 2 0 0 0-1.93 1.47L2 21.08a1 1 0 0 0 0 .24V29a2 2 0 0 0 2 2h28a2 2 0 0 0 2-2v-7.69a1 1 0 0 0 0-.23M4 29v-7.56L7.06 9h21.87L32 21.44V29Z",class:"clr-i-outline clr-i-outline-path-1"},null,-1)),qt=R(()=>t("path",{fill:"currentColor",d:"M6 20h24v2H6z",class:"clr-i-outline clr-i-outline-path-2"},null,-1)),Zt=R(()=>t("path",{fill:"currentColor",d:"M26 24h4v2h-4z",class:"clr-i-outline clr-i-outline-path-3"},null,-1)),Qt=R(()=>t("path",{fill:"none",d:"M0 0h36v36H0z"},null,-1)),Ut=[Yt,qt,Zt,Qt],Jt=R(()=>t("div",{class:"title"},"磁盘",-1)),Xt={class:"item"},Kt={class:"item_info"},ea={class:"item_info_text"},ta=pe('<g fill="none" data-v-72cfccb9><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 28h38v14H5zM5 6h38v14H5z" data-v-72cfccb9></path><rect width="4" height="4" x="11" y="11" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="11" y="33" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="19" y="11" fill="currentColor" rx="2" data-v-72cfccb9></rect><rect width="4" height="4" x="19" y="33" fill="currentColor" rx="2" data-v-72cfccb9></rect><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M31 13h4m-4 22h4" data-v-72cfccb9></path></g>',1),aa=[ta],oa=R(()=>t("div",{class:"title"},"内存",-1)),sa={class:"item brBom"},la={class:"item_info"},na={class:"item_info_text"},ra=R(()=>t("path",{fill:"currentColor",d:"M15 9H9v6h6zm-2 4h-2v-2h2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2zm-4 6H7V7h10z"},null,-1)),ia=[ra],ca=R(()=>t("div",{class:"title"},"CPU",-1)),da={class:"item_Cardinfo"},ua=R(()=>t("div",{class:"title"},"日志接收总数",-1)),fa={class:"value"},ha={class:"logTotalClass"},va=R(()=>t("span",{class:"unit"},"条",-1)),_a={class:"item_Cardinfo"},pa=R(()=>t("div",{class:"title"},"日志源资产数",-1)),ma={class:"value"},ga={class:"logTotalClass"},ba=R(()=>t("span",{class:"unit"},"条",-1)),ya=G({__name:"left-top",props:{data:{type:Object,default:()=>({})},logInfo:{type:Object,default:()=>({logTotal:void 0,logSource:void 0})},key:{type:Number,default:""}},setup(o){const e=o,_=[{max:70,color:"#4CAF50"},{max:90,color:"#FFB300"},{max:100,color:"#F44336"}],i=c=>{const r=_.find(u=>c<=u.max);return r?r.color:"#CCCCCC"};return(c,r)=>{var s,a,n,l,d,v;const u=it,h=Vt;return f(),y("div",Et,[t("div",jt,[t("div",Gt,[t("div",Pt,[(f(),y("svg",{xmlns:"http://www.w3.org/2000/svg",style:X({color:i((s=e.data.disk)==null?void 0:s.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 36 36"},Ut,4)),Jt]),(f(),N(ae,{class:"pieChart",key:e.key,value:(a=e.data.disk)==null?void 0:a.replace("%","")},null,8,["value"]))])]),t("div",Xt,[t("div",Kt,[t("div",ea,[(f(),y("svg",{xmlns:"http://www.w3.org/2000/svg",style:X({color:i((n=e.data.mem)==null?void 0:n.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 48 48"},aa,4)),oa]),(f(),N(ae,{class:"pieChart",key:e.key,value:(l=e.data.mem)==null?void 0:l.replace("%","")},null,8,["value"]))])]),t("div",sa,[t("div",la,[t("div",na,[(f(),y("svg",{xmlns:"http://www.w3.org/2000/svg",style:X({color:i((d=e.data.cpu)==null?void 0:d.replace("%",""))}),width:"36",height:"36",viewBox:"0 0 24 24"},ia,4)),ca]),(f(),N(ae,{class:"pieChart",key:e.key,value:(v=e.data.cpu)==null?void 0:v.replace("%","")},null,8,["value"]))])]),O(h,{class:"itemCard",dur:60},{default:H(()=>[t("div",da,[ua,t("div",fa,[t("span",ha,[O(u,{ref:"numberAnimationInstRef",from:0,to:e.logInfo.logTotal||0},null,8,["to"])]),va])])]),_:1}),O(h,{class:"itemCard",dur:60},{default:H(()=>[t("div",_a,[pa,t("div",ma,[t("span",ga,[O(u,{ref:"numberAnimationInstRef",from:0,to:e.logInfo.logSource||0},null,8,["to"])]),ba])])]),_:1})])}}}),wa=M(ya,[["__scopeId","data-v-72cfccb9"]]),$a="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%3e%3cpath%20fill='%23fff'%20d='M2.5%2012c-.13%200-.25-.05-.35-.14l-2-1.93A.55.55%200%200%201%200%209.57V2.43c0-.13.06-.26.15-.36l2-1.93c.15-.14.36-.18.55-.1c.18.08.3.26.3.46v11c0%20.2-.12.38-.3.46c-.07.03-.13.04-.2.04m7-3.5c-.06%200-.13-.01-.19-.04A.5.5%200%200%201%209%208l-.01-4.06c0-.2.12-.39.31-.46c.19-.08.4-.03.54.11l1.67%201.7c.38.39.38%201.02-.01%201.41L9.85%208.35a.47.47%200%200%201-.35.15'%20/%3e%3cpath%20fill='none'%20stroke='%23fff'%20stroke-linecap='round'%20d='M2.5%202.5H6c.28%200%20.5.22.5.5v1m-4%205.5H6c.28%200%20.5-.22.5-.5V8M11%206H5'%20stroke-width='1'%20/%3e%3c/svg%3e",Le=o=>(q("data-v-265d0710"),o=o(),Z(),o),xa={class:"inner_right"},La=Le(()=>t("div",{class:"dibu"},null,-1)),ka={class:"info"},Sa={class:"alarmName"},Ca={class:"info_bottom"},Ia={class:"alarmLevel"},Aa={class:"time"},Ba={key:1,class:"nodata"},Ta=Le(()=>t("div",null,"暂无数据",-1)),Oa=[Ta],za=3e3,Ma=3,Ra={__name:"left-center",props:{data:{type:Array,default:()=>[]}},setup(o){const e=o,_=[{label:"一般",color:"#0091FF",value:0},{label:"低级",color:"#ffd600",value:1},{label:"中级",color:"#ffab00",value:2},{label:"高级",color:"#ff6d00",value:3},{label:"严重",color:"#dd2c00",value:4}],i=p=>_.find(g=>g.value===p)||_[0],c=m(!0),r=U(()=>c.value?[...e.data,...e.data]:e.data),u=m(!1),h=m(),s=m();let a=null;const n=()=>{u.value=!0,c.value=!1,clearInterval(a)},l=()=>{u.value=!1,c.value=!0,Q(()=>{d()})},d=()=>{clearInterval(a),a=setInterval(()=>{var A;if(u.value||!c.value)return;const p=h.value,g=s.value;if(!p||!g)return;const b=((A=g.children[0])==null?void 0:A.offsetHeight)||0,L=g.scrollHeight/2,$=p.scrollTop+b*Ma;$>=L?v($,()=>{p.scrollTop=$-L}):v($)},za)},v=(p,g)=>{const b=h.value,L=800,$=b.scrollTop,A=p-$,D=performance.now(),S=C=>C<.5?2*C*C:-1+(4-2*C)*C,V=C=>{const J=C-D,w=Math.min(J/L,1);b.scrollTop=$+A*S(w),w<1?requestAnimationFrame(V):g&&g()};requestAnimationFrame(V)};return Y(()=>{Q(()=>{d()})}),me(()=>{clearInterval(a)}),(p,g)=>(f(),y("div",{class:se(["left_boottom scroll-view",{"show-scrollbar":u.value}]),ref_key:"scrollViewRef",ref:h,onMouseenter:n,onMouseleave:l},[r.value.length>0?(f(),y("div",{key:0,ref_key:"listRef",ref:s,class:"left_boottom_list"},[(f(!0),y(le,null,ge(r.value,(b,L)=>(f(),y("div",{class:"left_boottom_item",key:L},[t("div",xa,[La,t("div",ka,[t("div",Sa,"告警名称："+E(b.aname),1),t("div",Ca,[t("div",Ia,[be(" 告警等级： "),t("span",{style:X({color:i(b.alevel).color,border:"1px solid "+i(b.alevel).color,padding:"0 5px",borderRadius:"5px"})},E(i(b.alevel).label),5)]),t("div",Aa,"时间："+E(b.dbtime),1)])])])]))),128))],512)):(f(),y("div",Ba,Oa))],34))}},Da=M(Ra,[["__scopeId","data-v-265d0710"]]),Fa=G({name:"LineChart",__name:"loglineChart",props:{data:{type:Array,default:[]}},setup(o){const e=o,{domRef:_,updateOptions:i,updateOptionsAsync:c,hideLoading:r}=K(()=>({xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:P(12)}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.2)"}},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:P(12)}},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"},valueFormatter:function(s){return(s+""!="undefined"?s:"--")+"条"}},grid:{left:"5%",right:"5%",bottom:"0%",containLabel:!0},dataZoom:[{type:"inside",start:0,show:!1,end:100}],series:[{color:"rgb(9, 202, 243)",type:"line",lineStyle:{width:1,normal:{color:"rgb(9, 202, 243)",shadowBlur:3,shadowColor:"rgba(9, 202, 243,0.5)",shadowOffsetY:8}},areaStyle:{color:new te(0,0,0,1,[{offset:0,color:"rgba(9, 202, 243,0.2)"},{offset:1,color:"rgba(9, 202, 243,0)"}],!1),shadowColor:"rgba(9, 202, 243,0.5)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0}],graphic:{elements:[{type:"text",left:"center",top:"middle",silent:!0,invisible:!0,style:{fill:"#999",text:"暂无数据",fontSize:16}}]}}));async function u(){await new Promise(s=>{setTimeout(s,1e3)}),i(s=>(r(),e.data&&e.data.length>0?(s.graphic.elements[0].invisible=!0,s.xAxis.data=e.data.map(a=>a.date),s.series[0].data=e.data.map(a=>a.dailycount)):s.graphic.elements[0].invisible=!1,s))}async function h(){u()}return j(()=>e.data,()=>{c(s=>(r(),e.data&&(s.xAxis.data=e.data.map(a=>a.date),s.series[0].data=e.data.map(a=>[a.date,a.dailycount])),s))}),h(),(s,a)=>(f(),y("div",{ref_key:"domRef",ref:_,class:"chart"},null,512))}}),Ha=M(Fa,[["__scopeId","data-v-12d3543e"]]),Na=G({name:"LineChart",__name:"auditlineChart",props:{data:{type:Array,default:[]}},setup(o){const e=o,{domRef:_,updateOptions:i,updateOptionsAsync:c,hideLoading:r}=K(()=>({xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:P(12)}},yAxis:{type:"value",splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.2)"}},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:P(12)}},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"},valueFormatter:function(s){return(s+""!="undefined"?s:"--")+"条"}},grid:{left:"5%",right:"5%",bottom:"0%",containLabel:!0},dataZoom:[{type:"inside",start:0,show:!1,end:100}],series:[{color:"rgb(9, 202, 243)",type:"line",lineStyle:{width:1,normal:{color:"rgb(9, 202, 243)",shadowBlur:3,shadowColor:"rgba(9, 202, 243,0.5)",shadowOffsetY:8}},areaStyle:{color:new te(0,0,0,1,[{offset:0,color:"rgba(9, 202, 243,0.2)"},{offset:1,color:"rgba(9, 202, 243,0)"}],!1),shadowColor:"rgba(9, 202, 243,0.5)",shadowBlur:20},emphasis:{focus:"series"},data:[],connectNulls:!0}],graphic:{elements:[{type:"text",left:"center",top:"middle",invisible:!0,silent:!0,style:{fill:"#999",text:"暂无数据",fontSize:16}}]}}));async function u(){await new Promise(s=>{setTimeout(s,1e3)}),i(s=>(r(),e.data&&e.data.length>0?(s.graphic.elements[0].invisible=!0,s.xAxis.data=e.data.map(a=>a.logname),s.series[0].data=e.data.map(a=>[a.logname,a.count])):s.graphic.elements[0].invisible=!1,s))}async function h(){u()}return j(()=>e.data,()=>{c(s=>(e.data&&(s.xAxis.data=e.data.map(a=>a.logname),s.series[0].data=e.data.map(a=>[a.logname,a.count])),s))}),h(),(s,a)=>(f(),y("div",{ref_key:"domRef",ref:_,class:"chart"},null,512))}}),Va=M(Na,[["__scopeId","data-v-02f02114"]]),Wa=G({name:"LineChart",__name:"assetsType",props:{data:{type:Object,default:()=>({})}},setup(o){const e=o;j(()=>e.data,async l=>{s()});const _=Be(),i=m(null),{domRef:c,updateOptionsAsync:r,hideLoading:u,updateOptions:h}=K(()=>({backgroundColor:"#0f1c3f",tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",borderWidth:1,backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",textStyle:{color:"#FFF"}},legend:{show:!1},grid:{left:"5%",right:"5%",bottom:"2%",top:"5%",containLabel:!0},series:[{type:"pie",selectedMode:"single",radius:[0,"30%"],label:{position:"inner",fontSize:P(14),color:"#f2f3f5",fontWeight:"bold"},labelLine:{show:!1},itemStyle:{shadowBlur:8,shadowColor:"rgba(255, 255, 255, 0.2)",borderRadius:6},data:[]},{type:"pie",radius:["45%","60%"],labelLine:{length:30,lineStyle:{color:"#aaa"}},label:{color:"#fff",fontSize:P(14),fontWeight:"bold"},itemStyle:{borderRadius:6,shadowBlur:8,shadowOffsetX:0,shadowColor:"rgba(255, 255, 255, 0.2)",color:l=>{const d=[["#00c6ff","#0072ff"],["#f77062","#fe5196"],["#00f2fe","#4facfe"],["#43e97b","#38f9d7"],["#fa709a","#fee140"],["#7b4397","#dc2430"],["#1f4037","#99f2c8"]],v=d[l.dataIndex%d.length];return new te(0,0,1,1,[{offset:0,color:v[0]},{offset:1,color:v[1]}])}},data:[]}],graphic:{elements:[{type:"text",left:"center",top:"middle",silent:!0,invisible:!0,style:{fill:"#999",text:"暂无数据",fontSize:16}}]},animationDuration:1e3,animationEasing:"cubicOut"}));async function s(){r(l=>{if(u(),JSON.stringify(e.data)!=="{}"){l.graphic.elements[0].invisible=!0,l.series[0].data=Object.keys(e.data).map(v=>({name:v,value:Object.values(e.data[v]).reduce((p,g)=>p+g,0)}));const d=[];Object.keys(e.data).map(v=>e.data[v]).forEach(v=>{for(let p in v)v.hasOwnProperty(p)&&d.push({name:p,value:v[p]})}),l.series[0].radius=["0%","30%"],l.series[1].radius=["45%","60%"],l.series[1].data=d}else l.series[0].radius=["0%","0%"],l.series[1].radius=["0%","0%"],l.graphic.elements[0].invisible=!1;return l})}function a(){h((l,d)=>(d(),l))}async function n(){s()}return j(()=>_.locale,()=>{a()}),n(),Y(()=>{i.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),ye(()=>{i.value!==null&&(clearInterval(i.value),i.value=null)}),(l,d)=>(f(),y("div",{ref_key:"domRef",ref:c,class:"chart"},null,512))}}),Ea=M(Wa,[["__scopeId","data-v-44d1a04b"]]),ke=o=>(q("data-v-5631caf6"),o=o(),Z(),o),ja=["aria-label"],Ga={class:"inner_right"},Pa=ke(()=>t("div",{class:"dibu"},null,-1)),Ya={class:"info"},qa={class:"info_left"},Za={class:"logName"},Qa={class:"scname"},Ua={class:"status"},Ja={key:1,class:"nodata"},Xa=ke(()=>t("div",null,"暂无数据",-1)),Ka=[Xa],eo=3e3,to=3,ao={__name:"right-top",props:{data:{type:Array,default:()=>[]}},setup(o){const e=o,_=m(!1),i=m(),c=m();let r=null;const u=m(!0),h=U(()=>u.value&&e.data.length>3?[...e.data,...e.data]:e.data),s=()=>{_.value=!0,u.value=!1,clearInterval(r)},a=()=>{_.value=!1,u.value=!0,Q(()=>{n()})},n=()=>{clearInterval(r),e.data.length!==0&&(r=setInterval(()=>{var L;if(_.value||!u.value)return;const d=i.value,v=c.value;if(!d||!v)return;const p=((L=v.children[0])==null?void 0:L.offsetHeight)||0,g=v.scrollHeight/2,b=d.scrollTop+p*to;b>=g?l(b,()=>{d.scrollTop=b-g}):l(b)},eo))},l=(d,v)=>{const p=i.value,g=800,b=p.scrollTop,L=d-b,$=performance.now(),A=S=>S<.5?2*S*S:-1+(4-2*S)*S,D=S=>{const V=S-$,C=Math.min(V/g,1);p.scrollTop=b+L*A(C),C<1?requestAnimationFrame(D):v&&v()};requestAnimationFrame(D)};return j(()=>e.data,d=>{d.length>0&&Q(()=>{n()})},{immediate:!0}),Y(()=>{Q(()=>{n()})}),me(()=>{clearInterval(r)}),(d,v)=>(f(),y("div",{class:se(["left_boottom scroll-view",{"show-scrollbar":_.value}]),ref_key:"scrollViewRef",ref:i,onMouseenter:s,onMouseleave:a},[h.value.length>0?(f(),y("div",{key:0,ref_key:"listRef",ref:c,class:"left_boottom_list"},[(f(!0),y(le,null,ge(h.value,(p,g)=>(f(),y("div",{class:"left_boottom_item",key:g,"aria-label":`项目${g%e.data.length+1}: ${p.type}, 状态: ${p.enable===0?"正常":"异常"}`,tabindex:"0"},[t("div",Ga,[Pa,t("div",Ya,[t("div",qa,[t("div",Za,E(p.type),1),t("div",Qa,E(p.scname),1)]),t("div",Ua,E(p.enable==0?"🟢":"🔴"),1)])])],8,ja))),128))],512)):(f(),y("div",Ja,Ka))],34))}},oo=M(ao,[["__scopeId","data-v-5631caf6"]]),so=G({name:"LineChart",__name:"barChart",props:{data:{type:Array,default:[]}},setup(o){const e=o,_=m(null),i=Date.now();new Date(i).setHours(23,59,59,999);const{domRef:c,updateOptions:r,updateOptionsAsync:u,hideLoading:h}=K(()=>({tooltip:{trigger:"item",backgroundColor:"rgba(0,0,0,.8)",borderColor:"#384a86",borderWidth:2,textStyle:{color:"#FFF"},valueFormatter:function(n){return(n+""!="undefined"?n:"--")+"条"}},xAxis:{data:[],axisLine:{lineStyle:{color:"#B4B4B4"}},axisTick:{show:!1},axisLabel:{color:"#B4B4B4",fontWeight:500,fontSize:P(12)}},yAxis:[{splitLine:{show:!0,lineStyle:{color:"rgba(31,99,163,.3)"}},axisLine:{lineStyle:{color:"#B4B4B4"}},axisLabel:{formatter:"{value}",fontSize:P(12),color:"#B4B4B4",fontWeight:500}}],grid:{left:"3%",right:"10%",bottom:"3%",top:"5%",containLabel:!0},series:[{type:"bar",barMaxWidth:30,itemStyle:{borderRadius:10,color:new te(0,0,0,1,[{offset:0,color:"#956FD4"},{offset:1,color:"#3EACE5"}])},data:[]}],graphic:{elements:[{type:"text",left:"center",top:"middle",silent:!0,invisible:!0,style:{fill:"#999",text:"暂无数据",fontSize:16}}]}}));async function s(){await new Promise(n=>{setTimeout(n,1e3)}),r(n=>(h(),e.data&&e.data.length>0?(n.graphic.elements[0].invisible=!0,n.xAxis.data=e.data.map(l=>l.logname),n.series[0].data=e.data.map(l=>[l.logname,l.count])):n.graphic.elements[0].invisible=!1,n))}j(()=>e.data,n=>{u(l=>(e.data&&(l.xAxis.data=e.data.map(d=>d.logname),l.series[0].data=e.data.map(d=>[d.logname,d.count])),l))});async function a(){await s()}return Y(()=>{c.value=_.value}),a(),(n,l)=>(f(),y("div",{ref_key:"chartDom",ref:_,class:"chart"},null,512))}}),fe=M(so,[["__scopeId","data-v-208d8254"]]),lo=o=>(q("data-v-ec050911"),o=o(),Z(),o),no={class:"content_wrap"},ro={class:"d-flex jc-center title_wrap"},io=pe('<div class="zuojuxing" data-v-ec050911></div><div class="youjuxing" data-v-ec050911></div><div class="guang" data-v-ec050911></div><div class="d-flex jc-center" data-v-ec050911><div class="title" data-v-ec050911><span class="title-text" data-v-ec050911>日志审计可视化</span></div></div>',4),co={class:"top_Info"},uo=lo(()=>t("div",{class:"left"},null,-1)),fo={class:"right"},ho={class:"setting_icon"},vo=["src"],_o={class:"index-box"},po={class:"content_left"},mo={class:"content_center"},go={class:"content_right"},bo=G({name:"bigscreen",__name:"index",setup(o){const e=Te(),_=_e(),i=Oe({dateDay:"",dateYear:"",dateWeek:"",timing:null}),c=["周日","周一","周二","周三","周四","周五","周六"];(()=>{i.timing=setInterval(()=>{i.dateDay=ue().format("YYYY-MM-DD hh : mm : ss"),i.dateWeek=c[ue().day()]},1e3)})();const u=[{label:"近一天",value:0},{label:"近一周",value:1},{label:"近一月",value:2},{label:"近半年",value:3},{label:"近一年",value:4}],h=m(2),s=m(),a=async()=>{const{data:x,error:B}=await We({pageSize:20});B||(s.value=x)},n=m(),l=async()=>{const{data:x,error:B}=await De({dateType:h.value});B||(n.value=x)},d=m(),v=m(),p=m(),g=m(),b=m(),L=async()=>{const{data:x,error:B}=await Fe({dateType:h.value,lsid:p.value,ctype:b.value});B||(v.value=Number(x.total),h.value==3||h.value==4?d.value=x.data.map(z=>(z.date=z.dateStr,z)).sort((z,k)=>{let F=new Date(z.date),I=new Date(k.date);return F-I}):d.value=x.data.sort((z,k)=>{let F=new Date(z.date),I=new Date(k.date);return F-I}))},$=m(),A=async()=>{const{data:x,error:B}=await He();if(!B){$.value=x,$.value.logSoursceList.sort((k,F)=>k.enable-F.enable);const z=new Set;x.logSoursceList.forEach(k=>{const F=`${k.logsoudev},${k.type}`;z.add(F)}),g.value=Array.from(z).map(k=>{const[F,I]=k.split(",");return{logsoudev:parseInt(F,10),type:I}})}},D=m(),S=async()=>{const{data:x,error:B}=await Ne();B||(D.value=x)},V=m(),C=async()=>{const{data:x,error:B}=await Ve({dateType:h.value});B||(V.value=x,console.log(V.value,"securityNumsList.value"))},J=()=>{var x;(x=window.$dialog)==null||x.info({title:"退出登录",content:"确定要退出登录吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{const{data:B,error:z}=await ze();z||(e.clearInfo(),window.location.reload())}})},w=m(0),W=Re(()=>{w.value++},500),ne=()=>{W()},re=m(),ie=m(),ee=m(!1);Y(async()=>{try{ee.value=!0,a(),l(),L(),A(),S(),C(),setTimeout(()=>{ee.value=!1},2e3)}catch{ee.value=!1}re.value=setInterval(()=>{S(),l(),C()},1e3*1*60),ie.value=setInterval(()=>{A(),L()},1e3*5)});const Se=x=>{h.value=x,L(),l(),C()};return Y(()=>{_.themeScheme!="dark"&&_.toggleThemeScheme(),window.addEventListener("resize",ne)}),ye(()=>{clearInterval(re.value),clearInterval(ie.value),window.removeEventListener("resize",ne)}),(x,B)=>{const z=Me,k=St,F=ut;return f(),y(le,null,[t("div",no,[t("div",ro,[io,t("div",co,[uo,t("div",fo,[O(z,{size:"small",class:"select",value:h.value,"onUpdate:value":[B[0]||(B[0]=I=>h.value=I),Se],options:u,style:{width:"100px"}},null,8,["value"]),be(" "+E(i.dateYear)+" "+E(i.dateWeek)+" "+E(i.dateDay)+" ",1),t("div",ho,[t("img",{src:T($a),alt:"",onClick:J},null,8,vo)])])])]),t("div",_o,[t("div",po,[O(k,{class:"content_left-top",title:"系统信息"},{default:H(()=>{var I,ce,de;return[(f(),N(wa,{data:(I=$.value)==null?void 0:I.systemStatus,key:w.value,logInfo:{logTotal:v.value,logSource:(de=(ce=$.value)==null?void 0:ce.logSourceDevAsset)==null?void 0:de.aunum}},null,8,["data","logInfo"]))]}),_:1}),O(k,{class:"content_left-center",title:"系统告警"},{default:H(()=>[O(Da,{data:s.value},null,8,["data"])]),_:1}),O(k,{class:"content_left-bottom",title:"日志源日志数量"},{default:H(()=>[(f(),N(fe,{data:D.value,key:w.value},null,8,["data"]))]),_:1})]),t("div",mo,[O(k,{title:"日志源资产类型",class:"content_center-top"},{default:H(()=>{var I;return[(f(),N(Ea,{data:(I=$.value)==null?void 0:I.logSoursceAssetType,key:w.value},null,8,["data"]))]}),_:1}),O(k,{title:"日志采集趋势",class:"content_center-bottom"},{default:H(()=>[(f(),N(Ha,{data:d.value,key:w.value},null,8,["data"]))]),_:1})]),t("div",go,[O(k,{title:"日志源接收状态",class:"content_right-top"},{default:H(()=>{var I;return[O(oo,{data:(I=$.value)==null?void 0:I.logSoursceList},null,8,["data"])]}),_:1}),O(k,{class:"content_right-center",title:"审计告警数量趋势"},{default:H(()=>[(f(),N(Va,{data:n.value,key:w.value},null,8,["data"]))]),_:1}),O(k,{class:"content_right-bottom",title:"安全事件类别数量"},{default:H(()=>[(f(),N(fe,{data:V.value,key:w.value},null,8,["data"]))]),_:1})])])]),ee.value?(f(),N(F,{key:0})):ve("",!0)],64)}}}),Co=M(bo,[["__scopeId","data-v-ec050911"]]);export{Co as default};
