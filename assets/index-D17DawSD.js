import{_ as _e}from"./table-column-setting.vue_vue_type_script_setup_true_lang-BlVNmerJ.js";import{_ as me}from"./round-delete-D-_gcuU9.js";import{_ as ve}from"./round-add-xlQYjvjV.js";import{d as V,av as A,D as te,A as L,a as be,ax as ne,at as ge,aJ as ae,cp as we,cq as ke,c as R,o as N,w as l,f as e,a3 as xe,M as E,h as d,H as oe,bf as ie,J as G,B as U,g as s,t as I,$ as z,a4 as he,L as Ce,au as ye,a2 as se,cr as Ne,e as T,a6 as $e,b as F,aO as W,a_ as B,N as je,S as Se,cs as Ue,W as de,aI as ze,s as De,F as K,b3 as Te,b4 as Pe,aK as M,ay as Ie,I as O,aL as Fe,ct as Y,cu as Re,aQ as We}from"./index-01hyoC1y.js";import{u as Be,a as Me}from"./table-BMW6PgLk.js";import{_ as H,a as Oe}from"./Grid-PO4pV7Qi.js";import{_ as ue}from"./FormItemGridItem-Ddu3CU7K.js";import{_ as Ve}from"./round-search-CLmP8aC9.js";import{_ as Ge}from"./round-refresh-CVCEexzc.js";import{h as Z}from"./permission-BHHChgcD.js";import{N as ee}from"./Popconfirm-Lve2YCRm.js";const qe=V({name:"OperateDrawer",__name:"operate-drawer",props:A({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:A(["submitted"],["update:visible"]),setup(x,{emit:D}){const g=D,a=x,o=te(b());function b(){return{tname:"",weight:void 0}}async function S(){Object.assign(o,b()),a.operateType==="edit"&&a.rowData&&Object.assign(o,a.rowData)}const{formRef:$,validate:w,restoreValidation:t}=L(),h={tname:{type:"string",required:!0,trigger:["blur","change"],message:"请输入"},weight:{type:"number",required:!0,trigger:["blur","change"],message:"请输入"}},u=be(()=>({add:"新增权重",edit:"修改权重"})[a.operateType]),f=ne(x,"visible");ge(f,()=>{f.value&&(S(),t())});function r(){f.value=!1}const v=ae.debounce(async()=>{var _,p;if(await w(),a.operateType==="edit"){const{data:C,error:k}=await we([o]);k||(r(),g("submitted"),(_=window.$message)==null||_.success("修改成功"))}else{const{data:C,error:k}=await ke([{...o}]);k||(r(),g("submitted"),(p=window.$message)==null||p.success("添加成功"))}},1e3,{leading:!0,trailing:!1});return(_,p)=>{const C=ue,k=H,n=E,c=xe,P=G,m=he;return N(),R(m,{show:f.value,"onUpdate:show":p[2]||(p[2]=i=>f.value=i),title:u.value,preset:"card",class:"w-500px"},{footer:l(()=>[e(P,{justify:"end",size:16},{default:l(()=>[e(d(U),{onClick:r},{default:l(()=>[s(I(d(z)("common.cancel")),1)]),_:1}),e(d(U),{type:"primary",onClick:d(v)},{default:l(()=>[s(I(d(z)("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),default:l(()=>[e(c,{class:"pr-20px"},{default:l(()=>[e(n,{ref_key:"formRef",ref:$,model:o,rules:h,"label-placement":"left","label-width":120},{default:l(()=>[e(k,{responsive:"screen","item-responsive":""},{default:l(()=>[e(C,{span:"24 m:24",label:"类型名称",path:"tname"},{default:l(()=>[e(d(oe),{value:o.tname,"onUpdate:value":p[0]||(p[0]=i=>o.tname=i),placeholder:"请输入"},null,8,["value"])]),_:1}),e(C,{span:"24 m:24",label:"权重",path:"weight"},{default:l(()=>[e(d(ie),{value:o.weight,"onUpdate:value":p[1]||(p[1]=i=>o.weight=i),placeholder:"请输入",min:1,max:1e5,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}}),Ke=V({name:"FormSearch",__name:"form-search",props:{model:{required:!0},modelModifiers:{}},emits:A(["reset","search"],["update:model"]),setup(x,{emit:D}){const g=D,{formRef:a,restoreValidation:o}=L(),b=ne(x,"model"),S=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10}];function $(){b.value.fuzzy="",g("search")}async function w(){await o(),g("reset")}async function t(){g("search")}return(h,u)=>{const f=oe,r=ue,v=ye,_=Ge,p=U,C=Ve,k=G,n=H,c=E,P=se;return N(),R(P,{bordered:!1,size:"small",class:"card-wrapper"},{default:l(()=>[e(c,{ref_key:"formRef",ref:a,model:b.value,"label-placement":"left","label-width":100,"show-feedback":!1,onKeyup:Ce(t,["enter"])},{default:l(()=>[e(n,{responsive:"screen","item-responsive":"","x-gap":16,"y-gap":16},{default:l(()=>[e(r,{span:"24 s:12 m:6",label:"类型名称",path:"fuzzy"},{default:l(()=>[e(f,{clearable:"",value:b.value.fuzzy,"onUpdate:value":u[0]||(u[0]=m=>b.value.fuzzy=m),placeholder:"请输入类型名称",onClear:$},null,8,["value"])]),_:1}),e(r,{span:"24 s:12 m:4",label:"权重",path:"weight"},{default:l(()=>[e(v,{clearable:"",filterable:"",value:b.value.weight,"onUpdate:value":[u[1]||(u[1]=m=>b.value.weight=m),t],placeholder:"请选择",options:S},null,8,["value"])]),_:1}),e(r,{span:"24  s:12 m:6",class:"pr-24px"},{default:l(()=>[e(k,{class:"w-full"},{default:l(()=>[e(p,{onClick:w},{icon:l(()=>[e(_,{class:"text-icon"})]),default:l(()=>[s(" "+I(d(z)("common.reset")),1)]),_:1}),e(p,{type:"primary",ghost:"",onClick:t},{icon:l(()=>[e(C,{class:"text-icon"})]),default:l(()=>[s(" "+I(d(z)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),Ae={class:"container-row"},Le={class:"config-box"},Ee={class:"config-box"},He={class:"config-box"},Je={class:"config-box"},Qe={class:"config-box"},Xe=V({__name:"prjSetting",setup(x){const{formRef:D,validate:g}=L(),a=te({id:void 0,dlevel1w:void 0,dlevel2w:void 0,dlevel3w:void 0,dlevel1c:void 0,dlevel2c:void 0,wlevel1w:void 0,wlevel2w:void 0,wlevel3w:void 0,wlevel1c:void 0,wlevel2c:void 0,plevel1w:void 0,plevel2w:void 0,plevel3w:void 0,plevel1c:void 0,plevel2c:void 0,clockin0:void 0,clockin1:void 0,devcheck:void 0,mproject:void 0,ipplantb:void 0,fproject:void 0,onsitept:void 0,mnetwork:void 0,pjbackup:void 0,filcheck:void 0}),o={type:"number",required:!0,message:"不能为空",trigger:["blur","change"]},b={dlevel1w:o,dlevel2w:o,dlevel3w:o,dlevel1c:o,dlevel2c:o,wlevel1w:o,wlevel2w:o,wlevel3w:o,wlevel1c:o,wlevel2c:o,plevel1w:o,plevel2w:o,plevel3w:o,plevel1c:o,plevel2c:o,clockin0:o,clockin1:o,devcheck:o,mproject:o,ipplantb:o,fproject:o,onsitept:o,mnetwork:o,pjbackup:o,filcheck:o},S=async()=>{const{data:w,error:t}=await Ue();t||Object.assign(a,w)},$=ae.debounce(async()=>{var t;await g();const{error:w}=await Ne(a);w||(t=window.$message)==null||t.success("保存成功")},1e3,{leading:!0,trailing:!1});return S(),(w,t)=>{const h=$e,u=U,f=ie,r=Se,v=je,_=Oe,p=H,C=G,k=E;return N(),R(k,{ref_key:"formRef",ref:D,model:a,rules:b,"label-width":"200","label-placement":"left"},{default:l(()=>[T("div",Ae,[T("div",Le,[e(h,null,{default:l(()=>t[12]||(t[12]=[s("日报配置")])),_:1,__:[12]}),e(p,{cols:1,"x-gap":8,"y-gap":6},{default:l(()=>[(N(),F(W,null,B([["合格权重分","dlevel1w"],["良好权重分","dlevel2w"],["优秀权重分","dlevel3w"],["字符数低于此数值认为合格","dlevel1c"],[`字符数高于此数值认为优秀
字符数低于此数值认为良好`,"dlevel2c"]],n=>e(_,{key:n[1]},{default:l(()=>[e(v,{label:n[0],path:n[1]},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:c=>a[n[1]]--,disabled:a[n[1]]<=0},{default:l(()=>t[13]||(t[13]=[s("-")])),_:2,__:[13]},1032,["onClick","disabled"]),e(f,{value:a[n[1]],"onUpdate:value":c=>a[n[1]]=c,"show-button":!1,precision:0,min:0,max:1e5},null,8,["value","onUpdate:value"]),e(u,{onClick:c=>a[n[1]]++,disabled:a[n[1]]==1e5},{default:l(()=>t[14]||(t[14]=[s("+")])),_:2,__:[14]},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1032,["label","path"])]),_:2},1024)),64))]),_:1})]),T("div",Ee,[e(h,null,{default:l(()=>t[15]||(t[15]=[s("周报配置")])),_:1,__:[15]}),e(p,{cols:1,"x-gap":8,"y-gap":6},{default:l(()=>[(N(),F(W,null,B([["合格权重分","wlevel1w"],["良好权重分","wlevel2w"],["优秀权重分","wlevel3w"],["字符数低于此数值认为合格","wlevel1c"],[`字符数高于此数值认为优秀
字符数低于此数值认为良好`,"wlevel2c"]],n=>e(_,{key:n[1]},{default:l(()=>[e(v,{label:n[0],path:n[1]},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:c=>a[n[1]]--,disabled:a[n[1]]<=0},{default:l(()=>t[16]||(t[16]=[s("-")])),_:2,__:[16]},1032,["onClick","disabled"]),e(f,{value:a[n[1]],"onUpdate:value":c=>a[n[1]]=c,"show-button":!1,precision:0,min:0,max:1e5},null,8,["value","onUpdate:value"]),e(u,{onClick:c=>a[n[1]]++,disabled:a[n[1]]==1e5},{default:l(()=>t[17]||(t[17]=[s("+")])),_:2,__:[17]},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1032,["label","path"])]),_:2},1024)),64))]),_:1})]),T("div",He,[e(h,null,{default:l(()=>t[18]||(t[18]=[s("项目总结配置")])),_:1,__:[18]}),e(p,{cols:1,"x-gap":8,"y-gap":6},{default:l(()=>[(N(),F(W,null,B([["合格权重分","plevel1w"],["良好权重分","plevel2w"],["优秀权重分","plevel3w"],["字符数低于此数值认为合格","plevel1c"],[`字符数高于此数值认为优秀
字符数低于此数值认为良好`,"plevel2c"]],n=>e(_,{key:n[1]},{default:l(()=>[e(v,{label:n[0],path:n[1]},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:c=>a[n[1]]--,disabled:a[n[1]]<=0},{default:l(()=>t[19]||(t[19]=[s("-")])),_:2,__:[19]},1032,["onClick","disabled"]),e(f,{value:a[n[1]],"onUpdate:value":c=>a[n[1]]=c,"show-button":!1,precision:0,min:0,max:1e5},null,8,["value","onUpdate:value"]),e(u,{onClick:c=>a[n[1]]++,disabled:a[n[1]]==1e5},{default:l(()=>t[20]||(t[20]=[s("+")])),_:2,__:[20]},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1032,["label","path"])]),_:2},1024)),64))]),_:1})]),T("div",Je,[e(h,null,{default:l(()=>t[21]||(t[21]=[s("打卡权重配置")])),_:1,__:[21]}),e(p,{cols:1,"x-gap":8,"y-gap":6},{default:l(()=>[e(_,null,{default:l(()=>[e(v,{label:"正常打卡权重分",path:"clockin0"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:t[0]||(t[0]=n=>a.clockin0--),disabled:a.clockin0<=0},{default:l(()=>t[22]||(t[22]=[s("-")])),_:1,__:[22]},8,["disabled"]),e(f,{value:a.clockin0,"onUpdate:value":t[1]||(t[1]=n=>a.clockin0=n),"show-button":!1,precision:0,min:0,max:1e5},null,8,["value"]),e(u,{onClick:t[2]||(t[2]=n=>a.clockin0++),disabled:a.clockin0==1e5},{default:l(()=>t[23]||(t[23]=[s("+")])),_:1,__:[23]},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(v,{label:"异常打卡权重分",path:"clockin1"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:t[3]||(t[3]=n=>a.clockin1--)},{default:l(()=>t[24]||(t[24]=[s("-")])),_:1,__:[24]}),e(f,{value:a.clockin1,"onUpdate:value":t[4]||(t[4]=n=>a.clockin1=n),"show-button":!1,precision:0,max:1e5},null,8,["value"]),e(u,{onClick:t[5]||(t[5]=n=>a.clockin1++),disabled:a.clockin0==1e5},{default:l(()=>t[25]||(t[25]=[s("+")])),_:1,__:[25]},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(v,{label:"出发打卡权重分",path:"clockin2"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:t[6]||(t[6]=n=>a.clockin2--)},{default:l(()=>t[26]||(t[26]=[s("-")])),_:1,__:[26]}),e(f,{value:a.clockin2,"onUpdate:value":t[7]||(t[7]=n=>a.clockin2=n),"show-button":!1,precision:0,max:1e5},null,8,["value"]),e(u,{onClick:t[8]||(t[8]=n=>a.clockin2++),disabled:a.clockin0==1e5},{default:l(()=>t[27]||(t[27]=[s("+")])),_:1,__:[27]},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(v,{label:"到达打卡权重分",path:"clockin3"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:t[9]||(t[9]=n=>a.clockin3--)},{default:l(()=>t[28]||(t[28]=[s("-")])),_:1,__:[28]}),e(f,{value:a.clockin3,"onUpdate:value":t[10]||(t[10]=n=>a.clockin3=n),"show-button":!1,precision:0,max:1e5},null,8,["value"]),e(u,{onClick:t[11]||(t[11]=n=>a.clockin3++),disabled:a.clockin0==1e5},{default:l(()=>t[29]||(t[29]=[s("+")])),_:1,__:[29]},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})])]),T("div",Qe,[e(h,null,{default:l(()=>t[30]||(t[30]=[s("文件配置")])),_:1,__:[30]}),e(p,{cols:4,"x-gap":8,"y-gap":6},{default:l(()=>[(N(),F(W,null,B([["设备清点权重分","devcheck"],["项目图纸权重分","mproject"],["IP地址规划表权重分","ipplantb"],["工程文件权重分","fproject"],["现场照片权重分","onsitept"],["网络通讯图权重分","mnetwork"],["组态画面工程备份权重分","pjbackup"],["验收文件权重分","filcheck"]],n=>e(_,{key:n[1]},{default:l(()=>[e(v,{label:n[0],path:n[1]},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{onClick:c=>a[n[1]]--,disabled:a[n[1]]<=0},{default:l(()=>t[31]||(t[31]=[s("-")])),_:2,__:[31]},1032,["onClick","disabled"]),e(f,{value:a[n[1]],"onUpdate:value":c=>a[n[1]]=c,"show-button":!1,precision:0,min:0,max:1e5},null,8,["value","onUpdate:value"]),e(u,{onClick:c=>a[n[1]]++,disabled:a[n[1]]==1e5},{default:l(()=>t[32]||(t[32]=[s("+")])),_:2,__:[32]},1032,["onClick","disabled"])]),_:2},1024)]),_:2},1032,["label","path"])]),_:2},1024)),64))]),_:1})]),e(v,null,{default:l(()=>[e(C,{class:"w-100%",justify:"center"},{default:l(()=>[e(u,{type:"default",onClick:S},{default:l(()=>t[33]||(t[33]=[s("刷新")])),_:1,__:[33]}),e(u,{type:"info",onClick:d($)},{default:l(()=>t[34]||(t[34]=[s("保存")])),_:1,__:[34]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model"])}}}),Ye=de(Xe,[["__scopeId","data-v-0462b86e"]]),Ze={class:"flex flex-col gap-4",style:{height:"600px"}};function le(x){return typeof x=="function"||Object.prototype.toString.call(x)==="[object Object]"&&!We(x)}const el=V({name:"manage_weight",__name:"index",setup(x){ze();const{columns:D,columnChecks:g,data:a,getData:o,loading:b,mobilePagination:S,searchParams:$}=Be({showTotal:!0,apiFn:Re,apiParams:{page:1,pageSize:20,limit:20,weight:void 0,fuzzy:"",_t:new Date().getTime()},columns:()=>[{type:"selection",align:"center",width:48},{key:"tname",title:"类型名称",align:"center",width:120},{key:"weight",title:"权重",align:"center",width:120},{key:"username",title:"创建人",align:"center",width:120},{key:"dbtime",title:"创建时间",align:"center",width:120},{key:"operate",title:z("common.operate"),align:"center",width:Z("project:Weight:update")&&Z("project:Weight:delete")?180:0,fixed:"right",render:m=>{let i;return e("div",{class:"flex-center gap-8px"},[O(e(U,{type:"primary",ghost:!0,size:"small",onClick:()=>k(m.id)},le(i=z("common.edit"))?i:{default:()=>[i]}),[[K("no-auth"),"project:Weight:update"]]),e(ee,{onPositiveClick:()=>C(m.id)},{default:()=>z("common.confirmDelete"),trigger:()=>{let y;return O(e(U,{type:"error",ghost:!0,size:"small"},le(y=z("common.delete"))?y:{default:()=>[y]}),[[K("no-auth"),"project:Weight:delete"]])}})])}}]}),{drawerVisible:w,operateType:t,editingData:h,handleAdd:u,handleEdit:f,checkedRowKeys:r,onBatchDeleted:v,onDeleted:_}=Me(a,o);async function p(){console.log(r.value),n(r.value.join(","),m=>{v()})}async function C(m){const{data:i,error:y}=await Y(m);y||_()}function k(m){f(m)}async function n(m,i){const{data:y,error:q}=await Y(m);if(!q)i&&i(y);else return!1}const c=()=>{o()},P=De(window.innerHeight-423);return(m,i)=>{const y=G,q=ve,re=me,ce=_e,pe=Ie,J=se,Q=Pe,fe=Te,X=K("no-auth");return N(),F("div",Ze,[e(J,{bordered:!1,size:"small",class:"flex-1 flex flex-col"},{default:l(()=>[e(fe,{type:"segment",animated:"",class:"flex-1 flex flex-col"},{default:l(()=>[e(Q,{name:"0",tab:"调试任务权重",class:"flex-1 flex flex-col"},{default:l(()=>[e(Ke,{model:d($),"onUpdate:model":i[0]||(i[0]=j=>M($)?$.value=j:null),onReset:c,onSearch:d(o)},null,8,["model","onSearch"]),e(J,{bordered:!1,size:"small",class:"flex-1 flex flex-col mt-2"},{header:l(()=>[e(y,{align:"center",wrap:""},{default:l(()=>i[4]||(i[4]=[T("div",null,"调试任务权重列表",-1)])),_:1,__:[4]})]),"header-extra":l(()=>[e(y,{align:"center",wrap:"",justify:"end"},{default:l(()=>[O((N(),R(d(U),{onClick:d(u),size:"small",ghost:"",type:"primary"},{icon:l(()=>[e(q,{class:"text-icon"})]),default:l(()=>[i[5]||(i[5]=s(" "+I("新增")))]),_:1,__:[5]},8,["onClick"])),[[X,"project:Weight:insert"]]),e(d(ee),{onPositiveClick:p},{trigger:l(()=>[O((N(),R(d(U),{size:"small",ghost:"",type:"error",disabled:d(r).length==0},{icon:l(()=>[e(re,{class:Fe(["text-icon",{"animate-spin":d(b)}])},null,8,["class"])]),default:l(()=>[i[6]||(i[6]=s(" "+I("批量删除")))]),_:1,__:[6]},8,["disabled"])),[[X,"project:Weight:delete"]])]),default:l(()=>[i[7]||(i[7]=s(" 确定要删除选中的权重吗？ "))]),_:1,__:[7]}),e(ce,{columns:d(g),"onUpdate:columns":i[1]||(i[1]=j=>M(g)?g.value=j:null)},null,8,["columns"])]),_:1})]),default:l(()=>[e(pe,{"checked-row-keys":d(r),"onUpdate:checkedRowKeys":i[2]||(i[2]=j=>M(r)?r.value=j:null),columns:d(D),data:d(a),size:"small","flex-height":!0,remote:"",loading:d(b),"row-key":j=>j.id,pagination:d(S),"max-height":P.value,"min-height":P.value},null,8,["checked-row-keys","columns","data","loading","row-key","pagination","max-height","min-height"]),e(qe,{visible:d(w),"onUpdate:visible":i[3]||(i[3]=j=>M(w)?w.value=j:null),onSubmitted:d(o),"operate-type":d(t),"row-data":d(h)},null,8,["visible","onSubmitted","operate-type","row-data"])]),_:1})]),_:1}),e(Q,{name:"1",tab:"行为规范权重",class:"flex-1"},{default:l(()=>[e(Ye)]),_:1})]),_:1})]),_:1})])}}}),pl=de(el,[["__scopeId","data-v-1ab5904f"]]);export{pl as default};
