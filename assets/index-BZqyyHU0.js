import{_ as B}from"./export-oh2-I3ZA.js";import{d as C,q as D,s as E,o as S,c as M,w as a,g as o,i as t,$ as e,Z as R,dt as q,h as N,t as z,a2 as U,B as O,E as j,D as P,ad as T,a4 as $,aq as L,j as A,e as F,ag as G,ah as V}from"./index-7Q9xZuwa.js";import{d as I,e as Z}from"./system-log-Di2MRGoN.js";import{u as H}from"./table-G6_8Abm0.js";import{_ as J}from"./round-search-BQOA9W6m.js";import{_ as K}from"./round-refresh-DJiiF7wv.js";import{_ as Q}from"./FormItemGridItem-DYTXkfwP.js";import{_ as W}from"./Grid-CRtcNhSF.js";import{_ as X}from"./DataTable-n3fP4Loy.js";import"./Forward-BzUEeUAa.js";const Y=C({name:"OptionlogSearch",__name:"optionlog-search",props:{model:{required:!0},modelModifiers:{}},emits:D(["reset","search"],["update:model"]),setup(r,{expose:h,emit:d}){const y=d,p=E(r,"model");function g(){y("reset")}function f(){y("search")}async function b(){const{data:c,error:m}=await I({status:p.value.status});if(!m){let u=c,_=new Blob([u],{type:"application/vnd.ms-excel"}),n=new Date().getTime()+".xls",l=window.webkitURL.createObjectURL(_),s=document.createElement("a");s.href=l,s.download=n,document.body.appendChild(s),s.click(),s.remove()}}return h({handleExportChange:b}),(c,m)=>{const u=U,_=Q,n=K,l=O,s=J,x=j,w=W,k=P,i=T;return S(),M(i,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[o(k,{model:p.value,"label-placement":"left","label-width":80,"show-feedback":!1},{default:a(()=>[o(w,{responsive:"screen","item-responsive":""},{default:a(()=>[o(_,{span:"24 s:12 m:6",label:t(e)("page.systemlog.option.status"),path:"status",class:"pr-24px"},{default:a(()=>[o(u,{filterable:"",clearable:"",value:p.value.status,"onUpdate:value":[m[0]||(m[0]=v=>p.value.status=v),f],placeholder:t(e)("page.systemlog.option.form.status"),options:t(R)(t(q)),onClear:g},null,8,["value","placeholder","options"])]),_:1},8,["label"]),o(_,{span:"24 s:12 m:6"},{default:a(()=>[o(x,{class:"w-full"},{default:a(()=>[o(l,{onClick:g},{icon:a(()=>[o(n,{class:"text-icon"})]),default:a(()=>[N(" "+z(t(e)("common.reset")),1)]),_:1}),o(l,{type:"primary",ghost:"",onClick:f},{icon:a(()=>[o(s,{class:"text-icon"})]),default:a(()=>[N(" "+z(t(e)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),ee={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function te(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!V(r)}const ue=C({name:"logmanage_optionlog",__name:"index",setup(r){const h=$(),{columns:d,columnChecks:y,data:p,getData:g,loading:f,pagination:b,searchParams:c,resetSearchParams:m}=H({apiFn:Z,immediate:!0,apiParams:{page:1,pageSize:20,limit:20,status:null,_t:new Date().getTime()},columns:()=>[{key:"creatorName",title:e("page.systemlog.option.creatorName"),align:"center",width:160,resizable:!0},{key:"operation",title:e("page.systemlog.option.operation"),width:140,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestUri",title:e("page.systemlog.option.requestUri"),width:160,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestMethod",title:e("page.systemlog.option.requestMethod"),width:100,align:"center"},{key:"requestParams",title:e("page.systemlog.option.requestParams"),width:140,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestTime",title:e("page.systemlog.option.requestTime"),width:100,align:"center",resizable:!0},{key:"status",title:e("page.systemlog.option.status"),width:100,align:"center",render:n=>{n.status==null&&(n.status=0);const l={0:"error",1:"primary"},s=e(q[n.status].label);return o(L,{size:"small",type:l[n.status]},te(s)?s:{default:()=>[s]})},resizable:!0},{key:"ip",title:e("page.systemlog.option.ip"),width:160,align:"center",resizable:!0},{key:"userAgent",title:e("page.systemlog.option.userAgent"),align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"createDate",title:e("page.systemlog.option.createDate"),width:160,align:"center"}]}),u=A(),_=()=>{u.value.handleExportChange()};return(n,l)=>{const s=B,x=O,w=X,k=T;return S(),F("div",ee,[o(Y,{model:t(c),"onUpdate:model":l[0]||(l[0]=i=>G(c)?c.value=i:null),onReset:t(m),onSearch:t(g),ref_key:"searchRef",ref:u},null,8,["model","onReset","onSearch"]),o(k,{title:t(e)("page.systemlog.option.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":a(()=>[o(x,{type:"info",size:"small",ghost:"",onClick:_},{icon:a(()=>[o(s,{class:"text-icon"})]),default:a(()=>[N(" "+z(t(e)("common.export")),1)]),_:1})]),default:a(()=>[o(w,{columns:t(d),data:t(p),size:"small","flex-height":!t(h).isMobile,"scroll-x":t(d).reduce((i,v)=>i+v.width,0),loading:t(f),remote:"","row-key":i=>i.id,pagination:t(b),class:"sm:h-full"},null,8,["columns","data","flex-height","scroll-x","loading","row-key","pagination"])]),_:1},8,["title"])])}}});export{ue as default};
