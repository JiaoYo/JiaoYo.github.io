import{_ as B}from"./export-DwQa_Uz4.js";import{d as z,n as M,p as D,o as C,c as E,w as a,g as t,i as o,$ as e,ah as R,bE as S,h as v,t as N,ae as U,B as T,I as j,J as P,a0 as q,T as $,aM as L,j as A,e as F,ak as G,al as V}from"./index-CI2HX52s.js";import{d as I,e as W}from"./system-log-D1dTcXXL.js";import{u as J}from"./table-CL5JRpix.js";import{_ as H}from"./round-search-DiRf-ajt.js";import{_ as K}from"./round-refresh-Bs77RvlJ.js";import{_ as Q}from"./FormItemGridItem-H5-g3JS3.js";import{_ as X}from"./Grid-BjU2Fuoz.js";import{_ as Y}from"./DataTable-iODjs3SB.js";import"./RadioGroup-A-fOClpI.js";import"./Forward-CE5gwjyU.js";const Z=z({name:"OptionlogSearch",__name:"optionlog-search",props:{model:{required:!0},modelModifiers:{}},emits:M(["reset","search"],["update:model"]),setup(i,{expose:f,emit:h}){const y=h,r=D(i,"model");function d(){y("reset")}function g(){y("search")}async function b(){const{data:p,error:c}=await I({status:r.value.status});if(!c){let m=p,u=new Blob([m],{type:"application/vnd.ms-excel"}),n=new Date().getTime()+".xls",l=window.webkitURL.createObjectURL(u),s=document.createElement("a");s.href=l,s.download=n,document.body.appendChild(s),s.click(),s.remove()}}return f({handleExportChange:b}),(p,c)=>{const m=U,u=Q,n=K,l=T,s=H,x=j,k=X,w=P,_=q;return C(),E(_,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[t(w,{model:r.value,"label-placement":"left","label-width":80,"show-feedback":!1},{default:a(()=>[t(k,{responsive:"screen","item-responsive":""},{default:a(()=>[t(u,{span:"24 s:12 m:6",label:o(e)("page.systemlog.option.status"),path:"status",class:"pr-24px"},{default:a(()=>[t(m,{filterable:"",clearable:"",value:r.value.status,"onUpdate:value":[c[0]||(c[0]=O=>r.value.status=O),g],placeholder:o(e)("page.systemlog.option.form.status"),options:o(R)(o(S)),onClear:d},null,8,["value","placeholder","options"])]),_:1},8,["label"]),t(u,{span:"24 s:12 m:6"},{default:a(()=>[t(x,{class:"w-full"},{default:a(()=>[t(l,{onClick:d},{icon:a(()=>[t(n,{class:"text-icon"})]),default:a(()=>[v(" "+N(o(e)("common.reset")),1)]),_:1}),t(l,{type:"primary",ghost:"",onClick:g},{icon:a(()=>[t(s,{class:"text-icon"})]),default:a(()=>[v(" "+N(o(e)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}}),ee={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function te(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!V(i)}const _e=z({name:"logmanage_optionlog",__name:"index",setup(i){const f=$(),{columns:h,columnChecks:y,data:r,getData:d,loading:g,pagination:b,searchParams:p,resetSearchParams:c}=J({apiFn:W,apiParams:{page:1,pageSize:20,limit:20,status:null,_t:new Date().getTime()},columns:()=>[{key:"creatorName",title:e("page.systemlog.option.creatorName"),align:"center",width:120,resizable:!0},{key:"operation",title:e("page.systemlog.option.operation"),width:140,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestUri",title:e("page.systemlog.option.requestUri"),minWidth:240,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestMethod",title:e("page.systemlog.option.requestMethod"),width:100,align:"center",resizable:!0},{key:"requestParams",title:e("page.systemlog.option.requestParams"),minWidth:240,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestTime",title:e("page.systemlog.option.requestTime"),width:100,align:"center",resizable:!0},{key:"status",title:e("page.systemlog.option.status"),width:100,align:"center",render:n=>{n.status==null&&(n.status=0);const l={0:"error",1:"primary"},s=e(S[n.status].label);return t(L,{size:"small",type:l[n.status]},te(s)?s:{default:()=>[s]})},resizable:!0},{key:"ip",title:e("page.systemlog.option.ip"),width:140,align:"center",resizable:!0},{key:"userAgent",title:e("page.systemlog.option.userAgent"),width:200,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"createDate",title:e("page.systemlog.option.createDate"),width:200,align:"center"}]}),m=A(),u=()=>{m.value.handleExportChange()};return(n,l)=>{const s=B,x=T,k=Y,w=q;return C(),F("div",ee,[t(Z,{model:o(p),"onUpdate:model":l[0]||(l[0]=_=>G(p)?p.value=_:null),onReset:o(c),onSearch:o(d),ref_key:"searchRef",ref:m},null,8,["model","onReset","onSearch"]),t(w,{title:o(e)("page.systemlog.option.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":a(()=>[t(x,{type:"info",size:"small",ghost:"",onClick:u},{icon:a(()=>[t(s,{class:"text-icon"})]),default:a(()=>[v(" "+N(o(e)("common.export")),1)]),_:1})]),default:a(()=>[t(k,{columns:o(h),data:o(r),size:"small","flex-height":!o(f).isMobile,"scroll-x":"",loading:o(g),remote:"","row-key":_=>_.id,pagination:o(b),class:"sm:h-full"},null,8,["columns","data","flex-height","loading","row-key","pagination"])]),_:1},8,["title"])])}}});export{_e as default};
