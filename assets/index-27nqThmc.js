import{d as S,p as M,aa as k,Y as C,j as A,v as P,ai as B,o as N,e as U,S as q,n as W,al as H,q as K,a$ as g,c as j,w as a,g as t,h as i,t as D,i as d,$ as Y,A as Z,aE as J,O as R,aF as Q,B as X,P as ee,a5 as $,ap as E,f as F}from"./index-BZcT6LXK.js";import{_ as ae,f as te}from"./outline-data-exploration-C04lMV6u.js";import{u as ne}from"./table-DBTTPLl8.js";import{u as oe}from"./echarts-CSnmTxs_.js";import{_ as se}from"./round-search-0YfkO0T4.js";import{_ as le}from"./DatePicker-BoI_WVIC.js";import{_ as re}from"./FormItemGridItem-gx7YDHPP.js";import{_ as ie}from"./Grid-BCBgadvB.js";import{_ as ce,a as ue}from"./DescriptionsItem-EzyABwxw.js";const me=S({name:"LineChart",__name:"line-chart",props:{data:{required:!0},dataModifiers:{}},emits:["update:data"],setup(y){const c=M(y,"data");k(()=>c.value,e=>{n()});const h=C(),u=A(null),{domRef:v,updateOptions:x}=oe(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(e){return e+"[兆瓦]"}},legend:{data:["预测功率","实际功率"]},grid:{left:"2%",right:"3%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} [兆瓦]"}},series:[{color:"#e90445",name:"预测功率",type:"line",emphasis:{focus:"series"},data:[]},{color:"#addb0b",name:"实际功率",type:"line",emphasis:{focus:"series"},label:{show:!0,position:"top",formatter:function(e){return e.value+"[兆瓦]"}},data:[]}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]}));async function n(){await new Promise(e=>{setTimeout(e,1e3)}),x(e=>(e.xAxis.data=c.value.map(o=>o.time),e.series[0].data=c.value.map(o=>o.actual),e.series[1].data=c.value.map(o=>o.forecast),e))}function l(){x((e,o)=>{const s=o();return e.legend.data=s.legend.data,e.series[0].name=s.series[0].name,e.series[1].name=s.series[1].name,e})}async function p(){n()}return k(()=>h.locale,()=>{l()}),p(),P(()=>{u.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),B(()=>{u.value!==null&&(clearInterval(u.value),u.value=null)}),(e,o)=>(N(),U("div",{ref_key:"domRef",ref:v,class:"h-520px overflow-hidden"},null,512))}}),de=q(me,[["__scopeId","data-v-5a23f566"]]),pe=S({name:"AlarmSearch",__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:W(["reset","search","exportData"],["update:model"]),setup(y,{emit:c}){H({1:"电场1",2:"电场2",3:"电场3"});const h=c,u=C(),{formRef:v,restoreValidation:x}=K(),n=M(y,"model");n.value.errorType="1",n.value.time=A([Number(g(5,Date.now()-864e5*6)),Number(g(5,Date.now()+864e5))]),n.value.startTime=g(0,Date.now()-864e5*6),n.value.endTime=g(0,Date.now()+864e5);async function l(o,s){n.value.startTime=o[0],n.value.endTime=o[1]}async function p(){h("search")}const e=()=>{h("exportData")};return(o,s)=>{const _=le,r=re,m=J,w=R,b=Q,f=se,L=X,V=ae,z=R,G=ie,I=ee,O=$;return N(),j(O,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[t(I,{ref_key:"formRef",ref:v,model:n.value,"label-placement":"left","label-width":d(u).locale=="en-US"?120:80,"show-feedback":!1,onKeyup:Z(p,["enter"])},{default:a(()=>[t(G,{"y-gap":16,responsive:"screen","item-responsive":""},{default:a(()=>[t(r,{span:"24 s:12 m:6",label:"时间",path:"startTime",class:"pr-24px"},{default:a(()=>[t(_,{value:n.value.time,"onUpdate:value":s[0]||(s[0]=T=>n.value.time=T),type:"daterange","value-format":"yyyy-MM-dd",style:{width:"100%"},"onUpdate:formattedValue":l},null,8,["value"])]),_:1}),t(r,{span:"24 s:12 m:4",label:"",path:"errorType"},{default:a(()=>[t(b,{value:n.value.errorType,"onUpdate:value":s[1]||(s[1]=T=>n.value.errorType=T),name:"radiogroup"},{default:a(()=>[t(w,null,{default:a(()=>[t(m,{value:"0"},{default:a(()=>[i("短期误差")]),_:1}),t(m,{value:"1"},{default:a(()=>[i("超短期误差")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(r,{span:"24 s:12 m:6",class:"pr-24px"},{default:a(()=>[t(z,{class:"w-full"},{default:a(()=>[t(L,{type:"primary",ghost:"",onClick:p},{icon:a(()=>[t(f,{class:"text-icon"})]),default:a(()=>[i(" "+D(d(Y)("common.search")),1)]),_:1}),t(L,{onClick:e},{icon:a(()=>[t(V,{class:"text-icon"})]),default:a(()=>[i(" "+D("导出"))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-width"])]),_:1})}}}),_e={class:"min-h-500px flex-col-stretch gap-16px lt-sm:overflow-auto"},fe=F("span",{class:"font-size-16px"},"误差统计",-1),De=S({name:"statisticalanalysis_powererrorstatistics",__name:"index",setup(y){C();const{columns:c,columnChecks:h,data:u,getData:v,loading:x,mobilePagination:n,searchParams:l,resetSearchParams:p}=ne({apiFn:te,apiParams:{page:1,pageSize:20,limit:20,startTime:g(0,Date.now()-864e5*6)||null,endTime:g(0,Date.now()+864e5)||null,level:null,devtype:null,status:null,_t:new Date().getTime()},immediate:!1,showTotal:!0,columns:()=>[{key:"devname",title:"名称",align:"center",width:160},{key:"reoetits",title:"最大值",align:"center",width:160},{key:"content",title:"最小值",align:"center",minWidth:200},{key:"describe",title:"平均值",align:"center",minWidth:200}]});let e=[{time:"2024-07-18 06:00",actual:125,forecast:345},{time:"2024-07-18 08:00",actual:305,forecast:445},{time:"2024-07-18 10:00",actual:225,forecast:336},{time:"2024-07-18 12:00",actual:195,forecast:245},{time:"2024-07-18 14:00",actual:265,forecast:305},{time:"2024-07-18 16:00",actual:263,forecast:294},{time:"2024-07-18 18:00",actual:305,forecast:285},{time:"2024-07-18 20:00",actual:235,forecast:305},{time:"2024-07-18 22:00",actual:235,forecast:325}];const o=()=>{};k(()=>l.errorType,_=>{_=="1"?e=[{time:"2024-07-18 06:00",actual:125,forecast:345},{time:"2024-07-18 08:00",actual:305,forecast:445},{time:"2024-07-18 10:00",actual:225,forecast:336},{time:"2024-07-18 12:00",actual:195,forecast:245},{time:"2024-07-18 14:00",actual:265,forecast:305},{time:"2024-07-18 16:00",actual:263,forecast:294},{time:"2024-07-18 18:00",actual:305,forecast:285},{time:"2024-07-18 20:00",actual:235,forecast:305},{time:"2024-07-18 22:00",actual:235,forecast:325}]:e=[]});const s=_=>{_.detail.key};return P(()=>{window.addEventListener("localStorageChanged",s)}),B(()=>{window.removeEventListener("localStorageChanged",s)}),(_,r)=>{const m=ce,w=ue,b=$;return N(),U("div",_e,[t(pe,{model:d(l),"onUpdate:model":r[0]||(r[0]=f=>E(l)?l.value=f:null),onReset:d(p),onSearch:d(v),onExportData:o},null,8,["model","onReset","onSearch"]),t(b,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:a(()=>[F("span",null,D(d(l).errorType=="1"?"超短期功率误差曲线":"短期功率误差曲线"),1)]),default:a(()=>[t(de,{data:d(e),"onUpdate:data":r[1]||(r[1]=f=>E(e)?e.value=f:e=f)},null,8,["data"]),t(w,{"label-placement":"left",bordered:"",column:4,"label-style":{width:"200px",fontWeight:"bold",textAlign:"center",background:"#fafafa",borderRadius:"2px 0 0 2px",paddingLeft:"8px"}},{header:a(()=>[fe]),default:a(()=>[t(m,{label:"均方根误差(RMSE)"},{default:a(()=>[i(" 26 ")]),_:1}),t(m,{label:"平均绝对误差(MAE)"},{default:a(()=>[i(" 24 ")]),_:1}),t(m,{label:"相关性系数"},{default:a(()=>[i(" 32 ")]),_:1}),t(m,{label:"开机容量平均误差"},{default:a(()=>[i(" 32 ")]),_:1})]),_:1})]),_:1})])}}});export{De as default};
