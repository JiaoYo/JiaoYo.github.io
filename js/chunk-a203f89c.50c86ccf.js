(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a203f89c"],{"20db":function(e,t,a){"use strict";a("795b")},"2a1f":function(e,t,a){"use strict";a.r(t);a("34ef"),a("28a5"),a("6b54"),a("4917");
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(r){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},r=function(e,t,a){this.data=e,this.size=e.length,this.type=t,this.encoding=a},i=a.prototype,l=r.prototype,s=e.FileReaderSync,n=function(e){this.code=this[this.name=e]},o="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=o.length,u=e.URL||e.webkitURL||e,m=u.createObjectURL,d=u.revokeObjectURL,p=u,h=e.btoa,f=e.atob,g=e.ArrayBuffer,b=e.Uint8Array,w=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;r.fake=l.fake=!0;while(c--)n.prototype[o[c]]=c+1;return u.createObjectURL||(p=e.URL=function(e){var t,a=document.createElementNS("http://www.w3.org/1999/xhtml","a");return a.href=e,"origin"in a||("data:"===a.protocol.toLowerCase()?a.origin=null:(t=e.match(w),a.origin=t&&t[1])),a}),p.createObjectURL=function(e){var t,a=e.type;return null===a&&(a="application/octet-stream"),e instanceof r?(t="data:"+a,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):m?m.call(u,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&d&&d.call(u,e)},i.append=function(e){var a=this.data;if(b&&(e instanceof g||e instanceof b)){for(var i="",l=new b(e),o=0,c=l.length;o<c;o++)i+=String.fromCharCode(l[o]);a.push(i)}else if("Blob"===t(e)||"File"===t(e)){if(!s)throw new n("NOT_READABLE_ERR");var u=new s;a.push(u.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&f?a.push(f(e.data)):"URI"===e.encoding?a.push(decodeURIComponent(e.data)):"raw"===e.encoding&&a.push(e.data):("string"!==typeof e&&(e+=""),a.push(unescape(encodeURIComponent(e))))},i.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},i.toString=function(){return"[object BlobBuilder]"},l.slice=function(e,t,a){var i=arguments.length;return i<3&&(a=null),new r(this.data.slice(e,i>1?t:this.data.length),a,this.encoding)},l.toString=function(){return"[object Blob]"},l.close=function(){this.size=0,delete this.data},a}(e);e.Blob=function(e,a){var r=a&&a.type||"",i=new t;if(e)for(var l=0,s=e.length;l<s;l++)Uint8Array&&e[l]instanceof Uint8Array?i.append(e[l].buffer):i.append(e[l]);var n=i.getBlob(r);return!n.slice&&n.webkitSlice&&(n.slice=n.webkitSlice),n};var a=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=a(new e.Blob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||void 0)},"376b":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("6b54"),a("34ef"),a("ac6a");function r(e,t){t&&(e+=1462);var a=Date.parse(e);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function i(e,t){for(var a={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},l=0;l!=e.length;++l)for(var s=0;s!=e[l].length;++s){i.s.r>l&&(i.s.r=l),i.s.c>s&&(i.s.c=s),i.e.r<l&&(i.e.r=l),i.e.c<s&&(i.e.c=s);var n={v:e[l][s]};if(null!=n.v){var o=XLSX.utils.encode_cell({c:s,r:l});"number"===typeof n.v?n.t="n":"boolean"===typeof n.v?n.t="b":n.v instanceof Date?(n.t="n",n.z=XLSX.SSF._table[14],n.v=r(n.v)):n.t="s",a[o]=n}}return i.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(i)),a}function l(){if(!(this instanceof l))return new l;this.SheetNames=[],this.Sheets={}}function s(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),r=0;r!=e.length;++r)a[r]=255&e.charCodeAt(r);return t}function n(e,t,a){var r=t;r.unshift(e);for(var n="SheetJS",o=new l,c=i(r),u=r.map((function(e){return e.map((function(e){return null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length+5}:{wch:e.toString().length+5}}))})),m=u[0],d=1;d<u.length;d++)for(var p=0;p<u[d].length;p++)m[p]["wch"]<u[d][p]["wch"]&&(m[p]["wch"]=u[d][p]["wch"]);c["!cols"]=m,o.SheetNames.push(n),o.Sheets[n]=c;var h=XLSX.write(o,{bookType:"xlsx",bookSST:!1,type:"binary"}),f=a||"列表";saveAs(new Blob([s(h)],{type:"application/octet-stream"}),f+".xlsx")}a("2a1f"),a("0fd4"),a("1447")},"795b":function(e,t,a){},b57b:function(e,t,a){"use strict";a.r(t);a("7f7f");var r,i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"aui-card--fill",attrs:{shadow:"never"}},[t("div",{staticClass:"mod-info__tprjinfo"},[t("el-form",{attrs:{inline:!0,"label-width":"en-US"===e.$i18n.locale?"100px":"70px"},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querySearch()}}},[t("el-form-item",{attrs:{label:e.$t("historyQuery.project")}},[t("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.handlePrjScroll,expression:"handlePrjScroll"}],staticStyle:{width:"180px"},attrs:{clearable:"",size:"small",placeholder:e.$t("select")},on:{"visible-change":e.handlePrjVisibleChange,change:function(t){e.gwsnPage=1,e.getGwsnList()}},model:{value:e.dataForm.prjName,callback:function(t){e.$set(e.dataForm,"prjName",t)},expression:"dataForm.prjName"}},[[t("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"99","background-color":"#fff"}},[t("el-input",{ref:"prjInput",staticStyle:{width:"98%","margin-left":"1%","margin-top":"5px","margin-bottom":"5px"},attrs:{size:"small",clearable:"",placeholder:e.$t("gwsn.pleaseEnterSearchContent")},model:{value:e.prjSearch,callback:function(t){e.prjSearch=t},expression:"prjSearch"}})],1),t("div",{staticStyle:{width:"100%",height:"42px"}}),e._l(e.prjNameList,(function(a){return t("el-option",{key:a.id,attrs:{label:a.prjName,value:a.id,disabled:!!a.hasOwnProperty("disabled")&&a.disabled}},[t("span",{style:{display:"inline-block",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",color:-1==a.id?"#E6A23C":"",width:"100%"},attrs:{title:a.prjName}},[e._v("\n                                "+e._s(a.prjName)+"\n                            ")])])}))]],2)],1),t("el-form-item",{attrs:{label:e.$t("historyQuery.gwsn")}},[t("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.handleGwsnScroll,expression:"handleGwsnScroll"}],staticStyle:{width:"180px"},attrs:{clearable:"",size:"small",placeholder:e.$t("select")},on:{"visible-change":e.handleGwsnVisibleChange,change:e.handlechannelDevice},model:{value:e.dataForm.gwsn,callback:function(t){e.$set(e.dataForm,"gwsn",t)},expression:"dataForm.gwsn"}},[[t("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"99","background-color":"#fff"}},[t("el-input",{ref:"gwsnInput",staticStyle:{width:"98%","margin-left":"1%","margin-top":"5px","margin-bottom":"5px"},attrs:{size:"small",clearable:"",placeholder:e.$t("gwsn.pleaseEnterSearchContent")},model:{value:e.gwsnSearch,callback:function(t){e.gwsnSearch=t},expression:"gwsnSearch"}})],1),t("div",{staticStyle:{width:"100%",height:"42px"}}),e._l(e.gwsnDataList,(function(a){return t("el-option",{key:a.sn,attrs:{label:a.sn,value:a.sn,disabled:!!a.hasOwnProperty("disabled")&&a.disabled}},[t("span",{staticStyle:{width:"calc(100%- 210px)",display:"inline-block","text-align":"left",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:a.sn}},[e._v(e._s(a.sn))]),t("span",{staticStyle:{color:"#8492a6","font-size":"13px",display:"inline-block","margin-left":"10px",width:"200px","text-align":"right",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:a.gwDesc}},[e._v(e._s(a.gwDesc||e.$t("no")))])])}))]],2)],1),t("el-form-item",{attrs:{label:e.$t("attribute.alarmtype")}},[t("el-select",{staticStyle:{width:"120px"},attrs:{size:"small",filterable:"",clearable:"",placeholder:e.$t("select")},on:{change:e.querySearch},model:{value:e.dataForm.alarmtype,callback:function(t){e.$set(e.dataForm,"alarmtype",t)},expression:"dataForm.alarmtype"}},e._l(e.alarmtypeList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),0===e.ptype||1===e.ptype?t("el-form-item",{attrs:{label:0===e.ptype?e.$t("attribute.collectType"):e.$t("attribute.transType")}},[t("el-select",{staticStyle:{width:"140px"},attrs:{size:"small",filterable:"",multiple:"","collapse-tags":"",clearable:"",placeholder:e.$t("select")},on:{change:e.handleFuncode},model:{value:e.dataForm.collecttypec,callback:function(t){e.$set(e.dataForm,"collecttypec",t)},expression:"dataForm.collecttypec"}},e._l(e.guidFuncodeList,(function(e){return t("el-option",{key:e.FuncCode,attrs:{label:e.description,value:e.FuncCode}})})),1)],1):e._e(),t("el-form-item",[t("el-input",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:e.$t("deviceData.pleaseEnterTheNameOrDescriptionOfTheMeasuringPoint"),clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.tagname,callback:function(t){e.$set(e.dataForm,"tagname",t)},expression:"dataForm.tagname"}})],1),t("el-form-item",[t("template",{slot:"label"},[t("el-tooltip",{attrs:{effect:"dark",content:"值过滤只能过滤当前页的实时值、不影响分页总数、总页数",placement:"top"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[e._v("值过滤 "),t("i",{staticClass:"el-icon-question",staticStyle:{"margin-left":"2px"}})])])],1),t("div",{staticClass:"custom-compound-input"},[4===e.dataForm.middleValue?t("el-input",{staticClass:"left-input",staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"请输入"},model:{value:e.dataForm.leftValue,callback:function(t){e.$set(e.dataForm,"leftValue",t)},expression:"dataForm.leftValue"}}):e._e(),t("el-select",{staticClass:"middle-select",attrs:{filterable:"",size:"small",placeholder:"选择"},model:{value:e.dataForm.middleValue,callback:function(t){e.$set(e.dataForm,"middleValue",t)},expression:"dataForm.middleValue"}},[t("el-option",{attrs:{label:"大于",value:1}}),t("el-option",{attrs:{label:"小于",value:2}}),t("el-option",{attrs:{label:"等于",value:3}}),t("el-option",{attrs:{label:"介于",value:4}})],1),t("el-input",{staticClass:"right-input",staticStyle:{width:"80px"},attrs:{size:"small",placeholder:"请输入"},model:{value:e.dataForm.rightValue,callback:function(t){e.$set(e.dataForm,"rightValue",t)},expression:"dataForm.rightValue"}})],1)],2),t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:e.querySearch}},[e._v(e._s(e.$t("query")))])],1),t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-download",type:"success",disabled:0==e.dataList.length},on:{click:e.exportExcel}},[e._v(e._s(e.$t("export")))])],1),t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-film"},on:{click:e.getConfiguration}},[e._v(e._s(e.$t("project.configuration")))])],1),e.$hasPermission("writevalue:websocket")&&e.isShowSetting?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-edit-outline"},on:{click:e.handleMultipeWriteValue}},[e._v(e._s(e.$t("deviceData.batchWriteValues"))+" ")])],1):e._e(),e.$hasPermission("factual:data:select:websocket")?t("el-form-item",[e.dataForm.gwsnLocalTime?t("div",{staticStyle:{display:"flex","flex-direction":"column"}},[t("el-checkbox",{staticStyle:{"margin-top":"-8px",height:"10px"},attrs:{size:"small"},on:{change:e.realtimedataChange},model:{value:e.dataForm.isCheck,callback:function(t){e.$set(e.dataForm,"isCheck",t)},expression:"dataForm.isCheck"}},[e._v(e._s(e.$t("deviceData.realTimeRefresh")))]),t("p",{staticStyle:{"margin-top":"8px",height:"10px"}},[e._v("\n                        "+e._s(e.$t("deviceData.refreshTime"))+"："),t("span",{staticStyle:{"font-weight":"bolder"}},[e._v(e._s(e.dataForm.gwsnLocalTime||e.$t("deviceData.Noneforthetimebeing")))])])],1):t("el-checkbox",{attrs:{size:"small"},on:{change:e.realtimedataChange},model:{value:e.dataForm.isCheck,callback:function(t){e.$set(e.dataForm,"isCheck",t)},expression:"dataForm.isCheck"}},[e._v(e._s(e.$t("deviceData.realTimeRefresh")))])],1):e._e()],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("div",{ref:"box",staticClass:"box"},[t("div",{staticClass:"left",style:{height:e.scrollTreeHeight+"px",overflowY:"auto",border:"1px solid rgba(204, 204, 204, 0.6)","border-radius":"5px"}},[t("el-tree",{ref:"treeForm",attrs:{data:e.treeData,"show-checkbox":"","default-expand-all":"","node-key":"id","check-strictly":!0,"highlight-current":"",props:e.defaultProps},on:{check:e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(r){var i=r.node,l=r.data;return t("span",{staticClass:"custom-tree-node"},[-1==l.status?t("span",[e._v("\n                                    "+e._s(i.label)+"\n                                ")]):e._e(),String(l.status)&&-1!=l.status?t("span",[t("img",{staticStyle:{width:"10px",height:"10px","margin-right":"2px"},attrs:{src:2==String(l.status)?a("b15e"):1==l.status?a("1d18"):0==l.status?a("f658"):"",alt:""}}),e._v("\n                                    "+e._s(i.label)+"\n                                ")]):e._e()])}}])})],1),t("div",{staticClass:"resize",style:{height:e.scrollTreeHeight+"px","line-height":e.scrollTreeHeight+"px"},attrs:{title:e.$t("deviceData.shrinkSidebar")}},[e._v("⋮")]),t("div",{staticClass:"mid"},[t("vxe-table",{ref:"recordTable",staticStyle:{width:"100%"},attrs:{size:"mini",border:"",resizable:"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"",data:e.filteredTableList,"max-height":e.scrollTableHeight,loading:e.dataListLoading,"row-config":{keyField:"id"},"empty-text":e.$t("realTimeMonitor.nodata"),"sort-config":e.sortConfig,"checkbox-config":e.checkboxConfig,"scroll-y":{enabled:!0}},on:{"checkbox-all":e.selectAll,"checkbox-change":e.dataListSelectionHandleChange,"sort-change":e.sortChange}},[t("vxe-table-column",{attrs:{type:"checkbox","header-align":"center",align:"center",width:"60",fixed:"left",checked:!1}}),t("vxe-table-column",{key:"1",attrs:{field:"id",title:e.$t("deviceInfo.number"),"header-align":"center",align:"center",sortable:"",width:"90",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                    "+e._s(1==t.row.devid||null==e.ptype?t.row.tagid:0!=e.ptype?t.row.transid:t.row.tagid)+"\n                                ")]}}])}),null==e.ptype?t("vxe-table-column",{key:"2",attrs:{field:"devname",title:e.$t("deviceInfo.devname"),"header-align":"center",align:"center",width:"160",fixed:"left","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                    "+e._s(1==t.row.devid?e.dataForm.gwsn:t.row.devname)+"\n                                ")]}}],null,!1,1272420646)}):e._e(),t("vxe-table-column",{key:"3",attrs:{field:"tagname",title:e.$t("attribute.tagname"),"header-align":"center",align:"center",width:2==e.ptype?200:230,"show-overflow-tooltip":!0}}),t("vxe-table-column",{key:"4",attrs:{field:"tagcomment",title:e.$t("attribute.modelattribute"),"header-align":"center",align:"center",width:2==e.ptype?200:230,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.tagcomment||e.$t("none")))])]}}])}),t("vxe-table-column",{key:"5",attrs:{field:"variableValue",title:e.$t("deviceData.measurementPointValue"),"header-align":"center","min-width":"100",align:"center"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击图标可进行切换原始值、二次值",placement:"top"}},[t("span",[e._v(e._s(1==e.ptype?e.isOringinValue?"原始值":"二次值":e.$t("deviceData.measurementPointValue"))+"\n                                        "),1==e.ptype?t("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff","margin-left":"5px",cursor:"pointer","font-size":"16px"},on:{click:function(){e.isOringinValue=!e.isOringinValue}}}):e._e()])])]},proxy:!0},{key:"default",fn:function(a){return[t("span",{style:{color:100===a.row.quality?"red":49==a.row.quality?"#409eff":50==a.row.quality?"#909399":"#67c23a",fontWeight:"bolder",fontSize:"13px"}},[e._v("\n                                        "+e._s(1==e.ptype?e.isOringinValue?a.row.variableValue:e.getFinallyValueByk(a.row.variableValue,a.row.k):a.row.variableValue))])]}}])}),t("vxe-table-column",{key:"6",attrs:{field:"quality",title:e.$t("deviceData.quality"),"header-align":"center",align:"center","show-overflow-tooltip":!0,width:"100",sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return[null!=a.row.quality&&void 0!=a.row.quality?t("el-tag",{staticClass:"customTagColor",attrs:{size:"small",effect:"dark",color:0==a.row.quality?"#67c23a":49==a.row.quality?"#409eff":50==a.row.quality?"#909399":"red"}},[e._v(e._s(0==a.row.quality?"Good":49==a.row.quality?e.$t("deviceData.manualSetting"):50==a.row.quality?e.$t("deviceData.initializing"):100==a.row.quality?"Bad":""))]):e._e()]}}])}),t("vxe-table-column",{key:"7",attrs:{field:"time",title:e.$t("deviceData.collectionTime"),"header-align":"center",align:"center",width:"160","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{attrs:{title:String(a.row.time).substring(0,10)}},[e._v(e._s(String(a.row.time).substring(10,String(a.row.time).length)))])]}}])}),t("vxe-table-column",{key:"8",attrs:{field:"alarmtype",title:e.$t("attribute.alarmtype"),"header-align":"center",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(0==a.row.alarmtype?e.$t("attribute.visualValue"):1==a.row.alarmtype?e.$t("attribute.switchValue"):2==a.row.alarmtype?e.$t("attribute.ym"):3==a.row.alarmtype?e.$t("attribute.yk"):4==a.row.alarmtype?e.$t("attribute.yt"):""))])]}}])}),0==e.ptype||1==e.ptype?t("vxe-table-column",{key:"9",attrs:{field:"collDescript",title:0==e.ptype?e.$t("attribute.collectType"):e.$t("attribute.transType"),"header-align":"center",align:"center",width:"120",formatter:e.formatterCollDescript}}):e._e(),t("vxe-table-column",{key:"10",attrs:{field:"objaddr",title:e.$t("attribute.address"),"header-align":"center",align:"center",width:2==e.ptype?200:100,sortable:""}}),e.$hasPermission("writevalue:websocket")&&e.isShowSetting?t("vxe-table-column",{attrs:{title:e.$t("handle"),"header-align":"center",align:"center",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[0==a.row.tagrwprop?t("a",{staticStyle:{color:"goldenrod","text-decoration":"none"},attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.writeValue(a.$index,a.row)}}},[e._v("\n                                        "+e._s(e.$t("deviceData.WriteValues"))+"\n                                    ")]):t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.writeValue(a.$index,a.row)}}},[e._v(e._s(e.$t("deviceData.WriteValues")))])]}}],null,!1,1418629921)}):e._e()],1),e.total>0?t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[100,200,300,500],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.pageSizeChangeHandle,"current-change":e.pageCurrentChangeHandle}}):e._e()],1)])])],1)],1),t("el-dialog",{attrs:{title:e.$t("deviceData.WriteValues"),visible:e.dialogTableVisible,"close-on-click-modal":!1},on:{close:e.handleClose,"update:visible":function(t){e.dialogTableVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleConfirm.apply(null,arguments)}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.writeLoading,expression:"writeLoading"}],ref:"writevalueForm",attrs:{rules:e.rules,model:e.writevalueForm,"label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"name",label:e.$t("attribute.tagname")}},[t("el-input",{attrs:{readonly:""},model:{value:e.writevalueForm.name,callback:function(t){e.$set(e.writevalueForm,"name",t)},expression:"writevalueForm.name"}})],1)],1),t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"type",label:"写值类型"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择写值类型"},model:{value:e.writevalueForm.type,callback:function(t){e.$set(e.writevalueForm,"type",t)},expression:"writevalueForm.type"}},e._l(e.specialWriteValueTypeList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),1==e.writevalueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"offset",label:"偏移写值"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入偏移写值"},model:{value:e.writevalueForm.offset,callback:function(t){e.$set(e.writevalueForm,"offset",t)},expression:"writevalueForm.offset"}})],1)],1):e._e(),3==e.writevalueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"lowerlimit",label:"写值下限"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入写值下限"},model:{value:e.writevalueForm.lowerlimit,callback:function(t){e.$set(e.writevalueForm,"lowerlimit",t)},expression:"writevalueForm.lowerlimit"}})],1)],1):e._e(),3==e.writevalueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"upperlimit",label:"写值上限"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入写值上限"},model:{value:e.writevalueForm.upperlimit,callback:function(t){e.$set(e.writevalueForm,"upperlimit",t)},expression:"writevalueForm.upperlimit"}})],1)],1):e._e(),4==e.writevalueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"ykType",label:"遥控写值"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择类型"},model:{value:e.writevalueForm.ykType,callback:function(t){e.$set(e.writevalueForm,"ykType",t)},expression:"writevalueForm.ykType"}},[t("el-option",{attrs:{label:"遥控选择",value:4}}),t("el-option",{attrs:{label:"遥控执行",value:6}}),t("el-option",{attrs:{label:"遥控撤销",value:5}})],1)],1)],1):e._e(),7==e.writevalueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"ytType",label:"遥调写值"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择类型"},model:{value:e.writevalueForm.ytType,callback:function(t){e.$set(e.writevalueForm,"ytType",t)},expression:"writevalueForm.ytType"}},[t("el-option",{attrs:{label:"遥调选择",value:7}}),t("el-option",{attrs:{label:"遥调执行",value:9}}),t("el-option",{attrs:{label:"遥调撤销",value:8}})],1)],1)],1):e._e(),0==e.writevalueForm.type||1==e.writevalueForm.type||10==e.writevalueForm.type||7==e.writevalueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"writevalue",label:e.$t("deviceData.measurementPointValue")}},[t("el-input",{ref:"input",attrs:{placeholder:e.$t("deviceData.pleaseEnterTheMeasurementPointValue"),clearable:""},model:{value:e.writevalueForm.writevalue,callback:function(t){e.$set(e.writevalueForm,"writevalue",t)},expression:"writevalueForm.writevalue"}})],1)],1):e._e(),4==e.writevalueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"writevalue",label:e.$t("deviceData.measurementPointValue")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("select")},model:{value:e.writevalueForm.writevalue,callback:function(t){e.$set(e.writevalueForm,"writevalue",t)},expression:"writevalueForm.writevalue"}},e._l(e.writeValueSwitchList,(function(a,r){return t("el-option",{key:r,attrs:{label:a.label,value:a.value}},[e._v("\n                                "+e._s(a.value)+"\n                            ")])})),1)],1)],1):e._e(),t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"reply",label:"是否回复"}},[t("el-radio-group",{model:{value:e.writevalueForm.reply,callback:function(t){e.$set(e.writevalueForm,"reply",t)},expression:"writevalueForm.reply"}},[t("el-radio",{attrs:{label:0}},[e._v("不回复写值结果")]),t("el-radio",{attrs:{label:1}},[e._v("回复写值结果")])],1)],1)],1),t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"timeout",label:"超时时间"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入超时时间",min:1e3,max:1e4},model:{value:e.writevalueForm.timeout,callback:function(t){e.$set(e.writevalueForm,"timeout",t)},expression:"writevalueForm.timeout"}})],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{prop:"safePassword",label:e.$t("deviceData.securePassword")}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("deviceData.pleaseEnterTheSecurityPassword"),"show-password":"",clearable:""},model:{value:e.writevalueForm.safePassword,callback:function(t){e.$set(e.writevalueForm,"safePassword",t)},expression:"writevalueForm.safePassword"}})],1)],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v(e._s(e.$t("confirm")))])],1)],1),t("el-dialog",{attrs:{title:e.$t("deviceData.batchWriteValues"),visible:e.multipeWriteValueVisible,"close-on-click-modal":!1},on:{close:e.handleCloseMultipeWriteValue,"update:visible":function(t){e.multipeWriteValueVisible=t}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleConfirmMultipeWriteValue.apply(null,arguments)}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.multipeWriteValueLoading,expression:"multipeWriteValueLoading"}],ref:"multipeWriteValueForm",attrs:{rules:e.multipeWriteValueRules,model:e.multipeWriteValueForm,"label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{xl:24,md:24,sm:24}},[t("el-form-item",{attrs:{prop:"tagnames",label:e.$t("attribute.tagname")}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:e.$t("attribute.pleaceEnterContent"),readonly:""},model:{value:e.multipeWriteValueForm.tagnames,callback:function(t){e.$set(e.multipeWriteValueForm,"tagnames",t)},expression:"multipeWriteValueForm.tagnames"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"type",label:"写值类型"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择写值类型"},model:{value:e.multipeWriteValueForm.type,callback:function(t){e.$set(e.multipeWriteValueForm,"type",t)},expression:"multipeWriteValueForm.type"}},e._l(e.specialMultipeWriteValueTypeList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),1==e.multipeWriteValueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"offset",label:"偏移写值"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入偏移写值"},model:{value:e.multipeWriteValueForm.offset,callback:function(t){e.$set(e.multipeWriteValueForm,"offset",t)},expression:"multipeWriteValueForm.offset"}})],1)],1):e._e(),3==e.multipeWriteValueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"lowerlimit",label:"写值下限"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入写值下限"},model:{value:e.multipeWriteValueForm.lowerlimit,callback:function(t){e.$set(e.multipeWriteValueForm,"lowerlimit",t)},expression:"multipeWriteValueForm.lowerlimit"}})],1)],1):e._e(),3==e.multipeWriteValueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"upperlimit",label:"写值上限"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入写值上限"},model:{value:e.multipeWriteValueForm.upperlimit,callback:function(t){e.$set(e.multipeWriteValueForm,"upperlimit",t)},expression:"multipeWriteValueForm.upperlimit"}})],1)],1):e._e(),4==e.multipeWriteValueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"ykType",label:"遥控写值"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择类型"},model:{value:e.multipeWriteValueForm.ykType,callback:function(t){e.$set(e.multipeWriteValueForm,"ykType",t)},expression:"multipeWriteValueForm.ykType"}},[t("el-option",{attrs:{label:"遥控选择",value:4}}),t("el-option",{attrs:{label:"遥控执行",value:6}}),t("el-option",{attrs:{label:"遥控撤销",value:5}})],1)],1)],1):e._e(),7==e.multipeWriteValueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"ytType",label:"遥调写值"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择类型"},model:{value:e.multipeWriteValueForm.ytType,callback:function(t){e.$set(e.multipeWriteValueForm,"ytType",t)},expression:"multipeWriteValueForm.ytType"}},[t("el-option",{attrs:{label:"遥调选择",value:7}}),t("el-option",{attrs:{label:"遥调执行",value:9}}),t("el-option",{attrs:{label:"遥调撤销",value:8}})],1)],1)],1):e._e(),0==e.multipeWriteValueForm.type||1==e.multipeWriteValueForm.type||10==e.multipeWriteValueForm.type||7==e.multipeWriteValueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"writeValue",label:e.$t("deviceData.measurementPointValue")}},[t("el-input",{ref:"input",attrs:{placeholder:e.$t("deviceData.pleaseEnterTheMeasurementPointValue"),clearable:""},model:{value:e.multipeWriteValueForm.writeValue,callback:function(t){e.$set(e.multipeWriteValueForm,"writeValue",t)},expression:"multipeWriteValueForm.writeValue"}})],1)],1):e._e(),4==e.multipeWriteValueForm.type?t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"writevalue",label:e.$t("deviceData.measurementPointValue")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("select")},model:{value:e.writevalueForm.writevalue,callback:function(t){e.$set(e.writevalueForm,"writevalue",t)},expression:"writevalueForm.writevalue"}},e._l(e.writeValueSwitchList,(function(a,r){return t("el-option",{key:r,attrs:{label:a.label,value:a.value}},[e._v("\n                                "+e._s(a.value)+"\n                            ")])})),1)],1)],1):e._e(),t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"reply",label:"是否回复"}},[t("el-radio-group",{model:{value:e.multipeWriteValueForm.reply,callback:function(t){e.$set(e.multipeWriteValueForm,"reply",t)},expression:"multipeWriteValueForm.reply"}},[t("el-radio",{attrs:{label:0}},[e._v("不回复写值结果")]),t("el-radio",{attrs:{label:1}},[e._v("回复写值结果")])],1)],1)],1),t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"timeout",label:"超时时间"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入超时时间",min:1e3,max:1e4},model:{value:e.multipeWriteValueForm.timeout,callback:function(t){e.$set(e.multipeWriteValueForm,"timeout",t)},expression:"multipeWriteValueForm.timeout"}})],1)],1),t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{prop:"safePassword",label:e.$t("deviceData.securePassword")}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("deviceData.pleaseEnterTheSecurityPassword"),"show-password":"",clearable:""},model:{value:e.multipeWriteValueForm.safePassword,callback:function(t){e.$set(e.multipeWriteValueForm,"safePassword",t)},expression:"multipeWriteValueForm.safePassword"}})],1)],1)],1)],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleCloseMultipeWriteValue}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmMultipeWriteValue}},[e._v(e._s(e.$t("confirm")))])],1)],1)],1)},l=[],s=(a("ac4d"),a("8a81"),a("1c4c"),a("ade3")),n=(a("5df3"),a("4f7f"),a("2909")),o=(a("6762"),a("2fdb"),a("7514"),a("55dd"),a("28a5"),a("6b54"),a("ac6a"),a("53ca")),c=(a("c5f6"),a("a481"),a("96cf"),a("1da1")),u=a("4328"),m=a.n(u),d=a("b047"),p=a.n(d),h=a("376b");function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=g(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,l=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw l}}}}function g(e,t){if(e){if("string"==typeof e)return b(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var w={name:"equipment-list",directives:{loadmore:{inserted:function(e,t){var a=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");a.addEventListener("scroll",(function(){var e=this.scrollHeight-Math.ceil(this.scrollTop)<=this.clientHeight;e&&0!==this.scrollTop&&t.value()}))}}},data:function(){return{isOringinValue:!1,page:1,limit:100,total:0,ptype:2,dataForm:{prjName:"",gwsn:"",chlId:"",deviceName:"",alarmtype:"",tagname:"",collecttypec:[],isCheck:!0,gwsnLocalTime:null,leftValue:"",middleValue:3,rightValue:""},prjPage:1,prjTotal:0,prjSearch:"",prjNameList:[],gwsnPage:1,gwsnTotal:0,storeGwsnMap:{},gwsnSearch:"",gwsnDataList:[],deviceList:[],queryParams:{},alarmtypeList:[{label:this.$t("all"),value:""},{label:this.$t("attribute.visualValue"),value:0},{label:this.$t("attribute.switchValue"),value:1},{label:this.$t("attribute.ym"),value:2},{label:this.$t("attribute.yk"),value:3},{label:this.$t("attribute.yt"),value:4}],guidFuncodeList:[],treeData:[],defaultProps:{children:"children",label:"label",status:"status"},sname:"id",sort:"asc",dataListLoading:!1,dataList:[],dataTableList:[],allTagList:[],storeDataList:[],excelData:[],sortConfig:{defaultSort:{field:"id",order:"asc"},remote:!0},checkboxConfig:{checkStrictly:!1,reserve:!0,highlight:!0,checkField:"checked"},multipleSelectionAll:[],writeLoading:!1,dialogTableVisible:!1,writevalueForm:{id:null,sn:"",name:"",type:0,offset:0,lowerlimit:0,upperlimit:1e3,ykType:5,ytType:8,writevalue:"",reply:1,timeout:3e3,safePassword:""},rules:{writevalue:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],safePassword:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},specialWriteValueTypeList:[],specialMultipeWriteValueTypeList:[],writeValueTypeList:[{label:"直接写值",value:0},{label:"偏移写值",value:1},{label:"随机写值",value:3},{label:"人工置数",value:10},{label:"遥控",value:4},{label:"遥调",value:7},{label:"取消人工置数",value:11}],multipeWriteValueVisible:!1,multipeWriteValueLoading:!1,multipeWriteValueForm:{tagnames:"",tagids:"",type:0,offset:0,lowerlimit:0,upperlimit:1e3,ykType:5,ytType:8,writeValue:"",reply:1,timeout:3e3,safePassword:""},multipeWriteValueRules:{tagnames:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],writeValue:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],safePassword:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},storeGwsn:"",scrollTreeHeight:window.innerHeight-225,scrollTableHeight:window.innerHeight-220-50,prjInfoWebsocket:null,recconectPrjInfoTimer:null,prjInfoResult:{},chlStatusTimer:null,websocketChannel:null,lockChannelReconnect:!1,reChannelReconnectTimer:null,channelStatusList:[],fastrefreshWebsocket:null,fastrefreshTimer:null,websocket:null,websocketData:null,websocketTime:null,webTimer:null,writeValueWebsocket:null,noOptionTimeOut:null,writeValueSwitchList:[{label:"0",value:"0"},{label:"1",value:"1"}],resultCode:{2:this.$t("deviceData.authorizationVerificationFailed"),3:this.$t("deviceData.authorizationVerificationHasExpired"),4:this.$t("deviceData.fileDoesNotExist"),5:this.$t("deviceData.driverVersionMismatch")},superAdmin:this.$store.state.user.superAdmin,isShowSetting:!1}},methods:(r={init:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,a={},t.queryParams=t.$route.query,"{}"==JSON.stringify(t.queryParams)){e.next=5;break}if(t.queryParams.hasOwnProperty("per")&&0==t.queryParams.per?t.isShowSetting=!1:t.isShowSetting=!0,!t.queryParams.hasOwnProperty("prjId")||!t.queryParams.prjId){e.next=2;break}if(a["id"]=t.queryParams.prjId,t.$hasPermission("tprjinfo:select:permission.do")){e.next=1;break}return t.$message.warning("暂无项目信息查询权限, 请联系管理员"),e.abrupt("return");case 1:t.$http.get("/info/tprjinfo/".concat(t.queryParams.prjId),{params:a}).then((function(e){var a=e.data;if(0!=a.code)return t.$message.error(a.msg);t.prjSearch=a.data.prjName})),e.next=4;break;case 2:if(0!=t.superAdmin){e.next=3;break}t.prjSearch="共享网关",e.next=4;break;case 3:return e.next=4,t.getPrjList();case 4:t.gwsnSearch=t.queryParams.gwsn,e.next=7;break;case 5:return t.isShowSetting=!0,e.next=6,t.getPrjList();case 6:return e.next=7,t.getGwsnList();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPrjList:function(){var e=this,t=!1,a={page:e.prjPage,limit:200,priName:e.prjSearch.replace(/\s+/g,""),_t:(new Date).getTime()};e.$hasPermission("tprjinfo:list:select")?e.$http.get("/info/tprjinfo/tprjinfoList",{params:a}).then((function(a){var r=a.data;if(r.hasOwnProperty("code"))return e.$message.error(r.msg);if(1==e.prjPage)if("{}"!=JSON.stringify(e.queryParams))if(e.queryParams.prjId){for(var i=0;i<e.prjNameList.length;i++)if(e.queryParams.prjId==e.prjNameList[i].id){e.dataForm.prjName=e.queryParams.prjId,e.gwsnSearch=e.$route.query.gwsn,t=!0;break}t||(e.prjNameList=r.list)}else 1==e.superAdmin?e.prjNameList=r.list:e.queryParams.hasOwnProperty("per")?(e.dataForm.prjName=-1,e.prjNameList=[{id:-1,prjName:"共享网关"}]):(e.dataForm.prjName="",e.prjNameList=r.list);else e.prjNameList=r.list;else e.prjNameList=e.prjNameList.concat(r.list);if(e.prjTotal=Number(r.total),0==e.prjNameList.length)e.prjNameList.push({id:e.$t("noMatchingDataYet"),prjName:e.$t("noMatchingDataYet"),disabled:!0});else if("{}"!=JSON.stringify(e.queryParams))if(e.queryParams.prjId){for(var l=0;l<e.prjNameList.length;l++)if(e.queryParams.prjId==e.prjNameList[l].id){e.dataForm.prjName=e.queryParams.prjId,e.gwsnSearch=e.$route.query.gwsn;break}}else 1==e.superAdmin?e.dataForm.prjName="":e.queryParams.hasOwnProperty("per")?e.dataForm.prjName=-1:e.dataForm.prjName=""})).catch((function(e){return!1})):e.$message.warning("暂无项目查询权限, 请联系管理员")},handlePrjVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.prjInput.focus()}))},handlePrjScroll:function(){this.prjNameList.length<this.prjTotal&&(this.prjPage++,this.getPrjList())},handleGwsnVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.gwsnInput.focus()}))},handleGwsnScroll:function(){this.gwsnDataList.length<this.gwsnTotal&&(this.gwsnPage++,this.getGwsnList())},createPrjInfoWebSocket:function(){if(this.$hasPermission("socketTwo:getPrjInfo:select:websocket")){if(!("WebSocket"in window))return this.$message.error(this.$t("websocket.notSupportWebsocket"));try{var e=window.SITE_CONFIG["socketUrl"]+"socketTwo/getPrjInfo/"+this.dataForm.gwsn+"/1/"+this.encryMD5(this.dataForm.gwsn)+"?token="+this.$getToken();this.prjInfoWebsocket=new WebSocket(e),this.initPrjInfoWebSocket()}catch(t){this.reprjInfoConnect()}}else this.$message.warning("暂无项目信息获取权限, 请联系管理员")},initPrjInfoWebSocket:function(){this.prjInfoWebsocket.onopen=this.prjinfowebsocketonopen,this.prjInfoWebsocket.onerror=this.prjinfowebsocketonerror,this.prjInfoWebsocket.onmessage=this.prjinfowebsocketonmessage,this.prjInfoWebsocket.onclose=this.prjinfowebsocketonclose},reprjInfoConnect:function(){var e=this;e.prjInfoWebsocket||(e.recconectPrjInfoTimer&&clearTimeout(e.recconectPrjInfoTimer),e.recconectPrjInfoTimer=setTimeout((function(){e.createPrjInfoWebSocket()}),3e3))},prjinfowebsocketonopen:function(){var e=this;e.prjInfoResult={},e.heartCheck().start(),setTimeout((function(){if(e.prjInfoWebsocket&&"{}"==JSON.stringify(e.prjInfoResult))return e.prjInfoResult=Object.assign(e.prjInfoResult,{noContent:!0}),e.prjInfoWebsocket&&(e.prjInfoWebsocket.close(),e.prjInfoWebsocket=null),e.$message.error(e.$t("issue.timeout"))}),"30000")},prjinfowebsocketonerror:function(e){this.reprjInfoConnect()},heartCheck:function(){var e=this,t={timeout:2e4,timeoutObj:null,start:function(){e.timeoutObj=setTimeout((function(){e.prjInfoWebsocket&&e.prjInfoWebsocket.readyState===WebSocket.OPEN&&e.prjInfoWebsocket.send("connect success"),e.lockReconnect&&e.websocket&&e.websocket.readyState===WebSocket.OPEN&&e.websocket.send("connect success")}),2e4)},reset:function(){clearTimeout(e.timeoutObj),t.start()}};return t},isJsonString:function(e){try{if("object"==Object(o["a"])(JSON.parse(e)))return!0}catch(t){}return!1},prjinfowebsocketonmessage:function(e){var t=this,a=this,r=e.data;if(a.heartCheck().reset(),a.isJsonString(r)){if("getPrjInfo"!=JSON.parse(e.data).res_name)return;if(a.prjInfoResult=JSON.parse(e.data).res_content,a.prjInfoResult.hasOwnProperty("err_code"))return a.prjInfoWebsocket.close(),a.prjInfoWebsocket=null,!1;if(!a.$hasPermission("gwbaseinfo:selectPrjModify:permission.do"))return a.prjInfoWebsocket&&(a.prjInfoWebsocket.close(),a.prjInfoWebsocket=null),void a.$message.warning("暂无工程更新时间查询权限, 请联系管理员");a.$http.get("/info/gwbaseinfo/getPrjModify.do",{params:{gwsn:a.dataForm.gwsn}}).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){var i,l,s,n,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=r.data,0==i.code){e.next=1;break}return a.prjInfoWebsocket.close(),a.prjInfoWebsocket=null,e.abrupt("return",a.$message.error(i.data||i.msg));case 1:if(l="",a.prjInfoResult.modify_time!=i.data){e.next=7;break}if(a.prjInfoWebsocket&&(a.prjInfoWebsocket.close(),a.prjInfoWebsocket=null),a.prjInfoResult.hasOwnProperty("source")&&1==a.prjInfoResult.source&&(l+=t.$t("deviceData.thisProjectIsSourcedFromLocalConfigurationSoftware")),a.prjInfoResult.hasOwnProperty("chl_limit")&&1==a.prjInfoResult.chl_limit.exceed&&(l+=l?"<br/><br/>".concat(a.$t("deviceData.theNumberOfChannelRestrictionsIs"),"<strong>")+a.prjInfoResult.chl_limit.limit+"</strong>个":"".concat(a.$t("deviceData.theNumberOfChannelRestrictionsIs"),"<strong>")+a.prjInfoResult.chl_limit.limit+"</strong>个"),a.prjInfoResult.hasOwnProperty("dev_limit")&&1==a.prjInfoResult.dev_limit.exceed&&(l+=l?"<br/><br/>".concat(a.$t("deviceData.theLimitedNumberOfDevicesIs"),"<strong>")+a.prjInfoResult.dev_limit.limit+"</strong>个":"".concat(a.$t("deviceData.theLimitedNumberOfDevicesIs"),"<strong>")+a.prjInfoResult.dev_limit.limit+"</strong>个"),a.prjInfoResult.hasOwnProperty("tag_limit")&&1==a.prjInfoResult.tag_limit.exceed&&(l+=l?"<br/><br/>".concat(t.$t("deviceData.theLimitedNumberOfMeasuringPointsIs"),"<strong>")+a.prjInfoResult.tag_limit.limit+"</strong>个":"".concat(a.$t("deviceData.theLimitedNumberOfMeasuringPointsIs"),"<strong>")+a.prjInfoResult.tag_limit.limit+"</strong>个"),!(a.prjInfoResult.hasOwnProperty("run_auth")&&a.prjInfoResult.run_auth.length>0)){e.next=5;break}for(s={},n=0;n<a.prjInfoResult.run_auth.length;n++)s.hasOwnProperty(a.prjInfoResult.run_auth[n].ret)?s[a.prjInfoResult.run_auth[n].ret].push(a.prjInfoResult.run_auth[n].pro_idx):s[a.prjInfoResult.run_auth[n].ret]=[].concat(a.prjInfoResult.run_auth[n].pro_idx);if(a.$hasPermission("drivers:protocolNameSelect:permission.do")){e.next=4;break}return e.next=2,a.$message.warning("暂无协议名称查询权限, 请联系管理员");case 2:return e.next=3,a.$message({type:"warning",showClose:!0,dangerouslyUseHTMLString:!0,message:l,duration:resAuth.data.length<2?3e3:3e3+1e3*resAuth.data.length});case 3:return e.abrupt("return");case 4:a.$http.get("/drivers/protocolName.do",{params:{ids:a.prjInfoResult.run_auth.map((function(e){if(1!=e.ret)return Number(e.pro_idx)})).join(",")}}).then((function(e){var t=e.data;if(0!=t.code)return a.$message.error(t.data||t.msg);if(t.data.length>0){var r={};t.data.forEach((function(e){var t=JSON.parse('{"'.concat(e.id,'":"').concat(e.name,'"}'));Object.assign(r,t)}));var i=function(e){l&&(l+="<br/><br/>"),s[e].forEach((function(t){l+=a.$t("deviceData.drive")+"["+r[t]+"]"+a.resultCode[e]+"!<br/><br/>"}))};for(var n in s)i(n);return a.$message({type:"warning",showClose:!0,dangerouslyUseHTMLString:!0,message:l,duration:t.data.length<2?3e3:3e3+1e3*t.data.length})}})),e.next=6;break;case 5:if(!l){e.next=6;break}return e.abrupt("return",a.$message({type:"warning",dangerouslyUseHTMLString:!0,message:l,duration:3e3}));case 6:e.next=12;break;case 7:if(a.prjInfoWebsocket&&(a.prjInfoWebsocket.close(),a.prjInfoWebsocket=null),l=a.prjInfoResult.hasOwnProperty("source")&&1==a.prjInfoResult.source?a.$t("deviceData.thisProjectIsSourcedFromLocalConfigurationSoftware")+a.$t("deviceData.theCurrentDataAndGatewayAreInconsistent"):a.$t("deviceData.theCurrentDataAndGatewayAreInconsistent"),a.prjInfoResult.hasOwnProperty("chl_limit")&&1==a.prjInfoResult.chl_limit.exceed&&(l+=l?"<br/><br/>".concat(a.$t("deviceData.theNumberOfChannelRestrictionsIs"),"<strong>")+a.prjInfoResult.chl_limit.limit+"</strong>个":"".concat(a.$t("deviceData.theNumberOfChannelRestrictionsIs"),"<strong>")+a.prjInfoResult.chl_limit.limit+"</strong>个"),a.prjInfoResult.hasOwnProperty("dev_limit")&&1==a.prjInfoResult.dev_limit.exceed&&(l+=l?"<br/><br/>".concat(a.$t("deviceData.theLimitedNumberOfDevicesIs"),"<strong>")+a.prjInfoResult.dev_limit.limit+"</strong>个":"".concat(a.$t("deviceData.theLimitedNumberOfDevicesIs"),"<strong>")+a.prjInfoResult.dev_limit.limit+"</strong>个"),a.prjInfoResult.hasOwnProperty("tag_limit")&&1==a.prjInfoResult.tag_limit.exceed&&(l+=l?"<br/><br/>".concat(a.$t("deviceData.theLimitedNumberOfMeasuringPointsIs"),"<strong>")+a.prjInfoResult.tag_limit.limit+"</strong>个":"".concat(a.$t("deviceData.theLimitedNumberOfMeasuringPointsIs"),"<strong>")+a.prjInfoResult.tag_limit.limit+"</strong>个"),!(a.prjInfoResult.hasOwnProperty("run_auth")&&a.prjInfoResult.run_auth.length>0)){e.next=11;break}for(o={},c=0;c<a.prjInfoResult.run_auth.length;c++)o.hasOwnProperty(a.prjInfoResult.run_auth[c].ret)?o[a.prjInfoResult.run_auth[c].ret].push(a.prjInfoResult.run_auth[c].pro_idx):o[a.prjInfoResult.run_auth[c].ret]=[].concat(a.prjInfoResult.run_auth[c].pro_idx);if(a.$hasPermission("drivers:protocolNameSelect:permission.do")){e.next=10;break}return e.next=8,a.$message.warning("暂无协议名称查询权限, 请联系管理员");case 8:return e.next=9,a.$message({type:"warning",dangerouslyUseHTMLString:!0,message:l,duration:3e3});case 9:return e.abrupt("return");case 10:a.$http.get("/drivers/protocolName.do",{params:{ids:a.prjInfoResult.run_auth.map((function(e){if(1!=e.ret)return Number(e.pro_idx)})).join(",")}}).then((function(e){var t=e.data;if(0!=t.code)return a.$message.error(t.data||t.msg);if(t.data.length>0){var r={};t.data.forEach((function(e){var t=JSON.parse('{"'.concat(e.id,'":"').concat(e.name,'"}'));Object.assign(r,t)}));var i=function(e){l&&(l+="<br/><br/>"),o[e].forEach((function(t){l+=a.$t("deviceData.drive")+"["+r[t]+"]"+a.resultCode[e]+"!<br/><br/>"}))};for(var s in o)i(s);return a.$message({type:"warning",showClose:!0,dangerouslyUseHTMLString:!0,message:l,duration:t.data.length<2?3e3:3e3+1e3*t.data.length})}})),e.next=12;break;case 11:if(!l){e.next=12;break}return e.abrupt("return",a.$message({type:"warning",dangerouslyUseHTMLString:!0,message:l,duration:3e3}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},prjinfowebsocketonclose:function(e){},encryMD5:function(e){var t=this.$randomStrFun();return this.$md5(t+e)+"/"+String(parseInt((new Date).getTime().toString().substring(0,10)))},encryMD5List:function(){var e=this.$randomStrFun();return this.$md5(e)+"/"+String(parseInt((new Date).getTime().toString().substring(0,10)))},getGwsnList:function(){var e=this,t=this,a={pageNum:t.gwsnPage,pageSize:200,fuzzy:t.gwsnSearch,_t:(new Date).getTime()};if(t.dataForm.gwsn="",t.queryParams.hasOwnProperty("per")){if(!t.$hasPermission("shareSn:select:permission.do"))return void t.$message.warning("暂无共享网关查询权限, 请联系管理员");t.$http.get("/shareSn/selectShareSnPage.do",{params:a}).then((function(a){var r=a.data;if(0!=r.code)return t.$message.error(r.data||r.msg),!1;if(1==t.gwsnPage?t.gwsnDataList=r.data.list:t.gwsnDataList=t.gwsnDataList.concat(r.data.list),t.gwsnTotal=Number(r.data.total),0==t.gwsnDataList.length)t.webTimer&&(clearInterval(t.webTimer),t.webTimer=null),t.fastrefreshTimer&&(clearInterval(t.fastrefreshTimer),t.fastrefreshTimer=null),t.chlStatusTimer&&(clearInterval(t.chlStatusTimer),t.chlStatusTimer=null),t.fastrefreshWebsocket&&(t.fastrefreshWebsocket.close(),t.fastrefreshWebsocket=null),t.websocket&&(t.websocket.close(),t.websocket=null),t.writeValueWebsocket&&(t.writeValueWebsocket.close(),t.writeValueWebsocket=null),t.dataForm.gwsn="",t.total=0,t.treeData=[],t.dataList=[],t.dataTableList=[],t.storeDataList=[],t.guidFuncodeList=[],t.dataForm.collecttypec=[],t.$refs.treeForm.setCheckedKeys([]),t.websocketData={key:[]},t.gwsnDataList.push({sn:t.$t("noMatchingDataYet"),gwDesc:e.$t("noMatchingDataYet"),disabled:!0});else if(t.queryParams.gwsn){for(var i=!1,l=0;l<t.gwsnDataList.length;l++){var s=t.gwsnDataList[l];if(s.sn==t.queryParams.gwsn){i=!0,t.dataForm.gwsn=s.sn,t.handlechannelDevice();break}}i||(t.webTimer&&(clearInterval(t.webTimer),t.webTimer=null),t.fastrefreshTimer&&(clearInterval(t.fastrefreshTimer),t.fastrefreshTimer=null),t.chlStatusTimer&&(clearInterval(t.chlStatusTimer),t.chlStatusTimer=null),t.fastrefreshWebsocket&&(t.fastrefreshWebsocket.close(),t.fastrefreshWebsocket=null),t.websocket&&(t.websocket.close(),t.websocket=null),t.writeValueWebsocket&&(t.writeValueWebsocket.close(),t.writeValueWebsocket=null),t.dataForm.gwsn="",t.total=0,t.treeData=[],t.dataList=[],t.dataTableList=[],t.storeDataList=[],t.guidFuncodeList=[],t.dataForm.collecttypec=[],t.$refs.treeForm.setCheckedKeys([]),t.websocketData={key:[]})}})).catch((function(e){return!1}))}else{if(a["prjId"]=t.dataForm.prjName,!t.$hasPermission("gwbaseinfo:select:permission.do"))return void t.$message.warning("暂无网关查询权限, 请联系管理员");t.$http.post("/info/gwbaseinfo/selectByPage.do",m.a.stringify(a)).then((function(a){var r=a.data;if(0!=r.code)return t.$message.error(r.data||r.msg),!1;if(1==t.gwsnPage?t.gwsnDataList=r.data.list:t.gwsnDataList=t.gwsnDataList.concat(r.data.list),t.gwsnTotal=Number(r.data.total),0==t.gwsnDataList.length)t.webTimer&&(clearInterval(t.webTimer),t.webTimer=null),t.fastrefreshTimer&&(clearInterval(t.fastrefreshTimer),t.fastrefreshTimer=null),t.chlStatusTimer&&(clearInterval(t.chlStatusTimer),t.chlStatusTimer=null),t.fastrefreshWebsocket&&(t.fastrefreshWebsocket.close(),t.fastrefreshWebsocket=null),t.websocket&&(t.websocket.close(),t.websocket=null),t.writeValueWebsocket&&(t.writeValueWebsocket.close(),t.writeValueWebsocket=null),t.dataForm.gwsn="",t.total=0,t.treeData=[],t.dataList=[],t.dataTableList=[],t.storeDataList=[],t.guidFuncodeList=[],t.dataForm.collecttypec=[],t.$refs.treeForm.setCheckedKeys([]),t.websocketData={key:[]},t.gwsnDataList.push({sn:t.$t("noMatchingDataYet"),gwDesc:e.$t("noMatchingDataYet"),disabled:!0});else if(t.queryParams.gwsn){for(var i=!1,l=0;l<t.gwsnDataList.length;l++){var s=t.gwsnDataList[l];if(s.sn==t.queryParams.gwsn){i=!0,t.dataForm.gwsn=s.sn,t.handlechannelDevice();break}}i||(t.webTimer&&(clearInterval(t.webTimer),t.webTimer=null),t.fastrefreshTimer&&(clearInterval(t.fastrefreshTimer),t.fastrefreshTimer=null),t.chlStatusTimer&&(clearInterval(t.chlStatusTimer),t.chlStatusTimer=null),t.fastrefreshWebsocket&&(t.fastrefreshWebsocket.close(),t.fastrefreshWebsocket=null),t.websocket&&(t.websocket.close(),t.websocket=null),t.writeValueWebsocket&&(t.writeValueWebsocket.close(),t.writeValueWebsocket=null),t.dataForm.gwsn="",t.total=0,t.treeData=[],t.dataList=[],t.dataTableList=[],t.storeDataList=[],t.guidFuncodeList=[],t.dataForm.collecttypec=[],t.$refs.treeForm.setCheckedKeys([]),t.websocketData={key:[]})}})).catch((function(e){return!1}))}},handlechannelDevice:function(){var e=this,t=this,a={gwsn:t.dataForm.gwsn};t.prjInfoWebsocket&&t.prjInfoWebsocket.readyState===WebSocket.OPEN&&(t.prjInfoWebsocket.close(),t.prjInfoWebsocket=null),t.recconectPrjInfoTimer&&(clearTimeout(t.recconectPrjInfoTimer),t.recconectPrjInfoTimer=null),t.dataForm.gwsn&&(t.createPrjInfoWebSocket(),setTimeout((function(){t.$hasPermission("gwbaseinfo:selectChanlenCO:permission.do")?t.$http.get("/info/gwbaseinfo/selectChanlenCO",{params:a}).then((function(a){var r=a.data;if(0!=r.code)return t.$message.error(r.msg);if(0==r.data.length)return t.chlStatusTimer&&(clearInterval(t.chlStatusTimer),t.chlStatusTimer=null),t.websocketChannel&&(t.websocketChannel.close(),t.websocketChannel=null),t.webTimer&&(clearInterval(t.webTimer),t.webTimer=null),t.fastrefreshTimer&&(clearInterval(t.fastrefreshTimer),t.fastrefreshTimer=null),t.chlStatusTimer&&(clearInterval(t.chlStatusTimer),t.chlStatusTimer=null),t.fastrefreshWebsocket&&(t.fastrefreshWebsocket.close(),t.fastrefreshWebsocket=null),t.websocket&&(t.websocket.close(),t.websocket=null),t.writeValueWebsocket&&(t.writeValueWebsocket.close(),t.writeValueWebsocket=null),t.total=0,t.treeData=[],t.dataList=[],t.dataTableList=[],t.storeDataList=[],t.allTagList=[],t.guidFuncodeList=[],t.dataForm.collecttypec=[],t.$refs.treeForm.setCheckedKeys([]),t.websocketData={key:[]},t.$message.info(e.$t("deviceData.queryAfterCreation"));if(t.treeData=[{id:-2,label:t.$t("all"),status:-1,children:[{id:"",label:t.$t("deviceData.allCollectionDevices"),status:-1}]},{id:-1,label:t.$t("channelInfo.innerChannel"),status:-1,children:[{id:1,label:t.$t("historyQuery.center"),status:-1}]}],t.treeData=t.treeData.concat(r.data),"{}"!=JSON.stringify(t.queryParams))if(t.$refs.treeForm.setCheckedKeys([""]),t.ptype=null,t.getDataList(),t.$hasPermission("socketsOne:getchlstatus:select:websocket")){var i="socketsOne/getchlstatus/"+t.dataForm.gwsn+"/"+t.encryMD5(t.dataForm.gwsn);setTimeout((function(){t.createChannelWebSocket(i),t.getChlStatusTimer()}),3e3)}else t.$message.warning("暂无通道状态获取权限, 请联系管理员");else if(t.dataForm.gwsn){if(t.chlStatusTimer&&(clearInterval(t.chlStatusTimer),t.chlStatusTimer=null),t.$hasPermission("socketsOne:getchlstatus:select:websocket")){var l="socketsOne/getchlstatus/"+t.dataForm.gwsn+"/"+t.encryMD5(t.dataForm.gwsn);setTimeout((function(){t.createChannelWebSocket(l),t.getChlStatusTimer()}),3e3)}else t.$message.warning("暂无通道状态获取权限, 请联系管理员");t.$refs.treeForm.getCheckedKeys().length>0&&t.querySearch()}else t.chlStatusTimer&&(clearInterval(t.chlStatusTimer),t.chlStatusTimer=null),t.websocketChannel&&(t.websocketChannel.close(),t.websocketChannel=null),t.webTimer&&(clearInterval(t.webTimer),t.webTimer=null),t.fastrefreshTimer&&(clearInterval(t.fastrefreshTimer),t.fastrefreshTimer=null),t.chlStatusTimer&&(clearInterval(t.chlStatusTimer),t.chlStatusTimer=null),t.fastrefreshWebsocket&&(t.fastrefreshWebsocket.close(),t.fastrefreshWebsocket=null),t.websocket&&(t.websocket.close(),t.websocket=null),t.writeValueWebsocket&&(t.writeValueWebsocket.close(),t.writeValueWebsocket=null),t.total=0,t.treeData=[],t.dataList=[],t.dataTableList=[],t.storeDataList=[],t.allTagList=[],t.$refs.treeForm.setCheckedKeys([]),t.websocketData={key:[]}})).catch((function(e){return!1})):t.$message.warning("暂无通道、设备查询权限, 请联系管理员")}),500))},getChlStatusTimer:function(){var e=this;e.chlStatusTimer=setInterval((function(){if(e.websocketChannel&&(e.websocketChannel.close(),e.websocketChannel=null),e.$hasPermission("socketsOne:getchlstatus:select:websocket")){var t="socketsOne/getchlstatus/"+e.dataForm.gwsn+"/"+e.encryMD5(e.dataForm.gwsn);e.createChannelWebSocket(t)}else e.$message.warning("暂无通道状态获取权限, 请联系管理员")}),1e4)},createChannelWebSocket:function(e){var t=this;if(!("WebSocket"in window))return t.$message.error(t.$t("websocket.notSupportWebsocket"));try{var a=window.SITE_CONFIG["socketUrl"]+e+"?token="+t.$getToken();t.websocketChannel=new WebSocket(a),t.initChannelWebSocket()}catch(r){}},initChannelWebSocket:function(){this.websocketChannel.onopen=this.websocketChannelonopen,this.websocketChannel.onerror=this.websocketChannelonerror,this.websocketChannel.onmessage=this.websocketChannelonmessage,this.websocketChannel.onclose=this.websocketChannelonclose},websocketChannelonopen:function(){this.lockChannelReconnect=!0},reChannelConnect:function(){var e=this;e.lockChannelReconnect||(e.reChannelReconnectTimer&&clearTimeout(e.reChannelReconnectTimer),e.reChannelReconnectTimer=setTimeout((function(){var t="socketsOne/getchlstatus/"+e.dataForm.gwsn+"/"+e.encryMD5(e.dataForm.gwsn);e.createChannelWebSocket(t)}),3e3))},websocketChannelonerror:function(e){this.lockChannelReconnect=!1},isArray:function(e){return Object.prototype.toString.call(e)},websocketChannelonmessage:function(e){var t=this;if(!this.isJsonString(e.data))return!1;this.$nextTick((function(){if(t.websocketChannel&&(t.websocketChannel.close(),t.websocketChannel=null),JSON.parse(e.data).res_content){var a=JSON.parse(e.data).res_content;t.channelStatusList=[],"[object Array]"===t.isArray(a)&&a.length>0&&(a.forEach((function(e){1!=e.chl_id&&t.channelStatusList.push(e)})),t.channelStatusList.length>0&&t.treeData.length>0&&t.channelStatusList.forEach((function(e){t.treeData.forEach((function(a){a.id==e.chl_id&&(t.$set(a,"status",e.chl_status),a.children.length>0&&e.devs.length>0&&e.devs.forEach((function(e){a.children.forEach((function(a){e.dev_id==a.id.split("_")[1]&&t.$set(a,"status",e.dev_status)}))})))}))})))}}))},websocketChannelonclose:function(e){this.lockChannelReconnect=!1},handleNodeClick:function(e,t){var a=this;this.$refs.treeForm.setCheckedKeys([e.id]),this.dataForm.chlId=-1!=String(e.id).indexOf("_")?e.id.split("_")[0]:"",this.dataForm.deviceName=-1!=String(e.id).indexOf("_")?e.id.split("_")[1]:e.id,this.$nextTick((function(){a.dataForm.deviceName?a.selectDevice():(a.ptype=null,a.getDataList())}))},selectDevice:function(){this.ptype=null,this.dataForm.tagname="",this.dataForm.deviceName?1!=this.dataForm.deviceName?this.getdeviceInfo(this.dataForm.deviceName):(this.ptype=2,this.querySearch()):this.querySearch()},getdeviceInfo:function(e){var t=this;if(e){if(!t.$hasPermission("deviceinfo:selectByDevidAndGwsn:permission.do"))return void t.$message.warning("暂无设备信息查询权限, 请联系管理员");t.$http.get("/info/deviceinfo/getByDevidAndGwsn",{params:{devid:e,gwsn:t.dataForm.gwsn}}).then((function(e){var a=e.data;if(0!=a.code)return t.$message.error(a.msg);t.ptype=a.data[0].ptype,t.getDataList(),1!==t.ptype&&0!==t.ptype||t.getGuidList(a.data[0].chlid)})).catch((function(e){return!1}))}},getGuidList:function(e){var t=this;t.guidFuncodeList=[],t.$hasPermission("channelinfo:info:select:permission.do")?t.$http.get("/info/channelinfo/getByChliId",{params:{chlid:e,gwsn:t.dataForm.gwsn}}).then((function(e){var a=e.data;if(0!=a.code)return t.$message.error(a.msg);t.dataForm.collecttypec=[],t.$hasPermission("protocolinfo:select:permission.do")?t.$http.get("/info/protocolinfo/proguid",{params:{guid:a.data[0].chlprotocol}}).then((function(e){var a=e.data,r=JSON.parse(a.data[0].funccode).data;r.length>0&&r.forEach((function(e){var a={FuncCode:e.FuncCode,description:-1!=e.description.indexOf("(")?e.description.split("(")[0]:e.description};t.guidFuncodeList.push(a)}))})).catch((function(e){return!1})):t.$message.warning("暂无协议信息查询权限, 请联系管理员")})).catch((function(e){return!1})):t.$message.warning("暂无通道信息查询权限, 请联系管理员")},handleFuncode:function(e){this.selectFuncCode=e,this.querySearch()},pageSizeChangeHandle:function(e){this.page=1,this.limit=e,this.getDataList()},pageCurrentChangeHandle:function(e){this.page=e,this.getDataList()},querySearch:function(){this.page=1,this.getDataList()},realtimedataChange:function(e){var t=this,a=e?1:0;if(0===a)t.websocket&&(t.websocket.close(),t.websocket=null),t.fastrefreshTimer&&(clearInterval(t.fastrefreshTimer),t.fastrefreshTimer=null),t.webTimer&&(clearInterval(t.webTimer),t.webTimer=null),t.fastrefreshWebsocket&&(t.fastrefreshWebsocket.close(),t.fastrefreshWebsocket=null),t.writeValueWebsocket&&(t.writeValueWebsocket.close(),t.writeValueWebsocket=null),t.websocketData={key:[]},t.storeDataList.length>0&&t.$message.success(this.$t("deviceData.realTimeRefreshTurnedOff"));else if(t.$hasPermission("factual:data:select:websocket")){t.createWebSocket();var r=0;t.webTimer=setInterval((function(){t.handleMessage()}),r);var i=setTimeout((function(){r=1e3,clearTimeout(i)}))}else t.$message.warning("暂无实时数据获取权限, 请联系管理员")},newArr:function(e){for(var t=[],a=0;a<e.length;a++)-1==t.indexOf(e[a])&&t.push(e[a]);return t},getDataList:function(){var e=this,t="",a={};if(e.total=0,e.dataList=[],e.dataTableList=[],e.allTagList=[],e.websocketData={key:[]},e.fastrefreshTimer&&(clearInterval(e.fastrefreshTimer),e.fastrefreshTimer=null),e.webTimer&&(clearInterval(e.webTimer),e.webTimer=null),e.fastrefreshWebsocket&&(e.fastrefreshWebsocket.close(),e.fastrefreshWebsocket=null),e.websocket&&(e.websocket.close(),e.websocket=null),e.writeValueWebsocket&&(e.writeValueWebsocket.close(),e.writeValueWebsocket=null),!e.dataForm.gwsn)return e.$message.info(e.$t("project.pleaseSelectTheGatewayFirstBeforeConductingTheQuery"));if("{}"==JSON.stringify(e.$route.query)){if(e.$refs.treeForm.getCheckedNodes().length<=0)return e.$message.info(e.$t("deviceData.pleaseSelectTheDeviceFirstBeforeConductingTheQuery"))}else if(null==e.dataForm.deviceName)return e.$message.info(e.$t("deviceData.pleaseSelectTheDeviceFirstBeforeConductingTheQuery"));if(0==e.ptype){if(!e.$hasPermission("taginfo:select:permission.do"))return void e.$message.warning("暂无测点查询权限, 请联系管理员");t="/info/taginfo/selectTags.do",a={page:e.page,limit:e.limit,gwsn:e.dataForm.gwsn,alarmtype:e.dataForm.alarmtype,tagchlid:e.dataForm.chlId,deviceid:e.dataForm.deviceName,sort:"objaddr"==e.sname?e.sname+"+0 "+e.sort:e.sname+" "+e.sort},e.dataForm.tagname&&(a["sname"]=e.dataForm.tagname.replace(/_/g,"\\_").replace(/%/g,"\\%")),e.dataForm.collecttypec.length>0&&(a["collecttypec"]=e.selectFuncCode.join(","))}if(1===e.ptype){if(!e.$hasPermission("transtaginfo:select:permission.do"))return void e.$message.warning("暂无测点查询权限, 请联系管理员");t="/info/transtaginfo/selectTransTags.do",a={page:e.page,limit:e.limit,gwsn:e.dataForm.gwsn,alarmtype:e.dataForm.alarmtype,tagchlid:e.dataForm.chlId,deviceid:e.dataForm.deviceName,sort:"objaddr"==e.sname?"a."+e.sname+"+0 "+e.sort:e.sname+" "+e.sort},e.dataForm.tagname&&(a["sname"]=e.dataForm.tagname.replace(/_/g,"\\_").replace(/%/g,"\\%")),e.dataForm.collecttypec.length>0&&(a["collecttypec"]=e.selectFuncCode.join(","))}if(2==e.ptype){if(!e.$hasPermission("taginfo:select:permission.do"))return void e.$message.warning("暂无测点查询权限, 请联系管理员");t="/info/taginfo/selectTags.do",a={page:e.page,limit:e.limit,gwsn:e.dataForm.gwsn,alarmtype:e.dataForm.alarmtype,sort:"objaddr"==e.sname?e.sname+"+0 "+e.sort:e.sname+" "+e.sort,deviceid:1},e.dataForm.tagname&&(a["sname"]=e.dataForm.tagname.replace(/_/g,"\\_").replace(/%/g,"\\%"))}if(null==e.ptype){if(!e.$hasPermission("taginfo:select:permission.do"))return void e.$message.warning("暂无测点查询权限, 请联系管理员");t="/info/taginfo/factualPage.do",a={pageNum:e.page,pageSize:e.limit,gwsn:e.dataForm.gwsn,alarmtype:e.dataForm.alarmtype,sort:"objaddr"==e.sname?"ObjAddr "+e.sort:"TagId "+e.sort},e.dataForm.tagname&&(a["sname"]=e.dataForm.tagname)}e.dataForm.isCheck||(e.dataForm.isCheck=!0),e.dataListLoading=!0,e.$http.get(t,{params:a}).then((function(t){var a=t.data;if(e.multipleSelectionAll=[],e.$refs.recordTable.clearCheckboxRow(),e.$refs.recordTable.clearCheckboxReserve(),0==e.ptype||1==e.ptype||2===e.ptype?0!=a.code||"暂无此条件数据!"==a.data?(e.storeDataList=[],e.dataList=[],e.dataTableList=[],e.allTagList=[],e.total=0,e.dataListLoading=!1):(e.storeDataList=a.data.rows,e.total=Number(a.data.total)):null==e.ptype&&(0!=a.code?(e.storeDataList=[],e.dataList=[],e.dataTableList=[],e.allTagList=[],e.total=0,e.dataListLoading=!1):(e.storeDataList=a.data.rows,e.total=Number(a.data.total))),e.storeDataList.length>0)if(1===e.ptype){for(var r=[],i=0;i<e.storeDataList.length;i++)r.push(e.storeDataList[i].transid);if(!e.$hasPermission("taginfo:select:permission.do"))return void e.$message.warning("暂无测点查询权限, 请联系管理员");e.$http.get("/info/taginfo/getTagid",{params:{ids:r.join(","),gwsn:e.dataForm.gwsn}}).then((function(t){var a=t.data,r=a.data;if(!(r.length>0))return e.$message.error(e.$t("deviceData.correspondingCollectionMeasurementPointCannotBeFound"));var i,l=f(e.storeDataList);try{for(l.s();!(i=l.n()).done;){var s,n=i.value,o=f(r);try{for(o.s();!(s=o.n()).done;){var c=s.value;n.tagname==c.tanInfoName&&(n.transid=c.tagid,n.alarmtype=c.alarmType,n.tagrwprop=c.tagrwProp)}}catch(d){o.e(d)}finally{o.f()}}}catch(d){l.e(d)}finally{l.f()}if(e.dataList=e.storeDataList,e.dataTableList=e.storeDataList,e.dataListLoading=!1,e.dataList.length>0&&(e.dataList.forEach((function(t){e.allTagList.push(t.transid)})),e.allTagList=e.newArr(e.allTagList),e.allTagList.length>0))if(e.$hasPermission("factual:data:select:websocket")){e.createWebSocket(),e.webTimer&&(clearInterval(e.webTimer),e.webTimer=null);var u=0;e.webTimer=setInterval((function(){e.handleMessage()}),u);var m=setTimeout((function(){u=1e3,clearTimeout(m)}))}else e.$message.warning("暂无实时数据获取权限, 请联系管理员")}))}else{e.dataList=e.storeDataList,e.dataTableList=e.storeDataList,e.dataListLoading=!1;for(var l=0;l<e.dataList.length;l++)e.allTagList.push(e.dataList[l].tagid);if(e.allTagList.length>0)if(e.$hasPermission("factual:data:select:websocket")){e.createWebSocket(),e.webTimer&&(clearInterval(e.webTimer),e.webTimer=null);var s=0;e.webTimer=setInterval((function(){e.handleMessage()}),s);var n=setTimeout((function(){s=1e3,clearTimeout(n)}))}else e.$message.warning("暂无实时数据获取权限, 请联系管理员")}else e.total=0,e.dataList=[],e.dataTableList=[],e.storeDataList=[],e.allTagList=[],e.dataListLoading=!1})).catch((function(e){return!1}))},formatterCollDescript:function(e){var t=e.row;e.column;if(t.hasOwnProperty("collDescript")&&t.collDescript)return-1!=t.collDescript.indexOf("(")?t.collDescript.split("(")[0]:t.collDescript},sortChange:function(e){e.column;var t=e.property,a=e.order;"quality"!=t&&a&&(this.sname=t,this.sort=a,this.getDataList())},reduceSame:function(e){var t={};return e.reduce((function(e,a){return!t[a.id]&&(t[a.id]=e.push(a)),e}),[])},createfastrefreshWebsocket:function(e){if(this.$hasPermission("socketTwo:fastrefresh:select:websocket")){if(!("WebSocket"in window))return _this.$message.error(this.$t("websocket.notSupportWebsocket"));var t=this,a=null;if(a=t.allTagList.join(","),a&&t.dataForm.isCheck)try{var r=window.SITE_CONFIG["socketUrl"]+e+"?token="+t.$getToken();t.fastrefreshWebsocket=new WebSocket(r),t.initfastrefreshWebSocket()}catch(i){}}else this.$message.warning("暂无快速刷新权限, 请联系管理员")},initfastrefreshWebSocket:function(){this.fastrefreshWebsocket.onopen=this.fastrefreshWebsocketonopen,this.fastrefreshWebsocket.onmessage=this.fastrefreshWebsocketonmessage,this.fastrefreshWebsocket.onclose=this.fastrefreshWebsocketonclose},fastrefreshWebsocketonopen:function(){},fastrefreshWebsocketonmessage:function(e){this.isJsonString(e.data)&&this.fastrefreshWebsocket&&(this.fastrefreshWebsocket.close(),this.fastrefreshWebsocket=null)},fastrefreshWebsocketonclose:function(e){},createWebSocket:function(){var e=this;if(e.websocketData={key:[]},e.websocketTime=1e3,!("WebSocket"in window))return e.$message.error(this.$t("websocket.notSupportWebsocket"));var t=e.allTagList.join(",");if(t&&e.dataForm.isCheck)try{var a=e.encryMD5(e.dataForm.gwsn),r=window.SITE_CONFIG["socketUrl"]+"factualdatawebsocket/".concat(e.dataForm.gwsn,"/").concat(t,"/").concat(a)+"?token="+e.$getToken();e.websocket=new WebSocket(r),e.initWebSocket()}catch(i){e.reConnect()}},initWebSocket:function(){this.websocket.onopen=this.websocketonopen,this.websocket.onerror=this.websocketonerror,this.websocket.onmessage=this.websocketonmessage,this.websocket.onclose=this.websocketonclose},reConnect:function(){var e=this;e.lockReconnect||(e.recconectTimer&&clearTimeout(e.recconectTimer),e.recconectTimer=setTimeout((function(){e.createWebSocket(),e.webTimer&&(clearInterval(e.webTimer),e.webTimer=null);var t=0;e.webTimer=setInterval((function(){e.handleMessage()}),t);var a=setTimeout((function(){t=1e3,clearTimeout(a)}))}),3e3))},websocketonopen:function(){this.lockReconnect=!0,this.heartCheck().start(),this.getGwsnRefreshController()},getGwsnRefreshController:function(){var e=this,t="socketTwo/fastrefresh/"+e.dataForm.gwsn+"/1/"+e.encryMD5(e.dataForm.gwsn);e.createfastrefreshWebsocket(t),e.$nextTick((function(){setTimeout((function(){e.fastrefreshWebsocket&&(e.fastrefreshWebsocket.close(),e.fastrefreshWebsocket=null)}),2e4),e.fastrefreshTimer=setInterval((function(){var t="socketTwo/fastrefresh/"+e.dataForm.gwsn+"/1/"+e.encryMD5(e.dataForm.gwsn)+"?token="+e.$getToken();e.createfastrefreshWebsocket(t),e.$nextTick((function(){setTimeout((function(){e.fastrefreshWebsocket&&(e.fastrefreshWebsocket.close(),e.fastrefreshWebsocket=null)}),2e4)}))}),6e4)}))},websocketonerror:function(e){this.lockReconnect=!1,this.reConnect()}},Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(r,"isJsonString",(function(e){try{if("object"==Object(o["a"])(JSON.parse(e)))return!0}catch(t){}return!1})),"websocketonmessage",(function(e){var t=this,a=e.data;if(t.heartCheck().reset(),t.isJsonString(a)){if(t.dataList.length>0&&"连接成功"!=a&&"No data that meets current conditions"!=a&&"No current data"!=a&&"connect success"!=a){var r=JSON.parse(e.data);r&&(t.$set(t.dataForm,"gwsnLocalTime",r.local_time),t.websocketData.key.push(r))}}else"连接成功"!=a&&"No data that meets current conditions"!=a&&"No current data"!=a&&"connect success"!=a&&t.$message.error(t.$t("deviceData.realtimeValueIncorrectData"))})),"handleMessage",(function(){var e=this,t=e.websocketData["key"];if(t.length>0)if(1==e.ptype){var a,r=f(t);try{for(r.s();!(a=r.n()).done;){var i=a.value,l=i.data;if("{}"!=JSON.stringify(l))for(var s in l)if(""!=l[s]){var n,o=JSON.parse(l[s]),c=f(e.dataTableList);try{for(c.s();!(n=c.n()).done;){var u=n.value;if(u.transid==s){var m=3;e.$set(u,"quality",o.q),e.$set(u,"variableValue","number"==typeof o.v?Math.round(o.v*Math.pow(10,m))/Math.pow(10,m):o.v),e.$set(u,"time",o.t?e.timestampToTime(o.t):i.local_time)}}}catch(V){c.e(V)}finally{c.f()}1==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return e.isOringinValue?t.variableValue-e.dataForm.rightValue>0:getFinallyValueByk(t.variableValue,t.k)-e.dataForm.rightValue>0})):2==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return e.isOringinValue?t.variableValue-e.dataForm.rightValue<0:getFinallyValueByk(t.variableValue,t.k)-e.dataForm.rightValue<0})):3==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return e.isOringinValue?t.variableValue-e.dataForm.rightValue==0:getFinallyValueByk(t.variableValue,t.k)-e.dataForm.rightValue==0})):4==e.dataForm.middleValue&&""!=e.dataForm.leftValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return e.isOringinValue?t.variableValue-e.dataForm.leftValue>=0&&t.variableValue-e.dataForm.rightValue<=0:getFinallyValueByk(t.variableValue,t.k)-e.dataForm.leftValue>=0&&getFinallyValueByk(t.variableValue,t.k)-e.dataForm.rightValue<=0})):e.dataList=e.dataTableList,e.websocketData["key"].length>=e.dataTableList.length&&(e.websocketData["key"]=[])}}}catch(V){r.e(V)}finally{r.f()}}else{var d,p=f(t);try{for(p.s();!(d=p.n()).done;){var h=d.value,g=h.data;if("{}"!=JSON.stringify(g))for(var b in g)if(g[b]&&""!=g[b]){var w,v=JSON.parse(g[b]),y=f(e.dataTableList);try{for(y.s();!(w=y.n()).done;){var k=w.value;if(k.tagid==b){var F=3;e.$set(k,"quality",v.q),e.$set(k,"variableValue","number"==typeof v.v?Math.round(v.v*Math.pow(10,F))/Math.pow(10,F):v.v),e.$set(k,"time",v.t?e.timestampToTime(v.t):h.local_time)}}}catch(V){y.e(V)}finally{y.f()}1==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return t.variableValue-e.dataForm.rightValue>0})):2==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return t.variableValue-e.dataForm.rightValue<0})):3==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return t.variableValue-e.dataForm.rightValue==0})):4==e.dataForm.middleValue&&""!=e.dataForm.leftValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return t.variableValue-e.dataForm.leftValue>=0&&t.variableValue-e.dataForm.rightValue<=0})):e.dataList=e.dataTableList}}}catch(V){p.e(V)}finally{p.f()}}})),"isNumber",(function(e){return null!==e&&void 0!==e&&("boolean"!==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e))))})),"getFinallyValueByk",(function(e,t){return this.isNumber(e)&&this.isNumber(t)?new Decimal(e).mul(t).toString():e})),"websocketonclose",(function(e){this.lockReconnect=!1})),"timestampToTime",(function(e){if(10==String(e).length){var t=new Date(1e3*e),a=1900+t.getYear(),r="0"+(t.getMonth()+1),i="0"+t.getDate(),l="0"+t.getHours(),s="0"+t.getMinutes(),n="0"+t.getSeconds();return a+"-"+r.substring(r.length-2,r.length)+"-"+i.substring(i.length-2,i.length)+" "+l.substring(l.length-2,l.length)+":"+s.substring(s.length-2,s.length)+":"+n.substring(n.length-2,n.length)}var o=new Date(e),c=o.getFullYear(),u=o.getMonth()+1,m=o.getDate(),d=o.getHours(),p=o.getMinutes(),h=o.getSeconds(),f=o.getMilliseconds(),g=u<10?"0"+u:u,b=m<10?"0"+m:m,w=d<10?"0"+d:d,v=p<10?"0"+p:p,y=h<10?"0"+h:h,k=f<10?"00"+f:f<100?"0"+f:f;return c+"-"+g+"-"+b+" "+w+":"+v+":"+y+"."+k})),"resetExcelData",(function(){var e=this;this.excelData=[],this.dataList.length>0&&this.dataList.forEach((function(t){var a={gwsn:e.dataForm.gwsn,tagname:t.tagname||"",tagcomment:t.tagcomment||"",variableValue:t.variableValue,quality:0==t.quality?e.$t("deviceData.good"):49==t.quality?e.$t("deviceData.manualSetting"):50==t.quality?e.$t("deviceData.initializing"):100==t.quality?e.$t("deviceData.bad"):"",time:t.time||"",objaddr:t.objaddr};0!=e.ptype&&1!=e.ptype||(a["collecttypec"]=-1!=t.collDescript.indexOf("(")?t.collDescript.split("(")[0]:t.collDescript),1!=e.ptype&&(a["alarmtype"]=0==t.alarmtype?e.$t("attribute.visualValue"):1==t.alarmtype?e.$t("attribute.switchValue"):2==t.alarmtype?e.$t("attribute.ym"):3==t.alarmtype?e.$t("attribute.yk"):4==t.alarmtype?e.$t("attribute.yt"):""),2!=e.ptype&&(a["devname"]=t.hasOwnProperty("devicesInfoEntityList")?t.devicesInfoEntityList[0].devname:t.devname),e.excelData.push(a)}))})),"exportExcel",(function(){var e=this;Promise.resolve().then(function(){e.resetExcelData(),e.$nextTick((function(){var t=[];0==e.ptype?t=[{label:e.$t("gwsn.number"),prop:"gwsn"},{label:e.$t("deviceInfo.devname"),prop:"devname"},{label:e.$t("attribute.tagname"),prop:"tagname"},{label:e.$t("attribute.modelattribute"),prop:"tagcomment"},{label:e.$t("deviceData.measurementPointValue"),prop:"variableValue"},{label:e.$t("deviceData.quality"),prop:"quality"},{label:e.$t("deviceData.collectionTime"),prop:"time"},{label:e.$t("attribute.alarmtype"),prop:"alarmtype"},{label:e.$t("attribute.collectType"),prop:"collecttypec"},{label:e.$t("attribute.address"),prop:"objaddr"}]:1==e.ptype?t=[{label:e.$t("gwsn.number"),prop:"gwsn"},{label:e.$t("deviceInfo.devname"),prop:"devname"},{label:e.$t("attribute.tagname"),prop:"tagname"},{label:e.$t("attribute.modelattribute"),prop:"tagcomment"},{label:e.$t("deviceData.measurementPointValue"),prop:"variableValue"},{label:e.$t("deviceData.quality"),prop:"quality"},{label:e.$t("deviceData.collectionTime"),prop:"time"},{label:e.$t("attribute.transType"),prop:"collecttypec"},{label:e.$t("attribute.address"),prop:"objaddr"}]:2==e.ptype?t=[{label:e.$t("gwsn.number"),prop:"gwsn"},{label:e.$t("deviceInfo.devname"),prop:"tagname"},{label:e.$t("attribute.modelattribute"),prop:"tagcomment"},{label:e.$t("deviceData.measurementPointValue"),prop:"variableValue"},{label:e.$t("deviceData.quality"),prop:"quality"},{label:e.$t("deviceData.collectionTime"),prop:"time"},{label:e.$t("attribute.alarmtype"),prop:"alarmtype"},{label:e.$t("attribute.address"),prop:"objaddr"}]:null==e.ptype&&(t=[{label:e.$t("gwsn.number"),prop:"gwsn"},{label:e.$t("deviceInfo.devname"),prop:"devname"},{label:e.$t("attribute.tagname"),prop:"tagname"},{label:e.$t("attribute.modelattribute"),prop:"tagcomment"},{label:e.$t("deviceData.measurementPointValue"),prop:"variableValue"},{label:e.$t("deviceData.quality"),prop:"quality"},{label:e.$t("deviceData.collectionTime"),prop:"time"},{label:e.$t("attribute.alarmtype"),prop:"alarmtype"},{label:e.$t("attribute.address"),prop:"objaddr"}]);for(var a=[],r=[],i=0;i<t.length;i++)a[i]=t[i].label,r[i]=t[i].prop;var l=a,s=r,n=e.excelData,o=e.formatJson(s,n);Object(h["a"])(l,o,e.$t("deviceData.RealTimeData")+e.dataForm.gwsn+"_"+(new Date).getTime())}))}.bind(null,a)).catch(a.oe)})),"getConfiguration",(function(){var e=this,t={sn:e.dataForm.gwsn};e.$hasPermission("info:gwbaseinfo:select")?e.$http.get("/info/gwbaseinfo",{params:t}).then((function(t){var a=t.data;if(0!=a.code)return!1;sessionStorage.setItem("gwsn",e.dataForm.gwsn),sessionStorage.setItem("prjId",a.data.prjId),sessionStorage.setItem("gwDesc",a.data.gwDesc),sessionStorage.setItem("model","PBox1200-4G"===a.data.model?a.data.model:a.data.hasOwnProperty("modelr")?a.data.modelr||"":a.data.model||""),sessionStorage.setItem("gwSoftV",a.data.softV),localStorage.setItem("creator",e.$store.state.user.id),localStorage.setItem("superAdmin",e.$store.state.user.superAdmin),e.queryParams.hasOwnProperty("per")&&0==e.queryParams.per?sessionStorage.setItem("per",0):sessionStorage.setItem("per",1);var r=e.$router.resolve({path:"/channelinfo"});window.open(r.href,"_blank")})).catch((function(e){return!1})):e.$message.warning("暂无网关信息查询权限, 请联系管理员")})),Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(r,"formatJson",(function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))})),t.map((function(t){return e.map((function(e){return t[e]}))}))})),"writeValue",(function(e,t){var a=this;this.$hasPermission("writevalue:websocket")?(0==t.tagrwprop?this.specialWriteValueTypeList=[{label:"人工置数",value:10},{label:"取消人工置数",value:11}]:0==t.alarmtype?this.specialWriteValueTypeList=[{label:"直接写值",value:0},{label:"偏移写值",value:1},{label:"随机写值",value:3},{label:"人工置数",value:10},{label:"遥调",value:7},{label:"取消人工置数",value:11}]:this.specialWriteValueTypeList=[{label:"直接写值",value:0},{label:"偏移写值",value:1},{label:"随机写值",value:3},{label:"人工置数",value:10},{label:"遥控",value:4},{label:"取消人工置数",value:11}],this.writevalueForm.type=this.specialWriteValueTypeList.find((function(e){return e.value==a.writevalueForm.type}))?this.writevalueForm.type:this.specialWriteValueTypeList[0].value,this.dialogTableVisible=!0,this.storeGwsn!=this.dataForm.gwsn&&(this.writevalueForm.safePassword=""),this.writevalueForm.sn=this.dataForm.gwsn,1===this.ptype?this.writevalueForm.id=t.transid:this.writevalueForm.id=t.tagid,this.writevalueForm.name=t.tagname,this.writevalueForm.writevalue=t.variableValue,t.hasOwnProperty("alarmtype")&&null!=t.alarmtype&&1==t.alarmtype&&(0==t.variableValue?this.writevalueForm.writevalue=1:1==t.variableValue&&(this.writevalueForm.writevalue=0)),1===this.ptype&&(0==t.variableValue?this.writevalueForm.writevalue=1:1==t.variableValue&&(this.writevalueForm.writevalue=0)),this.$nextTick((function(){4!=a.writevalueForm.type&&a.$refs.input&&a.$refs.input.focus()}))):this.$message.warning("暂无写值权限, 请联系管理员")})),"handleClose",(function(){this.storeGwsn=this.writevalueForm.sn,this.writeValueWebsocket&&(this.writeValueWebsocket.close(),this.writeValueWebsocket=null),this.writeLoading=!1,this.dialogTableVisible=!1})),"randomFunc",(function(e,t){return Math.floor(Math.random()*(t-e))+e})),"handleConfirm",(function(){var e=this;e.$hasPermission("tgwinfo:select:permission.do")?e.$hasPermission("writevalue:websocket")?e.$refs["writevalueForm"].validate((function(t){if(!t)return!1;e.$http.get("/info/tgwinfo/tgwinfoNameAndPwd",{params:{gwsn:e.writevalueForm.sn,pwd:e.writevalueForm.safePassword}}).then((function(t){var a=t.data;if("fail"==a.msg)e.$message.error(a.data),e.writevalueForm.safePassword="";else{e.writeLoading=!0,e.storeGwsn=e.writevalueForm.sn;var r=0==e.writevalueForm.type?0:1==e.writevalueForm.type?1:3==e.writevalueForm.type?3:4==e.writevalueForm.type?e.writevalueForm.ykType:7==e.writevalueForm.type?e.writevalueForm.ytType:e.writevalueForm.type,i=0==e.writevalueForm.type?e.writevalueForm.writevalue:1==e.writevalueForm.type?Number(e.writevalueForm.writevalue)+e.writevalueForm.offset:3==e.writevalueForm.type?e.randomFunc(e.writevalueForm.lowerlimit,e.writevalueForm.upperlimit):(4==e.writevalueForm.type||5==e.writevalueForm.type||8==e.writevalueForm.type||e.writevalueForm.type,e.writevalueForm.writevalue),l="writevalue/"+e.writevalueForm.sn+"/"+r+"/"+e.writevalueForm.id+"/"+e.writevalueForm.reply+"/"+e.writevalueForm.timeout+"/"+i+"/"+e.encryMD5(e.writevalueForm.sn);e.createWriteValueWebsocket(l),setTimeout((function(){if(e.writeValueWebsocket)return e.writeLoading=!1,e.writeValueWebsocket.close(),e.writeValueWebsocket=null,e.$message.error(e.$t("issue.timeout"))}),"30000")}})).catch((function(e){return!1}))})):e.$message.warning("暂无写值权限, 请联系管理员"):e.$message.warning("暂无网关密码查询权限, 请联系管理员")})),"createWriteValueWebsocket",(function(e){var t=this;if(t.$hasPermission("writevalue:websocket")){if(!("WebSocket"in window))return t.$message.error(this.$t("websocket.notSupportWebsocket"));try{var a=window.SITE_CONFIG["socketUrl"]+e+"?token="+t.$getToken();t.writeValueWebsocket=new WebSocket(a),t.initWriteValueWebsocket()}catch(r){t.reWriteConnect()}}else t.$message.warning("暂无写值权限, 请联系管理员")})),"initWriteValueWebsocket",(function(){this.writeValueWebsocket.onopen=this.writeValueWebsocketOnOpen,this.writeValueWebsocket.onerror=this.writeValueWebsocketOnError,this.writeValueWebsocket.onmessage=this.writeValueWebsocketOnMessage,this.writeValueWebsocket.onclose=this.writeValueWebsocketOnClose})),"writeValueWebsocketOnOpen",(function(){})),"writeValueWebsocketOnError",(function(e){this.reWriteValueConnect()})),"reWriteValueConnect",(function(){var e=this;e.reConectWriteValueTimer&&clearTimeout(e.reConectWriteValueTimer),e.reConectWriteValueTimer=setTimeout((function(){var t=null,a=null,r=null;e.dialogTableVisible?(t=0==e.writevalueForm.type?0:1==e.writevalueForm.type?1:3==e.writevalueForm.type?3:4==e.writevalueForm.type?e.writevalueForm.ykType:7==e.writevalueForm.type?e.writevalueForm.ytType:e.writevalueForm.type,a=0==e.writevalueForm.type?e.writevalueForm.writevalue:1==e.writevalueForm.type?Number(e.writevalueForm.writevalue)+e.writevalueForm.offset:3==e.writevalueForm.type?e.randomFunc(e.writevalueForm.lowerlimit,e.writevalueForm.upperlimit):(4==e.writevalueForm.type||7==e.writevalueForm.type||10==e.writevalueForm.type||e.writevalueForm.type,e.writevalueForm.writevalue),r="writevalue/"+e.writevalueForm.sn+"/"+t+"/"+e.writevalueForm.id+"/"+e.writevalueForm.reply+"/"+e.writevalueForm.timeout+"/"+a+"/"+e.encryMD5(e.writevalueForm.sn)):e.multipeWriteValueVisible&&(t=0==e.multipeWriteValueForm.type?0:1==e.multipeWriteValueForm.type?1:3==e.multipeWriteValueForm.type?3:4==e.multipeWriteValueForm.type?e.multipeWriteValueForm.ykType:7==e.multipeWriteValueForm.type?e.multipeWriteValueForm.ytType:e.multipeWriteValueForm.type,a=0==e.multipeWriteValueForm.type?e.multipeWriteValueForm.writeValue:1==e.multipeWriteValueForm.type?Number(e.multipeWriteValueForm.writeValue)+e.multipeWriteValueForm.offset:3==e.multipeWriteValueForm.type?e.randomFunc(e.multipeWriteValueForm.lowerlimit,e.multipeWriteValueForm.upperlimit):(4==e.multipeWriteValueForm.type||7==e.multipeWriteValueForm.type||10==e.multipeWriteValueForm.type||e.multipeWriteValueForm.type,e.multipeWriteValueForm.writeValue),r="writevalue/"+e.dataForm.gwsn+"/"+t+"/"+e.multipeWriteValueForm.tagids+"/"+e.multipeWriteValueForm.reply+"/"+e.multipeWriteValueForm.timeout+"/"+a+"/"+e.encryMD5(e.dataForm.gwsn)),e.createWriteValueWebsocket(r)}),3e3)})),Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(r,"writeValueWebsocketOnMessage",(function(e){var t=this;if(!this.isJsonString(e.data))return!1;var a=JSON.parse(e.data).res_content.received,r=JSON.parse(e.data).res_content.results,i={0:this.$t("schedule.statusLog1"),9998:this.$t("deviceData.targetDeviceReplyTimeout"),9997:this.$t("deviceData.writeValueFailed"),9996:this.$t("deviceData.programTimeout")},l="";return e.currentTarget.url.includes("wvs")?1==a?(this.multipleSelectionAll.forEach((function(e){r.forEach((function(a){switch(t.ptype){case 1:e.transid==a.tag_id&&(l+=e.tagname+i[a.result]+"</br>");break;case 0:e.tagid==a.tag_id&&(l+=e.tagname+i[a.result]+"</br>");break;default:e.tagid==a.tag_id&&(l+=e.tagname+i[a.result]+"</br>");break}}))})),this.handleCloseMultipeWriteValue(),this.$message({dangerouslyUseHTMLString:!0,message:l})):(this.writeLoading=!1,this.multipeWriteValueLoading=!1,this.$message.error(this.$t("deviceData.writeValueFailed"))):1==a?(this.handleClose(),this.handleCloseMultipeWriteValue(),this.$message.success(this.$t("deviceData.writeValueSuccessful"))):(this.writeLoading=!1,this.multipeWriteValueLoading=!1,this.$message.error(this.$t("deviceData.writeValueFailed")))})),"writeValueWebsocketOnClose",(function(e){})),"isTimeOut",(function(){document.body.onmouseup=this.startTimer(),document.body.onmousemove=this.startTimer(),document.body.onkeyup=this.startTimer(),document.body.onclick=this.startTimer(),document.body.ontouchend=this.startTimer()})),"startTimer",(function(){var e=this;clearInterval(this.noOptionTimeOut),this.noOptionTimeOut=setInterval((function(){e.dataForm.isCheck?(e.dataForm.isCheck=!1,e.realtimedataChange(!1),clearInterval(e.noOptionTimeOut),e.noOptionTimeOut=null):(clearInterval(e.noOptionTimeOut),e.noOptionTimeOut=null)}),9e5)})),"dragControllerDiv",(function(){for(var e=document.getElementsByClassName("resize"),t=document.getElementsByClassName("left"),a=document.getElementsByClassName("mid"),r=document.getElementsByClassName("box"),i=function(i){e[i].onmousedown=function(l){e[i].style.background="#818181";var s=l.clientX;return e[i].left=e[i].offsetLeft,document.onmousemove=function(l){var n=l.clientX,o=e[i].left+(n-s),c=r[i].clientWidth-e[i].offsetWidth-2;o<32&&(o=32),o>c-150&&(o=c-150),e[i].style.left=o;for(var u=0;u<t.length;u++)t[u].style.width=o+"px",a[u].style.width=r[i].clientWidth-o-10-2+"px"},document.onmouseup=function(t){e[i].style.background="#d6d6d6",document.onmousemove=null,document.onmouseup=null,e[i].releaseCapture&&e[i].releaseCapture()},e[i].setCapture&&e[i].setCapture(),!1}},l=0;l<e.length;l++)i(l)})),"dataListSelectionHandleChange",(function(e){if(this.multipleSelectionAll=this.$refs.recordTable.getCheckboxRecords(!1),this.multipleSelectionAll.length>10)return this.$message.warning(this.$t("deviceData.youHaveSelected")+this.multipleSelectionAll.length+this.$t("deviceData.upTo10DataPoints"))})),"selectAll",(function(e){if(this.multipleSelectionAll=this.$refs.recordTable.getCheckboxRecords(!1),this.multipleSelectionAll.length>10)return this.$message.warning(this.$t("deviceData.youHaveSelected")+this.multipleSelectionAll.length+this.$t("deviceData.upTo10DataPoints"))})),"handleMultipeWriteValue",(function(){var e=this;if(this.$hasPermission("writevalue:websocket")){if(0==this.multipleSelectionAll.length)return this.$message.warning(this.$t("deviceData.pleaseSelectABatchWriteValueDataSource"));if(this.multipleSelectionAll.length>10)return this.$message.warning(this.$t("deviceData.youHaveSelected")+this.multipleSelectionAll.length+this.$t("deviceData.upTo10DataPoints"));this.storeGwsn!=this.dataForm.gwsn&&(this.multipeWriteValueForm.safePassword="");var t=[],a=[],r=[],i=[];this.multipleSelectionAll.forEach((function(l){a.push(l.tagname),r.push(l.alarmtype),i.push(l.tagrwprop),1===e.ptype?t.push(l.transid):t.push(l.tagid)})),this.multipeWriteValueForm.tagids=t.join(","),this.multipeWriteValueForm.tagnames=a.join(","),r=Object(n["a"])(new Set(r)),i=Object(n["a"])(new Set(i)),1==i.length&&0==i[0]?this.specialMultipeWriteValueTypeList=[{label:"人工置数",value:10},{label:"取消人工置数",value:11}]:1==r.length?0==r[0]?this.specialMultipeWriteValueTypeList=[{label:"直接写值",value:0},{label:"偏移写值",value:1},{label:"随机写值",value:3},{label:"人工置数",value:10},{label:"遥调",value:7},{label:"取消人工置数",value:11}]:this.specialMultipeWriteValueTypeList=[{label:"直接写值",value:0},{label:"偏移写值",value:1},{label:"随机写值",value:3},{label:"人工置数",value:10},{label:"遥控",value:4},{label:"取消人工置数",value:11}]:this.specialMultipeWriteValueTypeList=this.writeValueTypeList,this.multipeWriteValueForm.type=this.specialMultipeWriteValueTypeList.find((function(t){return t.value==e.multipeWriteValueForm.type}))?this.multipeWriteValueForm.type:this.specialMultipeWriteValueTypeList[0].value,this.multipeWriteValueVisible=!0,this.$nextTick((function(){4!=e.multipeWriteValueForm.type&&e.$refs.input&&e.$refs.input.focus()}))}else this.$message.warning("暂无写值权限, 请联系管理员")})),"handleCloseMultipeWriteValue",(function(){this.writeValueWebsocket&&(this.writeValueWebsocket.close(),this.writeValueWebsocket=null),this.storeGwsn=this.dataForm.gwsn,this.multipeWriteValueLoading=!1,this.multipeWriteValueVisible=!1})),"handleConfirmMultipeWriteValue",(function(){var e=this;e.$hasPermission("tgwinfo:select:permission.do")?e.$refs["multipeWriteValueForm"].validate((function(t){if(!t)return!1;e.$http.get("/info/tgwinfo/tgwinfoNameAndPwd",{params:{gwsn:e.dataForm.gwsn,pwd:e.multipeWriteValueForm.safePassword}}).then((function(t){var a=t.data;if("fail"==a.msg)e.$message.error(a.data),e.multipeWriteValueForm.safePassword="";else{e.multipeWriteValueLoading=!0,e.storeGwsn=e.dataForm.gwsn;var r=0==e.multipeWriteValueForm.type?0:1==e.multipeWriteValueForm.type?1:3==e.multipeWriteValueForm.type?3:4==e.multipeWriteValueForm.type?e.multipeWriteValueForm.ykType:7==e.multipeWriteValueForm.type?e.multipeWriteValueForm.ytType:e.multipeWriteValueForm.type,i=0==e.multipeWriteValueForm.type?e.multipeWriteValueForm.writeValue:1==e.multipeWriteValueForm.type?Number(e.multipeWriteValueForm.writeValue)+e.multipeWriteValueForm.offset:3==e.multipeWriteValueForm.type?e.randomFunc(e.multipeWriteValueForm.lowerlimit,e.multipeWriteValueForm.upperlimit):(4==e.multipeWriteValueForm.type||7==e.multipeWriteValueForm.type||10==e.multipeWriteValueForm.type||e.multipeWriteValueForm.type,e.multipeWriteValueForm.writeValue),l="writevalue/"+e.dataForm.gwsn+"/"+r+"/"+e.multipeWriteValueForm.tagids+"/"+e.multipeWriteValueForm.reply+"/"+e.multipeWriteValueForm.timeout+"/"+i+"/"+e.encryMD5(e.dataForm.gwsn);e.createWriteValueWebsocket(l),setTimeout((function(){if(e.writeValueWebsocket)return e.multipeWriteValueLoading=!1,e.writeValueWebsocket.close(),e.writeValueWebsocket=null,e.$message.error(e.$t("issue.timeout"))}),11e3)}})).catch((function(e){return!1}))})):e.$message.warning("暂无网关密码查询权限, 请联系管理员")})),Object(s["a"])(Object(s["a"])(r,"watchPrjSearch",p()((function(){var e=document.getElementsByClassName("el-scrollbar__wrap").length;document.getElementsByClassName("el-scrollbar__wrap")[e-1].scrollTo(0,0),this.prjPage=1,this.getPrjList(),this.$refs.prjInput.focus()}),500)),"watchGwsnSearch",p()((function(){var e=document.getElementsByClassName("el-scrollbar__wrap").length;document.getElementsByClassName("el-scrollbar__wrap")[e-1].scrollTo(0,0),this.gwsnPage=1,this.getGwsnList(),this.$refs.gwsnInput.focus()}),500))),watch:{prjSearch:function(e,t){this.watchPrjSearch()},gwsnSearch:function(e,t){this.watchGwsnSearch()},$route:function(e,t){var a=this;if("/runmonitor-equipment-list"!=e.path)a.timer&&(clearInterval(a.timer),a.timer=null),a.reChannelReconnectTimer&&(clearInterval(a.reChannelReconnectTimer),a.reChannelReconnectTimer=null),a.recconectPrjInfoTimer&&(clearInterval(a.recconectPrjInfoTimer),a.recconectPrjInfoTimer=null),a.recconectTimer&&(clearInterval(a.recconectTimer),a.recconectTimer=null),a.reConectWriteValueTimer&&(clearInterval(a.reConectWriteValueTimer),a.reConectWriteValueTimer=null),a.websocket&&a.websocket.readyState===WebSocket.OPEN&&(a.websocket.close(),a.websocket=null),a.webTimer&&(clearInterval(a.webTimer),a.webTimer=null),a.noOptionTimeOut&&(clearInterval(a.noOptionTimeOut),a.noOptionTimeOut=null),a.chlStatusTimer&&(clearInterval(a.chlStatusTimer),a.chlStatusTimer=null),a.websocketChannel&&a.websocketChannel.readyState===WebSocket.OPEN&&(a.websocketChannel.close(),a.websocketChannel=null),a.prjInfoWebsocket&&a.prjInfoWebsocket.readyState===WebSocket.OPEN&&(a.prjInfoWebsocket.close(),a.prjInfoWebsocket=null),a.writeValueWebsocket&&a.writeValueWebsocket.readyState===WebSocket.OPEN&&(a.writeValueWebsocket.close(),a.writeValueWebsocket=null),a.fastrefreshTimer&&(clearInterval(a.fastrefreshTimer),a.fastrefreshTimer=null);else if("{}"==JSON.stringify(a.$route.query))a.isShowSetting=!0,a.queryParams={},a.dataForm.gwsn&&(a.getChlStatusTimer(),a.$refs.treeForm.getCheckedKeys().length>0&&a.getDataList());else if(a.queryParams=a.$route.query,a.queryParams.hasOwnProperty("per"))0==a.queryParams.per?a.isShowSetting=!1:a.isShowSetting=!0,a.prjSearch="共享网关",a.gwsnSearch=a.queryParams.gwsn;else if(a.isShowSetting=!0,a.dataForm.prjName)if(a.$route.query.prjId==a.dataForm.prjName)a.dataForm.gwsn&&a.$route.query.gwsn==a.dataForm.gwsn?(a.getChlStatusTimer(),a.$refs.treeForm.getCheckedKeys().length>0&&a.getDataList()):a.gwsnSearch=a.$route.query.gwsn;else{if(!a.$hasPermission("tprjinfo:select:permission.do"))return void a.$message.warning("暂无项目信息查询权限, 请联系管理员");a.$http.get("/info/tprjinfo/".concat(a.$route.query.prjId),{params:{id:a.$route.query.prjId}}).then((function(e){var t=e.data;if(0!=t.code)return a.$message.error(t.msg);a.prjSearch=t.data.prjName}))}else if(a.dataForm.gwsn)a.$route.query.gwsn==a.dataForm.gwsn?(a.getChlStatusTimer(),a.$refs.treeForm.getCheckedKeys().length>0&&a.getDataList()):a.gwsnSearch=a.$route.query.gwsn;else{if(!a.$hasPermission("tprjinfo:select:permission.do"))return void a.$message.warning("暂无项目信息查询权限, 请联系管理员");a.$http.get("/info/tprjinfo/".concat(a.$route.query.prjId),{params:{id:a.$route.query.prjId}}).then((function(e){var t=e.data;if(0!=t.code)return a.$message.error(t.msg);a.prjSearch=t.data.prjName}))}}},computed:{filteredTableList:function(){var e=this;return 1==e.ptype?1==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return e.isOringinValue?t.variableValue-e.dataForm.rightValue>0:getFinallyValueByk(t.variableValue,t.k)-e.dataForm.rightValue>0})):2==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return e.isOringinValue?t.variableValue-e.dataForm.rightValue<0:getFinallyValueByk(t.variableValue,t.k)-e.dataForm.rightValue<0})):3==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return e.isOringinValue?t.variableValue-e.dataForm.rightValue==0:getFinallyValueByk(t.variableValue,t.k)-e.dataForm.rightValue==0})):4==e.dataForm.middleValue&&""!=e.dataForm.leftValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return e.isOringinValue?t.variableValue-e.dataForm.leftValue>=0&&t.variableValue-e.dataForm.rightValue<=0:getFinallyValueByk(t.variableValue,t.k)-e.dataForm.leftValue>=0&&getFinallyValueByk(t.variableValue,t.k)-e.dataForm.rightValue<=0})):e.dataList=e.dataTableList:1==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return t.variableValue-e.dataForm.rightValue>0})):2==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return t.variableValue-e.dataForm.rightValue<0})):3==e.dataForm.middleValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return t.variableValue-e.dataForm.rightValue==0})):4==e.dataForm.middleValue&&""!=e.dataForm.leftValue&&""!=e.dataForm.rightValue?e.dataList=e.dataTableList.filter((function(t){return t.variableValue-e.dataForm.leftValue>=0&&t.variableValue-e.dataForm.rightValue<=0})):e.dataList=e.dataTableList,e.dataList}},mounted:function(){var e=this;this.dragControllerDiv(),this.init(),window.onresize=function(){return function(){e.scrollTreeHeight=window.innerHeight-225,e.scrollTableHeight=window.innerHeight-220-50}()}},activated:function(){this.isTimeOut()},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=null),this.reChannelReconnectTimer&&(clearInterval(this.reChannelReconnectTimer),this.reChannelReconnectTimer=null),this.recconectPrjInfoTimer&&(clearInterval(this.recconectPrjInfoTimer),this.recconectPrjInfoTimer=null),this.recconectTimer&&(clearInterval(this.recconectTimer),this.recconectTimer=null),this.reConectWriteValueTimer&&(clearInterval(this.reConectWriteValueTimer),this.reConectWriteValueTimer=null),this.websocket&&this.websocket.readyState===WebSocket.OPEN&&(this.websocket.close(),this.websocket=null),this.webTimer&&(clearInterval(this.webTimer),this.webTimer=null),this.noOptionTimeOut&&(clearInterval(this.noOptionTimeOut),this.noOptionTimeOut=null),this.chlStatusTimer&&(clearInterval(this.chlStatusTimer),this.chlStatusTimer=null),this.websocketChannel&&this.websocketChannel.readyState===WebSocket.OPEN&&(this.websocketChannel.close(),this.websocketChannel=null),this.prjInfoWebsocket&&this.prjInfoWebsocket.readyState===WebSocket.OPEN&&(this.prjInfoWebsocket.close(),this.prjInfoWebsocket=null),this.writeValueWebsocket&&this.writeValueWebsocket.readyState===WebSocket.OPEN&&(this.writeValueWebsocket.close(),this.writeValueWebsocket=null),this.fastrefreshTimer&&(clearInterval(this.fastrefreshTimer),this.fastrefreshTimer=null)}},v=w,y=(a("20db"),a("2877")),k=Object(y["a"])(v,i,l,!1,null,"d1caea80",null);t["default"]=k.exports}}]);