(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bdf0b"],{"2dad":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("section",[t("el-dialog",{attrs:{visible:e.visible,title:"pass"===e.type?"授权通过":"授权拒绝","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.visible=t},close:e.handleClose}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,"label-position":"left","label-width":"100px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmitHandle()}}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"sn",label:"网关编号"}},[t("el-input",{attrs:{disabled:"",size:"small",placeholder:"请输入网关编号"},model:{value:e.dataForm.sn,callback:function(t){e.$set(e.dataForm,"sn",t)},expression:"dataForm.sn"}})],1),t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{prop:"proname",label:10==e.soft?"客户名称":"项目名称"}},[t("el-input",{attrs:{disabled:"",size:"small",placeholder:10==e.soft?"请输入客户名称":"请输入项目名称"},model:{value:e.dataForm.proname,callback:function(t){e.$set(e.dataForm,"proname",t)},expression:"dataForm.proname"}})],1),t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"授权软件"}},[t("el-autocomplete",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small",clearable:"","fetch-suggestions":e.querySearchAsync,placeholder:"请输入授权软件"},on:{select:e.handleSelect},model:{value:e.dataForm.softName,callback:function(t){e.$set(e.dataForm,"softName",t)},expression:"dataForm.softName"}})],1),t("el-form-item",{attrs:{prop:"expiretime",label:"过期时间"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,size:"small",type:"datetime",placeholder:"请选择过期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.dataForm.expiretime,callback:function(t){e.$set(e.dataForm,"expiretime",t)},expression:"dataForm.expiretime"}})],1),t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{prop:"desc",label:"备注"}},[t("el-input",{attrs:{size:"small",type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入备注"},model:{value:e.dataForm.desc,callback:function(t){e.$set(e.dataForm,"desc",t)},expression:"dataForm.desc"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)],1)},s=[],o=(a("28a5"),a("3835")),r=(a("f559"),a("7f7f"),a("4328")),n=a.n(r),l=a("b047"),c=a.n(l),m={props:["id","sn","soft","protocol","proname","type","expiretime"],data:function(){return{visible:!1,loading:!1,dataForm:{sn:"",softName:"",proname:"",desc:"",expiretime:"2099-12-31 23:59:59"},rules:{sn:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],softName:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},softNameOptions:[{value:"PBOX"},{value:"LOGGER"},{value:"ASDU"},{value:"ASDU-LE"},{value:"ASDU-LX"},{value:"hkw-agent(探针)"},{value:"HKW-NF500(防火墙)"},{value:"HKW-IDS2000(入侵检测)"},{value:"HKW-LAS1000(日志审计系统)"},{value:"HKW-DAS1000(数据库审计系统)"},{value:"LProxyCtrl(领祺代理工具控制端)"},{value:"lqx-daemon(文件传输软件)"},{value:"HKW-OSAS200(安全运维管理系统)"},{value:"HKW-INS8000(网络安全监测装置)"}],pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5},shortcuts:[{text:"一个月有效期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+2592e6),e.$emit("pick",t)}},{text:"三个月有效期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+7776e6),e.$emit("pick",t)}},{text:"一年有效期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+31536e6),e.$emit("pick",t)}}]}}},methods:{init:function(){this.dataForm.sn=this.sn,this.dataForm.softName=this.protocol,this.dataForm.proname=this.proname,this.dataForm.expiretime=this.expiretime,"pass"===this.type?this.dataForm.desc=this.$store.state.user.name+"操作通过":this.dataForm.desc=this.$store.state.user.name+"操作拒绝",this.visible=!0},querySearchAsync:function(e,t){var a=this,i=a.softNameOptions,s=e?i.filter(a.createStateFilter(e)):i;t(s)},createStateFilter:function(e){return function(t){return-1!=t.value.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())}},handleSelect:function(e){this.dataForm.softName=e.value},handleClose:c()((function(){this.visible=!1}),1e3,{leading:!0,trailing:!1}),dataFormSubmitHandle:c()((function(){var e=this,t="/AuthorizeApplication/updateStatus.do",a={id:this.id,status:"pass"===e.type?1:2,ovDate:e.dataForm.expiretime,notes:e.dataForm.desc};e.$hasPermission("AuthorizeApplication:updateStatus:permission.do")?e.$refs["dataForm"].validate((function(i){if(!i)return!1;if(10==e.soft&&"pass"===e.type&&e.dataForm.expiretime.startsWith("2099")){var s=e.dataForm.expiretime.split(" "),r=Object(o["a"])(s,2),l=r[0],c=r[1],m=l.split("-"),d=Object(o["a"])(m,3),p=d[0],u=d[1],f=d[2],h=c.split(":"),v=Object(o["a"])(h,3),g=v[0],b=v[1],F=v[2],y="".concat(p,"年").concat(u,"月").concat(f,"日").concat(g,"时").concat(b,"分").concat(F,"秒");e.$confirm("当前过期时间为[".concat(y,"]，是否继续？"),e.$t("deleteInfo.noticePrompt"),{confirmButtonText:e.$t("confirm"),cancelButtonText:e.$t("cancel"),type:"warning"}).then((function(){e.loading=!0,e.$http.put(t,n.a.stringify(a)).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.data||a.msg);e.loading=!1,e.$message.success(a.msg),e.visible=!1,e.$emit("refreshSnDataList",{sn:e.dataForm.sn})})).catch((function(e){return!1}))})).catch((function(e){}))}else e.loading=!0,e.$http.put(t,n.a.stringify(a)).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.msg);e.loading=!1,e.$message.success(a.msg),e.visible=!1,e.$emit("refreshSnDataList",{sn:e.dataForm.sn})})).catch((function(e){return!1}))})):e.$message.warning("暂无授权"+("pass"===e.type?"通过":"拒绝")+"权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1})}},d=m,p=a("2877"),u=Object(p["a"])(d,i,s,!1,null,"66b3dc32",null);t["default"]=u.exports}}]);