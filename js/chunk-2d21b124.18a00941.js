(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b124"],{bde1:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t("update"):e.$t("add"),"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":(e.$i18n.locale,"120px")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmitHandle()}}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.channel")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("deviceInfo.pleaseSelect")},model:{value:e.dataForm.chlid,callback:function(t){e.$set(e.dataForm,"chlid",t)},expression:"dataForm.chlid"}},e._l(e.chlList,(function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.chlId}},[t("span",{staticStyle:{width:"50%",display:"inline-block","text-align":"left",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:a.label}},[e._v(e._s(a.label))]),t("span",{staticStyle:{color:"#8492a6","font-size":"13px",display:"inline-block",width:"50%","text-align":"right",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:a.chlcomment}},[e._v(e._s(a.chlcomment||e.$t("none")))])])})),1)],1)],1),t("el-col",{attrs:{span:12}},[e.dataForm.id?e._e():t("el-form-item",{attrs:{label:e.$t("deviceInfo.devname"),prop:"devname"}},[t("tooltip",{attrs:{placement:"top-left",mode:"manual",visible:e.tooltipDevicevisible}},[t("div",{attrs:{slot:"outlet"},slot:"outlet"}),t("div",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v(e._s(e.$t("deviceInfo.addMulitipeDevname")))]),t("div",{staticStyle:{"margin-left":"5px",color:"#f00","font-weight":"bolder"},attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("* "+e._s(e.$t("deviceInfo.recommendedToAddMoreThanDevices")))])]),t("el-input",{ref:"devname",attrs:{placeholder:e.$t("deviceInfo.devname"),maxlength:48,clearable:""},on:{input:e.handleDevNameChange,paste:e.handleDevNameChange},model:{value:e.dataForm.devname,callback:function(t){e.$set(e.dataForm,"devname","string"===typeof t?t.trim():t)},expression:"dataForm.devname"}})],1),e.dataForm.id?t("el-form-item",{attrs:{label:e.$t("deviceInfo.devname"),prop:"devname"}},[t("el-input",{ref:"devname",attrs:{placeholder:e.$t("deviceInfo.devname"),maxlength:48,clearable:""},model:{value:e.dataForm.devname,callback:function(t){e.$set(e.dataForm,"devname","string"===typeof t?t.trim():t)},expression:"dataForm.devname"}})],1):e._e()],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.devcommaddr"),prop:"devcommaddr"}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.devicecommaddr"),maxlength:64,clearable:""},model:{value:e.dataForm.devcommaddr,callback:function(t){e.$set(e.dataForm,"devcommaddr",t)},expression:"dataForm.devcommaddr"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.devpublicaddr"),prop:"devpublicaddr"}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.canEmpty"),maxlength:64,clearable:""},model:{value:e.dataForm.devpublicaddr,callback:function(t){e.$set(e.dataForm,"devpublicaddr",t)},expression:"dataForm.devpublicaddr"}})],1)],1)],1),e.showSpecialDesign?e._e():t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.devmanu"),prop:"devmanu"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("deviceInfo.pleaseSelect")},on:{change:e.handleManu},model:{value:e.dataForm.devmanu,callback:function(t){e.$set(e.dataForm,"devmanu",t)},expression:"dataForm.devmanu"}},e._l(e.devManuList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.devmodel"),prop:"devmodel"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("deviceInfo.pleaseSelect")},model:{value:e.dataForm.devmodel,callback:function(t){e.$set(e.dataForm,"devmodel",t)},expression:"dataForm.devmodel"}},e._l(e.devModelList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e.showSpecialDesign?t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.protocolEnergyCode"),prop:"reserve2"}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.pleaseEnterTheProtocolEnergyCode"),maxlength:64,clearable:""},model:{value:e.dataForm.reserve2,callback:function(t){e.$set(e.dataForm,"reserve2",t)},expression:"dataForm.reserve2"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.comPort"),prop:"reserve1",rules:e.showSpecialDesign?[{required:!0,message:e.$t("validate.required"),trigger:"change"}]:[{required:!1,message:e.$t("validate.required"),trigger:"change"}]}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.pleaseEnterComPort"),clearable:"",oninput:"value=value.replace(/^(0+)|[^\\d]+/g, '')",maxlength:2},model:{value:e.dataForm.reserve1,callback:function(t){e.$set(e.dataForm,"reserve1","string"===typeof t?t.trim():t)},expression:"dataForm.reserve1"}})],1)],1)],1):t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.reserve0"),prop:"reserve0"}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.canEmpty"),maxlength:64,clearable:""},model:{value:e.dataForm.reserve0,callback:function(t){e.$set(e.dataForm,"reserve0",t)},expression:"dataForm.reserve0"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.reserve1"),prop:"reserve1"}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.canEmpty"),maxlength:64,clearable:""},model:{value:e.dataForm.reserve1,callback:function(t){e.$set(e.dataForm,"reserve1",t)},expression:"dataForm.reserve1"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.equipmentAvailability"),prop:"valid"}},[t("el-radio-group",{model:{value:e.dataForm.valid,callback:function(t){e.$set(e.dataForm,"valid",t)},expression:"dataForm.valid"}},[t("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("yes")))]),t("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("no")))])],1)],1)],1)],1),t("el-row",[t("el-form-item",{attrs:{label:e.$t("deviceInfo.devcomment"),prop:"devcomment"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:e.$t("attribute.pleaceEnterContent"),maxlength:24},nativeOn:{keydown:function(t){return e.handleKeydown.apply(null,arguments)}},model:{value:e.dataForm.devcomment,callback:function(t){e.$set(e.dataForm,"devcomment",t)},expression:"dataForm.devcomment"}})],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)},i=[],r=(a("8e6e"),a("456d"),a("ade3")),l=(a("ac6a"),a("96cf"),a("1da1")),n=(a("c5f6"),a("28a5"),a("6762"),a("2fdb"),a("55dd"),a("3b2b"),a("4917"),a("a481"),a("4328")),s=a.n(n),d=a("b047"),m=a.n(d);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={props:["queryParams"],data:function(){var e=this;return{showSpecialDesign:!1,storeChlId:"",visible:!1,loading:!1,tooltipDevicevisible:!0,chlList:[],paramsData:[],dataForm:{id:"",chlid:"",devid:"",devname:this.$t("deviceInfo.defaultDevname"),devcommaddr:"1",devpublicaddr:"1",devmanu:"",devmodel:"",reserve0:"",reserve1:"",reserve2:"",devcomment:"",ptype:0,checked:!1,templateid:0,tagsource:0,gwsn:"",valid:0},devManuList:[],devModelList:[],templateList:[],rules:{devname:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{validator:function(t,a,o){if(e.dataForm.id){var i=/^[a-zA-Z0-9-_#\[\.\]\u4e00-\u9fa5]+$/;if(!i.test(a))return o(new Error(e.$t("deviceInfo.devnameNoSpecial")));o()}else if(a){var r=/^[a-zA-Z0-9_#\[\.\]\u4e00-\u9fa5]+$/;if(-1!=a.indexOf("-")){var l=Math.abs(a.substring(a.lastIndexOf("-")).replace(/[^0-9]/gi,""));if(null==a.substring(0,a.lastIndexOf("-")).match(/(\d+)[^0-9]*$/)||null==a.substring(a.lastIndexOf("-"),a.length).match(/(\d+)[^0-9]*$/))return o(new Error(e.$t("deviceInfo.devnameNoRules")));var n=a.substring(0,a.lastIndexOf("-")).match(/(\d+)[^0-9]*$/)[1],s=l-n+1;if(s<=0)return o(new Error(e.$t("deviceInfo.devnameNoRules")));var d=a.lastIndexOf("-"),m=a.substring(0,d),c=a.substring(d+1,a.length),v=r.test(m),p=new RegExp("^[0-9]([0-9])*$").test(c);if(!v)return o(new Error(e.$t("deviceInfo.devnameNoSpecial")));if(!p)return o(new Error(e.$t("deviceInfo.devnameNoRules")));o()}else{if(!r.test(a))return o(new Error(e.$t("deviceInfo.devnameNoSpecial")));o()}}},trigger:"change"}],devcommaddr:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]}}},methods:{init:function(){this.getchlList()},handleKeydown:function(e){"Enter"===e.key&&e.preventDefault()},compareBySort:function(e,t){return e.sort((function(e,a){return e[t]-a[t]}))},handleDevNameChange:function(e){if(String(e).includes("-")&&this.dataForm.devname.substring(this.dataForm.devname.lastIndexOf("-")).replace(/[^0-9]/gi,"")){var t=Math.abs(this.dataForm.devname.substring(this.dataForm.devname.lastIndexOf("-")).replace(/[^0-9]/gi,"")),a=this.dataForm.devname.split(/-(?![^-]*-)/);t=Number(t)-1024>0?1024:t,this.dataForm.devname=a[0]+"-"+t}},getchlList:function(){var e=this,t={gwsn:sessionStorage.getItem("gwsn")};if(e.$hasSessionStorageGwsn()){if(e.chlList=[],!e.$hasSessionStorageGwsn("list:getChlList:select:permission.do"))return void setTimeout((function(){e.$message.warning("暂无全部通道查询权限, 请联系管理员"),e.showSpecialDesign=!1,e.visible=!0,e.loading=!0,e.$nextTick(Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs["dataForm"].resetFields(),e.$refs.devname.focus(),t.next=1,e.getdevModelList();case 1:return t.next=2,e.getTemplateList();case 2:if(!e.dataForm.id){t.next=3;break}return t.next=3,e.getInfo();case 3:case"end":return t.stop()}}),t)}))))}),500);e.$http.get("/list/getChlList.do",{params:t}).then((function(t){var a=t.data;if(0!=a.code)return e.$message.error(a.data||a.msg);if(a.data.length>0){if(a.data.forEach((function(t){if(0==t.chlType){var a={label:t.chlName,value:t.id,chlId:t.chlID,chlcomment:t.chlComment};e.chlList.push(a)}})),!(e.chlList.length>0))return e.$message.warning(e.$t("deviceInfo.noCollectChannelPleaseCreateCollectChannel"));if(e.chlList=e.compareBySort(e.chlList,"chlId"),e.dataForm.id)for(var o=0;o<e.chlList.length;o++){var i=e.chlList[o];if(e.dataForm.chlid==i.chlId){e.dataForm.devid=i.chlId;break}}else if(e.queryParams.chlId)for(var r=0;r<e.chlList.length;r++){var l=e.chlList[r];if(e.queryParams.chlId==l.chlId){e.dataForm.chlid=l.chlId;break}}else e.dataForm.chlid=e.chlList[0].chlId;e.$http.post("/ProcotolTemplate/getAu.do",{}).then((function(t){var a=t.data;0!=a.code?(e.showSpecialDesign=!1,e.visible=!0,e.loading=!0,e.$nextTick((function(){e.$refs["dataForm"].resetFields(),e.$refs.devname.focus(),e.getdevModelList(),e.getTemplateList(),e.dataForm.id&&e.getInfo()}))):(e.showSpecialDesign=!0,e.visible=!0,e.loading=!0,e.$nextTick((function(){e.$refs["dataForm"].resetFields(),e.$refs.devname.focus(),e.dataForm.checked=!0,e.getdevModelList(),e.getTemplateList(),e.dataForm.id&&e.getInfo()})))})).catch((function(t){e.showSpecialDesign=!1,e.visible=!0,e.loading=!0,e.$nextTick((function(){e.$refs["dataForm"].resetFields(),e.$refs.devname.focus(),e.getdevModelList(),e.getTemplateList(),e.dataForm.id&&e.getInfo()}))}))}})).catch((function(e){return!1}))}else e.$message({showClose:!1,message:e.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})},getdevModelList:function(){var e=this,t=[],a={};if(e.devManuList=[],!e.$hasPermission("devtypeinfo:selectlistAll:permission.do"))return e.loading=!1,void e.$message.warning("暂无设备型号查询权限, 请联系管理员");e.$http.post("/info/devtypeinfo/listAll",s.a.stringify({})).then((function(o){var i=o.data,r=i.data;if(r.length>0){for(var l=0;l<r.length;l++){var n=r[l].devPlatform;a[n]||(t.push(r[l]),a[n]=!0)}t.forEach((function(t){var a={label:t.platformName,value:t.devPlatform};e.devManuList.push(a)})),e.dataForm.id||(e.dataForm.devmanu=-1,e.handleManu(e.dataForm.devmanu))}else e.loading=!1})).catch((function(e){return!1}))},handleManu:function(e){var t=this,a={devPlatform:e};if(t.devModelList=[],!t.$hasPermission("devtypeinfo:selectlistAll:permission.do"))return t.loading=!1,void t.$message.warning("暂无设备型号查询权限, 请联系管理员");t.$http.post("/info/devtypeinfo/listAll",s.a.stringify(a)).then((function(a){var o=a.data,i=o.data;if(i.length>0){if(i.forEach((function(e){var a={label:e.devDesc,value:e.devIndex};t.devModelList.push(a)})),t.devModelList.length>0)if(t.dataForm.id)if(-1==e)t.dataForm.devmodel=t.devModelList[0].value;else{for(var r=!1,l=0;l<t.devModelList.length;l++){var n=t.devModelList[l];if(t.dataForm.devmodel==n.value){r=!0,t.loading=!1;break}}r||(t.loading=!1,t.dataForm.devmodel=t.devModelList[0].value)}else t.dataForm.devmodel=t.devModelList[0].value;t.loading=!1}else t.loading=!1})).catch((function(e){return t.loading=!1,!1}))},getTemplateList:function(){var e=this,t=localStorage.getItem("superAdmin");if(e.showSpecialDesign)if(1==t){if(e.templateList=[{label:e.$t("deviceInfo.systemTemplate"),options:[]},{label:e.$t("deviceInfo.userTemplate"),options:[]},{label:e.$t("deviceInfo.customTemplate"),options:[]}],!e.$hasPermission("gwtemplateinfo:select:permission.do"))return void e.$message.warning("暂无模板查询权限, 请联系管理员");e.$http.post("/info/gwtemplateinfo/selectByFileName",s.a.stringify({fileType:0,available:1})).then((function(t){var a=t.data;if(0!=a.code)return e.$message.error(a.msg);var o=a.data;o.length>0&&(o.forEach((function(t){if(0==t.deptid){var a={label:t.fileName,value:t.id,fileDesc:t.fileDesc};e.templateList[0].options.push(a)}else{var o={label:t.fileName,value:t.id,fileDesc:t.fileDesc};e.templateList[1].options.push(o)}})),e.templateList[0].options.length>0?e.dataForm.templateid=e.templateList[0].options[0].value:e.templateList[1].options.length>0&&(e.dataForm.templateid=e.templateList[1].options[0].value),e.getProtocolList())})).catch((function(e){return!1}))}else e.templateList=[{label:e.$t("deviceInfo.customTemplate"),options:[]}],e.getProtocolList();else{if(e.templateList=1==t?[{label:e.$t("deviceInfo.systemTemplate"),options:[]},{label:e.$t("deviceInfo.userTemplate"),options:[]},{label:e.$t("deviceInfo.customTemplate"),options:[]}]:[{label:e.$t("deviceInfo.systemTemplate"),options:[]},{label:e.$t("deviceInfo.userTemplate"),options:[]}],!e.$hasPermission("gwtemplateinfo:select:permission.do"))return void e.$message.warning("暂无模板查询权限, 请联系管理员");e.$http.post("/info/gwtemplateinfo/selectByFileName",s.a.stringify({fileType:0,available:1})).then((function(a){var o=a.data;if(0!=o.code)return e.$message.error(o.msg);var i=o.data;i.length>0&&(i.forEach((function(t){if(0==t.deptid){var a={label:t.fileName,value:t.id,fileDesc:t.fileDesc};e.templateList[0].options.push(a)}else{var o={label:t.fileName,value:t.id,fileDesc:t.fileDesc};e.templateList[1].options.push(o)}})),e.templateList[0].options.length>0?e.dataForm.templateid=e.templateList[0].options[0].value:e.templateList[1].options.length>0&&(e.dataForm.templateid=e.templateList[1].options[0].value),1==t&&e.getProtocolList())})).catch((function(e){return!1}))}},getProtocolList:function(){var e=this,t=localStorage.getItem("superAdmin");e.$hasPermission("ProcotolTemplate:select:permission.do")?e.$http.get("/ProcotolTemplate/selectPage.do",{params:{page:1,limit:2e3}}).then((function(a){var o=a.data;if(0!=o.code)return e.$message.error(o.data||o.msg);var i=o.data.list;i.length>0&&(1==t?i.forEach((function(t){var a={label:t.proName,value:t.id};e.templateList[2].options.push(a)})):(i.forEach((function(t){var a={label:t.proName,value:t.id};e.templateList[0].options.push(a)})),e.dataForm.templateid||(e.dataForm.templateid=e.templateList[0].options[0].value)))})).catch((function(e){return!1})):e.$message.warning("暂无协议模板查询权限, 请联系管理员")},getInfo:function(){var e=this;if(this.loading=!0,!this.$hasPermission("deviceinfo:selectById:permission.do"))return this.loading=!1,void this.$message.warning("暂无设备信息查询权限, 请联系管理员");this.$http.get("/info/deviceinfo/".concat(this.dataForm.id)).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.showSpecialDesign||(a.data.devmanu=Number(a.data.devmanu),a.data.devmodel=Number(a.data.devmodel)),e.dataForm=v(v({},e.dataForm),a.data),e.storeChlId=e.dataForm.chlid,e.handleManu(a.data.devmanu)})).catch((function(e){return!1}))},handleClose:function(){this.dataForm.id="",this.dataForm.chlid="",this.storeChlId="",this.visible=!1},dataFormSubmitHandle:m()((function(){var e=this,t="",a=null;this.$hasSessionStorageGwsn()?(this.paramsData=[],this.$refs["dataForm"].validate((function(o){if(!o)return!1;if(e.loading=!0,a=e.showSpecialDesign?{ptype:0,tagsource:0,devname:e.dataForm.devname,chlid:e.dataForm.chlid,modeltype:e.showSpecialDesign?2:e.dataForm.checked?1:0,reserve1:e.dataForm.reserve1,reserve2:e.dataForm.reserve2,devcomment:e.dataForm.devcomment,devcommaddr:e.dataForm.devcommaddr,devpublicaddr:e.dataForm.devpublicaddr,templateid:Number(e.dataForm.templateid),gwsn:sessionStorage.getItem("gwsn"),valid:e.dataForm.valid}:{ptype:0,tagsource:0,devname:e.dataForm.devname,chlid:e.dataForm.chlid,devmanu:e.dataForm.devmanu,modeltype:e.showSpecialDesign?2:e.dataForm.checked?1:0,devmodel:e.dataForm.devmodel,reserve0:e.dataForm.reserve0,reserve1:e.dataForm.reserve1,devcomment:e.dataForm.devcomment,devcommaddr:e.dataForm.devcommaddr,devpublicaddr:e.dataForm.devpublicaddr,templateid:Number(e.dataForm.templateid),gwsn:sessionStorage.getItem("gwsn"),valid:e.dataForm.valid},e.dataForm.id){if(!e.$hasPermission("deviceinfo:update:permission.do"))return void e.$message.warning("暂无设备新增权限, 请联系管理员");if(t="/info/deviceinfo",a["id"]=e.dataForm.id,a["devid"]=e.dataForm.devid,e.storeChlId!=a.chlid&&!e.$hasPermission("channelinfo:updateDevicesChlId:permission.do"))return void e.$message.warning("暂无设备修改所属通道权限, 请联系管理员")}else if(t="/info/deviceinfo/insert.do",!e.$hasPermission("deviceinfo:insert:permission.do"))return void e.$message.warning("暂无设备新增权限, 请联系管理员");e.loading=!0,e.$http[e.dataForm.id?"put":"post"](t,a).then((function(t){var o=t.data;if(0!=o.code)return e.loading=!1,e.$message.error(o.data||o.msg);e.dataForm.id?e.storeChlId==a.chlid?e.$message({message:o.data||o.msg,type:"success",duration:500,onClose:function(){e.dataForm.id="",e.dataForm.chlid="",e.storeChlId="",e.loading=!1,e.visible=!1,e.$emit("refreshDataList")}}):e.$http.get("/info/channelinfo/updateDevicesChlId.do",{params:{sn:sessionStorage.getItem("gwsn"),deviceIds:a.devid,chlId:a.chlid,type:0}}).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.data||a.msg);e.$message({message:e.$t("prompt.success"),type:"success",duration:500,onClose:function(){e.dataForm.id="",e.dataForm.chlid="",e.storeChlId="",e.loading=!1,e.visible=!1,e.$emit("refreshDataList")}})})).catch((function(t){return e.dataForm.id="",e.dataForm.chlid="",e.storeChlId="",e.loading=!1,!1})):e.$message({message:o.data||o.msg,type:"success",duration:500,onClose:function(){e.dataForm.id="",e.dataForm.chlid="",e.storeChlId="",e.loading=!1,e.visible=!1,e.$emit("refreshDataList")}})})).catch((function(t){return e.dataForm.id="",e.dataForm.chlid="",e.storeChlId="",e.loading=!1,e.visible=!1,e.$emit("refreshDataList")}))}))):this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})}),1e3,{leading:!0,trailing:!1})}},u=p,f=a("2877"),h=Object(f["a"])(u,o,i,!1,null,null,null);t["default"]=h.exports}}]);