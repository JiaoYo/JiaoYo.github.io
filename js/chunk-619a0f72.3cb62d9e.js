(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-619a0f72","chunk-2d0bdf0b"],{2416:function(t,e,a){"use strict";a("356c")},"2a1f":function(t,e,a){"use strict";a.r(e);a("34ef"),a("28a5"),a("6b54"),a("4917");
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(o){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},o=function(t,e,a){this.data=t,this.size=t.length,this.type=e,this.encoding=a},n=a.prototype,r=o.prototype,i=t.FileReaderSync,l=function(t){this.code=this[this.name=t]},s="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=s.length,u=t.URL||t.webkitURL||t,d=u.createObjectURL,p=u.revokeObjectURL,h=u,f=t.btoa,m=t.atob,g=t.ArrayBuffer,b=t.Uint8Array,v=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;o.fake=r.fake=!0;while(c--)l.prototype[s[c]]=c+1;return u.createObjectURL||(h=t.URL=function(t){var e,a=document.createElementNS("http://www.w3.org/1999/xhtml","a");return a.href=t,"origin"in a||("data:"===a.protocol.toLowerCase()?a.origin=null:(e=t.match(v),a.origin=e&&e[1])),a}),h.createObjectURL=function(t){var e,a=t.type;return null===a&&(a="application/octet-stream"),t instanceof o?(e="data:"+a,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):f?e+";base64,"+f(t.data):e+","+encodeURIComponent(t.data)):d?d.call(u,t):void 0},h.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&p&&p.call(u,t)},n.append=function(t){var a=this.data;if(b&&(t instanceof g||t instanceof b)){for(var n="",r=new b(t),s=0,c=r.length;s<c;s++)n+=String.fromCharCode(r[s]);a.push(n)}else if("Blob"===e(t)||"File"===e(t)){if(!i)throw new l("NOT_READABLE_ERR");var u=new i;a.push(u.readAsBinaryString(t))}else t instanceof o?"base64"===t.encoding&&m?a.push(m(t.data)):"URI"===t.encoding?a.push(decodeURIComponent(t.data)):"raw"===t.encoding&&a.push(t.data):("string"!==typeof t&&(t+=""),a.push(unescape(encodeURIComponent(t))))},n.getBlob=function(t){return arguments.length||(t=null),new o(this.data.join(""),t,"raw")},n.toString=function(){return"[object BlobBuilder]"},r.slice=function(t,e,a){var n=arguments.length;return n<3&&(a=null),new o(this.data.slice(t,n>1?e:this.data.length),a,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},a}(t);t.Blob=function(t,a){var o=a&&a.type||"",n=new e;if(t)for(var r=0,i=t.length;r<i;r++)Uint8Array&&t[r]instanceof Uint8Array?n.append(t[r].buffer):n.append(t[r]);var l=n.getBlob(o);return!l.slice&&l.webkitSlice&&(l.slice=l.webkitSlice),l};var a=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=a(new t.Blob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||void 0)},"2dad":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("section",[e("el-dialog",{attrs:{visible:t.visible,title:"pass"===t.type?"授权通过":"授权拒绝","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.visible=e},close:t.handleClose}},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataForm",attrs:{model:t.dataForm,rules:t.rules,"label-position":"left","label-width":"100px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.dataFormSubmitHandle()}}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{prop:"sn",label:"网关编号"}},[e("el-input",{attrs:{disabled:"",size:"small",placeholder:"请输入网关编号"},model:{value:t.dataForm.sn,callback:function(e){t.$set(t.dataForm,"sn",e)},expression:"dataForm.sn"}})],1),e("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{prop:"proname",label:10==t.soft?"客户名称":"项目名称"}},[e("el-input",{attrs:{disabled:"",size:"small",placeholder:10==t.soft?"请输入客户名称":"请输入项目名称"},model:{value:t.dataForm.proname,callback:function(e){t.$set(t.dataForm,"proname",e)},expression:"dataForm.proname"}})],1),e("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"授权软件"}},[e("el-autocomplete",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small",clearable:"","fetch-suggestions":t.querySearchAsync,placeholder:"请输入授权软件"},on:{select:t.handleSelect},model:{value:t.dataForm.softName,callback:function(e){t.$set(t.dataForm,"softName",e)},expression:"dataForm.softName"}})],1),e("el-form-item",{attrs:{prop:"expiretime",label:"过期时间"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,size:"small",type:"datetime",placeholder:"请选择过期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptions},model:{value:t.dataForm.expiretime,callback:function(e){t.$set(t.dataForm,"expiretime",e)},expression:"dataForm.expiretime"}})],1),e("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{prop:"desc",label:"备注"}},[e("el-input",{attrs:{size:"small",type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入备注"},model:{value:t.dataForm.desc,callback:function(e){t.$set(t.dataForm,"desc",e)},expression:"dataForm.desc"}})],1)],1)],1)],1),e("template",{slot:"footer"},[e("el-button",{on:{click:t.handleClose}},[t._v(t._s(t.$t("cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmitHandle()}}},[t._v(t._s(t.$t("confirm")))])],1)],2)],1)},n=[],r=(a("28a5"),a("3835")),i=(a("f559"),a("7f7f"),a("4328")),l=a.n(i),s=a("b047"),c=a.n(s),u={props:["id","sn","soft","protocol","proname","type","expiretime"],data:function(){return{visible:!1,loading:!1,dataForm:{sn:"",softName:"",proname:"",desc:"",expiretime:"2099-12-31 23:59:59"},rules:{sn:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],softName:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},softNameOptions:[{value:"PBOX"},{value:"LOGGER"},{value:"ASDU"},{value:"ASDU-LE"},{value:"ASDU-LX"},{value:"hkw-agent(探针)"},{value:"HKW-NF500(防火墙)"},{value:"HKW-IDS2000(入侵检测)"},{value:"HKW-LAS1000(日志审计系统)"},{value:"HKW-DAS1000(数据库审计系统)"},{value:"LProxyCtrl(领祺代理工具控制端)"},{value:"lqx-daemon(文件传输软件)"},{value:"HKW-OSAS200(安全运维管理系统)"},{value:"HKW-INS8000(网络安全监测装置)"}],pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5},shortcuts:[{text:"一个月有效期",onClick:function(t){var e=new Date;e.setTime(e.getTime()+2592e6),t.$emit("pick",e)}},{text:"三个月有效期",onClick:function(t){var e=new Date;e.setTime(e.getTime()+7776e6),t.$emit("pick",e)}},{text:"一年有效期",onClick:function(t){var e=new Date;e.setTime(e.getTime()+31536e6),t.$emit("pick",e)}}]}}},methods:{init:function(){this.dataForm.sn=this.sn,this.dataForm.softName=this.protocol,this.dataForm.proname=this.proname,this.dataForm.expiretime=this.expiretime,"pass"===this.type?this.dataForm.desc=this.$store.state.user.name+"操作通过":this.dataForm.desc=this.$store.state.user.name+"操作拒绝",this.visible=!0},querySearchAsync:function(t,e){var a=this,o=a.softNameOptions,n=t?o.filter(a.createStateFilter(t)):o;e(n)},createStateFilter:function(t){return function(e){return-1!=e.value.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())}},handleSelect:function(t){this.dataForm.softName=t.value},handleClose:c()((function(){this.visible=!1}),1e3,{leading:!0,trailing:!1}),dataFormSubmitHandle:c()((function(){var t=this,e="/AuthorizeApplication/updateStatus.do",a={id:this.id,status:"pass"===t.type?1:2,ovDate:t.dataForm.expiretime,notes:t.dataForm.desc};t.$hasPermission("AuthorizeApplication:updateStatus:permission.do")?t.$refs["dataForm"].validate((function(o){if(!o)return!1;if(10==t.soft&&"pass"===t.type&&t.dataForm.expiretime.startsWith("2099")){var n=t.dataForm.expiretime.split(" "),i=Object(r["a"])(n,2),s=i[0],c=i[1],u=s.split("-"),d=Object(r["a"])(u,3),p=d[0],h=d[1],f=d[2],m=c.split(":"),g=Object(r["a"])(m,3),b=g[0],v=g[1],w=g[2],y="".concat(p,"年").concat(h,"月").concat(f,"日").concat(b,"时").concat(v,"分").concat(w,"秒");t.$confirm("当前过期时间为[".concat(y,"]，是否继续？"),t.$t("deleteInfo.noticePrompt"),{confirmButtonText:t.$t("confirm"),cancelButtonText:t.$t("cancel"),type:"warning"}).then((function(){t.loading=!0,t.$http.put(e,l.a.stringify(a)).then((function(e){var a=e.data;if(0!=a.code)return t.loading=!1,t.$message.error(a.data||a.msg);t.loading=!1,t.$message.success(a.msg),t.visible=!1,t.$emit("refreshSnDataList",{sn:t.dataForm.sn})})).catch((function(t){return!1}))})).catch((function(t){}))}else t.loading=!0,t.$http.put(e,l.a.stringify(a)).then((function(e){var a=e.data;if(0!=a.code)return t.loading=!1,t.$message.error(a.msg);t.loading=!1,t.$message.success(a.msg),t.visible=!1,t.$emit("refreshSnDataList",{sn:t.dataForm.sn})})).catch((function(t){return!1}))})):t.$message.warning("暂无授权"+("pass"===t.type?"通过":"拒绝")+"权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1})}},d=u,p=a("2877"),h=Object(p["a"])(d,o,n,!1,null,"66b3dc32",null);e["default"]=h.exports},"356c":function(t,e,a){},"376b":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));a("6b54"),a("34ef"),a("ac6a");function o(t,e){e&&(t+=1462);var a=Date.parse(t);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function n(t,e){for(var a={},n={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=t.length;++r)for(var i=0;i!=t[r].length;++i){n.s.r>r&&(n.s.r=r),n.s.c>i&&(n.s.c=i),n.e.r<r&&(n.e.r=r),n.e.c<i&&(n.e.c=i);var l={v:t[r][i]};if(null!=l.v){var s=XLSX.utils.encode_cell({c:i,r:r});"number"===typeof l.v?l.t="n":"boolean"===typeof l.v?l.t="b":l.v instanceof Date?(l.t="n",l.z=XLSX.SSF._table[14],l.v=o(l.v)):l.t="s",a[s]=l}}return n.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(n)),a}function r(){if(!(this instanceof r))return new r;this.SheetNames=[],this.Sheets={}}function i(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),o=0;o!=t.length;++o)a[o]=255&t.charCodeAt(o);return e}function l(t,e,a){var o=e;o.unshift(t);for(var l="SheetJS",s=new r,c=n(o),u=o.map((function(t){return t.map((function(t){return null==t?{wch:10}:t.toString().charCodeAt(0)>255?{wch:2*t.toString().length+5}:{wch:t.toString().length+5}}))})),d=u[0],p=1;p<u.length;p++)for(var h=0;h<u[p].length;h++)d[h]["wch"]<u[p][h]["wch"]&&(d[h]["wch"]=u[p][h]["wch"]);c["!cols"]=d,s.SheetNames.push(l),s.Sheets[l]=c;var f=XLSX.write(s,{bookType:"xlsx",bookSST:!1,type:"binary"}),m=a||"列表";saveAs(new Blob([i(f)],{type:"application/octet-stream"}),m+".xlsx")}a("2a1f"),a("0fd4"),a("1447")},c42a:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("el-card",{staticClass:"aui-card--fill",attrs:{shadow:"never"}},[e("el-form",{attrs:{inline:!0,model:t.dataForm},nativeOn:{submit:function(t){t.preventDefault()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.querySearch.apply(null,arguments)}}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[e("el-form-item",[e("el-input",{attrs:{size:"small",placeholder:t.$t("gwsn.enterGwsn"),clearable:""},on:{clear:t.querySearch},model:{value:t.dataForm.gwsn,callback:function(e){t.$set(t.dataForm,"gwsn",e)},expression:"dataForm.gwsn"}})],1),e("el-form-item",[e("el-input",{attrs:{size:"small",placeholder:t.$t("authorization.softwareName"),clearable:""},on:{clear:t.querySearch},model:{value:t.dataForm.softName,callback:function(e){t.$set(t.dataForm,"softName",e)},expression:"dataForm.softName"}})],1),e("el-form-item",{attrs:{label:t.$t("protocol.protocolName")}},[e("div",{staticStyle:{width:"200px"}},[e("el-select",{attrs:{size:"small",clearable:"",placeholder:t.$t("attribute.placeholderSelect")},on:{change:t.querySearch},model:{value:t.dataForm.protocols,callback:function(e){t.$set(t.dataForm,"protocols",e)},expression:"dataForm.protocols"}},t._l(t.protocolInfoList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("el-form-item",{attrs:{label:t.$t("authorization.taskStatus")}},[e("div",{staticStyle:{width:"200px"}},[e("el-select",{attrs:{size:"small",clearable:"",placeholder:t.$t("attribute.placeholderSelect")},on:{change:t.querySearch},model:{value:t.dataForm.tagStatus,callback:function(e){t.$set(t.dataForm,"tagStatus",e)},expression:"dataForm.tagStatus"}},t._l(t.tagStatusList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),t.$hasPermission("info:gwbaseinfo:list")?e("el-form-item",[e("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:t.querySearch}},[t._v(t._s(t.$t("query"))+" ")])],1):t._e(),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleAddOrUpdateLicenseUpgradeChange()}}},[t._v(t._s(t.$t("add")))])],1),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.handleDeleteChange()}}},[t._v(t._s(t.$t("delete")))])],1),e("el-form-item",[e("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:function(e){return t.handleExportExcel()}}},[t._v(t._s(t.$t("export")))])],1),t.$hasPermission("info:gwbaseinfo:list")?e("el-form-item",[e("el-button",{attrs:{size:"small",type:"success"},on:{click:t.getDataList}},[e("i",{staticClass:"el-icon-refresh"})])],1):t._e()],1)],1)],1),e("vxe-table",{ref:"recordTable",staticStyle:{width:"100%"},attrs:{size:"medium",border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"",data:t.dataList,"max-height":t.scrollTableHeight,loading:t.dataListLoading,"row-config":{keyField:"id"},"checkbox-config":t.checkboxConfig},on:{"checkbox-all":t.selectAll,"checkbox-change":t.dataListSelectionHandle}},[e("vxe-table-column",{key:"1",attrs:{type:"checkbox","header-align":"center",align:"center",width:"60",fixed:"left",checked:!1}}),e("vxe-table-column",{key:"2",attrs:{field:"sn",title:t.$t("gwsn.number"),"header-align":"center",align:"center",width:"170",fixed:"left","show-overflow-tooltip":!0}}),e("vxe-table-column",{key:"3",attrs:{field:"updateType",title:t.$t("authorization.upgradeWay"),"header-align":"center",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(0==e.row.updateType?t.$t("authorization.overrideAuthorization"):t.$t("authorization.combinedAuthorization"))+"\n            ")]}}])}),e("vxe-table-column",{key:"4",attrs:{field:"softName",title:t.$t("authorization.softwareName"),"header-align":"center",align:"center","min-width":"200","show-overflow-tooltip":!0}}),e("vxe-table-column",{key:"5",attrs:{field:"ovDate",title:t.$t("authorization.expirationDate"),"header-align":"center",align:"center",width:"160"}}),e("vxe-table-column",{key:"6",attrs:{field:"tagNum",title:t.$t("authorization.expirationDate"),"header-align":"center",align:"center",width:"160"}}),e("vxe-table-column",{key:"7",attrs:{field:"protocolDesc",title:t.$t("authorization.tagNum"),"header-align":"center",align:"center","min-width":"200"}}),e("vxe-table-column",{key:"8",attrs:{field:"tagStatus",title:t.$t("authorization.taskType"),"header-align":"center",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:0==a.row.tagStatus?"info":1==a.row.tagStatus?"success":"danger"}},[t._v("\n                    "+t._s(0==a.row.tagStatus?t.$t("authorization.toBeExecuted"):1==a.row.tagStatus?t.$t("authorization.executed"):t.$t("authorization.expired"))+"\n                ")])]}}])}),e("vxe-table-column",{key:"9",attrs:{field:"createDate",title:t.$t("gwsn.createTime"),"header-align":"center",align:"center",width:"160"}}),e("vxe-table-column",{key:"10",attrs:{field:"creatorName",title:t.$t("gwsn.creator"),"header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0}}),e("vxe-table-column",{key:"11",attrs:{title:t.$t("handle"),"header-align":"center",align:"center",width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{color:"#17b3a3"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleAddOrUpdateLicenseUpgradeChange(a.row)}}},[t._v(t._s(t.$t("update")))]),e("el-button",{staticStyle:{color:"#17b3a3"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleDeleteChange(a.row)}}},[t._v(t._s(t.$t("delete")))])]}}])})],1),e("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{"current-page":t.page,"page-sizes":[20,50,100,200],"page-size":t.limit,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"size-change":t.pageSizeChangeHandle,"current-change":t.pageCurrentChangeHandle}}),t.licenseUpgradeVisible?e("licenseupgradeConfig",{ref:"licenseupgradeConfigRef",attrs:{propId:t.dataForm.propId},on:{refreshDataList:t.getDataList}}):t._e()],1)},n=[],r=(a("28a5"),a("ac6a"),a("c5f6"),a("a481"),a("bc3a")),i=a.n(r),l=a("b047"),s=a.n(l),c=a("376b"),u=a("2dad"),d={directives:{focus:{inserted:function(t){t.querySelector("input").focus()}},loadmore:{inserted:function(t,e){var a=t.querySelector(".el-select-dropdown .el-select-dropdown__wrap");a.addEventListener("scroll",(function(){var t=this.scrollHeight-Math.ceil(this.scrollTop)<=this.clientHeight;t&&0!==this.scrollTop&&e.value()}))}}},data:function(){return{prjInfo:{page:1,total:0},page:1,limit:100,total:0,prjName:"",dataListLoading:!1,licenseUpgradeVisible:!1,checkboxConfig:{reserve:!0,highlight:!0,checkField:"checked"},protocolInfoMap:{},protocolInfoList:[],dataList:[],prjSearch:"",prjList:[],deleteIds:[],scrollTableHeight:window.innerHeight-220-53,dataForm:{gwsn:"",softName:"",protocols:"",tagStatus:"",prjName:"",propId:""},tagStatusList:[{label:this.$t("authorization.toBeExecuted"),value:0},{label:this.$t("authorization.executed"),value:1},{label:this.$t("authorization.expired"),value:2}]}},components:{licenseupgradeConfig:u["default"]},methods:{getPrjNameList:function(){var t=this,e={page:t.prjInfo.page,limit:50,priName:t.prjSearch.replace(/\s+/g,""),_t:(new Date).getTime()};t.$http.get("/info/tprjinfo/tprjinfoList",{params:e}).then((function(e){var a=e.data;if(a.hasOwnProperty("code"))return t.$message.error(a.msg);1==t.prjInfo.page?t.prjList=a.list:t.prjList=t.prjList.concat(a.list),t.prjInfo.total=Number(a.total),0==t.prjList.length?t.prjList.push({id:t.$t("noMatchingDataYet"),prjName:t.$t("noMatchingDataYet"),disabled:!0}):JSON.stringify(t.$route.query)})).catch((function(t){return!1}))},handlePrjClearChange:function(){this.dataForm.prjName="",this.querySearch()},handlePrjVisibleChange:function(t){var e=this;t&&this.$nextTick((function(){e.$refs.prjInput.focus()}))},getDefaultProtocolInfoList:function(){var t=this,e=(new Date).getTime();t.protocolInfoList=[],t.protocolInfoMap={},i.a.get(window.location.origin+"/licenseupgrade.json?_t="+e).then((function(e){var a=e.data;a.forEach((function(e){e.hasOwnProperty("children")&&e.children.length>0&&(e.children.forEach((function(e){t.protocolInfoMap[e.value]=e.label})),t.protocolInfoList=t.protocolInfoList.concat(e.children))})),t.getDataList()}))},pageSizeChangeHandle:function(t){this.page=1,this.limit=t,this.getDataList()},pageCurrentChangeHandle:function(t){this.page=t,this.getDataList()},querySearch:function(){var t=this;this.page=1,this.$nextTick((function(){t.getDataList()}))},getDataList:s()((function(){var t=this,e={page:t.page,limit:t.limit};t.dataForm.gwsn&&(e["sn"]=t.dataForm.gwsn.replace(/_/g,"\\_").replace(/%/g,"\\%")),t.dataForm.softName&&(e["softName"]=t.dataForm.softName.replace(/_/g,"\\_").replace(/%/g,"\\%")),t.dataForm.protocols&&(e["protocols"]=t.dataForm.protocols),null==t.dataForm.tagStatus&&void 0==t.dataForm.tagStatus||(e["tagStatus"]=t.dataForm.tagStatus),t.dataListLoading=!0,t.dataList=[],t.total=0,t.$http.get("/authorizes/task/page",{params:e}).then((function(e){var a=e.data;if(t.deleteIds=[],t.$refs.recordTable.clearCheckboxRow(),t.$refs.recordTable.clearCheckboxReserve(),0!=a.code)return t.dataList=[],t.dataListLoading=!1,t.$message.error(a.data||a.msg);a.data.list.length>0?(a.data.list.forEach((function(e){var a="";if(e.protocols){var o=e.protocols.split(",");o.forEach((function(e){a+=t.protocolInfoMap[e]+", "})),a=a.substring(0,a.length-2)}e.protocolDesc=a,t.dataList.push(e)})),t.total=Number(a.data.total),t.$refs.recordTable.loadData(t.dataList),t.dataListLoading=!1):(t.dataList=[],t.total=0,t.page=1,t.dataListLoading=!1)})).catch((function(e){return t.dataListLoading=!1,!1}))}),100,{leading:!0,trailing:!1}),formatterProtocols:function(t){var e=this,a=t.row;t.column;if(a.protocols){var o="",n=a.protocols.split(",");return n.forEach((function(t){o+=e.protocolInfoMap[t]+", "})),o=o.substring(0,o.length-2),o}return""},getRowKey:function(t){return t.id},selectAll:function(t){var e=this,a=this.$refs.recordTable.getCheckboxRecords(!1);this.deleteIds=[],a.forEach((function(t){e.deleteIds.push(t.id)}))},dataListSelectionHandle:function(t){var e=this,a=this.$refs.recordTable.getCheckboxRecords(!1);this.deleteIds=[],a.forEach((function(t){e.deleteIds.push(t.id)}))},handleAddOrUpdateLicenseUpgradeChange:function(t){var e=this;this.dataForm.propId="",t&&(this.dataForm.propId=t.id),this.licenseUpgradeVisible=!0,this.$nextTick((function(){e.$refs.licenseupgradeConfigRef.init()}))},handleDeleteChange:function(t){var e=this,a="";if(t)a=[t.id];else{if(0==e.deleteIds.length)return e.$message.error(e.$t("deleteInfo.noData"));a=e.deleteIds}e.$confirm(e.$t("deleteInfo.noticeTitle"),e.$t("deleteInfo.noticePrompt"),{confirmButtonText:e.$t("deleteInfo.confirm"),cancelButtonText:e.$t("deleteInfo.cancel"),type:"warning"}).then((function(){e.dataListLoading=!0,e.$http.delete("/authorizes/task",{data:a}).then((function(t){var a=t.data;if(0!=a.code)return e.dataListLoading=!1,e.$message.error(e.$t("deleteInfo.deleteFail"));e.$message.success(e.$t("deleteInfo.deleteSuccess")),e.dataListLoading=!1,e.getDataList()})).catch((function(t){return e.dataListLoading=!1,e.getDataList()}))})).catch((function(t){}))},resetExcelData:function(t){var e=this,a=[];this.dataList.forEach((function(t){var o={sn:t.sn,updateType:0==t.updateType?e.$t("authorization.overrideAuthorization"):e.$t("authorization.combinedAuthorization"),softName:t.softName,ovDate:t.ovDate,tagNum:t.tagNum,protocolDesc:t.protocolDesc,tagStatus:0==t.tagStatus?e.$t("authorization.toBeExecuted"):1==t.tagStatus?e.$t("authorization.executed"):e.$t("authorization.expired"),createDate:t.createDate,creatorName:t.creatorName};a.push(o)})),t(a)},handleExportExcel:s()((function(){var t=this;if(0==this.dataList.length)return this.$message.warning(this.$t("gwsn.thereIsCurrentlyNoDataAvailableForExport"));Promise.resolve().then(function(){t.resetExcelData((function(e){for(var a=[{label:t.$t("gwsnSetting.gwsn"),prop:"sn"},{label:t.$t("authorization.upgradeWay"),prop:"updateType"},{label:t.$t("authorization.softwareName"),prop:"softName"},{label:t.$t("authorization.expirationDate"),prop:"ovDate"},{label:t.$t("authorization.tagNum"),prop:"tagNum"},{label:t.$t("protocol.protocolName"),prop:"protocolDesc"},{label:t.$t("authorization.taskType"),prop:"tagStatus"},{label:t.$t("gwsn.createTime"),prop:"createDate"},{label:t.$t("gwsn.creator"),prop:"creatorName"}],o=[],n=[],r=0;r<a.length;r++)o[r]=a[r].label,n[r]=a[r].prop;var i=o,l=n,s=e,u=t.formatJson(l,s);Object(c["a"])(i,u,t.$t("authorization.authorizedUpgradeList")+"_"+(new Date).getTime())}))}.bind(null,a)).catch(a.oe)}),1e3,{leading:!0,trailing:!1}),formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))})),e.map((function(e){return t.map((function(t){return e[t]}))}))},handlePrjScroll:function(){this.prjList.length<this.prjInfo.total&&(this.prjInfo.page++,this.getPrjNameList())},watchPrjSearch:s()((function(){var t=document.getElementsByClassName("el-scrollbar__wrap").length;document.getElementsByClassName("el-scrollbar__wrap")[t-1].scrollTo(0,0),this.prjInfo.page=1,this.getPrjNameList(),this.$refs.prjInput.focus()}),500)},mounted:function(){var t=this;this.getDefaultProtocolInfoList(),window.onresize=function(){return function(){t.scrollTableHeight=window.innerHeight-220-53}()}},watch:{total:function(){this.total==(this.page-1)*this.limit&&0!=this.total&&(this.page-=1,this.getDataList())},prjSearch:function(t,e){this.watchPrjSearch()}}},p=d,h=(a("2416"),a("2877")),f=Object(h["a"])(p,o,n,!1,null,"5e204b74",null);e["default"]=f.exports}}]);