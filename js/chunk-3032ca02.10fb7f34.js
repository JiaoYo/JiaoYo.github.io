(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3032ca02"],{"4ffd":function(e,t,r){e.exports=r.p+"img/logo.d2921761.png"},bef0:function(e,t,r){e.exports=r.p+"img/login_bg.641f8ce9.jpg"},cd49:function(e,t,r){"use strict";r.r(t);r("a481");var a=r("ade3"),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"aui-wrapper aui-page__login",style:{"background-image":e.cpsite?"url("+e.cpsite+")":"url("+r("bef0")+")","background-size":"cover"}},[e.sitePicture?t("div",{style:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({position:"fixed"},e.logosite,"10px"),"top","10px"),"background","transparent"),"margin","0"),"padding","10px"),"width","230px"),"height","100px"),"text-align",e.logosite)},[t("img",{style:{width:(e.sitePicture,"70px"),"max-width":"100%",height:"auto","max-height":"100%"},attrs:{src:e.sitePicture,alt:""}})]):e._e(),t("div",{staticClass:"aui-content__wrapper"},[t("main",{staticClass:"aui-content",style:{"align-items":e.logsite,"margin-right":"end"==e.logsite?"300px":0}},[t("div",{staticClass:"login-header"},[t("h2",{staticClass:"login-brand"},[e._v(e._s(e.$t("brand.lg")))])]),t("div",{staticClass:"login-body"},[t("h3",{staticClass:"login-title"},[e._v(e._s(e.$t("login.title")))]),t("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmitHandle()}}},[t("el-form-item",[t("el-select",{staticClass:"w-percent-100",model:{value:e.$i18n.locale,callback:function(t){e.$set(e.$i18n,"locale",t)},expression:"$i18n.locale"}},e._l(e.i18nMessages,(function(e,r){return t("el-option",{key:r,attrs:{label:e._lang,value:r}})})),1)],1),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:e.$t("login.username")},model:{value:e.dataForm.username,callback:function(t){e.$set(e.dataForm,"username",t)},expression:"dataForm.username"}},[t("span",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[t("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-user"}})])])])],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("login.password"),"show-password":""},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}},[t("span",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[t("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-lock"}})])])])],1),t("el-form-item",{attrs:{prop:"captcha"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:14}},[t("el-input",{ref:"inputCaptcha",attrs:{placeholder:e.$t("login.captcha")},on:{input:function(t){e.dataForm.captcha=e.dataForm.captcha.replace(/[^a-zA-Z0-9]/g,"")}},model:{value:e.dataForm.captcha,callback:function(t){e.$set(e.dataForm,"captcha",t)},expression:"dataForm.captcha"}},[t("span",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[t("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-safetycertificate"}})])])])],1),t("el-col",{staticClass:"login-captcha",attrs:{span:10}},[t("img",{staticStyle:{width:"100%"},attrs:{src:e.captchaPath,alt:""},on:{click:function(t){return e.getCaptcha()}}})])],1)],1),t("el-form-item",{staticStyle:{"margin-top":"-10px","text-align":"left"}},[t("el-checkbox",{staticStyle:{"margin-top":"-10px"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("\n                            "+e._s(e.$t("login.remmberPassword"))+"\n                        ")])],1),t("el-form-item",[t("el-button",{staticClass:"w-percent-100",attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v("\n                            "+e._s(e.$t("login.title"))+"\n                        ")])],1)],1)],1)])]),e.centerDialogVisibleSecond?t("forgetpwd",{ref:"forgetpwd"}):e._e()],1)},o=[],s=(r("6762"),r("2fdb"),r("6b54"),r("f559"),r("28a5"),r("4328")),n=r.n(s),l=r("a78e"),d=r.n(l),c=r("b047"),m=r.n(c),g=r("12cb"),f=r("ed08"),p=r("9dce"),u=r("61f7"),h=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("forgetpwd.title"),visible:e.centerDialogVisibleSecond,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose,width:"40%"},on:{"update:visible":function(t){e.centerDialogVisibleSecond=t}}},[t("el-form",{ref:"forgetpwdform",attrs:{model:e.forgetpwdform,rules:e.rules,"label-width":"en-US"===e.$i18n.locale?"150px":"120px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit()}}},[t("el-form-item",{attrs:{prop:"username",label:e.$t("forgetpwd.username")}},[t("el-input",{attrs:{placeholder:e.$t("forgetpwd.enterUsername")},model:{value:e.forgetpwdform.username,callback:function(t){e.$set(e.forgetpwdform,"username",t)},expression:"forgetpwdform.username"}})],1),t("el-row",[t("el-col",{attrs:{span:18}},[t("el-form-item",{attrs:{prop:"emailOrMobile",label:e.$t("register.email")+" / "+e.$t("register.mobile")}},[t("el-input",{attrs:{placeholder:e.$t("pleaseEnterEmailOrPhone")},model:{value:e.forgetpwdform.emailOrMobile,callback:function(t){e.$set(e.forgetpwdform,"emailOrMobile",t)},expression:"forgetpwdform.emailOrMobile"}})],1)],1),t("el-col",{attrs:{span:5,offset:1}},[t("el-button",{staticStyle:{width:"100%"},attrs:{disabled:e.disabled},on:{click:e.sendcodeMsg}},[e._v(e._s(e.sendcode))])],1)],1),t("el-form-item",{attrs:{prop:"code",label:e.$t("forgetpwd.code")}},[t("el-input",{attrs:{placeholder:e.$t("forgetpwd.enterCode")},model:{value:e.forgetpwdform.code,callback:function(t){e.$set(e.forgetpwdform,"code",t)},expression:"forgetpwdform.code"}})],1),t("el-form-item",{attrs:{prop:"newpassword",label:e.$t("forgetpwd.newPassword")}},[t("el-input",{attrs:{minlength:6,type:"password",placeholder:e.$t("forgetpwd.enterNewPassword"),"show-password":""},model:{value:e.forgetpwdform.newpassword,callback:function(t){e.$set(e.forgetpwdform,"newpassword",t)},expression:"forgetpwdform.newpassword"}})],1),t("el-form-item",{attrs:{prop:"repeatpassword",label:e.$t("forgetpwd.confirmPassword")}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("forgetpwd.enterConfirmPassword"),"show-password":""},model:{value:e.forgetpwdform.repeatpassword,callback:function(t){e.$set(e.forgetpwdform,"repeatpassword",t)},expression:"forgetpwdform.repeatpassword"}})],1)],1),t("template",{slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v(e._s(e.$t("forgetpwd.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("forgetpwd.submit")))])],1)],2)},b=[],w={name:"forgetpwd",data:function(){return{sendcode:this.$t("forgetpwd.sendCode"),disabled:!1,centerDialogVisibleSecond:!1,forgetpwdform:{emailOrMobile:"",phone:"",code:"",username:"",newpassword:"",repeatpassword:""}}},computed:{rules:function(){var e=this,t=function(t,r,a){if(e.forgetpwdform.newpassword!==r)return a(new Error(e.$t("user.validate.comfirmPassword")));a()},r=function(t,r,a){r?a():a(new Error(e.$t("forgetpwd.enterCode")))};return{username:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],emailOrMobile:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],code:[{required:!0,validator:r,trigger:"change"}],newpassword:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{min:6,message:this.$t("forgetpwd.passwordLimit"),trigger:"change"}],repeatpassword:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{min:6,message:this.$t("forgetpwd.passwordLimit"),trigger:"change"},{validator:t,trigger:"change"}]}}},methods:{init:function(){var e=this;this.centerDialogVisibleSecond=!0,this.$nextTick((function(){e.$refs["forgetpwdform"].resetFields()}))},sendcodeMsg:function(){var e=this,t={domain:document.domain.startsWith("www.")?document.domain.substring(4):document.domain};if(!e.forgetpwdform.emailOrMobile)return e.$message.error("请输入邮箱或者手机号");if(!Object(u["b"])(e.forgetpwdform.emailOrMobile)&&!Object(u["a"])(e.forgetpwdform.emailOrMobile))return e.$message.error("请输入正确的邮箱或者手机号");Object(u["a"])(e.forgetpwdform.emailOrMobile)?t["mailAddr"]=e.forgetpwdform.emailOrMobile:t["phoneNumber"]=e.forgetpwdform.emailOrMobile;var r=60,a=setInterval((function(){r--,e.disabled=!0,e.sendcode=r+e.$t("forgetpwd.reGet"),0===r&&(e.sendcode=e.$t("forgetpwd.getCode"),e.disabled=!1,clearInterval(a))}),1e3);e.$http.post("/sys/sms/sendMessage1.do",n.a.stringify(t)).then((function(t){var r=t.data;if(0!=r.code)return clearInterval(a),a=null,e.sendcode=e.$t("forgetpwd.getCode"),e.disabled=!1,e.$message.error(r.data||r.msg);e.$message.success(r.data||r.msg)})).catch((function(t){return clearInterval(a),a=null,e.sendcode=e.$t("forgetpwd.sendCode"),e.disabled=!1,e.$message.error(t),!1}))},handleClose:m()((function(){this.centerDialogVisibleSecond=!1}),1e3,{leading:!0,trailing:!1}),handleSubmit:m()((function(){var e=this,t={username:e.forgetpwdform.username,smscode:e.forgetpwdform.code,password:e.forgetpwdform.newpassword};return e.forgetpwdform.emailOrMobile?Object(u["b"])(e.forgetpwdform.emailOrMobile)||Object(u["a"])(e.forgetpwdform.emailOrMobile)?(Object(u["a"])(e.forgetpwdform.emailOrMobile)?t["email"]=e.forgetpwdform.emailOrMobile:t["mobile"]=e.forgetpwdform.emailOrMobile,void e.$refs["forgetpwdform"].validate((function(r){if(!r)return!1;e.$http.put("/sys/user/password.do",t).then((function(t){var r=t.data;if(0!=r.code)return e.$message.error(r.data||r.msg);e.$message.success(r.data||r.msg),e.handleClose()})).catch((function(e){return!1}))}))):e.$message.error("请输入正确的邮箱或者手机号"):e.$message.error("请输入邮箱或者手机号")}),1e3,{leading:!0,trailing:!1})},watch:{centerDialogVisibleSecond:function(e,t){this.centerDialogVisibleSecond=e}}},$=w,v=r("2877"),O=Object(v["a"])($,h,b,!1,null,null,null),k=O.exports,x=r("4ffd"),C=r.n(x),y={inject:["reload"],data:function(){return{sitePicture:C.a,currentCode:"",requestCopyrightFailed:!0,requestReportNumberFailed:!0,checked:!1,closeTimer:null,i18nMessages:g["b"],value1:!0,centerDialogVisible:!1,logosite:"left",logsite:"center",cpsite:"",domain:"",centerDialogVisibleSecond:!1,captchaPath:"",dataForm:{username:"",password:"",uuid:"",captcha:""},labelPosition:"right",formLabelAlign:{username:"",deptName:"",email:"",mobile:"",emailOrMobile:"",password:"",comfirmpassword:"",status:1,deptId:0,pid:0,roleIdList:["1147694289157566466"]},disabled:!1,time:0,btntxt:this.$t("register.retrySend"),count:0,show:""}},components:{forgetpwd:k},computed:{dataRule:function(){return{username:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],password:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],captcha:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]}},regRule:function(){var e=this,t=function(t,r,a){if(e.formLabelAlign.password!==r)return a(new Error(e.$t("user.validate.comfirmPassword")));a()},r=function(t,r,a){r?a():a(new Error(e.$t("register.enterCode")))};return{deptName:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],username:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],password:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{min:6,message:this.$t("register.limitSix"),trigger:"change"}],comfirmpassword:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{min:6,message:this.$t("register.limitSix"),trigger:"change"},{validator:t,trigger:"change"}],emailOrMobile:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],code:[{required:!0,validator:r,trigger:"change"}],email:[{type:"email",message:this.$t("register.emailCorrect"),trigger:"change"}]}}},created:function(){var e=this;if(-1!=window.location.href.indexOf("type")){var t=window.location.href.split("type=")[1];"register"==t?(e.centerDialogVisible=!0,e.centerDialogVisibleSecond=!1):"forgetpassword"==t&&(e.centerDialogVisible=!1,e.forgetpassword())}else e.centerDialogVisible=!1,e.centerDialogVisibleSecond=!1;-1!=window.location.href.indexOf("token")?(e.getCaptcha(),e.getCookie(),e.$nextTick((function(){d.a.set("token",window.location.href.split("token=")[1]),e.$router.replace({path:"tgw-tgwinfo"})}))):(p["a"].$off("refreshLoginPage"),p["a"].$on("refreshLoginPage",(function(){e.reload()})),e.getCaptcha(),e.getCookie())},methods:{mobileValidate:function(){this.formLabelAlign.mobile=this.formLabelAlign.mobile.replace(/[^\.\d]/g,""),this.formLabelAlign.mobile=this.formLabelAlign.mobile.replace(".","")},sendcode:function(){var e=this,t={domain:document.domain.startsWith("www.")?document.domain.substring(4):document.domain};return e.formLabelAlign.emailOrMobile?Object(u["b"])(e.formLabelAlign.emailOrMobile)||Object(u["a"])(e.formLabelAlign.emailOrMobile)?(Object(u["a"])(e.formLabelAlign.emailOrMobile)?t["mailAddr"]=e.formLabelAlign.emailOrMobile:t["phoneNumber"]=e.formLabelAlign.emailOrMobile,e.time=60,e.disabled=!0,void e.$http.post("/sys/sms/sendMessage1.do",n.a.stringify(t)).then((function(t){var r=t.data;if(0!=r.code)return e.disabled=!1,e.$message.error(r.data||r.msg);e.timer(),e.$message.success(r.data||r.msg)})).catch((function(t){return e.$message.error(t),e.disabled=!1,!1}))):e.$message.error("请输入正确的邮箱或者手机号"):e.$message.error("请输入邮箱或者手机号")},timer:function(){this.time>0?(this.time--,this.btntxt=this.time+this.$t("register.retryGetCode"),this.closeTimer=setTimeout(this.timer,1e3)):(this.time=0,this.btntxt=this.$t("register.getCode"),this.disabled=!1,clearInterval(this.closeTimer))},handleCloseRegisterDialogChange:function(){this.$refs["formLabelAlign"].resetFields(),this.formLabelAlign.email="",this.formLabelAlign.mobile="",this.centerDialogVisible=!1},submitForm:m()((function(){var e=this,t={username:"",deptName:"",email:"",mobile:"",password:"",comfirmpassword:"",status:1,deptId:0,pid:0,roleIdList:["1147694289157566466"],realName:"",smscode:""};e.$refs["formLabelAlign"].validate((function(r){return!!r&&(e.value1?Object(u["b"])(e.formLabelAlign.emailOrMobile)||Object(u["a"])(e.formLabelAlign.emailOrMobile)?(Object(u["a"])(e.formLabelAlign.emailOrMobile)?t["email"]=e.formLabelAlign.emailOrMobile:t["mobile"]=e.formLabelAlign.emailOrMobile,t["username"]=e.formLabelAlign.username,t["deptName"]=e.formLabelAlign.deptName,t["password"]=e.formLabelAlign.password,t["comfirmpassword"]=e.formLabelAlign.comfirmpassword,t["status"]=e.formLabelAlign.status,t["deptId"]=e.formLabelAlign.deptId,t["pid"]=e.formLabelAlign.pid,t["roleIdList"]=e.formLabelAlign.roleIdList,t["realName"]=e.formLabelAlign.deptName,t["smscode"]=e.formLabelAlign.code,void e.$http.post("/sys/user/insert",t).then((function(t){var r=t.data;if(0!==r.code)return e.$message.error(r.data||r.msg);e.$message({showClose:!0,message:e.$t("register.registerSuccess"),type:"success"}),e.time=-2,e.$refs["formLabelAlign"].resetFields(),e.centerDialogVisible=!1})).catch((function(e){return!1}))):e.$message.error("请输入正确的邮箱或者手机号码"):e.$message.warning(e.$t("register.beforeAgreeRegister")))}))})),forgetpassword:function(){var e=this;this.centerDialogVisibleSecond=!0,this.$nextTick((function(){e.$refs.forgetpwd.init()}))},getCaptcha:function(){this.dataForm.uuid=Object(f["g"])(),this.captchaPath="".concat(window.SITE_CONFIG["apiURL"],"/captcha?uuid=").concat(this.dataForm.uuid)},getCodeCaptcha:function(){var e=this;e.$http.get("/code",{params:{uuid:e.dataForm.uuid}}).then((function(t){var r=t.data;if(0!=r.code)return e.$message.error(r.data||r.msg);e.currentCode=r.data.data})).catch((function(e){return!1}))},setCookie:function(e,t,r,a){var i=new Date;i.setTime(i.getTime()+864e5*a),window.document.cookie="username="+e+";path=/;expires="+i.toGMTString(),window.document.cookie="password="+t+";path=/;expires="+i.toGMTString(),window.document.cookie="checked="+r+";path=/;expires="+i.toGMTString()},getCookie:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var r=e[t].split("=");"username"==r[0]?this.dataForm.username=r[1]:"password"==r[0]?this.dataForm.password=r[1]:"checked"==r[0]&&(this.checked=Boolean(r[1]))}},clearCookie:function(){this.setCookie("","","",!1,-1)},dataFormSubmitHandle:m()((function(){var e=this;this.$refs["dataForm"].validate((function(t){if(!t)return!1;1==e.checked?e.setCookie(e.dataForm.username,e.dataForm.password,e.checked,30):e.clearCookie();var r={username:e.dataForm.username,password:e.dataForm.password.toString(),uuid:e.dataForm.uuid,captcha:e.dataForm.captcha};e.$http.post("/login",r).then((function(t){var r=t.data;if(0!==r.code)return e.getCaptcha(),e.dataForm.captcha="",e.$refs["inputCaptcha"].focus(),e.$refs["dataForm"].validate((function(e){if(!e)return!1})),e.$message.error(r.data||r.msg);if(sessionStorage.clear(),d.a.set("token",r.data.token),localStorage.removeItem("pythonNewWindow"),window.location.href.includes("?redirect=")){var a=decodeURIComponent(window.location.hash).split("?redirect=")[1];-1!=a.indexOf("/channelinfo")||-1!=a.indexOf("/deviceinfo")||-1!=a.indexOf("/taginfo")||-1!=a.indexOf("/transchannelinfo")||-1!=a.indexOf("/transdeviceinfo")||-1!=a.indexOf("/transtaginfo")||-1!=a.indexOf("/centervar")||-1!=a.indexOf("/scriptinfo")||-1!=a.indexOf("/integralmodule")||-1!=a.indexOf("/scriptcode")||-1!=a.indexOf("/chlwatch")?e.$router.replace({path:"/tgw-tgwinfo"}).catch((function(e){return!1})):e.$router.replace({path:a}).catch((function(e){return!1}))}else e.$router.replace({path:"/tgw-tgwinfo"}).catch((function(e){return!1}))})).catch((function(e){return!1}))}))}),500,{leading:!0,trailing:!1})},watch:{centerDialogVisibleSecond:function(e,t){this.centerDialogVisibleSecond=e},$route:function(e,t){if("{}"==JSON.stringify(e.query))this.centerDialogVisible=!1,this.centerDialogVisibleSecond=!1;else if(e.query.type){var r=e.query.type;"register"==r?(this.centerDialogVisible=!0,this.centerDialogVisibleSecond=!1):"forgetpassword"==r&&(this.centerDialogVisible=!1,this.forgetpassword())}}}},L=y,M=Object(v["a"])(L,i,o,!1,null,null,null);t["default"]=M.exports}}]);