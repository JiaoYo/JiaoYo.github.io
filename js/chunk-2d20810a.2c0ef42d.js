(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20810a"],{a2cf:function(e,a,t){"use strict";t.r(a);t("7f7f"),t("a481");var r=function(){var e=this,a=e._self._c;return a("el-dialog",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t("update"):e.$t("add"),"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose},on:{"update:visible":function(a){e.visible=a},opened:e.handleDialogOpenChange}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":(e.$i18n.locale,"180px")},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.dataFormSubmitHandle()},submit:function(e){e.preventDefault()}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("measuringPointID"),prop:"tagId"}},[a("el-input",{ref:"tagIdInput",attrs:{placeholder:e.$t("pleaseEnterMeasuringPointID"),maxlength:12,clearable:""},on:{input:function(a){e.dataForm.tagId=e.dataForm.tagId.replace(/^(0+)|[^\d]+/g,"")}},model:{value:e.dataForm.tagId,callback:function(a){e.$set(e.dataForm,"tagId",e._n("string"===typeof a?a.trim():a))},expression:"dataForm.tagId"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("parameterTemplate.measuringPointDescription"),prop:"tagDesc"}},[a("el-input",{attrs:{placeholder:e.$t("parameterTemplate.pleaseEnterMeasuringPointDescription"),clearable:""},model:{value:e.dataForm.tagDesc,callback:function(a){e.$set(e.dataForm,"tagDesc","string"===typeof a?a.trim():a)},expression:"dataForm.tagDesc"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("parameterTemplate.symbolIdentification"),prop:"symbol"}},[a("el-input",{directives:[{name:"inputLimSpeChar",rawName:"v-inputLimSpeChar"}],attrs:{placeholder:e.$t("parameterTemplate.pleaseEnterSymbolIdentification"),maxlength:12,clearable:"",onkeyup:"value=value.replace(/[^\\x00-\\xff]/g, '')",onpaste:"value=value.replace(/[^\\x00-\\xff]/g, '')"},model:{value:e.dataForm.symbol,callback:function(a){e.$set(e.dataForm,"symbol","string"===typeof a?a.trim():a)},expression:"dataForm.symbol"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("parameterTemplate.unitMeasurement"),prop:"unitCal"}},[a("el-input",{directives:[{name:"inputLimSpeChar",rawName:"v-inputLimSpeChar"}],attrs:{placeholder:e.$t("parameterTemplate.pleaseEnterUnitMeasurement"),maxlength:12,clearable:"",onkeyup:"value=value.replace(/[^\\x00-\\xff]/g, '')",onpaste:"value=value.replace(/[^\\x00-\\xff]/g, '')"},model:{value:e.dataForm.unitCal,callback:function(a){e.$set(e.dataForm,"unitCal","string"===typeof a?a.trim():a)},expression:"dataForm.unitCal"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("parameterTemplate.measuringPointCoding"),prop:"tagCode"}},[a("el-input",{directives:[{name:"inputLimSpeChar",rawName:"v-inputLimSpeChar"}],attrs:{placeholder:e.$t("parameterTemplate.pleaseEnterMeasuringPointCoding"),clearable:""},model:{value:e.dataForm.tagCode,callback:function(a){e.$set(e.dataForm,"tagCode","string"===typeof a?a.trim():a)},expression:"dataForm.tagCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("configuration.parameterItemTemplate"),prop:"paramInfoId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("attribute.placeholderSelect")},model:{value:e.dataForm.paramInfoId,callback:function(a){e.$set(e.dataForm,"paramInfoId",a)},expression:"dataForm.paramInfoId"}},e._l(e.paramInfoList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1),a("template",{slot:"footer"},[a("el-button",{on:{click:function(a){return e.handleClose()}}},[e._v(e._s(e.$t("cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)},n=[],i=(t("8e6e"),t("ac6a"),t("456d"),t("ade3")),o=t("b047"),l=t.n(o);function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){Object(i["a"])(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var d={data:function(){return{visible:!1,loading:!1,paramInfoList:[],dataForm:{id:"",tagId:"",tagDesc:"",symbol:"",unitCal:"",tagCode:"",paramInfoId:""},rules:{tagId:[{required:!0,message:this.$t("validate.required"),trigger:["change","blur"]}],tagDesc:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],tagCode:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],paramInfoId:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]}}},methods:{init:function(){this.visible=!0},handleDialogOpenChange:function(){this.$refs["dataForm"].resetFields(),this.$refs.tagIdInput.focus(),this.getParamTemplateInfoList()},getParamTemplateInfoList:function(){var e=this,a={page:1,limit:100};e.$hasPermission("ParamInfo:select:permission.do")?(e.loading=!0,e.$http.get("/ParamInfo/selectPage.do",{params:a}).then((function(a){var t=a.data;if(0!=t.code)return e.loading=!1,e.$message.error(t.data||t.msg);e.paramInfoList=t.data.list,e.paramInfoList.length>0?e.dataForm.id?e.getInfo():(e.dataForm.paramInfoId=e.paramInfoList[0].id,e.loading=!1):(e.$message.warning(e.$t("parameterTemplate.currentlyNoParametertemplate")),e.loading=!1,setTimeout((function(){return e.visible=!1,!1}),500))})).catch((function(a){return e.loading=!1,!1}))):e.$message.warning("暂无参数项模板查询权限, 请联系管理员")},getInfo:function(){var e=this,a={id:e.dataForm.id};if(!e.$hasPermission("ParamTemplate:select:permission.do"))return e.loading=!1,void e.$message.warning("暂无参数模板查询权限, 请联系管理员");e.$http.get("/ParamTemplate/selectById.do",{params:a}).then((function(a){var t=a.data;if(0!==t.code)return e.loading=!1,e.$message.error(t.data||t.msg);e.dataForm=m(m({},e.dataForm),t.data),e.loading=!1})).catch((function(a){return e.loading=!1,!1}))},handleClose:function(){this.dataForm.id="",this.$refs["dataForm"].resetFields(),this.visible=!1},dataFormSubmitHandle:l()((function(){var e=this,a=[{tagId:e.dataForm.tagId,tagDesc:e.dataForm.tagDesc,symbol:e.dataForm.symbol,unitCal:e.dataForm.unitCal,tagCode:e.dataForm.tagCode,paramInfoId:e.dataForm.paramInfoId}],t="/ParamTemplate/insert.do";e.$refs["dataForm"].validate((function(r){if(!r)return!1;if(e.dataForm.id){if(t="/ParamTemplate/update.do",a[0]["id"]=e.dataForm.id,!e.$hasPermission("ParamTemplate:update:permission.do"))return void e.$message.warning("暂无参数模板修改权限, 请联系管理员")}else if(!e.$hasPermission("ParamTemplate:insert:permission.do"))return void e.$message.warning("暂无参数模板新增权限, 请联系管理员");e.loading=!0,e.$http[e.dataForm.id?"put":"post"](t,a).then((function(a){var t=a.data;if(0!==t.code)return e.loading=!1,e.$message.error(t.data||t.msg),!1;e.loading=!1,e.dataForm.id,e.$message({message:e.$t("prompt.success"),type:"success",duration:500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}})})).catch((function(a){return e.loading=!1,e.visible=!1,e.$emit("refreshDataList")}))}))}),1e3,{leading:!0,trailing:!1})}},p=d,c=t("2877"),u=Object(c["a"])(p,r,n,!1,null,null,null);a["default"]=u.exports}}]);