(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ca6978c","chunk-1d6975f6"],{"2a1f":function(e,t,a){"use strict";a.r(t);a("34ef"),a("28a5"),a("6b54"),a("4917");
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(r){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},r=function(e,t,a){this.data=e,this.size=e.length,this.type=t,this.encoding=a},o=a.prototype,n=r.prototype,i=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,d=e.URL||e.webkitURL||e,u=d.createObjectURL,m=d.revokeObjectURL,p=d,f=e.btoa,h=e.atob,g=e.ArrayBuffer,b=e.Uint8Array,w=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;r.fake=n.fake=!0;while(c--)s.prototype[l[c]]=c+1;return d.createObjectURL||(p=e.URL=function(e){var t,a=document.createElementNS("http://www.w3.org/1999/xhtml","a");return a.href=e,"origin"in a||("data:"===a.protocol.toLowerCase()?a.origin=null:(t=e.match(w),a.origin=t&&t[1])),a}),p.createObjectURL=function(e){var t,a=e.type;return null===a&&(a="application/octet-stream"),e instanceof r?(t="data:"+a,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):f?t+";base64,"+f(e.data):t+","+encodeURIComponent(e.data)):u?u.call(d,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&m&&m.call(d,e)},o.append=function(e){var a=this.data;if(b&&(e instanceof g||e instanceof b)){for(var o="",n=new b(e),l=0,c=n.length;l<c;l++)o+=String.fromCharCode(n[l]);a.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!i)throw new s("NOT_READABLE_ERR");var d=new i;a.push(d.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&h?a.push(h(e.data)):"URI"===e.encoding?a.push(decodeURIComponent(e.data)):"raw"===e.encoding&&a.push(e.data):("string"!==typeof e&&(e+=""),a.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},n.slice=function(e,t,a){var o=arguments.length;return o<3&&(a=null),new r(this.data.slice(e,o>1?t:this.data.length),a,this.encoding)},n.toString=function(){return"[object Blob]"},n.close=function(){this.size=0,delete this.data},a}(e);e.Blob=function(e,a){var r=a&&a.type||"",o=new t;if(e)for(var n=0,i=e.length;n<i;n++)Uint8Array&&e[n]instanceof Uint8Array?o.append(e[n].buffer):o.append(e[n]);var s=o.getBlob(r);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var a=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=a(new e.Blob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||void 0)},"376b":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("6b54"),a("34ef"),a("ac6a");function r(e,t){t&&(e+=1462);var a=Date.parse(e);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function o(e,t){for(var a={},o={s:{c:1e7,r:1e7},e:{c:0,r:0}},n=0;n!=e.length;++n)for(var i=0;i!=e[n].length;++i){o.s.r>n&&(o.s.r=n),o.s.c>i&&(o.s.c=i),o.e.r<n&&(o.e.r=n),o.e.c<i&&(o.e.c=i);var s={v:e[n][i]};if(null!=s.v){var l=XLSX.utils.encode_cell({c:i,r:n});"number"===typeof s.v?s.t="n":"boolean"===typeof s.v?s.t="b":s.v instanceof Date?(s.t="n",s.z=XLSX.SSF._table[14],s.v=r(s.v)):s.t="s",a[l]=s}}return o.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(o)),a}function n(){if(!(this instanceof n))return new n;this.SheetNames=[],this.Sheets={}}function i(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),r=0;r!=e.length;++r)a[r]=255&e.charCodeAt(r);return t}function s(e,t,a){var r=t;r.unshift(e);for(var s="SheetJS",l=new n,c=o(r),d=r.map((function(e){return e.map((function(e){return null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length+5}:{wch:e.toString().length+5}}))})),u=d[0],m=1;m<d.length;m++)for(var p=0;p<d[m].length;p++)u[p]["wch"]<d[m][p]["wch"]&&(u[p]["wch"]=d[m][p]["wch"]);c["!cols"]=u,l.SheetNames.push(s),l.Sheets[s]=c;var f=XLSX.write(l,{bookType:"xlsx",bookSST:!1,type:"binary"}),h=a||"列表";saveAs(new Blob([i(f)],{type:"application/octet-stream"}),h+".xlsx")}a("2a1f"),a("0fd4"),a("1447")},"3af1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"aui-card--fill",attrs:{shadow:"never"}},[t("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querySearch.apply(null,arguments)}}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[t("el-form-item",[t("el-input",{attrs:{size:"small",placeholder:e.$t("licenseinfo.pleaseEnterSoftwareName"),clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.softName,callback:function(t){e.$set(e.dataForm,"softName",t)},expression:"dataForm.softName"}})],1),e.$hasPermission("sys:authorizes:page")?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:e.querySearch}},[e._v(e._s(e.$t("query"))+" ")])],1):e._e(),e.$hasPermission("sys:authorizes:export")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:function(t){return e.handleExportExcel()}}},[e._v(e._s(e.$t("export")))])],1):e._e(),e.$hasPermission("sys:authorizes:page")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getDataList}},[t("i",{staticClass:"el-icon-refresh"})])],1):e._e()],1)],1)],1),t("vxe-table",{ref:"recordTable",staticStyle:{width:"100%"},attrs:{size:"small",border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"",data:e.dataList,"max-height":e.scrollTableHeight,loading:e.dataListLoading,"row-config":{keyField:"id"}}},[t("vxe-table-column",{key:"1",attrs:{field:"username",title:e.$t("licenseinfo.customerAccount"),"header-align":"center",align:"center",width:"170",fixed:"left","show-overflow-tooltip":!0}}),t("vxe-table-column",{key:"2",attrs:{field:"realName",title:e.$t("licenseinfo.customerName"),"header-align":"center",align:"center","min-width":"180"}}),t("vxe-table-column",{key:"3",attrs:{field:"softname",title:e.$t("licenseinfo.softwareName"),"header-align":"center",align:"center","min-width":"200","show-overflow-tooltip":!0}}),t("vxe-table-column",{key:"4",attrs:{field:"normaltotal",title:e.$t("licenseinfo.totalNumberOfGeneralAuthorizations"),"header-align":"center",align:"center",width:"180"}}),t("vxe-table-column",{key:"5",attrs:{field:"normalused",title:e.$t("licenseinfo.usedNumberOfGeneralAuthorizationsAddress"),"header-align":"center",align:"center",width:"180"}}),t("vxe-table-column",{key:"6",attrs:{field:"extotal",title:e.$t("licenseinfo.totalNumberOfExtendedAuthorizations"),"header-align":"center",align:"center",width:"180"}}),t("vxe-table-column",{key:"7",attrs:{field:"exused",title:e.$t("licenseinfo.usedNumberOfExtendedAuthorizationsAddress"),"header-align":"center",align:"center",width:"180"}}),e.$hasPermission("sys:authorizes:update")?t("vxe-table-column",{key:"8",attrs:{title:e.$t("handle"),"header-align":"center",align:"center",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{color:"#17b3a3"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleUpdateLicenseInfoChange(a.row)}}},[e._v(e._s(e.$t("update")))])]}}],null,!1,1363018342)}):e._e()],1),t("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{"current-page":e.page,"page-sizes":[20,50,100,200],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.pageSizeChangeHandle,"current-change":e.pageCurrentChangeHandle}}),e.licenseinfoUpdateVisible?t("licenseinfoUpdate",{ref:"licenseinfoUpdateRef",attrs:{propId:e.dataForm.propId,propSoftname:e.dataForm.propSoftname,propNormalTotal:e.dataForm.propNormalTotal,propNormalUsed:e.dataForm.propNormalUsed,propExTotal:e.dataForm.propExTotal,propExUsed:e.dataForm.propExUsed},on:{refreshDataList:e.getDataList}}):e._e(),t("el-dialog",{attrs:{visible:e.passwordVisible,title:"Check","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.passwordVisible=t},close:e.handlePasswordClose}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("licenseinfo.pleaseEnterPasswordForYourCurrentLoginAccount"),"show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handlePasswordConfirmChange()}},model:{value:e.currentUserPassword,callback:function(t){e.currentUserPassword=t},expression:"currentUserPassword"}})],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handlePasswordClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handlePasswordConfirmChange()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)],1)},o=[],n=(a("ac6a"),a("c5f6"),a("a481"),a("4328")),i=a.n(n),s=a("b047"),l=a.n(s),c=a("376b"),d=a("6664"),u={data:function(){return{page:1,limit:100,total:0,dataListLoading:!1,licenseinfoUpdateVisible:!1,checkboxConfig:{reserve:!0,highlight:!0,checkField:"checked"},dataList:[],multipeIds:[],scrollTableHeight:window.innerHeight-220-53,dataForm:{softName:"",propId:"",propSoftname:"",propNormalTotal:0,propNormalUsed:0,propExTotal:0,propExUsed:0},passwordVisible:!1,currentUserPassword:""}},components:{licenseinfoUpdate:d["default"]},methods:{pageSizeChangeHandle:function(e){this.page=1,this.limit=e,this.getDataList()},pageCurrentChangeHandle:function(e){this.page=e,this.getDataList()},querySearch:function(){var e=this;this.page=1,this.$nextTick((function(){e.getDataList()}))},getDataList:l()((function(){var e=this,t={page:e.page,limit:e.limit};e.dataForm.softName&&(t["softName"]=e.dataForm.softName.replace(/_/g,"\\_").replace(/%/g,"\\%")),e.dataList=[],e.total=0,e.$hasPermission("sys:authorizes:page")?(e.dataListLoading=!0,e.$http.get("/sys/authorizes/sysAuthorizesPage",{params:t}).then((function(t){var a=t.data;if(e.multipeIds=[],e.$refs.recordTable.clearCheckboxRow(),e.$refs.recordTable.clearCheckboxReserve(),0!=a.code)return e.dataList=[],e.dataListLoading=!1,e.$message.error(a.data||a.msg);a.data.list.length>0?(e.dataList=a.data.list,e.total=Number(a.data.total),e.$refs.recordTable.loadData(e.dataList),e.dataListLoading=!1):(e.dataList=[],e.total=0,e.page=1,e.dataListLoading=!1)})).catch((function(t){return e.dataListLoading=!1,!1}))):e.$message.warning("暂无出厂授权信息查询权限, 请联系管理员")}),100,{leading:!0,trailing:!1}),getRowKey:function(e){return e.id},selectAll:function(e){var t=this,a=this.$refs.recordTable.getCheckboxRecords(!1);this.multipeIds=[],a.forEach((function(e){t.multipeIds.push(e.id)}))},dataListSelectionHandle:function(e){var t=this,a=this.$refs.recordTable.getCheckboxRecords(!1);this.multipeIds=[],a.forEach((function(e){t.multipeIds.push(e.id)}))},handleUpdateLicenseInfoChange:function(e){this.dataForm.propId="",this.dataForm.propSoftname="",this.dataForm.propNormalTotal=0,this.dataForm.propNormalUsed=0,this.dataForm.propExTotal=0,this.dataForm.propExUsed=0,e&&(this.dataForm.propId=e.id,this.dataForm.propSoftname=e.softname,this.dataForm.propNormalTotal=e.normaltotal,this.dataForm.propNormalUsed=e.normalused,this.dataForm.propExTotal=e.extotal,this.dataForm.propExUsed=e.exused),this.passwordVisible=!0},handlePasswordClose:function(){this.currentUserPassword="",this.passwordVisible=!1},handlePasswordConfirmChange:function(){var e=this,t={passWord:e.currentUserPassword};if(!e.currentUserPassword)return e.$message.error(e.$t("licenseinfo.pleaseEnterPasswordForYourCurrentLoginAccount"));e.$http.post("/authorizes/snUser/validatePassWord",i.a.stringify(t)).then((function(t){var a=t.data;if(0!=a.code)return e.$message.error(a.msg);e.passwordVisible=!1,e.licenseinfoUpdateVisible=!0,e.$nextTick((function(){e.$refs.licenseinfoUpdateRef.init()}))})).catch((function(e){return!1}))},handleDeleteChange:function(e){var t=this,a="";if(e)a=[e.id];else{if(0==t.multipeIds.length)return t.$message.error(t.$t("deleteInfo.noData"));a=t.multipeIds}t.$hasPermission("sys:authorizes:delete")?t.$confirm(t.$t("deleteInfo.noticeTitle"),t.$t("deleteInfo.noticePrompt"),{confirmButtonText:t.$t("deleteInfo.confirm"),cancelButtonText:t.$t("deleteInfo.cancel"),type:"warning"}).then((function(){t.dataListLoading=!0,t.$http.delete("/authorizes/task",{data:a}).then((function(e){var a=e.data;if(0!=a.code)return t.dataListLoading=!1,t.$message.error(t.$t("deleteInfo.deleteFail"));t.$message.success(t.$t("deleteInfo.deleteSuccess")),t.dataListLoading=!1,t.getDataList()})).catch((function(e){return t.dataListLoading=!1,t.getDataList()}))})).catch((function(e){})):t.$message.warning("暂无出厂授权信息删除权限, 请联系管理员")},resetExcelData:function(e){var t=[];this.dataList.forEach((function(e){var a={username:e.username,realName:e.realName,softname:e.softname,normaltotal:e.normaltotal,normalused:e.normalused,extotal:e.extotal,exused:e.exused};t.push(a)})),e(t)},handleExportExcel:l()((function(){var e=this;if(0==this.dataList.length)return this.$message.warning(this.$t("gwsn.thereIsCurrentlyNoDataAvailableForExport"));Promise.resolve().then(function(){e.resetExcelData((function(t){for(var a=[{label:e.$t("licenseinfo.customerAccount"),prop:"username"},{label:e.$t("licenseinfo.customerName"),prop:"realName"},{label:e.$t("licenseinfo.softwareName"),prop:"softname"},{label:e.$t("licenseinfo.totalNumberOfGeneralAuthorizations"),prop:"normaltotal"},{label:e.$t("licenseinfo.usedNumberOfGeneralAuthorizationsAddress"),prop:"normalused"},{label:e.$t("licenseinfo.totalNumberOfExtendedAuthorizations"),prop:"extotal"},{label:e.$t("licenseinfo.usedNumberOfExtendedAuthorizationsAddress"),prop:"exused"}],r=[],o=[],n=0;n<a.length;n++)r[n]=a[n].label,o[n]=a[n].prop;var i=r,s=o,l=t,d=e.formatJson(s,l);Object(c["a"])(i,d,e.$t("licenseinfo.authorizationInformationList")+"_"+(new Date).getTime())}))}.bind(null,a)).catch(a.oe)}),1e3,{leading:!0,trailing:!1}),formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))})),t.map((function(t){return e.map((function(e){return t[e]}))}))}},mounted:function(){var e=this;this.getDataList(),window.onresize=function(){return function(){e.scrollTableHeight=window.innerHeight-220-53}()}},watch:{total:function(){this.total==(this.page-1)*this.limit&&0!=this.total&&(this.page-=1,this.getDataList())}}},m=u,p=a("2877"),f=Object(p["a"])(m,r,o,!1,null,null,null);t["default"]=f.exports},6664:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"800px",visible:e.visible,title:e.dataForm.id?e.$t("update")+e.propSoftname:e.$t("add"),"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.visible=t},close:e.handleClose}},[t("el-descriptions",{attrs:{direction:"vertical",column:5,border:""}},[t("el-descriptions-item",{attrs:{label:e.$t("licenseinfo.totalNumberOfGeneralAuthorizations")}},[e._v(e._s(e.propNormalTotal))]),t("el-descriptions-item",{attrs:{label:e.$t("licenseinfo.usedNumberOfGeneralAuthorizationsAddress")}},[e._v(e._s(e.propNormalUsed))]),t("el-descriptions-item",{attrs:{label:e.$t("licenseinfo.totalIncreaseOrDecrease")}},[t("el-select",{staticStyle:{width:"140px"},attrs:{size:"small",filterable:"",placeholder:e.$t("channelInfo.pleaseSelect")},model:{value:e.dataForm.commonType,callback:function(t){e.$set(e.dataForm,"commonType",t)},expression:"dataForm.commonType"}},e._l(e.typeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-descriptions-item",{attrs:{label:e.$t("licenseinfo.number")}},[t("el-input-number",{staticStyle:{width:"160px"},attrs:{size:"small","controls-position":"right",min:1,placeholder:e.$t("licenseinfo.pleaseEnterNumber")},model:{value:e.dataForm.commonValue,callback:function(t){e.$set(e.dataForm,"commonValue",t)},expression:"dataForm.commonValue"}})],1),t("el-descriptions-item",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleConfirmChange(2)}}},[e._v(e._s(e.$t("confirm")))])],1)],1),t("el-descriptions",{staticStyle:{"margin-top":"20px"},attrs:{direction:"vertical",column:5,border:""}},[t("el-descriptions-item",{attrs:{label:e.$t("licenseinfo.totalNumberOfExtendedAuthorizations")}},[e._v(e._s(e.propExTotal))]),t("el-descriptions-item",{attrs:{label:e.$t("licenseinfo.usedNumberOfExtendedAuthorizationsAddress")}},[e._v(e._s(e.propExUsed))]),t("el-descriptions-item",{attrs:{label:e.$t("licenseinfo.totalIncreaseOrDecrease")}},[t("el-select",{staticStyle:{width:"140px"},attrs:{size:"small",filterable:"",placeholder:e.$t("channelInfo.pleaseSelect")},model:{value:e.dataForm.licenseType,callback:function(t){e.$set(e.dataForm,"licenseType",t)},expression:"dataForm.licenseType"}},e._l(e.typeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-descriptions-item",{attrs:{label:e.$t("licenseinfo.number")}},[t("el-input-number",{staticStyle:{width:"160px"},attrs:{size:"small","controls-position":"right",min:1,placeholder:e.$t("licenseinfo.pleaseEnterNumber")},model:{value:e.dataForm.licenseValue,callback:function(t){e.$set(e.dataForm,"licenseValue",t)},expression:"dataForm.licenseValue"}})],1),t("el-descriptions-item",[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleConfirmChange(1)}}},[e._v(e._s(e.$t("confirm")))])],1)],1)],1)},o=[],n=a("2909"),i=(a("28a5"),a("b047")),s=a.n(i),l={props:["propId","propSoftname","propNormalTotal","propNormalUsed","propExTotal","propExUsed"],data:function(){return{visible:!1,loading:!1,dataForm:{id:"",commonType:1,commonValue:"",licenseType:1,licenseValue:""},rules:{sns:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],way:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],softwareName:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],expireTime:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],tagCount:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},typeList:[{label:this.$t("licenseinfo.increase"),value:1},{label:this.$t("licenseinfo.decrease"),value:2}]}},methods:{init:function(){var e=this;e.visible=!0,e.$nextTick((function(){e.dataForm={id:"",commonType:1,commonValue:1,licenseType:1,licenseValue:1},e.dataForm.id=e.propId,e.dataForm.id&&e.getInfo()}))},getInfo:function(){var e=this;e.$hasPermission("sys:authorizes:info")?(e.loading=!0,e.$http.get("/authorizes/task/".concat(e.propId),{params:{id:e.propId}}).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.msg);e.selectRow={sn:a.data.sn},e.dataForm={id:a.data.id,sns:a.data.sn,way:a.data.updateType,softwareChecked:!0,softwareName:a.data.softName,expireTimeChecked:!0,expireTime:a.data.ovDate,tagCountChecked:!0,tagCount:a.data.tagNum},e.loading=!1})).catch((function(t){return e.loading=!1,!1}))):e.$message.warning("暂无出厂授权信息详情查询权限, 请联系管理员")},handleConfirmChange:function(e){var t=this,a={id:t.dataForm.id};if(1==e){if(!t.dataForm.licenseValue)return t.$message.error(t.$t("licenseinfo.pleaseEnterNumber"));a["opEx"]=t.dataForm.licenseType,a["opExAmount"]=t.dataForm.licenseValue}else{if(!t.dataForm.commonValue)return t.$message.error(t.$t("licenseinfo.pleaseEnterNumber"));a["opNormal"]=t.dataForm.commonType,a["opNormalAmount"]=t.dataForm.commonValue}t.$hasPermission("sys:authorizes:update")?(t.loading=!0,t.$http.post("/sys/authorizes/changeAmount",a).then((function(e){var a=e.data;if(0!=a.code)return t.loading=!1,t.$message.error(a.msg);t.loading=!1,t.$message.success(a.msg),t.visible=!1,t.$emit("refreshDataList")})).catch((function(e){return t.loading=!1,!1}))):t.$message.warning("暂无出厂授权信息修改权限, 请联系管理员")},handleClose:s()((function(){this.visible=!1}),1e3,{leading:!0,trailing:!1}),dataFormSubmitHandle:s()((function(){var e=this,t="/authorizes/task/wg_authorize",a=[],r={protocolIdList:[],updateType:e.dataForm.way};e.$refs["dataForm"].validate((function(o){if(!o)return!1;if(e.dataForm.id?(t="/authorizes/task",r={id:e.dataForm.id,sn:e.dataForm.sns,protocols:"",updateType:e.dataForm.way}):r={protocolIdList:[],updateType:e.dataForm.way,snList:e.dataForm.sns.split(",")},!e.dataForm.softwareChecked)return e.$message.error(e.$t("authorization.pleaseCheckSoftwareName"));if(!e.dataForm.softwareName)return e.$message.error(e.$t("authorization.authorizedSoftwareNameEmpty"));if(e.dataForm.id?r["softName"]=e.dataForm.softwareName:r["name"]=e.dataForm.softwareName,!e.dataForm.expireTimeChecked)return e.$message.error(e.$t("authorization.pleaseCheckExpirationDate"));if(!e.dataForm.expireTime)return e.$message.error(e.$t("authorization.authorizedExpirationDateEmpty"));if(r["ovDate"]=e.dataForm.expireTime,!e.dataForm.tagCountChecked)return e.$message.error(e.$t("authorization.pleaseCheckTagNum"));if(!e.dataForm.tagCount)return e.$message.error(e.$t("authorization.authorizedTagNumEmpty"));for(var i in e.dataForm.id?r["tagNum"]=e.dataForm.tagCount:r["tnum"]=e.dataForm.tagCount,e.checkedObj)e.checkedObj[i]&&(a=[].concat(Object(n["a"])(a),Object(n["a"])(e.checkedObj[i])));if(0==a.length)return e.$message.error(e.$t("authorization.pleaseSelectExtandedAuthorizationinformation"));e.dataForm.id?r["protocols"]=a.join(","):r["protocolIdList"]=a,e.loading=!0,e.$http[e.dataForm.id?"put":"post"](t,r).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.msg);e.loading=!1,e.$message.success(a.msg),e.prjList=[],e.dataList=[],e.multipleSelectionAll=[],e.visible=!1,e.$emit("refreshDataList")})).catch((function(t){return e.prjList=[],e.dataList=[],e.multipleSelectionAll=[],e.visible=!1,e.$emit("refreshDataList"),!1}))}))}),1e3,{leading:!0,trailing:!1})}},c=l,d=(a("7472"),a("2877")),u=Object(d["a"])(c,r,o,!1,null,"0c05968e",null);t["default"]=u.exports},7472:function(e,t,a){"use strict";a("be11")},be11:function(e,t,a){}}]);