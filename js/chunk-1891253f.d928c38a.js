(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1891253f","chunk-2d207ee6"],{"1d12":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-card",{attrs:{shadow:"never"}},[t("div",{attrs:{id:"customerProductQueryContainer"}},[t("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querySearch()}}},[t("el-form-item",{attrs:{label:e.$t("gwsn.gwsnModel")}},[t("el-select",{ref:e.$t("product.pleaseSelectTheGatewayModel"),staticStyle:{width:"100%"},attrs:{filterable:"",size:"small"},on:{change:e.querySearch},model:{value:e.dataForm.gwModel,callback:function(t){e.$set(e.dataForm,"gwModel",t)},expression:"dataForm.gwModel"}},e._l(e.allModelList,(function(e){return t("el-option",{key:e.model,attrs:{label:e.model,value:e.model}})})),1)],1),t("el-form-item",{attrs:{label:e.$t("model.description")}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:e.$t("product.pleaseEnterTheDescription"),size:"small",clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.gwDesc,callback:function(t){e.$set(e.dataForm,"gwDesc",t)},expression:"dataForm.gwDesc"}})],1),e.$hasPermission("modeldesc:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:function(t){return e.querySearch()}}},[e._v(e._s(e.$t("query")))])],1):e._e(),e.$hasPermission("modeldesc:insert:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleAddOrUpdate()}}},[e._v("\n                    "+e._s(e.$t("add"))+"\n                ")])],1):e._e(),e.$hasPermission("modeldesc:delete:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",disabled:0===e.customerProductDescIds.length||0===e.dataList.length},on:{click:function(t){return e.deleteHandle()}}},[e._v(e._s(e.$t("deleteBatch"))+" ")])],1):e._e(),e.$hasPermission("modeldesc:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download",disabled:0===e.customerProductDescIds.length||0===e.dataList.length},on:{click:function(t){return e.handleExportCustomerProductData()}}},[e._v("\n                    "+e._s(e.$t("export"))+"\n                ")])],1):e._e(),e.$hasPermission("modeldesc:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getDataList}},[t("i",{staticClass:"el-icon-refresh"})])],1):e._e()],1)],1),e.scrollTableHeight?t("div",[t("vxe-table",{ref:"recordTable",staticStyle:{width:"100%"},attrs:{size:"mini",border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"","max-height":e.scrollTableHeight,loading:e.dataListLoading,"row-config":{keyField:"id"},"checkbox-config":e.checkboxConfig,"empty-text":e.$t("noData")},on:{"checkbox-all":e.selectAll,"checkbox-change":e.dataListSelectionHandleChange}},[e.$hasPermission("modeldesc:delete:permission.do")?t("vxe-table-column",{attrs:{type:"checkbox","header-align":"center",align:"center",width:"60",fixed:"left",checked:!1}}):e._e(),t("vxe-table-column",{attrs:{field:"id",title:e.$t("attribute.number"),"header-align":"center",align:"center",width:"90",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"gwDesc",title:e.$t("model.description"),"header-align":"center",align:"center","show-overflow-tooltip":!0}}),t("vxe-table-column",{attrs:{field:"createrame",title:e.$t("product.creator"),"header-align":"center",align:"center","show-overflow-tooltip":!0,width:"180"}}),e.$hasPermission("modeldesc:update:permission.do")||e.$hasPermission("modeldesc:delete:permission.do")?t("vxe-table-column",{attrs:{title:e.$t("handle"),fixed:"right","header-align":"center",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.$hasPermission("modeldesc:update:permission.do")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddOrUpdate(a.row.id)}}},[e._v(e._s(e.$t("update"))+" ")]):e._e(),1==e.superAdmin&&e.$hasPermission("modeldesc:delete:permission.do")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteHandle(a.row.id)}}},[e._v(e._s(e.$t("delete"))+" ")]):e._e()]}}],null,!1,4212007327)}):e._e()],1),t("vxe-pager",{attrs:{perfect:"",size:"mini",loading:e.pagerLoading,"current-page":e.page,"page-size":e.limit,"page-sizes":[100,200,500,1e3],total:e.total,layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":e.handlePageChange}})],1):e._e(),e.addOrUpdateVisible?t("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e()],1)},i=[],r=(a("ac6a"),a("c5f6"),a("b047")),o=a.n(r),s=a("a342"),l=a("376b"),d={data:function(){return{page:1,limit:1e3,total:0,superAdmin:0,allModelList:[],customerProductDescIds:[],dataForm:{gwModel:null,gwDesc:""},scrollTableHeight:0,dataListLoading:!1,pagerLoading:!1,addOrUpdateVisible:!1,checkboxConfig:{checkStrictly:!1,reserve:!0,highlight:!0,checkField:"checked"}}},components:{AddOrUpdate:s["default"]},methods:{getAllSuperModelList:function(){var e=this,t={_t:(new Date).getTime()};e.$hasPermission("interface:manu:select:permission.do")?e.$http.get("/gwtype/interface/selectMenu.do",t).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.data||a.msg);e.allModelList=a.data,e.allModelList.length>0&&!e.dataForm.gwModel&&(e.dataForm.gwModel=e.allModelList[0].model),e.getDataList()})).catch((function(t){return e.loading=!1,!1})):e.$message.warning("暂无型号查询权限, 请联系管理员")},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.page=t,this.limit=a,this.getDataList()},querySearch:function(){this.page=1,this.getDataList()},getDataList:o()((function(){var e=this,t={pageNum:this.page,pageSize:this.limit,gwModel:this.dataForm.gwModel,_t:(new Date).getTime()};this.dataForm.gwDesc&&(t["fuzzy"]=this.dataForm.gwDesc),this.dataList=[],this.total=0,this.$hasPermission("modeldesc:select:permission.do")?(this.dataListLoading=!0,this.pagerLoading=!0,this.$http.get("/modeldesc/getPage.do",{params:t}).then((function(a){var n=a.data;e.customerProductDescIds=[],e.page=t.pageNum,0!=n.code&&e.$refs.recordTable&&e.$refs.recordTable.loadData([]).then((function(){e.dataListLoading=!1,e.pagerLoading=!1})).finally((function(){return e.$message.error(n.data||n.msg)})),e.dataList=n.data.list||[],e.$refs.recordTable&&(e.$refs.recordTable.clearCheckboxRow(),e.$refs.recordTable.loadData(e.dataList).then((function(){e.dataListLoading=!1,e.pagerLoading=!1,e.total=Number(n.data.total)||0})).finally((function(){})))})).catch((function(t){return e.dataListLoading=!1,!1}))):this.$message.warning("暂无型号描述查询权限, 请联系管理员")}),100,{leading:!0,trailing:!1}),selectAll:function(e){var t=this;this.customerProductDescIds=[],e.records.length>0&&e.records.forEach((function(e){t.customerProductDescIds.push(e.id)}))},dataListSelectionHandleChange:function(e){var t=this;this.customerProductDescIds=[],e.records.length>0&&e.records.forEach((function(e){t.customerProductDescIds.push(e.id)}))},handleAddOrUpdate:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdate.dataForm.id=e,t.$refs.addOrUpdate.init()}))},deleteHandle:o()((function(e){var t=this,a={ids:""};if(e)a["ids"]=e;else{if(0===t.customerProductDescIds.length)return t.$message.error(t.$t("deleteInfo.noData"));a["ids"]=t.customerProductDescIds.join(",")}t.$hasPermission("modeldesc:delete:permission.do")?t.$confirm(t.$t("deleteInfo.noticeTitle"),t.$t("deleteInfo.noticePrompt"),{confirmButtonText:t.$t("deleteInfo.confirm"),cancelButtonText:t.$t("deleteInfo.cancel"),type:"warning"}).then((function(){t.dataListLoading=!0,t.$http.delete("/modeldesc/delete.do",{params:a}).then((function(e){var a=e.data;if(0!=a.code)return t.dataListLoading=!1,t.$message.error(a.data||a.msg);t.$message.success(t.$t("deleteInfo.deleteSuccess")),t.dataListLoading=!1,t.getDataList()})).catch((function(e){return t.dataListLoading=!1,t.getDataList(),!1}))})).catch((function(e){})):t.$message.warning("暂无型号描述删除权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1}),formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))})),t.map((function(t){return e.map((function(e){return t[e]}))}))},resetExcelData:function(e){var t=this,a=[];this.dataList.forEach((function(e){var n={id:e.id||"",gwModel:e.gwModel||"",gwDesc:e.gwDesc||"",createrame:e.createrame||t.$t("deviceData.Noneforthetimebeing")};a.push(n)})),e(a)},handleExportCustomerProductData:o()((function(){var e=this;if(0==this.dataList.length)return this.$message.warning(this.$t("gwsn.thereIsCurrentlyNoDataAvailableForExport"));this.resetExcelData((function(t){for(var a=[{label:e.$t("attribute.number"),prop:"id"},{label:e.$t("gwsn.gwsnModel"),prop:"gwModel"},{label:e.$t("model.description"),prop:"gwDesc"},{label:e.$t("product.creator"),prop:"createrame"}],n=[],i=[],r=0;r<a.length;r++)n[r]=a[r].label,i[r]=a[r].prop;var o=n,s=i,d=t,c=e.formatJson(s,d);Object(l["a"])(o,c,e.$t("product.gatewayModelDescManage")+"_"+(new Date).getTime())}))}),1e3,{leading:!0,trailing:!1})},mounted:function(){var e=this;e.superAdmin=e.$store.state.user.superAdmin,e.scrollTableHeight=window.innerHeight-220-53,e.getAllSuperModelList(),window.onresize=function(){return function(){e.scrollTableHeight=window.innerHeight-220-53}()}},watch:{total:function(){this.total==(this.page-1)*this.limit&&0!=this.total&&(this.page-=1,this.getDataList())}}},c=d,u=(a("a91d"),a("2877")),g=Object(u["a"])(c,n,i,!1,null,"c8f84084",null);t["default"]=g.exports},"24ce":function(e,t,a){},"2a1f":function(e,t,a){"use strict";a.r(t);a("34ef"),a("28a5"),a("6b54"),a("4917");
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(n){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},n=function(e,t,a){this.data=e,this.size=e.length,this.type=t,this.encoding=a},i=a.prototype,r=n.prototype,o=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),d=l.length,c=e.URL||e.webkitURL||e,u=c.createObjectURL,g=c.revokeObjectURL,h=c,m=e.btoa,f=e.atob,p=e.ArrayBuffer,b=e.Uint8Array,w=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;n.fake=r.fake=!0;while(d--)s.prototype[l[d]]=d+1;return c.createObjectURL||(h=e.URL=function(e){var t,a=document.createElementNS("http://www.w3.org/1999/xhtml","a");return a.href=e,"origin"in a||("data:"===a.protocol.toLowerCase()?a.origin=null:(t=e.match(w),a.origin=t&&t[1])),a}),h.createObjectURL=function(e){var t,a=e.type;return null===a&&(a="application/octet-stream"),e instanceof n?(t="data:"+a,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):m?t+";base64,"+m(e.data):t+","+encodeURIComponent(e.data)):u?u.call(c,e):void 0},h.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&g&&g.call(c,e)},i.append=function(e){var a=this.data;if(b&&(e instanceof p||e instanceof b)){for(var i="",r=new b(e),l=0,d=r.length;l<d;l++)i+=String.fromCharCode(r[l]);a.push(i)}else if("Blob"===t(e)||"File"===t(e)){if(!o)throw new s("NOT_READABLE_ERR");var c=new o;a.push(c.readAsBinaryString(e))}else e instanceof n?"base64"===e.encoding&&f?a.push(f(e.data)):"URI"===e.encoding?a.push(decodeURIComponent(e.data)):"raw"===e.encoding&&a.push(e.data):("string"!==typeof e&&(e+=""),a.push(unescape(encodeURIComponent(e))))},i.getBlob=function(e){return arguments.length||(e=null),new n(this.data.join(""),e,"raw")},i.toString=function(){return"[object BlobBuilder]"},r.slice=function(e,t,a){var i=arguments.length;return i<3&&(a=null),new n(this.data.slice(e,i>1?t:this.data.length),a,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},a}(e);e.Blob=function(e,a){var n=a&&a.type||"",i=new t;if(e)for(var r=0,o=e.length;r<o;r++)Uint8Array&&e[r]instanceof Uint8Array?i.append(e[r].buffer):i.append(e[r]);var s=i.getBlob(n);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var a=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=a(new e.Blob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||void 0)},"376b":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("6b54"),a("34ef"),a("ac6a");function n(e,t){t&&(e+=1462);var a=Date.parse(e);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function i(e,t){for(var a={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=e.length;++r)for(var o=0;o!=e[r].length;++o){i.s.r>r&&(i.s.r=r),i.s.c>o&&(i.s.c=o),i.e.r<r&&(i.e.r=r),i.e.c<o&&(i.e.c=o);var s={v:e[r][o]};if(null!=s.v){var l=XLSX.utils.encode_cell({c:o,r:r});"number"===typeof s.v?s.t="n":"boolean"===typeof s.v?s.t="b":s.v instanceof Date?(s.t="n",s.z=XLSX.SSF._table[14],s.v=n(s.v)):s.t="s",a[l]=s}}return i.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(i)),a}function r(){if(!(this instanceof r))return new r;this.SheetNames=[],this.Sheets={}}function o(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0;n!=e.length;++n)a[n]=255&e.charCodeAt(n);return t}function s(e,t,a){var n=t;n.unshift(e);for(var s="SheetJS",l=new r,d=i(n),c=n.map((function(e){return e.map((function(e){return null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length+5}:{wch:e.toString().length+5}}))})),u=c[0],g=1;g<c.length;g++)for(var h=0;h<c[g].length;h++)u[h]["wch"]<c[g][h]["wch"]&&(u[h]["wch"]=c[g][h]["wch"]);d["!cols"]=u,l.SheetNames.push(s),l.Sheets[s]=d;var m=XLSX.write(l,{bookType:"xlsx",bookSST:!1,type:"binary"}),f=a||"列表";saveAs(new Blob([o(m)],{type:"application/octet-stream"}),f+".xlsx")}a("2a1f"),a("0fd4"),a("1447")},a342:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("section",[t("el-dialog",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t("update"):e.$t("add"),"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t},opened:e.handleDialogOpenChange}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":(e.$i18n.locale,"80px")},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("gwsn.gwsnModel"),prop:"gwModel"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:e.$t("product.pleaseSelectTheGatewayModel")},model:{value:e.dataForm.gwModel,callback:function(t){e.$set(e.dataForm,"gwModel",t)},expression:"dataForm.gwModel"}},e._l(e.allModelList,(function(e){return t("el-option",{key:e.model,attrs:{label:e.model,value:e.model}})})),1)],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:e.$t("model.description"),prop:"gwDesc"}},[t("el-input",{attrs:{placeholder:e.$t("product.pleaseEnterTheDescription"),clearable:""},model:{value:e.dataForm.gwDesc,callback:function(t){e.$set(e.dataForm,"gwDesc",t)},expression:"dataForm.gwDesc"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=a("b047"),s=a.n(o);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={data:function(){return{visible:!1,loading:!1,allModelList:[],dataForm:{id:"",gwModel:"",gwDesc:""},rules:{gwModel:[{required:!0,message:this.$t("validate.required"),trigger:["change","blur"]}],gwDesc:[{required:!0,message:this.$t("validate.required"),trigger:["change","blur"]}]}}},methods:{init:function(){this.loading=!0,this.visible=!0},handleDialogOpenChange:function(){this.getAllSuperModelList()},getAllSuperModelList:function(){var e=this,t={_t:(new Date).getTime()};if(!e.$hasPermission("interface:manu:select:permission.do"))return e.loading=!1,void e.$message.warning("暂无型号查询权限, 请联系管理员");e.$http.get("/gwtype/interface/selectMenu.do",t).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.data||a.msg);e.allModelList=a.data,e.dataForm.id?e.getInfo():e.loading=!1})).catch((function(t){return e.loading=!1,!1}))},getInfo:function(){var e=this,t={id:e.dataForm.id,_t:(new Date).getTime()};if(!e.$hasPermission("modeldesc:select:permission.do"))return e.loading=!1,void e.$message.warning("暂无型号查询权限, 请联系管理员");e.$http.get("/modeldesc/select.do",{params:t}).then((function(t){var a=t.data;if(0!==a.code)return e.loading=!1,e.$message.error(a.data||a.msg);e.dataForm=d(d({},e.dataForm),a.data),e.loading=!1})).catch((function(t){return e.loading=!1,!1}))},handleClose:function(){this.$refs["dataForm"].resetFields(),this.visible=!1},dataFormSubmitHandle:s()((function(){var e=this,t=[{gwModel:e.dataForm.gwModel,gwDesc:e.dataForm.gwDesc}],a="/modeldesc/insert.do";e.$refs["dataForm"].validate((function(n){if(!n)return!1;if(e.dataForm.id){if(a="/modeldesc/update.do",t[0]["id"]=e.dataForm.id,!e.$hasPermission("modeldesc:update:permission.do"))return void e.$message.warning("暂无网关型号描述修改权限, 请联系管理员")}else if(!e.$hasPermission("modeldesc:insert:permission.do"))return void e.$message.warning("暂无网关型号描述新增权限, 请联系管理员");e.loading=!0,e.$http[e.dataForm.id?"put":"post"](a,t).then((function(t){var a=t.data;if(0!==a.code)return e.loading=!1,e.$message.error(a.data||a.msg),!1;e.loading=!1,e.dataForm.id,e.$message({message:e.$t("prompt.success"),type:"success",duration:500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}})})).catch((function(t){return e.loading=!1,e.visible=!1,e.$emit("refreshDataList")}))}))}),1e3,{leading:!0,trailing:!1})}},u=c,g=a("2877"),h=Object(g["a"])(u,n,i,!1,null,null,null);t["default"]=h.exports},a91d:function(e,t,a){"use strict";a("24ce")}}]);