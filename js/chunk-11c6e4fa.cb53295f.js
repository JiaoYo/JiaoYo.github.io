(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11c6e4fa","chunk-2d0bdf0b"],{"06dc":function(e,t,a){"use strict";a("2939")},2939:function(e,t,a){},"2c9f":function(e,t,a){e.exports=a.p+"img/twosignal.f6f59bac.png"},"2dad":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("section",[t("el-dialog",{attrs:{visible:e.visible,title:"pass"===e.type?"授权通过":"授权拒绝","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.visible=t},close:e.handleClose}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,"label-position":"left","label-width":"100px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmitHandle()}}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"sn",label:"网关编号"}},[t("el-input",{attrs:{disabled:"",size:"small",placeholder:"请输入网关编号"},model:{value:e.dataForm.sn,callback:function(t){e.$set(e.dataForm,"sn",t)},expression:"dataForm.sn"}})],1),t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{prop:"proname",label:10==e.soft?"客户名称":"项目名称"}},[t("el-input",{attrs:{disabled:"",size:"small",placeholder:10==e.soft?"请输入客户名称":"请输入项目名称"},model:{value:e.dataForm.proname,callback:function(t){e.$set(e.dataForm,"proname",t)},expression:"dataForm.proname"}})],1),t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"授权软件"}},[t("el-autocomplete",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small",clearable:"","fetch-suggestions":e.querySearchAsync,placeholder:"请输入授权软件"},on:{select:e.handleSelect},model:{value:e.dataForm.softName,callback:function(t){e.$set(e.dataForm,"softName",t)},expression:"dataForm.softName"}})],1),t("el-form-item",{attrs:{prop:"expiretime",label:"过期时间"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,size:"small",type:"datetime",placeholder:"请选择过期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.dataForm.expiretime,callback:function(t){e.$set(e.dataForm,"expiretime",t)},expression:"dataForm.expiretime"}})],1),t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{prop:"desc",label:"备注"}},[t("el-input",{attrs:{size:"small",type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入备注"},model:{value:e.dataForm.desc,callback:function(t){e.$set(e.dataForm,"desc",t)},expression:"dataForm.desc"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)],1)},i=[],s=(a("28a5"),a("3835")),r=(a("f559"),a("7f7f"),a("4328")),o=a.n(r),l=a("b047"),c=a.n(l),d={props:["id","sn","soft","protocol","proname","type","expiretime"],data:function(){return{visible:!1,loading:!1,dataForm:{sn:"",softName:"",proname:"",desc:"",expiretime:"2099-12-31 23:59:59"},rules:{sn:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],softName:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},softNameOptions:[{value:"PBOX"},{value:"LOGGER"},{value:"ASDU"},{value:"ASDU-LE"},{value:"ASDU-LX"},{value:"hkw-agent(探针)"},{value:"HKW-NF500(防火墙)"},{value:"HKW-IDS2000(入侵检测)"},{value:"HKW-LAS1000(日志审计系统)"},{value:"HKW-DAS1000(数据库审计系统)"},{value:"LProxyCtrl(领祺代理工具控制端)"},{value:"lqx-daemon(文件传输软件)"},{value:"HKW-OSAS200(安全运维管理系统)"},{value:"HKW-INS8000(网络安全监测装置)"}],pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5},shortcuts:[{text:"一个月有效期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+2592e6),e.$emit("pick",t)}},{text:"一年有效期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+31536e6),e.$emit("pick",t)}},{text:"三年有效期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+94608e6),e.$emit("pick",t)}}]}}},methods:{init:function(){this.dataForm.sn=this.sn,this.dataForm.softName=this.protocol,this.dataForm.proname=this.proname,this.dataForm.expiretime=this.expiretime,"pass"===this.type?this.dataForm.desc=this.$store.state.user.name+"操作通过":this.dataForm.desc=this.$store.state.user.name+"操作拒绝",this.visible=!0},querySearchAsync:function(e,t){var a=this,n=a.softNameOptions,i=e?n.filter(a.createStateFilter(e)):n;t(i)},createStateFilter:function(e){return function(t){return-1!=t.value.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())}},handleSelect:function(e){this.dataForm.softName=e.value},handleClose:c()((function(){this.visible=!1}),1e3,{leading:!0,trailing:!1}),dataFormSubmitHandle:c()((function(){var e=this,t="/AuthorizeApplication/updateStatus.do",a={id:this.id,status:"pass"===e.type?1:2,ovDate:e.dataForm.expiretime,notes:e.dataForm.desc};e.$hasPermission("AuthorizeApplication:updateStatus:permission.do")?e.$refs["dataForm"].validate((function(n){if(!n)return!1;if(10==e.soft&&"pass"===e.type&&e.dataForm.expiretime.startsWith("2099")){var i=e.dataForm.expiretime.split(" "),r=Object(s["a"])(i,2),l=r[0],c=r[1],d=l.split("-"),u=Object(s["a"])(d,3),g=u[0],p=u[1],h=u[2],m=c.split(":"),f=Object(s["a"])(m,3),w=f[0],b=f[1],v=f[2],y="".concat(g,"年").concat(p,"月").concat(h,"日").concat(w,"时").concat(b,"分").concat(v,"秒");e.$confirm("当前过期时间为[".concat(y,"]，是否继续？"),e.$t("deleteInfo.noticePrompt"),{confirmButtonText:e.$t("confirm"),cancelButtonText:e.$t("cancel"),type:"warning"}).then((function(){e.loading=!0,e.$http.put(t,o.a.stringify(a)).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.msg);e.loading=!1,e.$message.success(a.msg),e.visible=!1,e.$emit("refreshSnDataList",{sn:e.dataForm.sn})})).catch((function(e){return!1}))})).catch((function(e){}))}else e.loading=!0,e.$http.put(t,o.a.stringify(a)).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.msg);e.loading=!1,e.$message.success(a.msg),e.visible=!1,e.$emit("refreshSnDataList",{sn:e.dataForm.sn})})).catch((function(e){return!1}))})):e.$message.warning("暂无授权"+("pass"===e.type?"通过":"拒绝")+"权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1})}},u=d,g=a("2877"),p=Object(g["a"])(u,n,i,!1,null,"6a7d10cb",null);t["default"]=p.exports},"602f":function(e,t,a){e.exports=a.p+"img/wifi_yellow.3d6773b9.png"},"6a9e":function(e,t,a){e.exports=a.p+"img/foursignal.64aaba66.png"},a90d:function(e,t,a){e.exports=a.p+"img/nosignal.2a07e3d4.png"},c4db:function(e,t,a){"use strict";a.r(t);a("c5f6");var n=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"aui-card--fill",attrs:{shadow:"never"}},[t("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querySearch.apply(null,arguments)}}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[t("el-form-item",{attrs:{label:e.$t("gwsn.belongProject")}},[t("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.handlePrjScroll,expression:"handlePrjScroll"}],attrs:{clearable:"",size:"small",placeholder:e.$t("select")},on:{"visible-change":e.handlePrjVisibleChange,change:e.querySearch,clear:e.handlePrjClearChange},model:{value:e.dataForm.prjName,callback:function(t){e.$set(e.dataForm,"prjName",t)},expression:"dataForm.prjName"}},[[t("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"99","background-color":"#fff"}},[t("el-input",{ref:"prjInput",staticStyle:{width:"98%","margin-left":"1%","margin-top":"5px","margin-bottom":"5px"},attrs:{size:"small",clearable:"",placeholder:"请输入搜索内容"},model:{value:e.prjSearch,callback:function(t){e.prjSearch=t},expression:"prjSearch"}})],1),t("div",{staticStyle:{width:"100%",height:"42px"}}),e._l(e.prjList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.prjName,value:e.id,disabled:!!e.hasOwnProperty("disabled")&&e.disabled}})}))]],2)],1),t("el-form-item",[t("el-input",{attrs:{size:"small",placeholder:1==e.dataForm.searchType?e.$t("gwsn.enter"):2==e.dataForm.searchType?"请输入MAC地址":"请输入ICCID",clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.gwsn,callback:function(t){e.$set(e.dataForm,"gwsn",t)},expression:"dataForm.gwsn"}},[t("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.handleSearchTypeChange},slot:"prepend",model:{value:e.dataForm.searchType,callback:function(t){e.$set(e.dataForm,"searchType",t)},expression:"dataForm.searchType"}},[t("el-option",{attrs:{label:"编号/备注",value:"1"}}),t("el-option",{attrs:{label:"MAC",value:"2"}}),t("el-option",{attrs:{label:"ICCID",value:"3"}})],1)],1)],1),e.$hasPermission("info:gwbaseinfo:list")?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:e.querySearch}},[e._v(e._s(e.$t("query"))+" ")])],1):e._e(),e.$hasPermission("info:gwbaseinfo:list")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getDataList}},[t("i",{staticClass:"el-icon-refresh"})])],1):e._e(),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",disabled:0==e.gwsns.length},on:{click:e.handleBatchLicenseUpgradeChange}},[e._v(" 批量授权升级 ")])],1)],1)],1)],1),t("vxe-table",{ref:"recordTable",staticStyle:{width:"100%"},attrs:{size:"medium",border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"",data:e.dataList,"max-height":e.scrollTableHeight,loading:e.dataListLoading,"row-config":{keyField:"id"},"checkbox-config":e.checkboxConfig,"edit-config":{trigger:"dblclick",mode:"cell"}},on:{"checkbox-all":e.selectAll,"checkbox-change":e.dataListSelectionHandle}},[t("vxe-table-column",{key:"1",attrs:{type:"checkbox","header-align":"center",align:"center",width:"60",fixed:"left",checked:!1}}),t("vxe-table-column",{key:"2",attrs:{field:"sn",title:e.$t("gwsn.number"),"header-align":"center",align:"center",width:"170",fixed:"left","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.realtimeViewer(a.$index,a.row)}}},[e._v("\n                    "+e._s(a.row.sn)+"\n                ")])]}}])}),t("vxe-table-column",{key:"3",attrs:{field:"pwd",title:e.$t("gwsn.gwsnPassword"),"header-align":"center",align:"center",width:"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.$t("gwsn.gwsnPassword"))+"\n                    "),t("i",{class:e.isLock?"el-icon-lock":"el-icon-unlock",staticStyle:{color:"#409eff","margin-left":"5px",cursor:"pointer"},on:{click:function(){e.isLock=!e.isLock}}})])]},proxy:!0},{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.isLock?"••••••":a.row.pwd))])]}}])}),t("vxe-table-column",{key:"4",attrs:{field:"gwLastTime",title:e.$t("gwsn.gwsnLastTime"),"header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{class:1==a.row.isOut?"redColor":""},[e._v(e._s(a.row.gwLastTime||e.$t("no")))])]}}])}),t("vxe-table-column",{key:"5",attrs:{field:"csq",title:e.$t("gwsn.signalValue"),"header-align":"center",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",height:"20px","line-height":"20px",cursor:"pointer"},on:{click:function(t){return e.handleNetWork(n.$index,n.row)}}},[0==Number(n.row.csq)?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("a90d"),alt:""}}):e._e(),Number(n.row.csq)>0&&Number(n.row.csq)<10?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("cdf7"),alt:""}}):e._e(),Number(n.row.csq)>=10&&Number(n.row.csq)<15?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("2c9f"),alt:""}}):e._e(),Number(n.row.csq)>=15&&Number(n.row.csq)<20?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("f27f"),alt:""}}):e._e(),Number(n.row.csq)>=20&&Number(n.row.csq)<25?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("6a9e"),alt:""}}):e._e(),Number(n.row.csq)>=25&&Number(n.row.csq)<=40?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("ee58"),alt:""}}):e._e(),254==Number(n.row.csq)&&Number(n.row.rev2)<=50?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("f123c"),alt:""}}):e._e(),254==Number(n.row.csq)&&Number(n.row.rev2)>50&&Number(n.row.rev2)<=80?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("602f"),alt:""}}):e._e(),254==Number(n.row.csq)&&Number(n.row.rev2)>80&&255!=Number(n.row.rev2)?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("ed94"),alt:""}}):e._e(),255==Number(n.row.csq)?t("img",{attrs:{src:a("e310"),alt:""}}):e._e(),t("span",{staticStyle:{"margin-left":"5px",display:"inline-block"}},[e._v(e._s(255==Number(n.row.csq)?e.$t("gwsn.internet"):254==Number(n.row.csq)?255==n.row.rev2?"无信号":n.row.rev2:n.row.csq))])])]}}])}),t("vxe-table-column",{key:"6",attrs:{field:"gwDesc",title:e.$t("gwsn.gwsnNote"),"header-align":"center",align:"center",width:"220","show-overflow-tooltip":!0,"edit-render":{}}}),t("vxe-table-column",{key:"8",attrs:{field:"prjName",title:e.$t("gwsn.belongProject"),"header-align":"center",align:"center",width:"160","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.prjName||e.$t("no")))])]}}])}),t("vxe-table-column",{key:"9",attrs:{field:"model",title:e.$t("gwsn.gwsnModel"),"header-align":"center",align:"center",width:"160","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.model||e.$t("no")))])]}}])}),t("vxe-table-column",{key:"10",attrs:{field:"hardV",title:e.$t("gwsn.gwsnHardv"),"header-align":"center",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.hardV||e.$t("no")))])]}}])}),t("vxe-table-column",{key:"11",attrs:{field:"softV",title:e.$t("gwsn.gwsnsoftV"),"header-align":"center",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.softV||e.$t("no")))])]}}])}),t("vxe-table-column",{key:"12",attrs:{field:"tagNum",title:e.$t("gwsn.usedCount"),"header-align":"center",align:"center",width:"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.tagNum||0))])]}}])}),t("vxe-table-column",{key:"13",attrs:{field:"iccid",title:"ICCID","header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.iccid?t("span",{staticStyle:{cursor:"pointer",color:"#45c2b5"},on:{click:function(t){return e.handleICCID(a.$index,a.row)}}},[e._v(e._s(a.row.iccid))]):t("span",[e._v(e._s(e.$t("no")))])]}}])}),t("vxe-table-column",{key:"14",attrs:{field:"mac",title:"MAC","header-align":"center",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.mac||"--"))])]}}])}),t("vxe-table-column",{key:"15",attrs:{field:"createDate",title:e.$t("gwsn.createTime"),"header-align":"center",align:"center",width:"180",sortable:""}}),t("vxe-table-column",{key:"16",attrs:{field:"creator",title:e.$t("gwsn.creator"),"header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.cname?t.row.cname:t.row.username||e.$t("no"))+"\n            ")]}}])}),t("vxe-table-column",{key:"17",attrs:{title:e.$t("handle"),"header-align":"center",align:"center",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{color:"#17b3a3"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleBatchLicenseUpgradeChange(a.$index,a.row)}}},[e._v(" 授权升级 ")])]}}])})],1),t("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{"current-page":e.page,"page-sizes":[20,50,100,200],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.pageSizeChangeHandle,"current-change":e.pageCurrentChangeHandle}}),e.licenseUpgradeVisible?t("licenseupgradeConfig",{ref:"licenseupgradeConfigRef",attrs:{sns:e.dataForm.sns}}):e._e()],1)},i=[],s=(a("ac6a"),a("28a5"),a("6b54"),a("a481"),a("ade3")),r=a("4328"),o=a.n(r),l=a("b047"),c=a.n(l),d=a("2dad"),u=Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({directives:{loadmore:{inserted:function(e,t){var a=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");a.addEventListener("scroll",(function(){var e=this.scrollHeight-Math.ceil(this.scrollTop)<=this.clientHeight;e&&0!==this.scrollTop&&t.value()}))}}},data:function(){return Object(s["a"])({prjInfo:{page:1,total:0},gwsnInfo:{page:1,total:0},page:1,limit:20,total:0,prjName:"",scrollTableHeightStore:null,dataListLoading:!1,licenseUpgradeVisible:!1,checkboxConfig:{reserve:!0,highlight:!0,checkField:"checked"},dataList:[],prjSearch:"",prjList:[],gwsnSearch:"",allGwsnList:[],gwsns:[],scrollTableHeight:window.innerHeight-220-53,dataForm:{gwsn:"",prjName:"",searchType:"1",sns:""},isLock:!0},"licenseUpgradeVisible",!1)}},"directives",{focus:{inserted:function(e){e.querySelector("input").focus()}}}),"components",{licenseupgradeConfig:d["default"]}),"methods",{getPrjNameList:function(){var e=this,t={page:e.prjInfo.page,limit:50,priName:e.prjSearch.replace(/\s+/g,""),_t:(new Date).getTime()};e.$http.get("/info/tprjinfo/tprjinfoList",{params:t}).then((function(t){var a=t.data;if(a.hasOwnProperty("code"))return e.$message.error(a.msg);1==e.prjInfo.page?e.prjList=a.list:e.prjList=e.prjList.concat(a.list),e.prjInfo.total=Number(a.total),0==e.prjList.length?e.prjList.push({id:"暂无匹配数据",prjName:"暂无匹配数据",disabled:!0}):JSON.stringify(e.$route.query)})).catch((function(e){return!1}))},getAllGwsnDataList:function(){var e=this,t={pageNum:e.gwsnInfo.page,pageSize:200,fuzzy:e.gwsnSearch,_t:(new Date).getTime()};e.$http.post("/info/gwbaseinfo/selectByPage.do",o.a.stringify(t)).then((function(t){var a=t.data;1==e.gwsnInfo.page?e.allGwsnList=a.data.list:e.allGwsnList=e.allGwsnList.concat(a.data.list),0==e.allGwsnList.length&&e.allGwsnList.push({sn:"暂无匹配数据",gwDesc:"暂无匹配数据",disabled:!0}),e.gwsnInfo.total=Number(a.data.total)})).catch((function(e){return!1}))},handlePrjClearChange:function(){this.dataForm.prjName="",this.querySearch()},handlePrjVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.prjInput.focus()}))},handleGwsnClearChange:function(){this.gwsnSearch="",this.batchCopyProjectToGwsnForm.gwsn=""},handleGwsnVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.gwsnInput.focus()}))},pageSizeChangeHandle:function(e){this.page=1,this.limit=e,this.scrollTableHeightStore=0,this.getDataList(),sessionStorage.setItem("limit9",this.limit),sessionStorage.setItem("page9",this.page)},pageCurrentChangeHandle:function(e){this.page=e,this.scrollTableHeightStore=0,this.getDataList(),sessionStorage.setItem("page9",this.page)},handleSearchTypeChange:function(e){this.dataForm.gwsn=""},querySearch:function(){var e=this;this.page=1,this.scrollTableHeightStore=0,this.$nextTick((function(){e.getDataList()}))},toNum:function(e){e=e.toString();for(var t=e.split("."),a=["","0","00","000","0000"],n=a.reverse(),i=0;i<t.length;i++){var s=t[i].length;t[i]=n[s]+t[i]}var r=t.join("");return r},checkPlugin:function(e,t){e=this.toNum(e),t=this.toNum(t);return e==t||e>t},getDataList:c()((function(){var e=this,t={pageNum:e.page,pageSize:e.limit,prjId:e.dataForm.prjName};if(1==e.dataForm.searchType)e.dataForm.gwsn&&(t["fuzzy"]=e.dataForm.gwsn.replace(/_/g,"\\_").replace(/%/g,"\\%"));else if(2==e.dataForm.searchType){if(e.dataForm.gwsn){if(!/^[A-F0-9]{2}(-[A-F0-9]{2}){5}$|^[A-F0-9]{2}(:[A-F0-9]{2}){5}$|^[A-F0-9]{12}$|^[A-F0-9]{4}(\.[A-F0-9]{4}){2}$/.test(e.dataForm.gwsn))return e.$message.warning("请输入正确的MAC地址");t["mac"]=e.dataForm.gwsn}}else e.dataForm.gwsn&&(t["iccid"]=e.dataForm.gwsn);e.dataListLoading=!0,e.total=0,e.$http.post("/info/gwbaseinfo/selectByPage.do",o.a.stringify(t)).then((function(a){var n=a.data;if(e.gwsns=[],e.$refs.recordTable.clearCheckboxRow(),e.$refs.recordTable.clearCheckboxReserve(),0!=n.code)return e.dataList=[],e.dataListLoading=!1,e.$message.error(n.data||n.msg);var i={timeZone:"Asia/Shanghai",hour12:!1};if(n.data.list.length>0){var s=(new Date).toLocaleString("en-US",i);s||(s=new Date);for(var r=0;r<n.data.list.length;r++){var o=n.data.list[r];o.softV?e.checkPlugin(o.softV.substring(1,o.softV.length),"1.2.78")&&o.hasOwnProperty("statu")?2==o.statu||(new Date(s).getTime()-new Date(o.gwLastTime).getTime())/1e3/60>7?e.$set(o,"isOut",1):e.$set(o,"isOut",0):(new Date(s).getTime()-new Date(o.gwLastTime).getTime())/1e3/60>7?e.$set(o,"isOut",1):e.$set(o,"isOut",0):e.$set(o,"isOut",1)}e.page=t.pageNum,e.dataList=n.data.list,e.total=Number(n.data.total),e.$refs.recordTable.loadData(e.dataList),e.dataListLoading=!1}else e.dataList=[],e.total=0,e.page=1,e.dataListLoading=!1})).catch((function(t){return e.dataListLoading=!1,!1}))}),100,{leading:!0,trailing:!1}),getRowKey:function(e){return e.id},renderHeader:function(e,t){var a=this,n=t.column;return e("span",[e("span",n.label),e("i",{class:this.isLock?"el-icon-lock":"el-icon-unlock",style:"color:#409eff;margin-left:5px;cursor: pointer",on:{click:function(){a.isLock=!a.isLock}}})])},realtimeViewer:function(e,t){var a=this,n={gwsn:t.sn};t.prjId&&(n["prjId"]=t.prjId),a.$router.push({path:"runmonitor-equipment-list",name:"runmonitor-equipment-list",query:n})},selectAll:function(e){var t=this,a=this.$refs.recordTable.getCheckboxRecords(!1);this.gwsns=[],a.forEach((function(e){t.gwsns.push(e.sn)}))},dataListSelectionHandle:function(e){var t=this,a=this.$refs.recordTable.getCheckboxRecords(!1);this.gwsns=[],a.forEach((function(e){t.gwsns.push(e.sn)}))},handleBatchLicenseUpgradeChange:function(e,t){var a=this;this.dataForm.sns=t?t.sn:this.gwsns.join(","),this.licenseUpgradeVisible=!0,this.$nextTick((function(){a.$refs.licenseupgradeConfigRef.init()}))},handlePrjScroll:function(){this.prjList.length<this.prjInfo.total&&(this.prjInfo.page++,this.getPrjNameList())},handleGwsnScroll:function(){this.allGwsnList.length<this.gwsnInfo.total&&(this.gwsnInfo.page++,this.getAllGwsnDataList())},watchPrjSearch:c()((function(){var e=document.getElementsByClassName("el-scrollbar__wrap").length;document.getElementsByClassName("el-scrollbar__wrap")[e-1].scrollTo(0,0),this.prjInfo.page=1,this.getPrjNameList(),this.$refs.prjInput.focus()}),500),watchGwsnSearch:c()((function(){var e=document.getElementsByClassName("el-scrollbar__wrap").length;document.getElementsByClassName("el-scrollbar__wrap")[e-1].scrollTo(0,0),this.gwsnInfo.page=1,this.getAllGwsnDataList(),this.$refs.gwsnInput.focus()}),500)}),"mounted",(function(){var e=this;this.getPrjNameList(),window.onresize=function(){return function(){e.scrollTableHeight=window.innerHeight-220-53}()}})),"mounted",(function(){this.getDataList()})),"watch",{total:function(){this.total==(this.page-1)*this.limit&&0!=this.total&&(this.page-=1,this.getDataList())},prjSearch:function(e,t){this.watchPrjSearch()},gwsnSearch:function(e,t){this.watchGwsnSearch()}}),g=u,p=(a("06dc"),a("2877")),h=Object(p["a"])(g,n,i,!1,null,"24039034",null);t["default"]=h.exports},cdf7:function(e,t,a){e.exports=a.p+"img/onesignal.d46cc0d2.png"},e310:function(e,t,a){e.exports=a.p+"img/internet.ebcc304b.png"},ed94:function(e,t,a){e.exports=a.p+"img/wifi_green.9a285757.png"},ee58:function(e,t,a){e.exports=a.p+"img/fullsignal.78fda6ac.png"},f123c:function(e,t,a){e.exports=a.p+"img/wifi_red.416bad1c.png"},f27f:function(e,t,a){e.exports=a.p+"img/threesignal.43f66fe1.png"}}]);