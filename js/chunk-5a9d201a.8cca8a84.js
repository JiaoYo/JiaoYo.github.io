(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a9d201a"],{"20ed":function(e,t,r){"use strict";r.r(t);r("28a5"),r("55dd"),r("a481");var a=function(){var e=this,t=e._self._c;return t("el-card",{attrs:{shadow:"never"}},[t("div",{attrs:{id:"customerProductQueryContainer"}},[t("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querySearch()}}},[t("el-form-item",{attrs:{label:e.$t("product.customerName")}},[t("el-select",{directives:[{name:"el-select-loadmore",rawName:"v-el-select-loadmore:rangeNumber",value:e.loadMore(e.rangeNumber),expression:"loadMore(rangeNumber)",arg:"rangeNumber"}],staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:e.$t("product.pleaseSelectCustomerName")},on:{clear:e.handleUserClearChange,"visible-change":e.handleUserVisibleChange},model:{value:e.dataForm.userId,callback:function(t){e.$set(e.dataForm,"userId",t)},expression:"dataForm.userId"}},[[t("el-input",{ref:"userInput",staticStyle:{width:"98%",position:"absolute",left:"1%",top:"0","z-index":"99"},attrs:{autofocus:"",size:"small",clearable:"",placeholder:e.$t("gwsn.pleaseEnterSearchContent")},model:{value:e.userSearch,callback:function(t){e.userSearch=t},expression:"userSearch"}}),t("div",{staticStyle:{width:"100%",height:"32px"}}),e._l(e.showUserList.slice(0,e.rangeNumber),(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value,disabled:!!e.disabled&&e.disabled}})}))]],2)],1),t("el-form-item",{attrs:{label:e.$t("product.technicalService")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:e.$t("deviceInfo.pleaseSelect")},on:{change:e.querySearch},model:{value:e.dataForm.technicalService,callback:function(t){e.$set(e.dataForm,"technicalService",t)},expression:"dataForm.technicalService"}},e._l(e.technicalServiceList,(function(e,r){return t("el-option",{key:r,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:e.$t("upgrade.model")}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("upgrade.pleaseSelect"),filterable:"",clearable:""},on:{clear:e.querySearch,change:e.querySearch},model:{value:e.dataForm.model,callback:function(t){e.$set(e.dataForm,"model",t)},expression:"dataForm.model"}},e._l(e.modelList,(function(r){return t("el-option",{key:r.value,attrs:{label:r.label,value:r.value}},[t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","max-width":"577px"}},[t("span",{style:{display:"inline-block",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",minWidth:"160px"},attrs:{title:r.label}},[e._v(e._s(r.label))]),t("span",{staticStyle:{color:"#8492a6","font-size":"13px",display:"inline-block","margin-left":"20px","text-align":"right",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"200px"},attrs:{title:r.comment||e.$t("no")}},[e._v("\n                                "+e._s(r.comment||e.$t("no"))+"\n                            ")])])])})),1)],1),t("el-form-item",{attrs:{label:e.$t("product.outboundGatewayNumber")}},[t("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:e.$t("product.pleaseEnterTheOutboundGatewayNumber"),clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.fuzzy,callback:function(t){e.$set(e.dataForm,"fuzzy",t)},expression:"dataForm.fuzzy"}})],1),t("el-form-item",[t("el-date-picker",{staticStyle:{width:"350px"},attrs:{size:"small",type:"daterange","picker-options":e.pickerOptions,"range-separator":e.$t("historyQuery.to"),"start-placeholder":e.$t("historyQuery.startTime"),"end-placeholder":e.$t("historyQuery.endTime"),align:"right",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:e.querySearch},model:{value:e.dataForm.deliverytime,callback:function(t){e.$set(e.dataForm,"deliverytime",t)},expression:"dataForm.deliverytime"}})],1),e.$hasPermission("customer:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:function(t){return e.querySearch()}}},[e._v(e._s(e.$t("query")))])],1):e._e(),e.$hasPermission("customer:insert:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleAddOrUpdate()}}},[e._v("\n                    "+e._s(e.$t("add"))+"\n                ")])],1):e._e(),e.$hasPermission("customer:delete:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",disabled:0===e.customerProductIds.length||0===e.dataList.length},on:{click:function(t){return e.deleteHandle()}}},[e._v(e._s(e.$t("deleteBatch"))+" ")])],1):e._e(),e.$hasPermission("customer:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download",disabled:0===e.customerProductIds.length||0===e.dataList.length},on:{click:function(t){return e.handleExportCustomerProductData()}}},[e._v("\n                    "+e._s(e.$t("export"))+"\n                ")])],1):e._e(),e.$hasPermission("customer:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getDataList}},[t("i",{staticClass:"el-icon-refresh"})])],1):e._e()],1)],1),e.scrollTableHeight?t("div",[t("vxe-table",{ref:"recordTable",staticStyle:{width:"100%"},attrs:{size:"mini",border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"","max-height":e.scrollTableHeight,loading:e.dataListLoading,"sort-config":e.sortConfig,"row-config":{keyField:"id"},"checkbox-config":e.checkboxConfig,"empty-text":e.$t("noData"),"scroll-y":{enabled:!0},"show-footer":"","footer-data":e.footerData},on:{"sort-change":e.sortChange,"checkbox-all":e.selectAll,"checkbox-change":e.dataListSelectionHandleChange,"cell-click":e.handleCellClick}},[e.$hasPermission("customer:delete:permission.do")?t("vxe-table-column",{attrs:{type:"checkbox","header-align":"center",align:"center",width:"60",fixed:"left",checked:!1}}):e._e(),t("vxe-table-column",{attrs:{field:"id",title:e.$t("attribute.number"),"header-align":"center",align:"center",sortable:"",width:"90",fixed:"left"}}),t("vxe-table-column",{attrs:{field:"username",title:e.$t("product.customerName"),"header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0}}),t("vxe-table-column",{attrs:{field:"productNum",title:e.$t("product.contractNumber"),"header-align":"center",align:"center",width:"130","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.productNum?t("el-tooltip",{attrs:{placement:"right",content:r.row.productNum}},[t("div",{staticStyle:{cursor:"pointer","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis",width:"100%"}},[e._v(e._s(r.row.productNum))])]):e._e()]}}],null,!1,3543896763)}),t("vxe-table-column",{attrs:{field:"img10",title:e.$t("model.description"),"header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0}}),t("vxe-table-column",{attrs:{field:"company",title:e.$t("project.projectName"),"header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0}}),t("vxe-table-column",{attrs:{field:"odate",title:e.$t("product.dateOutOfTheWarehouse"),"header-align":"center",align:"center",width:"120","show-overflow-tooltip":!0}}),t("vxe-table-column",{attrs:{field:"img9",title:e.$t("gwsn.gwsnModel"),"header-align":"center",align:"center",width:"140","show-overflow-tooltip":!0}}),t("vxe-table-column",{attrs:{field:"numberOfGateways",title:e.$t("product.numberOfGateways"),"header-align":"center",align:"center",width:"100"}}),t("vxe-table-column",{attrs:{field:"sns",title:e.$t("product.outboundGatewayNumber"),"header-align":"center",align:"center","min-width":"220","show-overflow":!1},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tooltip",{attrs:{placement:"right"}},[t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.toBreakWay(r.row.sns))},slot:"content"}),t("span",{staticStyle:{display:"inline-block",height:"16px","line-height":"16px","overflow-y":"hidden","overflow-x":"hidden"}},[e._v(e._s(r.row.sns?r.row.sns.split(",").sort().join(",").replaceAll('"',"").replace(/\s*/g,""):""))])])]}}],null,!1,885293514)}),t("vxe-table-column",{attrs:{field:"img1",title:e.$t("product.image1"),"header-align":"center",align:"center","show-overflow-tooltip":!0,width:"180"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("img",{staticStyle:{"max-height":"50px"},attrs:{src:r.row.img1,alt:""},on:{click:function(t){return e.handleImgDialogVisibleChange(r.row)}}})]}}],null,!1,3724055519)}),t("vxe-table-column",{attrs:{field:"technicalService",title:e.$t("product.technicalService"),"header-align":"center",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tag",{attrs:{size:"small",type:0==r.row.technicalService?"info":1==r.row.technicalService||2==r.row.technicalService?"success":"info"}},[e._v("\n                        "+e._s(0==r.row.technicalService?e.$t("no"):1==r.row.technicalService?e.$t("product.online"):2==r.row.technicalService?e.$t("product.scene"):e.$t("product.unknown"))+"\n                    ")])]}}],null,!1,2441792665)}),t("vxe-table-column",{attrs:{field:"warranty",title:e.$t("product.warrantyDuration"),"header-align":"center",align:"center",width:"100","show-overflow-tooltip":!0}}),t("vxe-table-column",{attrs:{field:"createrame",title:e.$t("product.creator"),"header-align":"center",align:"center","show-overflow-tooltip":!0,width:"180"}}),t("vxe-table-column",{attrs:{field:"dbTime",title:e.$t("model.createTime"),"header-align":"center",align:"center",width:"160"}}),t("vxe-table-column",{attrs:{title:e.$t("handle"),fixed:"right","header-align":"center",align:"center",width:"en-US"==e.$i18n.locale?"300":"200"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleExportGwsnChange(r.row)}}},[e._v(" "+e._s(e.$t("product.exportGatewayNumber"))+" ")]),e.$hasPermission("customer:update:permission.do")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddOrUpdate(r.row.id)}}},[e._v(e._s(e.$t("update"))+" ")]):e._e(),1==e.superAdmin&&e.$hasPermission("customer:delete:permission.do")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteHandle(r.row.id)}}},[e._v(e._s(e.$t("delete"))+" ")]):e._e()]}}],null,!1,245604437)})],1),t("vxe-pager",{attrs:{perfect:"",size:"mini",loading:e.pagerLoading,"current-page":e.page,"page-size":e.limit,"page-sizes":e.pageSizes,total:e.total,layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":e.handlePageChange}})],1):e._e(),e.addOrUpdateVisible?t("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e(),t("el-dialog",{attrs:{title:e.$t("product.customerProductInformationPictures"),visible:e.imgVisible},on:{"update:visible":function(t){e.imgVisible=t}}},[t("el-row",{attrs:{gutter:10}},e._l(e.imgList,(function(r,a){return t("el-col",{key:a,attrs:{span:1==e.imgList.length?24:2==e.imgList.length?12:8}},[t("div",{style:{marginTop:a>2?"10px":0}},[t("el-card",{attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[t("img",{staticClass:"image",style:{width:"100%"},attrs:{src:r},on:{click:function(t){return e.handleImageClickChange(r)}}})])],1)])})),1)],1)],1)},n=[],i=(r("8e6e"),r("456d"),r("96cf"),r("1da1")),o=(r("6762"),r("2fdb"),r("ade3")),l=(r("c5f6"),r("ac6a"),r("2b0e")),s=r("b047"),c=r.n(s),d=r("6188"),u=r("376b");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}l["default"].directive("el-select-loadmore",{bind:function(e,t){var r=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");r.addEventListener("scroll",(function(){var e=this.scrollHeight-this.scrollTop<=this.clientHeight;e&&t.value()}))}});var p={data:function(){return{page:1,limit:1e3,total:0,pageSizes:[200,500,1e3,2e3],superAdmin:0,rangeNumber:50,userSearch:"",showUserList:[],allUserList:[],technicalServiceList:[{label:this.$t("no"),value:0},{label:this.$t("product.online"),value:1},{label:this.$t("product.scene"),value:2}],sname:"id",sort:"desc",customerProductIds:[],modelList:[],dataForm:{userId:null,technicalService:null,fuzzy:"",model:"",deliverytime:[],productNum:""},scrollTableHeight:0,dataListLoading:!1,pagerLoading:!1,addOrUpdateVisible:!1,checkboxConfig:{checkStrictly:!1,reserve:!0,highlight:!0,checkField:"checked"},imgVisible:!1,imgList:[],sortConfig:{defaultSort:{field:"id",order:"desc"},remote:!0},footerData:[{id:"合计",numberOfGateways:0}],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"最近一天",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-864e5),e.$emit("pick",[r,t])}},{text:"最近一周",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}}]}}},components:{AddOrUpdate:d["default"]},methods:{getModeList:function(){var e=this;e.modelList=[],e.$hasPermission("interface:ModelAndComment:select:permission.do")?e.$http.get("/gwtype/interface/selectModelAndComment.do",{params:{}}).then((function(t){var r=t.data;if(0!=r.code)return e.$message.error(r.data||r.msg);var a=r.data;a.length>0&&a.forEach((function(t){var r={id:t.id||null,label:t.model,value:t.model,comment:t.comment,superId:t.superId||0};e.modelList.push(r)}))})).catch((function(e){return!1})):e.$message.warning("暂无网关型号查询权限, 请联系管理员")},getAllUserList:function(){var e=this,t=[],r={pageNum:1,pageSize:1e5,_t:(new Date).getTime()};e.allUserList=[],e.showUserList=[],e.$hasPermission("userCus:select:permission.do")?e.$http.get("/userCus/getPage.do",{params:r}).then((function(r){var a=r.data;if(0!=a.code)return e.$message.error(a.data||a.msg);for(var n=a.data.list,i=0;i<n.length;i++){var o={label:n[i].uname,value:n[i].id};t.push(o)}e.allUserList=t,e.showUserList=t,"{}"!=JSON.stringify(e.$route.query)&&(e.userSearch=e.$route.query.uname,e.dataForm.userId=Number(e.$route.query.uid),e.dataForm.fuzzy=e.$route.query.sn),e.getDataList()})).catch((function(t){return e.loading=!1,!1})):e.$message.warning("暂无客户查询权限, 请联系管理员")},handleUserClearChange:function(){this.userSearch="",this.dataForm.userId=""},handleUserVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.userInput.focus()}))},loadMore:function(e){var t=this;return function(){return t.rangeNumber+=50}},handlePageChange:function(e){var t=e.currentPage,r=e.pageSize;this.page=t,this.limit=r,this.getDataList()},querySearch:function(){this.page=1,this.getDataList()},sortChange:function(e){e.column;var t=e.property,r=e.order;r&&(this.sname=t,this.sort=r,this.getDataList())},getDataList:c()((function(){var e=this,t=this,r=0,a={pageNum:t.page,pageSize:t.limit,sort:t.sname+" "+t.sort,_t:(new Date).getTime()};t.dataForm.userId&&(a["uid"]=t.dataForm.userId),0!=t.dataForm.technicalService&&1!=t.dataForm.technicalService&&2!=t.dataForm.technicalService||(a["technicalService"]=t.dataForm.technicalService),t.dataForm.fuzzy&&(a["fuzzy"]=t.dataForm.fuzzy),t.dataForm.model&&(a["gwmodel"]=t.dataForm.model),t.dataForm.deliverytime&&t.dataForm.deliverytime.length>0&&(a["starttime"]=t.dataForm.deliverytime[0]+" 00:00:00",a["endtime"]=t.dataForm.deliverytime[1]+" 23:59:59"),t.dataForm.productNum&&(a["productNum"]=t.dataForm.productNum),t.dataList=[],t.total=0,t.$hasPermission("customer:select:permission.do")?(t.dataListLoading=!0,t.pagerLoading=!0,t.footerData[0]["numberOfGateways"]=0,t.$http.get("/customer/getPage.do",{params:a}).then((function(n){var i=n.data;t.customerProductIds=[],t.page=a.pageNum,0!=i.code&&t.$refs.recordTable&&t.$refs.recordTable.loadData([]).then((function(){t.dataListLoading=!1,t.pagerLoading=!1})).finally((function(){return t.$message.error(i.data||i.msg)})),t.dataList=i.data.list||[],t.dataList=e.dataList.map((function(e){return h(h({},e),{},{numberOfGateways:t.formatterNumberOfGateways(e)})})),t.$refs.recordTable&&(t.$refs.recordTable.clearCheckboxRow(),t.$refs.recordTable.loadData(t.dataList).then((function(){if(t.dataListLoading=!1,t.pagerLoading=!1,t.total=Number(i.data.total)||0,document.getElementsByClassName("vxe-pager--goto-text").length>0){var r=document.createEvent("HTMLEvents"),a=document.getElementsByClassName("vxe-input--inner")[0];document.getElementsByClassName("vxe-pager--goto-text")[0].innerHTML=e.$t("goto"),document.getElementsByClassName("vxe-pager--classifier-text")[0].innerHTML=t.$t("page"),a.value=parseInt(a.value),r.initEvent("input",!0,!0),a.dispatchEvent(r),document.getElementsByClassName("vxe-pager--total")[0].innerHTML=t.$t("total")+" "+t.total+" "+t.$t("records"),document.querySelector(".vxe-input--inner").addEventListener("click",(function(){for(var e=document.querySelectorAll(".vxe-select-option"),r=0;r<e.length;r++){var a=e[r];a.innerHTML=t.pageSizes[r]+" "+t.$t("articlePage")}}))}})).finally((function(){for(var e=0;e<t.dataList.length;e++)r+=t.dataList[e].numberOfGateways;t.footerData[0]["numberOfGateways"]=r})))})).catch((function(e){return t.dataListLoading=!1,!1}))):t.$message.warning("暂无客户产品查询权限, 请联系管理员")}),100,{leading:!0,trailing:!1}),formatterNumberOfGateways:function(e){var t="",r=e.sns.replaceAll(/\//g,",").split(",").sort();if(0==r.length&&(t=0),/^\d+$/.test(r[0].replaceAll("\t","").replaceAll("//","").replace('"',"").replace('"',"").replace(/\s*/g,"")))t=1==r.length&&r[0].length<10?Number(e.sns):r.length;else if(String(r[0]).includes("~")){var a=r[0].split("~");t=a[1]-a[0]}else t=0;return t},toBreakWay:function(e){var t="",r=e.replaceAll(/\//g,",").split(",").sort();return 0==r.length?"":/^\d+$/.test(r[0].replaceAll("\t","").replaceAll("//","").replace('"',"").replace('"',"").replace(/\s*/g,""))?(t='总计<span style="font-weight: bolder; font-size: 22px;">'+r.length+"</span>个网关<br /><br />",r.forEach((function(e){t+='<div style="font-weight: bolder; margin-top: 5px; font-size: 16px;">'+e.replaceAll("\t","").replaceAll("//","").replace('"',"").replace('"',"").replace(/\s*/g,"")+"</div>"})),t):e},handleImgDialogVisibleChange:function(e){this.imgList=[];for(var t=1;t<7;t++)e["img"+t]&&this.imgList.push(e["img"+t]);this.imgList.length>0&&(this.imgVisible=!0)},handleImageClickChange:function(e){window.open(e,"_blank")},handleCellClick:function(e){var t=e.row,r=e.column,a=this;if("productNum"===r.field&&t.productNum){var n=t.productNum;navigator.clipboard.writeText(n).then((function(){a.$message.success(a.$t("copySuccess"))})).catch((function(e){a.$message.error(a.$t("copyError"))}))}},selectAll:function(e){var t=this;this.customerProductIds=[],e.records.length>0&&e.records.forEach((function(e){t.customerProductIds.push(e.id)}))},dataListSelectionHandleChange:function(e){var t=this;this.customerProductIds=[],e.records.length>0&&e.records.forEach((function(e){t.customerProductIds.push(e.id)}))},handleExportGwsnChange:function(e){if(!e.sns)return this.$message.warning("暂无数据可导出");var t=e.sns.split(",").sort(),r=[];t.forEach((function(e){r.push({sn:e.replaceAll('"',"").replace(/\s*/g,"")})}));for(var a=[{label:"网关编号",prop:"sn"}],n=[],i=[],o=0;o<a.length;o++)n[o]=a[o].label,i[o]=a[o].prop;var l=n,s=i,c=r,d=this.formatJson(s,c);Object(u["a"])(l,d,"网关编号_"+(new Date).getTime())},handleAddOrUpdate:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdate.dataForm.id=e,t.$refs.addOrUpdate.init()}))},deleteHandle:c()((function(e){var t=this,r={ids:""};if(e)r["ids"]=e;else{if(0===t.customerProductIds.length)return t.$message.error(t.$t("deleteInfo.noData"));r["ids"]=t.customerProductIds.join(",")}t.$hasPermission("customer:delete:permission.do")?t.$confirm(t.$t("deleteInfo.noticeTitle"),t.$t("deleteInfo.noticePrompt"),{confirmButtonText:t.$t("deleteInfo.confirm"),cancelButtonText:t.$t("deleteInfo.cancel"),type:"warning"}).then((function(){t.dataListLoading=!0,t.$http.delete("/customer/delete.do",{params:r}).then((function(e){var r=e.data;if(0!=r.code)return t.dataListLoading=!1,t.$message.error(r.data||r.msg);t.$message.success(t.$t("deleteInfo.deleteSuccess")),t.dataListLoading=!1,t.getDataList()})).catch((function(e){return t.dataListLoading=!1,t.getDataList(),!1}))})).catch((function(e){})):t.$message.warning("暂无客户产品删除权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1}),formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))})),t.map((function(t){return e.map((function(e){return t[e]}))}))},resetExcelData:function(e){var t=[];this.dataList.forEach((function(e){var r={id:e.id||"",username:e.username||"",productNum:e.productNum||"",img10:e.img10||"",company:e.company||"",odate:e.odate||"",img9:e.img9||"",snscount:e.sns?e.sns.split(",").length:0,sns:e.sns.split(",").sort().join(",").replaceAll('"',"").replace(/\s*/g,"")||"",img1:e.img1||"",img2:e.img2||"",img3:e.img3||"",img4:e.img4||"",img5:e.img5||"",img6:e.img6||"",technicalService:0==e.technicalService?"无":1==e.technicalService?"线上":2==e.technicalService?"现场":"未知",warranty:e.warranty||"",createrame:e.createrame||"暂无",dbTime:e.dbTime||""};t.push(r)})),e(t)},handleExportCustomerProductData:c()((function(){var e=this;if(0==this.dataList.length)return this.$message.warning("暂无数据可导出");this.resetExcelData((function(t){for(var r=[{label:"序号",prop:"id"},{label:"客户名称",prop:"username"},{label:"合同编号",prop:"productNum"},{label:"描述",prop:"img10"},{label:"网关数量",prop:"snscount"},{label:"项目名称",prop:"company"},{label:"出库日期",prop:"odate"},{label:"网关型号",prop:"img9"},{label:"出库网关编号",prop:"sns"},{label:"图片1",prop:"img1"},{label:"图片2",prop:"img2"},{label:"图片3",prop:"img3"},{label:"图片4",prop:"img4"},{label:"图片5",prop:"img5"},{label:"图片6",prop:"img6"},{label:"技术服务",prop:"technicalService"},{label:"质保时长",prop:"warranty"},{label:"创建人",prop:"createrame"},{label:"创建时间",prop:"dbTime"}],a=[],n=[],i=0;i<r.length;i++)a[i]=r[i].label,n[i]=r[i].prop;var o=a,l=n,s=t,c=e.formatJson(l,s);Object(u["a"])(o,c,"客户产品信息_"+(new Date).getTime())}))}),1e3,{leading:!0,trailing:!1})},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.superAdmin=t.$store.state.user.superAdmin,t.scrollTableHeight=window.innerHeight-220-53-33,e.next=1,t.getModeList();case 1:return e.next=2,t.getAllUserList();case 2:window.onresize=function(){return function(){t.scrollTableHeight=window.innerHeight-220-53-33}()};case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{userSearch:function(e,t){e?(this.showUserList=this.allUserList,this.showUserList=this.showUserList.filter((function(t){if(t.label.toLowerCase().includes(e.toLowerCase()))return t})),0==this.showUserList.length&&this.showUserList.push({label:"暂无匹配数据",value:"",disabled:!0})):this.showUserList=this.allUserList},total:function(){this.total==(this.page-1)*this.limit&&0!=this.total&&(this.page-=1,this.getDataList())},$route:function(e,t){"{}"!=JSON.stringify(this.$route.query)&&(this.userSearch=this.$route.query.uname,this.dataForm.userId=Number(this.$route.query.uid),this.dataForm.fuzzy=this.$route.query.sn,this.getDataList())}}},g=p,f=(r("6597"),r("2877")),b=Object(f["a"])(g,a,n,!1,null,"5f6419ae",null);t["default"]=b.exports},"2a1f":function(e,t,r){"use strict";r.r(t);r("34ef"),r("28a5"),r("6b54"),r("4917");
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(a){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},r=function(){this.data=[]},a=function(e,t,r){this.data=e,this.size=e.length,this.type=t,this.encoding=r},n=r.prototype,i=a.prototype,o=e.FileReaderSync,l=function(e){this.code=this[this.name=e]},s="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=s.length,d=e.URL||e.webkitURL||e,u=d.createObjectURL,m=d.revokeObjectURL,h=d,p=e.btoa,g=e.atob,f=e.ArrayBuffer,b=e.Uint8Array,v=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;a.fake=i.fake=!0;while(c--)l.prototype[s[c]]=c+1;return d.createObjectURL||(h=e.URL=function(e){var t,r=document.createElementNS("http://www.w3.org/1999/xhtml","a");return r.href=e,"origin"in r||("data:"===r.protocol.toLowerCase()?r.origin=null:(t=e.match(v),r.origin=t&&t[1])),r}),h.createObjectURL=function(e){var t,r=e.type;return null===r&&(r="application/octet-stream"),e instanceof a?(t="data:"+r,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):p?t+";base64,"+p(e.data):t+","+encodeURIComponent(e.data)):u?u.call(d,e):void 0},h.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&m&&m.call(d,e)},n.append=function(e){var r=this.data;if(b&&(e instanceof f||e instanceof b)){for(var n="",i=new b(e),s=0,c=i.length;s<c;s++)n+=String.fromCharCode(i[s]);r.push(n)}else if("Blob"===t(e)||"File"===t(e)){if(!o)throw new l("NOT_READABLE_ERR");var d=new o;r.push(d.readAsBinaryString(e))}else e instanceof a?"base64"===e.encoding&&g?r.push(g(e.data)):"URI"===e.encoding?r.push(decodeURIComponent(e.data)):"raw"===e.encoding&&r.push(e.data):("string"!==typeof e&&(e+=""),r.push(unescape(encodeURIComponent(e))))},n.getBlob=function(e){return arguments.length||(e=null),new a(this.data.join(""),e,"raw")},n.toString=function(){return"[object BlobBuilder]"},i.slice=function(e,t,r){var n=arguments.length;return n<3&&(r=null),new a(this.data.slice(e,n>1?t:this.data.length),r,this.encoding)},i.toString=function(){return"[object Blob]"},i.close=function(){this.size=0,delete this.data},r}(e);e.Blob=function(e,r){var a=r&&r.type||"",n=new t;if(e)for(var i=0,o=e.length;i<o;i++)Uint8Array&&e[i]instanceof Uint8Array?n.append(e[i].buffer):n.append(e[i]);var l=n.getBlob(a);return!l.slice&&l.webkitSlice&&(l.slice=l.webkitSlice),l};var r=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=r(new e.Blob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||void 0)},"376b":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r("6b54"),r("34ef"),r("ac6a");function a(e,t){t&&(e+=1462);var r=Date.parse(e);return(r-new Date(Date.UTC(1899,11,30)))/864e5}function n(e,t){for(var r={},n={s:{c:1e7,r:1e7},e:{c:0,r:0}},i=0;i!=e.length;++i)for(var o=0;o!=e[i].length;++o){n.s.r>i&&(n.s.r=i),n.s.c>o&&(n.s.c=o),n.e.r<i&&(n.e.r=i),n.e.c<o&&(n.e.c=o);var l={v:e[i][o]};if(null!=l.v){var s=XLSX.utils.encode_cell({c:o,r:i});"number"===typeof l.v?l.t="n":"boolean"===typeof l.v?l.t="b":l.v instanceof Date?(l.t="n",l.z=XLSX.SSF._table[14],l.v=a(l.v)):l.t="s",r[s]=l}}return n.s.c<1e7&&(r["!ref"]=XLSX.utils.encode_range(n)),r}function i(){if(!(this instanceof i))return new i;this.SheetNames=[],this.Sheets={}}function o(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=255&e.charCodeAt(a);return t}function l(e,t,r){var a=t;a.unshift(e);for(var l="SheetJS",s=new i,c=n(a),d=a.map((function(e){return e.map((function(e){return null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length+5}:{wch:e.toString().length+5}}))})),u=d[0],m=1;m<d.length;m++)for(var h=0;h<d[m].length;h++)u[h]["wch"]<d[m][h]["wch"]&&(u[h]["wch"]=d[m][h]["wch"]);c["!cols"]=u,s.SheetNames.push(l),s.Sheets[l]=c;var p=XLSX.write(s,{bookType:"xlsx",bookSST:!1,type:"binary"}),g=r||"列表";saveAs(new Blob([o(p)],{type:"application/octet-stream"}),g+".xlsx")}r("2a1f"),r("0fd4"),r("1447")},6597:function(e,t,r){"use strict";r("b2dd")},b2dd:function(e,t,r){}}]);