(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d015"],{f63b:function(e,a,t){"use strict";t.r(a);t("7f7f");var r=function(){var e=this,a=e._self._c;return a("el-dialog",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t("update"):e.$t("add"),"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose},on:{"update:visible":function(a){e.visible=a},opened:e.handleDialogOpenChange}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":"120px"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.dataFormSubmitHandle()}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"menu-list",attrs:{prop:"platform",label:e.$t("pluginInManage.platform")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:!1,placeholder:e.$t("pluginInManage.pleaseSelectPlatform")},model:{value:e.dataForm.platform,callback:function(a){e.$set(e.dataForm,"platform",a)},expression:"dataForm.platform"}},e._l(e.platformList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"name",label:e.$t("pluginInManage.name")}},[a("el-input",{attrs:{placeholder:e.$t("pluginInManage.pleaseEnterName"),clearable:""},model:{value:e.dataForm.name,callback:function(a){e.$set(e.dataForm,"name",a)},expression:"dataForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"showName",label:e.$t("pluginInManage.showName")}},[a("el-input",{attrs:{placeholder:e.$t("pluginInManage.pleaseEnterShowname"),clearable:""},model:{value:e.dataForm.showName,callback:function(a){e.$set(e.dataForm,"showName",a)},expression:"dataForm.showName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"ver",label:e.$t("pluginInManage.versionNumber")}},[a("el-input",{attrs:{placeholder:e.$t("pluginInManage.pleaseEnterNameServerVersion"),clearable:""},model:{value:e.dataForm.ver,callback:function(a){e.$set(e.dataForm,"ver",a)},expression:"dataForm.ver"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"md5",label:"MD5"}},[a("el-input",{attrs:{placeholder:e.$t("pluginInManage.pleaseEnterMd5"),clearable:""},model:{value:e.dataForm.md5,callback:function(a){e.$set(e.dataForm,"md5",a)},expression:"dataForm.md5"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:e.$t("pluginInManage.uploadFile")}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"",drag:"","http-request":e.uploadSectionFile,"on-remove":e.handleRemove,"file-list":e.fileList,"before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text",domProps:{innerHTML:e._s(e.$t("pluginInManage.dragFileHere"))}})])],1)],1)],1)],1),a("template",{slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.$t("cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)},l=[],i=(t("8e6e"),t("ac6a"),t("456d"),t("ade3")),n=t("b047"),o=t.n(n);function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){Object(i["a"])(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var m={props:["plugindownloadPropId"],data:function(){return{visible:!1,loading:!1,fileList:[],dataForm:{id:"",md5:"",name:"",showName:"",ver:"",platform:"",re1:"",re2:"",re3:""},rules:{name:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],showName:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],platform:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],ver:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],md5:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},platformList:[{label:"A7",value:0},{label:"arm9",value:1},{label:"x86-linux",value:2},{label:"A53",value:3},{label:"A9",value:4}]}},methods:{init:function(){this.visible=!0},handleDialogOpenChange:function(){this.$refs["dataForm"].resetFields(),this.fileList=[],this.dataForm.id=this.plugindownloadPropId,this.dataForm.id&&this.getInfo()},beforeUpload:function(e){},handleRemove:function(e,a){this.fileList=a},uploadSectionFile:function(e){var a=this,t=this,r=new FormData;t.$hasPermission("goFastDfs:uploadFile:permission.do")?(r.append("multipartFile",e.file),t.fileList=[].concat(e.file),t.loading=!0,t.$http.post("/goFastDfs/uploadFile.do",r).then((function(e){var r=e.data;0==r.code?(t.dataForm.re1=r.data,t.$message.success(a.$t("template.uploadSuccess")),t.loading=!1):(t.$message.error(r.data||a.$t("template.uploadError")),t.loading=!1)})).catch((function(e){return a.loading=!1,!1}))):t.$message.warning("暂无上传文件权限, 请联系管理员")},getInfo:function(){var e=this;this.$hasPermission("extp:select:permission.do")?(this.loading=!0,this.$http.get("/extp/select.do",{params:{id:this.dataForm.id}}).then((function(a){var t=a.data;if(t.hasOwnProperty("code")&&0!=t.code)return e.loading=!1,e.$message.error(t.data||t.msg);e.dataForm=d(d({},e.dataForm),t.data),e.loading=!1})).catch((function(a){return e.loading=!1,!1}))):this.$message.warning("暂无插件查询权限, 请联系管理员")},handleClose:o()((function(){this.visible=!1}),1e3,{leading:!0,trailing:!1}),dataFormSubmitHandle:o()((function(){var e=this;this.$refs["dataForm"].validate((function(a){if(!a)return!1;var t="/extp/insert.do";if(e.dataForm.id){if(t="/extp/update.do",!e.$hasPermission("extp:update:permission.do"))return void e.$message.warning("暂无插件修改权限, 请联系管理员")}else{if(0==e.fileList.length)return e.$message.warning(e.$t("pluginInManage.fileEmptyPleaseUploadFile"));if(!e.$hasPermission("extp:insert:permission.do"))return void e.$message.warning("暂无插件新增权限, 请联系管理员")}e.loading=!0,e.$http[e.dataForm.id?"put":"post"](t,[e.dataForm]).then((function(a){var t=a.data;if(0!=t.code)return e.loading=!1,e.$message.error(t.data||t.msg);e.loading=!1,e.$message.success(t.msg),e.visible=!1,e.$emit("refreshDataList")})).catch((function(a){return e.loading=!1,e.visible=!1,e.$emit("refreshDataList"),!1}))}))}),1e3,{leading:!0,trailing:!1})}},p=m,u=t("2877"),c=Object(u["a"])(p,r,l,!1,null,null,null);a["default"]=c.exports}}]);