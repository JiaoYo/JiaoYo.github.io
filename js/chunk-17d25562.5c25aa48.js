(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17d25562"],{7063:function(e,t,a){},ac1e:function(e,t,a){"use strict";a("7063")},bef0:function(e,t,a){e.exports=a.p+"img/login_bg.81dba938.jpg"},c76b:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("a481");var i=a("ade3"),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"aui-wrapper aui-page__login",style:{"background-image":e.cpsite?"url("+e.cpsite+")":"url("+a("bef0")+")","background-size":"cover"}},[e.sitePicture&&!e.requestFailed?t("div",{style:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({position:"fixed"},e.logosite,"10px"),"top","10px"),"background","transparent"),"margin","0"),"padding","10px"),"width","230px"),"height","100px"),"text-align",e.logosite)},[t("img",{style:{width:"http://firmware.linkqi.cn/LOGO.png"==e.sitePicture?"70px":"auto","max-width":"100%",height:"auto","max-height":"100%"},attrs:{src:e.sitePicture,alt:""}})]):e._e(),t("div",{staticClass:"aui-content__wrapper"},[t("main",{staticClass:"aui-content",style:{"align-items":e.logsite,"margin-right":"end"==e.logsite?"300px":0}},[e.requestFailed?e._e():t("div",{staticClass:"login-header"},[t("h2",{staticClass:"login-brand"},[e._v(e._s(e.$t("brand.lg")))])]),t("div",{staticClass:"login-body",staticStyle:{position:"relative"}},["dingiiot.com"!==e.currentDomain&&"localhost"!==e.currentDomain?t("h3",{staticClass:"login-title"},[e._v(e._s(e.$t("login.title")))]):e._e(),t("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmitHandle()}}},["dingiiot.com"===e.currentDomain||"localhost"===e.currentDomain?t("div",[t("div",{staticStyle:{"margin-bottom":"20px","font-size":"24px","font-weight":"bold",display:"flex","justify-content":"space-between","align-items":"center"}},[t("h4",{staticStyle:{margin:"15px 0"}},[e._v(e._s("wechat"==e.activeName?"二维码登录":"account"===e.activeName?"账号密码登录":"短信验证码登录"))]),"wechat"==e.activeName?t("div",{staticClass:"login__type__container__select-type__account",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handleTypeChange("account")}}}):e._e(),"account"==e.activeName||"phnumcode"===e.activeName?t("div",{staticClass:"login__type__container__select-type__scan",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handleTypeChange("wechat")}}}):e._e()]),"wechat"===e.activeName?t("div",{staticClass:"qr-wrapper"},[t("iframe",{staticClass:"qr-frame",attrs:{src:e.wxUrl,frameborder:"0",scrolling:"no"}}),t("div",{staticClass:"qr-tip"},[e._v("微信二维码有效期5分钟")]),t("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",size:"small"},on:{click:e.handleQuickWechatChange}},[t("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",gap:"0 5px"}},[t("img",{staticStyle:{width:"16px",height:"16px"},attrs:{src:a("df80"),alt:""}}),t("span",[e._v("微信快捷登录")])])])],1):e._e(),"account"===e.activeName?t("div",[t("el-form-item",[t("el-select",{staticClass:"w-percent-100",model:{value:e.$i18n.locale,callback:function(t){e.$set(e.$i18n,"locale",t)},expression:"$i18n.locale"}},e._l(e.i18nMessages,(function(e,a){return t("el-option",{key:a,attrs:{label:e._lang,value:a}})})),1)],1),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:e.$t("login.username")},model:{value:e.dataForm.username,callback:function(t){e.$set(e.dataForm,"username",t)},expression:"dataForm.username"}},[t("span",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[t("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-user"}})])])])],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("login.password"),"show-password":""},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}},[t("span",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[t("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-lock"}})])])])],1),t("el-form-item",{attrs:{prop:"captcha"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:14}},[t("el-input",{ref:"inputCaptcha",attrs:{placeholder:e.$t("login.captcha")},on:{input:function(t){e.dataForm.captcha=e.dataForm.captcha.replace(/[^a-zA-Z0-9]/g,"")}},model:{value:e.dataForm.captcha,callback:function(t){e.$set(e.dataForm,"captcha",t)},expression:"dataForm.captcha"}},[t("span",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[t("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-safetycertificate"}})])])])],1),t("el-col",{staticClass:"login-captcha",attrs:{span:10}},[t("img",{staticStyle:{width:"100%"},attrs:{src:e.captchaPath,alt:""},on:{click:function(t){return e.getCaptcha()}}})])],1)],1),t("el-form-item",{staticStyle:{"margin-top":"-10px"}},[t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("el-checkbox",{staticStyle:{"margin-top":"-10px"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("\n                                        "+e._s(e.$t("login.remmberPassword"))+"\n                                    ")]),t("el-button",{attrs:{icon:"el-icon-mobile",type:"text"},on:{click:e.handleVerifyCodeChange}},[e._v("短信验证码登录")])],1)])],1):e._e(),"phnumcode"===e.activeName?t("div",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:14}},[t("el-form-item",{attrs:{prop:"mobile"}},[t("el-input",{attrs:{maxlength:11,placeholder:"请输入手机号码"},nativeOn:{keyup:function(t){return e.mobileValidate.apply(null,arguments)}},model:{value:e.dataForm.mobile,callback:function(t){e.$set(e.dataForm,"mobile",t)},expression:"dataForm.mobile"}})],1)],1),t("el-col",{attrs:{span:10}},[0==e.loginDisabled?t("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-mobile-phone",type:"button",disabled:e.loginDisabled},on:{click:e.handleLoginSendcode}},[e._v("\n                                        "+e._s(e.$t("register.sendCode"))+"\n                                    ")]):e._e(),1==e.loginDisabled?t("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-mobile-phone",type:"button",disabled:e.loginDisabled},on:{click:e.handleLoginSendcode}},[e._v("\n                                        "+e._s(e.loginBtntxt)+"\n                                    ")]):e._e()],1)],1),t("el-form-item",{attrs:{prop:"code"}},[t("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.dataForm.code,callback:function(t){e.$set(e.dataForm,"code",t)},expression:"dataForm.code"}})],1),t("el-form-item",{staticStyle:{"margin-top":"-10px"}},[t("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center"}},[t("el-button",{attrs:{icon:"el-icon-user",type:"text"},on:{click:e.handleAccountChange}},[e._v("账号密码登录")])],1)])],1):e._e()]):[t("el-form-item",[t("el-select",{staticClass:"w-percent-100",model:{value:e.$i18n.locale,callback:function(t){e.$set(e.$i18n,"locale",t)},expression:"$i18n.locale"}},e._l(e.i18nMessages,(function(e,a){return t("el-option",{key:a,attrs:{label:e._lang,value:a}})})),1)],1),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{placeholder:e.$t("login.username")},model:{value:e.dataForm.username,callback:function(t){e.$set(e.dataForm,"username",t)},expression:"dataForm.username"}},[t("span",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[t("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-user"}})])])])],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("login.password"),"show-password":""},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}},[t("span",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[t("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-lock"}})])])])],1),t("el-form-item",{attrs:{prop:"captcha"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:14}},[t("el-input",{ref:"inputCaptcha",attrs:{placeholder:e.$t("login.captcha")},on:{input:function(t){e.dataForm.captcha=e.dataForm.captcha.replace(/[^a-zA-Z0-9]/g,"")}},model:{value:e.dataForm.captcha,callback:function(t){e.$set(e.dataForm,"captcha",t)},expression:"dataForm.captcha"}},[t("span",{staticClass:"el-input__icon",attrs:{slot:"prefix"},slot:"prefix"},[t("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-safetycertificate"}})])])])],1),t("el-col",{staticClass:"login-captcha",attrs:{span:10}},[t("img",{staticStyle:{width:"100%"},attrs:{src:e.captchaPath,alt:""},on:{click:function(t){return e.getCaptcha()}}})])],1)],1),t("el-form-item",{staticStyle:{"margin-top":"-10px","text-align":"left"}},[t("el-checkbox",{staticStyle:{"margin-top":"-10px"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("\n                                "+e._s(e.$t("login.remmberPassword"))+"\n                            ")])],1)],("dingiiot.com"===e.currentDomain||"localhost"===e.currentDomain)&&"wechat"!==e.activeName||"dingiiot.com"!=e.currentDomain&&"localhost"!==e.currentDomain?t("el-form-item",[t("el-button",{staticClass:"w-percent-100",attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v("\n                            "+e._s(e.$t("login.title"))+"\n                        ")])],1):e._e()],2),("dingiiot.com"===e.currentDomain||"localhost"===e.currentDomain)&&"wechat"!==e.activeName||"dingiiot.com"!=e.currentDomain&&"localhost"!==e.currentDomain?t("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",gap:"0 10px"}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v(e._s(e.$t("login.register")))]),t("div",[e._v("|")]),t("el-button",{attrs:{type:"text"},on:{click:e.forgetpassword}},[e._v(e._s(e.$t("login.forgetPassword")))])],1):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"gcln.hydiandangjia.com"!=e.domain&&!e.requestFailed||"gcln.hydiandangjia.com"==e.domain&&!e.requestFailed,expression:"(domain != 'gcln.hydiandangjia.com' && !requestFailed) || (domain == 'gcln.hydiandangjia.com' && !requestFailed)"}],staticClass:"login-footer"},[e.requestCopyrightFailed?e._e():t("a",{staticStyle:{"text-decoration":"none"},attrs:{href:e.$t("login.linkUrl"),target:"_blank"}},[e._v("\n                    "+e._s(e.$t("login.copyright"))+"\n                ")]),e.requestCopyrightFailed||e.requestReportNumberFailed?e._e():t("el-divider",{attrs:{direction:"vertical"}}),e.requestReportNumberFailed?e._e():t("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"https://beian.miit.gov.cn/",target:"_blank"}},[e._v(e._s(e.$t("login.reportNumber")))])],1)])]),t("el-dialog",{attrs:{title:e.requestFailed?"欢迎注册":e.$t("register.title"),visible:e.centerDialogVisible,center:"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.centerDialogVisible=t},close:e.handleCloseRegisterDialogChange}},[t("div",{staticStyle:{margin:"20px"}}),t("el-form",{ref:"formLabelAlign",attrs:{"label-position":e.labelPosition,rules:e.regRule,"label-width":"en-US"===e.$i18n.locale?"150px":"120px",model:e.formLabelAlign},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm()}}},[t("el-form-item",{attrs:{label:e.$t("register.deptname"),prop:"deptName"}},[t("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:e.formLabelAlign.deptName,callback:function(t){e.$set(e.formLabelAlign,"deptName",t)},expression:"formLabelAlign.deptName"}})],1),t("el-form-item",{attrs:{label:e.$t("register.membername"),prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入登录账号"},model:{value:e.formLabelAlign.username,callback:function(t){e.$set(e.formLabelAlign,"username",t)},expression:"formLabelAlign.username"}})],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:14}},[t("el-form-item",{attrs:{prop:"emailOrMobile",label:e.$t("register.email")+" / "+e.$t("register.mobile")}},[t("el-input",{attrs:{placeholder:e.$t("pleaseEnterEmailOrPhone")},model:{value:e.formLabelAlign.emailOrMobile,callback:function(t){e.$set(e.formLabelAlign,"emailOrMobile",t)},expression:"formLabelAlign.emailOrMobile"}})],1)],1),t("el-col",{attrs:{span:10}},[0==e.disabled?t("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-mobile-phone",type:"button",disabled:e.disabled},on:{click:e.sendcode}},[e._v("\n                        "+e._s(e.$t("register.sendCode"))+"\n                    ")]):e._e(),1==e.disabled?t("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-mobile-phone",type:"button",disabled:e.disabled},on:{click:e.sendcode}},[e._v(e._s(e.btntxt)+"\n                    ")]):e._e()],1)],1),t("el-form-item",{attrs:{label:e.$t("register.code"),prop:"code"}},[t("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.formLabelAlign.code,callback:function(t){e.$set(e.formLabelAlign,"code",t)},expression:"formLabelAlign.code"}})],1),t("el-form-item",{attrs:{prop:"password",label:e.$t("register.password")}},[t("el-input",{attrs:{minlength:6,"show-password":"",placeholder:e.$t("register.enterPassword")},model:{value:e.formLabelAlign.password,callback:function(t){e.$set(e.formLabelAlign,"password",t)},expression:"formLabelAlign.password"}})],1),t("el-form-item",{attrs:{prop:"comfirmpassword",label:e.$t("register.confirmPassword")}},[t("el-input",{attrs:{"show-password":"",placeholder:"请再次输入密码"},model:{value:e.formLabelAlign.comfirmpassword,callback:function(t){e.$set(e.formLabelAlign,"comfirmpassword",t)},expression:"formLabelAlign.comfirmpassword"}})],1)],1),t("template",{slot:"footer"},[t("el-switch",{attrs:{"active-text":e.requestFailed?"《网站服务条款》《法律申明和隐私权政策》":e.$t("login.activeText")},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),t("el-row",{staticStyle:{"margin-top":"20px"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("\n                    "+e._s(e.$t("register.agreeAndRegister"))+"\n                ")])],1)],1)],2),e.centerDialogVisibleSecond?t("forgetpwd",{ref:"forgetpwd"}):e._e(),t("el-dialog",{attrs:{center:"",width:"40%","show-close":!1,visible:e.bindWechatDialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.bindWechatDialogVisible=t}}},[t("template",{slot:"title"},[t("div",{staticStyle:{display:"flex","align-items":"flex-end"}},[t("div",{staticStyle:{"font-weight":"bolder","font-size":"16px"}},[e._v("绑定微信")]),t("div",{staticStyle:{color:"#F87171","margin-left":"10px",display:"inline-block","font-size":"13px"}},[e._v("\n                    绑定过期时间10分钟\n                ")])])]),t("el-form",{ref:"bindWechatForm",attrs:{"label-position":e.labelPosition,rules:e.bindWechatRule,"label-width":"en-US"===e.$i18n.locale?"150px":"120px",model:e.bindWechatForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleBindWechatSubmit()}}},[t("el-form-item",{attrs:{label:e.$t("register.membername"),prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入登录账号"},model:{value:e.bindWechatForm.username,callback:function(t){e.$set(e.bindWechatForm,"username",t)},expression:"bindWechatForm.username"}})],1),t("el-form-item",{attrs:{prop:"password",label:e.$t("register.password")}},[t("el-input",{attrs:{minlength:6,"show-password":"",placeholder:e.$t("register.enterPassword")},model:{value:e.bindWechatForm.password,callback:function(t){e.$set(e.bindWechatForm,"password",t)},expression:"bindWechatForm.password"}})],1),t("el-form-item",{attrs:{prop:"comfirmpassword",label:e.$t("register.confirmPassword")}},[t("el-input",{attrs:{"show-password":"",placeholder:"请再次输入密码"},model:{value:e.bindWechatForm.comfirmpassword,callback:function(t){e.$set(e.bindWechatForm,"comfirmpassword",t)},expression:"bindWechatForm.comfirmpassword"}})],1)],1),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{type:"primary",loading:e.bindWechatLoading},on:{click:function(t){return e.handleBindWechatSubmit()}}},[e._v("\n                "+e._s(e.$t("confirm"))+"\n            ")])],1)],2)],1)},o=[],n=(a("6762"),a("2fdb"),a("6b54"),a("7f7f"),a("28a5"),a("4917"),a("f559"),a("4328")),s=a.n(n),l=a("a78e"),c=a.n(l),d=a("b047"),m=a.n(d),g=a("12cb"),u=a("ed08"),p=a("9dce"),f=a("61f7"),h=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("forgetpwd.title"),visible:e.centerDialogVisibleSecond,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose,width:"40%"},on:{"update:visible":function(t){e.centerDialogVisibleSecond=t}}},[t("el-form",{ref:"forgetpwdform",attrs:{model:e.forgetpwdform,rules:e.rules,"label-width":"en-US"===e.$i18n.locale?"150px":"120px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit()}}},[t("el-form-item",{attrs:{prop:"username",label:e.$t("forgetpwd.username")}},[t("el-input",{attrs:{placeholder:e.$t("forgetpwd.enterUsername")},model:{value:e.forgetpwdform.username,callback:function(t){e.$set(e.forgetpwdform,"username",t)},expression:"forgetpwdform.username"}})],1),t("el-row",[t("el-col",{attrs:{span:18}},[t("el-form-item",{attrs:{prop:"emailOrMobile",label:e.$t("register.email")+" / "+e.$t("register.mobile")}},[t("el-input",{attrs:{placeholder:e.$t("pleaseEnterEmailOrPhone")},model:{value:e.forgetpwdform.emailOrMobile,callback:function(t){e.$set(e.forgetpwdform,"emailOrMobile",t)},expression:"forgetpwdform.emailOrMobile"}})],1)],1),t("el-col",{attrs:{span:5,offset:1}},[t("el-button",{staticStyle:{width:"100%"},attrs:{disabled:e.disabled},on:{click:e.sendcodeMsg}},[e._v(e._s(e.sendcode))])],1)],1),t("el-form-item",{attrs:{prop:"code",label:e.$t("forgetpwd.code")}},[t("el-input",{attrs:{placeholder:e.$t("forgetpwd.enterCode")},model:{value:e.forgetpwdform.code,callback:function(t){e.$set(e.forgetpwdform,"code",t)},expression:"forgetpwdform.code"}})],1),t("el-form-item",{attrs:{prop:"newpassword",label:e.$t("forgetpwd.newPassword")}},[t("el-input",{attrs:{minlength:6,type:"password",placeholder:e.$t("forgetpwd.enterNewPassword"),"show-password":""},model:{value:e.forgetpwdform.newpassword,callback:function(t){e.$set(e.forgetpwdform,"newpassword",t)},expression:"forgetpwdform.newpassword"}})],1),t("el-form-item",{attrs:{prop:"repeatpassword",label:e.$t("forgetpwd.confirmPassword")}},[t("el-input",{attrs:{type:"password",placeholder:e.$t("forgetpwd.enterConfirmPassword"),"show-password":""},model:{value:e.forgetpwdform.repeatpassword,callback:function(t){e.$set(e.forgetpwdform,"repeatpassword",t)},expression:"forgetpwdform.repeatpassword"}})],1)],1),t("template",{slot:"footer"},[t("el-button",{attrs:{type:"default"},on:{click:e.handleClose}},[e._v(e._s(e.$t("forgetpwd.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("forgetpwd.submit")))])],1)],2)},b=[],w={name:"forgetpwd",data:function(){return{sendcode:this.$t("forgetpwd.sendCode"),disabled:!1,centerDialogVisibleSecond:!1,forgetpwdform:{emailOrMobile:"",phone:"",code:"",username:"",newpassword:"",repeatpassword:""}}},computed:{rules:function(){var e=this,t=function(t,a,i){if(e.forgetpwdform.newpassword!==a)return i(new Error(e.$t("user.validate.comfirmPassword")));i()},a=function(t,a,i){a?i():i(new Error(e.$t("forgetpwd.enterCode")))};return{username:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],emailOrMobile:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],code:[{required:!0,validator:a,trigger:"change"}],newpassword:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{min:6,message:this.$t("forgetpwd.passwordLimit"),trigger:"change"}],repeatpassword:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{min:6,message:this.$t("forgetpwd.passwordLimit"),trigger:"change"},{validator:t,trigger:"change"}]}}},methods:{init:function(){var e=this;this.centerDialogVisibleSecond=!0,this.$nextTick((function(){e.$refs["forgetpwdform"].resetFields()}))},sendcodeMsg:function(){var e=this,t={domain:document.domain.startsWith("www.")?document.domain.substring(4):document.domain};if(!e.forgetpwdform.emailOrMobile)return e.$message.error("请输入邮箱或者手机号");if(!Object(f["b"])(e.forgetpwdform.emailOrMobile)&&!Object(f["a"])(e.forgetpwdform.emailOrMobile))return e.$message.error("请输入正确的邮箱或者手机号");Object(f["a"])(e.forgetpwdform.emailOrMobile)?t["mailAddr"]=e.forgetpwdform.emailOrMobile:t["phoneNumber"]=e.forgetpwdform.emailOrMobile;var a=60,i=setInterval((function(){a--,e.disabled=!0,e.sendcode=a+e.$t("forgetpwd.reGet"),0===a&&(e.sendcode=e.$t("forgetpwd.getCode"),e.disabled=!1,clearInterval(i))}),1e3);e.$http.post("/sys/sms/sendMessage1.do",s.a.stringify(t)).then((function(t){var a=t.data;if(0!=a.code)return clearInterval(i),i=null,e.sendcode=e.$t("forgetpwd.getCode"),e.disabled=!1,e.$message.error(a.data||a.msg);e.$message.success(a.data||a.msg)})).catch((function(t){return clearInterval(i),i=null,e.sendcode=e.$t("forgetpwd.sendCode"),e.disabled=!1,e.$message.error(t),!1}))},handleClose:m()((function(){this.centerDialogVisibleSecond=!1}),1e3,{leading:!0,trailing:!1}),handleSubmit:m()((function(){var e=this,t={username:e.forgetpwdform.username,smscode:e.forgetpwdform.code,password:e.forgetpwdform.newpassword};return e.forgetpwdform.emailOrMobile?Object(f["b"])(e.forgetpwdform.emailOrMobile)||Object(f["a"])(e.forgetpwdform.emailOrMobile)?(Object(f["a"])(e.forgetpwdform.emailOrMobile)?t["email"]=e.forgetpwdform.emailOrMobile:t["mobile"]=e.forgetpwdform.emailOrMobile,void e.$refs["forgetpwdform"].validate((function(a){if(!a)return!1;e.$http.put("/sys/user/password.do",t).then((function(t){var a=t.data;if(0!=a.code)return e.$message.error(a.data||a.msg);e.$message.success(a.data||a.msg),e.handleClose()})).catch((function(e){return!1}))}))):e.$message.error("请输入正确的邮箱或者手机号"):e.$message.error("请输入邮箱或者手机号")}),1e3,{leading:!0,trailing:!1})},watch:{centerDialogVisibleSecond:function(e,t){this.centerDialogVisibleSecond=e}}},v=w,$=a("2877"),x=Object($["a"])(v,h,b,!1,null,null,null),y=x.exports,k={0:"获取微信信息失败",1:"获取用户信息失败",2:"二维码过期",4:"账号停用",6:"其他未知原因"},C={inject:["reload"],data:function(){var e=this;return{currentCode:"",requestFailed:!0,requestCopyrightFailed:!0,requestReportNumberFailed:!0,checked:!1,closeTimer:null,loginCloseTimer:null,i18nMessages:g["b"],value1:!0,centerDialogVisible:!1,sitePicture:"",logosite:"left",logsite:"center",cpsite:"",domain:"",currentDomain:document.domain.startsWith("www.")?document.domain.substring(4):document.domain,centerDialogVisibleSecond:!1,captchaPath:"",dataForm:{username:"",password:"",uuid:"",captcha:"",mobile:"",code:""},loginTime:60,loginDisabled:!1,loginBtntxt:"",labelPosition:"right",formLabelAlign:{username:"",deptName:"",email:"",mobile:"",emailOrMobile:"",password:"",comfirmpassword:"",status:1,deptId:0,pid:0,roleIdList:["1147694289157566466"]},disabled:!1,time:0,btntxt:this.$t("register.retrySend"),count:0,show:"",activeName:"wechat",bindWechatLoading:!1,bindWechatDialogVisible:!1,bindWechatForm:{username:"",password:"",comfirmpassword:"",bindWechatUuid:""},bindWechatRule:{username:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],password:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],comfirmpassword:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{validator:function(t,a,i){""===a?i(new Error(e.$t("validate.required"))):a!==e.bindWechatForm.password?i(new Error("两次输入密码不一致")):i()},trigger:"change"}]},wxUrl:""}},components:{forgetpwd:y},computed:{dataRule:function(){return"phnumcode"===this.activeName?{mobile:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],code:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]}:{username:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],password:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],captcha:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]}},regRule:function(){var e=this,t=function(t,a,i){if(e.formLabelAlign.password!==a)return i(new Error(e.$t("user.validate.comfirmPassword")));i()},a=function(t,a,i){a?i():i(new Error(e.$t("register.enterCode")))};return{deptName:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{validator:function(e,t,a){if(/^[\u4e00-\u9fa5]/.test(t))if(/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(t)){var i=t.match(/[\u4e00-\u9fa5]/g);!i||i.length<5?a(new Error("公司名称至少包含 5 个汉字")):a()}else a(new Error("公司名称不能包含特殊符号"));else a(new Error("公司名称必须以中文开头"))},trigger:"change"}],username:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],password:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{min:6,message:this.$t("register.limitSix"),trigger:"change"}],comfirmpassword:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{min:6,message:this.$t("register.limitSix"),trigger:"change"},{validator:t,trigger:"change"}],emailOrMobile:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],code:[{required:!0,validator:a,trigger:"change"}],email:[{type:"email",message:this.$t("register.emailCorrect"),trigger:"change"}]}}},created:function(){var e=this;if("dingiiot.com"!==e.currentDomain&&"localhost"!==e.currentDomain&&(e.activeName="account"),-1!=window.location.href.indexOf("type")){var t=window.location.href.split("type=")[1];"register"==t?(e.centerDialogVisible=!0,e.centerDialogVisibleSecond=!1):"forgetpassword"==t&&(e.centerDialogVisible=!1,e.forgetpassword())}else e.centerDialogVisible=!1,e.centerDialogVisibleSecond=!1;-1!=window.location.href.indexOf("token")?(e.getDomain(),"dingiiot.com"===e.currentDomain||"localhost"===e.currentDomain?"account"==e.activeName?(e.getCaptcha(),e.getCookie()):"wechat"==e.activeName&&e.handleGetQrcodeUrlInfo():(e.getCaptcha(),e.getCookie()),e.$nextTick((function(){var e=window.location.href.match(/token=([^#&]+)/),t=e?e[1]:"";c.a.set("token",t),window.location.replace("/#/tgw-tgwinfo")}))):(p["a"].$off("refreshLoginPage"),p["a"].$on("refreshLoginPage",(function(){e.reload()})),e.getDomain(),"dingiiot.com"===e.currentDomain||"localhost"===e.currentDomain?"account"==e.activeName?(e.getCaptcha(),e.getCookie()):"wechat"==e.activeName&&e.handleGetQrcodeUrlInfo():(e.getCaptcha(),e.getCookie()))},methods:{getDomain:function(){var e=this;this.requestFailed=!0,this.requestCopyrightFailed=!0,this.requestReportNumberFailed=!0;var t=document.domain,a=document.querySelector("link[rel*='icon']");-1!=t.indexOf("Configportal1.i91pv.com")&&(this.requestCopyrightFailed=!1,this.requestReportNumberFailed=!1,document.title="网关配置平台",g["b"]["zh-CN"].brand.lg="网关配置平台",g["b"]["zh-CN"].brand.mini="网关配置平台",g["b"]["zh-CN"].login.copyright="新耀能源科技有限公司",g["b"]["zh-CN"].login.activeText="《网关配置平台网站服务条款》《法律申明和隐私权政策》",g["b"]["zh-CN"].register.title="欢迎注册网关配置平台",g["b"]["zh-CN"].login.linkUrl="http://www.i91pv.com",g["b"]["zh-CN"].login.reportNumber="浙ICP备15002353号-1",this.formLabelAlign.deptId="1255766065401737218",this.logosite="left",this.logsite="center",this.cpsite="",this.sitePicture="https://firmware.linkqi.cn/df7638b4-fd06-4044-86e1-6d13fcc8b365",a&&(a.href="https://firmware.linkqi.cn/df7638b4-fd06-4044-86e1-6d13fcc8b365")),-1!=t.indexOf("www.")&&(t=t.split("www.")[1]),this.domain=t,this.$http.get("/domain/domain/getDomainIpInfo",{params:{domainIp:t}}).then((function(t){var i=t.data;if(0!=i.code)return e.$message.error(i.data||i.msg);i.data.length>0?(e.requestFailed=!1,i.data[0].workName&&(e.requestCopyrightFailed=!1),i.data[0].num&&(e.requestReportNumberFailed=!1),document.title=i.data[0].dname,g["b"]["zh-CN"].brand.lg=i.data[0].dname,g["b"]["zh-CN"].brand.mini=i.data[0].dname,g["b"]["zh-CN"].login.copyright=i.data[0].workName,g["b"]["zh-CN"].login.activeText="《"+i.data[0].dname+"网站服务条款》《法律申明和隐私权政策》",g["b"]["zh-CN"].register.title="欢迎注册"+i.data[0].dname,g["b"]["zh-CN"].login.linkUrl=i.data[0].workUrl,g["b"]["zh-CN"].login.reportNumber=i.data[0].num,e.logosite=i.data[0].logosite?i.data[0].logosite:"left",e.logsite=i.data[0].logsite?i.data[0].logsite:"center",e.cpsite=i.data[0].cpsite?i.data[0].cpsite+"?_t="+(new Date).getTime():"",e.sitePicture=i.data[0].domainPicture?i.data[0].domainPicture:"",a&&(a.href=i.data[0].domainPicture?i.data[0].domainPicture:"")):(e.requestCopyrightFailed=!0,e.requestReportNumberFailed=!0)})).catch((function(t){return e.requestCopyrightFailed=!0,e.requestReportNumberFailed=!0,!1}))},mobileValidate:function(){this.formLabelAlign.mobile=this.formLabelAlign.mobile.replace(/[^\.\d]/g,""),this.formLabelAlign.mobile=this.formLabelAlign.mobile.replace(".","")},sendcode:function(){var e=this,t={domain:document.domain.startsWith("www.")?document.domain.substring(4):document.domain};return e.formLabelAlign.emailOrMobile?Object(f["b"])(e.formLabelAlign.emailOrMobile)||Object(f["a"])(e.formLabelAlign.emailOrMobile)?(Object(f["a"])(e.formLabelAlign.emailOrMobile)?t["mailAddr"]=e.formLabelAlign.emailOrMobile:t["phoneNumber"]=e.formLabelAlign.emailOrMobile,e.time=60,e.disabled=!0,void e.$http.post("/sys/sms/sendMessage1.do",s.a.stringify(t)).then((function(t){var a=t.data;if(0!=a.code)return e.disabled=!1,e.$message.error(a.data||a.msg);e.timer(),e.$message.success(a.data||a.msg)})).catch((function(t){return e.$message.error(t),e.disabled=!1,!1}))):e.$message.error("请输入正确的邮箱或者手机号"):e.$message.error("请输入邮箱或者手机号")},timer:function(){this.time>0?(this.time--,this.btntxt=this.time+this.$t("register.retryGetCode"),this.closeTimer=setTimeout(this.timer,1e3)):(this.time=0,this.btntxt=this.$t("register.getCode"),this.disabled=!1,clearInterval(this.closeTimer))},handleCloseRegisterDialogChange:function(){this.$refs["formLabelAlign"].resetFields(),this.formLabelAlign.email="",this.formLabelAlign.mobile="",this.centerDialogVisible=!1},submitForm:m()((function(){var e=this,t={username:"",deptName:"",email:"",mobile:"",password:"",comfirmpassword:"",status:1,deptId:0,pid:0,roleIdList:["1147694289157566466"],realName:"",smscode:""};e.$refs["formLabelAlign"].validate((function(a){return!!a&&(e.value1?Object(f["b"])(e.formLabelAlign.emailOrMobile)||Object(f["a"])(e.formLabelAlign.emailOrMobile)?(Object(f["a"])(e.formLabelAlign.emailOrMobile)?t["email"]=e.formLabelAlign.emailOrMobile:t["mobile"]=e.formLabelAlign.emailOrMobile,t["username"]=e.formLabelAlign.username,t["deptName"]=e.formLabelAlign.deptName,t["password"]=e.formLabelAlign.password,t["comfirmpassword"]=e.formLabelAlign.comfirmpassword,t["status"]=e.formLabelAlign.status,t["deptId"]=e.formLabelAlign.deptId,t["pid"]=e.formLabelAlign.pid,t["roleIdList"]=e.formLabelAlign.roleIdList,t["realName"]=e.formLabelAlign.deptName,t["smscode"]=e.formLabelAlign.code,void e.$http.post("/sys/user/insert",t).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.data||a.msg);e.$message({showClose:!0,message:e.$t("register.registerSuccess"),type:"success"}),e.time=-2,e.$refs["formLabelAlign"].resetFields(),e.centerDialogVisible=!1,e.$router.push({path:"/registersuccess"})})).catch((function(e){return!1}))):e.$message.error("请输入正确的邮箱或者手机号码"):e.$message.warning(e.$t("register.beforeAgreeRegister")))}))})),handleBindWechatSubmit:m()((function(){var e=this,t={username:e.bindWechatForm.username,password:e.bindWechatForm.password,uuid:e.bindWechatForm.bindWechatUuid};e.$refs["bindWechatForm"].validate((function(a){if(!a)return!1;e.bindWechatLoading=!0,e.$http.post("/wechat/blindUser.do",t).then((function(t){var a=t.data;if(0!==a.code)return e.bindWechatLoading=!1,e.$message.error(a.data||a.msg);e.bindWechatLoading=!1,e.$refs["bindWechatForm"].resetFields(),e.bindWechatDialogVisible=!1,e.$message.success("绑定成功，请重新扫码登录！"),e.activeName="wechat",e.handleGetQrcodeUrlInfo()})).catch((function(t){return e.bindWechatLoading=!1,!1}))}))}),200),forgetpassword:function(){var e=this;this.centerDialogVisibleSecond=!0,this.$nextTick((function(){e.$refs.forgetpwd.init()}))},getCaptcha:function(){this.dataForm.uuid=Object(u["h"])(),this.captchaPath="".concat(window.SITE_CONFIG["apiURL"],"/captcha?uuid=").concat(this.dataForm.uuid)},getCodeCaptcha:function(){var e=this;e.$http.get("/code",{params:{uuid:e.dataForm.uuid}}).then((function(t){var a=t.data;if(0!=a.code)return e.$message.error(a.data||a.msg);e.currentCode=a.data.data})).catch((function(e){return!1}))},setCookie:function(e,t,a,i){var r=new Date;r.setTime(r.getTime()+864e5*i),window.document.cookie="username="+e+";path=/;expires="+r.toGMTString(),window.document.cookie="password="+t+";path=/;expires="+r.toGMTString(),window.document.cookie="checked="+a+";path=/;expires="+r.toGMTString()},getCookie:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var a=e[t].split("=");"username"==a[0]?this.dataForm.username=a[1]:"password"==a[0]?this.dataForm.password=a[1]:"checked"==a[0]&&(this.checked=Boolean(a[1]))}},clearCookie:function(){this.setCookie("","","",!1,-1)},handleClick:function(e,t){var a=this;this.activeName=e.name,this.$nextTick((function(){a.$refs.dataForm&&a.$refs.dataForm.clearValidate()})),"wechat"===this.activeName&&this.handleGetQrcodeUrlInfo()},handleTypeChange:function(e){var t=this;this.activeName=e,this.$nextTick((function(){t.$refs.dataForm&&t.$refs.dataForm.clearValidate()})),"wechat"===this.activeName&&this.handleGetQrcodeUrlInfo(),"account"===this.activeName&&(this.getCaptcha(),this.getCookie())},handleAccountChange:function(){var e=this;this.activeName="account",this.$nextTick((function(){e.$refs.dataForm&&e.$refs.dataForm.clearValidate(),e.getCaptcha(),e.getCookie()}))},handleVerifyCodeChange:function(){var e=this;this.activeName="phnumcode",this.$nextTick((function(){e.$refs.dataForm&&e.$refs.dataForm.clearValidate(),e.loginTime=60,e.loginBtntxt=e.$t("register.getCode")}))},handleLoginSendcode:function(){var e=this,t={phoneNumber:e.dataForm.mobile};return e.dataForm.mobile?Object(f["b"])(e.dataForm.mobile)?(e.loginTime=60,e.loginDisabled=!0,void e.$http.post("/sys/sms/sendMessageLogin.do",s.a.stringify(t)).then((function(t){var a=t.data;if(0!=a.code)return e.loginDisabled=!1,e.$message.error(a.data||a.msg);e.loginTimer(),e.$message.success(a.data||a.msg)})).catch((function(t){return e.$message.error(t),e.loginDisabled=!1,!1}))):e.$message.error("请输入正确的手机号"):e.$message.error("请输入手机号")},loginTimer:function(){this.loginTime>0?(this.loginTime--,this.loginBtntxt=this.loginTime+this.$t("register.retryGetCode"),this.loginCloseTimer=setTimeout(this.loginTimer,1e3)):(this.loginTime=0,this.loginBtntxt=this.$t("register.getCode"),this.loginDisabled=!1,clearInterval(this.loginCloseTimer))},dataFormSubmitHandle:m()((function(){var e=this;this.$refs["dataForm"].validate((function(t){if(!t)return!1;if("account"===e.activeName){1==e.checked?e.setCookie(e.dataForm.username,e.dataForm.password,e.checked,30):e.clearCookie();var a={username:e.dataForm.username,password:e.dataForm.password.toString(),uuid:e.dataForm.uuid,captcha:e.dataForm.captcha};e.$http.post("/login",a).then((function(t){var a=t.data;if(0!==a.code)return e.getCaptcha(),e.dataForm.captcha="",e.$refs["inputCaptcha"].focus(),e.$refs["dataForm"].validate((function(e){if(!e)return!1})),e.$message.error(a.data||a.msg);if(sessionStorage.clear(),c.a.set("token",a.data.token),localStorage.removeItem("pythonNewWindow"),window.location.href.includes("?redirect=")){var i=decodeURIComponent(window.location.hash).split("?redirect=")[1];-1!=i.indexOf("/channelinfo")||-1!=i.indexOf("/deviceinfo")||-1!=i.indexOf("/taginfo")||-1!=i.indexOf("/transchannelinfo")||-1!=i.indexOf("/transdeviceinfo")||-1!=i.indexOf("/transtaginfo")||-1!=i.indexOf("/centervar")||-1!=i.indexOf("/scriptinfo")||-1!=i.indexOf("/integralmodule")||-1!=i.indexOf("/scriptcode")||-1!=i.indexOf("/chlwatch")?e.$router.replace({path:"/tgw-tgwinfo"}).catch((function(e){return!1})):e.$router.replace({path:i}).catch((function(e){return!1}))}else e.$router.replace({path:"/tgw-tgwinfo"}).catch((function(e){return!1}))})).catch((function(e){return!1}))}else if("phnumcode"==e.activeName){var i={phnum:e.dataForm.mobile,code:e.dataForm.code};e.$http.post("/captchaLogin",s.a.stringify(i)).then((function(t){var a=t.data;if(0!==a.code)return e.$refs["dataForm"].validate((function(e){if(!e)return!1})),e.$message.error(a.data||a.msg);if(sessionStorage.clear(),c.a.set("token",a.data.data.token),localStorage.removeItem("pythonNewWindow"),window.location.href.includes("?redirect=")){var i=decodeURIComponent(window.location.hash).split("?redirect=")[1];-1!=i.indexOf("/channelinfo")||-1!=i.indexOf("/deviceinfo")||-1!=i.indexOf("/taginfo")||-1!=i.indexOf("/transchannelinfo")||-1!=i.indexOf("/transdeviceinfo")||-1!=i.indexOf("/transtaginfo")||-1!=i.indexOf("/centervar")||-1!=i.indexOf("/scriptinfo")||-1!=i.indexOf("/integralmodule")||-1!=i.indexOf("/scriptcode")||-1!=i.indexOf("/chlwatch")?e.$router.replace({path:"/tgw-tgwinfo"}).catch((function(e){return!1})):e.$router.replace({path:i}).catch((function(e){return!1}))}else e.$router.replace({path:"/tgw-tgwinfo"}).catch((function(e){return!1}))})).catch((function(e){return!1}))}}))}),500,{leading:!0,trailing:!1}),handleGetQrcodeUrlInfo:function(){var e=this;e.$http.get("/wechat/getCodeUrl.do",{params:{_t:(new Date).getTime()}}).then((function(t){var a=t.data;if(0!=a.code)return e.$message.error(a.data||a.msg);e.wxUrl=a.data})).catch((function(t){return e.$message.error(t),!1}))},clearWxQuery:function(){var e=window.location,t=e.protocol,a=e.host,i=e.pathname,r=e.hash,o=r||"#/login";window.history.replaceState({},"","".concat(t,"//").concat(a).concat(i).concat(o))},handleQuickWechatChange:function(){window.location.href=this.wxUrl}},watch:{centerDialogVisibleSecond:function(e,t){this.centerDialogVisibleSecond=e},$route:function(e,t){if("{}"==JSON.stringify(e.query))this.centerDialogVisible=!1,this.centerDialogVisibleSecond=!1;else if(e.query.type){var a=e.query.type;"register"==a?(this.centerDialogVisible=!0,this.centerDialogVisibleSecond=!1):"forgetpassword"==a&&(this.centerDialogVisible=!1,this.forgetpassword())}}},mounted:function(){var e=window.location.href,t=e.match(/status=(\d)/);if(t){var a=t[1];if("5"!==a&&(this.activeName="wechat",this.handleGetQrcodeUrlInfo(),this.clearWxQuery()),k[a]&&this.$message.error(k[a]),"3"==a){var i=e.match(/state=([^#&]+)/),r=i?i[1]:"";this.bindWechatDialogVisible=!0,this.bindWechatForm.bindWechatUuid=r}}}},F=C,_=(a("ac1e"),a("fe17"),Object($["a"])(F,r,o,!1,null,"610a71a5",null));t["default"]=_.exports},df80:function(e,t,a){e.exports=a.p+"img/wechat.a29362a9.png"},fe17:function(e,t,a){"use strict";a("c76b")}}]);