(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20ebf6"],{b14e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t("update"):e.$t("add"),"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleCloseChange},on:{"update:visible":function(t){e.visible=t},opened:e.handleDialogOpenChange}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":"120px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmitHandle()}}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"prjId",label:e.$t("video.bindPrjName")}},[t("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.handlePrjScroll,expression:"handlePrjScroll"}],staticStyle:{width:"100%"},attrs:{clearable:""},on:{"visible-change":e.handlePrjVisibleChange},model:{value:e.dataForm.prjId,callback:function(t){e.$set(e.dataForm,"prjId",t)},expression:"dataForm.prjId"}},[[t("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"99","background-color":"#fff"}},[t("el-input",{ref:"prjInput",staticStyle:{width:"98%","margin-left":"1%","margin-top":"5px","margin-bottom":"5px"},attrs:{size:"small",clearable:"",placeholder:e.$t("gwsn.pleaseEnterSearchContent")},model:{value:e.prjSearch,callback:function(t){e.prjSearch=t},expression:"prjSearch"}})],1),t("div",{staticStyle:{width:"100%",height:"42px"}}),e._l(e.prjList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.prjName,value:e.id,disabled:!!e.hasOwnProperty("disabled")&&e.disabled}})}))]],2)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"cameraId",label:e.$t("video.cameraID")}},[t("el-input",{attrs:{placeholder:e.$t("video.enterCameraID"),maxlength:255,clearable:""},model:{value:e.dataForm.cameraId,callback:function(t){e.$set(e.dataForm,"cameraId",t)},expression:"dataForm.cameraId"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"appid",label:"appKey"}},[t("el-input",{attrs:{placeholder:e.$t("video.pleaseEnterAppKey"),maxlength:255,clearable:""},model:{value:e.dataForm.appid,callback:function(t){e.$set(e.dataForm,"appid",t)},expression:"dataForm.appid"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"secret",label:"appSecret"}},[t("el-input",{attrs:{placeholder:e.$t("video.pleaseEnterSecret"),maxlength:255,clearable:""},model:{value:e.dataForm.secret,callback:function(t){e.$set(e.dataForm,"secret",t)},expression:"dataForm.secret"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"type",label:e.$t("video.type")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("video.pleaseSelect")},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},e._l(e.typeList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"playWay",label:e.$t("video.playway")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("video.pleaseSelect")},model:{value:e.dataForm.playWay,callback:function(t){e.$set(e.dataForm,"playWay",t)},expression:"dataForm.playWay"}},e._l(e.playwayList,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"hlsAddress",label:e.$t("video.hlsAddr")}},[t("el-input",{attrs:{placeholder:e.$t("video.enterhlsAddr"),maxlength:255,clearable:""},model:{value:e.dataForm.hlsAddress,callback:function(t){e.$set(e.dataForm,"hlsAddress",t)},expression:"dataForm.hlsAddress"}})],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"videoMark",label:e.$t("video.remark")}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:e.$t("video.enterremark")},model:{value:e.dataForm.videoMark,callback:function(t){e.$set(e.dataForm,"videoMark",t)},expression:"dataForm.videoMark"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleCloseChange}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)},i=[],l=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),s=(a("c5f6"),a("a481"),a("96cf"),a("1da1")),o=a("b047"),n=a.n(o);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={directives:{loadmore:{inserted:function(e,t){var a=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");a.addEventListener("scroll",(function(){var e=this.scrollHeight-Math.ceil(this.scrollTop)<=this.clientHeight;e&&0!==this.scrollTop&&t.value()}))}}},data:function(){return{prjId:"",visible:!1,loading:!1,prjList:[],prjPage:1,prjTotal:0,prjSearch:"",dataForm:{id:"",prjId:"",cameraId:"",type:0,playWay:0,hlsAddress:"",videoMark:"",appid:"",secret:""},typeList:[{label:this.$t("video.fluoriteCloud"),value:0}],playwayList:[{label:this.$t("video.livesite"),value:0}],rules:{cameraId:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],hlsAddress:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],appid:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],secret:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]}}},methods:{init:function(){this.visible=!0},handleDialogOpenChange:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,this.getPrjList();case 1:if(this.$refs["dataForm"].resetFields(),!this.dataForm.id){e.next=2;break}return e.next=2,this.getInfo();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPrjList:function(){var e=this,t={page:e.prjPage,limit:50,priName:e.prjSearch.replace(/\s+/g,""),_t:(new Date).getTime()};e.$hasPermission("tprjinfo:list:select")?e.$http.get("/info/tprjinfo/tprjinfoList",{params:t}).then((function(t){var a=t.data;if(a.hasOwnProperty("code"))return e.$message.error(a.data||a.msg);1==e.prjPage?e.prjList=a.list:e.prjList=e.prjList.concat(a.list),0==e.prjList.length?e.prjList.push({id:"暂无匹配数据",prjName:"暂无匹配数据",disabled:!0}):e.dataForm.id||(e.dataForm.prjId=e.prjId),e.prjTotal=Number(a.total)})).catch((function(e){return!1})):e.$message.warning("暂无项目查询权限, 请联系管理员")},handlePrjVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.prjInput.focus()}))},handlePrjScroll:function(){this.prjList.length<this.prjTotal&&(this.prjPage++,this.getPrjList())},getInfo:function(){var e=this;this.$hasPermission("prjcamera:select:permission.do")?(this.loading=!0,this.$http.get("/info/prjcamera/".concat(this.dataForm.id),{params:{id:this.dataForm.id}}).then((function(t){var a=t.data;e.dataForm=c(c({},e.dataForm),a.data),e.loading=!1})).catch((function(e){return!1}))):this.$message.warning("暂无视频信息查询权限, 请联系管理员")},handleCloseChange:function(){this.visible=!1},dataFormSubmitHandle:n()((function(){var e=this;this.$refs["dataForm"].validate((function(t){if(!t)return!1;if(e.dataForm.id){if(!e.$hasPermission("prjcamera:update:permission.do"))return void e.$message.warning("暂无视频修改权限, 请联系管理员")}else if(!e.$hasPermission("prjcamera:insert:permission.do"))return void e.$message.warning("暂无视频新增权限, 请联系管理员");e.loading=!0,e.$http[e.dataForm.id?"put":"post"]("/info/prjcamera",e.dataForm).then((function(t){var a=t.data;if(0!=a.code)return e.loading=!1,e.$message.error(a.data||a.msg);e.loading=!1,e.$message.success(a.msg),e.visible=!1,e.$emit("refreshDataList")})).catch((function(t){return e.loading=!1,!1}))}))}),1e3,{leading:!0,trailing:!1}),watchPrjSearch:n()((function(){var e=document.getElementsByClassName("el-scrollbar__wrap").length;document.getElementsByClassName("el-scrollbar__wrap")[e-1].scrollTo(0,0),this.prjPage=1,this.getPrjList(),this.$refs.prjInput.focus()}),500)},watch:{prjSearch:function(e,t){this.watchPrjSearch()}}},m=p,u=a("2877"),h=Object(u["a"])(m,r,i,!1,null,null,null);t["default"]=h.exports}}]);