(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2266be"],{e91e:function(a,e,t){"use strict";t.r(e);var l=function(){var a=this,e=a._self._c;return e("el-dialog",{attrs:{visible:a.visible,title:a.dataForm.id?a.$t("update"):a.$t("add"),"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":a.handleClose},on:{"update:visible":function(e){a.visible=e},opened:a.handleDialogOpenChange}},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"dataForm",attrs:{model:a.dataForm,rules:a.rules,"label-width":(a.$i18n.locale,"150px")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.dataFormSubmitHandle()}}},[e("el-tabs",{on:{"tab-click":a.handleClick},model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{name:"first"}},[e("span",{staticStyle:{"font-size":"16px"},attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-info"}),a._v(" "+a._s(a.$t("attribute.basic")))]),e("el-row",{style:{marginTop:a.dataForm.id?0:"40px"}},[e("el-col",{attrs:{span:12}},[a.dataForm.id?a._e():e("el-form-item",{attrs:{label:a.$t("attribute.tagname"),prop:"tagname"}},[e("tooltip",{attrs:{placement:"top-left",mode:"manual",visible:a.tooltipCenteragvisible}},[e("div",{attrs:{slot:"outlet"},slot:"outlet"}),e("div",{attrs:{slot:"tooltip"},slot:"tooltip"},[a._v(a._s(a.$t("attribute.addCenterTagName")))])]),e("el-input",{ref:"tagname",attrs:{placeholder:a.$t("attribute.tagname"),maxlength:48,clearable:""},model:{value:a.dataForm.tagname,callback:function(e){a.$set(a.dataForm,"tagname","string"===typeof e?e.trim():e)},expression:"dataForm.tagname"}})],1),a.dataForm.id?e("el-form-item",{attrs:{label:a.$t("attribute.tagname"),prop:"tagname"}},[e("el-input",{ref:"tagname",attrs:{placeholder:a.$t("attribute.tagname"),maxlength:48,clearable:""},model:{value:a.dataForm.tagname,callback:function(e){a.$set(a.dataForm,"tagname","string"===typeof e?e.trim():e)},expression:"dataForm.tagname"}})],1):a._e()],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.modelattribute"),prop:"tagcomment"}},[e("el-input",{attrs:{placeholder:a.$t("attribute.pleaseInputModelattribute"),maxlength:100,clearable:""},model:{value:a.dataForm.tagcomment,callback:function(e){a.$set(a.dataForm,"tagcomment",e)},expression:"dataForm.tagcomment"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.alarmtype"),prop:"alarmtype"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:a.$t("attribute.placeholderSelect")},on:{change:a.selectAlarmRecord},model:{value:a.dataForm.alarmtype,callback:function(e){a.$set(a.dataForm,"alarmtype",e)},expression:"dataForm.alarmtype"}},a._l(a.alarmRecordList,(function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.tagrwprop"),prop:"tagrwprop"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:a.$t("attribute.placeholderSelect")},model:{value:a.dataForm.tagrwprop,callback:function(e){a.$set(a.dataForm,"tagrwprop",e)},expression:"dataForm.tagrwprop"}},a._l(a.writeReadType,(function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.taginitvalue"),prop:"taginitvalue"}},[e("el-input",{attrs:{clearable:"",placeholder:a.$t("attribute.taginitvalue"),onkeyup:"value=value.replace(/^\\D*(-\\d*(?:\\.\\d{0,2})?).*$/g, '$1')"},model:{value:a.dataForm.taginitvalue,callback:function(e){a.$set(a.dataForm,"taginitvalue",e)},expression:"dataForm.taginitvalue"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.address"),prop:"objaddr"}},[e("el-input",{attrs:{placeholder:a.$t("attribute.address"),maxlength:128,clearable:""},on:{input:a.handleObjaddr},model:{value:a.dataForm.objaddr,callback:function(e){a.$set(a.dataForm,"objaddr",e)},expression:"dataForm.objaddr"}})],1)],1)],1)],1),e("el-tab-pane",{attrs:{name:"second"}},[e("span",{staticStyle:{"font-size":"16px"},attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-message-solid",style:{color:a.isOpenalarm?"#E6A23C":"#ccc"}}),a._v(" "+a._s(a.$t("attribute.alarm")))]),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.alarmRecord")}},[e("el-checkbox",{on:{change:a.openAlarm},model:{value:a.isOpenalarm,callback:function(e){a.isOpenalarm=e},expression:"isOpenalarm"}},[a._v(a._s(a.$t("attribute.alarmRecordOpen")))])],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.alarmLevel"),prop:"alarmlevel"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:a.$t("attribute.placeholderSelect")},model:{value:a.dataForm.alarmlevel,callback:function(e){a.$set(a.dataForm,"alarmlevel",e)},expression:"dataForm.alarmlevel"}},a._l(a.alarmLevel,(function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1)],1)],1),0===a.dataForm.alarmtype?e("div",[e("el-row",[e("el-col",{attrs:{span:3}},[e("el-form-item",{attrs:{label:""}})],1),e("el-col",{attrs:{span:9,offset:1}},[e("el-form-item",{attrs:{label:""}},[a._v(a._s(a.$t("attribute.alarmLimit")))])],1),e("el-col",{attrs:{span:9,offset:1}},[e("el-form-item",{attrs:{label:""}},[a._v(a._s(a.$t("attribute.alarmMessage")))])],1)],1),e("el-row",[e("el-col",{attrs:{span:3}},[e("el-form-item",[e("el-checkbox",{attrs:{disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||!a.isOpenalarm},on:{change:a.handlehighhigh},model:{value:a.hhenablealarm,callback:function(e){a.hhenablealarm=e},expression:"hhenablealarm"}},[a._v("\n                                    "+a._s(a.$t("attribute.hhenablealarm"))+"\n                                ")])],1)],1),e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{prop:"hhalarmlimit"}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||a.isOpenalarm&&0===a.dataForm.alarmtype&&!a.hhenablealarm||!a.isOpenalarm,placeholder:a.$t("attribute.hhenablealarm")},model:{value:a.dataForm.hhalarmlimit,callback:function(e){a.$set(a.dataForm,"hhalarmlimit",e)},expression:"dataForm.hhalarmlimit"}})],1)],1),e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{prop:"hhalarmmsg"}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||a.isOpenalarm&&0===a.dataForm.alarmtype&&!a.hhenablealarm||!a.isOpenalarm,placeholder:"",maxlength:32},model:{value:a.dataForm.hhalarmmsg,callback:function(e){a.$set(a.dataForm,"hhalarmmsg",e)},expression:"dataForm.hhalarmmsg"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:3}},[e("el-form-item",[e("el-checkbox",{attrs:{disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||!a.isOpenalarm},on:{change:a.handlehigh},model:{value:a.henablealarm,callback:function(e){a.henablealarm=e},expression:"henablealarm"}},[a._v(a._s(a.$t("attribute.henablealarm"))+" ")])],1)],1),e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{label:"",prop:"halarmlimit"}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||a.isOpenalarm&&0===a.dataForm.alarmtype&&!a.henablealarm||!a.isOpenalarm,placeholder:a.$t("attribute.henablealarm")},model:{value:a.dataForm.halarmlimit,callback:function(e){a.$set(a.dataForm,"halarmlimit",e)},expression:"dataForm.halarmlimit"}})],1)],1),e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{label:"",prop:"halarmmsg"}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||a.isOpenalarm&&0===a.dataForm.alarmtype&&!a.henablealarm||!a.isOpenalarm,placeholder:"",maxlength:32},model:{value:a.dataForm.halarmmsg,callback:function(e){a.$set(a.dataForm,"halarmmsg",e)},expression:"dataForm.halarmmsg"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:3}},[e("el-form-item",[e("el-checkbox",{attrs:{disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||!a.isOpenalarm},on:{change:a.handlelow},model:{value:a.lenablealarm,callback:function(e){a.lenablealarm=e},expression:"lenablealarm"}},[a._v(a._s(a.$t("attribute.lenablealarm"))+" ")])],1)],1),e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{label:"",prop:"lalarmlimit"}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||a.isOpenalarm&&0===a.dataForm.alarmtype&&!a.lenablealarm||!a.isOpenalarm,placeholder:a.$t("attribute.lenablealarm")},model:{value:a.dataForm.lalarmlimit,callback:function(e){a.$set(a.dataForm,"lalarmlimit",e)},expression:"dataForm.lalarmlimit"}})],1)],1),e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{label:"",prop:"lalarmmsg"}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||a.isOpenalarm&&0===a.dataForm.alarmtype&&!a.lenablealarm||!a.isOpenalarm,placeholder:"",maxlength:32},model:{value:a.dataForm.lalarmmsg,callback:function(e){a.$set(a.dataForm,"lalarmmsg",e)},expression:"dataForm.lalarmmsg"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:3}},[e("el-form-item",[e("el-checkbox",{attrs:{disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||!a.isOpenalarm},on:{change:a.handlelowlow},model:{value:a.llenablealarm,callback:function(e){a.llenablealarm=e},expression:"llenablealarm"}},[a._v(a._s(a.$t("attribute.llenablealarm"))+" ")])],1)],1),e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{label:"",prop:"llalarmlimit"}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||a.isOpenalarm&&0===a.dataForm.alarmtype&&!a.llenablealarm||!a.isOpenalarm,placeholder:a.$t("attribute.llenablealarm")},model:{value:a.dataForm.llalarmlimit,callback:function(e){a.$set(a.dataForm,"llalarmlimit",e)},expression:"dataForm.llalarmlimit"}})],1)],1),e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{label:"",prop:"llalarmmsg"}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||a.isOpenalarm&&0===a.dataForm.alarmtype&&!a.llenablealarm||!a.isOpenalarm,placeholder:"",maxlength:32},model:{value:a.dataForm.llalarmmsg,callback:function(e){a.$set(a.dataForm,"llalarmmsg",e)},expression:"dataForm.llalarmmsg"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.alarmdeadarea"),prop:"alarmdeadarea"}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&1===a.dataForm.alarmtype||!a.isOpenalarm,placeholder:a.$t("attribute.alarmdeadarea"),onkeyup:"value=value.replace(/^\\D*(\\d*(?:\\.\\d{0,2})?).*$/g, '$1')"},model:{value:a.dataForm.alarmdeadarea,callback:function(e){a.$set(a.dataForm,"alarmdeadarea",e)},expression:"dataForm.alarmdeadarea"}})],1)],1)],1)],1):a._e(),1===a.dataForm.alarmtype?e("el-row",[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.kgchangemode"),prop:"kgchangemode",rules:1===this.dataForm.alarmtype?a.rules.kgchangemode:[{required:!1,message:a.$t("attribute.requireNotNull"),trigger:"change"}]}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:a.$t("attribute.placeholderSelect"),disabled:a.isOpenalarm&&0===a.dataForm.alarmtype||!a.isOpenalarm},on:{change:a.selectAlarmChange},model:{value:a.dataForm.kgchangemode,callback:function(e){a.$set(a.dataForm,"kgchangemode",e)},expression:"dataForm.kgchangemode"}},a._l(a.modeType,(function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.alarmMessage"),prop:"kgalarmmsg",rules:1===this.dataForm.alarmtype?a.rules.kgalarmmsg:[{required:!1,message:a.$t("attribute.requireNotNull"),trigger:"change"}]}},[e("el-input",{attrs:{clearable:"",disabled:a.isOpenalarm&&0===a.dataForm.alarmtype||!a.isOpenalarm,placeholder:a.$t("attribute.alarmMessage"),maxlength:32},model:{value:a.dataForm.kgalarmmsg,callback:function(e){a.$set(a.dataForm,"kgalarmmsg",e)},expression:"dataForm.kgalarmmsg"}})],1)],1)],1)],1):a._e()],1),e("el-tab-pane",{attrs:{name:"third"}},[e("span",{staticStyle:{"font-size":"16px"},attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"el-icon-date",style:{color:a.enablehissave?"#17B3A3":"#ccc"}}),a._v(" "+a._s(a.$t("attribute.history")))]),e("el-form-item",{attrs:{label:a.$t("attribute.historyStore")}},[e("el-checkbox",{on:{change:a.openHistory},model:{value:a.enablehissave,callback:function(e){a.enablehissave=e},expression:"enablehissave"}},[a._v(a._s(a.$t("attribute.historyStoreOpen")))])],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.hissavetype")}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:a.$t("attribute.placeholderSelect"),disabled:""},model:{value:a.dataForm.hissavetype,callback:function(e){a.$set(a.dataForm,"hissavetype",e)},expression:"dataForm.hissavetype"}},a._l(a.storageMode,(function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.hissaveinterval")}},[e("tooltip",{directives:[{name:"show",rawName:"v-show",value:a.tooltipvisible,expression:"tooltipvisible"}],staticStyle:{position:"absolute",left:"0",top:"-30px"},attrs:{placement:"top-left",mode:"manual"}},[e("div",{attrs:{slot:"outlet"},slot:"outlet"},[a._v("top left")]),e("div",{attrs:{slot:"tooltip"},slot:"tooltip"},[a._v(a._s(a.msg))])]),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:a.$t("attribute.placeholderSelect"),disabled:!a.enablehissave||1===a.dataForm.alarmtype},on:{change:a.changeHissaveinterval},model:{value:a.dataForm.hissaveinterval,callback:function(e){a.$set(a.dataForm,"hissaveinterval",e)},expression:"dataForm.hissaveinterval"}},a._l(a.storageInterval,(function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:a.$t("attribute.hiscompperc")}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:!a.enablehissave,placeholder:a.$t("attribute.placeholderSelect")},model:{value:a.dataForm.hiscompperc,callback:function(e){a.$set(a.dataForm,"hiscompperc",e)},expression:"dataForm.hiscompperc"}},a._l(a.compressionPrecision,(function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1)],1)],1)],1)],1)],1),e("template",{slot:"footer"},[e("el-button",{on:{click:a.handleClose}},[a._v(a._s(a.$t("cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return a.dataFormSubmitHandle()}}},[a._v(a._s(a.$t("confirm")))])],1)],2)},r=[],i=(t("8e6e"),t("ac6a"),t("456d"),t("ade3")),s=(t("c5f6"),t("7514"),t("7f7f"),t("28a5"),t("3b2b"),t("4917"),t("a481"),t("b047")),n=t.n(s);function o(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.push.apply(t,l)}return t}function m(a){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){Object(i["a"])(a,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))}))}return a}var d={data:function(){var a=this;return{tooltipCenteragvisible:!0,msg:this.$t("attribute.defaultMsg"),loading:!1,isOpenalarm:!1,hhenablealarm:!1,henablealarm:!1,lenablealarm:!1,llenablealarm:!1,enablehissave:!1,visible:!1,tooltipvisible:!0,paramsData:[],dataForm:{id:"",tagname:this.$t("attribute.defaultCenterTagname"),tagcomment:"",alarmtype:0,tagrwprop:1,taginitvalue:0,objaddr:"0",enablealarm:null,alarmlevel:0,hhenablealarm:null,henablealarm:null,lenablealarm:null,llenablealarm:null,hhalarmlimit:100,halarmlimit:90,lalarmlimit:10,llalarmlimit:0,hhalarmmsg:this.$t("attribute.hhalarmmsg"),halarmmsg:this.$t("attribute.halarmmsg"),lalarmmsg:this.$t("attribute.lalarmmsg"),llalarmmsg:this.$t("attribute.llalarmmsg"),alarmdeadarea:0,kgchangemode:3,kgalarmmsg:this.$t("attribute.kgalarmmsg"),devid:1,tagsource:1,gwsn:"",enablehissave:null,hissavetype:0,hissaveinterval:300,hiscompperc:1},activeName:"first",value1:!1,alarmRecordList:[{label:this.$t("attribute.visualValue"),value:0},{label:this.$t("attribute.switchValue"),value:1},{label:this.$t("attribute.ym"),value:2},{label:this.$t("attribute.yk"),value:3},{label:this.$t("attribute.yt"),value:4}],writeReadType:[{label:this.$t("attribute.onlyRead"),value:0},{label:this.$t("attribute.readWrite"),value:1},{label:this.$t("attribute.onlyWrite"),value:2}],alarmLevel:[{label:this.$t("attribute.notice"),value:0},{label:this.$t("attribute.warning"),value:1},{label:this.$t("attribute.serious"),value:2}],modeType:[{label:this.$t("attribute.openAlarm"),value:0},{label:this.$t("attribute.closeAlarm"),value:1},{label:this.$t("attribute.deflectionAlarm"),value:2},{label:this.$t("attribute.noAlarm"),value:3}],storageMode:[{label:this.$t("attribute.cycleStore"),value:0},{label:this.$t("attribute.deflectionStore"),value:1}],storageInterval:[{label:"30",value:30},{label:"60",value:60},{label:"180",value:180},{label:"300",value:300},{label:"600",value:600},{label:"1800",value:1800},{label:"3600",value:3600},{label:"21600",value:21600},{label:"43200",value:43200}],compressionPrecision:[{label:"0.10",value:.1},{label:"0.20",value:.2},{label:"0.30",value:.3},{label:"0.40",value:.4},{label:"0.50",value:.5},{label:"0.60",value:.6},{label:"0.70",value:.7},{label:"0.80",value:.8},{label:"0.90",value:.9},{label:"1.00",value:1}],rules:{tagname:[{required:!0,message:this.$t("validate.required"),trigger:"bluchanger"},{validator:function(e,t,l){if(a.dataForm.id){var r=/^[a-zA-Z0-9_:#\u4e00-\u9fa5]+$/,i=r.test(t);if(!i)return l(new Error(a.$t("attribute.tagnameNoSpecial")));l()}else if(t)if(-1!=t.indexOf("-")){var s=Math.abs(t.substring(t.lastIndexOf("-")).replace(/[^0-9]/gi,""));if(null==t.substring(0,t.lastIndexOf("-")).match(/(\d+)[^0-9]*$/)||null==t.substring(t.lastIndexOf("-"),t.length).match(/(\d+)[^0-9]*$/))return l(new Error(a.$t("attribute.tagnameNoRules")));var n=t.substring(0,t.lastIndexOf("-")).match(/(\d+)[^0-9]*$/)[1],o=s-n+1;if(o<=0)return l(new Error(a.$t("attribute.tagnameNoRules")));var m=t.lastIndexOf("-"),d=t.substring(0,m),h=t.substring(m+1,t.length),g=/^[a-zA-Z0-9_:#\u4e00-\u9fa5]+$/,b=g.test(d),u=new RegExp("^[0-9]([0-9])*$").test(h);if(!b)return l(new Error(a.$t("attribute.tagnameNoSpecial")));if(!u)return l(new Error(a.$t("attribute.tagnameNoRules")));l()}else{var c=/^[a-zA-Z0-9_:#\u4e00-\u9fa5]+$/,p=c.test(t);if(!p)return l(new Error(a.$t("attribute.tagnameNoSpecial")));l()}},trigger:"change"}],alarmtype:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],tagrwprop:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],kgchangemode:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],kgalarmmsg:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]}}},methods:{init:function(){this.visible=!0,this.loading=!1,this.activeName="first"},handleDialogOpenChange:function(){if(this.$refs.tagname.focus(),this.dataForm.id)this.getInfo();else if(sessionStorage.getItem("centerdataForm")){this.dataForm=JSON.parse(sessionStorage.getItem("centerdataForm")),this.dataForm.gwsn=sessionStorage.getItem("gwsn"),this.isOpenalarm=1===this.dataForm.enablealarm,this.henablealarm=1===this.dataForm.henablealarm,this.lenablealarm=1===this.dataForm.lenablealarm,this.llenablealarm=1===this.dataForm.llenablealarm,this.hhenablealarm=1===this.dataForm.hhenablealarm,this.enablehissave=1===this.dataForm.enablehissave;var a=/.*\..*/;if(-1!=this.$chineseChar2englishChar(String(this.dataForm.objaddr)).indexOf(",")){var e=this.$chineseChar2englishChar(String(this.dataForm.objaddr)).split(",")[0],t=this.$chineseChar2englishChar(String(this.dataForm.objaddr)).split(",")[1],l=null,r=null,i=this.$chineseChar2englishChar(String(t)),s=i.match(/\d+\.*\d*/g);if(s&&s.length>0){a.test(s[s.length-1])?(l=s[s.length-1].split(".")[1],r=i.substring(0,i.length-String(l).length)):(l=s[s.length-1],r=i.substring(0,i.length-String(l).length));var n=parseInt(l),o=0,m="",d=parseInt(l);if(a.test(l)&&(o=l.split(".")[1]),a.test(l)){if(String(l).length>String(d).length){m="";for(var h=0;h<String(l).length-String(d).length;h++)m+="0"}else m="";o++,d=n+"."+o,this.dataForm.objaddr=""!=m?e?e+","+r+m+d:r+m+d:e?e+","+r+d:r+d}else{if(String(l).length>String(d).length){m="";for(var g=0;g<String(l).length-String(d).length;g++)m+="0"}else m="";d++,this.dataForm.objaddr=""!=m?e?e+","+r+String(m)+d:r+m+d:e?e+","+r+d:r+d}}}else{var b=null,u=null,c=this.$chineseChar2englishChar(String(this.dataForm.objaddr)),p=c.match(/\d+\.*\d*/g);if(p&&p.length>0){a.test(p[p.length-1])?(b=p[p.length-1].split(".")[1],u=c.substring(0,c.length-String(b).length)):(b=p[p.length-1],u=c.substring(0,c.length-String(b).length));var v=parseInt(b),f=0,F="",$=parseInt(b);if(a.test(b)&&(f=b.split(".")[1]),a.test(b)){if(String(b).length>String($).length){F="";for(var y=0;y<String(b).length-String($).length;y++)F+="0"}else F="";f++,$=v+"."+f,this.dataForm.objaddr=""!=F?u?u+F+$:F+$:u?u+$:$}else{if(String(b).length>String($).length){F="";for(var S=0;S<String(b).length-String($).length;S++)F+="0"}else F="";$++,this.dataForm.objaddr=""!=F?u?u+F+$:F+$:u?u+$:$}}}}},handleObjaddr:function(a){this.dataForm.objaddr=String(a)},handleClick:function(a,e){var t=this;"third"==a.name&&(this.tooltipvisible=!0,this.tooltipvisible&&((this.dataForm.id||sessionStorage.getItem("centerdataForm"))&&(this.msg=this.$t("attribute.storeIntervel")+this.dataForm.hissaveinterval/60+this.$t("attribute.minute")),setTimeout((function(){t.tooltipvisible=!1}),3e3)))},selectAlarmRecord:function(a){0===a?(this.dataForm.hissavetype=0,this.dataForm.kgchangemode=3,this.dataForm.kgalarmmsg=this.$t("attribute.noAlarm")):(this.dataForm.hissavetype=1,this.dataForm.hissaveinterval=0)},openAlarm:function(a){this.dataForm.enablealarm=this.isOpenalarm?1:0},handlehighhigh:function(a){this.dataForm.hhenablealarm=a?1:0},handlehigh:function(a){this.dataForm.henablealarm=a?1:0},handlelow:function(a){this.dataForm.lenablealarm=a?1:0},handlelowlow:function(a){this.dataForm.llenablealarm=a?1:0},openHistory:function(a){this.dataForm.enablehissave=a?1:0},selectAlarmChange:function(a){this.dataForm.kgalarmmsg=this.modeType.find((function(e){return e.value===a})).label},changeHissaveinterval:function(a){var e=this;this.tooltipvisible=!0;var t=Number(a/60);t=t>60||60==t?parseInt(t/60)+this.$t("attribute.hour"):t+this.$t("attribute.minute"),this.msg=this.$t("attribute.storeIntervel")+t,setTimeout((function(){e.tooltipvisible=!1}),3e3)},getInfo:function(){var a=this;this.$hasPermission("taginfo:select:permission.do")?(this.loading=!0,this.$http.get("/info/taginfo/".concat(this.dataForm.id)).then((function(e){var t=e.data;if(0!==t.code)return a.loading=!1,a.$message.error(t.msg);a.dataForm=m(m({},a.dataForm),t.data),a.isOpenalarm=1===a.dataForm.enablealarm,a.henablealarm=1===a.dataForm.henablealarm,a.lenablealarm=1===a.dataForm.lenablealarm,a.llenablealarm=1===a.dataForm.llenablealarm,a.enablehissave=1===a.dataForm.enablehissave,a.hhenablealarm=1===a.dataForm.hhenablealarm,a.loading=!1})).catch((function(e){return a.loading=!1,!1}))):this.$message.warning("暂无测点信息查询权限, 请联系管理员")},handleClose:n()((function(){this.visible=!1}),1e3,{leading:!0,trailing:!1}),dataFormSubmitHandle:n()((function(){var a=this,e="",t=/.*\..*/,l=[],r=null;this.$hasSessionStorageGwsn()?(this.paramsData=[],this.$refs["dataForm"].validate((function(i){if(!i)return!1;if(a.loading=!0,0===a.dataForm.alarmtype&&(a.dataForm.kgchangemode=3,a.dataForm.kgalarmmsg=a.$t("attribute.noAlarm")),a.dataForm.id){if(!a.$hasPermission("taginfo:update:permission.do"))return void a.$message.warning("暂无测点新增权限, 请联系管理员");e="/info/taginfo",a.dataForm.objaddr=String(a.dataForm.objaddr),a.dataForm.enablealarm=a.dataForm.enablealarm?1:0,a.dataForm.hhenablealarm=a.dataForm.hhenablealarm?1:0,a.dataForm.henablealarm=a.dataForm.henablealarm?1:0,a.dataForm.lenablealarm=a.dataForm.lenablealarm?1:0,a.dataForm.llenablealarm=a.dataForm.llenablealarm?1:0,a.dataForm.enablehissave=a.dataForm.enablehissave?1:0,r=a.dataForm}else{if(!a.$hasPermission("taginfo:insert:permission.do"))return void a.$message.warning("暂无测点新增权限, 请联系管理员");if(e="/info/taginfo/insertAdd",-1!=a.dataForm.tagname.indexOf("-")){var s=Math.abs(a.dataForm.tagname.substring(a.dataForm.tagname.lastIndexOf("-")).replace(/[^0-9]/gi,"")),n=a.dataForm.tagname.split(/-(?![^-]*-)/),o=a.dataForm.tagname.substring(0,a.dataForm.tagname.lastIndexOf("-")).match(/(\d+)[^0-9]*$/)[1],m=o.replace(/[^0]/g,""),d=o,h=n[0],g=h.substring(0,h.length-h.match(/(\d+)[^0-9]*$/)[1].length);if(-1!=a.$chineseChar2englishChar(String(a.dataForm.objaddr)).indexOf(",")){var b=a.$chineseChar2englishChar(String(a.dataForm.objaddr)).split(",")[0],u=a.$chineseChar2englishChar(String(a.dataForm.objaddr)).split(",")[1],c=null,p=null,v=a.$chineseChar2englishChar(String(u)),f=v.match(/\d+\.*\d*/g);if(f&&f.length>0){t.test(f[f.length-1])?(c=f[f.length-1].split(".")[1],p=v.substring(0,v.length-String(c).length)):(c=f[f.length-1],p=v.substring(0,v.length-String(c).length));var F=parseInt(c),$=0,y="",S=parseInt(c);if(t.test(c)&&($=c.split(".")[1]),t.test(c))for(var O=0;O<s-o+1;O++){if(String(c).length>String(S).length){y="";for(var k=0;k<String(c).length-String(S).length;k++)y+="0"}else y="";""!=y?l.push(b?b+","+p+y+S:p+y+S):l.push(b?b+","+p+S:p+S),$++,S=F+"."+$}else for(var w=0;w<s-o+1;w++){if(String(c).length>String(S).length){y="";for(var x=0;x<String(c).length-String(S).length;x++)y+="0"}else y="";""!=y?l.push(b?b+","+p+String(y)+S:p+y+S):l.push(b?b+","+p+S:p+S),S++}}else for(var _=0;_<s-o+1;_++)l.push(String(a.dataForm.objaddr)+String(_))}else{var j=null,C=null,I=a.$chineseChar2englishChar(String(a.dataForm.objaddr)),N=I.match(/\d+\.*\d*/g);if(N&&N.length>0){t.test(N[N.length-1])?(j=N[N.length-1].split(".")[1],C=I.substring(0,I.length-String(j).length)):(j=N[N.length-1],C=I.substring(0,I.length-String(j).length));var A=parseInt(j),q=0,D="",P=parseInt(j);if(t.test(j)&&(q=j.split(".")[1]),t.test(j))for(var R=0;R<s-o+1;R++){if(String(j).length>String(P).length){D="";for(var E=0;E<String(j).length-String(P).length;E++)D+="0"}else D="";""!=D?l.push(C?C+D+P:P):l.push(C?C+P:P),q++,P=A+"."+q}else for(var T=0;T<s-o+1;T++){if(String(j).length>String(P).length){D="";for(var M=0;M<String(j).length-String(P).length;M++)D+="0"}else D="";""!=D?l.push(C?C+String(D)+P:D+P):l.push(C?C+P:P),P++}}else for(var H=0;H<s-o+1;H++)l.push(String(a.dataForm.objaddr)+String(H))}for(var L=0;L<s-o+1;L++){var z=d++,J={};J.tagname=0==parseInt(o)?m.length>0?String(z).length>=m.length?g+z:g+m.substring(0,m.length-String(z).length)+z:g+z:m.length>0?z>=10?g+m.substring(0,m.length-String(z).length+1)+z:g+m.substring(0,m.length)+z:g+z,J.tagchlid=1,J.devid=1,J.tagcomment=a.dataForm.tagcomment,J.alarmtype=a.dataForm.alarmtype,J.tagrwprop=a.dataForm.tagrwprop,J.taginitvalue=a.dataForm.taginitvalue,J.objaddr=l[L],J.enablealarm=a.dataForm.enablealarm?1:0,J.alarmlevel=a.dataForm.alarmlevel,J.hhenablealarm=a.dataForm.hhenablealarm?1:0,J.henablealarm=a.dataForm.henablealarm?1:0,J.lenablealarm=a.dataForm.lenablealarm?1:0,J.llenablealarm=a.dataForm.llenablealarm?1:0,J.hhalarmlimit=a.dataForm.hhalarmlimit,J.halarmlimit=a.dataForm.halarmlimit,J.lalarmlimit=a.dataForm.lalarmlimit,J.llalarmlimit=a.dataForm.llalarmlimit,J.hhalarmmsg=a.dataForm.hhalarmmsg,J.halarmmsg=a.dataForm.halarmmsg,J.lalarmmsg=a.dataForm.lalarmmsg,J.llalarmmsg=a.dataForm.llalarmmsg,J.alarmdeadarea=a.dataForm.alarmdeadarea,J.kgchangemode=a.dataForm.kgchangemode,J.kgalarmmsg=a.dataForm.kgalarmmsg,J.tagsource=1,J.gwsn=sessionStorage.getItem("gwsn"),J.enablehissave=a.dataForm.enablehissave?1:0,J.hissavetype=a.dataForm.hissavetype,J.hissaveinterval=a.dataForm.hissaveinterval,J.hiscompperc=a.dataForm.hiscompperc,a.paramsData.push(J)}}else a.dataForm.gwsn=sessionStorage.getItem("gwsn"),a.dataForm.objaddr=String(a.dataForm.objaddr),a.dataForm.enablealarm=a.dataForm.enablealarm?1:0,a.dataForm.hhenablealarm=a.dataForm.hhenablealarm?1:0,a.dataForm.henablealarm=a.dataForm.henablealarm?1:0,a.dataForm.lenablealarm=a.dataForm.lenablealarm?1:0,a.dataForm.llenablealarm=a.dataForm.llenablealarm?1:0,a.dataForm.enablehissave=a.dataForm.enablehissave?1:0,a.paramsData.push(a.dataForm);r=a.paramsData}a.$http[a.dataForm.id?"put":"post"](e,r).then((function(e){var t=e.data;if(0!==t.code)return a.loading=!1,a.$message.error(t.msg);a.dataForm.id||(a.dataForm.objaddr=r[r.length-1].objaddr,sessionStorage.setItem("centerdataForm",JSON.stringify(a.dataForm))),a.loading=!1,a.$message({message:a.$t("prompt.success"),type:"success",duration:500,onClose:function(){a.visible=!1,a.$emit("refreshDataList")}})})).catch((function(e){return a.loading=!1,!1}))}))):this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),a.$router.replace({path:"/tgw-tgwinfo"})}})}),1e3,{leading:!0,trailing:!1})}},h=d,g=t("2877"),b=Object(g["a"])(h,l,r,!1,null,null,null);e["default"]=b.exports}}]);