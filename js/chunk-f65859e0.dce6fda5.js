(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f65859e0"],{"0224":function(e,t,a){},"10dc":function(e,t,a){"use strict";a("0224")},eb13:function(e,t,a){"use strict";a.r(t);a("7f7f");var o=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.visible,title:"重新申请","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.visible=t},close:e.handleClose}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"licenseReplyRef",attrs:{model:e.dataForm,rules:e.rules,"label-position":"left","label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleReplyApplyChange.apply(null,arguments)}}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[t("el-form-item",{attrs:{prop:"sns",label:"产品编号"}},[t("el-input",{attrs:{disabled:"",size:"small",placeholder:"请输入产品编号"},model:{value:e.dataForm.sn,callback:function(t){e.$set(e.dataForm,"sn",t)},expression:"dataForm.sn"}})],1),t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:10==e.dataForm.soft?"客户名称":"项目名称",prop:"proname"}},[t("el-input",{attrs:{size:"small",placeholder:10==e.dataForm.soft?"请输入客户名称":"请输入项目名称",clearable:""},model:{value:e.dataForm.proname,callback:function(t){e.$set(e.dataForm,"proname",t)},expression:"dataForm.proname"}})],1),t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"授权软件",prop:"soft"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"small",clearable:"",placeholder:"请选择授权软件"},model:{value:e.dataForm.soft,callback:function(t){e.$set(e.dataForm,"soft",t)},expression:"dataForm.soft"}},e._l(e.softNameOptions,(function(a){return t("el-option",{key:a.value,attrs:{label:a.name,value:a.value,disabled:0==e.pids?a.value<5:a.value>4}})})),1)],1),0!=e.pids?t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"驱动授权",prop:"protocols"}},[t("el-input",{attrs:{disabled:"",size:"small",placeholder:"请选择驱动授权",clearable:""},model:{value:e.dataForm.protocolNames,callback:function(t){e.$set(e.dataForm,"protocolNames",t)},expression:"dataForm.protocolNames"}}),t("div",{staticClass:"protocol-list-style",staticStyle:{"margin-top":"10px"}},[t("el-checkbox-group",{attrs:{size:"small"},on:{change:e.handleProtocolsCheckChange},model:{value:e.dataForm.protocols,callback:function(t){e.$set(e.dataForm,"protocols",t)},expression:"dataForm.protocols"}},e._l(e.protocolInfoList,(function(a,o){return t("el-checkbox",{key:o,attrs:{label:a.id,border:""}},[e._v("\n                                "+e._s(a.pname)+"\n                            ")])})),1)],1)],1):e._e(),t("el-form-item",{attrs:{prop:"expiretime",label:"过期时间"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,size:"small",type:"datetime",placeholder:"请选择过期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.dataForm.expiretime,callback:function(t){e.$set(e.dataForm,"expiretime",t)},expression:"dataForm.expiretime"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleReplyApplyChange}},[e._v(e._s(e.$t("confirm")))])],1)],2)},l=[],r=(a("6762"),a("2fdb"),a("c5f6"),a("28a5"),a("4328")),i=a.n(r),n=a("b047"),s=a.n(n),m={props:["id","sn","protocol","proname","soft","pids","expiretime"],data:function(){return{loading:!1,visible:!1,dataForm:{id:null,sn:"",proname:"",protocols:[],protocolNames:"",soft:0,expiretime:"2099-12-31 23:59:59"},protocolInfoList:[],softNameOptions:[{name:"PBOX",value:0},{name:"LOGGER",value:1},{name:"ASDU",value:2},{name:"ASDU-LE",value:3},{name:"ASDU-LX",value:4},{name:"hkw-agent(探针)",value:5},{name:"HKW-NF500(防火墙)",value:6},{name:"HKW-IDS2000(入侵检测)",value:7},{name:"HKW-LAS1000(日志审计系统)",value:8},{name:"HKW-DAS1000(数据库审计系统)",value:9},{name:"LProxyCtrl(领祺代理工具控制端)",value:10},{name:"lqx-daemon(文件传输软件)",value:11},{name:"HKW-OSAS200(安全运维管理系统)",value:12},{name:"HKW-INS8000(网络安全监测装置)",value:13}],rules:{proname:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],soft:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],protocols:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5},shortcuts:[{text:"一个月有效期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+2592e6),e.$emit("pick",t)}},{text:"一年有效期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+31536e6),e.$emit("pick",t)}},{text:"三年有效期",onClick:function(e){var t=new Date;t.setTime(t.getTime()+94608e6),e.$emit("pick",t)}}]}}},methods:{init:function(){this.getDefaultProtocolInfoList()},getDefaultProtocolInfoList:function(){var e=this;e.protocolInfoList=[],e.$hasPermission("AuthorizeApplication:selectProtocol:select:permission.do")?(e.loading=!0,e.$http.get("/AuthorizeApplication/selectProtocol.do").then((function(t){var a=t.data;if(0!=a.code)return e.$message.error(a.data||a.msg);if(e.protocolInfoList=a.data,e.dataForm.id=e.id,e.dataForm.sn=e.sn,e.dataForm.proname=e.proname,e.dataForm.protocols=e.protocol?e.protocol.split(",").map(Number):[],e.dataForm.soft=e.soft,e.dataForm.expiretime=e.expiretime,e.dataForm.protocols.length>0){var o=e.protocolInfoList.filter((function(t){return e.dataForm.protocols.includes(t.id)})).map((function(e){return e.pname})).join(", ");e.dataForm.protocolNames=o}e.loading=!1,e.visible=!0}))):e.$message.warning("暂无协议查询权限, 请联系管理员")},handleProtocolsCheckChange:function(e){var t=this.protocolInfoList.filter((function(t){return e.includes(t.id)})).map((function(e){return e.pname})).join(", ");this.dataForm.protocolNames=t},handleClose:s()((function(){this.visible=!1}),1e3,{leading:!0,trailing:!1}),handleReplyApplyChange:function(){var e=this,t={id:e.id,proname:e.dataForm.proname,pids:e.dataForm.soft>4?"0":e.dataForm.protocols.join(","),soft:e.dataForm.soft,ovDate:e.dataForm.expiretime};e.$hasPermission("AuthorizeApplication:reapply:permission.do")?e.$refs["licenseReplyRef"].validate((function(a){if(!a)return!1;e.$http.put("/AuthorizeApplication/reapply.do",i.a.stringify(t)).then((function(t){var a=t.data;if(0!=a.code)return e.$message.error(a.data||a.msg);e.loading=!1,e.$message.success(a.msg),e.visible=!1,e.$emit("refreshDataList")})).catch((function(e){return!1}))})):e.$message.warning("暂无重新申请权限, 请联系管理员")}}},c=m,p=(a("10dc"),a("2877")),d=Object(p["a"])(c,o,l,!1,null,"2945f1f5",null);t["default"]=d.exports}}]);