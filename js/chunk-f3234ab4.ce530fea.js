(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f3234ab4"],{"2a1f":function(t,e,a){"use strict";a.r(e);a("34ef"),a("28a5"),a("6b54"),a("4917");
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(n){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},n=function(t,e,a){this.data=t,this.size=t.length,this.type=e,this.encoding=a},o=a.prototype,r=n.prototype,i=t.FileReaderSync,l=function(t){this.code=this[this.name=t]},s="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=s.length,u=t.URL||t.webkitURL||t,p=u.createObjectURL,h=u.revokeObjectURL,g=u,d=t.btoa,f=t.atob,m=t.ArrayBuffer,b=t.Uint8Array,w=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;n.fake=r.fake=!0;while(c--)l.prototype[s[c]]=c+1;return u.createObjectURL||(g=t.URL=function(t){var e,a=document.createElementNS("http://www.w3.org/1999/xhtml","a");return a.href=t,"origin"in a||("data:"===a.protocol.toLowerCase()?a.origin=null:(e=t.match(w),a.origin=e&&e[1])),a}),g.createObjectURL=function(t){var e,a=t.type;return null===a&&(a="application/octet-stream"),t instanceof n?(e="data:"+a,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):d?e+";base64,"+d(t.data):e+","+encodeURIComponent(t.data)):p?p.call(u,t):void 0},g.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&h&&h.call(u,t)},o.append=function(t){var a=this.data;if(b&&(t instanceof m||t instanceof b)){for(var o="",r=new b(t),s=0,c=r.length;s<c;s++)o+=String.fromCharCode(r[s]);a.push(o)}else if("Blob"===e(t)||"File"===e(t)){if(!i)throw new l("NOT_READABLE_ERR");var u=new i;a.push(u.readAsBinaryString(t))}else t instanceof n?"base64"===t.encoding&&f?a.push(f(t.data)):"URI"===t.encoding?a.push(decodeURIComponent(t.data)):"raw"===t.encoding&&a.push(t.data):("string"!==typeof t&&(t+=""),a.push(unescape(encodeURIComponent(t))))},o.getBlob=function(t){return arguments.length||(t=null),new n(this.data.join(""),t,"raw")},o.toString=function(){return"[object BlobBuilder]"},r.slice=function(t,e,a){var o=arguments.length;return o<3&&(a=null),new n(this.data.slice(t,o>1?e:this.data.length),a,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},a}(t);t.Blob=function(t,a){var n=a&&a.type||"",o=new e;if(t)for(var r=0,i=t.length;r<i;r++)Uint8Array&&t[r]instanceof Uint8Array?o.append(t[r].buffer):o.append(t[r]);var l=o.getBlob(n);return!l.slice&&l.webkitSlice&&(l.slice=l.webkitSlice),l};var a=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=a(new t.Blob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||void 0)},"376b":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));a("6b54"),a("34ef"),a("ac6a");function n(t,e){e&&(t+=1462);var a=Date.parse(t);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function o(t,e){for(var a={},o={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=t.length;++r)for(var i=0;i!=t[r].length;++i){o.s.r>r&&(o.s.r=r),o.s.c>i&&(o.s.c=i),o.e.r<r&&(o.e.r=r),o.e.c<i&&(o.e.c=i);var l={v:t[r][i]};if(null!=l.v){var s=XLSX.utils.encode_cell({c:i,r:r});"number"===typeof l.v?l.t="n":"boolean"===typeof l.v?l.t="b":l.v instanceof Date?(l.t="n",l.z=XLSX.SSF._table[14],l.v=n(l.v)):l.t="s",a[s]=l}}return o.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(o)),a}function r(){if(!(this instanceof r))return new r;this.SheetNames=[],this.Sheets={}}function i(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),n=0;n!=t.length;++n)a[n]=255&t.charCodeAt(n);return e}function l(t,e,a){var n=e;n.unshift(t);for(var l="SheetJS",s=new r,c=o(n),u=n.map((function(t){return t.map((function(t){return null==t?{wch:10}:t.toString().charCodeAt(0)>255?{wch:2*t.toString().length+5}:{wch:t.toString().length+5}}))})),p=u[0],h=1;h<u.length;h++)for(var g=0;g<u[h].length;g++)p[g]["wch"]<u[h][g]["wch"]&&(p[g]["wch"]=u[h][g]["wch"]);c["!cols"]=p,s.SheetNames.push(l),s.Sheets[l]=c;var d=XLSX.write(s,{bookType:"xlsx",bookSST:!1,type:"binary"}),f=a||"列表";saveAs(new Blob([i(d)],{type:"application/octet-stream"}),f+".xlsx")}a("2a1f"),a("0fd4"),a("1447")},6626:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("el-card",{attrs:{shadow:"never"}},[e("el-form",{attrs:{inline:!0,model:t.dataForm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.querySearch()}}},[t.$hasPermission("log:authorizes:page")?e("el-form-item",[e("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:function(e){return t.querySearch()}}},[t._v(t._s(t.$t("query")))])],1):t._e(),t.$hasPermission("log:authorizes:export")?e("el-form-item",[e("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:function(e){return t.handleExportChange()}}},[t._v(t._s(t.$t("export"))+" ")])],1):t._e(),t.$hasPermission("log:authorizes:page")?e("el-form-item",[e("el-button",{attrs:{size:"small",type:"success"},on:{click:t.getDataList}},[e("i",{staticClass:"el-icon-refresh"})])],1):t._e()],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],ref:"recordLogOperationTable",staticStyle:{width:"100%"},attrs:{size:"small",data:t.dataList,border:"","max-height":t.scrollTableHeight,"row-style":{height:"20px"},"tooltip-effect":"dark myTooltips","cell-style":{padding:"4px"}}},[e("el-table-column",{attrs:{prop:"userName",label:t.$t("licenseinfo.customerAccount"),"header-align":"center",align:"center","min-width":"160","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{prop:"realName",label:t.$t("licenseinfo.customerName"),"header-align":"center",align:"center","min-width":"160","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{prop:"softName",label:t.$t("licenseinfo.softwareName"),"header-align":"center",align:"center","min-width":"160","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{prop:"opDo",label:t.$t("authorizationManagement.operationMethod"),"header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{prop:"opContent",label:t.$t("authorizationManagement.operationContent"),"header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{prop:"opOb",label:t.$t("authorizationManagement.operationObject"),"header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{prop:"opAmount",label:t.$t("authorizationManagement.operationAmount"),"header-align":"center",align:"center",width:"140"}}),e("el-table-column",{attrs:{prop:"totalAmount",label:t.$t("authorizationManagement.currentTotalNumberOfCommonLicenses"),"header-align":"center",width:"160",align:"center"}}),e("el-table-column",{attrs:{prop:"opExAmount",label:t.$t("authorizationManagement.numberOfExpansionOperations"),"header-align":"center",width:"140",align:"center"}}),e("el-table-column",{attrs:{prop:"totalExAmount",label:t.$t("authorizationManagement.currentTotalNumberOfExtendedLicenses"),"header-align":"center",align:"center",width:"180"}}),e("el-table-column",{attrs:{prop:"createDate",label:t.$t("authorizationManagement.operationDate"),"header-align":"center",align:"center",width:"160",fixed:"right"}}),e("el-table-column",{attrs:{prop:"note",label:t.$t("authorizationManagement.remark"),"header-align":"center",align:"center",width:"220","show-overflow-tooltip":!0,fixed:"right"}})],1),e("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"size-change":t.pageSizeChangeHandle,"current-change":t.pageCurrentChangeHandle}})],1)},o=[],r=(a("ac6a"),a("b047")),i=a.n(r),l=a("376b"),s=(a("2ef0"),{data:function(){return{page:1,limit:100,total:0,dataListLoading:!1,dataList:[],dataForm:{},scrollTableHeight:window.innerHeight-220-53}},methods:{pageSizeChangeHandle:function(t){this.page=1,this.limit=t,this.getDataList()},pageCurrentChangeHandle:function(t){this.page=t,this.getDataList()},querySearch:function(){this.page=1,this.getDataList()},getDataList:function(){var t=this,e={page:t.page,limit:t.limit};if(t.total=0,t.dataList=[],!t.$hasPermission("log:authorizes:page"))return t.$message.warning("暂无出厂授权操作日志查询权限, 请联系管理员");t.dataListLoading=!0,t.$http.get("/log/authorizes/page",{params:e}).then((function(e){var a=e.data;if(0!=a.code)return t.dataListLoading=!1,t.$message.error(a.data||a.msg);t.dataList=a.data.list,t.total=a.data.total,t.dataListLoading=!1})).catch((function(e){return t.dataListLoading=!1,!1}))},resetExcelData:function(t){var e=[];this.dataList.forEach((function(t){var a={userName:t.userName,realName:t.realName,softName:t.softName,opDo:t.opDo,opContent:t.opContent,opOb:t.opOb,opAmount:t.opAmount,totalAmount:t.totalAmount,opExAmount:t.opExAmount,totalExAmount:t.totalExAmount,createDate:t.totalExAmount,note:t.note};e.push(a)})),t(e)},handleExportChange:i()((function(){var t=this;if(0==this.dataList.length)return this.$message.warning(this.$t("gwsn.thereIsCurrentlyNoDataAvailableForExport"));Promise.resolve().then(function(){t.resetExcelData((function(e){for(var a=[{label:t.$t("licenseinfo.customerAccount"),prop:"userName"},{label:t.$t("licenseinfo.customerName"),prop:"realName"},{label:t.$t("licenseinfo.softwareName"),prop:"softName"},{label:t.$t("authorizationManagement.operationMethod"),prop:"opDo"},{label:t.$t("authorizationManagement.operationContent"),prop:"opContent"},{label:t.$t("authorizationManagement.operationObject"),prop:"opOb"},{label:t.$t("authorizationManagement.operationAmount"),prop:"opAmount"},{label:t.$t("authorizationManagement.currentTotalNumberOfCommonLicenses"),prop:"totalAmount"},{label:t.$t("authorizationManagement.numberOfExpansionOperations"),prop:"opExAmount"},{label:t.$t("authorizationManagement.currentTotalNumberOfExtendedLicenses"),prop:"totalExAmount"},{label:t.$t("authorizationManagement.operationDate"),prop:"createDate"},{label:t.$t("authorizationManagement.remark"),prop:"note"}],n=[],o=[],r=0;r<a.length;r++)n[r]=a[r].label,o[r]=a[r].prop;var i=n,s=o,c=e,u=t.formatJson(s,c);Object(l["a"])(i,u,t.$t("authorizationManagement.authorizedOperationLogList")+"_"+(new Date).getTime())}))}.bind(null,a)).catch(a.oe)}),1e3,{leading:!0,trailing:!1}),formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))})),e.map((function(e){return t.map((function(t){return e[t]}))}))}},updated:function(){this.$refs.recordLogOperationTable&&this.$refs.recordLogOperationTable.doLayout&&this.$refs.recordLogOperationTable.doLayout()},mounted:function(){var t=this;this.getDataList(),window.onresize=function(){return function(){t.scrollTableHeight=window.innerHeight-220-53,t.$refs.recordLogOperationTable&&t.$refs.recordLogOperationTable.doLayout&&t.$refs.recordLogOperationTable.doLayout()}()}}}),c=s,u=a("2877"),p=Object(u["a"])(c,n,o,!1,null,null,null);e["default"]=p.exports}}]);