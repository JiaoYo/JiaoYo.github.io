(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10b52442"],{"042dc":function(e,t,s){"use strict";s("6b62")},3016:function(e,t,s){"use strict";s.r(t);s("c5f6");var n=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"aui-card--fill",attrs:{shadow:"never"}},[t("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querySearch.apply(null,arguments)}}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xs:24,sm:24,md:24,lg:22,xl:22}},[t("el-form-item",{attrs:{label:e.$t("gwsn.belongProject")}},[t("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.handlePrjScroll,expression:"handlePrjScroll"}],attrs:{clearable:"",size:"small",placeholder:e.$t("attribute.placeholderSelect")},on:{"visible-change":e.handlePrjVisibleChange,change:e.querySearch,clear:e.handlePrjClearChange},model:{value:e.dataForm.prjName,callback:function(t){e.$set(e.dataForm,"prjName",t)},expression:"dataForm.prjName"}},[[t("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"99","background-color":"#fff"}},[t("el-input",{ref:"prjInput",staticStyle:{width:"98%","margin-left":"1%","margin-top":"5px","margin-bottom":"5px"},attrs:{size:"small",clearable:"",placeholder:e.$t("gwsn.pleaseEnterSearchContent")},model:{value:e.prjSearch,callback:function(t){e.prjSearch=t},expression:"prjSearch"}})],1),t("div",{staticStyle:{width:"100%",height:"42px"}}),e._l(e.prjList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.prjName,value:e.id,disabled:!!e.hasOwnProperty("disabled")&&e.disabled}})}))]],2)],1),t("el-form-item",{attrs:{label:e.$t("gwsn.lineStatus")}},[0==e.dataForm.onLine?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleStatus(1)}}},[e._v("\n                        "+e._s(e.$t("gwsn.all"))+"\n                    ")]):e._e(),1==e.dataForm.onLine?t("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){return e.handleStatus(2)}}},[e._v("\n                        "+e._s(e.$t("gwsn.inLine"))+"\n                    ")]):e._e(),2==e.dataForm.onLine?t("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.handleStatus(0)}}},[e._v("\n                        "+e._s(e.$t("gwsn.offLine"))+"\n                    ")]):e._e()],1),t("el-form-item",[t("el-input",{attrs:{size:"small",placeholder:1==e.dataForm.searchType?e.$t("gwsn.enter"):2==e.dataForm.searchType?e.$t("gwsn.enterMacAddress"):e.$t("gwsn.enterIccid"),clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.gwsn,callback:function(t){e.$set(e.dataForm,"gwsn",t)},expression:"dataForm.gwsn"}},[t("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:e.$t("attribute.placeholderSelect")},on:{change:e.handleSearchTypeChange},slot:"prepend",model:{value:e.dataForm.searchType,callback:function(t){e.$set(e.dataForm,"searchType",t)},expression:"dataForm.searchType"}},[t("el-option",{attrs:{label:e.$t("gwsn.numberRemarks"),value:"1"}}),t("el-option",{attrs:{label:"MAC",value:"2"}}),t("el-option",{attrs:{label:"ICCID",value:"3"}})],1)],1)],1),e.$hasPermission("gwbaseinfo:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:e.querySearch}},[e._v("\n                        "+e._s(e.$t("query"))+"\n                    ")])],1):e._e(),e.$hasPermission("info:gwbaseinfo:save")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("\n                        "+e._s(e.$t("add"))+"\n                    ")])],1):e._e(),e.$hasPermission("info:gwbaseinfo:delete")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteHandle()}}},[e._v(e._s(e.$t("deleteBatch"))+"\n                    ")])],1):e._e(),e.$hasPermission("gwbaseinfo:export:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:function(t){return e.handleExportExcel()}}},[e._v(e._s(e.$t("export"))+"\n                    ")])],1):e._e(),"1588697462699417603"==e.currentUserId&&e.$hasPermission("gwbaseinfo:setSn:permission.do")?t("el-form-item",[t("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"},model:{value:e.settingReservedSnCountVisible,callback:function(t){e.settingReservedSnCountVisible=t},expression:"settingReservedSnCountVisible"}},[t("el-input",{attrs:{size:"small",oninput:"value=value.replace(/\\D/g,'').replace(/^0{1,}/g,'')",placeholder:e.$t("gwsnSetting.pleaseEnterTheQuantityOfReservedGatewayNumbers")},model:{value:e.settingReservedSnCount,callback:function(t){e.settingReservedSnCount=t},expression:"settingReservedSnCount"}}),t("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-circle-check"},on:{click:function(t){return e.handleSettingReservedSnChange()}}},[e._v(e._s(e.$t("confirm")))])],1),t("el-button",{staticStyle:{"margin-top":"5px"},attrs:{slot:"reference",icon:"el-icon-setting",type:"primary",size:"small"},slot:"reference"},[e._v(e._s(e.$t("gwsnSetting.setReservedGatewayNumber")))])],1)],1):e._e(),e.$hasPermission("gwbaseinfo:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getDataList}},[t("i",{staticClass:"el-icon-refresh"})])],1):e._e(),e.$hasPermission("DropDriversWebsocket:websocket")&&e.$hasPermission("issuePros:issue:websocket")||e.$hasPermission("batchOper:batchIssueFirmwares:permission.do")&&e.$hasPermission("batchOper:exeuIssueFirmwares:permission.do")&&e.$hasPermission("issueFirmware:websocket")||e.$hasPermission("gwbaseinfo:copySns:permission.do")||e.$hasPermission("offlineIssue:insert:permission.do")?t("el-form-item",[t("el-dropdown",{attrs:{size:"small"}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n                            "+e._s(e.$t("gwsn.batchOperations"))+"\n                            "),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.$hasPermission("DropDriversWebsocket:websocket")&&e.$hasPermission("issuePros:issue:websocket")?t("el-dropdown-item",[t("el-button",{attrs:{size:"small",type:"text",disabled:0==e.gwsns.length||0==e.dataList.length},on:{click:e.handleMultipeIssuedPrjToGwsn}},[e._v("\n                                    "+e._s(e.$t("gwsn.batchOperationsReleaseProjects"))+"\n                                ")])],1):e._e(),e.$hasPermission("batchOper:batchIssueFirmwares:permission.do")&&e.$hasPermission("batchOper:exeuIssueFirmwares:permission.do")&&e.$hasPermission("issueFirmware:websocket")?t("el-dropdown-item",[t("el-button",{attrs:{size:"small",type:"text",disabled:0==e.gwsns.length||0==e.dataList.length},on:{click:e.handleMultipeIssueFirmwares}},[e._v("\n                                    "+e._s(e.$t("gwsn.batchOperationsSoftwareUpgrade"))+"\n                                ")])],1):e._e(),e.$hasPermission("gwbaseinfo:copySns:permission.do")?t("el-dropdown-item",[t("el-button",{attrs:{size:"small",type:"text",disabled:0==e.gwsns.length||0==e.dataList.length},on:{click:e.handleMultipeCopyProjectToGwsn}},[e._v("\n                                    "+e._s(e.$t("gwsn.batchOperationsCopyGateway"))+"\n                                ")])],1):e._e(),e.$hasPermission("offlineIssue:insert:permission.do")?t("el-dropdown-item",[t("el-button",{attrs:{size:"small",type:"text",disabled:0==e.gwsns.length||0==e.dataList.length},on:{click:e.handleMultipeOfflineDownloadProjectToGwsn}},[e._v("\n                                    "+e._s(e.$t("gwsn.batchOperationsOfflineDelivery"))+"\n                                ")])],1):e._e()],1)],1)],1):e._e()],1),t("el-col",{staticStyle:{"text-align":"right"},attrs:{xs:24,sm:24,md:24,lg:2,xl:2}},[e.$hasPermission("gwbaseinfo:select:permission.do")?t("el-form-item",[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("el-checkbox",{on:{change:e.handleIntervalRefresh},model:{value:e.dataForm.checked,callback:function(t){e.$set(e.dataForm,"checked",t)},expression:"dataForm.checked"}},[e._v(e._s(e.finallyContent))])],1)]):e._e()],1)],1)],1),t("vxe-table",{ref:"recordTable",staticStyle:{width:"100%"},attrs:{size:"medium",border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"",data:e.dataList,"max-height":e.scrollTableHeight,loading:e.dataListLoading,"row-config":{keyField:"id"},"checkbox-config":e.checkboxConfig,"edit-config":{trigger:"dblclick",mode:"cell"}},on:{"checkbox-all":e.selectAll,"checkbox-change":e.dataListSelectionHandle}},[t("vxe-table-column",{key:"1",attrs:{type:"checkbox","header-align":"center",align:"center",width:"60",fixed:"left",checked:!1}}),t("vxe-table-column",{key:"2",attrs:{field:"sn",title:e.$t("gwsn.number"),"header-align":"center",align:"center",width:"170",fixed:"left","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[t("a",{class:1==s.row.isOut?"redColor":"",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.realtimeViewer(s.$index,s.row)}}},[e._v("\n                    "+e._s(s.row.sn)+"\n                ")])]}}])}),t("vxe-table-column",{key:"3",attrs:{field:"pwd",title:e.$t("gwsn.gwsnPassword"),"header-align":"center",align:"center",width:"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v(e._s(e.$t("gwsn.gwsnPassword")))]),t("i",{class:e.isLock?"el-icon-lock":"el-icon-unlock",staticStyle:{color:"#409eff","margin-left":"5px",cursor:"pointer"},on:{click:function(){e.isLock=!e.isLock}}})]},proxy:!0},{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.isLock?"••••••":s.row.pwd))])]}}])}),t("vxe-table-column",{key:"4",attrs:{field:"gwLastTime",title:e.$t("gwsn.gwsnLastTime"),"header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",{class:1==s.row.isOut?"redColor":""},[e._v(e._s(s.row.gwLastTime||e.$t("no")))])]}}])}),t("vxe-table-column",{key:"5",attrs:{field:"csq",title:e.$t("gwsn.signalValue"),"header-align":"center",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",height:"20px","line-height":"20px",cursor:"pointer"},on:{click:function(t){return e.handleNetWork(n.$index,n.row)}}},[0==Number(n.row.csq)?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s("a90d"),alt:""}}):e._e(),Number(n.row.csq)>0&&Number(n.row.csq)<10?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s("cdf7"),alt:""}}):e._e(),Number(n.row.csq)>=10&&Number(n.row.csq)<15?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s("2c9f"),alt:""}}):e._e(),Number(n.row.csq)>=15&&Number(n.row.csq)<20?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s("f27f"),alt:""}}):e._e(),Number(n.row.csq)>=20&&Number(n.row.csq)<25?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s("6a9e"),alt:""}}):e._e(),Number(n.row.csq)>=25&&Number(n.row.csq)<=40?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s("ee58"),alt:""}}):e._e(),254==Number(n.row.csq)&&Number(n.row.rev2)<=50?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s("f123c"),alt:""}}):e._e(),254==Number(n.row.csq)&&Number(n.row.rev2)>50&&Number(n.row.rev2)<=80?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s("602f"),alt:""}}):e._e(),254==Number(n.row.csq)&&Number(n.row.rev2)>80&&255!=Number(n.row.rev2)?t("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:s("ed94"),alt:""}}):e._e(),255==Number(n.row.csq)?t("img",{attrs:{src:s("e310"),alt:""}}):e._e(),t("span",{staticStyle:{"margin-left":"5px",display:"inline-block"}},[e._v(e._s(255==Number(n.row.csq)?e.$t("gwsn.internet"):254==Number(n.row.csq)?255==n.row.rev2?e.$t("noSignal"):n.row.rev2:n.row.csq))])])]}}])}),t("vxe-table-column",{key:"6",attrs:{field:"gwDesc",title:e.$t("gwsn.gwsnNote"),"header-align":"center",align:"center",width:"220","show-overflow-tooltip":!0,"edit-render":{}},scopedSlots:e._u([{key:"edit",fn:function(s){var n=s.row;return[t("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{size:"small",placeholder:e.$t("gwsnSetting.pleaseEnterGatewayNotes"),disabled:!e.$hasPermission("socketNine:setname:websocket")},model:{value:n.gwDesc,callback:function(t){e.$set(n,"gwDesc",t)},expression:"row.gwDesc"}},[e.$hasPermission("socketNine:setname:websocket")?t("template",{slot:"append"},[t("el-button",{attrs:{type:"text",icon:"el-icon-success"},on:{click:function(t){return t.stopPropagation(),e.handleSaveGwsnDescChange(n)}}},[e._v("\n                            "+e._s(e.$t("preserve"))+"\n                        ")])],1):e._e()],2)]}}])}),t("vxe-table-column",{key:"8",attrs:{field:"prjName",title:e.$t("gwsn.belongProject"),"header-align":"center",align:"center",width:"160","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.prjName||"--"))])]}}])}),t("vxe-table-column",{key:"9",attrs:{field:"model",title:e.$t("gwsn.gwsnModel"),"header-align":"center",align:"center",width:"160","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.model||"--"))])]}}])}),t("vxe-table-column",{key:"10",attrs:{field:"hardV",title:e.$t("gwsn.gwsnHardv"),"header-align":"center",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.hardV||"--"))])]}}])}),t("vxe-table-column",{key:"11",attrs:{field:"softV",title:e.$t("gwsn.gwsnsoftV"),"header-align":"center",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.softV||"--"))])]}}])}),t("vxe-table-column",{key:"12",attrs:{field:"tagNum",title:e.$t("gwsn.usedCount"),"header-align":"center",align:"center",width:"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.tagNum||0))])]}}])}),t("vxe-table-column",{key:"13",attrs:{field:"iccid",title:"ICCID","header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.iccid?t("span",[e._v(e._s(s.row.iccid))]):t("span",[e._v(e._s(e.$t("no")))])]}}])}),t("vxe-table-column",{key:"14",attrs:{field:"mac",title:"MAC","header-align":"center",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.mac||"--"))])]}}])}),t("vxe-table-column",{key:"15",attrs:{field:"createDate",title:e.$t("gwsn.createTime"),"header-align":"center",align:"center",width:"180",sortable:""}}),t("vxe-table-column",{key:"16",attrs:{field:"creator",title:e.$t("gwsn.creator"),"header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.cname?t.row.cname:t.row.username||"")+"\n            ")]}}])}),e.$hasPermission("socketsOne:getVpn:select:websocket")||e.$hasPermission("gwbaseinfo:config:permission.do")||e.$hasPermission("gwbaseinfo:configuration:permission.do")||e.$hasPermission("gwbaseinfo:debugger:permission.do")?t("vxe-table-column",{key:"17",attrs:{title:e.$t("handle"),"header-align":"center",align:"center",width:"200",fixed:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-wrap":"nowrap"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.isExpand?e.$t("gwsnSetting.clickOnTheIconToHideTheVpnConfigurationButton"):e.$t("gwsnSetting.clickOnTheIconToDisplayTheVpnConfigurationButton"),placement:"top"}},[t("i",{class:e.isExpand?"el-icon-caret-right":"el-icon-caret-left",staticStyle:{color:"#409eff","margin-right":"5px",cursor:"pointer","font-size":"18px"},on:{click:function(){e.isExpand=!e.isExpand}}})]),e._v("\n                    "+e._s(e.$t("handle"))+"\n                ")],1)]},proxy:!0},{key:"default",fn:function(n){return[e.isExpand&&e.$hasPermission("socketsOne:getVpn:select:websocket")?t("el-button",{staticStyle:{color:"#17b3a3"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleVPNConfig(n.$index,n.row)}}},[e._v("\n                    "+e._s(e.$t("gwsnSetting.VPNConfig"))+"\n                ")]):e._e(),e.$hasPermission("gwbaseinfo:config:permission.do")?t("el-button",{staticStyle:{color:"#17b3a3"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.config(n.$index,n.row)}}},[e._v("\n                    "+e._s(e.$t("gwsn.config"))+"\n                ")]):e._e(),e.$hasPermission("gwbaseinfo:configuration:permission.do")?t("el-button",{ref:"target",staticClass:"target",staticStyle:{color:"#17b3a3"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.configuration(n.$index,n.row)}}},[e._v("\n                    "+e._s(e.$t("gwsn.configuration"))+"\n                ")]):e._e(),e.$hasPermission("gwbaseinfo:debugger:permission.do")?t("el-button",{staticClass:"target",staticStyle:{color:"#17b3a3"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.gwsnDebugger(n.$index,n.row)}}},[[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("debuggerInfo.title"),placement:"top"}},[t("img",{attrs:{src:s("4382"),alt:""}})])]],2):e._e()]}}],null,!1,3103675148)}):e._e()],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[20,50,100,200],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.pageSizeChangeHandle,"current-change":e.pageCurrentChangeHandle}}),e.vpnConfigVisible?t("VPNConfig",{ref:"vpnConfig",attrs:{vpnBasicForm:e.vpnBasicForm}}):e._e(),e.configVisible?t("Config",{ref:"config",attrs:{rowDetail:e.rowDetail},on:{refreshDataList:e.getDataList}}):e._e(),e.addOrUpdateVisible?t("add-or-update",{ref:"addOrUpdate",attrs:{prjId:e.dataForm.prjName},on:{refreshDataList:e.getDataList}}):e._e(),e.debuggerVisible?t("Gwsndebugger",{ref:"gwsndebugger",attrs:{rowDetail:e.rowDetail},on:{refreshDataList:e.getDataList}}):e._e(),t("el-dialog",{attrs:{title:e.$t("gwsn.mobileNetworkStatus")+"("+e.netWorkgwsn+"-"+e.gwDesc+"-"+e.prjName+")",visible:e.dialogFormNetworkVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleNetworkClose},on:{"update:visible":function(t){e.dialogFormNetworkVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.netWorkLoading,expression:"netWorkLoading"}],attrs:{"label-width":(e.$i18n.locale,"130px")}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.lineTime")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.lineTime"),readonly:""},model:{value:e.networkForm.online_minutes,callback:function(t){e.$set(e.networkForm,"online_minutes",t)},expression:"networkForm.online_minutes"}},[t("template",{slot:"append"},[e._v("\n                                "+e._s(e.$t("gwsn.minute"))+"\n                            ")])],2)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.connectStatus")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.connectStatus"),readonly:""},model:{value:e.networkForm.net_stat,callback:function(t){e.$set(e.networkForm,"net_stat",t)},expression:"networkForm.net_stat"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.SIMStatus")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.SIMStatus"),readonly:""},model:{value:e.networkForm.sim_stat,callback:function(t){e.$set(e.networkForm,"sim_stat",t)},expression:"networkForm.sim_stat"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.symbolQuality")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.symbolQuality"),readonly:""},model:{value:e.networkForm.strength,callback:function(t){e.$set(e.networkForm,"strength",t)},expression:"networkForm.strength"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"IMSI"}},[t("el-input",{attrs:{placeholder:"IMSI",readonly:""},model:{value:e.networkForm.IMSI,callback:function(t){e.$set(e.networkForm,"IMSI",t)},expression:"networkForm.IMSI"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"ICCID"}},[t("el-input",{attrs:{placeholder:"ICCID",readonly:""},model:{value:e.networkForm.ICCID,callback:function(t){e.$set(e.networkForm,"ICCID",t)},expression:"networkForm.ICCID"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.networkType")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.networkType"),readonly:""},model:{value:e.networkForm.net_type,callback:function(t){e.$set(e.networkForm,"net_type",t)},expression:"networkForm.net_type"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.address")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.address"),readonly:""},model:{value:e.networkForm.ppp_ip,callback:function(t){e.$set(e.networkForm,"ppp_ip",t)},expression:"networkForm.ppp_ip"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.domainServe")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.domainServe"),readonly:""},model:{value:e.networkForm.gateWay,callback:function(t){e.$set(e.networkForm,"gateWay",t)},expression:"networkForm.gateWay"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.baseStationLAC")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.baseStationLAC"),readonly:""},model:{value:e.networkForm.LAC,callback:function(t){e.$set(e.networkForm,"LAC",t)},expression:"networkForm.LAC"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.cellID")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.cellID"),readonly:""},model:{value:e.networkForm.cellId,callback:function(t){e.$set(e.networkForm,"cellId",t)},expression:"networkForm.cellId"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"RSRP"}},[t("el-input",{attrs:{placeholder:"RSRP",readonly:""},model:{value:e.networkForm.RSRP,callback:function(t){e.$set(e.networkForm,"RSRP",t)},expression:"networkForm.RSRP"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"SINR"}},[t("el-input",{attrs:{placeholder:"SINR",readonly:""},model:{value:e.networkForm.SINR,callback:function(t){e.$set(e.networkForm,"SINR",t)},expression:"networkForm.SINR"}})],1)],1),t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.isViewZuWang,expression:"isViewZuWang"}],attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsn.moduleType")}},[t("el-input",{attrs:{placeholder:e.$t("gwsn.moduleType"),readonly:""},model:{value:e.networkForm.Model,callback:function(t){e.$set(e.networkForm,"Model",t)},expression:"networkForm.Model"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("gwsnSetting.operators")}},[t("el-input",{attrs:{placeholder:e.$t("gwsnSetting.operators"),readonly:""},model:{value:e.networkForm.oper,callback:function(t){e.$set(e.networkForm,"oper",t)},expression:"networkForm.oper"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"IMEI"}},[t("el-input",{attrs:{placeholder:"IMEI",readonly:""},model:{value:e.networkForm.imei,callback:function(t){e.$set(e.networkForm,"imei",t)},expression:"networkForm.imei"}})],1)],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[e.$hasPermission("socketsOne:getpppinfo:select:websocket")?t("el-button",{attrs:{type:"primary"},on:{click:e.handleNetworkRefresh}},[e._v(e._s(e.$t("gwsn.refresh")))]):e._e(),t("el-button",{on:{click:e.handleNetworkClose}},[e._v(e._s(e.$t("gwsn.close")))])],1)],1),t("rebootrun",{directives:[{name:"show",rawName:"v-show",value:e.confirmVisible,expression:"confirmVisible"}],attrs:{title:e.$t("prompt.title"),content:e.confirmDialogcontent,returnVisible:e.$hasPermission("issuePros:reRun:websocket"),confirmAndRebootVisible:e.$hasPermission("issuePros:rebootOrRun:websocket"),confirmVisible:e.$hasPermission("issuePros:reboot:websocket"),dangerText:e.$t("confirm"),rerunText:e.$t("gwsnSetting.restartApp"),confirmText:e.$t("gwsnSetting.restartOnYourOwnLater"),cancelText:e.$t("cancel")},on:{cancel:function(t){return e.clickCancel()},rerun:function(t){return e.restartRerun()},confirmAndReboot:function(t){return e.clickConfirmAndReboot()},confirm:function(t){return e.clickConfirm()}}}),t("el-dialog",{attrs:{title:e.$t("gwsnSetting.batchFirmwareUpgrade"),visible:e.batchIssueFirmwaresVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleBatchIssueFirmwaresClose},on:{"update:visible":function(t){e.batchIssueFirmwaresVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.batchIssueFirmwaresLoading,expression:"batchIssueFirmwaresLoading"}],ref:"batchIssueFirmwaresForm",attrs:{"label-width":(e.$i18n.locale,"130px"),rules:e.batchIssueFirmwaresFormRules,model:e.batchIssueFirmwaresForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.batchIssueFirmwaresForm()}}},[t("el-row",[t("el-col",{attrs:{sm:24,md:24,xl:24}},[t("el-form-item",{attrs:{label:e.$t("gwsn.number"),prop:"gwsns"}},[t("el-input",{attrs:{type:"textarea",placeholder:e.$t("gwsn.lineTime"),readonly:""},model:{value:e.batchIssueFirmwaresForm.gwsns,callback:function(t){e.$set(e.batchIssueFirmwaresForm,"gwsns",t)},expression:"batchIssueFirmwaresForm.gwsns"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{sm:24,md:12,xl:12}},[t("el-form-item",{attrs:{label:e.$t("gwsnSetting.upgradeSoftware"),prop:"updateVersion"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("gwsnSetting.pleaseSelect")},on:{change:e.handleUpdateSoftverChange},model:{value:e.batchIssueFirmwaresForm.updateVersion,callback:function(t){e.$set(e.batchIssueFirmwaresForm,"updateVersion",t)},expression:"batchIssueFirmwaresForm.updateVersion"}},e._l(e.updateVersionList,(function(s,n){return t("el-option",{key:n,attrs:{label:s.label,value:s.value}},[t("span",{style:{width:"100px",display:"inline-block",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",color:0==s.fileType?"#E6A23C":"#000"},attrs:{title:s.label}},[e._v(e._s(0==s.fileType?s.label+"(".concat(e.$t("gwsnSetting.patch"),")"):s.label))]),t("span",{staticStyle:{color:"#8492a6","font-size":"13px",display:"inline-block","margin-left":"20px",width:"200px","text-align":"right",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:s.comment}},[e._v("\n                                    "+e._s(s.comment||e.$t("gwsnSetting.noEmpty"))+"\n                                ")])])})),1)],1)],1),t("el-col",{attrs:{sm:24,md:12,xl:12}},[t("el-form-item",{attrs:{label:e.$t("gwsnSetting.operationSelection"),prop:"action"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("gwsnSetting.pleaseSelect")},model:{value:e.batchIssueFirmwaresForm.action,callback:function(t){e.$set(e.batchIssueFirmwaresForm,"action",t)},expression:"batchIssueFirmwaresForm.action"}},e._l(e.batchIssueFirmwaresActionList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleBatchIssueFirmwaresClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleBatchIssueFirmwaresSubmit}},[e._v(e._s(e.$t("confirm")))])],1)],1),t("el-dialog",{attrs:{title:e.$t("gwsn.batchOperationsCopyGateway"),visible:e.batchCopyProjectToGwsnVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleBatchCopyProjectToGwsnClose},on:{"update:visible":function(t){e.batchCopyProjectToGwsnVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.batchCopyProjectToGwsnLoading,expression:"batchCopyProjectToGwsnLoading"}],ref:"batchCopyProjectToGwsnForm",attrs:{"label-width":(e.$i18n.locale,"130px"),rules:e.batchCopyProjectToGwsnFormRules,model:e.batchCopyProjectToGwsnForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleBatchCopyProjectToGwsnFormSubmit()}}},[t("el-row",[t("el-col",{attrs:{sm:24,md:24,xl:24}},[t("el-form-item",{attrs:{label:e.$t("gwsnSetting.sourceGatewayNumber"),prop:"gwsns"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:e.$t("gwsn.lineTime"),readonly:""},model:{value:e.batchCopyProjectToGwsnForm.gwsns,callback:function(t){e.$set(e.batchCopyProjectToGwsnForm,"gwsns",t)},expression:"batchCopyProjectToGwsnForm.gwsns"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{sm:24,md:24,xl:24}},[t("el-form-item",{attrs:{label:e.$t("gwsnSetting.dataSource"),prop:"gwsn"}},[t("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.handleGwsnScroll,expression:"handleGwsnScroll"}],staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",placeholder:e.$t("select")},on:{"visible-change":e.handleGwsnVisibleChange,clear:e.handleGwsnClearChange},model:{value:e.batchCopyProjectToGwsnForm.gwsn,callback:function(t){e.$set(e.batchCopyProjectToGwsnForm,"gwsn",t)},expression:"batchCopyProjectToGwsnForm.gwsn"}},[[t("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"99","background-color":"#fff"}},[t("el-input",{ref:"gwsnInput",staticStyle:{width:"98%","margin-left":"1%","margin-top":"5px","margin-bottom":"5px"},attrs:{size:"small",clearable:"",placeholder:e.$t("gwsn.pleaseEnterSearchContent")},model:{value:e.gwsnSearch,callback:function(t){e.gwsnSearch=t},expression:"gwsnSearch"}})],1),t("div",{staticStyle:{width:"100%",height:"42px"}}),e._l(e.allGwsnList,(function(s){return t("el-option",{key:s.sn,attrs:{label:s.sn,value:s.sn,disabled:!!s.hasOwnProperty("disabled")&&s.disabled}},[t("span",{staticStyle:{width:"200px",display:"inline-block","text-align":"left",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:s.sn}},[e._v("\n                                        "+e._s(s.sn)+"\n                                    ")]),t("span",{staticStyle:{color:"#8492a6","font-size":"13px",display:"inline-block","margin-left":"10px",width:"calc(100% - 210px)","text-align":"right",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:s.gwDesc}},[e._v("\n                                        "+e._s(s.gwDesc||e.$t("no"))+"\n                                    ")])])}))]],2)],1)],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleBatchCopyProjectToGwsnClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleBatchCopyProjectToGwsnFormSubmit}},[e._v(e._s(e.$t("confirm")))])],1)],1),t("offlineissued",{directives:[{name:"show",rawName:"v-show",value:e.offlineissuedVisible,expression:"offlineissuedVisible"}],attrs:{title:e.$t("prompt.title"),content:e.offlineissuedContent,dangerText:e.$t("confirm"),rerunText:e.$t("gwsnSetting.restartApp"),cancelText:e.$t("cancel")},on:{cancel:function(t){return e.handleOfflineCancel()},rerun:function(t){return e.handleOfflineRestartRerun()},confirmAndReboot:function(t){return e.handleOfflineConfirmAndReboot()}}})],1)},i=[],r=s("ade3"),o=(s("96cf"),s("1da1")),a=s("53ca"),l=(s("4f7f"),s("5df3"),s("1c4c"),s("6762"),s("2fdb"),s("ac6a"),s("28a5"),s("6b54"),s("a481"),s("4328")),c=s.n(l),u=s("9dce"),m=s("d7fc"),g=s("8b93"),d=s("f747"),h=s("b047"),w=s.n(h),p=s("e1a5"),f=s("6dcd"),b=s("bd6e"),v=s("2387"),k=s("376b"),$=s("ed08"),S=Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({mixins:[p["a"]],inject:["multipeResult"],directives:{loadmore:{inserted:function(e,t){var s=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");s.addEventListener("scroll",(function(){var e=this.scrollHeight-Math.ceil(this.scrollTop)<=this.clientHeight;e&&0!==this.scrollTop&&t.value()}))}}},data:function(){return{settingReservedSnCountVisible:!1,settingReservedSnCount:null,currentUserId:null,prjInfo:{page:1,total:0},gwsnInfo:{page:1,total:0},multipeResult:this.multipeResult,resname:"",rebootOrRerun:"",issueSuccessTimer:null,confirmDialogcontent:"",issueSuccessGwsnMap:{},confirmVisible:!1,finallyContent:this.$t("gwsn.regularRefresh"),isViewZuWang:!1,ids:"",page:1,limit:20,total:0,timer:null,gwDesc:"",prjName:"",netWorkgwsn:"",wsUrl:"",websocket:null,lockReconnect:!1,scrollTableHeightStore:null,vpnConfigVisible:!1,configVisible:!1,debuggerVisible:!1,dataListLoading:!1,netWorkLoading:!1,dialogFormNetworkVisible:!1,checkboxConfig:{reserve:!0,highlight:!0,checkField:"checked"},dataList:[],prjSearch:"",prjList:[],gwsnSearch:"",allGwsnList:[],modelList:[],gwsns:[],fileList:[],vpnBasicForm:{},rowDetail:{},scrollTableHeight:window.innerHeight-220-53,mixinViewModuleOptions:{activatedIsNeed:!1,exportURL:"/info/gwbaseinfo/exports"},storeInterValTime:30,dataForm:{gwsn:"",prjName:"",onLine:0,searchType:"1",checked:!1,intervalTime:30},isLock:!0,isExpand:!1,onLineList:[{label:this.$t("gwsn.all"),value:0},{label:this.$t("gwsn.inLine"),value:1},{label:this.$t("gwsn.offLine"),value:2}],networkForm:{online_minutes:"",net_stat:"",sim_stat:"",strength:"",IMSI:"",ICCID:"",net_type:"",ppp_ip:"",gateWay:"",LAC:"",cellId:"",RSRP:"",SINR:"",Model:"",imei:"",oper:""},batchIssueFirmwaresVisible:!1,batchIssueFirmwaresLoading:!1,updateVersionList:[],issueFirmwaresSuccessTimer:null,issueFirmwaresSuccessGwsnMap:{},batchIssueFirmwaresForm:{gwsns:"",updateVersion:"",fileUrl:"",sid:"",action:1,issueSecretGwsns:[]},batchIssueFirmwaresFormRules:{gwsns:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],updateVersion:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],action:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},batchIssueFirmwaresActionList:[{label:this.$t("gwsnSetting.selfRestartLater"),value:0},{label:this.$t("configuration.restartGateway"),value:1}],batchCopyProjectToGwsnLoading:!1,batchCopyProjectToGwsnVisible:!1,batchCopyProjectToGwsnForm:{gwsns:"",gwsn:""},batchCopyProjectToGwsnFormRules:{gwsns:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],gwsn:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},snDriveCodeArr:[],websocketDrive:null,lockDriveReconnect:!1,recconectDriveTimer:null,offlineissuedVisible:!1,offlineissuedContent:"",offlineDialogVisible:!1}}},"directives",{focus:{inserted:function(e){e.querySelector("input").focus()}}}),"components",{Config:g["default"],VPNConfig:m["default"],AddOrUpdate:f["default"],Gwsndebugger:d["default"],rebootrun:b["a"],offlineissued:v["a"]}),"methods",{getPrjNameList:function(){var e=this,t={page:e.prjInfo.page,limit:50,priName:e.prjSearch.replace(/\s+/g,""),_t:(new Date).getTime()};e.$hasPermission("tprjinfo:list:select")?e.$http.get("/info/tprjinfo/tprjinfoList",{params:t}).then((function(t){var s=t.data;if(s.hasOwnProperty("code")&&0!=s.code)return e.$message.error(s.data||s.msg);1==e.prjInfo.page?e.prjList=s.list:e.prjList=e.prjList.concat(s.list),e.prjInfo.total=Number(s.total),0==e.prjList.length?e.prjList.push({id:e.$t("noMatchingDataYet"),prjName:e.$t("noMatchingDataYet"),disabled:!0}):JSON.stringify(e.$route.query)})).catch((function(e){return!1})):e.$message.warning("暂无项目查询权限, 请联系管理员")},getAllGwsnDataList:function(){var e=this,t={pageNum:e.gwsnInfo.page,pageSize:200,fuzzy:e.gwsnSearch,_t:(new Date).getTime()};e.$hasPermission("gwbaseinfo:select:permission.do")?e.$http.post("/info/gwbaseinfo/selectByPage.do",c.a.stringify(t)).then((function(t){var s=t.data;if(s.hasOwnProperty("code")&&0!=s.code)return e.$message.error(s.data||s.msg);1==e.gwsnInfo.page?e.allGwsnList=s.data.list:e.allGwsnList=e.allGwsnList.concat(s.data.list),0==e.allGwsnList.length&&e.allGwsnList.push({sn:e.$t("noMatchingDataYet"),gwDesc:e.$t("noMatchingDataYet"),disabled:!0}),e.gwsnInfo.total=Number(s.data.total)})).catch((function(e){return!1})):e.$message.warning("暂无网关查询权限, 请联系管理员")},handlePrjClearChange:function(){this.dataForm.prjName="",this.querySearch()},handlePrjVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.prjInput.focus()}))},handleGwsnClearChange:function(){this.gwsnSearch="",this.batchCopyProjectToGwsnForm.gwsn=""},handleGwsnVisibleChange:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.gwsnInput.focus()}))},pageSizeChangeHandle:function(e){this.page=1,this.limit=e,this.scrollTableHeightStore=0,this.getDataList(),sessionStorage.setItem("limit9",this.limit),sessionStorage.setItem("page9",this.page)},pageCurrentChangeHandle:function(e){this.page=e,this.scrollTableHeightStore=0,this.getDataList(),sessionStorage.setItem("page9",this.page)},handleStatus:w()((function(e){this.dataForm.onLine=e,this.querySearch()}),10,{leading:!0,trailing:!1}),handleSearchTypeChange:function(e){this.dataForm.gwsn=""},querySearch:function(){var e=this;this.page=1,this.timer&&(clearInterval(this.timer),this.timer=null),this.scrollTableHeightStore=0,this.$nextTick((function(){e.getDataList(),e.dataForm.checked&&(e.timer=setInterval((function(){e.storeInterValTime>0?e.storeInterValTime--:(e.getDataList(),e.storeInterValTime=e.dataForm.intervalTime)}),1e3))}))},handleIntervalRefresh:function(e){var t=this;e?(t.storeInterValTime=30,t.timer=setInterval((function(){t.storeInterValTime>0?(t.storeInterValTime--,t.finallyContent=t.storeInterValTime+"s"+t.$t("gwsn.refreshAfter")):(t.getDataList(),t.storeInterValTime=t.dataForm.intervalTime)}),1e3)):(t.finallyContent=t.$t("gwsn.regularRefresh"),clearInterval(t.timer),t.timer=null)},handleLimitValue:function(e){e?(this.dataForm.checked,e<30?(this.dataForm.intervalTime=30,this.storeInterValTime=this.dataForm.intervalTime):this.storeInterValTime=e):(this.dataForm.intervalTime=30,this.storeInterValTime=this.dataForm.intervalTime)},toNum:function(e){e=e.toString();for(var t=e.split("."),s=["","0","00","000","0000"],n=s.reverse(),i=0;i<t.length;i++){var r=t[i].length;t[i]=n[r]+t[i]}var o=t.join("");return o},checkPlugin:function(e,t){e=this.toNum(e),t=this.toNum(t);return e==t||e>t},getDataList:w()((function(){var e=this,t={pageNum:e.page,pageSize:e.limit,prjId:e.dataForm.prjName};if(0!=e.dataForm.onLine&&(t["statu"]=e.dataForm.onLine),1==e.dataForm.searchType)e.dataForm.gwsn&&(t["fuzzy"]=e.dataForm.gwsn.replace(/_/g,"\\_").replace(/%/g,"\\%").trim());else if(2==e.dataForm.searchType){if(e.dataForm.gwsn){if(!/^[A-F0-9]{2}(-[A-F0-9]{2}){5}$|^[A-F0-9]{2}(:[A-F0-9]{2}){5}$|^[A-F0-9]{12}$|^[A-F0-9]{4}(\.[A-F0-9]{4}){2}$/.test(e.dataForm.gwsn))return e.$message.warning(e.$t("gwsnSetting.pleaseEnterTheCorrectMACAddress"));t["mac"]=e.dataForm.gwsn.trim()}}else e.dataForm.gwsn&&(t["iccid"]=e.dataForm.gwsn);e.total=0,e.$hasPermission("gwbaseinfo:select:permission.do")?(e.dataListLoading=!0,e.$http.post("/info/gwbaseinfo/selectByPage.do",c.a.stringify(t)).then((function(s){var n=s.data;if(e.gwsns=[],e.$refs.recordTable.clearCheckboxRow(),e.$refs.recordTable.clearCheckboxReserve(),0!=n.code)return e.dataList=[],e.dataListLoading=!1,e.$message.error(n.data||n.msg);var i={timeZone:"Asia/Shanghai",hour12:!1};if(n.data.list.length>0){var r=(new Date).toLocaleString("en-US",i);r||(r=new Date);for(var o=0;o<n.data.list.length;o++){var a=n.data.list[o];a.softV?e.checkPlugin(a.softV.substring(1,a.softV.length),"1.2.78")&&a.hasOwnProperty("statu")?2==a.statu||(new Date(r).getTime()-new Date(a.gwLastTime).getTime())/1e3/60>7?e.$set(a,"isOut",1):e.$set(a,"isOut",0):(new Date(r).getTime()-new Date(a.gwLastTime).getTime())/1e3/60>7?e.$set(a,"isOut",1):e.$set(a,"isOut",0):e.$set(a,"isOut",1)}e.page=t.pageNum,e.dataList=n.data.list,e.total=Number(n.data.total),e.$refs.recordTable.loadData(e.dataList),e.dataListLoading=!1}else e.dataList=[],e.total=0,e.page=1,e.dataListLoading=!1})).catch((function(t){return e.dataListLoading=!1,!1}))):e.$message.warning("暂无网关查询权限, 请联系管理员")}),100,{leading:!0,trailing:!1}),getRowKey:function(e){return e.id},getIntervalList:function(){var e=this;this.timer=setInterval((function(){e.getDataList()}),3e4)},renderHeader:function(e,t){var s=this,n=t.column;return e("span",[e("span",n.label),e("i",{class:this.isLock?"el-icon-lock":"el-icon-unlock",style:"color:#409eff;margin-left:5px;cursor: pointer",on:{click:function(){s.isLock=!s.isLock}}})])},realtimeViewer:function(e,t){var s=this,n={gwsn:t.sn};if(t.prjId&&(n["prjId"]=t.prjId),window.SITE_CONFIG["menuList"].length>0){var i=Object($["m"])(window.SITE_CONFIG["menuList"],"runmonitor/equipment-list");i?s.$router.push({path:"runmonitor-equipment-list",name:"runmonitor-equipment-list",query:n}):s.$message.error("暂无查看设备数据权限, 请联系管理员")}},encryMD5:function(e){var t=this.$randomStrFun();return this.$md5(t+e)+"/"+String(parseInt((new Date).getTime().toString().substring(0,10)))},handleNetWork:function(e,t){var s=this;if(254==t.csq)s.configVisible=!0,s.rowDetail={gwSn:t.sn,csq:t.csq,gwDesc:t.gwDesc||this.$t("gwsn.noDesc"),gwSoftV:t.softV?t.softV.substring(1,t.softV.length):"",gwModel:t.model||"",activeTab:"thirteenth"},s.$nextTick((function(){s.$refs.config.init()}));else{if(!s.$hasPermission("socketsOne:getpppinfo:select:websocket"))return void s.$message.warning("暂无获取移动网络状态权限, 请联系管理员");s.networkForm={online_minutes:"",net_stat:"",sim_stat:"",strength:"",IMSI:"",ICCID:"",net_type:"",ppp_ip:"",gateWay:"",LAC:"",cellId:"",RSRP:"",SINR:"",Model:"",imei:"",oper:""},s.resname="getpppinfo",s.netWorkgwsn=t.sn,s.gwDesc=t.gwDesc||s.$t("gwsn.noDesc"),s.prjName=t.prjName||s.$t("gwsn.noBindProject"),s.dialogFormNetworkVisible=!0,s.$nextTick((function(){s.netWorkLoading=!0,s.isViewZuWang=!1,s.wsUrl="socketsOne/getpppinfo/"+t.sn+"/"+s.encryMD5(t.sn),s.createWebSocket(),setTimeout((function(){if(s.netWorkLoading)return s.netWorkLoading=!1,s.websocket&&(s.websocket.close(),s.websocket=null),s.$message.error(s.$t("issue.timeout"))}),"30000")}))}},handleNetworkRefresh:function(){var e=this,t=this;t.$hasPermission("socketsOne:getpppinfo:select:websocket")?(t.networkForm={online_minutes:"",net_stat:"",sim_stat:"",strength:"",IMSI:"",ICCID:"",net_type:"",ppp_ip:"",gateWay:"",LAC:"",cellId:"",RSRP:"",SINR:"",Model:"",imei:"",oper:""},t.$nextTick((function(){t.netWorkLoading=!0,t.wsUrl="socketsOne/getpppinfo/"+t.netWorkgwsn+"/"+t.encryMD5(t.netWorkgwsn),t.createWebSocket(),setTimeout((function(){if(t.netWorkLoading)return t.netWorkLoading=!1,e.websocket&&(t.websocket.close(),t.websocket=null),t.$message.error(t.$t("issue.timeout"))}),"30000")}))):t.$message.warning("暂无获取移动网络状态权限, 请联系管理员")},handleNetworkClose:function(){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&(this.websocket.close(),this.websocket=null),this.netWorkgwsn="",this.dialogFormNetworkVisible=!1},handleSaveGwsnDescChange:w()((function(e){var t=this,s={gwsn:e.sn,name:e.gwDesc};if(t.$hasPermission("socketNine:setname:websocket")){t.resname="setname",t.$refs.recordTable.clearActived();var n=Object($["p"])(JSON.stringify(s));t.$nextTick((function(){t.wsUrl="socketNine/setname/"+Object($["q"])(n)+"/"+t.encryMD5ListSetname(),t.createWebSocket(),setTimeout((function(){if(t.websocket)return t.websocket.close(),t.websocket=null,t.$message.error(t.$t("issue.timeout"))}),"30000")}))}else t.$message.warning("暂无修改网关备注权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1}),handleICCID:function(e,t){this.$router.push({path:"/cardmanage-card",query:{iccid:t.iccid}})},handleVPNConfig:function(e,t){var s=this;this.vpnConfigVisible=!0,this.vpnBasicForm={gwSn:t.sn,gwDesc:t.gwDesc||this.$t("gwsn.noDesc"),gwModel:t.model||"",per:1},this.$nextTick((function(){s.$refs.vpnConfig.init()}))},config:function(e,t){var s=this;this.configVisible=!0,this.rowDetail={gwSn:t.sn,csq:t.csq,pwd:t.pwd,gwDesc:t.gwDesc||this.$t("gwsn.noDesc"),gwSoftV:t.softV?t.softV.substring(1,t.softV.length):"",gwModel:"PBox1200-4G"===t.model?t.model:t.hasOwnProperty("modelr")?t.modelr||"":t.model||""},this.$nextTick((function(){s.$refs.config.init()}))},gwsnDebugger:function(e,t){var s=this;this.debuggerVisible=!0,this.rowDetail={gwSn:t.sn,gwDesc:t.gwDesc||this.$t("gwsn.noDesc"),gwModel:"PBox1200-4G"===t.model?t.model:t.hasOwnProperty("modelr")?t.modelr||"":t.model||""},this.$nextTick((function(){s.$refs.gwsndebugger.init()}))},configuration:function(e,t){var s=this;sessionStorage.setItem("gwsn",t.sn),sessionStorage.setItem("prjId",t.prjId),sessionStorage.setItem("gwDesc",t.gwDesc||""),sessionStorage.setItem("model","PBox1200-4G"===t.model?t.model:t.hasOwnProperty("modelr")?t.modelr||"":t.model||""),sessionStorage.setItem("gwSoftV",t.softV||""),sessionStorage.setItem("per",1),localStorage.setItem("creator",this.$store.state.user.id),localStorage.setItem("superAdmin",this.$store.state.user.superAdmin),this.$nextTick((function(){var e=s.$router.resolve({path:"/channelinfo"});window.open(e.href,"_blank")}))},selectAll:function(e){var t=this,s=[],n=this.$refs.recordTable.getCheckboxRecords(!1);this.gwsns=[],n.forEach((function(e){t.gwsns.push(e.sn),s.push(e.gwId)})),this.ids=s.join(","),this.$store.dispatch("changeIds",this.ids)},dataListSelectionHandle:function(e){var t=this,s=[],n=this.$refs.recordTable.getCheckboxRecords(!1);this.gwsns=[],n.forEach((function(e){t.gwsns.push(e.sn),s.push(e.gwId)})),this.ids=s.join(","),this.$store.dispatch("changeIds",this.ids)},handleMultipeIssuedPrjToGwsn:function(){return 0==this.gwsns.length?this.$message.warning(this.$t("gwsnSetting.pleaseSelectADataSourceForBatchOperations")):this.gwsns.length>20?this.$message.warning(this.$t("gwsnSetting.batchOperationsCanOnlySelectUpTo20PleaseCheckAgainBeforeProceedingWithTheOperation")):(this.confirmVisible=!0,this.resname="downfile",void(this.confirmDialogcontent=this.$t("gwsnSetting.areYouSureToIssueTheseGatewayProjects")))},handleMultipeIssueFirmwares:function(){var e=this;if(0==this.gwsns.length)return this.$message.warning(this.$t("gwsnSetting.pleaseSelectADataSourceForBatchOperations"));if(this.gwsns.length>20)return this.$message.warning(this.$t("gwsnSetting.batchOperationsCanOnlySelectUpTo20PleaseCheckAgainBeforeProceedingWithTheOperation"));if(this.$hasPermission("gwFirware:gwFirmwareListandInterselect:permission.do"))if(this.$hasPermission("batchOper:batchIssueFirmwares:permission.do")){var t=[];if(this.dataList.forEach((function(s){"PBox1200-4G"===s.model?e.gwsns.includes(s.sn)&&s.hasOwnProperty("model")&&s.model&&!t.includes(s.model)&&t.push(s.model):s.hasOwnProperty("modelr")?e.gwsns.includes(s.sn)&&s.hasOwnProperty("modelr")&&s.modelr&&!t.includes(s.modelr)&&t.push(s.modelr):e.gwsns.includes(s.sn)&&s.hasOwnProperty("model")&&s.model&&!t.includes(s.model)&&t.push(s.model)})),t.length>1)return this.$message.warning(this.$t("gwsnSetting.pleaseSelectAGatewayOfTheSameGatewayModelForBatchFirmwareUpgradeOperation"));this.batchIssueFirmwaresForm.gwsns=this.gwsns.join(","),this.getUpdateModeList(t[0],(function(){if(0==e.updateVersionList.length)return e.$message.warning(e.$t("gwsnSetting.thereIsCurrentlyNoVersionAvailableForUpgradeOperation"));e.batchIssueFirmwaresForm.updateVersion="",e.batchIssueFirmwaresForm.fileUrl="",e.batchIssueFirmwaresVisible=!0}))}else this.$message.warning("暂无升级版本权限, 请联系管理员");else this.$message.warning("暂无软件列表查询权限, 请联系管理员")},getUpdateModeList:function(e,t){var s=this;s.updateVersionList=[],s.$hasPermission("gwFirware:gwFirmwareListandInterselect:permission.do")?s.$http.get("/info/gwfirmwareinfo/gwFirmwareListandInter",{params:{page:1,limit:1e6,model:e,available:1}}).then((function(e){var n=e.data,i=n.list;if(i.length>0)for(var r=0;r<i.length;r++){var o=i[r],a={};s.dataForm.soft_ver?0==o.fileType?s.dataForm.soft_ver=="V"+o.patchTarget&&(a={label:"V"+o.fileVersion,value:o.fileVersion,comment:o.fileDesc,key:o.createDate,fileType:o.fileType,fileUrl:o.fileUrl},s.updateVersionList.push(a)):(a={label:"V"+o.fileVersion,value:o.fileVersion,comment:o.fileDesc,fileType:o.fileType,key:o.createDate,fileUrl:o.fileUrl},s.updateVersionList.push(a)):1==o.fileType&&(a={label:"V"+o.fileVersion,value:o.fileVersion,comment:o.fileDesc,fileType:o.fileType,key:o.createDate,fileUrl:o.fileUrl},s.updateVersionList.push(a))}t()})).catch((function(e){return!1})):s.$message.warning("暂无软件列表查询权限, 请联系管理员")},handleUpdateSoftverChange:function(e){for(var t=0;t<this.updateVersionList.length;t++){var s=this.updateVersionList[t];if(e==s.value){this.batchIssueFirmwaresForm.fileUrl=s.fileUrl,this.batchIssueFirmwaresForm.updateVersion=s.value;break}}},handleBatchIssueFirmwaresClose:function(){this.resname="",this.$refs["batchIssueFirmwaresForm"].resetFields(),this.batchIssueFirmwaresLoading=!1,this.batchIssueFirmwaresVisible=!1},handleBatchIssueFirmwaresSubmit:w()((function(){var e=this,t=[];e.$refs["batchIssueFirmwaresForm"].validate((function(s){if(!s)return!1;e.gwsns.forEach((function(s){var n={sn:s,fileType:1,fileUrl:e.batchIssueFirmwaresForm.fileUrl,savePath:""};1==e.batchIssueFirmwaresForm.action&&(n["action"]=1),t.push(n)})),e.$hasPermission("batchOper:batchIssueFirmwares:permission.do")?1!=e.batchIssueFirmwaresForm.action||e.$hasPermission("channelinfo:reProsBySn:permission.do")?e.$http.post("/batchOper/batchIssueFirmwares.do",t).then((function(t){var s=t.data;if(0!=s.code)return e.$message.error(s.data||s.msg);var n=[],i=JSON.parse(s.data);for(var r in i)Object.hasOwnProperty.call(i,r)&&(e.batchIssueFirmwaresForm.sid=r,e.batchIssueFirmwaresForm.issueSecretGwsns=i[r]);if(e.batchIssueFirmwaresForm.issueSecretGwsns.length>0){if(e.batchIssueFirmwaresForm.issueSecretGwsns.forEach((function(e){for(var t in e)Object.hasOwnProperty.call(e,t)&&n.push(e[t])})),e.resname="issueFirmware",e.wsUrl="issueFirmware/".concat(n.join(","),"/")+e.encryMD5List(),!e.$hasPermission("issueFirmware:websocket"))return void e.$message.warning("暂无升级软件权限, 请联系管理员");e.createWebSocket(),e.batchIssueFirmwaresLoading=!1,e.batchIssueFirmwaresVisible=!1}})):e.$message.warning("暂无批量重启网关权限, 请联系管理员"):e.$message.warning("暂无升级软件权限, 请联系管理员")}))}),500,{leading:!0,trailing:!1}),getArrDifference:function(e,t){return e.concat(t).filter((function(e,t,s){return s.indexOf(e)===s.lastIndexOf(e)}))},handleIssueSuccessChange:function(){var e=this,t=this,s=[],n=t.gwsns.length;t.issueSuccessTimer=setInterval((function(){if("{}"!=JSON.stringify(t.issueSuccessGwsnMap)){var e=function(e){t.dataList.forEach((function(n){e==n.sn&&(t.$set(n,"progress",Math.floor(t.issueSuccessGwsnMap[e].downloaded_size/t.issueSuccessGwsnMap[e].total_size*10)/10*100),100==n.progress&&(s.push(e),s=Array.from(new Set(s))))}))};for(var i in t.issueSuccessGwsnMap)e(i);s.length==n&&t.websocket&&(setTimeout((function(){if(t.dataList.forEach((function(e){t.$set(e,"progress",0)})),t.issueSuccessGwsnMap={},t.resname="",clearInterval(t.issueSuccessTimer),t.issueSuccessTimer=null,t.rebootOrRerun&&"notReboot"!=t.rebootOrRerun){if(!t.$hasPermission("channelinfo:reProsBySn:permission.do"))return void t.$message.warning("暂无批量重启权限, 请联系管理员");t.$http.get("/info/channelinfo/reProsBySn.do",{params:{sns:t.gwsns.join(","),action:t.rebootOrRerun}}).then((function(e){var s=e.data;if(0!=s.code)return t.$message.error(s.data||s.msg);t.$message.success(s.data||s.msg)}))}}),2e3),t.websocket.close(),t.websocket=null)}}),0),setTimeout((function(){if(t.websocket){t.dataList.forEach((function(e){t.$set(e,"progress",0)}));var n=t.getArrDifference(t.gwsns,s);if(n.length>0&&t.$message.error(n.join(",")+e.$t("gwsnSetting.failedToIssueProject")),t.issueSuccessGwsnMap={},t.websocket.close(),t.websocket=null,clearInterval(t.issueSuccessTimer),t.issueSuccessTimer=null,t.resname="",t.rebootOrRerun&&"notReboot"!=t.rebootOrRerun){if(!t.$hasPermission("channelinfo:reProsBySn:permission.do"))return void t.$message.warning("暂无批量重启权限, 请联系管理员");t.$http.get("/info/channelinfo/reProsBySn.do",{params:{sns:s.join(","),action:t.rebootOrRerun}}).then((function(e){var s=e.data;if(0!=s.code)return t.$message.error(s.data||s.msg);t.$message.success(s.data||s.msg)}))}}}),"15000"*n)},handleIssueFirmwaresSuccessChange:function(){var e=this,t=this,s=[],n=t.gwsns.length;t.issueFirmwaresSuccessTimer=setInterval((function(){if("{}"!=JSON.stringify(t.issueFirmwaresSuccessGwsnMap)){var i=function(e){t.dataList.forEach((function(n){e==n.sn&&(t.$set(n,"progress",Math.floor(t.issueFirmwaresSuccessGwsnMap[e].downloaded_size/t.issueFirmwaresSuccessGwsnMap[e].total_size*10)/10*100),100==n.progress&&(s.push(e),s=Array.from(new Set(s))))}))};for(var r in t.issueFirmwaresSuccessGwsnMap)i(r);s.length==n&&t.websocket&&(t.$message.success(e.$t("gwsnSetting.batchSoftwareUpgradeSuccessful")),setTimeout((function(){if(t.dataList.forEach((function(e){t.$set(e,"progress",0)})),t.issueFirmwaresSuccessGwsnMap={},clearInterval(t.issueFirmwaresSuccessTimer),t.issueFirmwaresSuccessTimer=null,t.resname="",1==t.batchIssueFirmwaresForm.action){if(!t.$hasPermission("channelinfo:reProsBySn:permission.do"))return void t.$message.warning("暂无批量重启权限, 请联系管理员");t.$http.get("/info/channelinfo/reProsBySn.do",{params:{sns:t.gwsns.join(","),action:"reboot"}}).then((function(e){var s=e.data;if(0!=s.code)return t.$message.error(s.data||s.msg);t.$message.success(s.data||s.msg)}))}}),2e3),t.websocket.close(),t.websocket=null)}}),0),setTimeout((function(){if(t.websocket){t.dataList.forEach((function(e){t.$set(e,"progress",0)}));var n=t.getArrDifference(t.gwsns,s);if(n.length>0&&t.$message.error(n.join(",")+e.$t("gwsnSetting.upgradeSoftwareFailed")),t.issueFirmwaresSuccessGwsnMap={},t.websocket.close(),t.websocket=null,clearInterval(t.issueFirmwaresSuccessTimer),t.issueFirmwaresSuccessTimer=null,t.resname="",1==t.batchIssueFirmwaresForm.action){if(!t.$hasPermission("channelinfo:reProsBySn:permission.do"))return void t.$message.warning("暂无批量重启权限, 请联系管理员");t.$http.get("/info/channelinfo/reProsBySn.do",{params:{sns:s.join(","),action:"reboot"}}).then((function(e){var s=e.data;if(0!=s.code)return t.$message.error(s.data||s.msg);t.$message.success(s.data||s.msg)}))}}}),"15000"*n)},clickCancel:function(){this.resname="",this.websocket&&this.websocket.readyState===WebSocket.OPEN&&(this.websocket.close(),this.websocket=null),this.rebootOrRerun="",this.confirmVisible=!1},clickConfirmAndReboot:w()((function(){var e=this;e.confirmVisible=!1,e.rebootOrRerun="reboot",e.$hasPermission("DropDriversWebsocket:websocket")?e.createDriveWebSocket():e.$message.warning("暂无下载驱动权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1}),encryMD5List:function(){var e=this.$randomStrFun(),t=String(parseInt((new Date).getTime().toString().substring(0,10)));return this.$md5(e+t)+"/"+t},encryMD5ListSetname:function(){var e=this.$randomStrFun();return this.$md5(e)+"/"+String(parseInt((new Date).getTime().toString().substring(0,10)))},restartRerun:w()((function(){var e=this;e.confirmVisible=!1,e.rebootOrRerun="reRun",e.$hasPermission("DropDriversWebsocket:websocket")?e.createDriveWebSocket():e.$message.warning("暂无下载驱动权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1}),clickConfirm:w()((function(){var e=this;e.confirmVisible=!1,e.rebootOrRerun="notReboot",e.$hasPermission("DropDriversWebsocket:websocket")?e.createDriveWebSocket():e.$message.warning("暂无下载驱动权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1}),deleteHandle:w()((function(){var e=this,t={};if(0===e.gwsns.length)return e.$message.error(e.$t("deleteInfo.noData"));t["ids"]=e.ids,e.$hasPermission("info:gwbaseinfo:delete")?e.$confirm(e.$t("deleteInfo.noticeTitle"),e.$t("deleteInfo.noticePrompt"),{confirmButtonText:e.$t("deleteInfo.confirm"),cancelButtonText:e.$t("deleteInfo.cancel"),type:"warning"}).then((function(){e.$http.post("/info/gwbaseinfo/delete",c.a.stringify(t)).then((function(t){var s=t.data;if(0!=s.code)return e.$message.error(s.data||s.msg);e.$message.success(e.$t("deleteInfo.deleteSuccess")),e.getDataList()})).catch((function(t){return e.getDataList(),!1}))})).catch((function(e){})):e.$message.warning("暂无网关删除权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1}),createDriveWebSocket:function(){var e=this;if(!("WebSocket"in window))return e.$message.error(this.$t("websocket.notSupportWebsocket"));try{var t=window.SITE_CONFIG["socketUrl"]+"DropDriversWebsocket/"+e.gwsns.join(",")+"/"+e.encryMD5ListSetname()+"?token="+e.$getToken();e.websocketDrive=new WebSocket(t),e.initWebDriveSocket()}catch(s){return e.$message.warning(this.$t("gwsnSetting.notConnectedToWebsocket"))}},reDriveConnect:function(){var e=this;e.lockDriveReconnect||(e.recconectDriveTimer&&clearTimeout(e.recconectDriveTimer),e.recconectDriveTimer=setTimeout((function(){e.createDriveWebSocket()}),5e3))},initWebDriveSocket:function(){this.websocketDrive.onopen=this.websocketDriveonopen,this.websocketDrive.onerror=this.websocketDriveonerror,this.websocketDrive.onmessage=this.websocketDriveonmessage,this.websocketDrive.onclose=this.websocketDriveonclose},websocketDriveonopen:function(){var e=this;e.snDriveCodeArr=[],e.lockDriveReconnect=!0,setTimeout((function(){if(e.websocketDrive&&e.websocketDrive.readyState===WebSocket.OPEN){if(e.websocketDrive.close(),e.websocketDrive=null,e.wsUrl="issuePros/issue/"+e.gwsns.join(",")+"/"+e.encryMD5List(),!e.$hasPermission("issuePros:issue:websocket"))return void e.$message.warning("暂无下发权限, 请联系管理员");e.createWebSocket()}}),"15000"*e.gwsns.length)},websocketDriveonerror:function(e){this.lockDriveReconnect=!1},websocketDriveonmessage:function(e){if(!this.isJsonString(e.data))return!1;JSON.parse(e.data).hasOwnProperty("code")&&(this.snDriveCodeArr.push(JSON.parse(e.data).code),this.snDriveCodeArr.length==this.gwsns.length&&(this.websocketDrive&&(this.websocketDrive.close(),this.websocketDrive=null),this.wsUrl="issuePros/issue/"+this.gwsns.join(",")+"/"+this.encryMD5List(),this.createWebSocket()))},websocketDriveonclose:function(e){this.lockDriveReconnect=!1},createWebSocket:function(){var e=this,t="";if(!("WebSocket"in window))return e.$message.error(e.$t("websocket.notSupportWebsocket"));try{t=window.SITE_CONFIG["socketUrl"]+e.wsUrl+"?token="+e.$getToken(),e.websocket=new WebSocket(t),e.initWebSocket()}catch(s){}},initWebSocket:function(){this.websocket.onopen=this.websocketonopen,this.websocket.onerror=this.websocketonerror,this.websocket.onmessage=this.websocketonmessage,this.websocket.onclose=this.websocketonclose},websocketonopen:function(){var e=this;e.lockReconnect=!0,"downfile"==e.resname?(u["a"].$emit("aliyunTaskList",{type:"downfile",rebootOrRerun:e.rebootOrRerun,sns:e.gwsns,message:{},snDriveCodeArr:e.snDriveCodeArr}),setTimeout((function(){e.websocket&&(e.websocket.close(),e.websocket=null,e.multipeResult.downFileResult=!0)}),"15000"*e.gwsns.length)):"issueFirmware"==e.resname&&(u["a"].$emit("aliyunTaskList",{type:"upgrade",action:e.batchIssueFirmwaresForm.action,sns:e.gwsns,message:{}}),setTimeout((function(){e.websocket&&(e.websocket.close(),e.websocket=null,e.multipeResult.upgradeResult=!0)}),"15000"*e.gwsns.length),e.$http.get("/batchOper/exeuIssueFirmwares.do",{params:{sid:e.batchIssueFirmwaresForm.sid}}).then((function(t){var s=t.data;if(0!=s.code)return e.$message.error(s.data||s.msg)})).catch((function(e){return!1})))},websocketonerror:function(e){this.lockReconnect=!1},isJsonString:function(e){if("string"===typeof e)try{var t=JSON.parse(e);return!("object"!==Object(a["a"])(t)||!t)}catch(s){return!1}},websocketonmessage:function(e){if(!this.isJsonString(e.data))return!1;if("getpppinfo"==this.resname){this.websocket&&(this.websocket.close(),this.websocket=null);var t=JSON.parse(e.data).res_content;this.networkForm={online_minutes:t.online_minutes,net_stat:0==t.net_stat?this.$t("gwsn.notConnect"):1==t.net_stat?this.$t("gwsn.connecting"):2==t.net_stat?this.$t("gwsn.hasConnect"):"",sim_stat:0==t.sim_stat?this.$t("gwsn.notCard"):1==t.sim_stat?this.$t("gwsn.SIMReady"):2==t.sim_stat?this.$t("gwsn.SIMNotInit"):"",strength:t.strength,IMSI:t.IMSI,ICCID:t.ICCID,net_type:t.net_type,ppp_ip:t.ppp_ip,gateWay:t.DNS,LAC:"",cellId:"",RSRP:"",SINR:"",Model:t.Model,imei:t.imei,oper:t.oper},this.netWorkLoading=!1}else if("downfile"==this.resname){var s=JSON.parse(e.data).res_content;u["a"].$emit("aliyunTaskList",{type:"downfile",rebootOrRerun:this.rebootOrRerun,sns:this.gwsns,message:s,snDriveCodeArr:this.snDriveCodeArr})}else if("issueFirmware"==this.resname){var n=JSON.parse(e.data).res_content;u["a"].$emit("aliyunTaskList",{type:"upgrade",action:this.batchIssueFirmwaresForm.action,sns:this.gwsns,message:n})}else if("setname"==this.resname&&"setname"==JSON.parse(e.data).res_name){var i=JSON.parse(e.data).res_content.result;1===i?(this.websocket&&(this.websocket.close(),this.websocket=null),this.$message.success(this.$t("gwsnSetting.setDescSuccess"))):this.$message.error(this.$t("gwsnSetting.setDescFail"))}},websocketonclose:function(e){this.lockReconnect=!1},handleEvent:function(e){return!0===e.shiftKey&&18===e.keyCode&&e.ctrlKey?(this.isViewZuWang=!1,e.preventDefault(),e.returnValue=!1,!1):18===e.keyCode&&e.ctrlKey?(this.isViewZuWang=!0,e.preventDefault(),e.returnValue=!1,!1):void 0},resetExcelData:function(e){var t=this,s=[];this.dataList.forEach((function(e){var n={gwSn:e.sn||"",gwPwd:e.pwd||"",gwLastTime:e.gwLastTime||"",gwSimCsq:e.csq||"",gwDesc:e.gwDesc||t.$t("deviceData.Noneforthetimebeing"),prjName:e.prjName||t.$t("deviceData.Noneforthetimebeing"),gwModel:e.model||"",gwHardV:e.hardV||"",gwSoftV:e.softV||"",psubdevices:e.tagNum||0,gwBindSimIccid:e.iccid||"",mac:e.mac||"",createDate:e.createDate||"",creator:e.hasOwnProperty("cname")?e.cname:e.username||""};s.push(n)})),e(s)},handleExportExcel:w()((function(){var e=this;if(0==this.dataList.length)return this.$message.warning(this.$t("gwsn.thereIsCurrentlyNoDataAvailableForExport"));this.$confirm(this.$t("gwsn.doYouWantToContinueWithThePlaintextPasswordForThisOperation"),this.$t("prompt.title"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((function(){Promise.resolve().then(function(){e.resetExcelData((function(t){for(var s=[{label:e.$t("gwsn.number"),prop:"gwSn"},{label:e.$t("gwsn.gwsnPassword"),prop:"gwPwd"},{label:e.$t("gwsn.gwsnLastTime"),prop:"gwLastTime"},{label:e.$t("gwsn.signalValue"),prop:"gwSimCsq"},{label:e.$t("gwsn.gwsnNote"),prop:"gwDesc"},{label:e.$t("gwsn.belongProject"),prop:"prjName"},{label:e.$t("gwsn.gwsnModel"),prop:"gwModel"},{label:e.$t("gwsn.gwsnHardv"),prop:"gwHardV"},{label:e.$t("gwsn.gwsnsoftV"),prop:"gwSoftV"},{label:e.$t("gwsn.usedCount"),prop:"psubdevices"},{label:"ICCID",prop:"gwBindSimIccid"},{label:"MAC",prop:"mac"},{label:e.$t("gwsn.createTime"),prop:"createDate"},{label:e.$t("gwsn.creator"),prop:"creator"}],n=[],i=[],r=0;r<s.length;r++)n[r]=s[r].label,i[r]=s[r].prop;var o=n,a=i,l=t,c=e.formatJson(a,l);Object(k["a"])(o,c,e.$t("gatewayList")+"_"+(new Date).getTime())}))}.bind(null,s)).catch(s.oe)})).catch((function(){}))}),1e3,{leading:!0,trailing:!1}),handleSettingReservedSnChange:function(){var e=this;if(!e.settingReservedSnCount)return e.$message.warning(this.$t("gwsnSetting.pleaseEnterTheQuantityOfReservedGatewayNumbers"));e.$hasPermission("gwbaseinfo:setSn:permission.do")?e.$http.get("/conf/mqttUser/setSn.do",{params:{num:Number(e.settingReservedSnCount)}}).then((function(t){var s=t.data;if(0!=s.code)return e.$message.error(s.data||s.msg);e.settingReservedSnCountVisible=!1,e.$message.success(s.data)})):e.$message.warning("暂无设置预留网关编号权限, 请联系管理员")},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))})),t.map((function(t){return e.map((function(e){return t[e]}))}))},handleMultipeCopyProjectToGwsn:function(){return 0==this.gwsns.length?this.$message.warning(this.$t("gwsnSetting.pleaseSelectADataSourceForBatchOperations")):this.gwsns.length>10?this.$message.warning(this.$t("gwsn.batchCopyGatewayOperation")):void(this.$hasPermission("gwbaseinfo:copySns:permission.do")?(this.getAllGwsnDataList(),this.batchCopyProjectToGwsnForm.gwsns=this.gwsns.join(","),this.batchCopyProjectToGwsnForm.gwsn="",this.batchCopyProjectToGwsnVisible=!0):this.$message.warning("暂无批量复制网关权限, 请联系管理员"))},handleMultipeOfflineDownloadProjectToGwsn:function(){this.offlineissuedVisible=!0,this.offlineissuedContent=this.$t("gwsn.areYouSureToIssueTheGatewayProject")},handleOfflineCancel:function(){this.offlineissuedVisible=!1},handleOfflineConfirmAndReboot:w()((function(){var e=this,t=this,s=[];t.gwsns.forEach((function(e){s.push({action:1,sn:e})})),t.$hasPermission("offlineIssue:insert:permission.do")?t.$http.post("/offlineIssue/insert.do",s).then((function(s){var n=s.data;if(0!=n.code)return t.$message.error(n.data||n.msg);t.offlineissuedVisible=!1,t.offlineDialogVisible=!1,t.$message.success(e.$t("gwsn.savedToScheduledTask"))})).catch((function(e){return!1})):t.$message.warning("暂无批量离线下发权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1}),handleOfflineRestartRerun:w()((function(){var e=this,t=this,s=[];t.gwsns.forEach((function(e){s.push({action:0,sn:e})})),t.$hasPermission("offlineIssue:insert:permission.do")?t.$http.post("/offlineIssue/insert.do",s).then((function(s){var n=s.data;if(0!=n.code)return t.$message.error(n.data||n.msg);t.offlineissuedVisible=!1,t.offlineDialogVisible=!1,t.$message.success(e.$t("gwsn.savedToScheduledTask"))})).catch((function(e){return!1})):t.$message.warning("暂无批量离线下发权限, 请联系管理员")}),1e3,{leading:!0,trailing:!1}),handleBatchCopyProjectToGwsnClose:function(){this.$refs["batchCopyProjectToGwsnForm"].resetFields(),this.batchCopyProjectToGwsnVisible=!1},handleBatchCopyProjectToGwsnFormSubmit:function(){var e=this,t={sns:e.batchCopyProjectToGwsnForm.gwsns,gwsn:e.batchCopyProjectToGwsnForm.gwsn};e.$refs["batchCopyProjectToGwsnForm"].validate((function(s){if(!s)return!1;e.$hasPermission("gwbaseinfo:copySns:permission.do")?e.$confirm(e.$t("gwsnSetting.copyDataContent"),e.$t("gwsnSetting.prompt"),{confirmButtonText:e.$t("confirm"),cancelButtonText:e.$t("cancel"),type:"warning"}).then((function(){e.batchCopyProjectToGwsnLoading=!0,e.$http.post("/info/gwbaseinfo/copySns.do",c.a.stringify(t)).then((function(t){var s=t.data;if(0!=s.code)return e.batchCopyProjectToGwsnLoading=!1,e.$message.error(s.data||s.msg);e.batchCopyProjectToGwsnLoading=!1,e.$message.success(e.$t("prompt.success")),e.batchCopyProjectToGwsnVisible=!1})).catch((function(t){return e.batchCopyProjectToGwsnLoading=!1,!1}))})).catch((function(e){})):e.$message.warning("暂无批量复制网关数据权限, 请联系管理员")}))},handlePrjScroll:function(){this.prjList.length<this.prjInfo.total&&(this.prjInfo.page++,this.getPrjNameList())},handleGwsnScroll:function(){this.allGwsnList.length<this.gwsnInfo.total&&(this.gwsnInfo.page++,this.getAllGwsnDataList())},watchPrjSearch:w()((function(){var e=document.getElementsByClassName("el-scrollbar__wrap").length;document.getElementsByClassName("el-scrollbar__wrap")[e-1].scrollTo(0,0),this.prjInfo.page=1,this.getPrjNameList(),this.$refs.prjInput.focus()}),500),watchGwsnSearch:w()((function(){var e=document.getElementsByClassName("el-scrollbar__wrap").length;document.getElementsByClassName("el-scrollbar__wrap")[e-1].scrollTo(0,0),this.gwsnInfo.page=1,this.getAllGwsnDataList(),this.$refs.gwsnInput.focus()}),500)}),"created",(function(){this.page=Number(sessionStorage.getItem("page9"))||1,this.limit=Number(sessionStorage.getItem("limit9"))||20})),"mounted",function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.currentUserId=this.$store.state.user.id,e.next=1,this.getPrjNameList();case 1:if("{}"!==JSON.stringify(this.$route.query)){e.next=2;break}return e.next=2,this.getDataList();case 2:document.addEventListener("keydown",this.handleEvent),window.onresize=function(){return function(){t.scrollTableHeight=window.innerHeight-220-53}()},window.onbeforeunload=function(e){this.timer&&(clearInterval(this.timer),this.timer=null)};case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()),"beforeDestroy",(function(){document.removeEventListener("keydown",this.handleEvent)})),"activated",(function(){var e=this;this.dataForm.checked&&(this.timer=setInterval((function(){e.storeInterValTime>0?e.storeInterValTime--:(e.getDataList(),e.storeInterValTime=e.dataForm.intervalTime)}),1e3)),"{}"!==JSON.stringify(this.$route.query)&&(this.dataForm.gwsn=this.$route.query.gwsn,this.getDataList())})),"deactivated",(function(){this.timer&&(clearInterval(this.timer),this.timer=null)})),"watch",{total:function(){this.total==(this.page-1)*this.limit&&0!=this.total&&(this.page-=1,sessionStorage.setItem("page9",this.page),this.getDataList())},prjSearch:function(e,t){this.watchPrjSearch()},gwsnSearch:function(e,t){this.watchGwsnSearch()},multipeResult:{handler:function(e,t){this.multipeResult=e,(this.multipeResult.downFileResult||this.multipeResult.upgradeResult)&&this.websocket&&this.websocket.readyState===WebSocket.OPEN&&(this.websocket.close(),this.websocket=null)},immediate:!0,deep:!0}}),y=S,F=(s("042dc"),s("2877")),I=Object(F["a"])(y,n,i,!1,null,"abf4548e",null);t["default"]=I.exports},"6b62":function(e,t,s){}}]);