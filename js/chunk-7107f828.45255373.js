(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7107f828"],{e1a5:function(e,t,n){"use strict";n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("8e6e"),n("ac6a"),n("456d"),n("4917"),n("6762"),n("2fdb"),n("a481");var i=n("ade3"),o=n("a78e"),a=n.n(o),r=n("4328"),l=n.n(r),s=n("b047"),c=n.n(s);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw a}}}}function d(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=["/channelinfo","/deviceinfo","/taginfo","/transchannelinfo","/transdeviceinfo","/transtaginfo","/centervar","/scriptinfo","/integralmodule"];t["a"]={data:function(){return{ids:"",exportIds:null,mixinViewModuleOptions:{activatedIsNeed:!0,getDataListURL:"",getDataListIsPage:!1,deleteURL:"",deleteIsBatch:!1,deleteIsBatchKey:"id",exportURL:""},dataForm:{},dataList:[],order:"",orderField:"",page:1,limit:20,total:0,dataListLoading:!1,dataListSelections:[],addOrUpdateVisible:!1,storeselection:[]}},activated:function(){this.mixinViewModuleOptions.activatedIsNeed&&this.getDataList()},methods:{getDataList:function(){var e=this;this.dataListLoading=!0,this.$http.get(this.mixinViewModuleOptions.getDataListURL,{params:p({order:this.order,orderField:this.orderField,page:this.mixinViewModuleOptions.getDataListIsPage?this.page:null,limit:this.mixinViewModuleOptions.getDataListIsPage?this.limit:null},this.dataForm)}).then((function(t){var n=t.data;if(e.dataListLoading=!1,0!==n.code)return e.dataList=[],e.total=0,e.$message.error(n.msg);e.dataList=(e.mixinViewModuleOptions.getDataListIsPage,Array.isArray(n.data)?n.data:n.data.list),e.total=e.mixinViewModuleOptions.getDataListIsPage?n.data.total:0})).catch((function(t){return e.dataListLoading=!1,!1}))},dataListSelectionChangeHandle:function(e){this.storeselection=[],this.dataListSelections=e;var t,n=h(this.dataListSelections);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.storeselection.push(i.id)}}catch(o){n.e(o)}finally{n.f()}this.ids=this.storeselection.join(","),this.$store.dispatch("changeIds",this.ids)},dataListSortChangeHandle:function(e){if(!e.order||!e.prop)return this.order="",this.orderField="",!1;this.order=e.order.replace(/ending$/,""),this.orderField=e.prop.replace(/([A-Z])/g,"_$1").toLowerCase(),this.getDataList()},pageSizeChangeHandle:function(e){this.page=1,this.limit=e,this.getDataList()},pageCurrentChangeHandle:function(e){this.page=e,this.getDataList()},addOrUpdateHandle:function(e){var t=this,n=!1;g.forEach((function(e){window.location.href.includes(e)&&(n=!0)})),n?this.$hasSessionStorageGwsn()?(this.addOrUpdateVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdate.dataForm.id=e,t.$refs.addOrUpdate.init()}))):this.$message({showClose:!1,message:"未获取到网关编号",type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),t.$router.replace({path:"/tgw-tgwinfo"})}}):(this.addOrUpdateVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdate.dataForm.id=e,t.$refs.addOrUpdate.init()})))},deleteHandle:c()((function(e){var t=this;if(this.mixinViewModuleOptions.deleteIsBatch&&!e&&this.dataListSelections.length<=0)return this.$message.warning(this.$t("prompt.deleteBatch"));this.$confirm(this.$t("prompt.info",{handle:this.$t("delete")}),this.$t("prompt.title"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((function(){t.dataListLoading=!0,t.$http.delete("".concat(t.mixinViewModuleOptions.deleteURL).concat(t.mixinViewModuleOptions.deleteIsBatch?"":"/"+e),t.mixinViewModuleOptions.deleteIsBatch?{data:e?[e]:t.dataListSelections.map((function(e){return e[t.mixinViewModuleOptions.deleteIsBatchKey]}))}:{}).then((function(e){var n=e.data;if(0!==n.code)return t.dataListLoading=!1,t.$message.error(n.msg);t.$message({message:t.$t("prompt.success"),type:"success",duration:500,onClose:function(){t.getDataList()}})})).catch((function(e){return t.dataListLoading=!1,!1}))})).catch((function(e){}))}),1e3,{leading:!0,trailing:!1}),postExcelFile:function(e,t){var n=document.createElement("form");for(var i in n.style.display="none",n.action=t,n.method="post",document.body.appendChild(n),e){var o=document.createElement("input");o.type="hidden",o.name=i,o.value=e[i],n.appendChild(o)}n.submit(),n.remove()},exportHandle:c()((function(){var e=!1,t={token:a.a.get("token"),ids:null};if(this.exportIds&&(t.ids=this.exportIds,e=!0),this.ids&&(t.ids=this.ids,e=!0),"/info/taginfo/exports"==this.mixinViewModuleOptions.exportURL||"/info/transtaginfo/exportss"==this.mixinViewModuleOptions.exportURL)return t.ids=this.exportIds,"/info/taginfo/exports"==this.mixinViewModuleOptions.exportURL&&-1!=window.location.href.indexOf("/taginfo")&&(t.devtype=window.devTagType),this.$message.success(this.$t("exportData.exportSuccess")),this.postExcelFile(t,"".concat(window.SITE_CONFIG["apiURL"]).concat(this.mixinViewModuleOptions.exportURL));"/sys/log/login/export"!=this.mixinViewModuleOptions.exportURL&&"/sys/log/operation/export"!=this.mixinViewModuleOptions.exportURL&&"/sys/log/error/export"!=this.mixinViewModuleOptions.exportURL||(e=!0);var n=l.a.stringify(t);if(!e)return this.$message.info(this.$t("exportData.noExportData"));var i=this,o="".concat(window.SITE_CONFIG["apiURL"]).concat(this.mixinViewModuleOptions.exportURL,"?").concat(n),r=new XMLHttpRequest;r.open("get",o),r.responseType="blob",r.send(),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var e=i.browserType();if("ie"!==e.browser||"10.0"!=e.version&&"11.0"!=e.version)if("chrome"===e.browser){window.URL.createObjectURL(this.response),t=document.createElement("iframe");t.src="".concat(window.SITE_CONFIG["apiURL"]).concat(i.mixinViewModuleOptions.exportURL,"?").concat(n),t.style.display="none",document.body.appendChild(t)}else window.location.href="".concat(window.SITE_CONFIG["apiURL"]).concat(i.mixinViewModuleOptions.exportURL,"?").concat(n);else{window.URL.createObjectURL(this.response);var t=document.createElement("iframe");t.src="".concat(window.SITE_CONFIG["apiURL"]).concat(i.mixinViewModuleOptions.exportURL,"?").concat(n),t.style.display="none",document.body.appendChild(t)}return i.$message.success(i.$t("exportData.exportSuccess"))}}}),1e3,{leading:!0,trailing:!1}),browserType:function(){var e=navigator.userAgent.toLowerCase(),t={ie:function(){return!(!window.ActiveXObject&&!("ActiveXObject"in window))},edge:function(){return/dge/.test(e)},chrome:function(){return/chrome/.test(e)},safari:function(){return/safari/.test(e)&&!/chrome/.test(e)},opera:function(){return/opera/.test(e)},msie:function(){return/msie/.test(e)&&!/opera/.test(e)},mozilla:function(){return/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)}},n={};for(var i in t){var o=t[i](),a=(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1];if(o)return n.browser=i,n.version=a,n}}}}},f3a1:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("section",[t("div",{attrs:{id:"transChannelQueryContainer"}},[t("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querySearch()}}},[t("el-form-item",{attrs:{label:e.$t("channelInfo.chlname")}},[t("el-input",{attrs:{size:"small",placeholder:e.$t("channelInfo.enterChannelname"),clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.chlname,callback:function(t){e.$set(e.dataForm,"chlname",t)},expression:"dataForm.chlname"}})],1),e.$hasPermission("channelinfo:info:selectlist:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:function(t){return e.querySearch()}}},[e._v(e._s(e.$t("query")))])],1):e._e(),e.$hasPermission("channelinfo:insertAdd:permission.do")&&e.isShowSetting?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("\n                    "+e._s(e.$t("add"))+"\n                ")])],1):e._e(),e.$hasPermission("channelinfo:info:updateList:permission.do")&&e.isShowSetting?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit",disabled:0===e.childs.length||0===e.dataList.length},on:{click:e.handleEditAllChange}},[e._v("\n                    "+e._s(e.$t("deviceInfo.editMultiple"))+"\n                ")])],1):e._e(),e.$hasPermission("transchannel:delete:permission.do")&&e.isShowSetting?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",disabled:0===e.childs.length||0===e.dataList.length},on:{click:function(t){return e.deleteHandle()}}},[e._v(e._s(e.$t("deleteBatch"))+" ")])],1):e._e(),e.$hasPermission("channelinfo:export:permission.do")&&e.isShowSetting?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download",disabled:0===e.childs.length||0===e.dataList.length},on:{click:function(t){return e.exportHandle()}}},[e._v(e._s(e.$t("export"))+" ")])],1):e._e(),e.$hasPermission("channelinfo:copyTransChl:permission.do")&&e.isShowSetting?t("el-form-item",[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("channelInfo.pleaseSelectChannelDataSourceToCopy"),placement:"top"}},[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-copy-document"},on:{click:function(t){return e.handleCopyChannel()}}},[e._v("\n                        "+e._s(e.$t("copy"))+"\n                    ")])],1)],1):e._e(),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-setting",disabled:1!=e.childs.length||0===e.dataList.length},on:{click:function(t){return e.protocolParameterSetting()}}},[e._v("\n                    "+e._s(e.$t("channelInfo.protocolFeatureConfig"))+"\n                ")])],1),e.$hasPermission("channelinfo:updateDevicesChlId:permission.do")&&e.isShowSetting?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-bangzhu"},on:{click:function(t){return e.handleChannelMergeChange()}}},[e._v("\n                    "+e._s(e.$t("channelInfo.channelMerge"))+"\n                ")])],1):e._e(),e.$hasPermission("channelinfo:info:selectlist:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getDataList}},[t("i",{staticClass:"el-icon-refresh"})])],1):e._e(),e.$hasPermission("channelinfo:selectChannelByGwsnAndChltype:permission.do")?t("el-form-item",[t("el-checkbox",{attrs:{size:"small"},on:{change:e.allCheckEvent},model:{value:e.allCheck,callback:function(t){e.allCheck=t},expression:"allCheck"}},[e._v(e._s(e.$t("channelInfo.continueCheckedAll"))+" ")])],1):e._e()],1)],1),e.scrollTableHeight?t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],ref:"recordTable",staticStyle:{width:"100%"},attrs:{size:"mini",data:e.dataList,border:"","max-height":e.scrollTableHeight,"row-key":e.getRowKey,"default-sort":{prop:"id",order:"ascending"}},on:{"select-all":e.selectAll,"selection-change":e.dataListSelectionHandle,"sort-change":e.sortChange}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50","reserve-selection":!0,selectable:e.checkSelectable}}),t("el-table-column",{attrs:{prop:"id",label:e.$t("channelInfo.channelId"),"header-align":"center",align:"center","show-overflow-tooltip":!0,width:"90",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.chlid)+"\n                ")]}}],null,!1,39279959)}),t("el-table-column",{attrs:{prop:"chlname",label:e.$t("channelInfo.chlname"),"header-align":"center",align:"center",width:"200","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"chladdr",label:e.$t("channelInfo.chladdr"),"header-align":"center",align:"center",width:"120"}}),t("el-table-column",{attrs:{prop:"chltype",label:e.$t("channelInfo.chltype"),"header-align":"center",align:"center",formatter:e.formatter,width:"120"}}),t("el-table-column",{attrs:{prop:"chlprotocol",label:e.$t("channelInfo.chlprotocol"),"header-align":"center","min-width":"160","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.chlprotocol&&e.formatterGuid(n.row)?t("div",[t("i",{staticClass:"el-icon-setting",style:{cursor:"pointer",color:0==n.row.psetC?"#999":"#FF7F50"},on:{click:function(t){return e.handleProtocolParameterSetting(n.row)}}}),t("span",{staticStyle:{"margin-left":"5px"},domProps:{innerHTML:e._s(e.formatterGuid(n.row))}})]):e._e()]}}],null,!1,1968761754)}),t("el-table-column",{attrs:{prop:"chlmasterparam",label:e.$t("channelInfo.mainChannelParams"),"header-align":"center",align:"center",formatter:e.formattermaster,"min-width":"290","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"chlcoltfrq",label:e.$t("channelInfo.chlcoltfrq"),"header-align":"center",align:"center",width:"130"}}),t("el-table-column",{attrs:{prop:"chlcoltfrmstopms",label:e.$t("channelInfo.chlcoltfrmstopms"),"header-align":"center",align:"center",width:"120"}}),t("el-table-column",{attrs:{prop:"valid",label:e.$t("valid"),"header-align":"center",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tag",{attrs:{size:"small",type:2==n.row.valid?"danger":"success"}},[e._v("\n                        "+e._s(2==n.row.valid?e.$t("no"):e.$t("yes"))+"\n                    ")])]}}],null,!1,243820786)}),t("el-table-column",{attrs:{prop:"chlcomment",label:e.$t("channelInfo.chlcomment"),"header-align":"center",align:"center",width:"200","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.chlcomment||e.$t("attribute.noContent")))])]}}],null,!1,3595499577)}),t("el-table-column",{attrs:{label:e.$t("handle"),fixed:"right","header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.chlManage(n.$index,n.row)}}},[e._v(e._s(e.$t("channelInfo.transDeviceManage"))+" ")]),e.$hasPermission("channelinfo:info:update:permission.do")&&e.isShowSetting?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.addOrUpdateHandle(n.row.id)}}},[e._v(e._s(e.$t("update"))+" ")]):e._e(),e.$hasPermission("transchannel:delete:permission.do")&&e.isShowSetting?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteHandle(n.row.id)}}},[e._v(e._s(e.$t("delete"))+" ")]):e._e()]}}],null,!1,2214843466)})],1),t("el-pagination",{staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{"current-page":e.page,"page-sizes":[20,50,100,200],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.pageSizeChangeHandle,"current-change":e.pageCurrentChangeHandle}})],1):e._e(),e.addOrUpdateVisible?t("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e(),t("el-dialog",{attrs:{visible:e.protocolSettingVisible,title:e.$t("channelInfo.protocolFeatureConfig")+e.$t("channelInfo.channel")+e.protocolSettingForm.chlname+" "+e.$t("channelInfo.protocol")+e.protocolSettingForm.chlprotocolName+")","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleProtocolSettingClose},on:{"update:visible":function(t){e.protocolSettingVisible=t}}},[t("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[e.isShowSetting&&e.$hasPermission("protocolSetattr:insert:permission.do")?t("el-button",{on:{click:e.handleResetSetting}},[e._v(e._s(e.$t("channelInfo.resetDefault")))]):e._e(),e.showCopyUniqueCode?t("el-button",{staticClass:"getTransUniqueCode",attrs:{type:"primary"},on:{click:e.handleGetUniqueCode}},[e._v(e._s(e.$t("channelInfo.getUniqueCode")))]):e._e()],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.protocolSettingFormLoading,expression:"protocolSettingFormLoading"}],key:Math.random(),ref:"protocolSettingTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{size:"mini",border:"",data:e.protocolSettingDescList,"max-height":"400"}},[t("el-table-column",{attrs:{prop:"fno",label:e.$t("channelInfo.orderNumber"),align:"center",width:"50"}}),t("el-table-column",{attrs:{prop:"fdesc",label:e.$t("channelInfo.paramsDesc"),align:"center","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{property:"fdataflag",label:e.$t("channelInfo.paramsType"),align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-select",{staticStyle:{width:"100px"},attrs:{disabled:!!n.row.foptions,filterable:"",size:"mini",placeholder:e.$t("channelInfo.pleaseSelect")},model:{value:n.row.fdataflag,callback:function(t){e.$set(n.row,"fdataflag",t)},expression:"scope.row.fdataflag"}},e._l(e.fdataflagList,(function(e,n){return t("el-option",{key:n,attrs:{label:e.label,value:e.value}})})),1)]}}])}),t("el-table-column",{attrs:{property:"fvalue",label:e.$t("channelInfo.paramsValue"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.foptions?t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"mini",placeholder:e.$t("channelInfo.pleaseSelect")},model:{value:n.row.fvalue,callback:function(t){e.$set(n.row,"fvalue",t)},expression:"scope.row.fvalue"}},e._l(JSON.parse(n.row.foptions),(function(e,n){return t("el-option",{key:n,attrs:{label:e.desc,value:e.value}})})),1):t("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini"},model:{value:n.row.fvalue,callback:function(t){e.$set(n.row,"fvalue",t)},expression:"scope.row.fvalue"}})]}}])})],1),e.isShowSetting&&e.$hasPermission("protocolSetattr:insert:permission.do")?t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleProtocolSettingClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.protocolSettingFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1):e._e()],2),t("el-dialog",{attrs:{visible:e.copyChannelVisible,title:e.$t("channelInfo.copyChannel"),"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleCopyChannelClose},on:{"update:visible":function(t){e.copyChannelVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.copyChannelFormloading,expression:"copyChannelFormloading"}],ref:"copyChannelForm",attrs:{model:e.copyChannelForm,rules:e.copyChannelRules,"label-width":(e.$i18n.locale,"140px")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.copyChannelFormSubmitHandle()}}},[t("el-row",[t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{label:e.$t("channelInfo.channelNamePrefixAfterCopying"),prop:"chlname"}},[t("el-input",{ref:"chlname",attrs:{placeholder:e.$t("channelInfo.pleaseEnterChannelNamePrefixAfterCopying"),maxlength:48},model:{value:e.copyChannelForm.chlname,callback:function(t){e.$set(e.copyChannelForm,"chlname","string"===typeof t?t.trim():t)},expression:"copyChannelForm.chlname"}})],1)],1),t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{label:e.$t("channelInfo.deviceNamePrefixAfterCopying"),prop:"devname"}},[t("el-input",{ref:"devname",attrs:{placeholder:e.$t("channelInfo.pleaseEnterDeviceNamePrefixAfterCopying"),maxlength:48},model:{value:e.copyChannelForm.devname,callback:function(t){e.$set(e.copyChannelForm,"devname","string"===typeof t?t.trim():t)},expression:"copyChannelForm.devname"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{xl:12,md:12,sm:24}},[t("el-form-item",{attrs:{label:e.$t("channelInfo.copyCount"),prop:"copyCount"}},[t("el-input",{attrs:{placeholder:e.$t("channelInfo.pleaseEnterCopyCount"),onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onpaste:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))"},model:{value:e.copyChannelForm.copyCount,callback:function(t){e.$set(e.copyChannelForm,"copyCount",t)},expression:"copyChannelForm.copyCount"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleCopyChannelClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.copyChannelFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2),t("el-dialog",{attrs:{visible:e.mergeChannelVisible,title:e.$t("channelInfo.channelMerging"),"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleChannelMergeClose},on:{"update:visible":function(t){e.mergeChannelVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.mergeChannelFormloading,expression:"mergeChannelFormloading"}],ref:"mergeChannelForm",attrs:{model:e.mergeChannelForm,rules:e.mergeChannelRules,"label-width":(e.$i18n.locale,"120px")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleChannelMergeSubmit()}}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("channelInfo.targetChannel"),prop:"chlId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("select")},on:{change:e.hanleMergeChlIdChanage},model:{value:e.mergeChannelForm.chlId,callback:function(t){e.$set(e.mergeChannelForm,"chlId",t)},expression:"mergeChannelForm.chlId"}},e._l(e.mergeTargetChannelList,(function(e){return t("el-option",{key:e.chlID,attrs:{label:e.chlName,value:e.chlID}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("channelInfo.channelsToBeMerged"),prop:"mergeIds"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:e.$t("select")},on:{change:e.handleRepairMergeChannelChange},model:{value:e.mergeChannelForm.mergeIds,callback:function(t){e.$set(e.mergeChannelForm,"mergeIds",t)},expression:"mergeChannelForm.mergeIds"}},[e.repairMergeChannelList.length>0?t("el-option",{attrs:{label:e.$t("all"),value:"all"},nativeOn:{click:function(t){return e.selectAllMergeChannel.apply(null,arguments)}}}):e._e(),e._l(e.repairMergeChannelList,(function(e){return t("el-option",{key:e.chlID,attrs:{label:e.chlName,value:e.chlID}})}))],2)],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleChannelMergeClose}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleChannelMergeSubmit()}}},[e._v(e._s(e.$t("confirm")))])],1)],2),t("el-dialog",{attrs:{title:e.$t("deviceInfo.editMultiple"),"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editAllVisible},on:{"update:visible":function(t){e.editAllVisible=t}}},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editAllRules,"label-width":(e.$i18n.locale,"120px")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmitHandle()}}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.editType"),prop:"type"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:e.$t("deviceInfo.pleaseSelect")},on:{change:e.handleSelectTypeChange},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},e._l(e.editTypeLists,(function(e,n){return t("el-option",{key:n,attrs:{label:e.label,value:e.value}})})),1)],1)],1),"chlname"==e.editForm.type||"chlcomment"===e.editForm.type?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.prefix"),prop:"pre"}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.pleaseEnterPrefix")},model:{value:e.editForm.pre,callback:function(t){e.$set(e.editForm,"pre",t)},expression:"editForm.pre"}})],1)],1):e._e(),"chlname"==e.editForm.type||"chlcomment"===e.editForm.type?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.startValue"),prop:"fex"}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.pleaseEnterStartingValue")},model:{value:e.editForm.fex,callback:function(t){e.$set(e.editForm,"fex",e._n(t))},expression:"editForm.fex"}})],1)],1):e._e(),"chladdr"==e.editForm.type?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.startValue"),prop:"startValue",rules:"chladdr"===this.editForm.type?e.editAllRules.startValue:[{required:!1,message:e.$t("validate.required"),trigger:"change"}]}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.startValue")},model:{value:e.editForm.startValue,callback:function(t){e.$set(e.editForm,"startValue",t)},expression:"editForm.startValue"}})],1)],1):e._e(),"chlprotocol"==e.editForm.type?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("channelInfo.chlprotocol"),prop:"chlprotocol"}},[t("el-cascader",{key:e.refreshItem,attrs:{options:e.options,"show-all-levels":!1,filterable:"","filter-method":e.dataFilter},on:{change:e.handleChlpro},model:{value:e.editForm.chlprotocol,callback:function(t){e.$set(e.editForm,"chlprotocol",t)},expression:"editForm.chlprotocol"}})],1)],1):e._e(),"chlcoltfrq"==e.editForm.type?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("channelInfo.chlcoltfrq"),prop:"chlcoltfrq"}},[t("el-input",{attrs:{placeholder:e.$t("channelInfo.chlcoltfrq"),maxlength:10,clearable:""},model:{value:e.editForm.chlcoltfrq,callback:function(t){e.$set(e.editForm,"chlcoltfrq",t)},expression:"editForm.chlcoltfrq"}})],1)],1):e._e(),"chlcoltfrmstopms"==e.editForm.type?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("channelInfo.chlcoltfrmstopms"),prop:"chlcoltfrmstopms"}},[t("el-input",{attrs:{placeholder:e.$t("channelInfo.chlcoltfrmstopms"),maxlength:10,clearable:""},model:{value:e.editForm.chlcoltfrmstopms,callback:function(t){e.$set(e.editForm,"chlcoltfrmstopms",t)},expression:"editForm.chlcoltfrmstopms"}})],1)],1):e._e(),"valid"==e.editForm.type?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"通道有效性",prop:"changeValue"}},[t("el-radio-group",{model:{value:e.editForm.changeValue,callback:function(t){e.$set(e.editForm,"changeValue",t)},expression:"editForm.changeValue"}},[t("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("yes")))]),t("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("no")))])],1)],1)],1):e._e()],1),t("el-row",["chladdr"==e.editForm.type?t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:e.$t("deviceInfo.step"),prop:"step",rules:"chladdr"===this.editForm.type?e.editAllRules.step:[{required:!1,message:e.$t("validate.required"),trigger:"change"}]}},[t("el-input",{attrs:{placeholder:e.$t("deviceInfo.step")},model:{value:e.editForm.step,callback:function(t){e.$set(e.editForm,"step",t)},expression:"editForm.step"}})],1)],1):e._e()],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:function(t){e.editAllVisible=!1}}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)],1)},o=[],a=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("96cf"),n("1da1")),r=(n("6762"),n("2fdb"),n("55dd"),n("7514"),n("7f7f"),n("ac6a"),n("c5f6"),n("a481"),n("b311")),l=n.n(r),s=n("9dce"),c=n("b047"),h=n.n(c),d=n("e1a5"),u=n("d3e0");function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw a}}}}function p(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var m={mixins:[d["a"]],data:function(){var e=this;return{isShowSetting:!1,page:1,limit:20,total:0,ids:null,allCheck:!1,exportIds:null,dataListLoading:!1,dataList:[],childs:[],copyObj:{},copyList:[],selectedChlInfo:{},protocolSetted:[],currentPageCheccked:!1,showCopyUniqueCode:!1,protocolSettingFormLoading:!1,protocolSettingVisible:!1,multipleSelectionChlId:[],multipleSelectionAll:[],deleteIds:[],guidList:[],dataForm:{chlname:""},protocolSettingForm:{gwSn:"",chlId:"",fpno:"",chlname:"",fname:"",chlprotocolName:""},protocolSettingDescList:[],fdataflagList:[{label:this.$t("channelInfo.hexadecimal"),value:16},{label:this.$t("channelInfo.decimalsystem"),value:10},{label:this.$t("channelInfo.string"),value:0}],scrollTableHeight:0,mixinViewModuleOptions:{exportURL:"/info/channelinfo/exports"},copyChannelVisible:!1,copyChannelFormloading:!1,copyChannelForm:{chlname:"",devname:"",copyCount:1},copyChannelRules:{copyCount:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},mergeChannelVisible:!1,mergeChannelFormloading:!1,mergeChannelForm:{mergeIds:[],chlId:""},mergeChannelList:[],repairMergeChannelList:[],mergeTargetChannelList:[],mergeChannelRules:{mergeIds:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],chlId:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},refreshItem:0,options:[],editAllVisible:!1,editForm:{type:"chladdr",startValue:0,step:1,changeValue:"",pre:"",fex:"",chlprotocol:null,chlcoltfrmstopms:"500",chlcoltfrq:"300"},editTypeLists:[{label:"通道名称",value:"chlname"},{label:"通道描述",value:"chlcomment"},{label:"通道地址",value:"chladdr"},{label:"协议名称",value:"chlprotocol"},{label:"交互频率(ms)",value:"chlcoltfrq"},{label:"每帧间隔(ms)",value:"chlcoltfrmstopms"},{label:this.$t("valid"),value:"valid"}],editAllRules:{type:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],fex:[{pattern:/^[0-9]\d*/,message:this.$t("deviceInfo.enterInt")}],startValue:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],step:[{required:!0,message:this.$t("validate.required"),trigger:"change"},{validator:function(t,n,i){if(n){var o=/^[-]?[0-9]\d*$/;o.test(n)?i():i(new Error(e.$t("deviceInfo.enterInt")))}},trigger:"change"}],changeValue:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],chlprotocol:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],chlcoltfrq:[{required:!0,message:this.$t("validate.required"),trigger:"change"}],chlcoltfrmstopms:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]}}},components:{AddOrUpdate:u["default"]},methods:{pageSizeChangeHandle:function(e){this.page=1,this.limit=e,this.getDataList(),sessionStorage.setItem("limit3",this.limit),sessionStorage.setItem("page3",this.page)},pageCurrentChangeHandle:function(e){this.page=e,this.getDataList(),sessionStorage.setItem("page3",this.page)},querySearch:function(){var e=this;this.$hasSessionStorageGwsn()?(this.page=1,this.getDataList()):this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})},sortChange:function(e,t,n){this.getDataList()},getDataList:h()((function(){var e=this;if(this.$hasSessionStorageGwsn()){var t={chltype:1,page:this.page,limit:this.limit,gwsn:sessionStorage.getItem("gwsn")};if(this.dataForm.chlname&&(t["chlname"]=this.dataForm.chlname.replace(/_/g,"\\_").replace(/%/g,"\\%")),this.total=0,this.dataList=[],!this.$hasPermission("channelinfo:info:selectlist:permission.do"))return void setTimeout((function(){e.$message.warning("暂无转发通道查询权限, 请联系管理员")}),500);this.dataListLoading=!0,this.$http.get("/info/channelinfo/channelist",{params:t}).then((function(n){var i=n.data;e.page=t.page,e.dataListLoading=!1,e.dataList=i.list||[],e.total=Number(i.total)||0,e.$nextTick((function(){if(e.dataList.length>0){if(e.currentPageCheccked&&!e.allCheck){e.$refs.recordTable&&e.$refs.recordTable.clearSelection();var t=[];e.childs=[],e.deleteIds=[],e.multipleSelectionAll=[],e.multipleSelectionChlId=[],e.dataList.forEach((function(n){e.childs.push(n.id),t.push(n.chlid),e.deleteIds.push(n.id),e.multipleSelectionAll.push(n.id),e.multipleSelectionChlId.push(n.chlid),e.ids=e.childs.join(","),e.$store.dispatch("changeIds",t.join(","))})),e.exportIds=e.childs.join(","),e.$store.dispatch("changeExportIds",e.exportIds),e.dataList.forEach((function(t){e.$refs.recordTable&&e.$refs.recordTable.toggleRowSelection(t,!0)}))}if(!e.currentPageCheccked&&!e.allCheck&&e.multipleSelectionAll.length>0){e.childs=[],e.deleteIds=[],e.multipleSelectionChlId=[];var n=!1,i=[];e.dataList.forEach((function(t){var n=e.multipleSelectionAll.length>0&&-1!==e.multipleSelectionAll.indexOf(t.id);n&&(e.childs.push(t.id),i.push(t.chlid),e.deleteIds.push(t.id),e.ids=e.childs.join(","),e.multipleSelectionChlId.push(t.chlid),e.$store.dispatch("changeIds",i.join(",")))})),e.exportIds=e.childs.join(","),e.$store.dispatch("changeExportIds",e.exportIds),e.multipleSelectionAll.forEach((function(t){e.dataList.forEach((function(i){i.id==t&&(n=!0,e.$refs.recordTable&&e.$refs.recordTable.toggleRowSelection(i,!0))}))})),n||(e.ids="",e.childs=[],e.deleteIds=[],e.exportIds=null,e.multipleSelectionAll=[],e.multipleSelectionChlId=[])}e.allCheck&&(e.dataList.forEach((function(t){t&&e.$refs.recordTable&&e.$refs.recordTable.toggleRowSelection(t,!0)})),e.getAllChecked())}}))})).catch((function(t){return e.dataListLoading=!1,!1}))}else this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})}),1e3,{leading:!0,trailing:!1}),formatter:function(e,t){return 0===e.chltype?this.$t("channelInfo.collectChannel"):1===e.chltype?this.$t("channelInfo.transChannel"):this.$t("channelInfo.innerChannel")},formatterGuid:function(e){return e.chlprotocol?this.getGuid(e.chlprotocol):""},getGuid:function(e){return this.guidList.length>0&&this.guidList.find((function(t){return t.guid===e})).name||""},formattermaster:function(e,t){var n=e.protocoltype;if(0===n){if(e.chlmasterparam){var i={ip_addr:JSON.parse(e.chlmasterparam).ip_addr,port:JSON.parse(e.chlmasterparam).port};return JSON.stringify(i)}return""}if(e.chlmasterparam){var o={COM_NAME:JSON.parse(e.chlmasterparam).com_name};return JSON.stringify(o)}return""},protocolParameterSetting:function(){this.handleProtocolParameterSetting(this.selectedChlInfo)},handleProtocolParameterSetting:function(e){var t=this;this.$hasSessionStorageGwsn()?(this.protocolSettingVisible=!0,this.$nextTick((function(){t.protocolSettingForm.chlname=e.chlname,t.protocolSettingForm.gwSn=e.gwsn,t.protocolSettingForm.chlId=e.id,t.protocolSettingForm.fpno=e.chlprotocol,t.getProtocolName(e.chlprotocol),t.handleSetted()}))):this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),t.$router.replace({path:"/tgw-tgwinfo"})}})},getProtocolName:function(e){var t=this,n={guid:e};t.$hasPermission("protocolinfo:select:permission.do")?t.$http.get("/info/protocolinfo/proguid",{params:n}).then((function(e){var n=e.data;if(0!=n.code)return t.$message.error(n.data||n.msg);t.protocolSettingForm.chlprotocolName=n.data[0].name})).catch((function(e){return!1})):t.$message.warning("暂无协议信息查询权限, 请联系管理员")},handleSetted:function(){var e=this,t={gwsn:e.protocolSettingForm.gwSn,chlid:e.protocolSettingForm.chlId,fpno:e.protocolSettingForm.fpno};if(e.$hasSessionStorageGwsn()){if(!e.$hasPermission("protocolSetattr:select:permission.do"))return void e.$message.warning("暂无规约设置查询权限, 请联系管理员");e.$http.get("/info/protocolSetattr/selectByGwsn.do",{params:t}).then((function(t){var n=t.data;if(0!=n.code)return e.$message.error(n.data||n.msg);e.protocolSetted=n.data,e.getprotocolSettingDataSource(e.protocolSettingForm.fpno,n.data)})).catch((function(e){return!1}))}else e.$message({showClose:!1,message:e.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})},getprotocolSettingDataSource:function(e,t){var n=this,i=!1,o=[],a={fpno:e};n.protocolSettingDescList=[],n.$hasPermission("protocolDefattr:select:permission.do")?(n.protocolSettingFormLoading=!0,n.$http.get("/info/protocolDefattr/selectByfpno",{params:a}).then((function(e){var a=e.data;if(0!=a.code)return n.protocolSettingFormLoading=!1,n.$message.error(a.data||a.msg);if(a.data.length>0){if(t.length>0){a.data=a.data.sort((function(e,t){return e.fno>t.fno?1:-1})),t=t.sort((function(e,t){return e.fno>t.fno?1:-1}));var r=a.data.filter((function(e){return t.some((function(t){t.fname==e.fname&&(t.fno,e.fno)}))}));if(r.length>0){var l=a.data.concat(r);l.forEach((function(e){t.forEach((function(t){e.fname==t.fname&&e.fno==t.fno&&(e["fdesc"]=t.fdesc,e["fdataflag"]=t.fdataflag,e["fpno"]=t.fpno,e["fvalue"]=t["fvalue"])})),o.push({gwSn:t[0].gwSn,chlId:t[0].chlId,fname:e.fname,fpno:t[0].fpno,fno:e.fno,fdesc:e.fdesc,fdataflag:e.fdataflag,fvalue:e.fvalue,foptions:e.foptions})})),o.forEach((function(e){-1!=String(e["fdesc"]).toLocaleLowerCase().indexOf("mac")||-1!=String(e["fvalue"]).toLocaleLowerCase().indexOf("mac")?i=!0:e["foptions"]&&JSON.parse(e["foptions"]).length>0&&JSON.parse(e["foptions"]).forEach((function(e){-1!=String(e.desc).toLocaleLowerCase().indexOf("mac")&&(i=!0)})),n.showCopyUniqueCode=i}))}else a.data.forEach((function(e){t.forEach((function(t){e.fname==t.fname&&e.fno==t.fno&&(e["fdesc"]=t.fdesc,e["fdataflag"]=t.fdataflag,e["fpno"]=t.fpno,e["fvalue"]=t["fvalue"])})),o.push({gwSn:t[0].gwSn,chlId:t[0].chlId,fname:e.fname,fpno:t[0].fpno,fno:e.fno,fdesc:e.fdesc,fdataflag:e.fdataflag,fvalue:e.fvalue,foptions:e.foptions})})),o.forEach((function(e){-1!=String(e["fdesc"]).toLocaleLowerCase().indexOf("mac")||-1!=String(e["fvalue"]).toLocaleLowerCase().indexOf("mac")?i=!0:e["foptions"]&&JSON.parse(e["foptions"]).length>0&&JSON.parse(e["foptions"]).forEach((function(e){-1!=String(e.desc).toLocaleLowerCase().indexOf("mac")&&(i=!0)})),n.showCopyUniqueCode=i}));o=o.sort((function(e,t){return e.fno>t.fno?1:-1})),n.protocolSettingDescList=o}else a.data.forEach((function(e){-1!=String(e["fdesc"]).toLocaleLowerCase().indexOf("mac")||-1!=String(e["fvalue"]).toLocaleLowerCase().indexOf("mac")?i=!0:e["foptions"]&&JSON.parse(e["foptions"]).length>0&&JSON.parse(e["foptions"]).forEach((function(e){-1!=String(e.desc).toLocaleLowerCase().indexOf("mac")&&(i=!0)})),n.showCopyUniqueCode=i})),n.protocolSettingDescList=a.data;n.protocolSettingFormLoading=!1}else n.protocolSettingDescList=[],n.protocolSettingFormLoading=!1})).catch((function(e){return n.protocolSettingFormLoading=!1,!1}))):n.$message.warning("暂无规约参数默认属性查询权限, 请联系管理员")},handleResetSetting:h()((function(){this.getprotocolSettingDataSource(this.protocolSettingForm.fpno,[])}),1e3,{leading:!0,trailing:!1}),handleGetUniqueCode:function(){var e=this;if(this.$hasSessionStorageGwsn()){var t={model:sessionStorage.getItem("model"),name:"",pswd:sessionStorage.getItem("dingiiotGwsnPwd"),sn:sessionStorage.getItem("gwsn")},n=this.$md5(JSON.stringify(t)),i=("18:77:"+n.substring(8,10)+":"+n.substring(6,8)+":"+n.substring(4,6)+":"+n.substring(2,4)).toLocaleUpperCase(),o=new l.a(".getTransUniqueCode",{text:function(){return i}});o.on("success",(function(t){e.$message.success(e.$t("channelInfo.uniqueCode")+"【"+i+"】"+e.$t("copySuccess")),o.destroy()})),o.on("error",(function(t){e.$message.error(e.$t("copyFail")),o.destroy()}))}else this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})},handleProtocolSettingClose:function(){this.protocolSettingVisible=!1},protocolSettingFormSubmitHandle:h()((function(){var e=this;if(this.$hasSessionStorageGwsn()){if(!this.$hasPermission("protocolSetattr:insert:permission.do"))return void this.$message.warning("暂无规约参数设置权限, 请联系管理员");var t=[];this.protocolSettingDescList.forEach((function(n){var i={gwSn:e.protocolSettingForm.gwSn,chlId:e.protocolSettingForm.chlId,fpno:e.protocolSettingForm.fpno,fdataflag:parseInt(n.fdataflag),fdesc:n.fdesc,fname:n.fname,fno:n.fno,fvalue:n.fvalue};t.push(i)})),this.protocolSettingFormLoading=!0,this.$http.post("/info/protocolSetattr/insertBacth",t).then((function(t){var n=t.data;if(0!=n.code)return e.protocolSettingFormLoading=!1,e.$message.error(n.data||n.msg);e.protocolSettingFormLoading=!1,e.$message({message:e.$t("prompt.success"),type:"success",duration:500,onClose:function(){e.protocolSettingVisible=!1,e.getDataList()}})})).catch((function(t){return e.protocolSettingVisible=!1,e.getDataList()}))}else this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})}),1e3,{leading:!0,trailing:!1}),getRowKey:function(e){return e.id},selectAll:function(e){e.length>0?this.currentPageCheccked=!0:this.currentPageCheccked=!1},dataListSelectionHandle:function(e){var t=this,n=[];this.childs=[],this.deleteIds=[],this.copyList=e,this.multipleSelectionChlId=[],e.length>0&&!this.allCheck?(this.selectedChlInfo=e[0],this.multipleSelectionAll=this.reduceSame(e),this.multipleSelectionAll=this.multipleSelectionAll.map((function(e){return e.id})),e.forEach((function(e){t.childs.push(e.id),n.push(e.chlid),t.deleteIds.push(e.id),t.multipleSelectionChlId.push(e.chlid)})),this.ids=this.childs.join(","),this.$store.dispatch("changeIds",n.join(",")),this.exportIds=this.childs.join(","),this.$store.dispatch("changeExportIds",this.exportIds),e.length==this.dataList.length?this.currentPageCheccked=!0:this.currentPageCheccked=!1):(this.ids="",this.exportIds=null,this.selectedChlInfo={},this.multipleSelectionAll=[],this.multipleSelectionChlId=[],this.$store.dispatch("changeIds",""),this.$store.dispatch("changeExportIds",""))},handleCopyChannel:function(){var e=this;if(this.$hasSessionStorageGwsn()){if(0===this.copyList.length||0===this.dataList.length)return this.$message.warning(this.$t("channelInfo.pleaseSelectChannelAsReplicationDataSource"));if(this.copyList.length>1)return this.$message.warning(this.$t("channelInfo.selectOneChannelToBeMerged"));if(!this.$hasPermission("channelinfo:copyTransChl:permission.do"))return void this.$message.warning("暂无复制通道权限, 请联系管理员");this.copyObj=this.copyList[0],this.copyChannelVisible=!0}else this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})},handleCopyChannelClose:function(){this.copyChannelForm.chlname="",this.copyChannelForm.copyCount=1,this.copyChannelForm.chladdr="",this.$refs["copyChannelForm"].resetFields(),this.copyChannelVisible=!1},copyChannelFormSubmitHandle:h()((function(){var e=this,t={gwsn:sessionStorage.getItem("gwsn"),chlId:e.copyObj.chlid,chlName:e.copyChannelForm.chlname,devPreName:e.copyChannelForm.devname,num:e.copyChannelForm.copyCount};if(e.$hasSessionStorageGwsn()){if(!e.$hasPermission("channelinfo:copyTransChl:permission.do"))return void e.$message.warning("暂无复制通道权限, 请联系管理员");e.$refs["copyChannelForm"].validate((function(n){if(!n)return!1;e.copyChannelFormloading=!0,e.$http.get("/info/channelinfo/copyTransChl.do",{params:t}).then((function(t){var n=t.data;if(0!=n.code)return e.copyChannelFormloading=!1,e.$message.error(n.data||n.msg),!1;e.$message({message:e.$t("channelInfo.copyChannelSuccess"),type:"success",duration:500,onClose:function(){e.copyChannelFormloading=!1,e.copyChannelVisible=!1,e.getDataList()}})})).catch((function(t){e.copyChannelFormloading=!1,e.copyChannelVisible=!1,e.getDataList()}))}))}else e.$message({showClose:!1,message:e.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})}),1e3,{leading:!0,trailing:!1}),reduceSame:function(e){var t={};return e.reduce((function(e,n){return!t[n.id]&&(t[n.id]=e.push(n)),e}),[])},checkSelectable:function(e,t){return!this.allCheck},allCheckEvent:function(){var e=this;e.allCheck?(e.dataList.forEach((function(t){t&&e.$refs.recordTable&&e.$refs.recordTable.toggleRowSelection(t,!0)})),e.getAllChecked()):e.$refs.recordTable&&e.$refs.recordTable.clearSelection()},getAllChecked:function(){var e=this;if(this.$hasSessionStorageGwsn()){var t={chltype:1,gwsn:sessionStorage.getItem("gwsn")};if(this.dataForm.chlname&&(t["chlname"]=this.dataForm.chlname),!this.$hasPermission("channelinfo:selectChannelByGwsnAndChltype:permission.do"))return void this.$message.warning("暂无全部转发通道查询权限, 请联系管理员");this.$http.get("/info/channelinfo/selectChannelByGwsnAndChltype",{params:t}).then((function(t){var n=t.data;if(0!=n.code)return e.$message.error(n.data||n.msg);var i=[];e.childs=[],e.deleteIds=[],e.multipleSelectionChlId=[];for(var o=0;o<n.data.length;o++){var a=n.data[o];e.childs.push(a.id),i.push(a.chlid),e.deleteIds.push(a.id),e.multipleSelectionChlId.push(a.chlid)}e.ids=e.childs.join(","),e.$store.dispatch("changeIds",i.join(",")),e.exportIds=e.childs.join(","),e.$store.dispatch("changeExportIds",e.exportIds)})).catch((function(e){return!1}))}else this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})},chlManage:function(e,t){var n=this,i={label:t.chlname,value:t.id,chlId:t.chlid};n.$router.push({path:"transdeviceinfo",name:"transdeviceinfo",query:i}),s["a"].$emit("activeIndex2","/transdeviceinfo")},deleteHandle:h()((function(e){var t=this;if(t.$hasSessionStorageGwsn()){if(e&&(t.deleteIds=[],t.deleteIds.push(e)),0===t.deleteIds.length)return t.$message.error(t.$t("deleteInfo.noData"));if(!t.$hasPermission("transchannel:delete:permission.do"))return void t.$message.warning("暂无转发通道删除权限, 请联系管理员");t.$confirm(t.$t("deleteInfo.noticeTitle"),t.$t("deleteInfo.noticePrompt"),{confirmButtonText:t.$t("deleteInfo.confirm"),cancelButtonText:t.$t("deleteInfo.cancel"),type:"warning"}).then((function(){t.dataListLoading=!0,t.$http.post("/delcmd/transchannel/delete.do",t.deleteIds).then((function(e){var n=e.data;if(n.code=0)return t.dataListLoading=!1,t.$message.error(n.data||n.msg),!1;t.$message.success(t.$t("deleteInfo.deleteSuccess")),t.dataListLoading=!1,t.getDataList(),t.allCheck=!1,t.$refs.recordTable.clearSelection()})).catch((function(e){return t.dataListLoading=!1,t.getDataList(),t.allCheck=!1,t.$refs.recordTable.clearSelection(),!1}))})).catch((function(e){}))}else t.$message({showClose:!1,message:t.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),t.$router.replace({path:"/tgw-tgwinfo"})}})}),1e3,{leading:!0,trailing:!1}),getprotocolinfoList:function(){var e=this;e.$hasPermission("protocolinfo:select:permission.do")?e.$http.get("/info/protocolinfo/proGuidAll",{params:{}}).then((function(t){var n=t.data;if(0!==n.code)return setTimeout((function(){e.getprotocolParentInfoList()}),500),e.$message.error(n.data||n.msg),!1;setTimeout((function(){e.getprotocolParentInfoList()}),500),e.guidList=n.data})).catch((function(t){return setTimeout((function(){e.getprotocolParentInfoList()}),500),!1})):e.$message.warning("暂无协议查询权限, 请联系管理员")},handleChannelMergeChange:function(){return this.total<2?this.$message.warning(this.$t("channelInfo.noMergeTargetChannel")):this.multipleSelectionChlId.length==this.total?this.$message.warning(this.$t("channelInfo.haveSelectedAllChannelsAndCannotMergeChannels")):void(this.$hasPermission("channelinfo:updateDevicesChlId:permission.do")?(this.mergeChannelForm.chlId="",this.mergeChannelForm.mergeIds=[],this.repairMergeChannelList=[],this.mergeTargetChannelList=[],this.mergeChannelList=[],this.getMergeChannelList()):this.$message.warning("暂无通道合并权限, 请联系管理员"))},getMergeChannelList:function(){var e=this;if(this.$hasSessionStorageGwsn()){var t={gwsn:sessionStorage.getItem("gwsn")};if(this.mergeChannelVisible=!1,!this.$hasPermission("list:getChlList:select:permission.do"))return void this.$message.warning("暂无通道查询权限, 请联系管理员");this.$http.get("/list/getChlList.do",{params:t}).then((function(t){var n=t.data;if(0!=n.code)return e.$message.error(n.data||n.msg);n.data.length>0&&(n.data.forEach((function(t){1==t.chlType&&e.mergeChannelList.push(t)})),e.mergeTargetChannelList=JSON.parse(JSON.stringify(e.mergeChannelList)),e.multipleSelectionChlId.length>0&&(e.repairMergeChannelList=e.mergeTargetChannelList,e.mergeChannelForm.mergeIds=e.multipleSelectionChlId),e.mergeChannelVisible=!0)}))}else this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})},handleChannelMergeClose:function(){this.$refs.mergeChannelForm.resetFields(),this.mergeChannelVisible=!1},hanleMergeChlIdChanage:function(e){var t=this;if(e){var n=this.mergeChannelList.filter((function(t){return t.chlID!=e}));this.repairMergeChannelList=n,this.mergeChannelForm.mergeIds.length>0&&(this.mergeChannelForm.mergeIds=this.mergeChannelForm.mergeIds.filter((function(e){return e!=t.mergeChannelForm.chlId&&t.repairMergeChannelList.find((function(t){return t.chlID==e}))})),this.mergeChannelForm.mergeIds.includes("all")||this.mergeChannelForm.mergeIds.length!==this.repairMergeChannelList.length?this.mergeChannelForm.mergeIds.includes("all")&&this.mergeChannelForm.mergeIds.length-1<this.repairMergeChannelList.length&&(this.mergeChannelForm.mergeIds=this.mergeChannelForm.mergeIds.filter((function(e){return"all"!==e}))):this.mergeChannelForm.mergeIds.unshift("all"))}},selectAllMergeChannel:function(){var e=this;this.mergeChannelForm.mergeIds.length<this.repairMergeChannelList.length?(this.mergeChannelForm.mergeIds=[],this.repairMergeChannelList.forEach((function(t){e.mergeChannelForm.mergeIds.push(t.chlID)})),this.mergeChannelForm.mergeIds.unshift("all")):this.mergeChannelForm.mergeIds=[]},handleRepairMergeChannelChange:function(e){e.includes("all")||e.length!==this.repairMergeChannelList.length?e.includes("all")&&e.length-1<this.repairMergeChannelList.length&&(this.mergeChannelForm.mergeIds=this.mergeChannelForm.mergeIds.filter((function(e){return"all"!==e}))):this.mergeChannelForm.mergeIds.unshift("all")},handleChannelMergeSubmit:h()((function(){var e=this,t=[],n={sn:sessionStorage.getItem("gwsn"),deviceIds:"",chlId:e.mergeChannelForm.chlId,type:1};if(e.$hasSessionStorageGwsn()){if(!e.$hasPermission("channelinfo:updateDevicesChlId:permission.do"))return void e.$message.warning("暂无通道合并权限, 请联系管理员");e.$refs["mergeChannelForm"].validate((function(i){return!!i&&(e.mergeChannelForm.mergeIds.forEach((function(n){e.mergeChannelList.forEach((function(e){n==e.chlID&&e.hasOwnProperty("dev2PojoList")&&e.dev2PojoList.length>0&&e.dev2PojoList.forEach((function(e){t.push(e.devID)}))}))})),0==t.length?e.$message.warning(e.$t("channelInfo.noDevicesToMerge")):(n["deviceIds"]=t.join(","),void e.$confirm(e.$t("channelInfo.areYouWantToMergeChannels"),e.$t("deleteInfo.noticePrompt"),{confirmButtonText:e.$t("deleteInfo.confirm"),cancelButtonText:e.$t("deleteInfo.cancel"),type:"warning"}).then((function(){e.mergeChannelFormloading=!0,e.$http.get("/info/channelinfo/updateDevicesChlId.do",{params:n}).then((function(t){var n=t.data;if(0!=n.code)return e.mergeChannelFormloading=!1,e.$message.error(n.data||n.msg);e.$message.success("操作成功"),e.mergeChannelFormloading=!1,e.handleChannelMergeClose(),e.getDataList(),e.allCheck=!1,e.$refs.recordTable.clearSelection()})).catch((function(t){return e.mergeChannelFormloading=!1,!1}))})).catch((function(e){}))))}))}else e.$message({showClose:!1,message:e.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})}),1e3,{leading:!0,trailing:!1}),handleEditAllChange:function(){var e=this;if(this.$hasSessionStorageGwsn()){if(!(this.childs.length>0))return this.$message.info(this.$t("deviceInfo.selectEditData"));if(!this.$hasPermission("channelinfo:info:updateList:permission.do"))return void this.$message.warning("暂无批量修改权限, 请联系管理员");this.editForm.chlprotocol=[],this.refreshItem++,this.editAllVisible=!0,this.handleSelectTypeChange(this.editForm.type)}else this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})},handleSelectTypeChange:function(e){if(this.changeList=[],this.editForm.changeValue="","devmanu"===e)this.changeList=this.platForm,this.editForm.changeValue=this.changeList[0].value;else if("devmodel"===e){for(var t=this.devmodelIds[0],n=!0,i=0;i<this.devmodelIds.length;i++){var o=this.devmodelIds[i];if(o!=t){n=!1;break}}if(!n)return this.$message.error(this.$t("deviceInfo.samePlantform"));this.changeList=this.platFormDevList,this.editForm.changeValue=this.changeList[0].value}else"valid"==e&&(this.editForm.changeValue=0)},getprotocolParentInfoList:function(){var e=this;e.options=[],e.$http.get("/info/groupinfo/getNode").then((function(t){var n=t.data,i=n.data;i.length>0&&(i.forEach((function(t){if(-1===t.upgroupid&&-1===t.groupname.indexOf("*")){var n={label:t.groupname,value:String(t.groupid),children:[]};e.options.push(n)}})),e.getSecondData(i))})).catch((function(e){return!1}))},getSecondData:function(e){var t=this;if(e.length>0){var n,i=f(t.options);try{for(i.s();!(n=i.n()).done;){var o,a=n.value,r=f(e);try{for(r.s();!(o=r.n()).done;){var l=o.value;if(a.value==l.upgroupid&&-1===l.groupname.indexOf("*")){var s={label:l.groupname,value:String(l.groupid),children:[]};a.children.push(s)}}}catch(c){r.e(c)}finally{r.f()}}}catch(c){i.e(c)}finally{i.f()}t.getThirdData()}},getThirdData:function(){var e=this;e.$hasPermission("protocolinfo:select:permission.do")?e.$http.get("/info/protocolinfo/proGuidAll",{params:{attribute:1}}).then((function(t){var n,i=t.data,o=f(e.options);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.children.length>0){var r,l=f(a.children);try{for(l.s();!(r=l.n()).done;){var s,c=r.value,h=f(i.data);try{for(h.s();!(s=h.n()).done;){var d=s.value;if(c.value==d.groupid&&-1===d.name.indexOf("*")){var u={label:d.name,value:d.guid};c.children.push(u)}}}catch(p){h.e(p)}finally{h.f()}}}catch(p){l.e(p)}finally{l.f()}}}}catch(p){o.e(p)}finally{o.f()}e.getFinallyData(e.options)})).catch((function(e){return!1})):e.$message.warning("暂无协议查询权限, 请联系管理员")},getFinallyData:function(e){if(e.length>0){for(var t=e.length-1;t>=0;t--){for(var n=e[t].children,i=n.length-1;i>=0;i--)0===n[i].children.length&&n.splice(i,1);0===e[t].children.length&&e.splice(t,1)}return e}},dataFilter:function(e,t){if(~e.text.indexOf(t)||~e.text.toUpperCase().indexOf(t.toUpperCase()))return!0},handleChlpro:function(e){var t=this;t.getguidInfo(e[e.length-1],(function(e){0===e.data[0].type?t.editForm.chlcoltfrmstopms=20:t.editForm.chlcoltfrmstopms=300}))},getguidInfo:function(e,t){var n=this;n.$hasPermission("protocolinfo:select:permission.do")?n.$http.get("/info/protocolinfo/proguid",{params:{guid:e}}).then((function(i){var o=i.data;if(0!=o.code)return n.$message.error(o.msg);n.$http.get("/info/groupinfo/getNodeTreesss",{params:{GroupID:o.data[0].groupid}}).then((function(i){var a=i.data;n.editForm.chlprotocol=[String(a[0].upgroupid),String(o.data[0].groupid),e],t(o)}))})).catch((function(e){return!1})):n.$message.warning("暂无协议查询权限, 请联系管理员")},dataFormSubmitHandle:h()((function(){var e=this;if(this.$hasSessionStorageGwsn()){if(!this.$hasPermission("channelinfo:info:updateList:permission.do"))return void this.$message.warning("暂无批量修改权限, 请联系管理员");var t=[];if("chlname"===this.editForm.type||"chlcomment"===this.editForm.type){if(!/^[0-9]\d*/.test(this.editForm.fex))return this.$message.error(this.$t("deviceInfo.enterInt"));if(!this.editForm.pre)return this.$message.warning(this.$t("deviceInfo.prefixCannotBeEmpty"));if("chlname"===this.editForm.type){var n=Number(this.editForm.fex);if(""===this.editForm.fex||null===this.editForm.fex||void 0===this.editForm.fex)return this.$message.warning(this.$t("deviceInfo.theStartingValueCannotBeEmpty"));this.childs.forEach((function(i){var o={id:i,chlname:e.editForm.pre?e.editForm.pre+n++:n++};t.push(o)}))}else{var i=Number(this.editForm.fex);if(""===this.editForm.fex||null===this.editForm.fex||void 0===this.editForm.fex)return this.$message.warning(this.$t("deviceInfo.theStartingValueCannotBeEmpty"));this.childs.forEach((function(n){var o={id:n,chlcomment:e.editForm.pre?e.editForm.pre+i++:i++};t.push(o)}))}this.$http.put("/info/channelinfo/updateList.do",t).then((function(t){var n=t.data;if(0!=n.code)return e.$message.error(n.data||n.msg);e.$message.success(n.data||n.msg||"批量修改成功"),e.editAllVisible=!1,e.getDataList()}))}else if("chladdr"===this.editForm.type){var o=Number(this.editForm.startValue),a=Number(this.editForm.step);this.childs.forEach((function(e,n){var i={id:e,chladdr:0==n?o:o+a++};t.push(i)})),this.$refs["editForm"].validate((function(n){if(!n)return!1;e.$http.put("/info/channelinfo/updateList.do",t).then((function(t){var n=t.data;if(0!=n.code)return e.$message.error(n.data||n.msg);e.$message.success(n.data||n.msg||"批量修改成功"),e.editAllVisible=!1,e.getDataList()})).catch((function(t){return e.editAllVisible=!1,e.getDataList()}))}))}else if("chlprotocol"==this.editForm.type)this.childs.forEach((function(n){var i={id:n,chlprotocol:e.editForm.chlprotocol[2]};t.push(i)})),this.$refs["editForm"].validate((function(n){if(!n)return!1;e.$http.put("/info/channelinfo/updateList.do",t).then((function(t){var n=t.data;if(0!=n.code)return e.$message.error(n.data||n.msg);e.$message.success(n.data||n.msg||"批量修改成功"),e.editAllVisible=!1,e.getDataList()})).catch((function(t){return e.editAllVisible=!1,e.getDataList()}))}));else if("chlcoltfrq"==this.editForm.type||"chlcoltfrmstopms"==this.editForm.type||"valid"==this.editForm.type){var r=this.editForm.type;this.childs.forEach((function(n){var i={id:n};i[r]="chlcoltfrq"==r?Number(e.editForm.chlcoltfrq):"chlcoltfrmstopms"==r?Number(e.editForm.chlcoltfrmstopms):"valid"==r?e.editForm.changeValue:Number(e.editForm.chlcoltfrq),t.push(i)})),this.$refs["editForm"].validate((function(n){if(!n)return!1;e.$http.put("/info/channelinfo/updateList.do",t).then((function(t){var n=t.data;if(n.code)return e.$message.error(n.data||n.msg);e.$message.success(n.data||n.msg||"批量修改成功"),e.editAllVisible=!1,e.getDataList()})).catch((function(t){return e.editAllVisible=!1,e.getDataList(),!1}))}))}else{var l=this.editForm.type;this.multipleSelectionAll.forEach((function(n){var i={id:n};i[l]=e.editForm.changeValue,t.push(i)})),this.$refs["editForm"].validate((function(n){if(!n)return!1;e.$http.put("/info/channelinfo/updateList.do",t).then((function(t){var n=t.data;if("OK"!==n.msg)return e.$message.error(n.data||n.msg);e.$message.success(n.data||n.msg||"批量修改成功"),e.editAllVisible=!1,e.getDataList()})).catch((function(t){return e.editAllVisible=!1,e.getDataList()}))}))}}else this.$message({showClose:!1,message:this.$t("gatewayNotObtained"),type:"warning",duration:1500,onClose:function(){return sessionStorage.clear(),e.$router.replace({path:"/tgw-tgwinfo"})}})}),1e3,{leading:!0,trailing:!1})},created:function(){this.page=Number(sessionStorage.getItem("page3"))||1,this.limit=Number(sessionStorage.getItem("limit3"))||20},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.isShowSetting=0!=sessionStorage.getItem("per"),t.$erd.listenTo(document.getElementById("transChannelQueryContainer"),(function(e){var n=document.getElementById("transChannelQueryContainer").offsetHeight;t.scrollTableHeight=window.innerHeight-145-n})),e.next=1,t.getprotocolinfoList();case 1:return e.next=2,t.getDataList();case 2:window.onresize=function(){return function(){var e=document.getElementById("transChannelQueryContainer").offsetHeight;t.scrollTableHeight=window.innerHeight-145-e}()};case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){this.ids="",this.$store.dispatch("changeIds",this.ids)},watch:{total:function(){this.total==(this.page-1)*this.limit&&0!=this.total&&(this.page-=1,sessionStorage.setItem("page3",this.page),this.getDataList())},multipleSelectionAll:function(){0!=this.multipleSelectionAll.length&&this.multipleSelectionAll.length==this.dataList.length||(this.currentPageCheccked=!1)},dataList:{handler:function(e){var t=this;this.allCheck&&this.dataList.forEach((function(e){e&&t.$refs.recordTable&&t.$refs.recordTable.toggleRowSelection(e,!0)}))},deep:!0}}},v=m,$=n("2877"),C=Object($["a"])(v,i,o,!1,null,null,null);t["default"]=C.exports}}]);