(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9a11472"],{"08cd":function(e,t,r){e.exports=r.p+"img/eye-on.f50d4ecf.png"},"2a1f":function(e,t,r){"use strict";r.r(t);r("34ef"),r("28a5"),r("6b54"),r("4917");
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(n){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},r=function(){this.data=[]},n=function(e,t,r){this.data=e,this.size=e.length,this.type=t,this.encoding=r},a=r.prototype,s=n.prototype,i=e.FileReaderSync,o=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,d=e.URL||e.webkitURL||e,p=d.createObjectURL,u=d.revokeObjectURL,m=d,f=e.btoa,h=e.atob,g=e.ArrayBuffer,w=e.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;n.fake=s.fake=!0;while(c--)o.prototype[l[c]]=c+1;return d.createObjectURL||(m=e.URL=function(e){var t,r=document.createElementNS("http://www.w3.org/1999/xhtml","a");return r.href=e,"origin"in r||("data:"===r.protocol.toLowerCase()?r.origin=null:(t=e.match(b),r.origin=t&&t[1])),r}),m.createObjectURL=function(e){var t,r=e.type;return null===r&&(r="application/octet-stream"),e instanceof n?(t="data:"+r,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):f?t+";base64,"+f(e.data):t+","+encodeURIComponent(e.data)):p?p.call(d,e):void 0},m.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&u&&u.call(d,e)},a.append=function(e){var r=this.data;if(w&&(e instanceof g||e instanceof w)){for(var a="",s=new w(e),l=0,c=s.length;l<c;l++)a+=String.fromCharCode(s[l]);r.push(a)}else if("Blob"===t(e)||"File"===t(e)){if(!i)throw new o("NOT_READABLE_ERR");var d=new i;r.push(d.readAsBinaryString(e))}else e instanceof n?"base64"===e.encoding&&h?r.push(h(e.data)):"URI"===e.encoding?r.push(decodeURIComponent(e.data)):"raw"===e.encoding&&r.push(e.data):("string"!==typeof e&&(e+=""),r.push(unescape(encodeURIComponent(e))))},a.getBlob=function(e){return arguments.length||(e=null),new n(this.data.join(""),e,"raw")},a.toString=function(){return"[object BlobBuilder]"},s.slice=function(e,t,r){var a=arguments.length;return a<3&&(r=null),new n(this.data.slice(e,a>1?t:this.data.length),r,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=0,delete this.data},r}(e);e.Blob=function(e,r){var n=r&&r.type||"",a=new t;if(e)for(var s=0,i=e.length;s<i;s++)Uint8Array&&e[s]instanceof Uint8Array?a.append(e[s].buffer):a.append(e[s]);var o=a.getBlob(n);return!o.slice&&o.webkitSlice&&(o.slice=o.webkitSlice),o};var r=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=r(new e.Blob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||void 0)},"376b":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("6b54"),r("34ef"),r("ac6a");function n(e,t){t&&(e+=1462);var r=Date.parse(e);return(r-new Date(Date.UTC(1899,11,30)))/864e5}function a(e,t){for(var r={},a={s:{c:1e7,r:1e7},e:{c:0,r:0}},s=0;s!=e.length;++s)for(var i=0;i!=e[s].length;++i){a.s.r>s&&(a.s.r=s),a.s.c>i&&(a.s.c=i),a.e.r<s&&(a.e.r=s),a.e.c<i&&(a.e.c=i);var o={v:e[s][i]};if(null!=o.v){var l=XLSX.utils.encode_cell({c:i,r:s});"number"===typeof o.v?o.t="n":"boolean"===typeof o.v?o.t="b":o.v instanceof Date?(o.t="n",o.z=XLSX.SSF._table[14],o.v=n(o.v)):o.t="s",r[l]=o}}return a.s.c<1e7&&(r["!ref"]=XLSX.utils.encode_range(a)),r}function s(){if(!(this instanceof s))return new s;this.SheetNames=[],this.Sheets={}}function i(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}function o(e,t,r){var n=t;n.unshift(e);for(var o="SheetJS",l=new s,c=a(n),d=n.map((function(e){return e.map((function(e){return null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length+5}:{wch:e.toString().length+5}}))})),p=d[0],u=1;u<d.length;u++)for(var m=0;m<d[u].length;m++)p[m]["wch"]<d[u][m]["wch"]&&(p[m]["wch"]=d[u][m]["wch"]);c["!cols"]=p,l.SheetNames.push(o),l.Sheets[o]=c;var f=XLSX.write(l,{bookType:"xlsx",bookSST:!1,type:"binary"}),h=r||"列表";saveAs(new Blob([i(f)],{type:"application/octet-stream"}),h+".xlsx")}r("2a1f"),r("0fd4"),r("1447")},"5c6e":function(e,t,r){},"87b3":function(e,t,r){"use strict";r.r(t);r("6762"),r("2fdb");var n=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"aui-card--fill",attrs:{shadow:"never"}},[t("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.querySearch.apply(null,arguments)}}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[t("el-form-item",{attrs:{label:"客户名称"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入客户名称",clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.customername,callback:function(t){e.$set(e.dataForm,"customername",t)},expression:"dataForm.customername"}})],1),t("el-form-item",{attrs:{label:"项目名称"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入项目名称",clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.prjName,callback:function(t){e.$set(e.dataForm,"prjName",t)},expression:"dataForm.prjName"}})],1),t("el-form-item",{attrs:{label:"网关编号"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入网关编号",clearable:""},on:{clear:e.querySearch},model:{value:e.dataForm.gwsn,callback:function(t){e.$set(e.dataForm,"gwsn",t)},expression:"dataForm.gwsn"}})],1),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:e.$t("select")},on:{change:e.getDataList},model:{value:e.dataForm.queryStatus,callback:function(t){e.$set(e.dataForm,"queryStatus",t)},expression:"dataForm.queryStatus"}},e._l(e.statusBigList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.$hasPermission("aftermarket:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:e.querySearch}},[e._v(e._s(e.$t("query")))])],1):e._e(),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAddOrUpdateAfterSalesChange()}}},[e._v(e._s(e.$t("add"))+"\n                        ")])],1),e.$hasPermission("aftermarket:delete:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"danger",disabled:0==e.selectIds.length||0==e.dataList.length,icon:"el-icon-delete"},on:{click:function(t){return e.deleteHandle()}}},[e._v("\n                            "+e._s(e.$t("delete"))+"\n                        ")])],1):e._e(),e.$hasPermission("aftermarket:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-printer"},on:{click:e.printSelectedRows}},[e._v("\n                            打印\n                        ")])],1):e._e(),e.$hasPermission("aftermarket:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getDataList}},[t("i",{staticClass:"el-icon-refresh"})])],1):e._e(),t("el-form-item",{attrs:{label:"快速筛选"}},[t("el-checkbox-group",{attrs:{size:"small"},on:{change:e.querySearch},model:{value:e.dataForm.checkboxList,callback:function(t){e.$set(e.dataForm,"checkboxList",t)},expression:"dataForm.checkboxList"}},e._l(e.checkboxList,(function(r){return t("el-checkbox-button",{key:r.value,attrs:{label:r.value}},[e._v(e._s(r.label))])})),1)],1)],1)],1)],1),t("vxe-table",{ref:"recordTable",staticStyle:{width:"100%"},attrs:{size:"medium",border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"",data:e.dataList,"max-height":e.scrollTableHeight,loading:e.dataListLoading,"row-config":{keyField:"id"},"checkbox-config":e.checkboxConfig,"row-style":e.getRowStyle},on:{"checkbox-all":e.selectAll,"checkbox-change":e.dataListSelectionHandle}},[t("vxe-table-column",{key:"1",attrs:{type:"checkbox","header-align":"center",align:"center",width:"60",fixed:"left",checked:!1}}),t("vxe-table-column",{key:"2",attrs:{field:"dbtime",title:"创建时间","header-align":"center",width:"160",fixed:"left"}}),t("vxe-table-column",{key:"3",attrs:{field:"comp",title:"客户信息","header-align":"center",width:"200",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{domProps:{innerHTML:e._s("公司名称: "+r.row.comp+"<br />\n联系人: "+r.row.contact+"<br />\n联系方式: "+r.row.contactinfo)}})]}}])}),t("vxe-table-column",{key:"4",attrs:{field:"receipt",title:"客户寄出信息","header-align":"center",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.receipt?t("div",{staticStyle:{display:"flex","justify-content":"flex-start","flex-direction":"column","align-items":"flex-start"}},[t("div",[e.validateExpressCode(r.row.receipt)?t("a",{attrs:{href:"https://www.kuaidi100.com?nu="+encodeURIComponent(r.row.receipt),target:"_blank"}},[e._v(e._s(r.row.receipt||"--"))]):t("span",[e._v(e._s(r.row.receipt||"--"))]),e.$hasPermission("aftermarket:update:permission.do")?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("update"),placement:"top-start"}},[t("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"5px",cursor:"pointer"},on:{click:function(t){return e.handleAddReturnOrderChange(r.row.id,r.row,"receipt")}}})]):e._e()],1),t("div",[e._v(e._s("寄出时间："+(r.row.redbtime?r.row.redbtime:"")))])]):e._e(),e.$hasPermission("aftermarket:update:permission.do")&&!r.row.receipt?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddReturnOrderChange(r.row.id,null,"receipt")}}},[e._v("填写")]):e._e()]}}])}),t("vxe-table-column",{key:"5",attrs:{field:"afterMarketPojoList",title:"售后信息","header-align":"center",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-around"}},[r.row.afterMarketPojoList.length>5?t("div",[t("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[t("div",[t("span",{staticStyle:{"font-weight":"bolder"}},[e._v(e._s("总数量: "+r.row.afterMarketPojoList.length)+"个")]),e._l(r.row.afterMarketPojoList.slice(0,5),(function(r,n){return t("div",{key:n,staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("span",[e._v(e._s(r.sn))]),t("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.getStatusText(r.status)))])])}))],2),t("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.getLeftSnAndStatusInfo(r.row.afterMarketPojoList))},slot:"content"})])],1):t("div",[t("span",{staticStyle:{"font-weight":"bolder"}},[e._v(e._s("总数量: "+r.row.afterMarketPojoList.length)+"个")]),e._l(r.row.afterMarketPojoList,(function(r,n){return t("div",{key:n,staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[r.sn?t("span",[e._v(e._s(r.sn))]):t("span",{staticStyle:{color:"#f00"}},[e._v("网关信息为空")]),t("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.getStatusText(r.status)))])])}))],2),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleViewSnListChange(r.row,"option")}}},[e._v("查看")])],1)]}}])}),t("vxe-table-column",{key:"6",attrs:{field:"project",title:"项目名称","header-align":"center",align:"center",width:"180"}}),t("vxe-table-column",{key:"7",attrs:{field:"dock",title:"对接工程师","header-align":"center",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.dock))])]}}])}),t("vxe-table-column",{key:"9",attrs:{field:"rcontact",title:"客户收件信息","header-align":"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{domProps:{innerHTML:e._s("联系人: "+r.row.rcontact+"<br />\n联系方式: "+r.row.rcontactinfo+"<br />\n地址: "+r.row.raddress)}})]}}])}),t("vxe-table-column",{key:"8",attrs:{field:"re1",title:"客户寄出照片","header-align":"center",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.re1||r.row.re2||r.row.re3?t("img",{staticStyle:{"max-height":"70px"},attrs:{src:r.row.re1||r.row.re2||r.row.re3,alt:""},on:{click:function(t){return e.handleImgDialogVisibleChange(r.row,"sendPicture")}}}):e._e(),r.row.re1||r.row.re2||r.row.re3||!e.$hasPermission("aftermarket:update:permission.do")?e._e():t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"},on:{click:function(t){return e.handleUploadSendChange(r.row,"customer")}}},[e._v("点击上传")]),(r.row.re1||r.row.re2||r.row.re3)&&e.$hasPermission("aftermarket:update:permission.do")?t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",type:"primary",icon:"el-icon-upload"},on:{click:function(t){return e.handleUploadSendChange(r.row,"customer")}}},[e._v("编辑图片")]):e._e()]}}])}),t("vxe-table-column",{key:"10",attrs:{field:"re8",title:"厂家寄出照片","header-align":"center",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.re8||r.row.re4||r.row.re5||r.row.re6?t("img",{staticStyle:{"max-height":"70px"},attrs:{src:r.row.re8||r.row.re4||r.row.re5||r.row.re6,alt:""},on:{click:function(t){return e.handleImgDialogVisibleChange(r.row,"receivePicture")}}}):e._e(),r.row.re4||r.row.re5||r.row.re6||!e.$hasPermission("aftermarket:update:permission.do")?e._e():t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"},on:{click:function(t){return e.handleUploadSendChange(r.row,"company")}}},[e._v("点击上传")]),(r.row.re8||r.row.re4||r.row.re5||r.row.re6)&&e.$hasPermission("aftermarket:update:permission.do")?t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",type:"primary",icon:"el-icon-upload"},on:{click:function(t){return e.handleUploadSendChange(r.row,"company")}}},[e._v("编辑图片")]):e._e()]}}])}),t("vxe-table-column",{key:"11",attrs:{field:"notes",title:"备注","header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.notes?t("span",[e._v(e._s(r.row.notes))]):e._e(),e.$hasPermission("aftermarket:update:permission.do")&&!r.row.notes?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddNotesChange(r.row.id,"")}}},[e._v("填写")]):e._e()]}}])}),t("vxe-table-column",{key:"12",attrs:{field:"status",title:"当前状态","header-align":"center",align:"center",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{staticClass:"status-text"},[e._v("\n                        "+e._s(e.getStatusBigText(r.row.status))+"\n                    ")])]}}])}),e.$hasPermission("aftermarket:update:permission.do")||e.$hasPermission("aftermarket:delete:permission.do")?t("vxe-table-column",{key:"13",attrs:{title:e.$t("handle"),"header-align":"center",align:"center",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",{staticStyle:{display:"flex","flex-wrap":"wrap","flex-direction":"row",overflow:"hidden"}},[e.$hasPermission("aftermarket:update:permission.do")?t("el-button",{staticStyle:{width:"45%"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddNotesChange(r.row.id,r.row.notes,"deleteAftersale")}}},[e._v(e._s("修改备注"))]):e._e(),e.$hasPermission("aftermarket:delete:permission.do")?t("el-button",{staticStyle:{width:"45%",padding:"0",margin:"0"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteHandle(r.row.id)}}},[e._v(e._s(e.$t("delete")))]):e._e()],1)]}}],null,!1,2026231403)}):e._e()],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[20,50,100,200],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.pageSizeChangeHandle,"current-change":e.pageCurrentChangeHandle}}),t("el-dialog",{attrs:{visible:e.returnOrderVisible,title:"receipt"===e.returnOrderForm.type?"填写客户寄出信息":"填写寄出信息","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.returnOrderVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.returnOrderLoading,expression:"returnOrderLoading"}],ref:"returnOrderForm",attrs:{model:e.returnOrderForm,rules:e.returnOrderRules,"label-width":"140px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleConfirmReturnOrderChange()}}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"returnOrder",label:"receipt"===e.returnOrderForm.type?"客户寄出信息":"寄出信息"}},[t("el-input",{attrs:{placeholder:"receipt"===e.returnOrderForm.type?"请输入客户寄出信息":"请输入寄出信息",clearable:""},model:{value:e.returnOrderForm.returnOrder,callback:function(t){e.$set(e.returnOrderForm,"returnOrder",t)},expression:"returnOrderForm.returnOrder"}})],1)],1),"returnnum"===e.returnOrderForm.type?t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"rsn",label:"寄出网关编号"}},[t("el-input",{attrs:{placeholder:"请输入寄出网关编号",clearable:""},model:{value:e.returnOrderForm.rsn,callback:function(t){e.$set(e.returnOrderForm,"rsn",t)},expression:"returnOrderForm.rsn"}})],1)],1):e._e(),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"rdetails",label:(e.returnOrderForm.type,"寄件类型")}},[t("el-radio-group",{model:{value:e.returnOrderForm.rdetails,callback:function(t){e.$set(e.returnOrderForm,"rdetails",t)},expression:"returnOrderForm.rdetails"}},[t("el-radio",{attrs:{label:0}},[e._v("仅裸机")]),t("el-radio",{attrs:{label:1}},[e._v("含配件")])],1)],1)],1),1==e.returnOrderForm.rdetails?t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"raccessory",label:"returnnum"===e.returnOrderForm.type?"寄出配件详情":"寄件配件详情"}},[t("el-input",{attrs:{placeholder:"returnnum"===e.returnOrderForm.type?"请输出寄件配件详情":"请输入寄出配件详情",clearable:""},model:{value:e.returnOrderForm.raccessory,callback:function(t){e.$set(e.returnOrderForm,"raccessory",t)},expression:"returnOrderForm.raccessory"}})],1)],1):e._e()],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleCloseReturnOrderChange}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmReturnOrderChange}},[e._v(e._s(e.$t("confirm")))])],1)],2),t("el-dialog",{attrs:{visible:e.confirmPasswordVisible,title:"二次确认","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.confirmPasswordVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.confirmPasswordLoading,expression:"confirmPasswordLoading"}],ref:"confirmPasswordForm",attrs:{model:e.confirmPasswordForm,rules:e.confirmPasswordRules,"label-width":"80px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleConfirmPasswordChange()}}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"password",label:"密码"}},[t("el-input",{attrs:{placeholder:"请输入密码",clearable:"","show-password":""},model:{value:e.confirmPasswordForm.password,callback:function(t){e.$set(e.confirmPasswordForm,"password",t)},expression:"confirmPasswordForm.password"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleCloseConfirmPasswordChange}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmPasswordChange}},[e._v(e._s(e.$t("confirm")))])],1)],2),t("el-dialog",{attrs:{width:"80%",visible:e.viewSnVisible,title:"售后网关信息","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewSnVisible=t}}},[t("el-form",{attrs:{inline:!0,model:e.viewSnForm},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryViewSnSearch.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"客户名称"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入客户名称",clearable:""},on:{clear:e.queryViewSnSearch},model:{value:e.viewSnForm.customername,callback:function(t){e.$set(e.viewSnForm,"customername",t)},expression:"viewSnForm.customername"}})],1),t("el-form-item",{attrs:{label:"网关型号"}},[t("el-select",{attrs:{size:"small",filterable:"",clearable:"",multiple:"",placeholder:e.$t("select")},on:{change:e.queryViewSnSearch},model:{value:e.viewSnForm.model,callback:function(t){e.$set(e.viewSnForm,"model",t)},expression:"viewSnForm.model"}},e._l(e.modelList,(function(r){return t("el-option",{key:r.value,attrs:{label:r.label,value:r.value}},[t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","max-width":"577px"}},[t("span",{style:{display:"inline-block",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",minWidth:"160px"},attrs:{title:r.label}},[e._v(e._s(r.label))]),t("span",{staticStyle:{color:"#8492a6","font-size":"13px",display:"inline-block","margin-left":"20px","text-align":"right",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"200px"},attrs:{title:r.comment||" "}},[e._v("\n                                    "+e._s(r.comment||"")+"\n                                ")])])])})),1)],1),t("el-form-item",{attrs:{label:"网关编号"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入网关编号",clearable:""},on:{clear:e.queryViewSnSearch},model:{value:e.viewSnForm.gwsn,callback:function(t){e.$set(e.viewSnForm,"gwsn",t)},expression:"viewSnForm.gwsn"}})],1),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:e.$t("select")},on:{change:e.queryViewSnSearch},model:{value:e.viewSnForm.queryStatus,callback:function(t){e.$set(e.viewSnForm,"queryStatus",t)},expression:"viewSnForm.queryStatus"}},e._l(e.statusList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"快速筛选"}},[t("el-checkbox-group",{attrs:{size:"small"},on:{change:e.queryViewSnSearch},model:{value:e.viewSnForm.checkboxList,callback:function(t){e.$set(e.viewSnForm,"checkboxList",t)},expression:"viewSnForm.checkboxList"}},e._l(e.checkboxList,(function(r){return t("el-checkbox-button",{key:r.value,attrs:{label:r.value}},[e._v(e._s(r.label))])})),1)],1),e.$hasPermission("aftermarket:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:e.queryViewSnSearch}},[e._v(e._s(e.$t("query")))])],1):e._e(),e.$hasPermission("aftermarket:delete:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"danger",disabled:0==e.selectSnIds.length||0==e.viewSnDataList.length,icon:"el-icon-delete"},on:{click:function(t){return e.handleDeleteSnChange()}}},[e._v(e._s(e.$t("delete")))])],1):e._e(),e.$hasPermission("aftermarket:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getViewSnDataList}},[t("i",{staticClass:"el-icon-refresh"})])],1):e._e()],1),t("vxe-table",{ref:"recordSnResponsiblepersonTable",staticStyle:{width:"100%"},attrs:{size:"medium",border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"",data:e.viewSnDataList,"max-height":600,loading:e.viewSnDataListLoading,"row-config":{keyField:"id"},"checkbox-config":e.checkboxConfig,"row-style":{height:"90px"}},on:{"checkbox-all":e.selectSnAll,"checkbox-change":e.dataListSelectionSnHandle}},[t("vxe-table-column",{key:"1",attrs:{type:"checkbox","header-align":"center",align:"center",width:"60",fixed:"left",checked:!1}}),t("vxe-table-column",{key:"2",attrs:{field:"sn",title:"客户网关信息","header-align":"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{domProps:{innerHTML:e._s("网关编号: "+(r.row.sn?r.row.rsn?r.row.rsn==r.row.sn||r.row.rsn.includes("无")?r.row.sn:r.row.sn+'(<span style="color: red; font-weight: bold;">更换</span>)':r.row.sn:"--")+"<br />网关型号: "+(r.row.model||"--")+"<br />")}})]}}])}),t("vxe-table-column",{key:"3",attrs:{field:"fault",title:"故障现象","header-align":"center",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.fault))])]}}])}),t("vxe-table-column",{key:"4",attrs:{field:"re1",title:"现场照片","header-align":"center",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.re1||r.row.re2||r.row.re3?t("img",{staticStyle:{"max-height":"70px"},attrs:{src:r.row.re1||r.row.re2||r.row.re3,alt:""},on:{click:function(t){return e.handleImgDialogVisibleChange(r.row,"picture")}}}):e._e()]}}])}),t("vxe-table-column",{key:"5",attrs:{field:"re4",title:"现场视频","header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.re4?t("video",{staticStyle:{height:"70px",width:"100%"},attrs:{src:r.row.re4},on:{click:function(t){return e.handleImageClickChange(r.row.re4)}}}):e._e()]}}])}),t("vxe-table-column",{key:"6",attrs:{field:"returnnum",title:"物流信息","header-align":"center",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.returnnum?t("div",{staticStyle:{display:"flex","justify-content":"flex-start","flex-direction":"column","align-items":"flex-start"}},[t("div",[e.validateExpressCode(r.row.returnnum)?t("a",{attrs:{href:"https://www.kuaidi100.com?nu="+encodeURIComponent(r.row.returnnum),target:"_blank"}},[e._v(e._s(r.row.returnnum))]):t("span",[e._v(e._s(r.row.returnnum))]),e.$hasPermission("aftermarket:update:permission.do")?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("update"),placement:"top-start"}},[t("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"5px",cursor:"pointer"},on:{click:function(t){return e.handleAddReturnOrderChange(r.row.id,r.row,"returnnum")}}})]):e._e()],1),t("div",[e._v(e._s("寄出时间："+(r.row.rdbtime?r.row.rdbtime:"")))]),t("div",[t("span",[e._v("寄件类型：")]),t("span",[e._v(e._s(0==r.row.rdetails?"仅裸机":r.row.raccessory?"含配件("+r.row.raccessory+")":"未知"))])])]):e._e(),e.$hasPermission("aftermarket:update:permission.do")&&!r.row.returnnum?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddReturnOrderChange(r.row.id,null,"returnnum")}}},[e._v("填写")]):e._e()]}}])}),t("vxe-table-column",{key:"8",attrs:{field:"re11",title:"分析照片","header-align":"center",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.re5||r.row.re6||r.row.re7?t("img",{staticStyle:{"max-height":"70px"},attrs:{src:r.row.re5||r.row.re6||r.row.re7,alt:""},on:{click:function(t){return e.handleImgDialogVisibleChange(r.row,"analyze")}}}):e._e(),r.row.re5||r.row.re6||r.row.re7||!e.$hasPermission("aftermarket:update:permission.do")?e._e():t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"},on:{click:function(t){return e.handleUploadSendChange(r.row,"analyze")}}},[e._v("点击上传")]),(r.row.re5||r.row.re6||r.row.re7)&&e.$hasPermission("aftermarket:update:permission.do")?t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",type:"primary",icon:"el-icon-upload"},on:{click:function(t){return e.handleUploadSendChange(r.row,"analyze")}}},[e._v("编辑图片")]):e._e()]}}])}),t("vxe-table-column",{key:"7",attrs:{field:"rsn",title:"网关信息","header-align":"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{domProps:{innerHTML:e._s("网关编号: "+(r.row.rsn||"--")+"<br />\n网关型号: "+(r.row.rmodel||"--")+"<br />\n")}})]}}])}),t("vxe-table-column",{key:"9",attrs:{field:"notes",title:"备注","header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.notes?t("span",[e._v(e._s(r.row.notes))]):e._e(),e.$hasPermission("aftermarket:update:permission.do")&&!r.row.notes?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddNotesChange(r.row.id,"")}}},[e._v("填写")]):e._e()]}}])}),t("vxe-table-column",{key:"10",attrs:{field:"duration",title:"处理时长","header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.duration)+"\n                    ")]}}])}),t("vxe-table-column",{key:"11",attrs:{field:"status",title:"当前状态","header-align":"center",align:"center",width:"120",fixed:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",[t("span",[e._v("当前状态")]),t("div",{staticStyle:{color:"#f00","font-size":"12px","font-weight":"lighter"}},[e._v("(悬浮查看详情)")])])]},proxy:!0},{key:"default",fn:function(r){return[t("el-popover",{attrs:{placement:"top",width:"450",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("span",{staticClass:"status-text",staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation()}}},[e._v("\n                                    "+e._s(e.getStatusText(r.row.status))+"\n                                ")])]},proxy:!0}],null,!0)},[t("div",{staticClass:"popover-content"},[t("p",[t("strong",[e._v("当前状态：")]),e._v(e._s(e.getStatusText(r.row.status)))]),t("el-timeline",[t("el-timeline-item",{class:{"status-positive":r.row.status>0,"status-negative":r.row.status<=0},attrs:{color:r.row.status-0>=0?"#0bbd87":"",timestamp:r.row.dbtime}},[e._v("\n                                        信息待完善\n                                    ")]),t("el-timeline-item",{class:{"status-positive":r.row.status>1,"status-negative":r.row.status<=1},attrs:{color:r.row.status-1>=0?"#0bbd87":"",timestamp:r.row.redbtime}},[e._v("\n                                        待收件后处理 "),r.row.receipt?t("span",[e._v("(寄出单号: "),r.row.receipt?t("a",{staticStyle:{"margin-left":"5px"},attrs:{href:"https://www.kuaidi100.com?nu="+encodeURIComponent(r.row.receipt),target:"_blank"}},[e._v(e._s(r.row.receipt))]):e._e(),e._v(")")]):e._e()]),t("el-timeline-item",{class:{"status-positive":r.row.status>2,"status-negative":r.row.status<=2},attrs:{color:r.row.status-2>=0?"#0bbd87":""}},[e._v("\n                                        分析中\n                                    ")]),t("el-timeline-item",{class:{"status-positive":r.row.status>3,"status-negative":r.row.status<=3},attrs:{color:r.row.status-3>=0?"#0bbd87":""}},[e._v("\n                                        处理中\n                                    ")]),t("el-timeline-item",{class:{"status-positive":r.row.status>4,"status-negative":r.row.status<=4},attrs:{color:r.row.status-4>=0?"#0bbd87":""}},[e._v("\n                                        待寄回\n                                    ")]),t("el-timeline-item",{class:{"status-positive":r.row.status>5,"status-negative":r.row.status<=5},attrs:{color:r.row.status-5>=0?"#0bbd87":"",timestamp:r.row.rdbtime}},[e._v("\n                                        待收件 "),r.row.returnnum?t("span",[e._v("(寄出单号: "),t("a",{staticStyle:{"margin-left":"5px"},attrs:{href:"https://www.kuaidi100.com?nu="+encodeURIComponent(r.row.returnnum),target:"_blank"}},[e._v(e._s(r.row.returnnum))]),e._v(")")]):e._e()]),t("el-timeline-item",{class:{"status-positive":r.row.status>=6,"status-negative":r.row.status<6},attrs:{color:r.row.status-6>=0?"#0bbd87":""}},[e._v("\n                                        已签收\n                                    ")])],1)],1)])]}}])}),t("vxe-table-column",{key:"12",attrs:{field:"responsibleperson",title:"售后处理","header-align":"center",align:"center",width:"110",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[e.$hasPermission("aftermarketRes:select:permission.do")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleViewResponsiblepersonChange(r.row,"option")}}},[e._v("查看 "+e._s(r.row.rescount>0?"("+r.row.rescount+")":""))]):e._e(),e.$hasPermission("aftermarketRes:insert:permission.do")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddResponsiblepersonChange(r.row,"add")}}},[e._v("添加")]):e._e()]}}])}),t("vxe-table-column",{key:"13",attrs:{title:e.$t("handle"),"header-align":"center",align:"center",width:"130",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",{staticStyle:{display:"flex","flex-wrap":"wrap","flex-direction":"row",overflow:"hidden"}},[e.$hasPermission("aftermarket:update:permission.do")?t("el-button",{staticStyle:{width:"45%"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddNotesChange(r.row.id,r.row.notes,"deleteSn")}}},[e._v(e._s("修改备注"))]):e._e(),e.$hasPermission("aftermarket:delete:permission.do")?t("el-button",{staticStyle:{width:"45%",padding:"0",margin:"0"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDeleteSnChange(r.row.id)}}},[e._v(e._s(e.$t("delete")))]):e._e()],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.viewSnPage,"page-sizes":[10,20,50,100],"page-size":e.viewSnLimit,total:e.viewSnTotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.viewSnPage=t},"update:current-page":function(t){e.viewSnPage=t},"size-change":e.pageSizeViewSnChangeHandle,"current-change":e.pageCurrentViewSnChangeHandle}})],1),t("el-dialog",{attrs:{width:"80%",visible:e.viewResponsiblepersonVisible,title:"售后处理","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.viewResponsiblepersonVisible=t}}},[t("el-form",{attrs:{inline:!0,model:e.viewResponsiblepersonForm},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryViewResponsiblepersonSearch.apply(null,arguments)}}},[e.$hasPermission("aftermarketRes:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:e.getViewResponsiblepersonDataList}},[e._v(e._s(e.$t("query")))])],1):e._e(),"option"===e.viewResponsiblepersonType&&e.$hasPermission("aftermarketRes:insert:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAddResponsiblepersonChange({id:e.viewResponsiblepersonForm.aid||e.responsiblepersonForm.aid},"add")}}},[e._v("\n                        添加\n                    ")])],1):e._e(),"option"===e.viewResponsiblepersonType&&e.$hasPermission("aftermarketRes:delete:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"danger",disabled:0==e.viewResponsiblepersonDataListSelection.length||0==e.viewResponsiblepersonDataList.length,icon:"el-icon-delete"},on:{click:function(t){return e.handleDeleteResponsiblepersonChange()}}},[e._v("\n                        删除\n                    ")])],1):e._e(),e.$hasPermission("aftermarketRes:select:permission.do")?t("el-form-item",[t("el-button",{attrs:{size:"small",type:"success"},on:{click:e.getViewResponsiblepersonDataList}},[t("i",{staticClass:"el-icon-refresh"})])],1):e._e()],1),t("vxe-table",{ref:"recordviewResponsiblepersonTable",staticStyle:{width:"100%"},attrs:{size:"medium",border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"","show-header-overflow":"","highlight-hover-row":"","highlight-current-row":"",data:e.viewResponsiblepersonDataList,"max-height":600,loading:e.viewResponsiblepersonDataListLoading,"row-config":{keyField:"id"},"checkbox-config":e.checkboxConfig},on:{"checkbox-all":e.selectResponsiblepersonAll,"checkbox-change":e.dataListSelectionResponsiblepersonHandle}},[t("vxe-table-column",{key:"1",attrs:{type:"checkbox","header-align":"center",align:"center",width:"60",fixed:"left",checked:!1}}),t("vxe-table-column",{key:"2",attrs:{field:"uid",title:"责任人","header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.username))])]}}])}),t("vxe-table-column",{key:"3",attrs:{field:"reason",title:"原因分析","header-align":"center",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.reason))])]}}])}),t("vxe-table-column",{key:"4",attrs:{field:"resolution",title:"处理意见","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.resolution))])]}}])}),t("vxe-table-column",{key:"5",attrs:{field:"improvement",title:"改进措施","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.improvement))])]}}])}),t("vxe-table-column",{key:"6",attrs:{field:"dbtime",title:"创建时间","header-align":"center",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.dbtime))])]}}])}),"option"===e.viewResponsiblepersonType?t("vxe-table-column",{key:"7",attrs:{title:e.$t("handle"),"header-align":"center",align:"center",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[e.$hasPermission("aftermarket:update:permission.do")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleAddResponsiblepersonChange(r.row,"edit")}}},[e._v(e._s(e.$t("update")))]):e._e(),e.$hasPermission("aftermarket:delete:permission.do")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDeleteResponsiblepersonChange(r.row.id)}}},[e._v(e._s(e.$t("delete")))]):e._e()]}}],null,!1,2724212159)}):e._e()],1),t("el-pagination",{attrs:{"current-page":e.viewResponsiblepersonPage,"page-sizes":[10,20,50,100],"page-size":e.viewResponsiblepersonLimit,total:e.viewResponsiblepersonTotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.viewResponsiblepersonPage=t},"update:current-page":function(t){e.viewResponsiblepersonPage=t},"size-change":e.pageSizeViewResponsiblepersonChangeHandle,"current-change":e.pageCurrentViewResponsiblepersonChangeHandle}})],1),t("el-dialog",{attrs:{visible:e.afterSaleNotesVisible,title:"备注","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.afterSaleNotesVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.afterSaleNotesLoading,expression:"afterSaleNotesLoading"}],ref:"afterSaleNotesForm",attrs:{model:e.afterSaleNotesForm,rules:e.afterSaleNotesRules,"label-width":"80px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.handleAfterSaleNotesSubmitChange())}}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"notes",label:"备注"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入备注",clearable:""},nativeOn:{keyup:function(t){return e.handleKeydown.apply(null,arguments)}},model:{value:e.afterSaleNotesForm.notes,callback:function(t){e.$set(e.afterSaleNotesForm,"notes",t)},expression:"afterSaleNotesForm.notes"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleCloseAfterSaleNotesChange}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleAfterSaleNotesSubmitChange}},[e._v(e._s(e.$t("confirm")))])],1)],2),t("el-dialog",{attrs:{visible:e.responsiblepersonVisible,title:"add"===e.responsiblepersonForm.type?"添加责任人":"修改责任人","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.responsiblepersonVisible=t}}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.responsiblepersonLoading,expression:"responsiblepersonLoading"}],ref:"responsiblepersonForm",attrs:{model:e.responsiblepersonForm,"label-width":"80px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.handleResponsiblepersonSubmitChange())}}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"username",label:"责任人"}},[t("el-input",{attrs:{disabled:"",placeholder:"请输入责任人",clearable:""},model:{value:e.responsiblepersonForm.username,callback:function(t){e.$set(e.responsiblepersonForm,"username",t)},expression:"responsiblepersonForm.username"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"reason",label:"原因分析"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入原因分析",clearable:""},nativeOn:{keyup:function(t){return e.handleKeydown.apply(null,arguments)}},model:{value:e.responsiblepersonForm.reason,callback:function(t){e.$set(e.responsiblepersonForm,"reason",t)},expression:"responsiblepersonForm.reason"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"resolution",label:"处理意见"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入处理意见",clearable:""},nativeOn:{keyup:function(t){return e.handleKeydown.apply(null,arguments)}},model:{value:e.responsiblepersonForm.resolution,callback:function(t){e.$set(e.responsiblepersonForm,"resolution",t)},expression:"responsiblepersonForm.resolution"}})],1)],1),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{prop:"improvement",label:"改进措施"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"请输入改进措施",clearable:""},nativeOn:{keyup:function(t){return e.handleKeydown.apply(null,arguments)}},model:{value:e.responsiblepersonForm.improvement,callback:function(t){e.$set(e.responsiblepersonForm,"improvement",t)},expression:"responsiblepersonForm.improvement"}})],1)],1)],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleCloseResponsiblepersonChange}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleResponsiblepersonSubmitChange}},[e._v(e._s(e.$t("confirm")))])],1)],2),t("el-dialog",{attrs:{title:"图片查看",visible:e.imgDialogVisible},on:{"update:visible":function(t){e.imgDialogVisible=t}}},[t("el-row",{attrs:{gutter:10}},e._l(e.imgList,(function(r,n){return t("el-col",{key:n,attrs:{span:1==e.imgList.length?24:2==e.imgList.length?12:8}},[t("div",{style:{marginTop:n>2?"10px":0}},[t("el-card",{attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[t("img",{staticClass:"image",style:{width:"100%"},attrs:{src:r},on:{click:function(t){return e.handleImageClickChange(r)}}})])],1)])})),1)],1),t("el-dialog",{attrs:{title:"customer"===e.uploadImgForm.type?"客户寄出照片上传":"company"===e.uploadImgForm.type?"寄出照片上传":"分析照片上传",visible:e.uploadImgDialogVisible},on:{"update:visible":function(t){e.uploadImgDialogVisible=t}}},["customer"===e.uploadImgForm.type?t("el-upload",{attrs:{multiple:"",action:"",limit:3,"http-request":e.handleUploadSendImageChange,"file-list":e.sendFileList,"list-type":"picture-card","on-exceed":e.handleExceedChange,"before-upload":e.handleBeforeUploadChange,"on-change":e.handleSendFileChange,"on-remove":e.handleDeleteSendFileChange}},[t("i",{staticClass:"el-icon-plus"})]):"company"===e.uploadImgForm.type?t("el-upload",{attrs:{multiple:"",action:"",limit:3,"http-request":e.handleUploadSendImageChange,"file-list":e.receiveFileList,"list-type":"picture-card","on-exceed":e.handleExceedChange,"before-upload":e.handleBeforeUploadChange,"on-change":e.handleSendFileChange,"on-remove":e.handleDeleteSendFileChange}},[t("i",{staticClass:"el-icon-plus"})]):t("el-upload",{attrs:{multiple:"",action:"",limit:3,"http-request":e.handleUploadSendImageChange,"file-list":e.analyzeFileList,"list-type":"picture-card","on-exceed":e.handleExceedChange,"before-upload":e.handleBeforeUploadChange,"on-change":e.handleSendFileChange,"on-remove":e.handleDeleteSendFileChange}},[t("i",{staticClass:"el-icon-plus"})]),t("template",{slot:"footer"},[t("el-button",{on:{click:e.handleCloseUploadImageChange}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleUploadImageSubmitChange}},[e._v(e._s(e.$t("confirm")))])],1)],2),t("el-dialog",{attrs:{"custom-class":"afterSaleDetailClass",visible:e.aftermarketVisible,title:"售后详情","close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},on:{"update:visible":function(t){e.aftermarketVisible=t}}},[t("template",{slot:"title"},[t("div",{staticClass:"el-dialog__title",staticStyle:{display:"flex","align-items":"center"}},[t("span",[e._v("售后详情")]),e.showSecret?t("img",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{src:r("c9462"),alt:""},on:{click:function(t){e.showSecret=!1}}}):t("img",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{src:r("08cd"),alt:""},on:{click:function(t){e.showSecret=!0}}})])]),t("el-descriptions",{attrs:{column:3,border:""}},[t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("项目名称")])]),e._v("\n                    "+e._s(e.aftermarketInfo.project?e.showSecret?e.maskProjectName(e.aftermarketInfo.project):e.aftermarketInfo.project:"")+"\n                ")],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("客户名称")])]),t("span",{domProps:{innerHTML:e._s("公司名称: "+(e.aftermarketInfo.comp?e.showSecret?e.maskProjectName(e.aftermarketInfo.comp):e.aftermarketInfo.comp:"--")+"<br />\n联系人: "+(e.aftermarketInfo.contact?e.showSecret?e.maskContactName(e.aftermarketInfo.contact):e.aftermarketInfo.contact:"--")+"<br />\n联系方式: "+(e.aftermarketInfo.contactinfo?e.showSecret?e.maskPhone(e.aftermarketInfo.contactinfo):e.aftermarketInfo.contactinfo:"--"))}})],2),t("el-descriptions-item",{attrs:{span:2}},[t("template",{slot:"label"},[t("span",[e._v("客户网关信息")])]),t("div",[t("span",[e._v("网关编号: ")]),t("span",{domProps:{innerHTML:e._s(e.aftermarketInfo.sn?e.aftermarketInfo.rsn?e.aftermarketInfo.rsn==e.aftermarketInfo.sn||e.aftermarketInfo.rsn.includes("无")?e.showSecret?e.maskGatewayId(e.aftermarketInfo.sn):e.aftermarketInfo.sn:e.showSecret?e.maskGatewayId(e.aftermarketInfo.sn)+'(<span style="color: red; font-weight: bold;">更换</span>)':e.aftermarketInfo.sn+'(<span style="color: red; font-weight: bold;">更换</span>)':e.showSecret?e.maskGatewayId(e.aftermarketInfo.sn):e.aftermarketInfo.sn:"--")}})]),t("div",[t("span",[e._v("网关型号: ")]),t("span",[e._v(e._s(e.aftermarketInfo.model||"--"))])])],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("span",[e._v("售后处理")])]),e.$hasPermission("aftermarketRes:select:permission.do")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleViewResponsiblepersonChange(e.aftermarketInfo,"view")}}},[e._v("查看")]):e._e()],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("故障现象")])]),e._v("\n                    "+e._s(e.aftermarketInfo.fault)+"\n                ")],2),t("el-descriptions-item",{attrs:{contentStyle:{width:"160px"}}},[t("template",{slot:"label"},[t("span",[e._v("对接工程师")])]),e._v("\n                    "+e._s(e.aftermarketInfo.dock)+"\n                ")],2),t("el-descriptions-item",{attrs:{contentStyle:{width:"160px"}}},[t("template",{slot:"label"},[t("span",[e._v("状态")])]),t("el-popover",{attrs:{placement:"top",width:"450",trigger:"hover"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("span",{staticClass:"status-text",staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation()}}},[e._v("\n                                "+e._s(e.getStatusText(e.aftermarketInfo.status))+"\n                            ")])]},proxy:!0}])},[t("div",{staticClass:"popover-content"},[t("p",[t("strong",[e._v("当前状态：")]),e._v(e._s(e.getStatusText(e.aftermarketInfo.status)))]),t("el-timeline",[t("el-timeline-item",{class:{"status-positive":e.aftermarketInfo.status>0,"status-negative":e.aftermarketInfo.status<=0},attrs:{color:e.aftermarketInfo.status-0>=0?"#0bbd87":"",timestamp:e.aftermarketInfo.dbtime}},[e._v("\n                                    信息待完善\n                                ")]),t("el-timeline-item",{class:{"status-positive":e.aftermarketInfo.status>1,"status-negative":e.aftermarketInfo.status<=1},attrs:{color:e.aftermarketInfo.status-1>=0?"#0bbd87":"",timestamp:e.aftermarketInfo.redbtime}},[e._v("\n                                    待收件后处理 "),e.aftermarketInfo.receipt?t("span",[e._v("(快递单号: "),t("a",{staticStyle:{"margin-left":"5px"},attrs:{href:"https://www.kuaidi100.com?nu="+encodeURIComponent(e.aftermarketInfo.receipt),target:"_blank"}},[e._v(e._s(e.aftermarketInfo.receipt))]),e._v(")")]):e._e()]),t("el-timeline-item",{class:{"status-positive":e.aftermarketInfo.status>2,"status-negative":e.aftermarketInfo.status<=2},attrs:{color:e.aftermarketInfo.status-2>=0?"#0bbd87":""}},[e._v("\n                                    分析中\n                                ")]),t("el-timeline-item",{class:{"status-positive":e.aftermarketInfo.status>3,"status-negative":e.aftermarketInfo.status<=3},attrs:{color:e.aftermarketInfo.status-3>=0?"#0bbd87":""}},[e._v("\n                                    处理中\n                                ")]),t("el-timeline-item",{class:{"status-positive":e.aftermarketInfo.status>4,"status-negative":e.aftermarketInfo.status<=4},attrs:{color:e.aftermarketInfo.status-4>=0?"#0bbd87":""}},[e._v("\n                                    待寄回\n                                ")]),t("el-timeline-item",{class:{"status-positive":e.aftermarketInfo.status>5,"status-negative":e.aftermarketInfo.status<=5},attrs:{color:e.aftermarketInfo.status-5>=0?"#0bbd87":"",timestamp:e.aftermarketInfo.rdbtime}},[e._v("\n                                    待收件 "),e.aftermarketInfo.returnnum?t("span",[e._v("(快递单号: "),e.aftermarketInfo.returnnum?t("a",{staticStyle:{"margin-left":"5px"},attrs:{href:"https://www.kuaidi100.com?nu="+encodeURIComponent(e.aftermarketInfo.returnnum),target:"_blank"}},[e._v(e._s(e.aftermarketInfo.returnnum))]):e._e(),e._v(")")]):e._e()]),t("el-timeline-item",{class:{"status-positive":e.aftermarketInfo.status>=6,"status-negative":e.aftermarketInfo.status<6},attrs:{color:e.aftermarketInfo.status-6>=0?"#0bbd87":""}},[e._v("\n                                    已签收\n                                ")])],1)],1)])],2),t("el-descriptions-item",{attrs:{contentStyle:{width:"160px"}}},[t("template",{slot:"label"},[t("span",[e._v("创建时间")])]),e._v("\n                    "+e._s(e.aftermarketInfo.dbtime)+"\n                ")],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("客户寄出信息")])]),t("div",[t("span",[e._v("快递单号: ")]),e.aftermarketInfo.receipt&&!e.aftermarketInfo.receipt.includes("无")?t("a",{attrs:{href:"https://www.kuaidi100.com?nu="+encodeURIComponent(e.aftermarketInfo.receipt),target:"_blank"}},[e._v(e._s(e.showSecret?e.maskAddress(e.aftermarketInfo.receipt):e.aftermarketInfo.receipt))]):e.aftermarketInfo.receipt.includes("无")?t("span",[e._v(e._s(e.aftermarketInfo.receipt))]):t("span",[e._v("无")])]),t("div",[t("span",[e._v("客户寄出时间: ")]),t("span",[e._v(e._s(e.aftermarketInfo.redbtime?e.aftermarketInfo.redbtime:""))])]),t("div",[t("span",[e._v("客户寄件类型: ")]),t("span",[e._v(e._s(0==e.aftermarketInfo.details?"仅裸机":e.aftermarketInfo.accessory?"含配件("+e.aftermarketInfo.accessory+")":"含配件"))])])],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("客户收件信息")])]),t("div",[t("div",[e._v("联系人: "+e._s(e.aftermarketInfo.rcontact?e.showSecret?e.maskContactName(e.aftermarketInfo.rcontact):e.aftermarketInfo.rcontact:"--"))]),t("div",[e._v("联系方式: "+e._s(e.aftermarketInfo.rcontactinfo?e.showSecret?e.maskPhone(e.aftermarketInfo.rcontactinfo):e.aftermarketInfo.rcontactinfo:"--"))]),t("div",[e._v("地址: "+e._s(e.aftermarketInfo.raddress?e.showSecret?e.maskAddress(e.aftermarketInfo.raddress):e.aftermarketInfo.raddress:"--"))])])],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("厂家寄出信息")])]),t("div",[e._v("\n                        快递单号:\n                        "),e.aftermarketInfo.returnnum?[e.aftermarketInfo.returnnum.includes("无")?t("span",[e._v(e._s(e.aftermarketInfo.returnnum))]):t("a",{attrs:{href:"https://www.kuaidi100.com?nu="+encodeURIComponent(e.aftermarketInfo.returnnum),target:"_blank"}},[e._v("\n                                "+e._s(e.showSecret?e.maskAddress(e.aftermarketInfo.returnnum):e.aftermarketInfo.returnnum)+"\n                            ")])]:[e._v("\n                            --\n                        ")]],2),t("div",[e._v("厂家寄出时间: "+e._s(e.aftermarketInfo.rdbtime?e.aftermarketInfo.rdbtime:""))]),t("div",[e._v("厂家寄件类型: "+e._s(0==e.aftermarketInfo.details?"仅裸机":e.aftermarketInfo.raccessory?"含配件("+e.aftermarketInfo.raccessory+")":"含配件"))])],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("厂家寄出网关信息")])]),t("div",[e._v("网关编号: "+e._s(e.aftermarketInfo.rsn?e.showSecret?e.maskGatewayId(e.aftermarketInfo.rsn):e.aftermarketInfo.rsn:"--"))]),t("div",[e._v("网关型号: "+e._s(e.aftermarketInfo.rmodel?e.aftermarketInfo.rmodel:"--"))])],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("现场照片")])]),t("div",{staticStyle:{display:"flex","flex-wrap":"wrap",gap:"10px"}},[e.aftermarketInfo.re1?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re1,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re1)}}}):e._e(),e.aftermarketInfo.re2?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re2,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re2)}}}):e._e(),e.aftermarketInfo.re3?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re3,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re3)}}}):e._e()])],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("现场视频")])]),e.aftermarketInfo.re4?t("video",{staticStyle:{height:"70px",width:"100%"},attrs:{src:e.aftermarketInfo.re4},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re4)}}}):e._e()],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("客户寄出照片")])]),t("div",{staticStyle:{display:"flex","flex-wrap":"wrap",gap:"10px"}},[e.aftermarketInfo.re5?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re5,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re5)}}}):e._e(),e.aftermarketInfo.re6?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re6,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re6)}}}):e._e(),e.aftermarketInfo.re7?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re7,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re7)}}}):e._e()])],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("厂家寄出照片")])]),t("div",{staticStyle:{display:"flex","flex-wrap":"wrap",gap:"10px"}},[e.aftermarketInfo.re8?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re8,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re8)}}}):e._e(),e.aftermarketInfo.re9?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re9,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re9)}}}):e._e(),e.aftermarketInfo.re10?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re10,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re10)}}}):e._e()])],2),t("el-descriptions-item",{attrs:{span:3}},[t("template",{slot:"label"},[t("span",[e._v("厂家分析照片")])]),t("div",{staticStyle:{display:"flex","flex-wrap":"wrap",gap:"10px"}},[e.aftermarketInfo.re11?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re11,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re11)}}}):e._e(),e.aftermarketInfo.re12?t("img",{staticStyle:{"max-height":"70px",cursor:"pointer"},attrs:{src:e.aftermarketInfo.re12,alt:""},on:{click:function(t){return e.handleImageClickChange(e.aftermarketInfo.re12)}}}):e._e()])],2)],1)],2),e.addOrUpdateVisible?t("aftersaleAddOrUpdate",{ref:"aftersaleAddOrUpdateRef",attrs:{id:e.propId},on:{refreshDataList:e.getDataList}}):e._e()],1)},a=[],s=(r("7f7f"),r("f559"),r("20d6"),r("c5f6"),r("28a5"),r("ac6a"),r("14b9"),r("a481"),r("add5")),i=r.n(s),o=r("b047"),l=r.n(o),c=r("376b"),d=r("851c"),p={SF:/^\d{12}$|^[A-Za-z]\d{12}$/,ZTO:/^\d{12}$/,STO:/^\d{12}$/,YTO:/^\d{10,12}$/,YD:/^\d{13}$/,EMS:/^[A-Z]{2}\d{9}[A-Z]{2}$/,COMMON:/^[A-Za-z0-9]{8,20}$/},u={data:function(){return{propId:"",page:1,limit:20,total:0,selectIds:[],dataListLoading:!1,checkboxConfig:{reserve:!0,highlight:!0,checkField:"checked"},imgList:[],imgDialogVisible:!1,dataList:[],modelList:[],scrollTableHeight:window.innerHeight-220-116,dataForm:{queryStatus:void 0,customername:"",gwsn:"",prjName:"",checkboxList:[]},statusBigList:[{label:"待收件",value:0},{label:"进行中",value:1},{label:"完成",value:2}],statusList:[{label:"待处理",value:1},{label:"分析中",value:2},{label:"处理中",value:3},{label:"待厂家发出",value:4}],checkboxList:[{label:"与我有关",value:"me"},{label:"近7日待处理",value:"handle"}],pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},returnOrderVisible:!1,returnOrderLoading:!1,returnOrderForm:{id:"",type:"",returnOrder:"",returnOrderType:1,rsn:"",rdetails:0,raccessory:""},returnOrderRules:{returnOrder:[{required:!0,message:"请输入快递单号",trigger:"change"}],raccessory:[{required:!0,message:"请输入厂家寄件配件详情",trigger:"change"}]},uploadImgDialogVisible:!1,sendFileList:[],receiveFileList:[],analyzeFileList:[],uploadImgForm:{id:"",type:""},confirmPasswordVisible:!1,confirmPasswordLoading:!1,confirmPasswordForm:{type:"",password:""},confirmPasswordRules:{password:[{required:!0,message:"请输入密码",trigger:"change"}]},afterSaleNotesVisible:!1,afterSaleNotesLoading:!1,afterSaleNotesForm:{id:"",type:"",notes:""},afterSaleNotesRules:{notes:[{required:!0,message:"请输入备注",trigger:"change"}]},viewSnPage:1,viewSnLimit:20,viewSnTotal:0,selectSnIds:[],viewSnVisible:!1,viewSnForm:{cid:"",queryStatus:void 0,customername:"",gwsn:"",model:void 0,checkboxList:[]},viewSnDataList:[],viewSnDataListLoading:!1,viewResponsiblepersonType:null,viewResponsiblepersonVisible:!1,viewResponsiblepersonLoading:!1,viewResponsiblepersonForm:{aid:"",uid:"",sn:""},viewResponsiblepersonPage:1,viewResponsiblepersonLimit:20,viewResponsiblepersonTotal:0,viewResponsiblepersonDataList:[],viewResponsiblepersonDataListLoading:!1,viewResponsiblepersonDataListSelection:[],responsiblepersonVisible:!1,responsiblepersonLoading:!1,responsiblepersonForm:{type:"add",id:"",aid:"",username:"",sn:"",reason:"",resolution:"",improvement:""},responsiblepersonRules:{username:[{required:!0,message:"请输入责任人",trigger:"change"}],reason:[{required:!0,message:"请输入原因分析",trigger:"change"}],resolution:[{required:!0,message:"请输入处理意见",trigger:"change"}],improvement:[{required:!0,message:"请输入改进措施",trigger:"change"}]},showSecret:!1,aftermarketVisible:!1,aftermarketInfo:{id:1,accessory:"",contact:"",contactinfo:"",comp:"",project:"",sn:"",model:"",details:0,fault:"",dock:"",status:0,receipt:"",redbtime:"",rcontact:"",rcontactinfo:"",raddress:"",dbtime:"",uuid:"",re1:"",re2:"",re3:"",re4:"",re5:"",re6:"",re7:"",re8:"",re9:"",re10:"",re11:"",re12:"",rsn:"",rmodel:"",rdetails:0,raccessory:""},addOrUpdateVisible:!1}},components:{aftersaleAddOrUpdate:d["default"]},methods:{getRowStyle:function(e){var t=e.row,r=(e.rowIndex,"140px");return 4==t.afterMarketPojoList.length?r="120px":t.afterMarketPojoList.length<=3&&(r="90px"),{height:r}},validateExpressCode:function(e){for(var t in e=e.trim(),p)if(p[t].test(e))return!0;return!1},maskPhone:function(e){return!e||e.length<11||!/^\d{11}$/.test(e.replace(/\D/g,""))?e:e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},maskGatewayId:function(e){if(!e)return e;var t=e.length;return t<=6?e:"*".repeat(t-6)+e.slice(-6)},maskContactName:function(e){return e?e.length<=1?e:e[0]+"*".repeat(e.length-1):e},maskProjectName:function(e){if(!e)return e;var t=e.length,r=Math.floor(t/2);return e.slice(0,r)+"*".repeat(t-r)},maskAddress:function(e){if(!e)return e;var t=e.length,r=Math.floor(t/2);return e.slice(0,r)+"*".repeat(t-r)},handleKeydown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation())},handleQueryStatusChange:function(e){e===this.dataForm.queryStatus?this.dataForm.queryStatus=null:this.dataForm.queryStatus=e,this.getDataList()},getModeList:function(){var e=this;e.modelList=[],e.$http.get("/gwtype/interface/selectModelAndComment.do",{params:{}}).then((function(t){var r=t.data;if(0!=r.code)return e.$message.error(r.data||r.msg);var n=r.data;n.length>0&&n.forEach((function(t){var r={id:t.id||null,label:t.model,value:t.model,comment:t.comment,superId:t.superId||0};e.modelList.push(r)}))})).catch((function(e){return!1}))},pageSizeChangeHandle:function(e){this.page=1,this.limit=e,this.scrollTableHeightStore=0,this.getDataList()},pageCurrentChangeHandle:function(e){this.page=e,this.scrollTableHeightStore=0,this.getDataList()},querySearch:function(){this.page=1,this.getDataList()},getDataList:l()((function(){var e=this,t={page:e.page,limit:e.limit};e.dataForm.customername&&(t["cname"]=e.dataForm.customername),e.dataForm.prjName&&(t["pname"]=e.dataForm.prjName),e.dataForm.gwsn&&(t["sn"]=e.dataForm.gwsn),e.dataForm.queryStatus&&(t["status"]=e.dataForm.queryStatus),e.dataForm.checkboxList&&e.dataForm.checkboxList.length>0&&(e.dataForm.checkboxList.includes("me")&&(t["uid"]=e.$store.state.user.id),e.dataForm.checkboxList.includes("handle")&&(t["dbtime"]=new Date((new Date).getTime()).toISOString().split("T")[0])),e.dataListLoading=!0,e.total=0,e.$http.get("/aftermarketComp/getPage.do",{params:t}).then((function(r){var n=r.data;if(e.$refs.recordTable.clearCheckboxRow(),e.$refs.recordTable.clearCheckboxReserve(),0!=n.code)return e.dataList=[],e.dataListLoading=!1,e.$message.error(n.data||n.msg);n.data.list.length>0?(e.page=t.page,e.dataList=n.data.list,e.total=Number(n.data.total),e.$refs.recordTable.loadData(e.dataList),e.dataListLoading=!1):(e.dataList=[],e.total=0,e.page=1,e.dataListLoading=!1)})).catch((function(t){return e.dataListLoading=!1,!1}))}),100,{leading:!0,trailing:!1}),getStatusBigText:function(e){return 0===e?"待收件":1===e?"进行中":2===e?"完成":"未知"},getStatusText:function(e){return 0===e?"信息待完善":1===e?"待收件后处理":2===e?"分析中":3===e?"处理中":4===e?"待寄回":5===e?"待收件":6===e?"已签收":"未知"},getLeftSnAndStatusInfo:function(e){var t=this,r="",n=e.slice(5);return n.forEach((function(e,a){a!=n.length-1?r+=e.sn+"    "+t.getStatusText(e.status)+"<br />":r+=e.sn+"    "+t.getStatusText(e.status)})),r},getRowKey:function(e){return e.id},handleImgDialogVisibleChange:function(e,t){this.imgList=[],"picture"===t||"sendPicture"===t?(e.re1&&this.imgList.push(e.re1),e.re2&&this.imgList.push(e.re2),e.re3&&this.imgList.push(e.re3)):(e.re4&&this.imgList.push(e.re4),e.re5&&this.imgList.push(e.re5),e.re6&&this.imgList.push(e.re6)),this.imgList.length>0&&(this.imgDialogVisible=!0)},handleImageClickChange:function(e){window.open(e,"_blank")},handleViewSnListChange:function(e){var t=this;this.viewSnForm={cid:e.id,queryStatus:void 0,customername:"",model:void 0,gwsn:"",checkboxList:[]},this.viewSnPage=1,this.viewSnLimit=20,this.viewSnTotal=0,this.viewSnDataList=[],this.viewSnDataListLoading=!1,this.viewSnForm.gwsn=e.rsn||"",this.viewSnVisible=!0,this.$nextTick((function(){t.getViewSnDataList()}))},pageSizeViewSnChangeHandle:function(e){this.viewSnPage=1,this.viewSnLimit=e,this.getViewSnDataList()},pageCurrentViewSnChangeHandle:function(e){this.viewSnPage=e,this.getViewSnDataList()},queryViewSnSearch:function(){this.viewSnPage=1,this.getViewSnDataList()},getViewSnDataList:l()((function(){var e=this,t={page:e.viewSnPage,limit:e.viewSnLimit,cid:e.viewSnForm.cid};e.viewSnForm.model&&e.viewSnForm.model.length>0&&(t["gws"]=e.viewSnForm.model.join(",")),e.viewSnForm.gwsn&&(t["sn"]=e.viewSnForm.gwsn),e.viewSnForm.queryStatus&&(t["status"]=e.viewSnForm.queryStatus),e.viewSnForm.checkboxList&&e.viewSnForm.checkboxList.length>0&&(e.viewSnForm.checkboxList.includes("me")&&(t["uid"]=e.$store.state.user.id),e.viewSnForm.checkboxList.includes("handle")&&(t["dbtime"]=new Date((new Date).getTime()).toISOString().split("T")[0])),e.viewSnDataListLoading=!0,e.viewSnTotal=0,e.$http.get("/aftermarket/getPage.do",{params:t}).then((function(r){var n=r.data;if(0!=n.code)return e.viewSnDataList=[],e.viewSnDataListLoading=!1,e.$message.error(n.data||n.msg);e.$refs.recordSnResponsiblepersonTable.clearCheckboxRow(),e.$refs.recordSnResponsiblepersonTable.clearCheckboxReserve(),n.data.list.length>0?(e.viewSnPage=t.page,e.viewSnDataList=n.data.list,e.viewSnTotal=Number(n.data.total),e.$refs.recordSnResponsiblepersonTable.loadData(e.viewSnDataList),e.viewSnDataListLoading=!1):(e.viewSnDataList=[],e.viewSnTotal=0,e.viewSnPage=1,e.viewSnDataListLoading=!1)})).catch((function(t){return e.viewSnDataListLoading=!1,!1}))}),100,{leading:!0,trailing:!1}),selectSnAll:function(e){var t=this;this.selectSnIds=[];var r=this.$refs.recordSnResponsiblepersonTable.getCheckboxRecords(!1);r.forEach((function(e){t.selectSnIds.push(e.id)}))},dataListSelectionSnHandle:function(e){var t=this;this.selectSnIds=[];var r=this.$refs.recordSnResponsiblepersonTable.getCheckboxRecords(!1);r.forEach((function(e){t.selectSnIds.push(e.id)}))},handleDeleteSnChange:function(e){var t=this;if(e&&(t.selectSnIds=[].concat(e)),0===t.selectSnIds.length)return t.$message.error(t.$t("deleteInfo.noData"));t.$confirm(t.$t("deleteInfo.noticeTitle"),t.$t("deleteInfo.noticePrompt"),{confirmButtonText:t.$t("deleteInfo.confirm"),cancelButtonText:t.$t("deleteInfo.cancel"),type:"warning"}).then((function(){t.confirmPasswordForm.type="deleteSn",t.confirmPasswordForm.password="",t.confirmPasswordVisible=!0})).catch((function(){return!1}))},handleUploadSendChange:function(e,t){this.sendFileList=[],this.receiveFileList=[],this.analyzeFileList=[],this.uploadImgForm.id=e.id,this.uploadImgForm.type=t,"customer"===t?(e.re1&&this.sendFileList.push({name:0,url:e.re1}),e.re2&&this.sendFileList.push({name:1,url:e.re2}),e.re3&&this.sendFileList.push({name:2,url:e.re3})):"company"===t?(e.re4&&this.receiveFileList.push({name:0,url:e.re4}),e.re5&&this.receiveFileList.push({name:1,url:e.re5}),e.re6&&this.receiveFileList.push({name:2,url:e.re6})):(e.re5&&this.analyzeFileList.push({name:0,url:e.re5}),e.re6&&this.analyzeFileList.push({name:1,url:e.re6}),e.re7&&this.analyzeFileList.push({name:1,url:e.re7})),this.uploadImgDialogVisible=!0},handleBeforeUploadChange:function(e){var t=["image/jpeg","image/png","image/jpg","image/x-icon"],r=t.includes(e.type),n=e.size/1024/1024<5;return r||this.$message.error(this.$t("domainInfo.pictureType")),n||this.$message.error(this.$t("domainInfo.uploadSystemBglimit")),r&&n},handleExceedChange:function(e,t){return this.$message.warning("图片最多上传3个文件")},handleSendFileChange:function(e,t){"customer"===this.uploadImgForm.type?this.sendFileList=t:"company"===this.uploadImgForm.type?this.receiveFileList=t:this.analyzeFileList=t},handleDeleteSendFileChange:function(e,t){"customer"===this.uploadImgForm.type?this.sendFileList=t:"company"===this.uploadImgForm.type?this.receiveFileList=t:this.analyzeFileList=t},handleUploadSendImageChange:function(e){var t=this,r=new FormData;t.loading=!0,r.append("multipartFile",e.file),t.$http.post("/aftermarket/uploadFile.do",r).then((function(r){var n=r.data;if(0!=n.code)return t.loading=!1,t.$message.error(n.msg);var a="customer"===t.uploadImgForm.type?t.sendFileList.findIndex((function(t){return t.uid===e.file.uid})):"company"===t.uploadImgForm.type?t.receiveFileList.findIndex((function(t){return t.uid===e.file.uid})):t.analyzeFileList.findIndex((function(t){return t.uid===e.file.uid}));-1!==a&&("customer"===t.uploadImgForm.type?t.$set(t.sendFileList[a],"url",n.data):"company"===t.uploadImgForm.type?t.$set(t.receiveFileList[a],"url",n.data):t.$set(t.analyzeFileList[a],"url",n.data)),t.$message.success("上传成功"),t.loading=!1})).catch((function(e){return t.loading=!1,!1}))},handleCloseUploadImageChange:function(){this.uploadImgDialogVisible=!1,this.sendFileList=[],this.receiveFileList=[],this.analyzeFileList=[]},handleUploadImageSubmitChange:function(){var e=this,t=[{id:e.uploadImgForm.id}],r="customer"===e.uploadImgForm.type?e.sendFileList:"company"===e.uploadImgForm.type?e.receiveFileList:e.analyzeFileList,n=r.some((function(e){return e.url&&e.url.startsWith("blob:")}));if(n)e.$message.warning("还有文件正在上传或上传失败，请稍后提交");else{var a=r.some((function(e){return!e.url||""===e.url.trim()}));a?e.$message.warning("存在上传失败的文件，请重新上传"):("customer"===e.uploadImgForm.type?(0==e.sendFileList.length&&(t[0].re1="",t[0].re2="",t[0].re3=""),1==e.sendFileList.length&&(t[0].re1=e.sendFileList[0].url,t[0].re2="",t[0].re3=""),2==e.sendFileList.length&&(t[0].re1=e.sendFileList[0].url,t[0].re2=e.sendFileList[1].url,t[0].re3=""),3==e.sendFileList.length&&(t[0].re1=e.sendFileList[0].url,t[0].re2=e.sendFileList[1].url,t[0].re3=e.sendFileList[2].url)):"company"===e.uploadImgForm.type?(0==e.receiveFileList.length&&(t[0].re4="",t[0].re5="",t[0].re6=""),1==e.receiveFileList.length&&(t[0].re4=e.receiveFileList[0].url,t[0].re5="",t[0].re6=""),2==e.receiveFileList.length&&(t[0].re4=e.receiveFileList[0].url,t[0].re5=e.receiveFileList[1].url,t[0].re6=""),3==e.receiveFileList.length&&(t[0].re4=e.receiveFileList[0].url,t[0].re5=e.receiveFileList[1].url,t[0].re6=e.receiveFileList[2].url)):(0==e.analyzeFileList.length&&(t[0].re5="",t[0].re6="",t[0].re7=""),1==e.analyzeFileList.length&&(t[0].re5=e.analyzeFileList[0].url,t[0].re6="",t[0].re7=""),2==e.analyzeFileList.length&&(t[0].re5=e.analyzeFileList[0].url,t[0].re6=e.analyzeFileList[1].url,t[0].re7=""),3==e.analyzeFileList.length&&(t[0].re5=e.analyzeFileList[0].url,t[0].re6=e.analyzeFileList[1].url,t[0].re7=e.analyzeFileList[2].url)),"customer"===e.uploadImgForm.type||"company"===e.uploadImgForm.type?e.$http.put("/aftermarketComp/update.do",t).then((function(t){var r=t.data;if(0!=r.code)return e.$message.error(r.data||r.msg),!1;e.$message.success(r.msg||"操作成功"),e.getDataList(),e.uploadImgDialogVisible=!1,e.uploadImgForm.id="",e.sendFileList=[]})).catch((function(e){return!1})):e.$http.put("/aftermarket/update.do",t).then((function(t){var r=t.data;if(0!=r.code)return e.$message.error(r.data||r.msg),!1;e.$message.success(r.msg||"操作成功"),e.getViewSnDataList(),e.uploadImgDialogVisible=!1,e.uploadImgForm.id="",e.sendFileList=[]})).catch((function(e){return!1})))}},handleAddNotesChange:function(e,t,r){this.afterSaleNotesForm.id=e,this.afterSaleNotesForm.type=r,this.afterSaleNotesForm.notes=t,this.afterSaleNotesLoading=!1,this.afterSaleNotesVisible=!0},handleCloseAfterSaleNotesChange:function(){this.afterSaleNotesVisible=!1,this.afterSaleNotesForm.id="",this.afterSaleNotesForm.type="",this.afterSaleNotesForm.notes="",this.afterSaleNotesLoading=!1},handleAfterSaleNotesSubmitChange:function(){var e=this,t=[{id:e.afterSaleNotesForm.id,notes:e.afterSaleNotesForm.notes}];e.$refs.afterSaleNotesForm.validate((function(r){r&&(e.afterSaleNotesLoading=!0,"deleteAftersale"===e.afterSaleNotesForm.type?e.$http.put("/aftermarketComp/update.do",t).then((function(t){var r=t.data;if(e.afterSaleNotesLoading=!1,0!=r.code)return e.$message.error(r.data||r.msg),!1;e.$message.success(r.msg||"操作成功"),e.getDataList(),e.afterSaleNotesVisible=!1,e.afterSaleNotesForm.notes="",e.afterSaleNotesForm.type="",e.afterSaleNotesForm.id=""})).catch((function(t){return e.afterSaleNotesLoading=!1,!1})):e.$http.put("/aftermarket/update.do",t).then((function(t){var r=t.data;if(e.afterSaleNotesLoading=!1,0!=r.code)return e.$message.error(r.data||r.msg),!1;e.$message.success(r.msg||"操作成功"),e.getViewSnDataList(),e.afterSaleNotesVisible=!1,e.afterSaleNotesForm.type="",e.afterSaleNotesForm.notes="",e.afterSaleNotesForm.id=""})).catch((function(t){return e.afterSaleNotesLoading=!1,!1})))}))},handleViewAftermarketChange:function(e){var t=this,r={id:e};t.$http.get("/aftermarketComp/getById.do",{params:r}).then((function(e){var r=e.data;if(0!=r.code)return t.$message.error(r.data||r.msg);r.data?(t.aftermarketInfo=Object.assign(t.aftermarketInfo,r.data),t.aftermarketVisible=!0):t.$message.error("未查询到售后信息")})).catch((function(e){return t.dataListLoading=!1,!1}))},selectAll:function(e){var t=this;this.selectIds=[];var r=this.$refs.recordTable.getCheckboxRecords(!1);r.forEach((function(e){t.selectIds.push(e.id)}))},dataListSelectionHandle:function(e){var t=this;this.selectIds=[];var r=this.$refs.recordTable.getCheckboxRecords(!1);r.forEach((function(e){t.selectIds.push(e.id)}))},handleAddReturnOrderChange:function(e,t,r){this.returnOrderForm.type=r,this.returnOrderForm.returnOrder=t?"receipt"==r?t.receipt:t.returnnum:"",this.returnOrderForm.returnOrderType=t?"receipt"==r?t.receipt.includes("无")?2:1:t.returnnum.includes("无")?2:1:1,this.returnOrderForm.id=e,this.returnOrderForm.rsn=t&&t.hasOwnProperty("rsn")?t.rsn:"",this.returnOrderForm.rdetails=t&&t.hasOwnProperty("rdetails")?Number(t.rdetails):0,this.returnOrderForm.raccessory=t&&t.hasOwnProperty("raccessory")?t.raccessory:"",this.returnOrderVisible=!0},handleReturnOrderTypeChange:function(e){this.returnOrderForm.returnOrder=2==e?"无单号":""},handleReturnOrderInput:function(e){1===this.returnOrderForm.returnOrderType&&(this.returnOrderForm.returnOrder=e.replace(/[^a-zA-Z0-9]/g,""))},handleCloseReturnOrderChange:function(){this.returnOrderVisible=!1,this.returnOrderLoading=!1,this.returnOrderForm.type="",this.returnOrderForm.returnOrder="",this.returnOrderForm.returnOrderType=1,this.returnOrderForm.rsn="",this.returnOrderForm.rdetails=0,this.returnOrderForm.raccessory="",this.returnOrderForm.id=""},handleConfirmReturnOrderChange:function(){var e=this,t="receipt"==e.returnOrderForm.type?[{id:e.returnOrderForm.id,receipt:e.returnOrderForm.returnOrder,rdetails:e.returnOrderForm.rdetails,raccessory:e.returnOrderForm.raccessory}]:[{id:e.returnOrderForm.id,returnnum:e.returnOrderForm.returnOrder,rsn:e.returnOrderForm.rsn,rdetails:e.returnOrderForm.rdetails,raccessory:e.returnOrderForm.raccessory}];e.$refs.returnOrderForm.validate((function(r){r&&(e.returnOrderLoading=!0,"receipt"==e.returnOrderForm.type?e.$http.put("/aftermarketComp/update.do",t).then((function(t){var r=t.data;if(e.returnOrderLoading=!1,0!=r.code)return e.$message.error(r.data||r.msg),!1;e.$message.success(r.msg||"操作成功"),e.getDataList(),e.returnOrderVisible=!1,e.returnOrderForm.type="",e.returnOrderForm.returnOrder="",e.returnOrderForm.id=""})).catch((function(t){return e.returnOrderLoading=!1,!1})):e.$http.put("/aftermarket/update.do",t).then((function(t){var r=t.data;if(e.returnOrderLoading=!1,0!=r.code)return e.$message.error(r.data||r.msg),!1;e.$message.success(r.msg||"操作成功"),e.getDataList(),e.returnOrderVisible=!1,e.returnOrderForm.type="",e.returnOrderForm.returnOrder="",e.returnOrderForm.id=""})).catch((function(t){return e.returnOrderLoading=!1,!1})))}))},handleCloseConfirmPasswordChange:function(){this.confirmPasswordVisible=!1,this.confirmPasswordLoading=!1,this.confirmPasswordForm.type="",this.confirmPasswordForm.password=""},handleConfirmPasswordChange:function(){var e=this;e.$refs.confirmPasswordForm.validate((function(t){if(t){if(e.confirmPasswordLoading=!0,"deleteSn"===e.confirmPasswordForm.type)return void e.$http.delete("/aftermarket/delete.do",{params:{arrIds:e.selectSnIds.join(","),pwd:e.confirmPasswordForm.password}}).then((function(t){var r=t.data;if(e.confirmPasswordLoading=!1,0!=r.code)return e.$message.error(r.data||r.msg),!1;e.confirmPasswordLoading=!1,e.$message.success(e.$t("deleteInfo.deleteSuccess")),e.getViewSnDataList(),e.confirmPasswordVisible=!1,e.confirmPasswordForm.type="",e.confirmPasswordForm.password=""})).catch((function(t){return e.confirmPasswordLoading=!1,!1}));e.$http.delete("/aftermarketComp/delete.do",{params:{arrIds:e.selectIds.join(","),pwd:e.confirmPasswordForm.password}}).then((function(t){var r=t.data;if(e.confirmPasswordLoading=!1,0!=r.code)return e.$message.error(r.data||r.msg),!1;e.confirmPasswordLoading=!1,e.$message.success(e.$t("deleteInfo.deleteSuccess")),e.getDataList(),e.confirmPasswordVisible=!1,e.confirmPasswordForm.type="",e.confirmPasswordForm.password=""})).catch((function(t){return e.confirmPasswordLoading=!1,!1}))}}))},deleteHandle:l()((function(e){var t=this,r={};if(e&&(t.selectIds=[].concat(e)),0===t.selectIds.length)return t.$message.error(t.$t("deleteInfo.noData"));r["arrIds"]=t.selectIds,t.$confirm(t.$t("deleteInfo.noticeTitle"),t.$t("deleteInfo.noticePrompt"),{confirmButtonText:t.$t("deleteInfo.confirm"),cancelButtonText:t.$t("deleteInfo.cancel"),type:"warning"}).then((function(){t.confirmPasswordForm.type="deleteAfterSale",t.confirmPasswordForm.password="",t.confirmPasswordVisible=!0})).catch((function(e){}))}),1e3,{leading:!0,trailing:!1}),resetExcelData:function(e){var t=this,r=[];this.dataList.forEach((function(e){var n={comp:"公司名称: "+e.comp+"\n联系人: "+e.contact+"\n联系方式: "+e.contactinfo,project:e.project||"",sn:e.sn||"",model:e.model||"",details:0==e.details?"仅裸机":e.accessory?"含配件("+e.accessory+")":"含配件",fault:e.fault,dock:e.dock||"",receipt:e.receipt||"",returnnum:e.returnnum||"",rsn:e.rsn||"",rmodel:e.rmodel||"",rdetails:0==e.rdetails?"仅裸机":e.raccessory?"含配件("+e.raccessory+")":"含配件",notes:e.notes||"",duration:e.duration||"",status:t.getStatusText(e.status)};r.push(n)})),e(r)},handleExportExcel:l()((function(){var e=this;if(0==this.dataList.length)return this.$message.warning(this.$t("gwsn.thereIsCurrentlyNoDataAvailableForExport"));this.$confirm(this.$t("gwsn.doYouWantToContinueWithThePlaintextPasswordForThisOperation"),this.$t("prompt.title"),{confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((function(){Promise.resolve().then(function(){e.resetExcelData((function(t){for(var r=[{label:"客户信息",prop:"comp"},{label:"项目名称",prop:"project"},{label:"网关编号",prop:"sn"},{label:"网关型号",prop:"model"},{label:"客户寄件类型",prop:"details"},{label:"故障现象",prop:"fault"},{label:"对接工程师",prop:"dock"},{label:"客户寄出单号",prop:"receipt"},{label:"厂家寄出单号",prop:"returnnum"},{label:"厂家寄出网关编号",prop:"rsn"},{label:"厂家寄出网关型号",prop:"rmodel"},{label:"厂家寄件类型",prop:"rdetails"},{label:"备注",prop:"notes"},{label:"处理时长",prop:"duration"},{label:"当前状态",prop:"status"}],n=[],a=[],s=0;s<r.length;s++)n[s]=r[s].label,a[s]=r[s].prop;var i=n,o=a,l=t,d=e.formatJson(o,l);Object(c["a"])(i,d,"售后列表_"+(new Date).getTime())}))}.bind(null,r)).catch(r.oe)})).catch((function(){}))}),1e3,{leading:!0,trailing:!1}),printSelectedRows:function(){var e=this;if(0!==this.selectIds.length){var t=this.dataList.filter((function(t){return e.selectIds.includes(t.id)})),r=t.map((function(t){var r=[t.re1,t.re2,t.re3].filter((function(e){return e})),n=[t.re5,t.re6,t.re7].filter((function(e){return e})),a=[t.re8,t.re9,t.re10].filter((function(e){return e})),s=[t.re11,t.re12].filter((function(e){return e}));return{"客户信息":"公司名称: "+t.comp+"\n联系人: "+t.contact+"\n联系方式: "+t.contactinfo,"客户寄出信息":t.receipt+"\n寄出时间: "+(t.redbtime?t.redbtime:"")+"\n寄件类型: "+(0==t.details?"仅裸机":t.accessory?"含配件("+t.accessory+")":"含配件"),"项目名称":t.project||"","网关编号":t.sn||"","网关型号":t.model||"","故障现象":t.fault||"","现场照片":r.map((function(e){return'<img src="'.concat(e,'" style="width:100px;margin:2px;">')})).join(""),"现场视频":t.re4?'<video src="'.concat(t.re4,'" controls style="width:150px;height:100px;margin:2px;"></video><div style="margin-top:10px;">').concat(t.re4,"</div>"):"<div></div>","对接工程师":t.dock||"","客户寄出照片":n.map((function(e){return'<img src="'.concat(e,'" style="width:100px;margin:2px;">')})).join(""),"客户收件信息":"联系人: "+t.rcontact+"\n联系方式: "+t.rcontactinfo+"\n地址: "+t.raddress,"厂家寄出信息":t.returnnum+"\n寄出时间: "+(t.rdbtime?t.rdbtime:"")+"\n寄件类型: "+(0==t.rdetails?"仅裸机":t.rdetails?"含配件("+t.raccessory+")":"含配件"),"厂家寄出网关编号":t.rsn||"","厂家寄出网关型号":t.rmodel||"","厂家寄出照片":a.map((function(e){return'<img src="'.concat(e,'" style="width:100px;margin:2px;">')})).join(""),"厂家分析照片":s.map((function(e){return'<img src="'.concat(e,'" style="width:100px;margin:2px;">')})).join(""),"备注":t.notes||"","处理时长":t.duration||"","当前状态":e.getStatusText(t.status)}}));i()({printable:r,properties:[{field:"客户信息",displayName:"客户信息"},{field:"客户寄出信息",displayName:"客户寄出信息"},{field:"项目名称",displayName:"项目名称"},{field:"网关编号",displayName:"网关编号"},{field:"网关型号",displayName:"网关型号"},{field:"故障现象",displayName:"故障现象"},{field:"现场照片",displayName:"现场照片",type:"html"},{field:"现场视频",displayName:"现场视频",type:"html"},{field:"对接工程师",displayName:"对接工程师"},{field:"客户寄出照片",displayName:"客户寄出照片",type:"html"},{field:"客户收件信息",displayName:"客户收件信息"},{field:"厂家寄出信息",displayName:"厂家寄出信息"},{field:"厂家寄出网关编号",displayName:"厂家寄出网关编号"},{field:"厂家寄出网关型号",displayName:"厂家寄出网关型号"},{field:"厂家寄出照片",displayName:"厂家寄出照片",type:"html"},{field:"厂家分析照片",displayName:"厂家分析照片",type:"html"},{field:"备注",displayName:"备注"},{field:"处理时长",displayName:"处理时长"},{field:"当前状态",displayName:"当前状态"}],type:"json",header:"售后管理",style:"\n                    @media print {\n                        body { font-size: 12px; }\n                        table { table-layout: fixed; width: 100%; border-collapse: collapse; }\n                        th, td {\n                            border: 1px solid #ccc;\n                            padding: 8px;\n                            text-align: center;\n                            vertical-align: top;\n                            word-wrap: break-word;\n                        }\n                        th { background-color: #f0f0f0; font-weight: bold; }\n                        img, video { max-width: 100%; height: auto; }\n                        .no-break { page-break-inside: avoid; }\n                    }\n                ",gridHeaderStyle:"font-size: 16px; font-weight: bold; color: #000; padding: 8px;",gridStyle:"font-size: 14px; border: 1px solid #ccc; padding: 8px;"})}else this.$message.warning("请先选择要打印的数据")},queryViewResponsiblepersonSearch:function(){if(!this.$hasPermission("aftermarketRes:select:permission.do"))return this.$message.error("无权限查询责任人"),!1;this.viewResponsiblepersonPage=1,this.getViewResponsiblepersonDataList()},pageSizeViewResponsiblepersonChangeHandle:function(e){if(!this.$hasPermission("aftermarketRes:select:permission.do"))return this.$message.error("无权限查询责任人"),!1;this.viewResponsiblepersonPage=1,this.viewResponsiblepersonLimit=e,this.getViewResponsiblepersonDataList()},pageCurrentViewResponsiblepersonChangeHandle:function(e){if(!this.$hasPermission("aftermarketRes:select:permission.do"))return this.$message.error("无权限查询责任人"),!1;this.viewResponsiblepersonPage=e,this.getViewResponsiblepersonDataList()},handleViewResponsiblepersonChange:function(e,t){var r=this;if(!r.$hasPermission("aftermarketRes:select:permission.do"))return r.$message.error("无权限查询责任人"),!1;r.viewResponsiblepersonType=t,r.viewResponsiblepersonDataListSelection=[],r.viewResponsiblepersonPage=1,r.viewResponsiblepersonForm.aid=e.id,r.viewResponsiblepersonForm.uid="",r.viewResponsiblepersonVisible=!0,r.getViewResponsiblepersonDataList()},getViewResponsiblepersonDataList:l()((function(){var e=this,t={page:e.viewResponsiblepersonPage,limit:e.viewResponsiblepersonLimit,aid:e.viewResponsiblepersonForm.aid};if(!e.$hasPermission("aftermarketRes:select:permission.do"))return e.$message.error("无权限查询责任人"),!1;e.viewResponsiblepersonForm.uid&&(t["uid"]=e.viewResponsiblepersonForm.uid),e.viewResponsiblepersonDataListLoading=!0,e.viewResponsiblepersonTotal=0,e.$http.get("/aftermarketRes/getPage.do",{params:t}).then((function(r){var n=r.data;if(e.$refs.recordviewResponsiblepersonTable.clearCheckboxRow(),e.$refs.recordviewResponsiblepersonTable.clearCheckboxReserve(),e.viewResponsiblepersonDataListLoading=!1,0!=n.code)return e.$message.error(n.data||n.msg);n.data.list&&n.data.list.length>0?(e.viewResponsiblepersonPage=t.page,e.viewResponsiblepersonDataList=n.data.list,e.viewResponsiblepersonTotal=Number(n.data.total),e.$refs.recordviewResponsiblepersonTable.loadData(e.viewResponsiblepersonDataList)):(e.viewResponsiblepersonDataList=[],e.viewResponsiblepersonTotal=0,e.viewResponsiblepersonPage=1,e.$refs.recordviewResponsiblepersonTable.loadData(e.viewResponsiblepersonDataList))})).catch((function(t){return e.viewResponsiblepersonDataListLoading=!1,!1}))}),100,{leading:!0,trailing:!1}),selectResponsiblepersonAll:function(e){var t=this;this.viewResponsiblepersonDataListSelection=[];var r=this.$refs.recordviewResponsiblepersonTable.getCheckboxRecords(!1);r.forEach((function(e){t.viewResponsiblepersonDataListSelection.push(e.id)}))},dataListSelectionResponsiblepersonHandle:function(e){var t=this;this.viewResponsiblepersonDataListSelection=[];var r=this.$refs.recordviewResponsiblepersonTable.getCheckboxRecords(!1);r.forEach((function(e){t.viewResponsiblepersonDataListSelection.push(e.id)}))},handleAddResponsiblepersonChange:function(e,t){this.responsiblepersonLoading=!1,this.responsiblepersonForm.type=t,"edit"===t?(this.responsiblepersonForm.uid=e.uid,this.responsiblepersonForm.username=e.username,this.responsiblepersonForm.aid=e.id,this.responsiblepersonForm.id=e.id,this.responsiblepersonForm.reason=e.reason,this.responsiblepersonForm.resolution=e.resolution,this.responsiblepersonForm.improvement=e.improvement):(this.responsiblepersonForm.uid=this.$store.state.user.id,this.responsiblepersonForm.username=this.$store.state.user.name,this.responsiblepersonForm.aid=e.id,this.responsiblepersonForm.id="",this.responsiblepersonForm.reason="",this.responsiblepersonForm.resolution="",this.responsiblepersonForm.improvement=""),this.responsiblepersonVisible=!0},handleCloseResponsiblepersonChange:function(){this.responsiblepersonVisible=!1,this.responsiblepersonLoading=!1,this.responsiblepersonForm.id="",this.responsiblepersonForm.username="",this.responsiblepersonForm.reason="",this.responsiblepersonForm.resolution="",this.responsiblepersonForm.improvement=""},handleResponsiblepersonSubmitChange:function(){var e=this,t=[{aid:e.responsiblepersonForm.aid,uid:e.$store.state.user.id,reason:e.responsiblepersonForm.reason,resolution:e.responsiblepersonForm.resolution,improvement:e.responsiblepersonForm.improvement}];e.responsiblepersonLoading=!0,e.responsiblepersonForm.id?(t[0].id=e.responsiblepersonForm.id,e.$http.put("/aftermarketRes/update.do",t).then((function(t){var r=t.data;if(e.responsiblepersonLoading=!1,0!=r.code)return e.$message.error(r.data||r.msg),!1;e.$message.success("操作成功"),e.handleCloseResponsiblepersonChange(),e.viewResponsiblepersonVisible&&e.getViewResponsiblepersonDataList(),e.getViewSnDataList()})).catch((function(t){return e.responsiblepersonLoading=!1,!1}))):e.$http.post("/aftermarketRes/insert.do",t).then((function(t){var r=t.data;if(e.responsiblepersonLoading=!1,0!=r.code)return e.$message.error(r.data||r.msg),!1;e.$message.success("操作成功"),e.handleCloseResponsiblepersonChange(),e.viewResponsiblepersonVisible&&e.getViewResponsiblepersonDataList(),e.getViewSnDataList()})).catch((function(t){return e.responsiblepersonLoading=!1,!1}))},handleDeleteResponsiblepersonChange:l()((function(e){var t=this,r={};if(e&&(t.viewResponsiblepersonDataListSelection=[].concat(e)),0===t.viewResponsiblepersonDataListSelection.length)return t.$message.error(t.$t("deleteInfo.noData"));r["arrIds"]=t.viewResponsiblepersonDataListSelection,t.$confirm(t.$t("deleteInfo.noticeTitle"),t.$t("deleteInfo.noticePrompt"),{confirmButtonText:t.$t("deleteInfo.confirm"),cancelButtonText:t.$t("deleteInfo.cancel"),type:"warning"}).then((function(){t.confirmPasswordLoading=!0,t.$http.delete("/aftermarketRes/delete.do",{params:{arrIds:t.viewResponsiblepersonDataListSelection.join(",")}}).then((function(e){var r=e.data;if(0!=r.code)return t.$message.error(r.data||r.msg),!1;t.$message.success(t.$t("deleteInfo.deleteSuccess")),t.getViewResponsiblepersonDataList(),t.getDataList()})).catch((function(e){return!1}))})).catch((function(e){}))}),1e3,{leading:!0,trailing:!1}),handleAddOrUpdateAfterSalesChange:function(e){var t=this;this.propId=null,e&&(this.propId=e),this.addOrUpdateVisible=!0,this.$nextTick((function(){t.$refs.aftersaleAddOrUpdateRef.init()}))}},mounted:function(){var e=this;this.getModeList(),this.getDataList(),window.onresize=function(){return function(){e.scrollTableHeight=window.innerHeight-220-116}()}},watch:{total:function(){this.total==(this.page-1)*this.limit&&0!=this.total&&(this.page-=1,this.getDataList())}}},m=u,f=(r("e2c2"),r("2877")),h=Object(f["a"])(m,n,a,!1,null,"3c901ee6",null);t["default"]=h.exports},c9462:function(e,t,r){e.exports=r.p+"img/eye-off.6002e971.png"},e2c2:function(e,t,r){"use strict";r("5c6e")}}]);