import{_ as L}from"./table-column-setting.vue_vue_type_script_setup_true_lang-gvg6Csr-.js";import{_ as X}from"./export-CmY8sCOJ.js";import{_ as q}from"./round-search-BnajOtoe.js";import{d as H,dE as J,b8 as x,f as n,$ as d,B as f,i as c,o as k,b as Q,w as a,g,h as t,a3 as W,a1 as Y,a8 as b,t as D,c as Z,a9 as T,S as ee,aa as te,a4 as ne,ab as oe,E as ae,X as se,A as le,ax as ie,a6 as re,I as ce}from"./index-BuIHZWoY.js";import{u as pe,a as me}from"./table-Cjc9MU6x.js";import{_ as ue}from"./DatePicker-CWtLRcvJ.js";import{_ as _e}from"./DataTable-B-S_z7K-.js";import"./Forward-VYLTxKce.js";import"./RadioGroup-Be-YAEnB.js";const de={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function fe(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!te(l)}const ge=H({name:"stationmanagement_reportdataoperation",__name:"index",setup(l){const N={1:"短期",0:"超短期"},{columns:S,columnChecks:p,data:y,getData:w,loading:m,mobilePagination:C,searchParams:i,resetSearchParams:ye}=pe({apiFn:J,apiParams:{page:1,pageSize:20,limit:20,type:0,startTime:x(0,Date.now()-864e5*3),endTime:x(0,Date.now()),_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{key:"optime",title:"操作时间",align:"center",width:100},{key:"matime",title:"干预数据日期",align:"center",width:140},{key:"otype",title:"操作类型",align:"center",width:140,render:s=>n("span",null,[s.otype==0?"新增":"修改"])},{key:"operate",title:"操作",align:"center",width:100,render(s){let e;return n(f,{ghost:!0,size:"small",onClick:()=>V(s)},fe(e=d("common.look"))?e:{default:()=>[e]})}}]}),u=c(!1),_=c(),V=s=>{u.value=!0,_.value=s},h=c([Date.now()-864e5*3,Date.now()]);async function U(s,e){i.startTime=s[0],i.endTime=s[1]}const{drawerVisible:we,operateType:he,editingData:ve,handleAdd:xe,handleEdit:ke,checkedRowKeys:r,onBatchDeleted:be,onDeleted:De}=me(y,w),z=()=>{w()},B=()=>{},R=c("0");return(s,e)=>{const $=ue,j=ne,O=q,P=oe,v=ae,E=X,M=L,I=_e,A=se,K=le,F=ie,G=re;return k(),Q("div",de,[n(A,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:a(()=>[n(v,{align:"center",wrap:"",justify:"start",class:"lt-sm:w-200px"},{default:a(()=>[g(" 上报数据操作记录 "),n(P,null,{default:a(()=>[n($,{value:h.value,"onUpdate:value":e[0]||(e[0]=o=>h.value=o),type:"daterange","value-format":"yyyy-MM-dd","onUpdate:formattedValue":U},null,8,["value"]),n(j,{class:"w-200px",placeholder:"选择",value:t(i).type,"onUpdate:value":e[1]||(e[1]=o=>t(i).type=o),options:t(W)(t(Y)(N))},null,8,["value","options"]),n(t(f),{type:"primary",ghost:"",onClick:z},{icon:a(()=>[n(O,{class:b(["text-icon",{"animate-spin":t(m)}])},null,8,["class"])]),default:a(()=>[g(" "+D(t(d)("common.search")),1)]),_:1})]),_:1})]),_:1})]),"header-extra":a(()=>[R.value=="1"?(k(),Z(v,{key:0,align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[n(t(f),{onClick:B,size:"small",disabled:t(r).length==0},{icon:a(()=>[n(E,{class:b(["text-icon",{"animate-spin":t(m)}])},null,8,["class"])]),default:a(()=>[g(" "+D(t(d)("common.export")),1)]),_:1},8,["disabled"]),n(M,{columns:t(p),"onUpdate:columns":e[2]||(e[2]=o=>T(p)?p.value=o:null)},null,8,["columns"])]),_:1})):ee("",!0)]),default:a(()=>[n(I,{"checked-row-keys":t(r),"onUpdate:checkedRowKeys":e[3]||(e[3]=o=>T(r)?r.value=o:null),columns:t(S),data:t(y),size:"small",loading:t(m),remote:"","row-key":o=>o.id,pagination:t(C)},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1}),n(G,{show:u.value,"onUpdate:show":e[5]||(e[5]=o=>u.value=o),title:"具体信息",preset:"card",class:"w-800px"},{default:a(()=>[n(F,{class:"h-470px"},{default:a(()=>[n(K,{value:_.value.content,"onUpdate:value":e[4]||(e[4]=o=>_.value.content=o),rows:"20",type:"textarea",readonly:""},null,8,["value"])]),_:1})]),_:1},8,["show"])])}}}),$e=ce(ge,[["__scopeId","data-v-ed6a2855"]]);export{$e as default};
