import{d as N,p as G,r as j,b8 as m,$ as l,i as f,o as M,c as E,w as i,f as n,h as a,a3 as k,a5 as u,g as T,t as z,bZ as A,dG as J,dH as W,A as H,a4 as L,F as P,B as X,E as Z,ax as K,N as Q,cE as Y,b as ee,a9 as te,X as ae}from"./index-m_y7kY8i.js";import{_ as le}from"./round-check-circle-CuwINF0N.js";import{p as ne,a as oe}from"./station-C2O19jyo.js";import{_ as ie}from"./FormItemGridItem-BpxcVmkE.js";import{_ as se}from"./DatePicker-lT1epB4_.js";import{_ as pe}from"./Grid-BKpTNXut.js";import"./Forward-Ssfnwh7N.js";const re=N({name:"StationinfoForm",__name:"station_info_form",props:{rowData:{}},emits:["submitted"],setup(B,{emit:g}){const{formRef:w,validate:c,restoreValidation:S}=G(),d=(p,t)=>({type:t,required:!0,trigger:["input","change","blur","password-input"],message:p}),e=j(v());function v(){return{id:void 0,pname:"光伏电站",ptoken:"",pwd:"",repname:"",code:"001",ptype:1,codeprv:"0",maxeqmt:5,realeqmt:5,longitude:0,latitude:0,altitude:0,wheel:0,transform:"",voltagelevel:"10",operationtime:m(0,new Date),location:"",land:0,status:0,gridtime:m(0,new Date),owner:"",compy:"",epc:"",re1:"",re2:"",re3:"",re4:""}}const b={pname:{required:!0,trigger:"blur",message:l("page.station.stationSetting.form.pname")},ptoken:{required:!0,trigger:"blur",message:l("page.station.stationSetting.form.ptoken")},pwd:{required:!0,trigger:"blur",message:l("page.station.stationSetting.form.pwd")},code:{type:"string",required:!0,trigger:"blur",message:l("page.station.stationSetting.form.code")},ptype:d(l("page.station.stationSetting.form.ptype"),"number"),maxeqmt:d(l("page.station.stationSetting.form.maxeqmt"),"number"),realeqmt:d(l("page.station.stationSetting.form.realeqmt"),"number"),longitude:d(l("page.station.stationSetting.form.longitude"),"number"),latitude:d(l("page.station.stationSetting.form.latitude"),"number")},_=f({}),h=f(!1);async function y(){const{data:p}=await A({_t:new Date().getTime()});p.hasOwnProperty("ptoken")?(_.value=p,Object.assign(e,p),e.operationtime=m(0,e.operationtime),e.gridtime=m(0,e.gridtime)):h.value=!0}async function C(){var t;await c();const p=JSON.parse(JSON.stringify(e));p.operationtime=m(1,e.operationtime),p.gridtime=m(1,e.gridtime),h.value?await J([p]):await W([p]),(t=window.$message)==null||t.success("保存成功"),y(),h.value=!1}const D=p=>{_.value.realeqmt==_.value.maxeqmt&&(e.realeqmt=e.maxeqmt)};y();const x=p=>{if(p==0)return"0";if(p!==null){let t=p.toFixed(6);return t=t.replace(/(\.\d*?[1-9])0+$/,"$1"),t=t.replace(/\.$/,""),parseFloat(t)===Math.floor(parseFloat(t))?Math.floor(parseFloat(t)).toString():t+""}else return""};return(p,t)=>{const r=H,s=ie,q=L,U=se,F=pe,$=P,O=le,R=X,V=Z,I=K;return M(),E(I,{class:"h-480px pr-20px",style:{height:"calc(100%)"}},{default:i(()=>[n($,{ref_key:"formRef",ref:w,model:e,rules:b,"label-placement":"left","label-width":180,"require-mark-placement":"left"},{default:i(()=>[n(F,{responsive:"screen","item-responsive":""},{default:i(()=>[n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.pname"),path:"pname"},{default:i(()=>[n(r,{clearable:"",value:e.pname,"onUpdate:value":t[0]||(t[0]=o=>e.pname=o),placeholder:a(l)("page.station.stationSetting.form.pname")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.ptoken"),path:"ptoken"},{default:i(()=>[n(r,{clearable:"",value:e.ptoken,"onUpdate:value":t[1]||(t[1]=o=>e.ptoken=o),placeholder:a(l)("page.station.stationSetting.form.ptoken"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.pwd"),path:"pwd"},{default:i(()=>[n(r,{clearable:"",value:e.pwd,"onUpdate:value":t[2]||(t[2]=o=>e.pwd=o),placeholder:a(l)("page.station.stationSetting.form.pwd"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.repname"),path:"repname"},{default:i(()=>[n(r,{clearable:"",value:e.repname,"onUpdate:value":t[3]||(t[3]=o=>e.repname=o),placeholder:a(l)("page.station.stationSetting.form.repname"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.code"),path:"code"},{default:i(()=>[n(r,{clearable:"",value:e.code,"onUpdate:value":t[4]||(t[4]=o=>e.code=o),placeholder:a(l)("page.station.stationSetting.form.code"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.ptype"),path:"ptype"},{default:i(()=>[n(q,{class:"w-200px",placeholder:a(l)("page.station.stationSetting.form.ptype"),value:e.ptype,"onUpdate:value":t[5]||(t[5]=o=>e.ptype=o),options:a(k)(a(ne)),style:{width:"100%"}},null,8,["placeholder","value","options"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.codeprv"),path:"codeprv"},{default:i(()=>[n(r,{clearable:"",value:e.codeprv,"onUpdate:value":t[6]||(t[6]=o=>e.codeprv=o),placeholder:a(l)("page.station.stationSetting.form.codeprv"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.maxeqmt")+"(MW)",path:"maxeqmt"},{default:i(()=>[n(a(u),{value:e.maxeqmt,"onUpdate:value":[t[7]||(t[7]=o=>e.maxeqmt=o),D],placeholder:a(l)("page.station.stationSetting.form.maxeqmt"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.realeqmt")+"(MW)",path:"realeqmt"},{default:i(()=>[n(a(u),{clearable:"",value:e.realeqmt,"onUpdate:value":t[8]||(t[8]=o=>e.realeqmt=o),max:e.maxeqmt,style:{width:"100%"},placeholder:a(l)("page.station.stationSetting.form.realeqmt")},null,8,["value","max","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.longitude"),path:"longitude"},{default:i(()=>[n(a(u),{clearable:"",value:e.longitude,"onUpdate:value":t[9]||(t[9]=o=>e.longitude=o),format:x,"show-button":!1,placeholder:a(l)("page.station.stationSetting.form.longitude"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.latitude"),path:"latitude"},{default:i(()=>[n(a(u),{clearable:"",value:e.latitude,"onUpdate:value":t[10]||(t[10]=o=>e.latitude=o),format:x,"show-button":!1,placeholder:a(l)("page.station.stationSetting.form.latitude"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.altitude"),path:"altitude"},{default:i(()=>[n(a(u),{clearable:"",value:e.altitude,"onUpdate:value":t[11]||(t[11]=o=>e.altitude=o),placeholder:a(l)("page.station.stationSetting.form.altitude"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.wheel"),path:"wheel"},{default:i(()=>[n(a(u),{clearable:"",value:e.wheel,"onUpdate:value":t[12]||(t[12]=o=>e.wheel=o),placeholder:a(l)("page.station.stationSetting.form.wheel"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.transform"),path:"transform"},{default:i(()=>[n(r,{clearable:"",value:e.transform,"onUpdate:value":t[13]||(t[13]=o=>e.transform=o),placeholder:a(l)("page.station.stationSetting.form.transform"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.voltagelevel")+"(kV)",path:"voltagelevel"},{default:i(()=>[n(r,{clearable:"",value:e.voltagelevel,"onUpdate:value":t[14]||(t[14]=o=>e.voltagelevel=o),placeholder:a(l)("page.station.stationSetting.form.voltagelevel"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.operationtime"),path:"operationtime"},{default:i(()=>[n(U,{"formatted-value":e.operationtime,"onUpdate:formattedValue":t[15]||(t[15]=o=>e.operationtime=o),"value-format":"yyyy-MM-dd",type:"date",clearable:"",placeholder:a(l)("page.station.stationSetting.form.operationtime"),style:{width:"100%"}},null,8,["formatted-value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.location"),path:"location"},{default:i(()=>[n(r,{clearable:"",value:e.location,"onUpdate:value":t[16]||(t[16]=o=>e.location=o),placeholder:a(l)("page.station.stationSetting.form.location"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.land"),path:"land"},{default:i(()=>[n(a(u),{clearable:"",value:e.land,"onUpdate:value":t[17]||(t[17]=o=>e.land=o),placeholder:a(l)("page.station.stationSetting.form.land"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.status"),path:"status"},{default:i(()=>[n(q,{class:"w-200px",value:e.status,"onUpdate:value":t[18]||(t[18]=o=>e.status=o),options:a(k)(a(oe)),placeholder:a(l)("page.station.stationSetting.form.status"),style:{width:"100%"}},null,8,["value","options","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.gridtime"),path:"gridtime"},{default:i(()=>[n(U,{"formatted-value":e.gridtime,"onUpdate:formattedValue":t[19]||(t[19]=o=>e.gridtime=o),"value-format":"yyyy-MM-dd",type:"date",clearable:"",style:{width:"100%"},placeholder:a(l)("page.station.stationSetting.form.gridtime")},null,8,["formatted-value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.owner"),path:"owner"},{default:i(()=>[n(r,{clearable:"",value:e.owner,"onUpdate:value":t[20]||(t[20]=o=>e.owner=o),placeholder:a(l)("page.station.stationSetting.form.owner"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.compy"),path:"compy"},{default:i(()=>[n(r,{clearable:"",value:e.compy,"onUpdate:value":t[21]||(t[21]=o=>e.compy=o),placeholder:a(l)("page.station.stationSetting.form.compy"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{span:"24 m:8",label:a(l)("page.station.stationSetting.epc"),path:"epc"},{default:i(()=>[n(r,{clearable:"",value:e.epc,"onUpdate:value":t[22]||(t[22]=o=>e.epc=o),placeholder:a(l)("page.station.stationSetting.form.epc"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"]),n(V,{size:16,justify:"center"},{default:i(()=>[n(R,{type:"primary",ghost:"",onClick:C,class:"w-100px"},{icon:i(()=>[n(O,{class:"text-icon"})]),default:i(()=>[T(" "+z(a(l)("page.manage.scencename.save")),1)]),_:1})]),_:1})]),_:1})}}}),be=N({name:"stationmanagement_electricfieldsetting",__name:"index",setup(B){Q();const{bool:g,setTrue:w}=Y(),c=f(null),S=f(null);return(d,e)=>{const v=ae;return M(),ee("div",{ref_key:"wrapperRef",ref:c,class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},[n(v,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper",title:"电场设置"},{default:i(()=>[n(re,{visible:a(g),"onUpdate:visible":e[0]||(e[0]=b=>te(g)?g.value=b:null),"row-data":S.value},null,8,["visible","row-data"])]),_:1})],512)}}});export{be as default};
