import{_ as Z}from"./table-column-setting.vue_vue_type_script_setup_true_lang-C5T6qI4Z.js";import{_ as Q}from"./export-DaFI85Y1.js";import{_ as W}from"./round-search-CxXrOyeP.js";import{d as I,a2 as $,N as Y,i as x,s as ee,b9 as te,o as D,b as R,I as U,b8 as w,f as e,w as a,h as n,B as E,a8 as ae,g as O,t as z,$ as B,c as ne,a9 as F,S as oe,F as se,X as le,c3 as ie,E as re,c4 as ce}from"./index-CUNPF4fr.js";import{b as me}from"./metar-BqcHUNMq.js";import{u as de,a as pe}from"./table-CeWmGbcP.js";import{u as ue}from"./echarts-CugFHXam.js";import{e as _e}from"./exportExcel-Bv4G4H50.js";import{_ as fe}from"./DatePicker-Dnzm2qej.js";import{_ as he}from"./FormItemGridItem-Cu1Fv0hk.js";import{_ as ge}from"./Grid-B_xMmVkO.js";import{_ as ye}from"./DataTable-DCVZic8E.js";import"./Forward-D2lkVYwM.js";import"./RadioGroup-Dt9BXj20.js";const we=I({name:"LineChart",__name:"line-chart",props:{data:{type:Object,default:()=>({})}},setup(T){const c=T;$(()=>c.data,async t=>{v(),k()});const p=Y(),l=x(null),{domRef:h,updateOptions:u,showLoading:v,hideLoading:g}=ue(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(t){return t+"℃"}},legend:{data:["2m气温","2m露点温度"]},grid:{left:"6%",right:"8%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} ℃"}},series:[{color:"#e90445",name:"2m气温",type:"line",emphasis:{focus:"series"},data:[]},{color:"#009688",name:"2m露点温度",type:"line",emphasis:{focus:"series"},data:[]}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]}));async function k(){await new Promise(t=>{setTimeout(t,1e3)}),u(t=>(t.xAxis.data=c.data.map(i=>i.dbtime),t.series[0].data=c.data.map(i=>i.tt2),t.series[1].data=c.data.map(i=>i.dt2),t))}function C(){u((t,i)=>{const y=i();return t.legend.data=y.legend.data,t.series[0].name=y.series[0].name,t.series[1].name=y.series[1].name,t})}async function N(){k()}return $(()=>p.locale,()=>{C()}),N(),ee(()=>{l.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),te(()=>{l.value!==null&&(clearInterval(l.value),l.value=null)}),(t,i)=>(D(),R("div",{ref_key:"domRef",ref:h,class:"h-600px overflow-hidden"},null,512))}}),ve=U(we,[["__scopeId","data-v-89214fe3"]]),ke={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},be=I({name:"realtimequery_nwpquery",__name:"index",setup(T){const{columns:c,columnChecks:p,data:l,getData:h,loading:u,mobilePagination:v,searchParams:g,resetSearchParams:k}=de({apiFn:me,apiParams:{page:1,pageSize:20,limit:20,startTime:w(1,Date.now())||null,endTime:w(1,Date.now()+2592e5)||null,_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",width:50},{key:"dbtime",title:"时间",align:"center",width:160},{key:"tt2",title:"2m气温(℃)",align:"center",width:100},{key:"dt2",title:"2m露点(℃)",align:"center",width:100},{key:"rh2",title:"相对湿度(%)",align:"center",width:100},{key:"wd10",title:"10m风向(°)",align:"center",width:100},{key:"ws10",title:"10m风速(m/s)",align:"center",width:100},{key:"rain",title:"降水量(mm)",align:"center",width:100},{key:"ps",title:"气压(Pa)",align:"center",width:100},{key:"tcc",title:"总云量(%)",align:"center",width:100},{key:"ssrd",title:"太阳总辐射(w/m²)",align:"center",width:140},{key:"tsdsr",title:"太阳直接辐射(w/m²)",align:"center",width:140},{key:"ssrdiff",title:"太阳散辐射(w/m²)",align:"center",width:140}]}),{drawerVisible:C,operateType:N,editingData:t,handleAdd:i,handleEdit:y,checkedRowKeys:_,onBatchDeleted:xe,onDeleted:De}=pe(l,h),A=()=>{h()},S=x([Date.now(),Date.now()+864e5*3]);async function G(f,o){g.startTime=w(1,o[0]),g.endTime=w(1,o[1])}const V=()=>{const f={};c.value.forEach(s=>{s.key!="index"&&s.key!="operation"&&s.type!=="selection"&&(f[s.key]=s.title)});const o=[];l.value.forEach(s=>{if(_.value.includes(s.id)){const m=JSON.parse(JSON.stringify(f));for(const d in m)s.hasOwnProperty(d)?m[d]=s[d]:m[d]="";o.push(m)}}),_e(o,f,"天气预报数据")},b=x("0");return(f,o)=>{const s=fe,m=he,d=W,j=ge,H=se,P=le,M=ye,L=ie,q=Q,J=Z,K=re,X=ce;return D(),R("div",ke,[e(P,{bordered:!1,size:"small"},{default:a(()=>[e(H,{ref:"formRef",model:n(g),"label-placement":"left","show-feedback":!1},{default:a(()=>[e(j,{"y-gap":16,responsive:"screen","item-responsive":""},{default:a(()=>[e(m,{span:"24 s:12 m:7",label:"起止时间",path:"startTime"},{default:a(()=>[e(s,{value:S.value,"onUpdate:value":o[0]||(o[0]=r=>S.value=r),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":G,"default-time":["00:00:00","23:59:59"]},null,8,["value"])]),_:1}),e(m,{span:"24 s:12 m:5",label:"",path:"endTime",class:"pr-24px"},{default:a(()=>[e(n(E),{type:"primary",ghost:"",onClick:A},{icon:a(()=>[e(d,{class:ae(["text-icon",{"animate-spin":n(u)}])},null,8,["class"])]),default:a(()=>[O(" "+z(n(B)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{default:a(()=>[e(X,{type:"card",animated:"",value:b.value,"onUpdate:value":o[3]||(o[3]=r=>b.value=r),class:"h-100%","pane-wrapper-style":{flex:1}},{suffix:a(()=>[b.value=="0"?(D(),ne(K,{key:0,align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[e(n(E),{onClick:V,size:"small",disabled:n(_).length==0},{icon:a(()=>[e(q,{class:"text-icon"})]),default:a(()=>[O(" "+z(n(B)("common.export")),1)]),_:1},8,["disabled"]),e(J,{columns:n(p),"onUpdate:columns":o[2]||(o[2]=r=>F(p)?p.value=r:null)},null,8,["columns"])]),_:1})):oe("",!0)]),default:a(()=>[e(L,{name:"0",tab:"表格",class:"h-100%"},{default:a(()=>[e(M,{"checked-row-keys":n(_),"onUpdate:checkedRowKeys":o[1]||(o[1]=r=>F(_)?_.value=r:null),columns:n(c),data:n(l),size:"small",loading:n(u),remote:"","row-key":r=>r.id,pagination:n(l).length?n(v):void 0,class:"sm:h-full","flex-height":!0,"scroll-x":""},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1}),e(L,{name:"1",tab:"图表"},{default:a(()=>[e(ve,{data:n(l)},null,8,["data"])]),_:1})]),_:1},8,["value"])]),_:1})])}}}),Ue=U(be,[["__scopeId","data-v-14487878"]]);export{Ue as default};
