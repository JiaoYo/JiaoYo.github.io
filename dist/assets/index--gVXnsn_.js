import{d as b,o as x,c as D,w as o,f as e,g as k,t as N,h as r,$ as t,B as S,E as M,F as E,X as v,N as P,i as w,b as V,aa as j,ax as F,a6 as T}from"./index-BuIHZWoY.js";import{f as $}from"./system-log-CN1kNKwT.js";import{u as A}from"./table-Cjc9MU6x.js";import{_ as G}from"./round-search-BnajOtoe.js";import{_ as L}from"./FormItemGridItem-76Hw6OX0.js";import{_ as O}from"./Grid-CLx151nh.js";import{_ as U}from"./DataTable-B-S_z7K-.js";import"./RadioGroup-Be-YAEnB.js";import"./Forward-VYLTxKce.js";const X=b({name:"ErrorSearch",__name:"errorlog-search",emits:["search"],setup(s,{emit:c}){const n=c;function l(){n("search")}return(f,z)=>{const p=G,m=S,_=M,u=L,h=O,y=E,g=v;return x(),D(g,{bordered:!1,size:"small",class:"card-wrapper"},{default:o(()=>[e(y,{"label-placement":"left","label-width":80,"show-feedback":!1},{default:o(()=>[e(h,{responsive:"screen","item-responsive":""},{default:o(()=>[e(u,{span:"24 s:12 m:6"},{default:o(()=>[e(_,{class:"w-full"},{default:o(()=>[e(m,{type:"primary",ghost:"",onClick:l},{icon:o(()=>[e(p,{class:"text-icon"})]),default:o(()=>[k(" "+N(r(t)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),H={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function J(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!j(s)}const re=b({name:"logmanage_errorlog",__name:"index",setup(s){const c=P(),n=w(!1),l=w({errorInfo:""}),{columns:f,columnChecks:z,data:p,getData:m,loading:_,pagination:u,searchParams:h,resetSearchParams:y}=A({apiFn:$,apiParams:{page:1,pageSize:20,limit:20,_t:new Date().getTime()},columns:()=>[{key:"requestUri",title:t("page.systemlog.error.requestUri"),width:350,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"requestMethod",title:t("page.systemlog.error.requestMethod"),width:100,align:"center",resizable:!0},{key:"requestParams",title:t("page.systemlog.error.requestParams"),width:350,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"ip",title:t("page.systemlog.error.ip"),width:160,align:"center",resizable:!0},{key:"userAgent",title:t("page.systemlog.error.userAgent"),width:240,align:"center",ellipsis:{tooltip:!0},resizable:!0},{key:"createDate",title:t("page.systemlog.error.createDate"),width:160,align:"center",resizable:!0},{key:"operate",title:t("common.operate"),align:"center",width:130,render:i=>{let a;return e("div",{class:"flex-center gap-8px"},[e(S,{type:"primary",ghost:!0,size:"small",onClick:()=>g(i)},J(a=t("page.systemlog.error.errorMsg"))?a:{default:()=>[a]})])}}]});function g(i){l.value.errorInfo=i.errorInfo,n.value=!0}return(i,a)=>{const C=U,I=v,q=F,B=T;return x(),V("div",H,[e(X,{onSearch:r(m)},null,8,["onSearch"]),e(I,{title:r(t)("page.systemlog.error.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{default:o(()=>[e(C,{columns:r(f),data:r(p),size:"small","flex-height":!r(c).isMobile,"scroll-x":"",loading:r(_),remote:"","row-key":d=>d.id,pagination:r(u),class:"sm:h-full"},null,8,["columns","data","flex-height","loading","row-key","pagination"])]),_:1},8,["title"]),e(B,{show:n.value,"onUpdate:show":a[0]||(a[0]=d=>n.value=d),title:r(t)("page.systemlog.error.errorMsg"),preset:"card",class:"w-800px"},{default:o(()=>[e(q,{class:"h-480px pr-20px"},{default:o(()=>[k(N(l.value.errorInfo),1)]),_:1})]),_:1},8,["show","title"])])}}});export{re as default};
