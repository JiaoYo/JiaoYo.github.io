import{_ as Z}from"./table-column-setting.vue_vue_type_script_setup_true_lang-6Nzb9Kiu.js";import{_ as X}from"./export-UTA8ZTbB.js";import{_ as Y}from"./round-search-SYXF_eK4.js";import{d as I,a2 as $,N as Q,i as x,s as ee,be as ae,o as D,b as R,I as U,a8 as te,bd as w,a9 as ne,f as e,w as t,h as n,B as E,aa as oe,g as O,t as z,$ as B,c as se,ab as F,S as le,F as ie,X as re,ae as ce,bY as de,E as me,bZ as pe}from"./index-ABwqYAX9.js";import{b as ue}from"./metar-DM-7TtZf.js";import{u as _e}from"./echarts-BUBTKrhd.js";import{e as fe}from"./exportExcel-Bv4G4H50.js";import{_ as he}from"./DatePicker-bZWlysDu.js";import{_ as ge}from"./FormItemGridItem-2gUp7nXG.js";import{_ as ye}from"./Grid-CmXP23Pb.js";const we=I({name:"LineChart",__name:"line-chart",props:{data:{type:Object,default:()=>({})}},setup(T){const c=T;$(()=>c.data,async a=>{b(),v()});const p=Q(),l=x(null),{domRef:h,updateOptions:u,showLoading:b,hideLoading:g}=_e(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(a){return a+"℃"}},legend:{data:["2m气温","2m露点温度"]},grid:{left:"6%",right:"8%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} ℃"}},series:[{color:"#e90445",name:"2m气温",type:"line",emphasis:{focus:"series"},data:[]},{color:"#009688",name:"2m露点温度",type:"line",emphasis:{focus:"series"},data:[]}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]}));async function v(){await new Promise(a=>{setTimeout(a,1e3)}),u(a=>(a.xAxis.data=c.data.map(i=>i.dbtime),a.series[0].data=c.data.map(i=>i.tt2),a.series[1].data=c.data.map(i=>i.dt2),a))}function C(){u((a,i)=>{const y=i();return a.legend.data=y.legend.data,a.series[0].name=y.series[0].name,a.series[1].name=y.series[1].name,a})}async function N(){v()}return $(()=>p.locale,()=>{C()}),N(),ee(()=>{l.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),ae(()=>{l.value!==null&&(clearInterval(l.value),l.value=null)}),(a,i)=>(D(),R("div",{ref_key:"domRef",ref:h,class:"h-600px overflow-hidden"},null,512))}}),be=U(we,[["__scopeId","data-v-89214fe3"]]),ve={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},ke=I({name:"realtimequery_nwpquery",__name:"index",setup(T){const{columns:c,columnChecks:p,data:l,getData:h,loading:u,mobilePagination:b,searchParams:g,resetSearchParams:v}=te({apiFn:ue,apiParams:{page:1,pageSize:20,limit:20,startTime:w(1,Date.now()),endTime:w(1,Date.now()+2592e5),_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",width:50},{key:"dbtime",title:"时间",align:"center",width:160},{key:"tt2",title:"2m气温(℃)",align:"center",width:100},{key:"dt2",title:"2m露点(℃)",align:"center",width:100},{key:"rh2",title:"相对湿度(%)",align:"center",width:100},{key:"wd10",title:"10m风向(°)",align:"center",width:100},{key:"ws10",title:"10m风速(m/s)",align:"center",width:100},{key:"rain",title:"降水量(mm)",align:"center",width:100},{key:"ps",title:"气压(hPa)",align:"center",width:100},{key:"tcc",title:"总云量(%)",align:"center",width:100},{key:"ssrd",title:"太阳总辐射(W/m²)",align:"center",width:140},{key:"tsdsr",title:"太阳直接辐射(W/m²)",align:"center",width:140},{key:"ssrdiff",title:"太阳散辐射(W/m²)",align:"center",width:140}]}),{drawerVisible:C,operateType:N,editingData:a,handleAdd:i,handleEdit:y,checkedRowKeys:_,onBatchDeleted:xe,onDeleted:De}=ne(l,h),A=()=>{h()},S=x([Date.now(),Date.now()+864e5*3]);async function G(f,o){g.startTime=w(1,o[0]),g.endTime=w(1,o[1])}const V=()=>{const f={};c.value.forEach(s=>{s.key!="index"&&s.key!="operation"&&s.type!=="selection"&&(f[s.key]=s.title)});const o=[];l.value.forEach(s=>{if(_.value.includes(s.id)){const d=JSON.parse(JSON.stringify(f));for(const m in d)s.hasOwnProperty(m)?d[m]=s[m]:d[m]="";o.push(d)}}),fe(o,f,"天气预报数据")},k=x("0");return(f,o)=>{const s=he,d=ge,m=Y,j=ye,H=ie,P=re,M=ce,L=de,W=X,q=Z,J=me,K=pe;return D(),R("div",ve,[e(P,{bordered:!1,size:"small"},{default:t(()=>[e(H,{ref:"formRef",model:n(g),"label-placement":"left","show-feedback":!1},{default:t(()=>[e(j,{"y-gap":16,responsive:"screen","item-responsive":""},{default:t(()=>[e(d,{span:"24 s:12 m:7",label:"起止时间",path:"startTime"},{default:t(()=>[e(s,{value:S.value,"onUpdate:value":o[0]||(o[0]=r=>S.value=r),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":G,"default-time":["00:00:00","23:59:59"]},null,8,["value"])]),_:1}),e(d,{span:"24 s:12 m:5",label:"",path:"endTime",class:"pr-24px"},{default:t(()=>[e(n(E),{type:"primary",ghost:"",onClick:A},{icon:t(()=>[e(m,{class:oe(["text-icon",{"animate-spin":n(u)}])},null,8,["class"])]),default:t(()=>[O(" "+z(n(B)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{default:t(()=>[e(K,{type:"card",animated:"",value:k.value,"onUpdate:value":o[3]||(o[3]=r=>k.value=r),class:"h-100%","pane-wrapper-style":{flex:1}},{suffix:t(()=>[k.value=="0"?(D(),se(J,{key:0,align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:t(()=>[e(n(E),{onClick:V,size:"small",disabled:n(_).length==0},{icon:t(()=>[e(W,{class:"text-icon"})]),default:t(()=>[O(" "+z(n(B)("common.export")),1)]),_:1},8,["disabled"]),e(q,{columns:n(p),"onUpdate:columns":o[2]||(o[2]=r=>F(p)?p.value=r:null)},null,8,["columns"])]),_:1})):le("",!0)]),default:t(()=>[e(L,{name:"0",tab:"表格",class:"h-100%"},{default:t(()=>[e(M,{"checked-row-keys":n(_),"onUpdate:checkedRowKeys":o[1]||(o[1]=r=>F(_)?_.value=r:null),columns:n(c),data:n(l),size:"small",loading:n(u),remote:"","row-key":r=>r.id,pagination:n(l).length?n(b):void 0,class:"sm:h-full","flex-height":!0,"scroll-x":""},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1}),e(L,{name:"1",tab:"图表"},{default:t(()=>[e(be,{data:n(l)},null,8,["data"])]),_:1})]),_:1},8,["value"])]),_:1})])}}}),Be=U(ke,[["__scopeId","data-v-ec457da8"]]);export{Be as default};
