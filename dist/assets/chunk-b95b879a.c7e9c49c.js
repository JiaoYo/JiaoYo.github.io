(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b95b879a"],{"47ef":function(e,t,a){"use strict";a.r(t);a("99af"),a("4160"),a("c975"),a("b0c0"),a("159b");var n=a("5530"),o=a("c1df"),i=a.n(o),r=a("2f62"),l=a("e199"),s={name:"Analysis",i18n:a("6aa0"),data:function(){return{page:1,pageSize:100,total:0,scrollHeight:0,pagerLoading:!1,dataListLoading:!1,dataList:[],dataForm:{devName:void 0,fault:-1,confirmStatus:-1,level:-1,alarmDate:[],name:void 0},checkboxConfig:{reserve:!1,highlight:!0},multipeAlarmIds:[],devDataList:[],devIdNameObj:{},faultList:[{name:this.$t("all"),value:-1},{name:this.$t("occur"),value:0},{name:this.$t("recover"),value:1}],confirmStatusList:[{name:this.$t("all"),value:-1},{name:this.$t("unconfirmed"),value:0},{name:this.$t("confirmed"),value:1}],levelList:[{name:this.$t("all"),value:-1},{name:this.$t("notice"),value:0},{name:this.$t("warning"),value:1},{name:this.$t("serious"),value:2}]}},computed:Object(n.a)(Object(n.a)({},Object(r.e)("setting",["lang"])),Object(r.e)("account",["user"])),methods:{moment:i.a,disabledAlarmDate:function(e){return e&&(e<i()().subtract(31,"days").startOf("day")||e>i()().endOf("day"))},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleAlarmTimeChange:function(e,t){console.log(e),this.dataForm.alarmDate=t,this.handleQuerySearch()},getAllDevcieList:function(){var e=this;e.devDataList=[{id:-1,name:e.$t("all")}],e.devIdNameObj={},Object(l.l)({}).then((function(t){var a=t.data;return!!a&&(0!=a.code?(e.$message.config({maxCount:1}),e.$message.destroy(),e.$message.warning(a.msg)):(a.data.forEach((function(t){0==t.type&&(e.devDataList=e.devDataList.concat(t.dev))})),e.devDataList.length>0&&!e.dataForm.devName&&(e.dataForm.devName=e.devDataList[0].id),e.devDataList.forEach((function(t){e.devIdNameObj[t.id]=t.name})),void e.getDataList()))})).catch((function(e){return console.log(e),!1}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.page=t,this.pageSize=a,this.getDataList()},handleQuerySearch:function(){this.page=1,this.getDataList()},getDataList:function(){var e=this,t=e.page,a={page:--t,count:e.pageSize,dev_id:e.dataForm.devName,fault_status:e.dataForm.fault,check_status:e.dataForm.confirmStatus,level:e.dataForm.level,name:e.dataForm.name};e.dataForm.alarmDate.length>0&&(e.dataForm.alarmDate[0]&&(a.begin_time=e.dataForm.alarmDate[0]),e.dataForm.alarmDate[1]&&(a.end_time=e.dataForm.alarmDate[1])),e.dataListLoading=!0,Object(l.j)(a).then((function(t){var a=t.data;if(a){if(0!=a.code)return e.dataListLoading=!1,e.$message.config({maxCount:1}),e.$message.destroy(),e.$message.error(a.msg);if(e.total=a.data.total,e.dataList=a.data.alarm,e.dataListLoading=!1,e.multipeAlarmIds=[],document.getElementsByClassName("vxe-pager--goto-text").length>0){var n=document.createEvent("HTMLEvents"),o=document.getElementsByClassName("vxe-input--inner")[0];document.getElementsByClassName("vxe-pager--goto-text")[0].innerHTML=e.$t("goto"),document.getElementsByClassName("vxe-pager--classifier-text")[0].innerHTML=e.$t("page"),o.value=parseInt(o.value)+" "+e.$t("articlePage"),n.initEvent("input",!0,!0),o.dispatchEvent(n),document.getElementsByClassName("vxe-pager--total")[0].innerHTML=e.$t("total")+" "+e.total+" "+e.$t("records")}}else e.dataListLoading=!1})).catch((function(t){return console.log(t),e.dataListLoading=!1,!1}))},selectAll:function(e){var t=this;console.log(e);var a=this.$refs.recordTable.getCheckboxRecords(!1);this.multipeAlarmIds=[],a.forEach((function(e){t.multipeAlarmIds.push({id:e.id,name:e.name,devName:t.devIdNameObj[e.dev_id]})}))},handleSelectedWriteValueChange:function(e){var t=this,a=this.$refs.recordTable.getCheckboxRecords(!1);this.multipeAlarmIds=[],a.forEach((function(e){t.multipeAlarmIds.push({id:e.id,name:e.name,devName:t.devIdNameObj[e.dev_id]})}))},handleConfirmChange:function(e){var t=this,a=[],n={},o=[];if(e)a.push(e.id);else{if(0==t.multipeAlarmIds.length)return t.$message.config({maxCount:1}),t.$message.destroy(),t.$message.warning(t.$t("pleaseSelectTheDataSourceToBeConfirmedInBatches"));t.multipeAlarmIds.forEach((function(e){a.push(e.id),n[e.id]=e.name}))}t.$confirm({title:t.$t("hint"),content:t.$t("wantConfirm"),okText:t.$t("confirm"),okType:"danger",cancelText:t.$t("cancel"),onOk:function(){var e=this;Object(l.b)(a).then((function(a){var i=a.data;if(i){if(0!=i.code)return t.$message.config({maxCount:1}),t.$message.destroy(),t.$message.error(i.msg);i.data.forEach((function(e){e.check||o.push(e.id)})),0==o.length?(t.$message.config({maxCount:1}),t.$message.destroy(),t.$message.success(t.$t("confirmedSuccessfully")),setTimeout((function(){t.getDataList()}),500)):(t.$message.config({maxCount:1}),t.$message.destroy(),t.$message.error((function(a){return e.$createElement("div",(i=[],o.forEach((function(e){i.length,i.push(a("span",n[e]+" "+t.$t("confirmationFailed")),a("br"))})),i));var i})),setTimeout((function(){t.getDataList()}),500))}})).catch((function(e){return console.log(e),!1}))},onCancel:function(){console.log("Cancel")}})}},mounted:function(){var e=this;this.scrollHeight=window.innerHeight-160-60-35,this.getAllDevcieList(),window.onresize=function(){e.scrollHeight=window.innerHeight-160-60-35},document.addEventListener("click",(function(){if(document.getElementsByClassName("vxe-select-option").length>0)for(var t=0;t<document.getElementsByClassName("vxe-select-option").length;t++)document.getElementsByClassName("vxe-select-option")[t].innerHTML=parseInt(document.getElementsByClassName("vxe-select-option")[t].innerHTML)+" "+e.$t("articlePage")}))},watch:{lang:{handler:function(){if(this.faultList=[{name:this.$t("all"),value:-1},{name:this.$t("occur"),value:0},{name:this.$t("recover"),value:1}],this.confirmStatusList=[{name:this.$t("all"),value:-1},{name:this.$t("unconfirmed"),value:0},{name:this.$t("confirmed"),value:1}],this.levelList=[{name:this.$t("all"),value:-1},{name:this.$t("notice"),value:0},{name:this.$t("warning"),value:1},{name:this.$t("serious"),value:2}],document.getElementsByClassName("vxe-pager--goto-text").length>0){var e=document.createEvent("HTMLEvents"),t=document.getElementsByClassName("vxe-input--inner")[0];document.getElementsByClassName("vxe-pager--goto-text")[0].innerHTML=this.$t("goto"),document.getElementsByClassName("vxe-pager--classifier-text")[0].innerHTML=this.$t("page"),t.value=parseInt(t.value)+" "+this.$t("articlePage"),e.initEvent("input",!0,!0),t.dispatchEvent(e),document.getElementsByClassName("vxe-pager--total")[0].innerHTML=this.$t("total")+" "+this.total+" "+this.$t("records")}},deep:!0,immediate:!0},dataForm:{handler:function(e){""==e.name&&this.getDataList()},deep:!0}}},c=a("0c7c"),m=Object(c.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticStyle:{"margin-bottom":"24px"},attrs:{bordered:!1}},[a("a-row",{attrs:{gutter:[12,12]}},[a("a-form-model",{attrs:{layout:"inline"}},[a("a-row",[a("a-col",[a("a-form-model-item",{attrs:{label:e.$t("device")}},[a("a-select",{staticStyle:{width:"300px"},attrs:{"show-search":"",placeholder:e.$t("pleaseSelectDevsice"),"option-filter-prop":"children","filter-option":e.filterOption},on:{change:e.handleQuerySearch},model:{value:e.dataForm.devName,callback:function(t){e.$set(e.dataForm,"devName",t)},expression:"dataForm.devName"}},e._l(e.devDataList,(function(t){return a("a-select-option",{key:t.id,attrs:{label:t.name,value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:e.$t("faultStatus")}},[a("a-select",{staticStyle:{width:"140px"},attrs:{"show-search":"",placeholder:e.$t("pleaseSelectFaultStatus"),"option-filter-prop":"children","filter-option":e.filterOption},on:{change:e.handleQuerySearch},model:{value:e.dataForm.fault,callback:function(t){e.$set(e.dataForm,"fault",t)},expression:"dataForm.fault"}},e._l(e.faultList,(function(t){return a("a-select-option",{key:t.value,attrs:{label:t.name,value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:e.$t("confirmStatus")}},[a("a-select",{staticStyle:{width:"140px"},attrs:{"show-search":"",placeholder:e.$t("pleaseSelectConfirmationStatus"),"option-filter-prop":"children","filter-option":e.filterOption},on:{change:e.handleQuerySearch},model:{value:e.dataForm.confirmStatus,callback:function(t){e.$set(e.dataForm,"confirmStatus",t)},expression:"dataForm.confirmStatus"}},e._l(e.confirmStatusList,(function(t){return a("a-select-option",{key:t.value,attrs:{label:t.name,value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:e.$t("severity")}},[a("a-select",{staticStyle:{width:"150px"},attrs:{"show-search":"",placeholder:e.$t("pleaseSelectLevel"),"option-filter-prop":"children","filter-option":e.filterOption},on:{change:e.handleQuerySearch},model:{value:e.dataForm.level,callback:function(t){e.$set(e.dataForm,"level",t)},expression:"dataForm.level"}},e._l(e.levelList,(function(t){return a("a-select-option",{key:t.value,attrs:{label:t.name,value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1)],1),a("a-row",[a("a-col",[a("a-form-model-item",{attrs:{label:e.$t("startAndEndTime")}},[a("a-range-picker",{attrs:{ranges:{Today:[e.moment(),e.moment()],"This Month":[e.moment().startOf("month"),e.moment()]},"show-time":"",format:"YYYY-MM-DD HH:mm:ss","default-value":e.dataForm.alarmDate.length>0?[e.moment(e.dataForm.alarmDate[0],"YYYY-MM-DD HH:mm:ss"),e.moment(e.dataForm.alarmDate[1],"YYYY-MM-DD HH:mm:ss")]:[],placeholder:[e.$t("startDate"),e.$t("endDate")]},on:{change:e.handleAlarmTimeChange}})],1),a("a-form-model-item",{attrs:{label:e.$t("name")}},[a("a-input",{staticStyle:{width:"100%"},attrs:{allowClear:"",placeholder:e.$t("pleaseEnterNmae")},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("a-form-model-item",[a("a-space",[a("a-button",{attrs:{icon:"search"},on:{click:e.handleQuerySearch}},[e._v(e._s(e.$t("search")))]),a("a-button",{attrs:{icon:"check-circle",type:"primary"},on:{click:function(t){return e.handleConfirmChange()}}},[e._v(e._s(e.$t("batchConfirmation")))])],1)],1)],1)],1)],1)],1),a("a-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:[24,24]}},[a("a-col",{attrs:{span:24}},[a("vxe-table",{ref:"recordTable",attrs:{border:"",resizable:"","auto-resize":"","sync-resize":"","show-overflow":"",size:"small","highlight-current-row":"","highlight-hover-row":"","empty-text":e.$t("noData"),data:e.dataList,loading:e.dataListLoading,"row-id":"id","min-height":144,"max-height":e.scrollHeight,"checkbox-config":e.checkboxConfig},on:{"checkbox-all":e.selectAll,"checkbox-change":e.handleSelectedWriteValueChange}},[a("vxe-column",{key:"1",attrs:{type:"checkbox",width:"60",align:"center",fixed:"left"}}),a("vxe-column",{key:"2",attrs:{field:"devName",title:e.$t("deviceName"),"min-width":"160",align:"center","show-overflow":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.devIdNameObj[t.row.dev_id])+" ")]}}])}),a("vxe-column",{key:"3",attrs:{field:"name",title:e.$t("objectModelIdentification"),"min-width":"160",align:"center","show-overflow":""}}),a("vxe-column",{key:"4",attrs:{field:"fault_status",title:e.$t("faultStatus"),width:"120",align:"center","show-overflow":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a-tag",[e._v(" "+e._s(0==t.row.fault_status?e.$t("occur"):1==t.row.fault_status?e.$t("recover"):"--"))])]}}])}),a("vxe-column",{key:"5",attrs:{field:"check_status",title:e.$t("confirmStatus"),width:"120",align:"center","show-overflow":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a-tag",{attrs:{color:0==t.row.check_status?"#f00":1==t.row.check_status?"#0f0":""}},[e._v(" "+e._s(0==t.row.check_status?e.$t("unconfirmed"):1==t.row.check_status?e.$t("confirmed"):"--"))])]}}])}),a("vxe-column",{key:"6",attrs:{field:"level",title:e.$t("severity"),width:"120",align:"center","show-overflow":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a-tag",{attrs:{color:0==t.row.level?"#2db7f5":1==t.row.level?"#fa8c16":"#f00"}},[e._v(" "+e._s(0==t.row.level?e.$t("notice"):1==t.row.level?e.$t("warning"):e.$t("serious")))])]}}])}),a("vxe-column",{key:"7",attrs:{field:"generate_time",title:e.$t("generationTime"),width:"160",align:"center","show-overflow":""}}),a("vxe-column",{key:"8",attrs:{field:"recovery_time",title:e.$t("recoveryTime"),width:"160",align:"center","show-overflow":""}}),"visitor"!=e.user?a("vxe-table-column",{key:"9",attrs:{title:e.$t("option"),"header-align":"center",align:"center",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.check_status?a("a",{on:{click:function(a){return e.handleConfirmChange(t.row)}}},[e._v(e._s(e.$t("confirm")))]):e._e()]}}],null,!1,2182994847)}):e._e()],1),a("vxe-pager",{attrs:{perfect:"",size:"mini",loading:e.pagerLoading,"current-page":e.page,"page-size":e.pageSize,"page-sizes":[100,200,500,1e3],total:e.total,layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":e.handlePageChange}})],1)],1)],1)}),[],!1,null,null,null).exports;t.default=m},"6aa0":function(e,t,a){var n,o,i=a("9523");e.exports={messages:{CN:(n={device:"设备",pleaseSelectDevsice:"请选择设备",severity:"级别",pleaseSelectLevel:"请选择级别",all:"全部",major:"重要",minor:"次要",warning:"提示",sortingMode:"排序方式",pleaseSelectSortingMode:"请选择排序方式",time:"时间排序",severitySort:"级别排序",search:"查询",alarmID:"告警ID",deviceName:"设备名称",alarmName:"告警名称",generationTime:"产生时间",noData:"暂无数据",goto:"前往",page:"页",articlePage:"条/页",total:"共",records:"条记录",faultStatus:"故障状态",pleaseSelectFaultStatus:"请选择故障状态",name:"物模型标识",pleaseEnterNmae:"请输入物模型标识",occur:"发生",recover:"恢复",confirmStatus:"确认状态",pleaseSelectConfirmationStatus:"请选择确认状态",unconfirmed:"未确认",confirmed:"已确认",notice:"通知"},i(n,"warning","警告"),i(n,"serious","严重"),i(n,"startDate","开始日期"),i(n,"endDate","结束日期"),i(n,"startAndEndTime","起止时间"),i(n,"recoveryTime","恢复时间"),i(n,"option","操作"),i(n,"batchConfirmation","批量确认"),i(n,"confirm","确认"),i(n,"pleaseSelectTheDataSourceToBeConfirmedInBatches","请选择要批量确认的数据源"),i(n,"hint","提示"),i(n,"cancel","取消"),i(n,"wantConfirm","确定要执行确认操作吗？"),i(n,"confirmedSuccessfully","确认成功"),i(n,"confirmationFailed","确认失败"),i(n,"objectModelIdentification","物模型标识"),n),US:(o={device:"Device",pleaseSelectDevsice:"Please Select Device",severity:"Severity",pleaseSelectLevel:"Please Select Severity",all:"All",major:"Major",minor:"Minor",warning:"Warning",sortingMode:"SortingMode",pleaseSelectSortingMode:"Please Select Sorting Mode",time:"Time",severitySort:"Severity",search:"Search",alarmID:"Alarm ID",deviceName:"Device Name",alarmName:"Alarm Name",generationTime:"Generation Time",noData:"No data",goto:"Go to",page:"Page",articlePage:"items/Page",total:"Total",records:"Records",faultStatus:"Fault status",pleaseSelectFaultStatus:"Please select fault status",occur:"Occur",recover:"Recover",confirmStatus:"Confirm status",pleaseSelectConfirmationStatus:"Please select confirmation status",unconfirmed:"Unconfirmed",confirmed:"Confirmed",notice:"Notify"},i(o,"warning","Warn"),i(o,"serious","Serious"),i(o,"startDate","Start date"),i(o,"endDate","End date"),i(o,"startAndEndTime","Start and end time"),i(o,"recoveryTime","Recovery Time"),i(o,"option","Option"),i(o,"batchConfirmation","Batch confirmation"),i(o,"confirm","Confirm"),i(o,"pleaseSelectTheDataSourceToBeConfirmedInBatches","Please select the data source to be confirmed in batches"),i(o,"hint","Hint"),i(o,"cancel","Cancel"),i(o,"wantConfirm","Are you sure you want to confirm?"),i(o,"confirmedSuccessfully","Confirmed successfully"),i(o,"confirmationFailed","Confirmation failed"),i(o,"objectModelIdentification","Object model identification"),o)}}}}]);