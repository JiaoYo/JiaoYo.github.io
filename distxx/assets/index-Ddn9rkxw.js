import{_ as Z}from"./table-column-setting.vue_vue_type_script_setup_true_lang-C5rtfvJ5.js";import{_ as X}from"./export-BLR5fApd.js";import{_ as Y}from"./round-search-Bax3PIKr.js";import{d as I,a2 as $,N as Q,i as x,s as ee,bj as te,o as D,b as R,I as U,bq as w,f as e,w as a,h as n,B as E,a8 as ae,g as O,t as z,$ as B,c as ne,a9 as F,S as oe,F as se,X as ie,bY as le,E as re,bZ as ce}from"./index-BfAsC10q.js";import{b as me}from"./metar-B4Z89Gc3.js";import{u as de,a as pe}from"./table-DlIAyHtY.js";import{u as ue}from"./echarts-P-V0kis7.js";import{e as _e}from"./exportExcel-Bv4G4H50.js";import{_ as fe}from"./DatePicker-BI-GK2N9.js";import{_ as he}from"./FormItemGridItem-CM5zeY-x.js";import{_ as ge}from"./Grid-C5N5wDNZ.js";import{_ as ye}from"./DataTable-DAbQR8IX.js";import"./Forward-Cz-tjaGb.js";import"./RadioGroup-BmSMxSTA.js";const we=I({name:"LineChart",__name:"line-chart",props:{data:{type:Object,default:()=>({})}},setup(T){const c=T;$(()=>c.data,async t=>{v(),b()});const p=Q(),i=x(null),{domRef:h,updateOptions:u,showLoading:v,hideLoading:g}=ue(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(t){return t+"℃"}},legend:{data:["2m气温","2m露点温度"]},grid:{left:"6%",right:"8%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} ℃"}},series:[{color:"#e90445",name:"2m气温",type:"line",emphasis:{focus:"series"},data:[]},{color:"#009688",name:"2m露点温度",type:"line",emphasis:{focus:"series"},data:[]}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]}));async function b(){await new Promise(t=>{setTimeout(t,1e3)}),u(t=>(t.xAxis.data=c.data.map(l=>l.dbtime),t.series[0].data=c.data.map(l=>l.tt2),t.series[1].data=c.data.map(l=>l.dt2),t))}function C(){u((t,l)=>{const y=l();return t.legend.data=y.legend.data,t.series[0].name=y.series[0].name,t.series[1].name=y.series[1].name,t})}async function N(){b()}return $(()=>p.locale,()=>{C()}),N(),ee(()=>{i.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),te(()=>{i.value!==null&&(clearInterval(i.value),i.value=null)}),(t,l)=>(D(),R("div",{ref_key:"domRef",ref:h,class:"h-600px overflow-hidden"},null,512))}}),ve=U(we,[["__scopeId","data-v-89214fe3"]]),be={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},ke=I({name:"realtimequery_nwpquery",__name:"index",setup(T){const{columns:c,columnChecks:p,data:i,getData:h,loading:u,mobilePagination:v,searchParams:g,resetSearchParams:b}=de({apiFn:me,apiParams:{page:1,pageSize:20,limit:20,startTime:w(1,Date.now()),endTime:w(1,Date.now()+2592e5),_t:new Date().getTime()},immediate:!0,showTotal:!0,columns:()=>[{type:"selection",width:50},{key:"dbtime",title:"时间",align:"center",width:160},{key:"tt2",title:"2m气温(℃)",align:"center",width:100},{key:"dt2",title:"2m露点(℃)",align:"center",width:100},{key:"rh2",title:"相对湿度(%)",align:"center",width:100},{key:"wd10",title:"10m风向(°)",align:"center",width:100},{key:"ws10",title:"10m风速(m/s)",align:"center",width:100},{key:"rain",title:"降水量(mm)",align:"center",width:100},{key:"ps",title:"气压(hPa)",align:"center",width:100},{key:"tcc",title:"总云量(%)",align:"center",width:100},{key:"ssrd",title:"太阳总辐射(W/m²)",align:"center",width:140},{key:"tsdsr",title:"太阳直接辐射(W/m²)",align:"center",width:140},{key:"ssrdiff",title:"太阳散辐射(W/m²)",align:"center",width:140}]}),{drawerVisible:C,operateType:N,editingData:t,handleAdd:l,handleEdit:y,checkedRowKeys:_,onBatchDeleted:xe,onDeleted:De}=pe(i,h),A=()=>{h()},S=x([Date.now(),Date.now()+864e5*3]);async function j(f,o){g.startTime=w(1,o[0]),g.endTime=w(1,o[1])}const G=()=>{const f={};c.value.forEach(s=>{s.key!="index"&&s.key!="operation"&&s.type!=="selection"&&(f[s.key]=s.title)});const o=[];i.value.forEach(s=>{if(_.value.includes(s.id)){const m=JSON.parse(JSON.stringify(f));for(const d in m)s.hasOwnProperty(d)?m[d]=s[d]:m[d]="";o.push(m)}}),_e(o,f,"天气预报数据")},k=x("0");return(f,o)=>{const s=fe,m=he,d=Y,V=ge,q=se,P=ie,H=ye,L=le,M=X,W=Z,J=re,K=ce;return D(),R("div",be,[e(P,{bordered:!1,size:"small"},{default:a(()=>[e(q,{ref:"formRef",model:n(g),"label-placement":"left","show-feedback":!1},{default:a(()=>[e(V,{"y-gap":16,responsive:"screen","item-responsive":""},{default:a(()=>[e(m,{span:"24 s:12 m:7",label:"起止时间",path:"startTime"},{default:a(()=>[e(s,{value:S.value,"onUpdate:value":o[0]||(o[0]=r=>S.value=r),type:"datetimerange","value-format":"yyyy-MM-dd hh:mm:ss","onUpdate:formattedValue":j,"default-time":["00:00:00","23:59:59"]},null,8,["value"])]),_:1}),e(m,{span:"24 s:12 m:5",label:"",path:"endTime",class:"pr-24px"},{default:a(()=>[e(n(E),{type:"primary",ghost:"",onClick:A},{icon:a(()=>[e(d,{class:ae(["text-icon",{"animate-spin":n(u)}])},null,8,["class"])]),default:a(()=>[O(" "+z(n(B)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{default:a(()=>[e(K,{type:"card",animated:"",value:k.value,"onUpdate:value":o[3]||(o[3]=r=>k.value=r),class:"h-100%","pane-wrapper-style":{flex:1}},{suffix:a(()=>[k.value=="0"?(D(),ne(J,{key:0,align:"center",wrap:"",justify:"end",class:"lt-sm:w-200px"},{default:a(()=>[e(n(E),{onClick:G,size:"small",disabled:n(_).length==0},{icon:a(()=>[e(M,{class:"text-icon"})]),default:a(()=>[O(" "+z(n(B)("common.export")),1)]),_:1},8,["disabled"]),e(W,{columns:n(p),"onUpdate:columns":o[2]||(o[2]=r=>F(p)?p.value=r:null)},null,8,["columns"])]),_:1})):oe("",!0)]),default:a(()=>[e(L,{name:"0",tab:"表格",class:"h-100%"},{default:a(()=>[e(H,{"checked-row-keys":n(_),"onUpdate:checkedRowKeys":o[1]||(o[1]=r=>F(_)?_.value=r:null),columns:n(c),data:n(i),size:"small",loading:n(u),remote:"","row-key":r=>r.id,pagination:n(i).length?n(v):void 0,class:"sm:h-full","flex-height":!0,"scroll-x":""},null,8,["checked-row-keys","columns","data","loading","row-key","pagination"])]),_:1}),e(L,{name:"1",tab:"图表"},{default:a(()=>[e(ve,{data:n(i)},null,8,["data"])]),_:1})]),_:1},8,["value"])]),_:1})])}}}),Ue=U(ke,[["__scopeId","data-v-ec457da8"]]);export{Ue as default};
