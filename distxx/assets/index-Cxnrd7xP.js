import{d as S,a0 as F,a2 as k,N as C,i as A,s as B,bj as P,o as N,b as U,I as W,Z as H,a1 as K,p as Z,bq as h,c as j,w as a,f as t,g as i,t as D,h as p,$ as X,y as J,E as R,B as Q,F as Y,X as I,l as E,a9 as M,e as V}from"./index-HZqiqJ25.js";import{_ as ee,f as ae}from"./outline-data-exploration-le50Whj8.js";import{u as te}from"./table-BJ7Pa9Rb.js";import{u as oe}from"./echarts-CQwI58MU.js";import{_ as ne}from"./round-search-C_gAF5H8.js";import{_ as se}from"./DatePicker-D8jXcua0.js";import{_ as le}from"./FormItemGridItem-ti7ONDuQ.js";import{_ as re,a as ie}from"./RadioGroup-BNp-M84I.js";import{_ as ce}from"./Grid-Cn-aZgeW.js";import{_ as me,a as ue}from"./DescriptionsItem-Bd94c8kw.js";import"./Forward-BjHo1o6m.js";const pe=S({name:"LineChart",__name:"line-chart",props:{data:{required:!0},dataModifiers:{}},emits:["update:data"],setup(y){const c=F(y,"data");k(()=>c.value,e=>{o()});const v=C(),m=A(null),{domRef:d,updateOptions:x}=oe(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(e){return e+"[兆瓦]"}},legend:{data:["预测功率","实际功率"]},grid:{left:"2%",right:"3%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} [兆瓦]"}},series:[{color:"#e90445",name:"预测功率",type:"line",emphasis:{focus:"series"},data:[]},{color:"#addb0b",name:"实际功率",type:"line",emphasis:{focus:"series"},label:{show:!0,position:"top",formatter:function(e){return e.value+"[兆瓦]"}},data:[]}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]}));async function o(){await new Promise(e=>{setTimeout(e,1e3)}),x(e=>(e.xAxis.data=c.value.map(n=>n.time),e.series[0].data=c.value.map(n=>n.actual),e.series[1].data=c.value.map(n=>n.forecast),e))}function l(){x((e,n)=>{const s=n();return e.legend.data=s.legend.data,e.series[0].name=s.series[0].name,e.series[1].name=s.series[1].name,e})}async function _(){o()}return k(()=>v.locale,()=>{l()}),_(),B(()=>{m.value=window.setInterval(()=>{console.log("mainHomeLineChart timer")},1e3*60*5)}),P(()=>{m.value!==null&&(clearInterval(m.value),m.value=null)}),(e,n)=>(N(),U("div",{ref_key:"domRef",ref:d,class:"h-520px overflow-hidden"},null,512))}}),de=W(pe,[["__scopeId","data-v-5a23f566"]]),_e=S({name:"AlarmSearch",__name:"search",props:{model:{required:!0},modelModifiers:{}},emits:H(["reset","search","exportData"],["update:model"]),setup(y,{emit:c}){K({1:"电场1",2:"电场2",3:"电场3"});const v=c,m=C(),{formRef:d,restoreValidation:x}=Z(),o=F(y,"model");o.value.errorType="1",o.value.time=A([Number(h(5,Date.now()-864e5*6)),Number(h(5,Date.now()+864e5))]),o.value.startTime=h(0,Date.now()-864e5*6),o.value.endTime=h(0,Date.now()+864e5);async function l(n,s){o.value.startTime=n[0],o.value.endTime=n[1]}async function _(){v("search")}const e=()=>{v("exportData")};return(n,s)=>{const f=se,r=le,u=re,b=R,w=ie,g=ne,L=Q,$=ee,z=R,G=ce,q=Y,O=I;return N(),j(O,{bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[t(q,{ref_key:"formRef",ref:d,model:o.value,"label-placement":"left","label-width":p(m).locale=="en-US"?120:80,"show-feedback":!1,onKeyup:J(_,["enter"])},{default:a(()=>[t(G,{"y-gap":16,responsive:"screen","item-responsive":""},{default:a(()=>[t(r,{span:"24 s:12 m:6",label:"时间",path:"startTime",class:"pr-24px"},{default:a(()=>[t(f,{value:o.value.time,"onUpdate:value":s[0]||(s[0]=T=>o.value.time=T),type:"daterange","value-format":"yyyy-MM-dd",style:{width:"100%"},"onUpdate:formattedValue":l},null,8,["value"])]),_:1}),t(r,{span:"24 s:12 m:4",label:"",path:"errorType"},{default:a(()=>[t(w,{value:o.value.errorType,"onUpdate:value":s[1]||(s[1]=T=>o.value.errorType=T),name:"radiogroup"},{default:a(()=>[t(b,null,{default:a(()=>[t(u,{value:"0"},{default:a(()=>[i("短期误差")]),_:1}),t(u,{value:"1"},{default:a(()=>[i("超短期误差")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(r,{span:"24 s:12 m:6",class:"pr-24px"},{default:a(()=>[t(z,{class:"w-full"},{default:a(()=>[t(L,{type:"primary",ghost:"",onClick:_},{icon:a(()=>[t(g,{class:"text-icon"})]),default:a(()=>[i(" "+D(p(X)("common.search")),1)]),_:1}),t(L,{onClick:e},{icon:a(()=>[t($,{class:"text-icon"})]),default:a(()=>[i(" "+D("导出"))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-width"])]),_:1})}}}),fe={class:"min-h-500px flex-col-stretch gap-16px lt-sm:overflow-auto"},ge=V("span",{class:"font-size-16px"},"误差统计",-1),Ne=S({name:"statisticalanalysis_powererrorstatistics",__name:"index",setup(y){C();const{columns:c,columnChecks:v,data:m,getData:d,loading:x,mobilePagination:o,searchParams:l,resetSearchParams:_}=te({apiFn:ae,apiParams:{page:1,pageSize:20,limit:20,startTime:h(0,Date.now()-864e5*6),endTime:h(0,Date.now()+864e5),level:null,devtype:null,electricField:E.get("ip"),status:null,_t:new Date().getTime()},immediate:!1,showTotal:!0,columns:()=>[{key:"devname",title:"名称",align:"center",width:160},{key:"reoetits",title:"最大值",align:"center",width:160},{key:"content",title:"最小值",align:"center",minWidth:200},{key:"describe",title:"平均值",align:"center",minWidth:200}]});let e=[{time:"2024-07-18 06:00",actual:125,forecast:345},{time:"2024-07-18 08:00",actual:305,forecast:445},{time:"2024-07-18 10:00",actual:225,forecast:336},{time:"2024-07-18 12:00",actual:195,forecast:245},{time:"2024-07-18 14:00",actual:265,forecast:305},{time:"2024-07-18 16:00",actual:263,forecast:294},{time:"2024-07-18 18:00",actual:305,forecast:285},{time:"2024-07-18 20:00",actual:235,forecast:305},{time:"2024-07-18 22:00",actual:235,forecast:325}];const n=()=>{};k(()=>l.errorType,f=>{f=="1"?e=[{time:"2024-07-18 06:00",actual:125,forecast:345},{time:"2024-07-18 08:00",actual:305,forecast:445},{time:"2024-07-18 10:00",actual:225,forecast:336},{time:"2024-07-18 12:00",actual:195,forecast:245},{time:"2024-07-18 14:00",actual:265,forecast:305},{time:"2024-07-18 16:00",actual:263,forecast:294},{time:"2024-07-18 18:00",actual:305,forecast:285},{time:"2024-07-18 20:00",actual:235,forecast:305},{time:"2024-07-18 22:00",actual:235,forecast:325}]:e=[]});const s=f=>{f.detail.key==="ip"&&d({electricFieId:E.get("ip")})};return B(()=>{window.addEventListener("localStorageChanged",s)}),P(()=>{window.removeEventListener("localStorageChanged",s)}),(f,r)=>{const u=me,b=ue,w=I;return N(),U("div",fe,[t(_e,{model:p(l),"onUpdate:model":r[0]||(r[0]=g=>M(l)?l.value=g:null),onReset:p(_),onSearch:p(d),onExportData:n},null,8,["model","onReset","onSearch"]),t(w,{bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{header:a(()=>[V("span",null,D(p(l).errorType=="1"?"超短期功率误差曲线":"短期功率误差曲线"),1)]),default:a(()=>[t(de,{data:p(e),"onUpdate:data":r[1]||(r[1]=g=>M(e)?e.value=g:e=g)},null,8,["data"]),t(b,{"label-placement":"left",bordered:"",column:4,"label-style":{width:"200px",fontWeight:"bold",textAlign:"center",background:"#fafafa",borderRadius:"2px 0 0 2px",paddingLeft:"8px"}},{header:a(()=>[ge]),default:a(()=>[t(u,{label:"均方根误差(RMSE)"},{default:a(()=>[i(" 26 ")]),_:1}),t(u,{label:"平均绝对误差(MAE)"},{default:a(()=>[i(" 24 ")]),_:1}),t(u,{label:"相关性系数"},{default:a(()=>[i(" 32 ")]),_:1}),t(u,{label:"开机容量平均误差"},{default:a(()=>[i(" 32 ")]),_:1})]),_:1})]),_:1})])}}});export{Ne as default};
