import{d as e,b as a,k as l,e as s,o as t,c as d,w as u,h as o,g as i,H as m,Y as r}from"./index-7Ke4gaSZ.js";import{s as n}from"./dict-CE-AhKTF.js";import{u as c}from"./useForm-C662ILVi.js";const v=e({__name:"AddDictDataModal",emits:["save-success"],setup(e,{expose:v,emit:f}){const p=f,h=a(),_=a(""),b=l((()=>!!_.value)),g=l((()=>b.value?"编辑字典数据":"新增字典数据")),w=a(!1),x=a(!1),{form:V,resetForm:k}=c({id:void 0,name:"",value:"",pid:"",status:1}),y={name:[{required:!0,message:"请输入字典名"}],value:[{required:!0,message:"请输入字典值"},{match:/^[a-zA-Z0-9_]*$/,message:"格式不对！只能包含英文数字下划线"}],status:[{required:!0}]},j=()=>{var e;null==(e=h.value)||e.resetFields(),k()};v({add:e=>{_.value="",w.value=!0,V.pid=e},edit:async e=>{w.value=!0,_.value=e.id,V.id=e.id,x.value=!0,Object.assign(V,e),x.value=!1}});const U=async()=>{var e;try{if(await(null==(e=h.value)?void 0:e.validate()))return!1;await n(V),r.success("保存成功"),p("save-success")}catch(a){return!1}};return(e,a)=>{const l=s("a-input"),r=s("a-form-item"),n=s("a-switch"),c=s("a-form"),v=s("a-spin"),f=s("a-modal");return t(),d(f,{visible:i(w),"onUpdate:visible":a[3]||(a[3]=e=>m(w)?w.value=e:null),title:i(g),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:U,onClose:j},{default:u((()=>[o(v,{loading:i(x),class:"w-full"},{default:u((()=>[o(c,{ref_key:"formRef",ref:h,model:i(V),rules:y,size:"medium","auto-label-width":""},{default:u((()=>[o(r,{label:"字典名",field:"name"},{default:u((()=>[o(l,{modelValue:i(V).name,"onUpdate:modelValue":a[0]||(a[0]=e=>i(V).name=e),modelModifiers:{trim:!0},placeholder:"请输入字典名","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),o(r,{label:"字典值",field:"value"},{default:u((()=>[o(l,{modelValue:i(V).value,"onUpdate:modelValue":a[1]||(a[1]=e=>i(V).value=e),modelModifiers:{trim:!0},placeholder:"请输入字典值","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),o(r,{label:"状态",field:"status"},{default:u((()=>[o(n,{modelValue:i(V).status,"onUpdate:modelValue":a[2]||(a[2]=e=>i(V).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["loading"])])),_:1},8,["visible","title"])}}});export{v as _};
