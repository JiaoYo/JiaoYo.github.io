import{d as e,fV as a,an as l,b as t,k as d,L as s,e as i,o,c as r,w as u,h as m,g as n,Y as c}from"./index-Ds44FQ2x.js";import{s as p}from"./role-_DEuZqAk.js";import{u as f}from"./useForm-CWP54L0e.js";const v=e({__name:"AddRoleModal",props:a({editData:{type:Object,default:()=>({})},operateType:{type:String,default:"add"}},{visible:{default:!1},visibleModifiers:{}}),emits:a(["save-success"],["update:visible"]),setup(e,{emit:a}){const v=a,h=l(e,"visible"),b=e,V=t(),w=d((()=>"edit"==b.operateType?"编辑角色":"新增角色")),{form:x,resetForm:y}=f({id:"",name:"",code:"",status:1,description:""}),_={name:[{required:!0,message:"请输入角色名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}],code:[{required:!0,message:"请输入角色编码"},{match:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:"格式不对！只能英文开头，包含英文数字下划线"}],status:[{required:!0}]};s((()=>h.value),(e=>{e&&"edit"==b.operateType&&(x.code=b.editData.code,x.name=b.editData.name,x.description=b.editData.description,x.status=b.editData.status,x.id=b.editData.id)}));const g=()=>{var e;null==(e=V.value)||e.resetFields(),y()},k=async()=>{var e;try{if(await(null==(e=V.value)?void 0:e.validate()))return!1;await p(x),c.success(("edit"==b.operateType?"编辑":"新增")+"成功"),v("save-success")}catch(a){return!1}};return(e,a)=>{const l=i("a-input"),t=i("a-form-item"),d=i("a-textarea"),s=i("a-switch"),c=i("a-form"),p=i("a-modal");return o(),r(p,{visible:h.value,"onUpdate:visible":a[4]||(a[4]=e=>h.value=e),title:n(w),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:k,onClose:g},{default:u((()=>[m(c,{ref_key:"formRef",ref:V,model:n(x),rules:_,size:"medium","auto-label-width":""},{default:u((()=>[m(t,{label:"角色名称",field:"name"},{default:u((()=>[m(l,{modelValue:n(x).name,"onUpdate:modelValue":a[0]||(a[0]=e=>n(x).name=e),modelModifiers:{trim:!0},placeholder:"请输入角色名称","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),m(t,{label:"角色编码",field:"code"},{default:u((()=>[m(l,{modelValue:n(x).code,"onUpdate:modelValue":a[1]||(a[1]=e=>n(x).code=e),modelModifiers:{trim:!0},placeholder:"请输入角色编码","allow-clear":"",disabled:"edit"==b.operateType,"max-length":10},null,8,["modelValue","disabled"])])),_:1}),m(t,{label:"描述",field:"description"},{default:u((()=>[m(d,{modelValue:n(x).description,"onUpdate:modelValue":a[2]||(a[2]=e=>n(x).description=e),modelModifiers:{trim:!0},placeholder:"请填写描述","max-length":200,"show-word-limit":"","auto-size":{minRows:3,maxRows:5}},null,8,["modelValue"])])),_:1}),m(t,{label:"状态",field:"status"},{default:u((()=>[m(s,{modelValue:n(x).status,"onUpdate:modelValue":a[3]||(a[3]=e=>n(x).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{v as _};
