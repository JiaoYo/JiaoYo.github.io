import{am as t,b as e,z as n}from"./index-BxLtnPqY.js";function a(){return t.get("/api/dept")}function i(e){return t.get(`/api/dept/${e}`)}function l(e){return t.post("/api/dept/set",e)}function s(e){return t.post("/api/dept/del",e)}function r(t){const i=e(!1),l=e([]),s=e([]),r=(t,e)=>{const n=t.filter((t=>t.pid===e));return n.length?n.map((e=>({...e,children:r(t,e.id)}))):null};return{deptList:s,OldDeptList:l,getDeptList:async()=>{try{i.value=!0;const e=await a();l.value=e.data.list;let u=r(e.data.list,null);s.value=n.mapTree(u,(t=>{var e;return(null==(e=t.children)?void 0:e.length)&&(t.children=t.children.filter((t=>1===t.status))),t})),(null==t?void 0:t.onSuccess)&&t.onSuccess()}finally{i.value=!1}},loading:i}}export{a,s as d,i as g,l as s,r as u};
