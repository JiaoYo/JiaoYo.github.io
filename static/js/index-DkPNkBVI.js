import{_ as e}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-CffckxS7.js";import{b as t,W as l,D as a,d as n,o as s,f as i,E as o,c as d,h as u,w as c,g as r,s as p,i as m,F as f,j as v,r as y,t as _,a as h,T as x,f7 as g,V as w,e as k,x as b,G as C,J as S,Y as j,_ as D}from"./index-BCJ5rRXW.js";import{_ as E}from"./AddDictModal.vue_vue_type_script_setup_true_lang-DFYWePlr.js";import{_ as V}from"./AddDictDataModal.vue_vue_type_script_setup_true_lang-tKTe8Ps0.js";import{u as A}from"./useBreakpoint-CIhggdU6.js";import{g as L,d as M,b as R,c as B}from"./dict-CpA6Uc0s.js";import{u as z}from"./useDict-4oZ_IBDY.js";import"./regexp-D-rE1x7-.js";import"./useForm-CKQ1L_Tz.js";import"./index-RQvjFlZt.js";const F={class:"menu-list"},I=["onClick"],O=n({__name:"index",props:{menu:{}},emits:["select"],setup(e,{emit:n}){const w=n,k=t(null),{x:b,y:C,showMenu:S}=(e=>{const n=t(!1),s=t(0),i=t(0),o=e=>{e.preventDefault(),e.stopPropagation(),n.value=!0,s.value=e.clientX,i.value=e.clientY},d=()=>{n.value=!1};return l((()=>{e.value.addEventListener("contextmenu",o),window.addEventListener("contextmenu",d,!0),window.addEventListener("click",d,!0)})),a((()=>{const t=e.value;t&&t.removeEventListener("contextmenu",o),window.removeEventListener("contextmenu",d),window.removeEventListener("click",d)})),{x:s,y:i,showMenu:n}})(k),j=e=>{e.style.height=0},D=e=>{e.style.height="auto";const t=e.clientHeight;e.style.height=0,requestAnimationFrame((()=>{e.style.height=t+"px",e.style.transition="0.3s"}))},E=e=>{e.style.transition="none"};return(e,t)=>(s(),i("div",{ref_key:"containRef",ref:k},[o(e.$slots,"default"),(s(),d(g,{to:"body"},[u(x,{onBeforeEnter:j,onEnter:D,onAfterEnter:E},{default:c((()=>[r(S)?(s(),i("div",{key:0,class:"context-menu",style:p({left:r(b)+"px",top:r(C)+"px"})},[m("div",F,[(s(!0),i(f,null,v(e.menu,((e,t)=>(s(),i("div",{class:"menu-item",onClick:t=>(e=>{w("select",e),S.value=!1})(e),key:e.label},[(s(),d(y(e.icon))),m("span",null,_(e.label),1)],8,I)))),128))])],4)):h("",!0)])),_:1})]))],512))}}),U={class:"gi_page dict-manage"},G={class:"left"},J={class:"List"},P=["onClick"],W={style:{flex:"1",display:"flex","flex-direction":"column"}},Y=D(n({name:"SystemRole",__name:"index",setup(l){const{data:a}=z({code:"status"}),n=t(),o=t(),d=w({name:"",status:""}),{loading:p,tableData:y,pagination:h,selectedKeys:x,search:g,select:D,selectAll:F,handleDelete:I}=A((e=>R({...e,id:Y.value})),{immediate:!1,formatResult:e=>e}),Y=t(),$=t([]),q=async()=>{const{data:e}=await L({page:1,size:100});$.value=e.list,Y.value=e.list[0].id,g()},H=t(0),K=()=>{d.name="",d.status="",g()};q();const N=()=>{var e;null==(e=n.value)||e.add()},T=(e,t)=>{"edit"==e.key?(e=>{var t;null==(t=n.value)||t.edit(e)})(t):(async e=>{await B({ids:[null==e?void 0:e.id]}),j.success("删除成功！"),q(),H.value=0})(t)},X=()=>{if(!x.value.length)return j.warning("请选择字典数据！");I((()=>M({ids:x.value})))},Q=()=>{var e;null==(e=o.value)||e.add(Y.value)};return(t,l)=>{const w=k("icon-search"),j=k("a-input"),A=O,L=k("icon-plus"),R=k("a-button"),B=k("a-select"),z=k("icon-refresh"),Z=k("a-space"),ee=k("icon-delete"),te=k("a-row"),le=k("a-table-column"),ae=e,ne=k("icon-edit"),se=k("a-popconfirm"),ie=k("a-table"),oe=k("a-card");return s(),i("div",U,[u(oe,{title:"字典管理","body-style":{display:"flex",flex:"1"},style:{height:"100%",display:"flex","flex-direction":"column"}},{default:c((()=>[m("div",G,[m("div",null,[u(j,{modelValue:r(d).name,"onUpdate:modelValue":l[0]||(l[0]=e=>r(d).name=e),placeholder:"关键词","allow-clear":"",style:{width:"100%","margin-bottom":"10px"}},{prefix:c((()=>[u(w)])),_:1},8,["modelValue"]),m("div",J,[(s(!0),i(f,null,v(r($),((e,t)=>(s(),i("div",{class:b(["listItem",{active:t==r(H)}]),key:e.id,onClick:l=>((e,t)=>{Y.value=e.id,H.value=t,g()})(e,t)},[u(A,{class:"block1",menu:[{label:"编辑",key:"edit",icon:"icon-edit"},{label:"删除",key:"delete",icon:"icon-delete"}],onSelect:t=>T(t,e)},{default:c((()=>[C(_(e.name+` (${e.code})`),1)])),_:2},1032,["onSelect"])],10,P)))),128))])]),u(R,{type:"primary",onClick:N,style:{width:"100%"}},{icon:c((()=>[u(L)])),default:c((()=>[l[3]||(l[3]=m("span",null,"新增",-1))])),_:1})]),m("div",W,[u(te,{justify:"space-between"},{default:c((()=>[u(Z,{wrap:""},{default:c((()=>[u(j,{modelValue:r(d).name,"onUpdate:modelValue":l[1]||(l[1]=e=>r(d).name=e),placeholder:"字典类型名称/编码","allow-clear":"",style:{width:"250px"}},{prefix:c((()=>[u(w)])),_:1},8,["modelValue"]),u(B,{modelValue:r(d).status,"onUpdate:modelValue":l[2]||(l[2]=e=>r(d).status=e),options:r(a),placeholder:"状态","allow-clear":"",style:{width:"120px"}},null,8,["modelValue","options"]),u(R,{type:"primary",onClick:r(g)},{icon:c((()=>[u(w)])),default:c((()=>[l[4]||(l[4]=m("span",null,"查询",-1))])),_:1},8,["onClick"]),u(R,{onClick:K},{icon:c((()=>[u(z)])),default:c((()=>[l[5]||(l[5]=m("span",null,"重置",-1))])),_:1})])),_:1}),u(Z,{wrap:""},{default:c((()=>[u(R,{type:"primary",onClick:Q},{icon:c((()=>[u(L)])),default:c((()=>[l[6]||(l[6]=m("span",null,"新增",-1))])),_:1}),u(R,{type:"primary",status:"danger",onClick:X},{icon:c((()=>[u(ee)])),default:c((()=>[l[7]||(l[7]=m("span",null,"删除",-1))])),_:1})])),_:1})])),_:1}),u(ie,{"row-key":"id",data:r(y),bordered:{cell:!0},loading:r(p),scroll:{x:"100%",y:"100%",minWidth:1e3},pagination:r(h),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":r(x),onSelect:r(D),onSelectAll:r(F),style:{height:"100%",flex:"1"}},{columns:c((()=>[u(le,{title:"序号",width:64},{cell:c((e=>[C(_(e.rowIndex+1),1)])),_:1}),u(le,{title:"字典名","data-index":"name"}),u(le,{title:"字典值","data-index":"value"}),u(le,{title:"状态",width:100,align:"center"},{cell:c((({record:e})=>[u(ae,{status:e.status},null,8,["status"])])),_:1}),u(le,{title:"操作",width:280,align:"center",fixed:r(S)()?void 0:"right"},{cell:c((({record:e})=>[u(Z,null,{default:c((()=>[u(R,{type:"primary",size:"mini",onClick:t=>{return l=e,void(null==(a=o.value)||a.edit(l));var l,a}},{icon:c((()=>[u(ne)])),default:c((()=>[l[8]||(l[8]=m("span",null,"编辑",-1))])),_:2},1032,["onClick"]),u(se,{type:"warning",content:"确定删除该数据吗?",onBeforeOk:t=>{return l=e,I((()=>M({ids:[l.id]})),{showModal:!1});var l}},{default:c((()=>[u(R,{type:"primary",status:"danger",size:"mini"},{icon:c((()=>[u(ee)])),default:c((()=>[l[9]||(l[9]=m("span",null,"删除",-1))])),_:1})])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["data","loading","pagination","selected-keys","onSelect","onSelectAll"])])])),_:1}),u(E,{ref_key:"AddDictModalRef",ref:n,onSaveSuccess:q},null,512),u(V,{ref_key:"DictDataModalRef",ref:o,onSaveSuccess:r(g)},null,8,["onSaveSuccess"])])}}}),[["__scopeId","data-v-ebdbc503"]]);export{Y as default};
