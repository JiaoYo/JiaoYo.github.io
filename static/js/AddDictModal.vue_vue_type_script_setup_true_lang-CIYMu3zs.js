import{b as e}from"./regexp-D-rE1x7-.js";import{d as a,b as l,k as s,e as t,o as d,c as o,w as i,h as u,g as m,H as r,Y as n}from"./index-BxLtnPqY.js";import{u as c}from"./useForm-BJmYEhb2.js";import{a as f}from"./dict-f_z2uulW.js";const p=a({__name:"AddDictModal",emits:["save-success"],setup(a,{expose:p,emit:v}){const h=v,x=l(),b=l(""),w=s((()=>!!b.value)),V=s((()=>w.value?"编辑字典":"新增字典")),_=l(!1),{form:g,resetForm:k}=c({id:void 0,name:"",code:"",status:1,description:""}),y={name:[{required:!0,message:"请输入字典名称"}],code:[{required:!0,message:"请输入字典编码"},{match:e,message:"格式不对！只能是英文"}],status:[{required:!0}]},j=()=>{var e;null==(e=x.value)||e.resetFields(),k()};p({add:()=>{b.value="",_.value=!0},edit:async e=>{b.value=e.id,_.value=!0,delete e.infoList,Object.assign(g,e)}});const M=async()=>{var e;try{if(await(null==(e=x.value)?void 0:e.validate()))return!1;await f(g),n.success("保存成功"),h("save-success")}catch(a){return!1}};return(e,a)=>{const l=t("a-input"),s=t("a-form-item"),n=t("a-textarea"),c=t("a-switch"),f=t("a-form"),p=t("a-modal");return d(),o(p,{visible:m(_),"onUpdate:visible":a[4]||(a[4]=e=>r(_)?_.value=e:null),title:m(V),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:M,onClose:j},{default:i((()=>[u(f,{ref_key:"formRef",ref:x,model:m(g),rules:y,size:"medium","auto-label-width":""},{default:i((()=>[u(s,{label:"字典名称",field:"name"},{default:i((()=>[u(l,{modelValue:m(g).name,"onUpdate:modelValue":a[0]||(a[0]=e=>m(g).name=e),modelModifiers:{trim:!0},placeholder:"请输入字典名称","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),u(s,{label:"字典编码",field:"code"},{default:i((()=>[u(l,{modelValue:m(g).code,"onUpdate:modelValue":a[1]||(a[1]=e=>m(g).code=e),modelModifiers:{trim:!0},placeholder:"请输入字典编码","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),u(s,{label:"描述",field:"description"},{default:i((()=>[u(n,{modelValue:m(g).description,"onUpdate:modelValue":a[2]||(a[2]=e=>m(g).description=e),modelModifiers:{trim:!0},placeholder:"请填写描述","max-length":200,"show-word-limit":"","auto-size":{minRows:3,maxRows:5}},null,8,["modelValue"])])),_:1}),u(s,{label:"状态",field:"status"},{default:i((()=>[u(c,{modelValue:m(g).status,"onUpdate:modelValue":a[3]||(a[3]=e=>m(g).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{p as _};
