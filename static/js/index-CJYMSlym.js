import{u as e,_ as a}from"./useMyTable-BrpdJPHX.js";import{_ as l}from"./AddRoleModal.vue_vue_type_script_setup_true_lang-Pr9V4_pd.js";import{_ as t}from"./PermModal.vue_vue_type_script_setup_true_lang-DhAOTq6n.js";import{d as n,h as s,e as i,J as o,G as d,b as r,o as u,f as c,w as p,g as m,i as f,H as y,Y as g}from"./index-7Ke4gaSZ.js";import{a as _,d as h}from"./role-BRafqpm0.js";import{u as w}from"./useDict-cGdtdt7Q.js";import"./vue-draggable-plus-BY6dFKJ8.js";import"./useForm-C662ILVi.js";import"./menu-BOBjluFt.js";import"./dict-CE-AhKTF.js";const b={class:"gi_page role-manage"},v=n({name:"SystemRole",__name:"index",setup(n){const{data:v}=w({code:"status"}),{tableData:k,getData:x,columns:j,searchParams:C,pagination:S,select:D,selectedKeys:I,selectAll:V,rowKey:A,loading:T,visible:K,handleEdit:R,handleAdd:U,closeVisible:z,successsDelete:M,operateType:P,editData:E,resetSearchParams:F,columnChecks:B}=e({apiFn:_,apiParams:{page:1,size:10,status:null,name:""},rowKey:"id",showtotal:!1,columns:[{title:"序号",dataIndex:"index",align:"center",render:({rowIndex:e})=>s("span",null,[e+1])},{title:"角色名称",align:"center",width:180,dataIndex:"name"},{title:"角色编码",width:180,align:"center",dataIndex:"code"},{title:"状态",align:"center",width:80,dataIndex:"status",render:({record:e})=>s(i("a-tag"),{color:1==e.status?"green":"red"},{default:()=>[1==e.status?"正常":"禁用"]})},{title:"描述",align:"center",minWidth:300,width:200,dataIndex:"description"},{title:"创建时间",align:"center",width:180,dataIndex:"createTime"},{title:"操作",fixed:o()?void 0:"right",render:({record:e})=>s(i("a-space"),null,{default:()=>[s(i("a-button"),{icon:s(i("icon-edit"),null,null),type:"primary",size:"mini",onClick:()=>R(e.id)},{default:()=>[s("span",null,[d("编辑")])]}),s(i("a-button"),{icon:s(i("icon-safe"),null,null),type:"primary",size:"mini",status:"success",onClick:()=>L(e)},{default:()=>[s("span",null,[d("分配权限")])]}),s(i("a-popconfirm"),{type:"warning",content:"确定删除该用户吗?",onBeforeOk:()=>H(e.id)},{default:()=>[s(i("a-button"),{type:"primary",icon:s(i("icon-delete"),null,null),status:"danger",size:"mini",disabled:e.disabled},{default:()=>[s("span",null,[d("删除")])]})]})]})}],formatResult:e=>(e.forEach((e=>{e.disabled=!!e.disabled})),e)}),G=async()=>{if(!I.value.length)return g.warning("请选择角色！");await h({ids:I.value}),M()},H=async e=>{await h({ids:[e]}),M()},J=r(null),L=e=>{var a;null==(a=J.value)||a.open({id:e.id,title:e.name})};return(e,n)=>{const o=i("icon-search"),d=i("a-input"),r=i("a-select"),g=i("a-button"),_=i("icon-refresh"),h=i("a-space"),w=i("icon-plus"),R=i("icon-delete"),z=a,M=i("a-row"),H=i("a-table"),L=i("a-card");return u(),c("div",b,[s(L,{title:"角色管理"},{default:p((()=>[s(M,{justify:"space-between"},{default:p((()=>[s(h,{wrap:""},{default:p((()=>[s(d,{modelValue:m(C).name,"onUpdate:modelValue":n[0]||(n[0]=e=>m(C).name=e),placeholder:"输入角色名搜索","allow-clear":"",style:{width:"250px"}},{prefix:p((()=>[s(o)])),_:1},8,["modelValue"]),s(r,{modelValue:m(C).status,"onUpdate:modelValue":n[1]||(n[1]=e=>m(C).status=e),options:m(v),placeholder:"角色状态","allow-clear":"",style:{width:"120px"}},null,8,["modelValue","options"]),s(g,{type:"primary",onClick:m(x)},{icon:p((()=>[s(o)])),default:p((()=>[n[4]||(n[4]=f("span",null,"查询",-1))])),_:1},8,["onClick"]),s(g,{onClick:m(F)},{icon:p((()=>[s(_)])),default:p((()=>[n[5]||(n[5]=f("span",null,"重置",-1))])),_:1},8,["onClick"])])),_:1}),s(h,{wrap:""},{default:p((()=>[s(g,{type:"primary",onClick:m(U)},{icon:p((()=>[s(w)])),default:p((()=>[n[6]||(n[6]=f("span",null,"新增",-1))])),_:1},8,["onClick"]),s(g,{type:"primary",status:"danger",onClick:G,disabled:0==m(I).length},{icon:p((()=>[s(R)])),default:p((()=>[n[7]||(n[7]=f("span",null,"批量删除",-1))])),_:1},8,["disabled"]),s(z,{columns:m(B),"onUpdate:columns":n[2]||(n[2]=e=>y(B)?B.value=e:null)},null,8,["columns"])])),_:1})])),_:1}),s(H,{columns:m(j),data:m(k),pagination:m(S),selectedKeys:m(I),onSelect:m(D),onSelectAll:m(V),"row-key":m(A),"row-selection":{type:"checkbox",showCheckedAll:!0},loading:m(T)},null,8,["columns","data","pagination","selectedKeys","onSelect","onSelectAll","row-key","loading"]),s(l,{visible:m(K),"onUpdate:visible":n[3]||(n[3]=e=>y(K)?K.value=e:null),editData:m(E),operateType:m(P),onSaveSuccess:m(x)},null,8,["visible","editData","operateType","onSaveSuccess"]),s(t,{ref_key:"permModalRef",ref:J},null,512)])),_:1})])}}});export{v as default};
